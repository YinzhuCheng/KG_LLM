(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=t(a);fetch(a.href,i)}})();var Fl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Iu(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Of={exports:{}},Us={},Mf={exports:{}},ut={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jg;function zb(){if(jg)return ut;jg=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator;function p(N){return N===null||typeof N!="object"?null:(N=h&&N[h]||N["@@iterator"],typeof N=="function"?N:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,w={};function x(N,$,oe){this.props=N,this.context=$,this.refs=w,this.updater=oe||g}x.prototype.isReactComponent={},x.prototype.setState=function(N,$){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,$,"setState")},x.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function b(){}b.prototype=x.prototype;function E(N,$,oe){this.props=N,this.context=$,this.refs=w,this.updater=oe||g}var _=E.prototype=new b;_.constructor=E,m(_,x.prototype),_.isPureReactComponent=!0;var C=Array.isArray,B=Object.prototype.hasOwnProperty,L={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function z(N,$,oe){var ie,ne={},xe=null,Pe=null;if($!=null)for(ie in $.ref!==void 0&&(Pe=$.ref),$.key!==void 0&&(xe=""+$.key),$)B.call($,ie)&&!A.hasOwnProperty(ie)&&(ne[ie]=$[ie]);var Ce=arguments.length-2;if(Ce===1)ne.children=oe;else if(1<Ce){for(var me=Array(Ce),fe=0;fe<Ce;fe++)me[fe]=arguments[fe+2];ne.children=me}if(N&&N.defaultProps)for(ie in Ce=N.defaultProps,Ce)ne[ie]===void 0&&(ne[ie]=Ce[ie]);return{$$typeof:r,type:N,key:xe,ref:Pe,props:ne,_owner:L.current}}function M(N,$){return{$$typeof:r,type:N.type,key:$,ref:N.ref,props:N.props,_owner:N._owner}}function U(N){return typeof N=="object"&&N!==null&&N.$$typeof===r}function q(N){var $={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(oe){return $[oe]})}var D=/\/+/g;function F(N,$){return typeof N=="object"&&N!==null&&N.key!=null?q(""+N.key):$.toString(36)}function T(N,$,oe,ie,ne){var xe=typeof N;(xe==="undefined"||xe==="boolean")&&(N=null);var Pe=!1;if(N===null)Pe=!0;else switch(xe){case"string":case"number":Pe=!0;break;case"object":switch(N.$$typeof){case r:case e:Pe=!0}}if(Pe)return Pe=N,ne=ne(Pe),N=ie===""?"."+F(Pe,0):ie,C(ne)?(oe="",N!=null&&(oe=N.replace(D,"$&/")+"/"),T(ne,$,oe,"",function(fe){return fe})):ne!=null&&(U(ne)&&(ne=M(ne,oe+(!ne.key||Pe&&Pe.key===ne.key?"":(""+ne.key).replace(D,"$&/")+"/")+N)),$.push(ne)),1;if(Pe=0,ie=ie===""?".":ie+":",C(N))for(var Ce=0;Ce<N.length;Ce++){xe=N[Ce];var me=ie+F(xe,Ce);Pe+=T(xe,$,oe,me,ne)}else if(me=p(N),typeof me=="function")for(N=me.call(N),Ce=0;!(xe=N.next()).done;)xe=xe.value,me=ie+F(xe,Ce++),Pe+=T(xe,$,oe,me,ne);else if(xe==="object")throw $=String(N),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.");return Pe}function G(N,$,oe){if(N==null)return N;var ie=[],ne=0;return T(N,ie,"","",function(xe){return $.call(oe,xe,ne++)}),ie}function Q(N){if(N._status===-1){var $=N._result;$=$(),$.then(function(oe){(N._status===0||N._status===-1)&&(N._status=1,N._result=oe)},function(oe){(N._status===0||N._status===-1)&&(N._status=2,N._result=oe)}),N._status===-1&&(N._status=0,N._result=$)}if(N._status===1)return N._result.default;throw N._result}var W={current:null},X={transition:null},Z={ReactCurrentDispatcher:W,ReactCurrentBatchConfig:X,ReactCurrentOwner:L};function te(){throw Error("act(...) is not supported in production builds of React.")}return ut.Children={map:G,forEach:function(N,$,oe){G(N,function(){$.apply(this,arguments)},oe)},count:function(N){var $=0;return G(N,function(){$++}),$},toArray:function(N){return G(N,function($){return $})||[]},only:function(N){if(!U(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},ut.Component=x,ut.Fragment=t,ut.Profiler=a,ut.PureComponent=E,ut.StrictMode=n,ut.Suspense=c,ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z,ut.act=te,ut.cloneElement=function(N,$,oe){if(N==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+N+".");var ie=m({},N.props),ne=N.key,xe=N.ref,Pe=N._owner;if($!=null){if($.ref!==void 0&&(xe=$.ref,Pe=L.current),$.key!==void 0&&(ne=""+$.key),N.type&&N.type.defaultProps)var Ce=N.type.defaultProps;for(me in $)B.call($,me)&&!A.hasOwnProperty(me)&&(ie[me]=$[me]===void 0&&Ce!==void 0?Ce[me]:$[me])}var me=arguments.length-2;if(me===1)ie.children=oe;else if(1<me){Ce=Array(me);for(var fe=0;fe<me;fe++)Ce[fe]=arguments[fe+2];ie.children=Ce}return{$$typeof:r,type:N.type,key:ne,ref:xe,props:ie,_owner:Pe}},ut.createContext=function(N){return N={$$typeof:o,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},N.Provider={$$typeof:i,_context:N},N.Consumer=N},ut.createElement=z,ut.createFactory=function(N){var $=z.bind(null,N);return $.type=N,$},ut.createRef=function(){return{current:null}},ut.forwardRef=function(N){return{$$typeof:l,render:N}},ut.isValidElement=U,ut.lazy=function(N){return{$$typeof:d,_payload:{_status:-1,_result:N},_init:Q}},ut.memo=function(N,$){return{$$typeof:f,type:N,compare:$===void 0?null:$}},ut.startTransition=function(N){var $=X.transition;X.transition={};try{N()}finally{X.transition=$}},ut.unstable_act=te,ut.useCallback=function(N,$){return W.current.useCallback(N,$)},ut.useContext=function(N){return W.current.useContext(N)},ut.useDebugValue=function(){},ut.useDeferredValue=function(N){return W.current.useDeferredValue(N)},ut.useEffect=function(N,$){return W.current.useEffect(N,$)},ut.useId=function(){return W.current.useId()},ut.useImperativeHandle=function(N,$,oe){return W.current.useImperativeHandle(N,$,oe)},ut.useInsertionEffect=function(N,$){return W.current.useInsertionEffect(N,$)},ut.useLayoutEffect=function(N,$){return W.current.useLayoutEffect(N,$)},ut.useMemo=function(N,$){return W.current.useMemo(N,$)},ut.useReducer=function(N,$,oe){return W.current.useReducer(N,$,oe)},ut.useRef=function(N){return W.current.useRef(N)},ut.useState=function(N){return W.current.useState(N)},ut.useSyncExternalStore=function(N,$,oe){return W.current.useSyncExternalStore(N,$,oe)},ut.useTransition=function(){return W.current.useTransition()},ut.version="18.3.1",ut}var Vg;function bo(){return Vg||(Vg=1,Mf.exports=zb()),Mf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qg;function Fb(){if(qg)return Us;qg=1;var r=bo(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(l,c,f){var d,h={},p=null,g=null;f!==void 0&&(p=""+f),c.key!==void 0&&(p=""+c.key),c.ref!==void 0&&(g=c.ref);for(d in c)n.call(c,d)&&!i.hasOwnProperty(d)&&(h[d]=c[d]);if(l&&l.defaultProps)for(d in c=l.defaultProps,c)h[d]===void 0&&(h[d]=c[d]);return{$$typeof:e,type:l,key:p,ref:g,props:h,_owner:a.current}}return Us.Fragment=t,Us.jsx=o,Us.jsxs=o,Us}var Wg;function $b(){return Wg||(Wg=1,Of.exports=Fb()),Of.exports}var ue=$b(),Et=bo();const K0=Iu(Et);var $l={},zf={exports:{}},Or={},Ff={exports:{}},$f={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gg;function Ub(){return Gg||(Gg=1,(function(r){function e(X,Z){var te=X.length;X.push(Z);e:for(;0<te;){var N=te-1>>>1,$=X[N];if(0<a($,Z))X[N]=Z,X[te]=$,te=N;else break e}}function t(X){return X.length===0?null:X[0]}function n(X){if(X.length===0)return null;var Z=X[0],te=X.pop();if(te!==Z){X[0]=te;e:for(var N=0,$=X.length,oe=$>>>1;N<oe;){var ie=2*(N+1)-1,ne=X[ie],xe=ie+1,Pe=X[xe];if(0>a(ne,te))xe<$&&0>a(Pe,ne)?(X[N]=Pe,X[xe]=te,N=xe):(X[N]=ne,X[ie]=te,N=ie);else if(xe<$&&0>a(Pe,te))X[N]=Pe,X[xe]=te,N=xe;else break e}}return Z}function a(X,Z){var te=X.sortIndex-Z.sortIndex;return te!==0?te:X.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;r.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();r.unstable_now=function(){return o.now()-l}}var c=[],f=[],d=1,h=null,p=3,g=!1,m=!1,w=!1,x=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(X){for(var Z=t(f);Z!==null;){if(Z.callback===null)n(f);else if(Z.startTime<=X)n(f),Z.sortIndex=Z.expirationTime,e(c,Z);else break;Z=t(f)}}function C(X){if(w=!1,_(X),!m)if(t(c)!==null)m=!0,Q(B);else{var Z=t(f);Z!==null&&W(C,Z.startTime-X)}}function B(X,Z){m=!1,w&&(w=!1,b(z),z=-1),g=!0;var te=p;try{for(_(Z),h=t(c);h!==null&&(!(h.expirationTime>Z)||X&&!q());){var N=h.callback;if(typeof N=="function"){h.callback=null,p=h.priorityLevel;var $=N(h.expirationTime<=Z);Z=r.unstable_now(),typeof $=="function"?h.callback=$:h===t(c)&&n(c),_(Z)}else n(c);h=t(c)}if(h!==null)var oe=!0;else{var ie=t(f);ie!==null&&W(C,ie.startTime-Z),oe=!1}return oe}finally{h=null,p=te,g=!1}}var L=!1,A=null,z=-1,M=5,U=-1;function q(){return!(r.unstable_now()-U<M)}function D(){if(A!==null){var X=r.unstable_now();U=X;var Z=!0;try{Z=A(!0,X)}finally{Z?F():(L=!1,A=null)}}else L=!1}var F;if(typeof E=="function")F=function(){E(D)};else if(typeof MessageChannel<"u"){var T=new MessageChannel,G=T.port2;T.port1.onmessage=D,F=function(){G.postMessage(null)}}else F=function(){x(D,0)};function Q(X){A=X,L||(L=!0,F())}function W(X,Z){z=x(function(){X(r.unstable_now())},Z)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(X){X.callback=null},r.unstable_continueExecution=function(){m||g||(m=!0,Q(B))},r.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<X?Math.floor(1e3/X):5},r.unstable_getCurrentPriorityLevel=function(){return p},r.unstable_getFirstCallbackNode=function(){return t(c)},r.unstable_next=function(X){switch(p){case 1:case 2:case 3:var Z=3;break;default:Z=p}var te=p;p=Z;try{return X()}finally{p=te}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(X,Z){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var te=p;p=X;try{return Z()}finally{p=te}},r.unstable_scheduleCallback=function(X,Z,te){var N=r.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?N+te:N):te=N,X){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=te+$,X={id:d++,callback:Z,priorityLevel:X,startTime:te,expirationTime:$,sortIndex:-1},te>N?(X.sortIndex=te,e(f,X),t(c)===null&&X===t(f)&&(w?(b(z),z=-1):w=!0,W(C,te-N))):(X.sortIndex=$,e(c,X),m||g||(m=!0,Q(B))),X},r.unstable_shouldYield=q,r.unstable_wrapCallback=function(X){var Z=p;return function(){var te=p;p=Z;try{return X.apply(this,arguments)}finally{p=te}}}})($f)),$f}var Hg;function jb(){return Hg||(Hg=1,Ff.exports=Ub()),Ff.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kg;function Vb(){if(Kg)return Or;Kg=1;var r=bo(),e=jb();function t(s){for(var u="https://reactjs.org/docs/error-decoder.html?invariant="+s,v=1;v<arguments.length;v++)u+="&args[]="+encodeURIComponent(arguments[v]);return"Minified React error #"+s+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,a={};function i(s,u){o(s,u),o(s+"Capture",u)}function o(s,u){for(a[s]=u,s=0;s<u.length;s++)n.add(u[s])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},h={};function p(s){return c.call(h,s)?!0:c.call(d,s)?!1:f.test(s)?h[s]=!0:(d[s]=!0,!1)}function g(s,u,v,y){if(v!==null&&v.type===0)return!1;switch(typeof u){case"function":case"symbol":return!0;case"boolean":return y?!1:v!==null?!v.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function m(s,u,v,y){if(u===null||typeof u>"u"||g(s,u,v,y))return!0;if(y)return!1;if(v!==null)switch(v.type){case 3:return!u;case 4:return u===!1;case 5:return isNaN(u);case 6:return isNaN(u)||1>u}return!1}function w(s,u,v,y,S,P,V){this.acceptsBooleans=u===2||u===3||u===4,this.attributeName=y,this.attributeNamespace=S,this.mustUseProperty=v,this.propertyName=s,this.type=u,this.sanitizeURL=P,this.removeEmptyString=V}var x={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){x[s]=new w(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var u=s[0];x[u]=new w(u,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){x[s]=new w(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){x[s]=new w(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){x[s]=new w(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){x[s]=new w(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){x[s]=new w(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){x[s]=new w(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){x[s]=new w(s,5,!1,s.toLowerCase(),null,!1,!1)});var b=/[\-:]([a-z])/g;function E(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var u=s.replace(b,E);x[u]=new w(u,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var u=s.replace(b,E);x[u]=new w(u,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var u=s.replace(b,E);x[u]=new w(u,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){x[s]=new w(s,1,!1,s.toLowerCase(),null,!1,!1)}),x.xlinkHref=new w("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){x[s]=new w(s,1,!1,s.toLowerCase(),null,!0,!0)});function _(s,u,v,y){var S=x.hasOwnProperty(u)?x[u]:null;(S!==null?S.type!==0:y||!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(m(u,v,S,y)&&(v=null),y||S===null?p(u)&&(v===null?s.removeAttribute(u):s.setAttribute(u,""+v)):S.mustUseProperty?s[S.propertyName]=v===null?S.type===3?!1:"":v:(u=S.attributeName,y=S.attributeNamespace,v===null?s.removeAttribute(u):(S=S.type,v=S===3||S===4&&v===!0?"":""+v,y?s.setAttributeNS(y,u,v):s.setAttribute(u,v))))}var C=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,B=Symbol.for("react.element"),L=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),U=Symbol.for("react.provider"),q=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),G=Symbol.for("react.memo"),Q=Symbol.for("react.lazy"),W=Symbol.for("react.offscreen"),X=Symbol.iterator;function Z(s){return s===null||typeof s!="object"?null:(s=X&&s[X]||s["@@iterator"],typeof s=="function"?s:null)}var te=Object.assign,N;function $(s){if(N===void 0)try{throw Error()}catch(v){var u=v.stack.trim().match(/\n( *(at )?)/);N=u&&u[1]||""}return`
`+N+s}var oe=!1;function ie(s,u){if(!s||oe)return"";oe=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(u)if(u=function(){throw Error()},Object.defineProperty(u.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(u,[])}catch(Te){var y=Te}Reflect.construct(s,[],u)}else{try{u.call()}catch(Te){y=Te}s.call(u.prototype)}else{try{throw Error()}catch(Te){y=Te}s()}}catch(Te){if(Te&&y&&typeof Te.stack=="string"){for(var S=Te.stack.split(`
`),P=y.stack.split(`
`),V=S.length-1,re=P.length-1;1<=V&&0<=re&&S[V]!==P[re];)re--;for(;1<=V&&0<=re;V--,re--)if(S[V]!==P[re]){if(V!==1||re!==1)do if(V--,re--,0>re||S[V]!==P[re]){var le=`
`+S[V].replace(" at new "," at ");return s.displayName&&le.includes("<anonymous>")&&(le=le.replace("<anonymous>",s.displayName)),le}while(1<=V&&0<=re);break}}}finally{oe=!1,Error.prepareStackTrace=v}return(s=s?s.displayName||s.name:"")?$(s):""}function ne(s){switch(s.tag){case 5:return $(s.type);case 16:return $("Lazy");case 13:return $("Suspense");case 19:return $("SuspenseList");case 0:case 2:case 15:return s=ie(s.type,!1),s;case 11:return s=ie(s.type.render,!1),s;case 1:return s=ie(s.type,!0),s;default:return""}}function xe(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case A:return"Fragment";case L:return"Portal";case M:return"Profiler";case z:return"StrictMode";case F:return"Suspense";case T:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case q:return(s.displayName||"Context")+".Consumer";case U:return(s._context.displayName||"Context")+".Provider";case D:var u=s.render;return s=s.displayName,s||(s=u.displayName||u.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case G:return u=s.displayName||null,u!==null?u:xe(s.type)||"Memo";case Q:u=s._payload,s=s._init;try{return xe(s(u))}catch{}}return null}function Pe(s){var u=s.type;switch(s.tag){case 24:return"Cache";case 9:return(u.displayName||"Context")+".Consumer";case 10:return(u._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=u.render,s=s.displayName||s.name||"",u.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return u;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xe(u);case 8:return u===z?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u}return null}function Ce(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function me(s){var u=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function fe(s){var u=me(s)?"checked":"value",v=Object.getOwnPropertyDescriptor(s.constructor.prototype,u),y=""+s[u];if(!s.hasOwnProperty(u)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var S=v.get,P=v.set;return Object.defineProperty(s,u,{configurable:!0,get:function(){return S.call(this)},set:function(V){y=""+V,P.call(this,V)}}),Object.defineProperty(s,u,{enumerable:v.enumerable}),{getValue:function(){return y},setValue:function(V){y=""+V},stopTracking:function(){s._valueTracker=null,delete s[u]}}}}function he(s){s._valueTracker||(s._valueTracker=fe(s))}function Ee(s){if(!s)return!1;var u=s._valueTracker;if(!u)return!0;var v=u.getValue(),y="";return s&&(y=me(s)?s.checked?"true":"false":s.value),s=y,s!==v?(u.setValue(s),!0):!1}function Re(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function I(s,u){var v=u.checked;return te({},u,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:v??s._wrapperState.initialChecked})}function pe(s,u){var v=u.defaultValue==null?"":u.defaultValue,y=u.checked!=null?u.checked:u.defaultChecked;v=Ce(u.value!=null?u.value:v),s._wrapperState={initialChecked:y,initialValue:v,controlled:u.type==="checkbox"||u.type==="radio"?u.checked!=null:u.value!=null}}function ge(s,u){u=u.checked,u!=null&&_(s,"checked",u,!1)}function Y(s,u){ge(s,u);var v=Ce(u.value),y=u.type;if(v!=null)y==="number"?(v===0&&s.value===""||s.value!=v)&&(s.value=""+v):s.value!==""+v&&(s.value=""+v);else if(y==="submit"||y==="reset"){s.removeAttribute("value");return}u.hasOwnProperty("value")?ae(s,u.type,v):u.hasOwnProperty("defaultValue")&&ae(s,u.type,Ce(u.defaultValue)),u.checked==null&&u.defaultChecked!=null&&(s.defaultChecked=!!u.defaultChecked)}function K(s,u,v){if(u.hasOwnProperty("value")||u.hasOwnProperty("defaultValue")){var y=u.type;if(!(y!=="submit"&&y!=="reset"||u.value!==void 0&&u.value!==null))return;u=""+s._wrapperState.initialValue,v||u===s.value||(s.value=u),s.defaultValue=u}v=s.name,v!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,v!==""&&(s.name=v)}function ae(s,u,v){(u!=="number"||Re(s.ownerDocument)!==s)&&(v==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+v&&(s.defaultValue=""+v))}var ve=Array.isArray;function ye(s,u,v,y){if(s=s.options,u){u={};for(var S=0;S<v.length;S++)u["$"+v[S]]=!0;for(v=0;v<s.length;v++)S=u.hasOwnProperty("$"+s[v].value),s[v].selected!==S&&(s[v].selected=S),S&&y&&(s[v].defaultSelected=!0)}else{for(v=""+Ce(v),u=null,S=0;S<s.length;S++){if(s[S].value===v){s[S].selected=!0,y&&(s[S].defaultSelected=!0);return}u!==null||s[S].disabled||(u=s[S])}u!==null&&(u.selected=!0)}}function se(s,u){if(u.dangerouslySetInnerHTML!=null)throw Error(t(91));return te({},u,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function Be(s,u){var v=u.value;if(v==null){if(v=u.children,u=u.defaultValue,v!=null){if(u!=null)throw Error(t(92));if(ve(v)){if(1<v.length)throw Error(t(93));v=v[0]}u=v}u==null&&(u=""),v=u}s._wrapperState={initialValue:Ce(v)}}function Ie(s,u){var v=Ce(u.value),y=Ce(u.defaultValue);v!=null&&(v=""+v,v!==s.value&&(s.value=v),u.defaultValue==null&&s.defaultValue!==v&&(s.defaultValue=v)),y!=null&&(s.defaultValue=""+y)}function Ae(s){var u=s.textContent;u===s._wrapperState.initialValue&&u!==""&&u!==null&&(s.value=u)}function ze(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function j(s,u){return s==null||s==="http://www.w3.org/1999/xhtml"?ze(u):s==="http://www.w3.org/2000/svg"&&u==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var k,R=(function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(u,v,y,S){MSApp.execUnsafeLocalFunction(function(){return s(u,v,y,S)})}:s})(function(s,u){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=u;else{for(k=k||document.createElement("div"),k.innerHTML="<svg>"+u.valueOf().toString()+"</svg>",u=k.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;u.firstChild;)s.appendChild(u.firstChild)}});function H(s,u){if(u){var v=s.firstChild;if(v&&v===s.lastChild&&v.nodeType===3){v.nodeValue=u;return}}s.textContent=u}var ee={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},J=["Webkit","ms","Moz","O"];Object.keys(ee).forEach(function(s){J.forEach(function(u){u=u+s.charAt(0).toUpperCase()+s.substring(1),ee[u]=ee[s]})});function O(s,u,v){return u==null||typeof u=="boolean"||u===""?"":v||typeof u!="number"||u===0||ee.hasOwnProperty(s)&&ee[s]?(""+u).trim():u+"px"}function ce(s,u){s=s.style;for(var v in u)if(u.hasOwnProperty(v)){var y=v.indexOf("--")===0,S=O(v,u[v],y);v==="float"&&(v="cssFloat"),y?s.setProperty(v,S):s[v]=S}}var _e=te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function we(s,u){if(u){if(_e[s]&&(u.children!=null||u.dangerouslySetInnerHTML!=null))throw Error(t(137,s));if(u.dangerouslySetInnerHTML!=null){if(u.children!=null)throw Error(t(60));if(typeof u.dangerouslySetInnerHTML!="object"||!("__html"in u.dangerouslySetInnerHTML))throw Error(t(61))}if(u.style!=null&&typeof u.style!="object")throw Error(t(62))}}function ke(s,u){if(s.indexOf("-")===-1)return typeof u.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Oe=null;function De(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var We=null,Ue=null,Ge=null;function nt(s){if(s=Cs(s)){if(typeof We!="function")throw Error(t(280));var u=s.stateNode;u&&(u=el(u),We(s.stateNode,s.type,u))}}function at(s){Ue?Ge?Ge.push(s):Ge=[s]:Ue=s}function Xe(){if(Ue){var s=Ue,u=Ge;if(Ge=Ue=null,nt(s),u)for(s=0;s<u.length;s++)nt(u[s])}}function st(s,u){return s(u)}function it(){}var Dt=!1;function St(s,u,v){if(Dt)return s(u,v);Dt=!0;try{return st(s,u,v)}finally{Dt=!1,(Ue!==null||Ge!==null)&&(it(),Xe())}}function jt(s,u){var v=s.stateNode;if(v===null)return null;var y=el(v);if(y===null)return null;v=y[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(s=s.type,y=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!y;break e;default:s=!1}if(s)return null;if(v&&typeof v!="function")throw Error(t(231,u,typeof v));return v}var Rt=!1;if(l)try{var Bt={};Object.defineProperty(Bt,"passive",{get:function(){Rt=!0}}),window.addEventListener("test",Bt,Bt),window.removeEventListener("test",Bt,Bt)}catch{Rt=!1}function Vt(s,u,v,y,S,P,V,re,le){var Te=Array.prototype.slice.call(arguments,3);try{u.apply(v,Te)}catch(Le){this.onError(Le)}}var Nt=!1,$r=null,kt=!1,Ur=null,an={onError:function(s){Nt=!0,$r=s}};function qn(s,u,v,y,S,P,V,re,le){Nt=!1,$r=null,Vt.apply(an,arguments)}function si(s,u,v,y,S,P,V,re,le){if(qn.apply(this,arguments),Nt){if(Nt){var Te=$r;Nt=!1,$r=null}else throw Error(t(198));kt||(kt=!0,Ur=Te)}}function _r(s){var u=s,v=s;if(s.alternate)for(;u.return;)u=u.return;else{s=u;do u=s,(u.flags&4098)!==0&&(v=u.return),s=u.return;while(s)}return u.tag===3?v:null}function or(s){if(s.tag===13){var u=s.memoizedState;if(u===null&&(s=s.alternate,s!==null&&(u=s.memoizedState)),u!==null)return u.dehydrated}return null}function Kt(s){if(_r(s)!==s)throw Error(t(188))}function vr(s){var u=s.alternate;if(!u){if(u=_r(s),u===null)throw Error(t(188));return u!==s?null:s}for(var v=s,y=u;;){var S=v.return;if(S===null)break;var P=S.alternate;if(P===null){if(y=S.return,y!==null){v=y;continue}break}if(S.child===P.child){for(P=S.child;P;){if(P===v)return Kt(S),s;if(P===y)return Kt(S),u;P=P.sibling}throw Error(t(188))}if(v.return!==y.return)v=S,y=P;else{for(var V=!1,re=S.child;re;){if(re===v){V=!0,v=S,y=P;break}if(re===y){V=!0,y=S,v=P;break}re=re.sibling}if(!V){for(re=P.child;re;){if(re===v){V=!0,v=P,y=S;break}if(re===y){V=!0,y=P,v=S;break}re=re.sibling}if(!V)throw Error(t(189))}}if(v.alternate!==y)throw Error(t(190))}if(v.tag!==3)throw Error(t(188));return v.stateNode.current===v?s:u}function Wn(s){return s=vr(s),s!==null?Sr(s):null}function Sr(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var u=Sr(s);if(u!==null)return u;s=s.sibling}return null}var is=e.unstable_scheduleCallback,Oo=e.unstable_cancelCallback,Qu=e.unstable_shouldYield,Ju=e.unstable_requestPaint,Lt=e.unstable_now,ec=e.unstable_getCurrentPriorityLevel,ss=e.unstable_ImmediatePriority,Mo=e.unstable_UserBlockingPriority,gn=e.unstable_NormalPriority,os=e.unstable_LowPriority,Ba=e.unstable_IdlePriority,Aa=null,jr=null;function tc(s){if(jr&&typeof jr.onCommitFiberRoot=="function")try{jr.onCommitFiberRoot(Aa,s,void 0,(s.current.flags&128)===128)}catch{}}var Ot=Math.clz32?Math.clz32:Ia,ls=Math.log,zo=Math.LN2;function Ia(s){return s>>>=0,s===0?32:31-(ls(s)/zo|0)|0}var pr=64,oi=4194304;function li(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function ui(s,u){var v=s.pendingLanes;if(v===0)return 0;var y=0,S=s.suspendedLanes,P=s.pingedLanes,V=v&268435455;if(V!==0){var re=V&~S;re!==0?y=li(re):(P&=V,P!==0&&(y=li(P)))}else V=v&~S,V!==0?y=li(V):P!==0&&(y=li(P));if(y===0)return 0;if(u!==0&&u!==y&&(u&S)===0&&(S=y&-y,P=u&-u,S>=P||S===16&&(P&4194240)!==0))return u;if((y&4)!==0&&(y|=v&16),u=s.entangledLanes,u!==0)for(s=s.entanglements,u&=y;0<u;)v=31-Ot(u),S=1<<v,y|=s[v],u&=~S;return y}function nx(s,u){switch(s){case 1:case 2:case 4:return u+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ax(s,u){for(var v=s.suspendedLanes,y=s.pingedLanes,S=s.expirationTimes,P=s.pendingLanes;0<P;){var V=31-Ot(P),re=1<<V,le=S[V];le===-1?((re&v)===0||(re&y)!==0)&&(S[V]=nx(re,u)):le<=u&&(s.expiredLanes|=re),P&=~re}}function rc(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function wv(){var s=pr;return pr<<=1,(pr&4194240)===0&&(pr=64),s}function nc(s){for(var u=[],v=0;31>v;v++)u.push(s);return u}function us(s,u,v){s.pendingLanes|=u,u!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,u=31-Ot(u),s[u]=v}function ix(s,u){var v=s.pendingLanes&~u;s.pendingLanes=u,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=u,s.mutableReadLanes&=u,s.entangledLanes&=u,u=s.entanglements;var y=s.eventTimes;for(s=s.expirationTimes;0<v;){var S=31-Ot(v),P=1<<S;u[S]=0,y[S]=-1,s[S]=-1,v&=~P}}function ac(s,u){var v=s.entangledLanes|=u;for(s=s.entanglements;v;){var y=31-Ot(v),S=1<<y;S&u|s[y]&u&&(s[y]|=u),v&=~S}}var mt=0;function xv(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var bv,ic,Ev,_v,Sv,sc=!1,Fo=[],Gn=null,Hn=null,Kn=null,cs=new Map,fs=new Map,Xn=[],sx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function kv(s,u){switch(s){case"focusin":case"focusout":Gn=null;break;case"dragenter":case"dragleave":Hn=null;break;case"mouseover":case"mouseout":Kn=null;break;case"pointerover":case"pointerout":cs.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":fs.delete(u.pointerId)}}function ds(s,u,v,y,S,P){return s===null||s.nativeEvent!==P?(s={blockedOn:u,domEventName:v,eventSystemFlags:y,nativeEvent:P,targetContainers:[S]},u!==null&&(u=Cs(u),u!==null&&ic(u)),s):(s.eventSystemFlags|=y,u=s.targetContainers,S!==null&&u.indexOf(S)===-1&&u.push(S),s)}function ox(s,u,v,y,S){switch(u){case"focusin":return Gn=ds(Gn,s,u,v,y,S),!0;case"dragenter":return Hn=ds(Hn,s,u,v,y,S),!0;case"mouseover":return Kn=ds(Kn,s,u,v,y,S),!0;case"pointerover":var P=S.pointerId;return cs.set(P,ds(cs.get(P)||null,s,u,v,y,S)),!0;case"gotpointercapture":return P=S.pointerId,fs.set(P,ds(fs.get(P)||null,s,u,v,y,S)),!0}return!1}function Cv(s){var u=Da(s.target);if(u!==null){var v=_r(u);if(v!==null){if(u=v.tag,u===13){if(u=or(v),u!==null){s.blockedOn=u,Sv(s.priority,function(){Ev(v)});return}}else if(u===3&&v.stateNode.current.memoizedState.isDehydrated){s.blockedOn=v.tag===3?v.stateNode.containerInfo:null;return}}}s.blockedOn=null}function $o(s){if(s.blockedOn!==null)return!1;for(var u=s.targetContainers;0<u.length;){var v=lc(s.domEventName,s.eventSystemFlags,u[0],s.nativeEvent);if(v===null){v=s.nativeEvent;var y=new v.constructor(v.type,v);Oe=y,v.target.dispatchEvent(y),Oe=null}else return u=Cs(v),u!==null&&ic(u),s.blockedOn=v,!1;u.shift()}return!0}function Tv(s,u,v){$o(s)&&v.delete(u)}function lx(){sc=!1,Gn!==null&&$o(Gn)&&(Gn=null),Hn!==null&&$o(Hn)&&(Hn=null),Kn!==null&&$o(Kn)&&(Kn=null),cs.forEach(Tv),fs.forEach(Tv)}function hs(s,u){s.blockedOn===u&&(s.blockedOn=null,sc||(sc=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,lx)))}function vs(s){function u(S){return hs(S,s)}if(0<Fo.length){hs(Fo[0],s);for(var v=1;v<Fo.length;v++){var y=Fo[v];y.blockedOn===s&&(y.blockedOn=null)}}for(Gn!==null&&hs(Gn,s),Hn!==null&&hs(Hn,s),Kn!==null&&hs(Kn,s),cs.forEach(u),fs.forEach(u),v=0;v<Xn.length;v++)y=Xn[v],y.blockedOn===s&&(y.blockedOn=null);for(;0<Xn.length&&(v=Xn[0],v.blockedOn===null);)Cv(v),v.blockedOn===null&&Xn.shift()}var ci=C.ReactCurrentBatchConfig,Uo=!0;function ux(s,u,v,y){var S=mt,P=ci.transition;ci.transition=null;try{mt=1,oc(s,u,v,y)}finally{mt=S,ci.transition=P}}function cx(s,u,v,y){var S=mt,P=ci.transition;ci.transition=null;try{mt=4,oc(s,u,v,y)}finally{mt=S,ci.transition=P}}function oc(s,u,v,y){if(Uo){var S=lc(s,u,v,y);if(S===null)kc(s,u,y,jo,v),kv(s,y);else if(ox(S,s,u,v,y))y.stopPropagation();else if(kv(s,y),u&4&&-1<sx.indexOf(s)){for(;S!==null;){var P=Cs(S);if(P!==null&&bv(P),P=lc(s,u,v,y),P===null&&kc(s,u,y,jo,v),P===S)break;S=P}S!==null&&y.stopPropagation()}else kc(s,u,y,null,v)}}var jo=null;function lc(s,u,v,y){if(jo=null,s=De(y),s=Da(s),s!==null)if(u=_r(s),u===null)s=null;else if(v=u.tag,v===13){if(s=or(u),s!==null)return s;s=null}else if(v===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;s=null}else u!==s&&(s=null);return jo=s,null}function Pv(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case ss:return 1;case Mo:return 4;case gn:case os:return 16;case Ba:return 536870912;default:return 16}default:return 16}}var Zn=null,uc=null,Vo=null;function Rv(){if(Vo)return Vo;var s,u=uc,v=u.length,y,S="value"in Zn?Zn.value:Zn.textContent,P=S.length;for(s=0;s<v&&u[s]===S[s];s++);var V=v-s;for(y=1;y<=V&&u[v-y]===S[P-y];y++);return Vo=S.slice(s,1<y?1-y:void 0)}function qo(s){var u=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&u===13&&(s=13)):s=u,s===10&&(s=13),32<=s||s===13?s:0}function Wo(){return!0}function Bv(){return!1}function Vr(s){function u(v,y,S,P,V){this._reactName=v,this._targetInst=S,this.type=y,this.nativeEvent=P,this.target=V,this.currentTarget=null;for(var re in s)s.hasOwnProperty(re)&&(v=s[re],this[re]=v?v(P):P[re]);return this.isDefaultPrevented=(P.defaultPrevented!=null?P.defaultPrevented:P.returnValue===!1)?Wo:Bv,this.isPropagationStopped=Bv,this}return te(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var v=this.nativeEvent;v&&(v.preventDefault?v.preventDefault():typeof v.returnValue!="unknown"&&(v.returnValue=!1),this.isDefaultPrevented=Wo)},stopPropagation:function(){var v=this.nativeEvent;v&&(v.stopPropagation?v.stopPropagation():typeof v.cancelBubble!="unknown"&&(v.cancelBubble=!0),this.isPropagationStopped=Wo)},persist:function(){},isPersistent:Wo}),u}var fi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cc=Vr(fi),ps=te({},fi,{view:0,detail:0}),fx=Vr(ps),fc,dc,gs,Go=te({},ps,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vc,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==gs&&(gs&&s.type==="mousemove"?(fc=s.screenX-gs.screenX,dc=s.screenY-gs.screenY):dc=fc=0,gs=s),fc)},movementY:function(s){return"movementY"in s?s.movementY:dc}}),Av=Vr(Go),dx=te({},Go,{dataTransfer:0}),hx=Vr(dx),vx=te({},ps,{relatedTarget:0}),hc=Vr(vx),px=te({},fi,{animationName:0,elapsedTime:0,pseudoElement:0}),gx=Vr(px),mx=te({},fi,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),yx=Vr(mx),wx=te({},fi,{data:0}),Iv=Vr(wx),xx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ex={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _x(s){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(s):(s=Ex[s])?!!u[s]:!1}function vc(){return _x}var Sx=te({},ps,{key:function(s){if(s.key){var u=xx[s.key]||s.key;if(u!=="Unidentified")return u}return s.type==="keypress"?(s=qo(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?bx[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vc,charCode:function(s){return s.type==="keypress"?qo(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?qo(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),kx=Vr(Sx),Cx=te({},Go,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Dv=Vr(Cx),Tx=te({},ps,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vc}),Px=Vr(Tx),Rx=te({},fi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Bx=Vr(Rx),Ax=te({},Go,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Ix=Vr(Ax),Dx=[9,13,27,32],pc=l&&"CompositionEvent"in window,ms=null;l&&"documentMode"in document&&(ms=document.documentMode);var Nx=l&&"TextEvent"in window&&!ms,Nv=l&&(!pc||ms&&8<ms&&11>=ms),Lv=" ",Ov=!1;function Mv(s,u){switch(s){case"keyup":return Dx.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zv(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var di=!1;function Lx(s,u){switch(s){case"compositionend":return zv(u);case"keypress":return u.which!==32?null:(Ov=!0,Lv);case"textInput":return s=u.data,s===Lv&&Ov?null:s;default:return null}}function Ox(s,u){if(di)return s==="compositionend"||!pc&&Mv(s,u)?(s=Rv(),Vo=uc=Zn=null,di=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return Nv&&u.locale!=="ko"?null:u.data;default:return null}}var Mx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fv(s){var u=s&&s.nodeName&&s.nodeName.toLowerCase();return u==="input"?!!Mx[s.type]:u==="textarea"}function $v(s,u,v,y){at(y),u=Yo(u,"onChange"),0<u.length&&(v=new cc("onChange","change",null,v,y),s.push({event:v,listeners:u}))}var ys=null,ws=null;function zx(s){ap(s,0)}function Ho(s){var u=mi(s);if(Ee(u))return s}function Fx(s,u){if(s==="change")return u}var Uv=!1;if(l){var gc;if(l){var mc="oninput"in document;if(!mc){var jv=document.createElement("div");jv.setAttribute("oninput","return;"),mc=typeof jv.oninput=="function"}gc=mc}else gc=!1;Uv=gc&&(!document.documentMode||9<document.documentMode)}function Vv(){ys&&(ys.detachEvent("onpropertychange",qv),ws=ys=null)}function qv(s){if(s.propertyName==="value"&&Ho(ws)){var u=[];$v(u,ws,s,De(s)),St(zx,u)}}function $x(s,u,v){s==="focusin"?(Vv(),ys=u,ws=v,ys.attachEvent("onpropertychange",qv)):s==="focusout"&&Vv()}function Ux(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Ho(ws)}function jx(s,u){if(s==="click")return Ho(u)}function Vx(s,u){if(s==="input"||s==="change")return Ho(u)}function qx(s,u){return s===u&&(s!==0||1/s===1/u)||s!==s&&u!==u}var sn=typeof Object.is=="function"?Object.is:qx;function xs(s,u){if(sn(s,u))return!0;if(typeof s!="object"||s===null||typeof u!="object"||u===null)return!1;var v=Object.keys(s),y=Object.keys(u);if(v.length!==y.length)return!1;for(y=0;y<v.length;y++){var S=v[y];if(!c.call(u,S)||!sn(s[S],u[S]))return!1}return!0}function Wv(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Gv(s,u){var v=Wv(s);s=0;for(var y;v;){if(v.nodeType===3){if(y=s+v.textContent.length,s<=u&&y>=u)return{node:v,offset:u-s};s=y}e:{for(;v;){if(v.nextSibling){v=v.nextSibling;break e}v=v.parentNode}v=void 0}v=Wv(v)}}function Hv(s,u){return s&&u?s===u?!0:s&&s.nodeType===3?!1:u&&u.nodeType===3?Hv(s,u.parentNode):"contains"in s?s.contains(u):s.compareDocumentPosition?!!(s.compareDocumentPosition(u)&16):!1:!1}function Kv(){for(var s=window,u=Re();u instanceof s.HTMLIFrameElement;){try{var v=typeof u.contentWindow.location.href=="string"}catch{v=!1}if(v)s=u.contentWindow;else break;u=Re(s.document)}return u}function yc(s){var u=s&&s.nodeName&&s.nodeName.toLowerCase();return u&&(u==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||u==="textarea"||s.contentEditable==="true")}function Wx(s){var u=Kv(),v=s.focusedElem,y=s.selectionRange;if(u!==v&&v&&v.ownerDocument&&Hv(v.ownerDocument.documentElement,v)){if(y!==null&&yc(v)){if(u=y.start,s=y.end,s===void 0&&(s=u),"selectionStart"in v)v.selectionStart=u,v.selectionEnd=Math.min(s,v.value.length);else if(s=(u=v.ownerDocument||document)&&u.defaultView||window,s.getSelection){s=s.getSelection();var S=v.textContent.length,P=Math.min(y.start,S);y=y.end===void 0?P:Math.min(y.end,S),!s.extend&&P>y&&(S=y,y=P,P=S),S=Gv(v,P);var V=Gv(v,y);S&&V&&(s.rangeCount!==1||s.anchorNode!==S.node||s.anchorOffset!==S.offset||s.focusNode!==V.node||s.focusOffset!==V.offset)&&(u=u.createRange(),u.setStart(S.node,S.offset),s.removeAllRanges(),P>y?(s.addRange(u),s.extend(V.node,V.offset)):(u.setEnd(V.node,V.offset),s.addRange(u)))}}for(u=[],s=v;s=s.parentNode;)s.nodeType===1&&u.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<u.length;v++)s=u[v],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var Gx=l&&"documentMode"in document&&11>=document.documentMode,hi=null,wc=null,bs=null,xc=!1;function Xv(s,u,v){var y=v.window===v?v.document:v.nodeType===9?v:v.ownerDocument;xc||hi==null||hi!==Re(y)||(y=hi,"selectionStart"in y&&yc(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),bs&&xs(bs,y)||(bs=y,y=Yo(wc,"onSelect"),0<y.length&&(u=new cc("onSelect","select",null,u,v),s.push({event:u,listeners:y}),u.target=hi)))}function Ko(s,u){var v={};return v[s.toLowerCase()]=u.toLowerCase(),v["Webkit"+s]="webkit"+u,v["Moz"+s]="moz"+u,v}var vi={animationend:Ko("Animation","AnimationEnd"),animationiteration:Ko("Animation","AnimationIteration"),animationstart:Ko("Animation","AnimationStart"),transitionend:Ko("Transition","TransitionEnd")},bc={},Zv={};l&&(Zv=document.createElement("div").style,"AnimationEvent"in window||(delete vi.animationend.animation,delete vi.animationiteration.animation,delete vi.animationstart.animation),"TransitionEvent"in window||delete vi.transitionend.transition);function Xo(s){if(bc[s])return bc[s];if(!vi[s])return s;var u=vi[s],v;for(v in u)if(u.hasOwnProperty(v)&&v in Zv)return bc[s]=u[v];return s}var Yv=Xo("animationend"),Qv=Xo("animationiteration"),Jv=Xo("animationstart"),ep=Xo("transitionend"),tp=new Map,rp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Yn(s,u){tp.set(s,u),i(u,[s])}for(var Ec=0;Ec<rp.length;Ec++){var _c=rp[Ec],Hx=_c.toLowerCase(),Kx=_c[0].toUpperCase()+_c.slice(1);Yn(Hx,"on"+Kx)}Yn(Yv,"onAnimationEnd"),Yn(Qv,"onAnimationIteration"),Yn(Jv,"onAnimationStart"),Yn("dblclick","onDoubleClick"),Yn("focusin","onFocus"),Yn("focusout","onBlur"),Yn(ep,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Es="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Es));function np(s,u,v){var y=s.type||"unknown-event";s.currentTarget=v,si(y,u,void 0,s),s.currentTarget=null}function ap(s,u){u=(u&4)!==0;for(var v=0;v<s.length;v++){var y=s[v],S=y.event;y=y.listeners;e:{var P=void 0;if(u)for(var V=y.length-1;0<=V;V--){var re=y[V],le=re.instance,Te=re.currentTarget;if(re=re.listener,le!==P&&S.isPropagationStopped())break e;np(S,re,Te),P=le}else for(V=0;V<y.length;V++){if(re=y[V],le=re.instance,Te=re.currentTarget,re=re.listener,le!==P&&S.isPropagationStopped())break e;np(S,re,Te),P=le}}}if(kt)throw s=Ur,kt=!1,Ur=null,s}function Ct(s,u){var v=u[Ac];v===void 0&&(v=u[Ac]=new Set);var y=s+"__bubble";v.has(y)||(ip(u,s,2,!1),v.add(y))}function Sc(s,u,v){var y=0;u&&(y|=4),ip(v,s,y,u)}var Zo="_reactListening"+Math.random().toString(36).slice(2);function _s(s){if(!s[Zo]){s[Zo]=!0,n.forEach(function(v){v!=="selectionchange"&&(Xx.has(v)||Sc(v,!1,s),Sc(v,!0,s))});var u=s.nodeType===9?s:s.ownerDocument;u===null||u[Zo]||(u[Zo]=!0,Sc("selectionchange",!1,u))}}function ip(s,u,v,y){switch(Pv(u)){case 1:var S=ux;break;case 4:S=cx;break;default:S=oc}v=S.bind(null,u,v,s),S=void 0,!Rt||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(S=!0),y?S!==void 0?s.addEventListener(u,v,{capture:!0,passive:S}):s.addEventListener(u,v,!0):S!==void 0?s.addEventListener(u,v,{passive:S}):s.addEventListener(u,v,!1)}function kc(s,u,v,y,S){var P=y;if((u&1)===0&&(u&2)===0&&y!==null)e:for(;;){if(y===null)return;var V=y.tag;if(V===3||V===4){var re=y.stateNode.containerInfo;if(re===S||re.nodeType===8&&re.parentNode===S)break;if(V===4)for(V=y.return;V!==null;){var le=V.tag;if((le===3||le===4)&&(le=V.stateNode.containerInfo,le===S||le.nodeType===8&&le.parentNode===S))return;V=V.return}for(;re!==null;){if(V=Da(re),V===null)return;if(le=V.tag,le===5||le===6){y=P=V;continue e}re=re.parentNode}}y=y.return}St(function(){var Te=P,Le=De(v),Me=[];e:{var Ne=tp.get(s);if(Ne!==void 0){var je=cc,He=s;switch(s){case"keypress":if(qo(v)===0)break e;case"keydown":case"keyup":je=kx;break;case"focusin":He="focus",je=hc;break;case"focusout":He="blur",je=hc;break;case"beforeblur":case"afterblur":je=hc;break;case"click":if(v.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":je=Av;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":je=hx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":je=Px;break;case Yv:case Qv:case Jv:je=gx;break;case ep:je=Bx;break;case"scroll":je=fx;break;case"wheel":je=Ix;break;case"copy":case"cut":case"paste":je=yx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":je=Dv}var Ze=(u&4)!==0,qt=!Ze&&s==="scroll",be=Ze?Ne!==null?Ne+"Capture":null:Ne;Ze=[];for(var de=Te,Se;de!==null;){Se=de;var Fe=Se.stateNode;if(Se.tag===5&&Fe!==null&&(Se=Fe,be!==null&&(Fe=jt(de,be),Fe!=null&&Ze.push(Ss(de,Fe,Se)))),qt)break;de=de.return}0<Ze.length&&(Ne=new je(Ne,He,null,v,Le),Me.push({event:Ne,listeners:Ze}))}}if((u&7)===0){e:{if(Ne=s==="mouseover"||s==="pointerover",je=s==="mouseout"||s==="pointerout",Ne&&v!==Oe&&(He=v.relatedTarget||v.fromElement)&&(Da(He)||He[Rn]))break e;if((je||Ne)&&(Ne=Le.window===Le?Le:(Ne=Le.ownerDocument)?Ne.defaultView||Ne.parentWindow:window,je?(He=v.relatedTarget||v.toElement,je=Te,He=He?Da(He):null,He!==null&&(qt=_r(He),He!==qt||He.tag!==5&&He.tag!==6)&&(He=null)):(je=null,He=Te),je!==He)){if(Ze=Av,Fe="onMouseLeave",be="onMouseEnter",de="mouse",(s==="pointerout"||s==="pointerover")&&(Ze=Dv,Fe="onPointerLeave",be="onPointerEnter",de="pointer"),qt=je==null?Ne:mi(je),Se=He==null?Ne:mi(He),Ne=new Ze(Fe,de+"leave",je,v,Le),Ne.target=qt,Ne.relatedTarget=Se,Fe=null,Da(Le)===Te&&(Ze=new Ze(be,de+"enter",He,v,Le),Ze.target=Se,Ze.relatedTarget=qt,Fe=Ze),qt=Fe,je&&He)t:{for(Ze=je,be=He,de=0,Se=Ze;Se;Se=pi(Se))de++;for(Se=0,Fe=be;Fe;Fe=pi(Fe))Se++;for(;0<de-Se;)Ze=pi(Ze),de--;for(;0<Se-de;)be=pi(be),Se--;for(;de--;){if(Ze===be||be!==null&&Ze===be.alternate)break t;Ze=pi(Ze),be=pi(be)}Ze=null}else Ze=null;je!==null&&sp(Me,Ne,je,Ze,!1),He!==null&&qt!==null&&sp(Me,qt,He,Ze,!0)}}e:{if(Ne=Te?mi(Te):window,je=Ne.nodeName&&Ne.nodeName.toLowerCase(),je==="select"||je==="input"&&Ne.type==="file")var Ye=Fx;else if(Fv(Ne))if(Uv)Ye=Vx;else{Ye=Ux;var Je=$x}else(je=Ne.nodeName)&&je.toLowerCase()==="input"&&(Ne.type==="checkbox"||Ne.type==="radio")&&(Ye=jx);if(Ye&&(Ye=Ye(s,Te))){$v(Me,Ye,v,Le);break e}Je&&Je(s,Ne,Te),s==="focusout"&&(Je=Ne._wrapperState)&&Je.controlled&&Ne.type==="number"&&ae(Ne,"number",Ne.value)}switch(Je=Te?mi(Te):window,s){case"focusin":(Fv(Je)||Je.contentEditable==="true")&&(hi=Je,wc=Te,bs=null);break;case"focusout":bs=wc=hi=null;break;case"mousedown":xc=!0;break;case"contextmenu":case"mouseup":case"dragend":xc=!1,Xv(Me,v,Le);break;case"selectionchange":if(Gx)break;case"keydown":case"keyup":Xv(Me,v,Le)}var et;if(pc)e:{switch(s){case"compositionstart":var rt="onCompositionStart";break e;case"compositionend":rt="onCompositionEnd";break e;case"compositionupdate":rt="onCompositionUpdate";break e}rt=void 0}else di?Mv(s,v)&&(rt="onCompositionEnd"):s==="keydown"&&v.keyCode===229&&(rt="onCompositionStart");rt&&(Nv&&v.locale!=="ko"&&(di||rt!=="onCompositionStart"?rt==="onCompositionEnd"&&di&&(et=Rv()):(Zn=Le,uc="value"in Zn?Zn.value:Zn.textContent,di=!0)),Je=Yo(Te,rt),0<Je.length&&(rt=new Iv(rt,s,null,v,Le),Me.push({event:rt,listeners:Je}),et?rt.data=et:(et=zv(v),et!==null&&(rt.data=et)))),(et=Nx?Lx(s,v):Ox(s,v))&&(Te=Yo(Te,"onBeforeInput"),0<Te.length&&(Le=new Iv("onBeforeInput","beforeinput",null,v,Le),Me.push({event:Le,listeners:Te}),Le.data=et))}ap(Me,u)})}function Ss(s,u,v){return{instance:s,listener:u,currentTarget:v}}function Yo(s,u){for(var v=u+"Capture",y=[];s!==null;){var S=s,P=S.stateNode;S.tag===5&&P!==null&&(S=P,P=jt(s,v),P!=null&&y.unshift(Ss(s,P,S)),P=jt(s,u),P!=null&&y.push(Ss(s,P,S))),s=s.return}return y}function pi(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function sp(s,u,v,y,S){for(var P=u._reactName,V=[];v!==null&&v!==y;){var re=v,le=re.alternate,Te=re.stateNode;if(le!==null&&le===y)break;re.tag===5&&Te!==null&&(re=Te,S?(le=jt(v,P),le!=null&&V.unshift(Ss(v,le,re))):S||(le=jt(v,P),le!=null&&V.push(Ss(v,le,re)))),v=v.return}V.length!==0&&s.push({event:u,listeners:V})}var Zx=/\r\n?/g,Yx=/\u0000|\uFFFD/g;function op(s){return(typeof s=="string"?s:""+s).replace(Zx,`
`).replace(Yx,"")}function Qo(s,u,v){if(u=op(u),op(s)!==u&&v)throw Error(t(425))}function Jo(){}var Cc=null,Tc=null;function Pc(s,u){return s==="textarea"||s==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var Rc=typeof setTimeout=="function"?setTimeout:void 0,Qx=typeof clearTimeout=="function"?clearTimeout:void 0,lp=typeof Promise=="function"?Promise:void 0,Jx=typeof queueMicrotask=="function"?queueMicrotask:typeof lp<"u"?function(s){return lp.resolve(null).then(s).catch(eb)}:Rc;function eb(s){setTimeout(function(){throw s})}function Bc(s,u){var v=u,y=0;do{var S=v.nextSibling;if(s.removeChild(v),S&&S.nodeType===8)if(v=S.data,v==="/$"){if(y===0){s.removeChild(S),vs(u);return}y--}else v!=="$"&&v!=="$?"&&v!=="$!"||y++;v=S}while(v);vs(u)}function Qn(s){for(;s!=null;s=s.nextSibling){var u=s.nodeType;if(u===1||u===3)break;if(u===8){if(u=s.data,u==="$"||u==="$!"||u==="$?")break;if(u==="/$")return null}}return s}function up(s){s=s.previousSibling;for(var u=0;s;){if(s.nodeType===8){var v=s.data;if(v==="$"||v==="$!"||v==="$?"){if(u===0)return s;u--}else v==="/$"&&u++}s=s.previousSibling}return null}var gi=Math.random().toString(36).slice(2),mn="__reactFiber$"+gi,ks="__reactProps$"+gi,Rn="__reactContainer$"+gi,Ac="__reactEvents$"+gi,tb="__reactListeners$"+gi,rb="__reactHandles$"+gi;function Da(s){var u=s[mn];if(u)return u;for(var v=s.parentNode;v;){if(u=v[Rn]||v[mn]){if(v=u.alternate,u.child!==null||v!==null&&v.child!==null)for(s=up(s);s!==null;){if(v=s[mn])return v;s=up(s)}return u}s=v,v=s.parentNode}return null}function Cs(s){return s=s[mn]||s[Rn],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function mi(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(t(33))}function el(s){return s[ks]||null}var Ic=[],yi=-1;function Jn(s){return{current:s}}function Tt(s){0>yi||(s.current=Ic[yi],Ic[yi]=null,yi--)}function xt(s,u){yi++,Ic[yi]=s.current,s.current=u}var ea={},gr=Jn(ea),Ar=Jn(!1),Na=ea;function wi(s,u){var v=s.type.contextTypes;if(!v)return ea;var y=s.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===u)return y.__reactInternalMemoizedMaskedChildContext;var S={},P;for(P in v)S[P]=u[P];return y&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=u,s.__reactInternalMemoizedMaskedChildContext=S),S}function Ir(s){return s=s.childContextTypes,s!=null}function tl(){Tt(Ar),Tt(gr)}function cp(s,u,v){if(gr.current!==ea)throw Error(t(168));xt(gr,u),xt(Ar,v)}function fp(s,u,v){var y=s.stateNode;if(u=u.childContextTypes,typeof y.getChildContext!="function")return v;y=y.getChildContext();for(var S in y)if(!(S in u))throw Error(t(108,Pe(s)||"Unknown",S));return te({},v,y)}function rl(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||ea,Na=gr.current,xt(gr,s),xt(Ar,Ar.current),!0}function dp(s,u,v){var y=s.stateNode;if(!y)throw Error(t(169));v?(s=fp(s,u,Na),y.__reactInternalMemoizedMergedChildContext=s,Tt(Ar),Tt(gr),xt(gr,s)):Tt(Ar),xt(Ar,v)}var Bn=null,nl=!1,Dc=!1;function hp(s){Bn===null?Bn=[s]:Bn.push(s)}function nb(s){nl=!0,hp(s)}function ta(){if(!Dc&&Bn!==null){Dc=!0;var s=0,u=mt;try{var v=Bn;for(mt=1;s<v.length;s++){var y=v[s];do y=y(!0);while(y!==null)}Bn=null,nl=!1}catch(S){throw Bn!==null&&(Bn=Bn.slice(s+1)),is(ss,ta),S}finally{mt=u,Dc=!1}}return null}var xi=[],bi=0,al=null,il=0,Kr=[],Xr=0,La=null,An=1,In="";function Oa(s,u){xi[bi++]=il,xi[bi++]=al,al=s,il=u}function vp(s,u,v){Kr[Xr++]=An,Kr[Xr++]=In,Kr[Xr++]=La,La=s;var y=An;s=In;var S=32-Ot(y)-1;y&=~(1<<S),v+=1;var P=32-Ot(u)+S;if(30<P){var V=S-S%5;P=(y&(1<<V)-1).toString(32),y>>=V,S-=V,An=1<<32-Ot(u)+S|v<<S|y,In=P+s}else An=1<<P|v<<S|y,In=s}function Nc(s){s.return!==null&&(Oa(s,1),vp(s,1,0))}function Lc(s){for(;s===al;)al=xi[--bi],xi[bi]=null,il=xi[--bi],xi[bi]=null;for(;s===La;)La=Kr[--Xr],Kr[Xr]=null,In=Kr[--Xr],Kr[Xr]=null,An=Kr[--Xr],Kr[Xr]=null}var qr=null,Wr=null,At=!1,on=null;function pp(s,u){var v=Jr(5,null,null,0);v.elementType="DELETED",v.stateNode=u,v.return=s,u=s.deletions,u===null?(s.deletions=[v],s.flags|=16):u.push(v)}function gp(s,u){switch(s.tag){case 5:var v=s.type;return u=u.nodeType!==1||v.toLowerCase()!==u.nodeName.toLowerCase()?null:u,u!==null?(s.stateNode=u,qr=s,Wr=Qn(u.firstChild),!0):!1;case 6:return u=s.pendingProps===""||u.nodeType!==3?null:u,u!==null?(s.stateNode=u,qr=s,Wr=null,!0):!1;case 13:return u=u.nodeType!==8?null:u,u!==null?(v=La!==null?{id:An,overflow:In}:null,s.memoizedState={dehydrated:u,treeContext:v,retryLane:1073741824},v=Jr(18,null,null,0),v.stateNode=u,v.return=s,s.child=v,qr=s,Wr=null,!0):!1;default:return!1}}function Oc(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Mc(s){if(At){var u=Wr;if(u){var v=u;if(!gp(s,u)){if(Oc(s))throw Error(t(418));u=Qn(v.nextSibling);var y=qr;u&&gp(s,u)?pp(y,v):(s.flags=s.flags&-4097|2,At=!1,qr=s)}}else{if(Oc(s))throw Error(t(418));s.flags=s.flags&-4097|2,At=!1,qr=s}}}function mp(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;qr=s}function sl(s){if(s!==qr)return!1;if(!At)return mp(s),At=!0,!1;var u;if((u=s.tag!==3)&&!(u=s.tag!==5)&&(u=s.type,u=u!=="head"&&u!=="body"&&!Pc(s.type,s.memoizedProps)),u&&(u=Wr)){if(Oc(s))throw yp(),Error(t(418));for(;u;)pp(s,u),u=Qn(u.nextSibling)}if(mp(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(t(317));e:{for(s=s.nextSibling,u=0;s;){if(s.nodeType===8){var v=s.data;if(v==="/$"){if(u===0){Wr=Qn(s.nextSibling);break e}u--}else v!=="$"&&v!=="$!"&&v!=="$?"||u++}s=s.nextSibling}Wr=null}}else Wr=qr?Qn(s.stateNode.nextSibling):null;return!0}function yp(){for(var s=Wr;s;)s=Qn(s.nextSibling)}function Ei(){Wr=qr=null,At=!1}function zc(s){on===null?on=[s]:on.push(s)}var ab=C.ReactCurrentBatchConfig;function Ts(s,u,v){if(s=v.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(v._owner){if(v=v._owner,v){if(v.tag!==1)throw Error(t(309));var y=v.stateNode}if(!y)throw Error(t(147,s));var S=y,P=""+s;return u!==null&&u.ref!==null&&typeof u.ref=="function"&&u.ref._stringRef===P?u.ref:(u=function(V){var re=S.refs;V===null?delete re[P]:re[P]=V},u._stringRef=P,u)}if(typeof s!="string")throw Error(t(284));if(!v._owner)throw Error(t(290,s))}return s}function ol(s,u){throw s=Object.prototype.toString.call(u),Error(t(31,s==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":s))}function wp(s){var u=s._init;return u(s._payload)}function xp(s){function u(be,de){if(s){var Se=be.deletions;Se===null?(be.deletions=[de],be.flags|=16):Se.push(de)}}function v(be,de){if(!s)return null;for(;de!==null;)u(be,de),de=de.sibling;return null}function y(be,de){for(be=new Map;de!==null;)de.key!==null?be.set(de.key,de):be.set(de.index,de),de=de.sibling;return be}function S(be,de){return be=ua(be,de),be.index=0,be.sibling=null,be}function P(be,de,Se){return be.index=Se,s?(Se=be.alternate,Se!==null?(Se=Se.index,Se<de?(be.flags|=2,de):Se):(be.flags|=2,de)):(be.flags|=1048576,de)}function V(be){return s&&be.alternate===null&&(be.flags|=2),be}function re(be,de,Se,Fe){return de===null||de.tag!==6?(de=Bf(Se,be.mode,Fe),de.return=be,de):(de=S(de,Se),de.return=be,de)}function le(be,de,Se,Fe){var Ye=Se.type;return Ye===A?Le(be,de,Se.props.children,Fe,Se.key):de!==null&&(de.elementType===Ye||typeof Ye=="object"&&Ye!==null&&Ye.$$typeof===Q&&wp(Ye)===de.type)?(Fe=S(de,Se.props),Fe.ref=Ts(be,de,Se),Fe.return=be,Fe):(Fe=Al(Se.type,Se.key,Se.props,null,be.mode,Fe),Fe.ref=Ts(be,de,Se),Fe.return=be,Fe)}function Te(be,de,Se,Fe){return de===null||de.tag!==4||de.stateNode.containerInfo!==Se.containerInfo||de.stateNode.implementation!==Se.implementation?(de=Af(Se,be.mode,Fe),de.return=be,de):(de=S(de,Se.children||[]),de.return=be,de)}function Le(be,de,Se,Fe,Ye){return de===null||de.tag!==7?(de=qa(Se,be.mode,Fe,Ye),de.return=be,de):(de=S(de,Se),de.return=be,de)}function Me(be,de,Se){if(typeof de=="string"&&de!==""||typeof de=="number")return de=Bf(""+de,be.mode,Se),de.return=be,de;if(typeof de=="object"&&de!==null){switch(de.$$typeof){case B:return Se=Al(de.type,de.key,de.props,null,be.mode,Se),Se.ref=Ts(be,null,de),Se.return=be,Se;case L:return de=Af(de,be.mode,Se),de.return=be,de;case Q:var Fe=de._init;return Me(be,Fe(de._payload),Se)}if(ve(de)||Z(de))return de=qa(de,be.mode,Se,null),de.return=be,de;ol(be,de)}return null}function Ne(be,de,Se,Fe){var Ye=de!==null?de.key:null;if(typeof Se=="string"&&Se!==""||typeof Se=="number")return Ye!==null?null:re(be,de,""+Se,Fe);if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case B:return Se.key===Ye?le(be,de,Se,Fe):null;case L:return Se.key===Ye?Te(be,de,Se,Fe):null;case Q:return Ye=Se._init,Ne(be,de,Ye(Se._payload),Fe)}if(ve(Se)||Z(Se))return Ye!==null?null:Le(be,de,Se,Fe,null);ol(be,Se)}return null}function je(be,de,Se,Fe,Ye){if(typeof Fe=="string"&&Fe!==""||typeof Fe=="number")return be=be.get(Se)||null,re(de,be,""+Fe,Ye);if(typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case B:return be=be.get(Fe.key===null?Se:Fe.key)||null,le(de,be,Fe,Ye);case L:return be=be.get(Fe.key===null?Se:Fe.key)||null,Te(de,be,Fe,Ye);case Q:var Je=Fe._init;return je(be,de,Se,Je(Fe._payload),Ye)}if(ve(Fe)||Z(Fe))return be=be.get(Se)||null,Le(de,be,Fe,Ye,null);ol(de,Fe)}return null}function He(be,de,Se,Fe){for(var Ye=null,Je=null,et=de,rt=de=0,nr=null;et!==null&&rt<Se.length;rt++){et.index>rt?(nr=et,et=null):nr=et.sibling;var ht=Ne(be,et,Se[rt],Fe);if(ht===null){et===null&&(et=nr);break}s&&et&&ht.alternate===null&&u(be,et),de=P(ht,de,rt),Je===null?Ye=ht:Je.sibling=ht,Je=ht,et=nr}if(rt===Se.length)return v(be,et),At&&Oa(be,rt),Ye;if(et===null){for(;rt<Se.length;rt++)et=Me(be,Se[rt],Fe),et!==null&&(de=P(et,de,rt),Je===null?Ye=et:Je.sibling=et,Je=et);return At&&Oa(be,rt),Ye}for(et=y(be,et);rt<Se.length;rt++)nr=je(et,be,rt,Se[rt],Fe),nr!==null&&(s&&nr.alternate!==null&&et.delete(nr.key===null?rt:nr.key),de=P(nr,de,rt),Je===null?Ye=nr:Je.sibling=nr,Je=nr);return s&&et.forEach(function(ca){return u(be,ca)}),At&&Oa(be,rt),Ye}function Ze(be,de,Se,Fe){var Ye=Z(Se);if(typeof Ye!="function")throw Error(t(150));if(Se=Ye.call(Se),Se==null)throw Error(t(151));for(var Je=Ye=null,et=de,rt=de=0,nr=null,ht=Se.next();et!==null&&!ht.done;rt++,ht=Se.next()){et.index>rt?(nr=et,et=null):nr=et.sibling;var ca=Ne(be,et,ht.value,Fe);if(ca===null){et===null&&(et=nr);break}s&&et&&ca.alternate===null&&u(be,et),de=P(ca,de,rt),Je===null?Ye=ca:Je.sibling=ca,Je=ca,et=nr}if(ht.done)return v(be,et),At&&Oa(be,rt),Ye;if(et===null){for(;!ht.done;rt++,ht=Se.next())ht=Me(be,ht.value,Fe),ht!==null&&(de=P(ht,de,rt),Je===null?Ye=ht:Je.sibling=ht,Je=ht);return At&&Oa(be,rt),Ye}for(et=y(be,et);!ht.done;rt++,ht=Se.next())ht=je(et,be,rt,ht.value,Fe),ht!==null&&(s&&ht.alternate!==null&&et.delete(ht.key===null?rt:ht.key),de=P(ht,de,rt),Je===null?Ye=ht:Je.sibling=ht,Je=ht);return s&&et.forEach(function(Mb){return u(be,Mb)}),At&&Oa(be,rt),Ye}function qt(be,de,Se,Fe){if(typeof Se=="object"&&Se!==null&&Se.type===A&&Se.key===null&&(Se=Se.props.children),typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case B:e:{for(var Ye=Se.key,Je=de;Je!==null;){if(Je.key===Ye){if(Ye=Se.type,Ye===A){if(Je.tag===7){v(be,Je.sibling),de=S(Je,Se.props.children),de.return=be,be=de;break e}}else if(Je.elementType===Ye||typeof Ye=="object"&&Ye!==null&&Ye.$$typeof===Q&&wp(Ye)===Je.type){v(be,Je.sibling),de=S(Je,Se.props),de.ref=Ts(be,Je,Se),de.return=be,be=de;break e}v(be,Je);break}else u(be,Je);Je=Je.sibling}Se.type===A?(de=qa(Se.props.children,be.mode,Fe,Se.key),de.return=be,be=de):(Fe=Al(Se.type,Se.key,Se.props,null,be.mode,Fe),Fe.ref=Ts(be,de,Se),Fe.return=be,be=Fe)}return V(be);case L:e:{for(Je=Se.key;de!==null;){if(de.key===Je)if(de.tag===4&&de.stateNode.containerInfo===Se.containerInfo&&de.stateNode.implementation===Se.implementation){v(be,de.sibling),de=S(de,Se.children||[]),de.return=be,be=de;break e}else{v(be,de);break}else u(be,de);de=de.sibling}de=Af(Se,be.mode,Fe),de.return=be,be=de}return V(be);case Q:return Je=Se._init,qt(be,de,Je(Se._payload),Fe)}if(ve(Se))return He(be,de,Se,Fe);if(Z(Se))return Ze(be,de,Se,Fe);ol(be,Se)}return typeof Se=="string"&&Se!==""||typeof Se=="number"?(Se=""+Se,de!==null&&de.tag===6?(v(be,de.sibling),de=S(de,Se),de.return=be,be=de):(v(be,de),de=Bf(Se,be.mode,Fe),de.return=be,be=de),V(be)):v(be,de)}return qt}var _i=xp(!0),bp=xp(!1),ll=Jn(null),ul=null,Si=null,Fc=null;function $c(){Fc=Si=ul=null}function Uc(s){var u=ll.current;Tt(ll),s._currentValue=u}function jc(s,u,v){for(;s!==null;){var y=s.alternate;if((s.childLanes&u)!==u?(s.childLanes|=u,y!==null&&(y.childLanes|=u)):y!==null&&(y.childLanes&u)!==u&&(y.childLanes|=u),s===v)break;s=s.return}}function ki(s,u){ul=s,Fc=Si=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&u)!==0&&(Dr=!0),s.firstContext=null)}function Zr(s){var u=s._currentValue;if(Fc!==s)if(s={context:s,memoizedValue:u,next:null},Si===null){if(ul===null)throw Error(t(308));Si=s,ul.dependencies={lanes:0,firstContext:s}}else Si=Si.next=s;return u}var Ma=null;function Vc(s){Ma===null?Ma=[s]:Ma.push(s)}function Ep(s,u,v,y){var S=u.interleaved;return S===null?(v.next=v,Vc(u)):(v.next=S.next,S.next=v),u.interleaved=v,Dn(s,y)}function Dn(s,u){s.lanes|=u;var v=s.alternate;for(v!==null&&(v.lanes|=u),v=s,s=s.return;s!==null;)s.childLanes|=u,v=s.alternate,v!==null&&(v.childLanes|=u),v=s,s=s.return;return v.tag===3?v.stateNode:null}var ra=!1;function qc(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _p(s,u){s=s.updateQueue,u.updateQueue===s&&(u.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Nn(s,u){return{eventTime:s,lane:u,tag:0,payload:null,callback:null,next:null}}function na(s,u,v){var y=s.updateQueue;if(y===null)return null;if(y=y.shared,(ct&2)!==0){var S=y.pending;return S===null?u.next=u:(u.next=S.next,S.next=u),y.pending=u,Dn(s,v)}return S=y.interleaved,S===null?(u.next=u,Vc(y)):(u.next=S.next,S.next=u),y.interleaved=u,Dn(s,v)}function cl(s,u,v){if(u=u.updateQueue,u!==null&&(u=u.shared,(v&4194240)!==0)){var y=u.lanes;y&=s.pendingLanes,v|=y,u.lanes=v,ac(s,v)}}function Sp(s,u){var v=s.updateQueue,y=s.alternate;if(y!==null&&(y=y.updateQueue,v===y)){var S=null,P=null;if(v=v.firstBaseUpdate,v!==null){do{var V={eventTime:v.eventTime,lane:v.lane,tag:v.tag,payload:v.payload,callback:v.callback,next:null};P===null?S=P=V:P=P.next=V,v=v.next}while(v!==null);P===null?S=P=u:P=P.next=u}else S=P=u;v={baseState:y.baseState,firstBaseUpdate:S,lastBaseUpdate:P,shared:y.shared,effects:y.effects},s.updateQueue=v;return}s=v.lastBaseUpdate,s===null?v.firstBaseUpdate=u:s.next=u,v.lastBaseUpdate=u}function fl(s,u,v,y){var S=s.updateQueue;ra=!1;var P=S.firstBaseUpdate,V=S.lastBaseUpdate,re=S.shared.pending;if(re!==null){S.shared.pending=null;var le=re,Te=le.next;le.next=null,V===null?P=Te:V.next=Te,V=le;var Le=s.alternate;Le!==null&&(Le=Le.updateQueue,re=Le.lastBaseUpdate,re!==V&&(re===null?Le.firstBaseUpdate=Te:re.next=Te,Le.lastBaseUpdate=le))}if(P!==null){var Me=S.baseState;V=0,Le=Te=le=null,re=P;do{var Ne=re.lane,je=re.eventTime;if((y&Ne)===Ne){Le!==null&&(Le=Le.next={eventTime:je,lane:0,tag:re.tag,payload:re.payload,callback:re.callback,next:null});e:{var He=s,Ze=re;switch(Ne=u,je=v,Ze.tag){case 1:if(He=Ze.payload,typeof He=="function"){Me=He.call(je,Me,Ne);break e}Me=He;break e;case 3:He.flags=He.flags&-65537|128;case 0:if(He=Ze.payload,Ne=typeof He=="function"?He.call(je,Me,Ne):He,Ne==null)break e;Me=te({},Me,Ne);break e;case 2:ra=!0}}re.callback!==null&&re.lane!==0&&(s.flags|=64,Ne=S.effects,Ne===null?S.effects=[re]:Ne.push(re))}else je={eventTime:je,lane:Ne,tag:re.tag,payload:re.payload,callback:re.callback,next:null},Le===null?(Te=Le=je,le=Me):Le=Le.next=je,V|=Ne;if(re=re.next,re===null){if(re=S.shared.pending,re===null)break;Ne=re,re=Ne.next,Ne.next=null,S.lastBaseUpdate=Ne,S.shared.pending=null}}while(!0);if(Le===null&&(le=Me),S.baseState=le,S.firstBaseUpdate=Te,S.lastBaseUpdate=Le,u=S.shared.interleaved,u!==null){S=u;do V|=S.lane,S=S.next;while(S!==u)}else P===null&&(S.shared.lanes=0);$a|=V,s.lanes=V,s.memoizedState=Me}}function kp(s,u,v){if(s=u.effects,u.effects=null,s!==null)for(u=0;u<s.length;u++){var y=s[u],S=y.callback;if(S!==null){if(y.callback=null,y=v,typeof S!="function")throw Error(t(191,S));S.call(y)}}}var Ps={},yn=Jn(Ps),Rs=Jn(Ps),Bs=Jn(Ps);function za(s){if(s===Ps)throw Error(t(174));return s}function Wc(s,u){switch(xt(Bs,u),xt(Rs,s),xt(yn,Ps),s=u.nodeType,s){case 9:case 11:u=(u=u.documentElement)?u.namespaceURI:j(null,"");break;default:s=s===8?u.parentNode:u,u=s.namespaceURI||null,s=s.tagName,u=j(u,s)}Tt(yn),xt(yn,u)}function Ci(){Tt(yn),Tt(Rs),Tt(Bs)}function Cp(s){za(Bs.current);var u=za(yn.current),v=j(u,s.type);u!==v&&(xt(Rs,s),xt(yn,v))}function Gc(s){Rs.current===s&&(Tt(yn),Tt(Rs))}var Mt=Jn(0);function dl(s){for(var u=s;u!==null;){if(u.tag===13){var v=u.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||v.data==="$?"||v.data==="$!"))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===s)break;for(;u.sibling===null;){if(u.return===null||u.return===s)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var Hc=[];function Kc(){for(var s=0;s<Hc.length;s++)Hc[s]._workInProgressVersionPrimary=null;Hc.length=0}var hl=C.ReactCurrentDispatcher,Xc=C.ReactCurrentBatchConfig,Fa=0,zt=null,Xt=null,tr=null,vl=!1,As=!1,Is=0,ib=0;function mr(){throw Error(t(321))}function Zc(s,u){if(u===null)return!1;for(var v=0;v<u.length&&v<s.length;v++)if(!sn(s[v],u[v]))return!1;return!0}function Yc(s,u,v,y,S,P){if(Fa=P,zt=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,hl.current=s===null||s.memoizedState===null?ub:cb,s=v(y,S),As){P=0;do{if(As=!1,Is=0,25<=P)throw Error(t(301));P+=1,tr=Xt=null,u.updateQueue=null,hl.current=fb,s=v(y,S)}while(As)}if(hl.current=ml,u=Xt!==null&&Xt.next!==null,Fa=0,tr=Xt=zt=null,vl=!1,u)throw Error(t(300));return s}function Qc(){var s=Is!==0;return Is=0,s}function wn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tr===null?zt.memoizedState=tr=s:tr=tr.next=s,tr}function Yr(){if(Xt===null){var s=zt.alternate;s=s!==null?s.memoizedState:null}else s=Xt.next;var u=tr===null?zt.memoizedState:tr.next;if(u!==null)tr=u,Xt=s;else{if(s===null)throw Error(t(310));Xt=s,s={memoizedState:Xt.memoizedState,baseState:Xt.baseState,baseQueue:Xt.baseQueue,queue:Xt.queue,next:null},tr===null?zt.memoizedState=tr=s:tr=tr.next=s}return tr}function Ds(s,u){return typeof u=="function"?u(s):u}function Jc(s){var u=Yr(),v=u.queue;if(v===null)throw Error(t(311));v.lastRenderedReducer=s;var y=Xt,S=y.baseQueue,P=v.pending;if(P!==null){if(S!==null){var V=S.next;S.next=P.next,P.next=V}y.baseQueue=S=P,v.pending=null}if(S!==null){P=S.next,y=y.baseState;var re=V=null,le=null,Te=P;do{var Le=Te.lane;if((Fa&Le)===Le)le!==null&&(le=le.next={lane:0,action:Te.action,hasEagerState:Te.hasEagerState,eagerState:Te.eagerState,next:null}),y=Te.hasEagerState?Te.eagerState:s(y,Te.action);else{var Me={lane:Le,action:Te.action,hasEagerState:Te.hasEagerState,eagerState:Te.eagerState,next:null};le===null?(re=le=Me,V=y):le=le.next=Me,zt.lanes|=Le,$a|=Le}Te=Te.next}while(Te!==null&&Te!==P);le===null?V=y:le.next=re,sn(y,u.memoizedState)||(Dr=!0),u.memoizedState=y,u.baseState=V,u.baseQueue=le,v.lastRenderedState=y}if(s=v.interleaved,s!==null){S=s;do P=S.lane,zt.lanes|=P,$a|=P,S=S.next;while(S!==s)}else S===null&&(v.lanes=0);return[u.memoizedState,v.dispatch]}function ef(s){var u=Yr(),v=u.queue;if(v===null)throw Error(t(311));v.lastRenderedReducer=s;var y=v.dispatch,S=v.pending,P=u.memoizedState;if(S!==null){v.pending=null;var V=S=S.next;do P=s(P,V.action),V=V.next;while(V!==S);sn(P,u.memoizedState)||(Dr=!0),u.memoizedState=P,u.baseQueue===null&&(u.baseState=P),v.lastRenderedState=P}return[P,y]}function Tp(){}function Pp(s,u){var v=zt,y=Yr(),S=u(),P=!sn(y.memoizedState,S);if(P&&(y.memoizedState=S,Dr=!0),y=y.queue,tf(Ap.bind(null,v,y,s),[s]),y.getSnapshot!==u||P||tr!==null&&tr.memoizedState.tag&1){if(v.flags|=2048,Ns(9,Bp.bind(null,v,y,S,u),void 0,null),rr===null)throw Error(t(349));(Fa&30)!==0||Rp(v,u,S)}return S}function Rp(s,u,v){s.flags|=16384,s={getSnapshot:u,value:v},u=zt.updateQueue,u===null?(u={lastEffect:null,stores:null},zt.updateQueue=u,u.stores=[s]):(v=u.stores,v===null?u.stores=[s]:v.push(s))}function Bp(s,u,v,y){u.value=v,u.getSnapshot=y,Ip(u)&&Dp(s)}function Ap(s,u,v){return v(function(){Ip(u)&&Dp(s)})}function Ip(s){var u=s.getSnapshot;s=s.value;try{var v=u();return!sn(s,v)}catch{return!0}}function Dp(s){var u=Dn(s,1);u!==null&&fn(u,s,1,-1)}function Np(s){var u=wn();return typeof s=="function"&&(s=s()),u.memoizedState=u.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ds,lastRenderedState:s},u.queue=s,s=s.dispatch=lb.bind(null,zt,s),[u.memoizedState,s]}function Ns(s,u,v,y){return s={tag:s,create:u,destroy:v,deps:y,next:null},u=zt.updateQueue,u===null?(u={lastEffect:null,stores:null},zt.updateQueue=u,u.lastEffect=s.next=s):(v=u.lastEffect,v===null?u.lastEffect=s.next=s:(y=v.next,v.next=s,s.next=y,u.lastEffect=s)),s}function Lp(){return Yr().memoizedState}function pl(s,u,v,y){var S=wn();zt.flags|=s,S.memoizedState=Ns(1|u,v,void 0,y===void 0?null:y)}function gl(s,u,v,y){var S=Yr();y=y===void 0?null:y;var P=void 0;if(Xt!==null){var V=Xt.memoizedState;if(P=V.destroy,y!==null&&Zc(y,V.deps)){S.memoizedState=Ns(u,v,P,y);return}}zt.flags|=s,S.memoizedState=Ns(1|u,v,P,y)}function Op(s,u){return pl(8390656,8,s,u)}function tf(s,u){return gl(2048,8,s,u)}function Mp(s,u){return gl(4,2,s,u)}function zp(s,u){return gl(4,4,s,u)}function Fp(s,u){if(typeof u=="function")return s=s(),u(s),function(){u(null)};if(u!=null)return s=s(),u.current=s,function(){u.current=null}}function $p(s,u,v){return v=v!=null?v.concat([s]):null,gl(4,4,Fp.bind(null,u,s),v)}function rf(){}function Up(s,u){var v=Yr();u=u===void 0?null:u;var y=v.memoizedState;return y!==null&&u!==null&&Zc(u,y[1])?y[0]:(v.memoizedState=[s,u],s)}function jp(s,u){var v=Yr();u=u===void 0?null:u;var y=v.memoizedState;return y!==null&&u!==null&&Zc(u,y[1])?y[0]:(s=s(),v.memoizedState=[s,u],s)}function Vp(s,u,v){return(Fa&21)===0?(s.baseState&&(s.baseState=!1,Dr=!0),s.memoizedState=v):(sn(v,u)||(v=wv(),zt.lanes|=v,$a|=v,s.baseState=!0),u)}function sb(s,u){var v=mt;mt=v!==0&&4>v?v:4,s(!0);var y=Xc.transition;Xc.transition={};try{s(!1),u()}finally{mt=v,Xc.transition=y}}function qp(){return Yr().memoizedState}function ob(s,u,v){var y=oa(s);if(v={lane:y,action:v,hasEagerState:!1,eagerState:null,next:null},Wp(s))Gp(u,v);else if(v=Ep(s,u,v,y),v!==null){var S=Cr();fn(v,s,y,S),Hp(v,u,y)}}function lb(s,u,v){var y=oa(s),S={lane:y,action:v,hasEagerState:!1,eagerState:null,next:null};if(Wp(s))Gp(u,S);else{var P=s.alternate;if(s.lanes===0&&(P===null||P.lanes===0)&&(P=u.lastRenderedReducer,P!==null))try{var V=u.lastRenderedState,re=P(V,v);if(S.hasEagerState=!0,S.eagerState=re,sn(re,V)){var le=u.interleaved;le===null?(S.next=S,Vc(u)):(S.next=le.next,le.next=S),u.interleaved=S;return}}catch{}finally{}v=Ep(s,u,S,y),v!==null&&(S=Cr(),fn(v,s,y,S),Hp(v,u,y))}}function Wp(s){var u=s.alternate;return s===zt||u!==null&&u===zt}function Gp(s,u){As=vl=!0;var v=s.pending;v===null?u.next=u:(u.next=v.next,v.next=u),s.pending=u}function Hp(s,u,v){if((v&4194240)!==0){var y=u.lanes;y&=s.pendingLanes,v|=y,u.lanes=v,ac(s,v)}}var ml={readContext:Zr,useCallback:mr,useContext:mr,useEffect:mr,useImperativeHandle:mr,useInsertionEffect:mr,useLayoutEffect:mr,useMemo:mr,useReducer:mr,useRef:mr,useState:mr,useDebugValue:mr,useDeferredValue:mr,useTransition:mr,useMutableSource:mr,useSyncExternalStore:mr,useId:mr,unstable_isNewReconciler:!1},ub={readContext:Zr,useCallback:function(s,u){return wn().memoizedState=[s,u===void 0?null:u],s},useContext:Zr,useEffect:Op,useImperativeHandle:function(s,u,v){return v=v!=null?v.concat([s]):null,pl(4194308,4,Fp.bind(null,u,s),v)},useLayoutEffect:function(s,u){return pl(4194308,4,s,u)},useInsertionEffect:function(s,u){return pl(4,2,s,u)},useMemo:function(s,u){var v=wn();return u=u===void 0?null:u,s=s(),v.memoizedState=[s,u],s},useReducer:function(s,u,v){var y=wn();return u=v!==void 0?v(u):u,y.memoizedState=y.baseState=u,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:u},y.queue=s,s=s.dispatch=ob.bind(null,zt,s),[y.memoizedState,s]},useRef:function(s){var u=wn();return s={current:s},u.memoizedState=s},useState:Np,useDebugValue:rf,useDeferredValue:function(s){return wn().memoizedState=s},useTransition:function(){var s=Np(!1),u=s[0];return s=sb.bind(null,s[1]),wn().memoizedState=s,[u,s]},useMutableSource:function(){},useSyncExternalStore:function(s,u,v){var y=zt,S=wn();if(At){if(v===void 0)throw Error(t(407));v=v()}else{if(v=u(),rr===null)throw Error(t(349));(Fa&30)!==0||Rp(y,u,v)}S.memoizedState=v;var P={value:v,getSnapshot:u};return S.queue=P,Op(Ap.bind(null,y,P,s),[s]),y.flags|=2048,Ns(9,Bp.bind(null,y,P,v,u),void 0,null),v},useId:function(){var s=wn(),u=rr.identifierPrefix;if(At){var v=In,y=An;v=(y&~(1<<32-Ot(y)-1)).toString(32)+v,u=":"+u+"R"+v,v=Is++,0<v&&(u+="H"+v.toString(32)),u+=":"}else v=ib++,u=":"+u+"r"+v.toString(32)+":";return s.memoizedState=u},unstable_isNewReconciler:!1},cb={readContext:Zr,useCallback:Up,useContext:Zr,useEffect:tf,useImperativeHandle:$p,useInsertionEffect:Mp,useLayoutEffect:zp,useMemo:jp,useReducer:Jc,useRef:Lp,useState:function(){return Jc(Ds)},useDebugValue:rf,useDeferredValue:function(s){var u=Yr();return Vp(u,Xt.memoizedState,s)},useTransition:function(){var s=Jc(Ds)[0],u=Yr().memoizedState;return[s,u]},useMutableSource:Tp,useSyncExternalStore:Pp,useId:qp,unstable_isNewReconciler:!1},fb={readContext:Zr,useCallback:Up,useContext:Zr,useEffect:tf,useImperativeHandle:$p,useInsertionEffect:Mp,useLayoutEffect:zp,useMemo:jp,useReducer:ef,useRef:Lp,useState:function(){return ef(Ds)},useDebugValue:rf,useDeferredValue:function(s){var u=Yr();return Xt===null?u.memoizedState=s:Vp(u,Xt.memoizedState,s)},useTransition:function(){var s=ef(Ds)[0],u=Yr().memoizedState;return[s,u]},useMutableSource:Tp,useSyncExternalStore:Pp,useId:qp,unstable_isNewReconciler:!1};function ln(s,u){if(s&&s.defaultProps){u=te({},u),s=s.defaultProps;for(var v in s)u[v]===void 0&&(u[v]=s[v]);return u}return u}function nf(s,u,v,y){u=s.memoizedState,v=v(y,u),v=v==null?u:te({},u,v),s.memoizedState=v,s.lanes===0&&(s.updateQueue.baseState=v)}var yl={isMounted:function(s){return(s=s._reactInternals)?_r(s)===s:!1},enqueueSetState:function(s,u,v){s=s._reactInternals;var y=Cr(),S=oa(s),P=Nn(y,S);P.payload=u,v!=null&&(P.callback=v),u=na(s,P,S),u!==null&&(fn(u,s,S,y),cl(u,s,S))},enqueueReplaceState:function(s,u,v){s=s._reactInternals;var y=Cr(),S=oa(s),P=Nn(y,S);P.tag=1,P.payload=u,v!=null&&(P.callback=v),u=na(s,P,S),u!==null&&(fn(u,s,S,y),cl(u,s,S))},enqueueForceUpdate:function(s,u){s=s._reactInternals;var v=Cr(),y=oa(s),S=Nn(v,y);S.tag=2,u!=null&&(S.callback=u),u=na(s,S,y),u!==null&&(fn(u,s,y,v),cl(u,s,y))}};function Kp(s,u,v,y,S,P,V){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(y,P,V):u.prototype&&u.prototype.isPureReactComponent?!xs(v,y)||!xs(S,P):!0}function Xp(s,u,v){var y=!1,S=ea,P=u.contextType;return typeof P=="object"&&P!==null?P=Zr(P):(S=Ir(u)?Na:gr.current,y=u.contextTypes,P=(y=y!=null)?wi(s,S):ea),u=new u(v,P),s.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=yl,s.stateNode=u,u._reactInternals=s,y&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=S,s.__reactInternalMemoizedMaskedChildContext=P),u}function Zp(s,u,v,y){s=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(v,y),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(v,y),u.state!==s&&yl.enqueueReplaceState(u,u.state,null)}function af(s,u,v,y){var S=s.stateNode;S.props=v,S.state=s.memoizedState,S.refs={},qc(s);var P=u.contextType;typeof P=="object"&&P!==null?S.context=Zr(P):(P=Ir(u)?Na:gr.current,S.context=wi(s,P)),S.state=s.memoizedState,P=u.getDerivedStateFromProps,typeof P=="function"&&(nf(s,u,P,v),S.state=s.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(u=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),u!==S.state&&yl.enqueueReplaceState(S,S.state,null),fl(s,v,S,y),S.state=s.memoizedState),typeof S.componentDidMount=="function"&&(s.flags|=4194308)}function Ti(s,u){try{var v="",y=u;do v+=ne(y),y=y.return;while(y);var S=v}catch(P){S=`
Error generating stack: `+P.message+`
`+P.stack}return{value:s,source:u,stack:S,digest:null}}function sf(s,u,v){return{value:s,source:null,stack:v??null,digest:u??null}}function of(s,u){try{console.error(u.value)}catch(v){setTimeout(function(){throw v})}}var db=typeof WeakMap=="function"?WeakMap:Map;function Yp(s,u,v){v=Nn(-1,v),v.tag=3,v.payload={element:null};var y=u.value;return v.callback=function(){kl||(kl=!0,Ef=y),of(s,u)},v}function Qp(s,u,v){v=Nn(-1,v),v.tag=3;var y=s.type.getDerivedStateFromError;if(typeof y=="function"){var S=u.value;v.payload=function(){return y(S)},v.callback=function(){of(s,u)}}var P=s.stateNode;return P!==null&&typeof P.componentDidCatch=="function"&&(v.callback=function(){of(s,u),typeof y!="function"&&(ia===null?ia=new Set([this]):ia.add(this));var V=u.stack;this.componentDidCatch(u.value,{componentStack:V!==null?V:""})}),v}function Jp(s,u,v){var y=s.pingCache;if(y===null){y=s.pingCache=new db;var S=new Set;y.set(u,S)}else S=y.get(u),S===void 0&&(S=new Set,y.set(u,S));S.has(v)||(S.add(v),s=Cb.bind(null,s,u,v),u.then(s,s))}function eg(s){do{var u;if((u=s.tag===13)&&(u=s.memoizedState,u=u!==null?u.dehydrated!==null:!0),u)return s;s=s.return}while(s!==null);return null}function tg(s,u,v,y,S){return(s.mode&1)===0?(s===u?s.flags|=65536:(s.flags|=128,v.flags|=131072,v.flags&=-52805,v.tag===1&&(v.alternate===null?v.tag=17:(u=Nn(-1,1),u.tag=2,na(v,u,1))),v.lanes|=1),s):(s.flags|=65536,s.lanes=S,s)}var hb=C.ReactCurrentOwner,Dr=!1;function kr(s,u,v,y){u.child=s===null?bp(u,null,v,y):_i(u,s.child,v,y)}function rg(s,u,v,y,S){v=v.render;var P=u.ref;return ki(u,S),y=Yc(s,u,v,y,P,S),v=Qc(),s!==null&&!Dr?(u.updateQueue=s.updateQueue,u.flags&=-2053,s.lanes&=~S,Ln(s,u,S)):(At&&v&&Nc(u),u.flags|=1,kr(s,u,y,S),u.child)}function ng(s,u,v,y,S){if(s===null){var P=v.type;return typeof P=="function"&&!Rf(P)&&P.defaultProps===void 0&&v.compare===null&&v.defaultProps===void 0?(u.tag=15,u.type=P,ag(s,u,P,y,S)):(s=Al(v.type,null,y,u,u.mode,S),s.ref=u.ref,s.return=u,u.child=s)}if(P=s.child,(s.lanes&S)===0){var V=P.memoizedProps;if(v=v.compare,v=v!==null?v:xs,v(V,y)&&s.ref===u.ref)return Ln(s,u,S)}return u.flags|=1,s=ua(P,y),s.ref=u.ref,s.return=u,u.child=s}function ag(s,u,v,y,S){if(s!==null){var P=s.memoizedProps;if(xs(P,y)&&s.ref===u.ref)if(Dr=!1,u.pendingProps=y=P,(s.lanes&S)!==0)(s.flags&131072)!==0&&(Dr=!0);else return u.lanes=s.lanes,Ln(s,u,S)}return lf(s,u,v,y,S)}function ig(s,u,v){var y=u.pendingProps,S=y.children,P=s!==null?s.memoizedState:null;if(y.mode==="hidden")if((u.mode&1)===0)u.memoizedState={baseLanes:0,cachePool:null,transitions:null},xt(Ri,Gr),Gr|=v;else{if((v&1073741824)===0)return s=P!==null?P.baseLanes|v:v,u.lanes=u.childLanes=1073741824,u.memoizedState={baseLanes:s,cachePool:null,transitions:null},u.updateQueue=null,xt(Ri,Gr),Gr|=s,null;u.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=P!==null?P.baseLanes:v,xt(Ri,Gr),Gr|=y}else P!==null?(y=P.baseLanes|v,u.memoizedState=null):y=v,xt(Ri,Gr),Gr|=y;return kr(s,u,S,v),u.child}function sg(s,u){var v=u.ref;(s===null&&v!==null||s!==null&&s.ref!==v)&&(u.flags|=512,u.flags|=2097152)}function lf(s,u,v,y,S){var P=Ir(v)?Na:gr.current;return P=wi(u,P),ki(u,S),v=Yc(s,u,v,y,P,S),y=Qc(),s!==null&&!Dr?(u.updateQueue=s.updateQueue,u.flags&=-2053,s.lanes&=~S,Ln(s,u,S)):(At&&y&&Nc(u),u.flags|=1,kr(s,u,v,S),u.child)}function og(s,u,v,y,S){if(Ir(v)){var P=!0;rl(u)}else P=!1;if(ki(u,S),u.stateNode===null)xl(s,u),Xp(u,v,y),af(u,v,y,S),y=!0;else if(s===null){var V=u.stateNode,re=u.memoizedProps;V.props=re;var le=V.context,Te=v.contextType;typeof Te=="object"&&Te!==null?Te=Zr(Te):(Te=Ir(v)?Na:gr.current,Te=wi(u,Te));var Le=v.getDerivedStateFromProps,Me=typeof Le=="function"||typeof V.getSnapshotBeforeUpdate=="function";Me||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(re!==y||le!==Te)&&Zp(u,V,y,Te),ra=!1;var Ne=u.memoizedState;V.state=Ne,fl(u,y,V,S),le=u.memoizedState,re!==y||Ne!==le||Ar.current||ra?(typeof Le=="function"&&(nf(u,v,Le,y),le=u.memoizedState),(re=ra||Kp(u,v,re,y,Ne,le,Te))?(Me||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount()),typeof V.componentDidMount=="function"&&(u.flags|=4194308)):(typeof V.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=y,u.memoizedState=le),V.props=y,V.state=le,V.context=Te,y=re):(typeof V.componentDidMount=="function"&&(u.flags|=4194308),y=!1)}else{V=u.stateNode,_p(s,u),re=u.memoizedProps,Te=u.type===u.elementType?re:ln(u.type,re),V.props=Te,Me=u.pendingProps,Ne=V.context,le=v.contextType,typeof le=="object"&&le!==null?le=Zr(le):(le=Ir(v)?Na:gr.current,le=wi(u,le));var je=v.getDerivedStateFromProps;(Le=typeof je=="function"||typeof V.getSnapshotBeforeUpdate=="function")||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(re!==Me||Ne!==le)&&Zp(u,V,y,le),ra=!1,Ne=u.memoizedState,V.state=Ne,fl(u,y,V,S);var He=u.memoizedState;re!==Me||Ne!==He||Ar.current||ra?(typeof je=="function"&&(nf(u,v,je,y),He=u.memoizedState),(Te=ra||Kp(u,v,Te,y,Ne,He,le)||!1)?(Le||typeof V.UNSAFE_componentWillUpdate!="function"&&typeof V.componentWillUpdate!="function"||(typeof V.componentWillUpdate=="function"&&V.componentWillUpdate(y,He,le),typeof V.UNSAFE_componentWillUpdate=="function"&&V.UNSAFE_componentWillUpdate(y,He,le)),typeof V.componentDidUpdate=="function"&&(u.flags|=4),typeof V.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof V.componentDidUpdate!="function"||re===s.memoizedProps&&Ne===s.memoizedState||(u.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||re===s.memoizedProps&&Ne===s.memoizedState||(u.flags|=1024),u.memoizedProps=y,u.memoizedState=He),V.props=y,V.state=He,V.context=le,y=Te):(typeof V.componentDidUpdate!="function"||re===s.memoizedProps&&Ne===s.memoizedState||(u.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||re===s.memoizedProps&&Ne===s.memoizedState||(u.flags|=1024),y=!1)}return uf(s,u,v,y,P,S)}function uf(s,u,v,y,S,P){sg(s,u);var V=(u.flags&128)!==0;if(!y&&!V)return S&&dp(u,v,!1),Ln(s,u,P);y=u.stateNode,hb.current=u;var re=V&&typeof v.getDerivedStateFromError!="function"?null:y.render();return u.flags|=1,s!==null&&V?(u.child=_i(u,s.child,null,P),u.child=_i(u,null,re,P)):kr(s,u,re,P),u.memoizedState=y.state,S&&dp(u,v,!0),u.child}function lg(s){var u=s.stateNode;u.pendingContext?cp(s,u.pendingContext,u.pendingContext!==u.context):u.context&&cp(s,u.context,!1),Wc(s,u.containerInfo)}function ug(s,u,v,y,S){return Ei(),zc(S),u.flags|=256,kr(s,u,v,y),u.child}var cf={dehydrated:null,treeContext:null,retryLane:0};function ff(s){return{baseLanes:s,cachePool:null,transitions:null}}function cg(s,u,v){var y=u.pendingProps,S=Mt.current,P=!1,V=(u.flags&128)!==0,re;if((re=V)||(re=s!==null&&s.memoizedState===null?!1:(S&2)!==0),re?(P=!0,u.flags&=-129):(s===null||s.memoizedState!==null)&&(S|=1),xt(Mt,S&1),s===null)return Mc(u),s=u.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((u.mode&1)===0?u.lanes=1:s.data==="$!"?u.lanes=8:u.lanes=1073741824,null):(V=y.children,s=y.fallback,P?(y=u.mode,P=u.child,V={mode:"hidden",children:V},(y&1)===0&&P!==null?(P.childLanes=0,P.pendingProps=V):P=Il(V,y,0,null),s=qa(s,y,v,null),P.return=u,s.return=u,P.sibling=s,u.child=P,u.child.memoizedState=ff(v),u.memoizedState=cf,s):df(u,V));if(S=s.memoizedState,S!==null&&(re=S.dehydrated,re!==null))return vb(s,u,V,y,re,S,v);if(P){P=y.fallback,V=u.mode,S=s.child,re=S.sibling;var le={mode:"hidden",children:y.children};return(V&1)===0&&u.child!==S?(y=u.child,y.childLanes=0,y.pendingProps=le,u.deletions=null):(y=ua(S,le),y.subtreeFlags=S.subtreeFlags&14680064),re!==null?P=ua(re,P):(P=qa(P,V,v,null),P.flags|=2),P.return=u,y.return=u,y.sibling=P,u.child=y,y=P,P=u.child,V=s.child.memoizedState,V=V===null?ff(v):{baseLanes:V.baseLanes|v,cachePool:null,transitions:V.transitions},P.memoizedState=V,P.childLanes=s.childLanes&~v,u.memoizedState=cf,y}return P=s.child,s=P.sibling,y=ua(P,{mode:"visible",children:y.children}),(u.mode&1)===0&&(y.lanes=v),y.return=u,y.sibling=null,s!==null&&(v=u.deletions,v===null?(u.deletions=[s],u.flags|=16):v.push(s)),u.child=y,u.memoizedState=null,y}function df(s,u){return u=Il({mode:"visible",children:u},s.mode,0,null),u.return=s,s.child=u}function wl(s,u,v,y){return y!==null&&zc(y),_i(u,s.child,null,v),s=df(u,u.pendingProps.children),s.flags|=2,u.memoizedState=null,s}function vb(s,u,v,y,S,P,V){if(v)return u.flags&256?(u.flags&=-257,y=sf(Error(t(422))),wl(s,u,V,y)):u.memoizedState!==null?(u.child=s.child,u.flags|=128,null):(P=y.fallback,S=u.mode,y=Il({mode:"visible",children:y.children},S,0,null),P=qa(P,S,V,null),P.flags|=2,y.return=u,P.return=u,y.sibling=P,u.child=y,(u.mode&1)!==0&&_i(u,s.child,null,V),u.child.memoizedState=ff(V),u.memoizedState=cf,P);if((u.mode&1)===0)return wl(s,u,V,null);if(S.data==="$!"){if(y=S.nextSibling&&S.nextSibling.dataset,y)var re=y.dgst;return y=re,P=Error(t(419)),y=sf(P,y,void 0),wl(s,u,V,y)}if(re=(V&s.childLanes)!==0,Dr||re){if(y=rr,y!==null){switch(V&-V){case 4:S=2;break;case 16:S=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:S=32;break;case 536870912:S=268435456;break;default:S=0}S=(S&(y.suspendedLanes|V))!==0?0:S,S!==0&&S!==P.retryLane&&(P.retryLane=S,Dn(s,S),fn(y,s,S,-1))}return Pf(),y=sf(Error(t(421))),wl(s,u,V,y)}return S.data==="$?"?(u.flags|=128,u.child=s.child,u=Tb.bind(null,s),S._reactRetry=u,null):(s=P.treeContext,Wr=Qn(S.nextSibling),qr=u,At=!0,on=null,s!==null&&(Kr[Xr++]=An,Kr[Xr++]=In,Kr[Xr++]=La,An=s.id,In=s.overflow,La=u),u=df(u,y.children),u.flags|=4096,u)}function fg(s,u,v){s.lanes|=u;var y=s.alternate;y!==null&&(y.lanes|=u),jc(s.return,u,v)}function hf(s,u,v,y,S){var P=s.memoizedState;P===null?s.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:y,tail:v,tailMode:S}:(P.isBackwards=u,P.rendering=null,P.renderingStartTime=0,P.last=y,P.tail=v,P.tailMode=S)}function dg(s,u,v){var y=u.pendingProps,S=y.revealOrder,P=y.tail;if(kr(s,u,y.children,v),y=Mt.current,(y&2)!==0)y=y&1|2,u.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=u.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&fg(s,v,u);else if(s.tag===19)fg(s,v,u);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===u)break e;for(;s.sibling===null;){if(s.return===null||s.return===u)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}y&=1}if(xt(Mt,y),(u.mode&1)===0)u.memoizedState=null;else switch(S){case"forwards":for(v=u.child,S=null;v!==null;)s=v.alternate,s!==null&&dl(s)===null&&(S=v),v=v.sibling;v=S,v===null?(S=u.child,u.child=null):(S=v.sibling,v.sibling=null),hf(u,!1,S,v,P);break;case"backwards":for(v=null,S=u.child,u.child=null;S!==null;){if(s=S.alternate,s!==null&&dl(s)===null){u.child=S;break}s=S.sibling,S.sibling=v,v=S,S=s}hf(u,!0,v,null,P);break;case"together":hf(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function xl(s,u){(u.mode&1)===0&&s!==null&&(s.alternate=null,u.alternate=null,u.flags|=2)}function Ln(s,u,v){if(s!==null&&(u.dependencies=s.dependencies),$a|=u.lanes,(v&u.childLanes)===0)return null;if(s!==null&&u.child!==s.child)throw Error(t(153));if(u.child!==null){for(s=u.child,v=ua(s,s.pendingProps),u.child=v,v.return=u;s.sibling!==null;)s=s.sibling,v=v.sibling=ua(s,s.pendingProps),v.return=u;v.sibling=null}return u.child}function pb(s,u,v){switch(u.tag){case 3:lg(u),Ei();break;case 5:Cp(u);break;case 1:Ir(u.type)&&rl(u);break;case 4:Wc(u,u.stateNode.containerInfo);break;case 10:var y=u.type._context,S=u.memoizedProps.value;xt(ll,y._currentValue),y._currentValue=S;break;case 13:if(y=u.memoizedState,y!==null)return y.dehydrated!==null?(xt(Mt,Mt.current&1),u.flags|=128,null):(v&u.child.childLanes)!==0?cg(s,u,v):(xt(Mt,Mt.current&1),s=Ln(s,u,v),s!==null?s.sibling:null);xt(Mt,Mt.current&1);break;case 19:if(y=(v&u.childLanes)!==0,(s.flags&128)!==0){if(y)return dg(s,u,v);u.flags|=128}if(S=u.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),xt(Mt,Mt.current),y)break;return null;case 22:case 23:return u.lanes=0,ig(s,u,v)}return Ln(s,u,v)}var hg,vf,vg,pg;hg=function(s,u){for(var v=u.child;v!==null;){if(v.tag===5||v.tag===6)s.appendChild(v.stateNode);else if(v.tag!==4&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===u)break;for(;v.sibling===null;){if(v.return===null||v.return===u)return;v=v.return}v.sibling.return=v.return,v=v.sibling}},vf=function(){},vg=function(s,u,v,y){var S=s.memoizedProps;if(S!==y){s=u.stateNode,za(yn.current);var P=null;switch(v){case"input":S=I(s,S),y=I(s,y),P=[];break;case"select":S=te({},S,{value:void 0}),y=te({},y,{value:void 0}),P=[];break;case"textarea":S=se(s,S),y=se(s,y),P=[];break;default:typeof S.onClick!="function"&&typeof y.onClick=="function"&&(s.onclick=Jo)}we(v,y);var V;v=null;for(Te in S)if(!y.hasOwnProperty(Te)&&S.hasOwnProperty(Te)&&S[Te]!=null)if(Te==="style"){var re=S[Te];for(V in re)re.hasOwnProperty(V)&&(v||(v={}),v[V]="")}else Te!=="dangerouslySetInnerHTML"&&Te!=="children"&&Te!=="suppressContentEditableWarning"&&Te!=="suppressHydrationWarning"&&Te!=="autoFocus"&&(a.hasOwnProperty(Te)?P||(P=[]):(P=P||[]).push(Te,null));for(Te in y){var le=y[Te];if(re=S!=null?S[Te]:void 0,y.hasOwnProperty(Te)&&le!==re&&(le!=null||re!=null))if(Te==="style")if(re){for(V in re)!re.hasOwnProperty(V)||le&&le.hasOwnProperty(V)||(v||(v={}),v[V]="");for(V in le)le.hasOwnProperty(V)&&re[V]!==le[V]&&(v||(v={}),v[V]=le[V])}else v||(P||(P=[]),P.push(Te,v)),v=le;else Te==="dangerouslySetInnerHTML"?(le=le?le.__html:void 0,re=re?re.__html:void 0,le!=null&&re!==le&&(P=P||[]).push(Te,le)):Te==="children"?typeof le!="string"&&typeof le!="number"||(P=P||[]).push(Te,""+le):Te!=="suppressContentEditableWarning"&&Te!=="suppressHydrationWarning"&&(a.hasOwnProperty(Te)?(le!=null&&Te==="onScroll"&&Ct("scroll",s),P||re===le||(P=[])):(P=P||[]).push(Te,le))}v&&(P=P||[]).push("style",v);var Te=P;(u.updateQueue=Te)&&(u.flags|=4)}},pg=function(s,u,v,y){v!==y&&(u.flags|=4)};function Ls(s,u){if(!At)switch(s.tailMode){case"hidden":u=s.tail;for(var v=null;u!==null;)u.alternate!==null&&(v=u),u=u.sibling;v===null?s.tail=null:v.sibling=null;break;case"collapsed":v=s.tail;for(var y=null;v!==null;)v.alternate!==null&&(y=v),v=v.sibling;y===null?u||s.tail===null?s.tail=null:s.tail.sibling=null:y.sibling=null}}function yr(s){var u=s.alternate!==null&&s.alternate.child===s.child,v=0,y=0;if(u)for(var S=s.child;S!==null;)v|=S.lanes|S.childLanes,y|=S.subtreeFlags&14680064,y|=S.flags&14680064,S.return=s,S=S.sibling;else for(S=s.child;S!==null;)v|=S.lanes|S.childLanes,y|=S.subtreeFlags,y|=S.flags,S.return=s,S=S.sibling;return s.subtreeFlags|=y,s.childLanes=v,u}function gb(s,u,v){var y=u.pendingProps;switch(Lc(u),u.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yr(u),null;case 1:return Ir(u.type)&&tl(),yr(u),null;case 3:return y=u.stateNode,Ci(),Tt(Ar),Tt(gr),Kc(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(s===null||s.child===null)&&(sl(u)?u.flags|=4:s===null||s.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,on!==null&&(kf(on),on=null))),vf(s,u),yr(u),null;case 5:Gc(u);var S=za(Bs.current);if(v=u.type,s!==null&&u.stateNode!=null)vg(s,u,v,y,S),s.ref!==u.ref&&(u.flags|=512,u.flags|=2097152);else{if(!y){if(u.stateNode===null)throw Error(t(166));return yr(u),null}if(s=za(yn.current),sl(u)){y=u.stateNode,v=u.type;var P=u.memoizedProps;switch(y[mn]=u,y[ks]=P,s=(u.mode&1)!==0,v){case"dialog":Ct("cancel",y),Ct("close",y);break;case"iframe":case"object":case"embed":Ct("load",y);break;case"video":case"audio":for(S=0;S<Es.length;S++)Ct(Es[S],y);break;case"source":Ct("error",y);break;case"img":case"image":case"link":Ct("error",y),Ct("load",y);break;case"details":Ct("toggle",y);break;case"input":pe(y,P),Ct("invalid",y);break;case"select":y._wrapperState={wasMultiple:!!P.multiple},Ct("invalid",y);break;case"textarea":Be(y,P),Ct("invalid",y)}we(v,P),S=null;for(var V in P)if(P.hasOwnProperty(V)){var re=P[V];V==="children"?typeof re=="string"?y.textContent!==re&&(P.suppressHydrationWarning!==!0&&Qo(y.textContent,re,s),S=["children",re]):typeof re=="number"&&y.textContent!==""+re&&(P.suppressHydrationWarning!==!0&&Qo(y.textContent,re,s),S=["children",""+re]):a.hasOwnProperty(V)&&re!=null&&V==="onScroll"&&Ct("scroll",y)}switch(v){case"input":he(y),K(y,P,!0);break;case"textarea":he(y),Ae(y);break;case"select":case"option":break;default:typeof P.onClick=="function"&&(y.onclick=Jo)}y=S,u.updateQueue=y,y!==null&&(u.flags|=4)}else{V=S.nodeType===9?S:S.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=ze(v)),s==="http://www.w3.org/1999/xhtml"?v==="script"?(s=V.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof y.is=="string"?s=V.createElement(v,{is:y.is}):(s=V.createElement(v),v==="select"&&(V=s,y.multiple?V.multiple=!0:y.size&&(V.size=y.size))):s=V.createElementNS(s,v),s[mn]=u,s[ks]=y,hg(s,u,!1,!1),u.stateNode=s;e:{switch(V=ke(v,y),v){case"dialog":Ct("cancel",s),Ct("close",s),S=y;break;case"iframe":case"object":case"embed":Ct("load",s),S=y;break;case"video":case"audio":for(S=0;S<Es.length;S++)Ct(Es[S],s);S=y;break;case"source":Ct("error",s),S=y;break;case"img":case"image":case"link":Ct("error",s),Ct("load",s),S=y;break;case"details":Ct("toggle",s),S=y;break;case"input":pe(s,y),S=I(s,y),Ct("invalid",s);break;case"option":S=y;break;case"select":s._wrapperState={wasMultiple:!!y.multiple},S=te({},y,{value:void 0}),Ct("invalid",s);break;case"textarea":Be(s,y),S=se(s,y),Ct("invalid",s);break;default:S=y}we(v,S),re=S;for(P in re)if(re.hasOwnProperty(P)){var le=re[P];P==="style"?ce(s,le):P==="dangerouslySetInnerHTML"?(le=le?le.__html:void 0,le!=null&&R(s,le)):P==="children"?typeof le=="string"?(v!=="textarea"||le!=="")&&H(s,le):typeof le=="number"&&H(s,""+le):P!=="suppressContentEditableWarning"&&P!=="suppressHydrationWarning"&&P!=="autoFocus"&&(a.hasOwnProperty(P)?le!=null&&P==="onScroll"&&Ct("scroll",s):le!=null&&_(s,P,le,V))}switch(v){case"input":he(s),K(s,y,!1);break;case"textarea":he(s),Ae(s);break;case"option":y.value!=null&&s.setAttribute("value",""+Ce(y.value));break;case"select":s.multiple=!!y.multiple,P=y.value,P!=null?ye(s,!!y.multiple,P,!1):y.defaultValue!=null&&ye(s,!!y.multiple,y.defaultValue,!0);break;default:typeof S.onClick=="function"&&(s.onclick=Jo)}switch(v){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}}y&&(u.flags|=4)}u.ref!==null&&(u.flags|=512,u.flags|=2097152)}return yr(u),null;case 6:if(s&&u.stateNode!=null)pg(s,u,s.memoizedProps,y);else{if(typeof y!="string"&&u.stateNode===null)throw Error(t(166));if(v=za(Bs.current),za(yn.current),sl(u)){if(y=u.stateNode,v=u.memoizedProps,y[mn]=u,(P=y.nodeValue!==v)&&(s=qr,s!==null))switch(s.tag){case 3:Qo(y.nodeValue,v,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Qo(y.nodeValue,v,(s.mode&1)!==0)}P&&(u.flags|=4)}else y=(v.nodeType===9?v:v.ownerDocument).createTextNode(y),y[mn]=u,u.stateNode=y}return yr(u),null;case 13:if(Tt(Mt),y=u.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(At&&Wr!==null&&(u.mode&1)!==0&&(u.flags&128)===0)yp(),Ei(),u.flags|=98560,P=!1;else if(P=sl(u),y!==null&&y.dehydrated!==null){if(s===null){if(!P)throw Error(t(318));if(P=u.memoizedState,P=P!==null?P.dehydrated:null,!P)throw Error(t(317));P[mn]=u}else Ei(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;yr(u),P=!1}else on!==null&&(kf(on),on=null),P=!0;if(!P)return u.flags&65536?u:null}return(u.flags&128)!==0?(u.lanes=v,u):(y=y!==null,y!==(s!==null&&s.memoizedState!==null)&&y&&(u.child.flags|=8192,(u.mode&1)!==0&&(s===null||(Mt.current&1)!==0?Zt===0&&(Zt=3):Pf())),u.updateQueue!==null&&(u.flags|=4),yr(u),null);case 4:return Ci(),vf(s,u),s===null&&_s(u.stateNode.containerInfo),yr(u),null;case 10:return Uc(u.type._context),yr(u),null;case 17:return Ir(u.type)&&tl(),yr(u),null;case 19:if(Tt(Mt),P=u.memoizedState,P===null)return yr(u),null;if(y=(u.flags&128)!==0,V=P.rendering,V===null)if(y)Ls(P,!1);else{if(Zt!==0||s!==null&&(s.flags&128)!==0)for(s=u.child;s!==null;){if(V=dl(s),V!==null){for(u.flags|=128,Ls(P,!1),y=V.updateQueue,y!==null&&(u.updateQueue=y,u.flags|=4),u.subtreeFlags=0,y=v,v=u.child;v!==null;)P=v,s=y,P.flags&=14680066,V=P.alternate,V===null?(P.childLanes=0,P.lanes=s,P.child=null,P.subtreeFlags=0,P.memoizedProps=null,P.memoizedState=null,P.updateQueue=null,P.dependencies=null,P.stateNode=null):(P.childLanes=V.childLanes,P.lanes=V.lanes,P.child=V.child,P.subtreeFlags=0,P.deletions=null,P.memoizedProps=V.memoizedProps,P.memoizedState=V.memoizedState,P.updateQueue=V.updateQueue,P.type=V.type,s=V.dependencies,P.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),v=v.sibling;return xt(Mt,Mt.current&1|2),u.child}s=s.sibling}P.tail!==null&&Lt()>Bi&&(u.flags|=128,y=!0,Ls(P,!1),u.lanes=4194304)}else{if(!y)if(s=dl(V),s!==null){if(u.flags|=128,y=!0,v=s.updateQueue,v!==null&&(u.updateQueue=v,u.flags|=4),Ls(P,!0),P.tail===null&&P.tailMode==="hidden"&&!V.alternate&&!At)return yr(u),null}else 2*Lt()-P.renderingStartTime>Bi&&v!==1073741824&&(u.flags|=128,y=!0,Ls(P,!1),u.lanes=4194304);P.isBackwards?(V.sibling=u.child,u.child=V):(v=P.last,v!==null?v.sibling=V:u.child=V,P.last=V)}return P.tail!==null?(u=P.tail,P.rendering=u,P.tail=u.sibling,P.renderingStartTime=Lt(),u.sibling=null,v=Mt.current,xt(Mt,y?v&1|2:v&1),u):(yr(u),null);case 22:case 23:return Tf(),y=u.memoizedState!==null,s!==null&&s.memoizedState!==null!==y&&(u.flags|=8192),y&&(u.mode&1)!==0?(Gr&1073741824)!==0&&(yr(u),u.subtreeFlags&6&&(u.flags|=8192)):yr(u),null;case 24:return null;case 25:return null}throw Error(t(156,u.tag))}function mb(s,u){switch(Lc(u),u.tag){case 1:return Ir(u.type)&&tl(),s=u.flags,s&65536?(u.flags=s&-65537|128,u):null;case 3:return Ci(),Tt(Ar),Tt(gr),Kc(),s=u.flags,(s&65536)!==0&&(s&128)===0?(u.flags=s&-65537|128,u):null;case 5:return Gc(u),null;case 13:if(Tt(Mt),s=u.memoizedState,s!==null&&s.dehydrated!==null){if(u.alternate===null)throw Error(t(340));Ei()}return s=u.flags,s&65536?(u.flags=s&-65537|128,u):null;case 19:return Tt(Mt),null;case 4:return Ci(),null;case 10:return Uc(u.type._context),null;case 22:case 23:return Tf(),null;case 24:return null;default:return null}}var bl=!1,wr=!1,yb=typeof WeakSet=="function"?WeakSet:Set,Ve=null;function Pi(s,u){var v=s.ref;if(v!==null)if(typeof v=="function")try{v(null)}catch(y){$t(s,u,y)}else v.current=null}function pf(s,u,v){try{v()}catch(y){$t(s,u,y)}}var gg=!1;function wb(s,u){if(Cc=Uo,s=Kv(),yc(s)){if("selectionStart"in s)var v={start:s.selectionStart,end:s.selectionEnd};else e:{v=(v=s.ownerDocument)&&v.defaultView||window;var y=v.getSelection&&v.getSelection();if(y&&y.rangeCount!==0){v=y.anchorNode;var S=y.anchorOffset,P=y.focusNode;y=y.focusOffset;try{v.nodeType,P.nodeType}catch{v=null;break e}var V=0,re=-1,le=-1,Te=0,Le=0,Me=s,Ne=null;t:for(;;){for(var je;Me!==v||S!==0&&Me.nodeType!==3||(re=V+S),Me!==P||y!==0&&Me.nodeType!==3||(le=V+y),Me.nodeType===3&&(V+=Me.nodeValue.length),(je=Me.firstChild)!==null;)Ne=Me,Me=je;for(;;){if(Me===s)break t;if(Ne===v&&++Te===S&&(re=V),Ne===P&&++Le===y&&(le=V),(je=Me.nextSibling)!==null)break;Me=Ne,Ne=Me.parentNode}Me=je}v=re===-1||le===-1?null:{start:re,end:le}}else v=null}v=v||{start:0,end:0}}else v=null;for(Tc={focusedElem:s,selectionRange:v},Uo=!1,Ve=u;Ve!==null;)if(u=Ve,s=u.child,(u.subtreeFlags&1028)!==0&&s!==null)s.return=u,Ve=s;else for(;Ve!==null;){u=Ve;try{var He=u.alternate;if((u.flags&1024)!==0)switch(u.tag){case 0:case 11:case 15:break;case 1:if(He!==null){var Ze=He.memoizedProps,qt=He.memoizedState,be=u.stateNode,de=be.getSnapshotBeforeUpdate(u.elementType===u.type?Ze:ln(u.type,Ze),qt);be.__reactInternalSnapshotBeforeUpdate=de}break;case 3:var Se=u.stateNode.containerInfo;Se.nodeType===1?Se.textContent="":Se.nodeType===9&&Se.documentElement&&Se.removeChild(Se.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Fe){$t(u,u.return,Fe)}if(s=u.sibling,s!==null){s.return=u.return,Ve=s;break}Ve=u.return}return He=gg,gg=!1,He}function Os(s,u,v){var y=u.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var S=y=y.next;do{if((S.tag&s)===s){var P=S.destroy;S.destroy=void 0,P!==void 0&&pf(u,v,P)}S=S.next}while(S!==y)}}function El(s,u){if(u=u.updateQueue,u=u!==null?u.lastEffect:null,u!==null){var v=u=u.next;do{if((v.tag&s)===s){var y=v.create;v.destroy=y()}v=v.next}while(v!==u)}}function gf(s){var u=s.ref;if(u!==null){var v=s.stateNode;switch(s.tag){case 5:s=v;break;default:s=v}typeof u=="function"?u(s):u.current=s}}function mg(s){var u=s.alternate;u!==null&&(s.alternate=null,mg(u)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(u=s.stateNode,u!==null&&(delete u[mn],delete u[ks],delete u[Ac],delete u[tb],delete u[rb])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function yg(s){return s.tag===5||s.tag===3||s.tag===4}function wg(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||yg(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function mf(s,u,v){var y=s.tag;if(y===5||y===6)s=s.stateNode,u?v.nodeType===8?v.parentNode.insertBefore(s,u):v.insertBefore(s,u):(v.nodeType===8?(u=v.parentNode,u.insertBefore(s,v)):(u=v,u.appendChild(s)),v=v._reactRootContainer,v!=null||u.onclick!==null||(u.onclick=Jo));else if(y!==4&&(s=s.child,s!==null))for(mf(s,u,v),s=s.sibling;s!==null;)mf(s,u,v),s=s.sibling}function yf(s,u,v){var y=s.tag;if(y===5||y===6)s=s.stateNode,u?v.insertBefore(s,u):v.appendChild(s);else if(y!==4&&(s=s.child,s!==null))for(yf(s,u,v),s=s.sibling;s!==null;)yf(s,u,v),s=s.sibling}var lr=null,un=!1;function aa(s,u,v){for(v=v.child;v!==null;)xg(s,u,v),v=v.sibling}function xg(s,u,v){if(jr&&typeof jr.onCommitFiberUnmount=="function")try{jr.onCommitFiberUnmount(Aa,v)}catch{}switch(v.tag){case 5:wr||Pi(v,u);case 6:var y=lr,S=un;lr=null,aa(s,u,v),lr=y,un=S,lr!==null&&(un?(s=lr,v=v.stateNode,s.nodeType===8?s.parentNode.removeChild(v):s.removeChild(v)):lr.removeChild(v.stateNode));break;case 18:lr!==null&&(un?(s=lr,v=v.stateNode,s.nodeType===8?Bc(s.parentNode,v):s.nodeType===1&&Bc(s,v),vs(s)):Bc(lr,v.stateNode));break;case 4:y=lr,S=un,lr=v.stateNode.containerInfo,un=!0,aa(s,u,v),lr=y,un=S;break;case 0:case 11:case 14:case 15:if(!wr&&(y=v.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){S=y=y.next;do{var P=S,V=P.destroy;P=P.tag,V!==void 0&&((P&2)!==0||(P&4)!==0)&&pf(v,u,V),S=S.next}while(S!==y)}aa(s,u,v);break;case 1:if(!wr&&(Pi(v,u),y=v.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=v.memoizedProps,y.state=v.memoizedState,y.componentWillUnmount()}catch(re){$t(v,u,re)}aa(s,u,v);break;case 21:aa(s,u,v);break;case 22:v.mode&1?(wr=(y=wr)||v.memoizedState!==null,aa(s,u,v),wr=y):aa(s,u,v);break;default:aa(s,u,v)}}function bg(s){var u=s.updateQueue;if(u!==null){s.updateQueue=null;var v=s.stateNode;v===null&&(v=s.stateNode=new yb),u.forEach(function(y){var S=Pb.bind(null,s,y);v.has(y)||(v.add(y),y.then(S,S))})}}function cn(s,u){var v=u.deletions;if(v!==null)for(var y=0;y<v.length;y++){var S=v[y];try{var P=s,V=u,re=V;e:for(;re!==null;){switch(re.tag){case 5:lr=re.stateNode,un=!1;break e;case 3:lr=re.stateNode.containerInfo,un=!0;break e;case 4:lr=re.stateNode.containerInfo,un=!0;break e}re=re.return}if(lr===null)throw Error(t(160));xg(P,V,S),lr=null,un=!1;var le=S.alternate;le!==null&&(le.return=null),S.return=null}catch(Te){$t(S,u,Te)}}if(u.subtreeFlags&12854)for(u=u.child;u!==null;)Eg(u,s),u=u.sibling}function Eg(s,u){var v=s.alternate,y=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(cn(u,s),xn(s),y&4){try{Os(3,s,s.return),El(3,s)}catch(Ze){$t(s,s.return,Ze)}try{Os(5,s,s.return)}catch(Ze){$t(s,s.return,Ze)}}break;case 1:cn(u,s),xn(s),y&512&&v!==null&&Pi(v,v.return);break;case 5:if(cn(u,s),xn(s),y&512&&v!==null&&Pi(v,v.return),s.flags&32){var S=s.stateNode;try{H(S,"")}catch(Ze){$t(s,s.return,Ze)}}if(y&4&&(S=s.stateNode,S!=null)){var P=s.memoizedProps,V=v!==null?v.memoizedProps:P,re=s.type,le=s.updateQueue;if(s.updateQueue=null,le!==null)try{re==="input"&&P.type==="radio"&&P.name!=null&&ge(S,P),ke(re,V);var Te=ke(re,P);for(V=0;V<le.length;V+=2){var Le=le[V],Me=le[V+1];Le==="style"?ce(S,Me):Le==="dangerouslySetInnerHTML"?R(S,Me):Le==="children"?H(S,Me):_(S,Le,Me,Te)}switch(re){case"input":Y(S,P);break;case"textarea":Ie(S,P);break;case"select":var Ne=S._wrapperState.wasMultiple;S._wrapperState.wasMultiple=!!P.multiple;var je=P.value;je!=null?ye(S,!!P.multiple,je,!1):Ne!==!!P.multiple&&(P.defaultValue!=null?ye(S,!!P.multiple,P.defaultValue,!0):ye(S,!!P.multiple,P.multiple?[]:"",!1))}S[ks]=P}catch(Ze){$t(s,s.return,Ze)}}break;case 6:if(cn(u,s),xn(s),y&4){if(s.stateNode===null)throw Error(t(162));S=s.stateNode,P=s.memoizedProps;try{S.nodeValue=P}catch(Ze){$t(s,s.return,Ze)}}break;case 3:if(cn(u,s),xn(s),y&4&&v!==null&&v.memoizedState.isDehydrated)try{vs(u.containerInfo)}catch(Ze){$t(s,s.return,Ze)}break;case 4:cn(u,s),xn(s);break;case 13:cn(u,s),xn(s),S=s.child,S.flags&8192&&(P=S.memoizedState!==null,S.stateNode.isHidden=P,!P||S.alternate!==null&&S.alternate.memoizedState!==null||(bf=Lt())),y&4&&bg(s);break;case 22:if(Le=v!==null&&v.memoizedState!==null,s.mode&1?(wr=(Te=wr)||Le,cn(u,s),wr=Te):cn(u,s),xn(s),y&8192){if(Te=s.memoizedState!==null,(s.stateNode.isHidden=Te)&&!Le&&(s.mode&1)!==0)for(Ve=s,Le=s.child;Le!==null;){for(Me=Ve=Le;Ve!==null;){switch(Ne=Ve,je=Ne.child,Ne.tag){case 0:case 11:case 14:case 15:Os(4,Ne,Ne.return);break;case 1:Pi(Ne,Ne.return);var He=Ne.stateNode;if(typeof He.componentWillUnmount=="function"){y=Ne,v=Ne.return;try{u=y,He.props=u.memoizedProps,He.state=u.memoizedState,He.componentWillUnmount()}catch(Ze){$t(y,v,Ze)}}break;case 5:Pi(Ne,Ne.return);break;case 22:if(Ne.memoizedState!==null){kg(Me);continue}}je!==null?(je.return=Ne,Ve=je):kg(Me)}Le=Le.sibling}e:for(Le=null,Me=s;;){if(Me.tag===5){if(Le===null){Le=Me;try{S=Me.stateNode,Te?(P=S.style,typeof P.setProperty=="function"?P.setProperty("display","none","important"):P.display="none"):(re=Me.stateNode,le=Me.memoizedProps.style,V=le!=null&&le.hasOwnProperty("display")?le.display:null,re.style.display=O("display",V))}catch(Ze){$t(s,s.return,Ze)}}}else if(Me.tag===6){if(Le===null)try{Me.stateNode.nodeValue=Te?"":Me.memoizedProps}catch(Ze){$t(s,s.return,Ze)}}else if((Me.tag!==22&&Me.tag!==23||Me.memoizedState===null||Me===s)&&Me.child!==null){Me.child.return=Me,Me=Me.child;continue}if(Me===s)break e;for(;Me.sibling===null;){if(Me.return===null||Me.return===s)break e;Le===Me&&(Le=null),Me=Me.return}Le===Me&&(Le=null),Me.sibling.return=Me.return,Me=Me.sibling}}break;case 19:cn(u,s),xn(s),y&4&&bg(s);break;case 21:break;default:cn(u,s),xn(s)}}function xn(s){var u=s.flags;if(u&2){try{e:{for(var v=s.return;v!==null;){if(yg(v)){var y=v;break e}v=v.return}throw Error(t(160))}switch(y.tag){case 5:var S=y.stateNode;y.flags&32&&(H(S,""),y.flags&=-33);var P=wg(s);yf(s,P,S);break;case 3:case 4:var V=y.stateNode.containerInfo,re=wg(s);mf(s,re,V);break;default:throw Error(t(161))}}catch(le){$t(s,s.return,le)}s.flags&=-3}u&4096&&(s.flags&=-4097)}function xb(s,u,v){Ve=s,_g(s)}function _g(s,u,v){for(var y=(s.mode&1)!==0;Ve!==null;){var S=Ve,P=S.child;if(S.tag===22&&y){var V=S.memoizedState!==null||bl;if(!V){var re=S.alternate,le=re!==null&&re.memoizedState!==null||wr;re=bl;var Te=wr;if(bl=V,(wr=le)&&!Te)for(Ve=S;Ve!==null;)V=Ve,le=V.child,V.tag===22&&V.memoizedState!==null?Cg(S):le!==null?(le.return=V,Ve=le):Cg(S);for(;P!==null;)Ve=P,_g(P),P=P.sibling;Ve=S,bl=re,wr=Te}Sg(s)}else(S.subtreeFlags&8772)!==0&&P!==null?(P.return=S,Ve=P):Sg(s)}}function Sg(s){for(;Ve!==null;){var u=Ve;if((u.flags&8772)!==0){var v=u.alternate;try{if((u.flags&8772)!==0)switch(u.tag){case 0:case 11:case 15:wr||El(5,u);break;case 1:var y=u.stateNode;if(u.flags&4&&!wr)if(v===null)y.componentDidMount();else{var S=u.elementType===u.type?v.memoizedProps:ln(u.type,v.memoizedProps);y.componentDidUpdate(S,v.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var P=u.updateQueue;P!==null&&kp(u,P,y);break;case 3:var V=u.updateQueue;if(V!==null){if(v=null,u.child!==null)switch(u.child.tag){case 5:v=u.child.stateNode;break;case 1:v=u.child.stateNode}kp(u,V,v)}break;case 5:var re=u.stateNode;if(v===null&&u.flags&4){v=re;var le=u.memoizedProps;switch(u.type){case"button":case"input":case"select":case"textarea":le.autoFocus&&v.focus();break;case"img":le.src&&(v.src=le.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(u.memoizedState===null){var Te=u.alternate;if(Te!==null){var Le=Te.memoizedState;if(Le!==null){var Me=Le.dehydrated;Me!==null&&vs(Me)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}wr||u.flags&512&&gf(u)}catch(Ne){$t(u,u.return,Ne)}}if(u===s){Ve=null;break}if(v=u.sibling,v!==null){v.return=u.return,Ve=v;break}Ve=u.return}}function kg(s){for(;Ve!==null;){var u=Ve;if(u===s){Ve=null;break}var v=u.sibling;if(v!==null){v.return=u.return,Ve=v;break}Ve=u.return}}function Cg(s){for(;Ve!==null;){var u=Ve;try{switch(u.tag){case 0:case 11:case 15:var v=u.return;try{El(4,u)}catch(le){$t(u,v,le)}break;case 1:var y=u.stateNode;if(typeof y.componentDidMount=="function"){var S=u.return;try{y.componentDidMount()}catch(le){$t(u,S,le)}}var P=u.return;try{gf(u)}catch(le){$t(u,P,le)}break;case 5:var V=u.return;try{gf(u)}catch(le){$t(u,V,le)}}}catch(le){$t(u,u.return,le)}if(u===s){Ve=null;break}var re=u.sibling;if(re!==null){re.return=u.return,Ve=re;break}Ve=u.return}}var bb=Math.ceil,_l=C.ReactCurrentDispatcher,wf=C.ReactCurrentOwner,Qr=C.ReactCurrentBatchConfig,ct=0,rr=null,Wt=null,ur=0,Gr=0,Ri=Jn(0),Zt=0,Ms=null,$a=0,Sl=0,xf=0,zs=null,Nr=null,bf=0,Bi=1/0,On=null,kl=!1,Ef=null,ia=null,Cl=!1,sa=null,Tl=0,Fs=0,_f=null,Pl=-1,Rl=0;function Cr(){return(ct&6)!==0?Lt():Pl!==-1?Pl:Pl=Lt()}function oa(s){return(s.mode&1)===0?1:(ct&2)!==0&&ur!==0?ur&-ur:ab.transition!==null?(Rl===0&&(Rl=wv()),Rl):(s=mt,s!==0||(s=window.event,s=s===void 0?16:Pv(s.type)),s)}function fn(s,u,v,y){if(50<Fs)throw Fs=0,_f=null,Error(t(185));us(s,v,y),((ct&2)===0||s!==rr)&&(s===rr&&((ct&2)===0&&(Sl|=v),Zt===4&&la(s,ur)),Lr(s,y),v===1&&ct===0&&(u.mode&1)===0&&(Bi=Lt()+500,nl&&ta()))}function Lr(s,u){var v=s.callbackNode;ax(s,u);var y=ui(s,s===rr?ur:0);if(y===0)v!==null&&Oo(v),s.callbackNode=null,s.callbackPriority=0;else if(u=y&-y,s.callbackPriority!==u){if(v!=null&&Oo(v),u===1)s.tag===0?nb(Pg.bind(null,s)):hp(Pg.bind(null,s)),Jx(function(){(ct&6)===0&&ta()}),v=null;else{switch(xv(y)){case 1:v=ss;break;case 4:v=Mo;break;case 16:v=gn;break;case 536870912:v=Ba;break;default:v=gn}v=Og(v,Tg.bind(null,s))}s.callbackPriority=u,s.callbackNode=v}}function Tg(s,u){if(Pl=-1,Rl=0,(ct&6)!==0)throw Error(t(327));var v=s.callbackNode;if(Ai()&&s.callbackNode!==v)return null;var y=ui(s,s===rr?ur:0);if(y===0)return null;if((y&30)!==0||(y&s.expiredLanes)!==0||u)u=Bl(s,y);else{u=y;var S=ct;ct|=2;var P=Bg();(rr!==s||ur!==u)&&(On=null,Bi=Lt()+500,ja(s,u));do try{Sb();break}catch(re){Rg(s,re)}while(!0);$c(),_l.current=P,ct=S,Wt!==null?u=0:(rr=null,ur=0,u=Zt)}if(u!==0){if(u===2&&(S=rc(s),S!==0&&(y=S,u=Sf(s,S))),u===1)throw v=Ms,ja(s,0),la(s,y),Lr(s,Lt()),v;if(u===6)la(s,y);else{if(S=s.current.alternate,(y&30)===0&&!Eb(S)&&(u=Bl(s,y),u===2&&(P=rc(s),P!==0&&(y=P,u=Sf(s,P))),u===1))throw v=Ms,ja(s,0),la(s,y),Lr(s,Lt()),v;switch(s.finishedWork=S,s.finishedLanes=y,u){case 0:case 1:throw Error(t(345));case 2:Va(s,Nr,On);break;case 3:if(la(s,y),(y&130023424)===y&&(u=bf+500-Lt(),10<u)){if(ui(s,0)!==0)break;if(S=s.suspendedLanes,(S&y)!==y){Cr(),s.pingedLanes|=s.suspendedLanes&S;break}s.timeoutHandle=Rc(Va.bind(null,s,Nr,On),u);break}Va(s,Nr,On);break;case 4:if(la(s,y),(y&4194240)===y)break;for(u=s.eventTimes,S=-1;0<y;){var V=31-Ot(y);P=1<<V,V=u[V],V>S&&(S=V),y&=~P}if(y=S,y=Lt()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*bb(y/1960))-y,10<y){s.timeoutHandle=Rc(Va.bind(null,s,Nr,On),y);break}Va(s,Nr,On);break;case 5:Va(s,Nr,On);break;default:throw Error(t(329))}}}return Lr(s,Lt()),s.callbackNode===v?Tg.bind(null,s):null}function Sf(s,u){var v=zs;return s.current.memoizedState.isDehydrated&&(ja(s,u).flags|=256),s=Bl(s,u),s!==2&&(u=Nr,Nr=v,u!==null&&kf(u)),s}function kf(s){Nr===null?Nr=s:Nr.push.apply(Nr,s)}function Eb(s){for(var u=s;;){if(u.flags&16384){var v=u.updateQueue;if(v!==null&&(v=v.stores,v!==null))for(var y=0;y<v.length;y++){var S=v[y],P=S.getSnapshot;S=S.value;try{if(!sn(P(),S))return!1}catch{return!1}}}if(v=u.child,u.subtreeFlags&16384&&v!==null)v.return=u,u=v;else{if(u===s)break;for(;u.sibling===null;){if(u.return===null||u.return===s)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function la(s,u){for(u&=~xf,u&=~Sl,s.suspendedLanes|=u,s.pingedLanes&=~u,s=s.expirationTimes;0<u;){var v=31-Ot(u),y=1<<v;s[v]=-1,u&=~y}}function Pg(s){if((ct&6)!==0)throw Error(t(327));Ai();var u=ui(s,0);if((u&1)===0)return Lr(s,Lt()),null;var v=Bl(s,u);if(s.tag!==0&&v===2){var y=rc(s);y!==0&&(u=y,v=Sf(s,y))}if(v===1)throw v=Ms,ja(s,0),la(s,u),Lr(s,Lt()),v;if(v===6)throw Error(t(345));return s.finishedWork=s.current.alternate,s.finishedLanes=u,Va(s,Nr,On),Lr(s,Lt()),null}function Cf(s,u){var v=ct;ct|=1;try{return s(u)}finally{ct=v,ct===0&&(Bi=Lt()+500,nl&&ta())}}function Ua(s){sa!==null&&sa.tag===0&&(ct&6)===0&&Ai();var u=ct;ct|=1;var v=Qr.transition,y=mt;try{if(Qr.transition=null,mt=1,s)return s()}finally{mt=y,Qr.transition=v,ct=u,(ct&6)===0&&ta()}}function Tf(){Gr=Ri.current,Tt(Ri)}function ja(s,u){s.finishedWork=null,s.finishedLanes=0;var v=s.timeoutHandle;if(v!==-1&&(s.timeoutHandle=-1,Qx(v)),Wt!==null)for(v=Wt.return;v!==null;){var y=v;switch(Lc(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&tl();break;case 3:Ci(),Tt(Ar),Tt(gr),Kc();break;case 5:Gc(y);break;case 4:Ci();break;case 13:Tt(Mt);break;case 19:Tt(Mt);break;case 10:Uc(y.type._context);break;case 22:case 23:Tf()}v=v.return}if(rr=s,Wt=s=ua(s.current,null),ur=Gr=u,Zt=0,Ms=null,xf=Sl=$a=0,Nr=zs=null,Ma!==null){for(u=0;u<Ma.length;u++)if(v=Ma[u],y=v.interleaved,y!==null){v.interleaved=null;var S=y.next,P=v.pending;if(P!==null){var V=P.next;P.next=S,y.next=V}v.pending=y}Ma=null}return s}function Rg(s,u){do{var v=Wt;try{if($c(),hl.current=ml,vl){for(var y=zt.memoizedState;y!==null;){var S=y.queue;S!==null&&(S.pending=null),y=y.next}vl=!1}if(Fa=0,tr=Xt=zt=null,As=!1,Is=0,wf.current=null,v===null||v.return===null){Zt=1,Ms=u,Wt=null;break}e:{var P=s,V=v.return,re=v,le=u;if(u=ur,re.flags|=32768,le!==null&&typeof le=="object"&&typeof le.then=="function"){var Te=le,Le=re,Me=Le.tag;if((Le.mode&1)===0&&(Me===0||Me===11||Me===15)){var Ne=Le.alternate;Ne?(Le.updateQueue=Ne.updateQueue,Le.memoizedState=Ne.memoizedState,Le.lanes=Ne.lanes):(Le.updateQueue=null,Le.memoizedState=null)}var je=eg(V);if(je!==null){je.flags&=-257,tg(je,V,re,P,u),je.mode&1&&Jp(P,Te,u),u=je,le=Te;var He=u.updateQueue;if(He===null){var Ze=new Set;Ze.add(le),u.updateQueue=Ze}else He.add(le);break e}else{if((u&1)===0){Jp(P,Te,u),Pf();break e}le=Error(t(426))}}else if(At&&re.mode&1){var qt=eg(V);if(qt!==null){(qt.flags&65536)===0&&(qt.flags|=256),tg(qt,V,re,P,u),zc(Ti(le,re));break e}}P=le=Ti(le,re),Zt!==4&&(Zt=2),zs===null?zs=[P]:zs.push(P),P=V;do{switch(P.tag){case 3:P.flags|=65536,u&=-u,P.lanes|=u;var be=Yp(P,le,u);Sp(P,be);break e;case 1:re=le;var de=P.type,Se=P.stateNode;if((P.flags&128)===0&&(typeof de.getDerivedStateFromError=="function"||Se!==null&&typeof Se.componentDidCatch=="function"&&(ia===null||!ia.has(Se)))){P.flags|=65536,u&=-u,P.lanes|=u;var Fe=Qp(P,re,u);Sp(P,Fe);break e}}P=P.return}while(P!==null)}Ig(v)}catch(Ye){u=Ye,Wt===v&&v!==null&&(Wt=v=v.return);continue}break}while(!0)}function Bg(){var s=_l.current;return _l.current=ml,s===null?ml:s}function Pf(){(Zt===0||Zt===3||Zt===2)&&(Zt=4),rr===null||($a&268435455)===0&&(Sl&268435455)===0||la(rr,ur)}function Bl(s,u){var v=ct;ct|=2;var y=Bg();(rr!==s||ur!==u)&&(On=null,ja(s,u));do try{_b();break}catch(S){Rg(s,S)}while(!0);if($c(),ct=v,_l.current=y,Wt!==null)throw Error(t(261));return rr=null,ur=0,Zt}function _b(){for(;Wt!==null;)Ag(Wt)}function Sb(){for(;Wt!==null&&!Qu();)Ag(Wt)}function Ag(s){var u=Lg(s.alternate,s,Gr);s.memoizedProps=s.pendingProps,u===null?Ig(s):Wt=u,wf.current=null}function Ig(s){var u=s;do{var v=u.alternate;if(s=u.return,(u.flags&32768)===0){if(v=gb(v,u,Gr),v!==null){Wt=v;return}}else{if(v=mb(v,u),v!==null){v.flags&=32767,Wt=v;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Zt=6,Wt=null;return}}if(u=u.sibling,u!==null){Wt=u;return}Wt=u=s}while(u!==null);Zt===0&&(Zt=5)}function Va(s,u,v){var y=mt,S=Qr.transition;try{Qr.transition=null,mt=1,kb(s,u,v,y)}finally{Qr.transition=S,mt=y}return null}function kb(s,u,v,y){do Ai();while(sa!==null);if((ct&6)!==0)throw Error(t(327));v=s.finishedWork;var S=s.finishedLanes;if(v===null)return null;if(s.finishedWork=null,s.finishedLanes=0,v===s.current)throw Error(t(177));s.callbackNode=null,s.callbackPriority=0;var P=v.lanes|v.childLanes;if(ix(s,P),s===rr&&(Wt=rr=null,ur=0),(v.subtreeFlags&2064)===0&&(v.flags&2064)===0||Cl||(Cl=!0,Og(gn,function(){return Ai(),null})),P=(v.flags&15990)!==0,(v.subtreeFlags&15990)!==0||P){P=Qr.transition,Qr.transition=null;var V=mt;mt=1;var re=ct;ct|=4,wf.current=null,wb(s,v),Eg(v,s),Wx(Tc),Uo=!!Cc,Tc=Cc=null,s.current=v,xb(v),Ju(),ct=re,mt=V,Qr.transition=P}else s.current=v;if(Cl&&(Cl=!1,sa=s,Tl=S),P=s.pendingLanes,P===0&&(ia=null),tc(v.stateNode),Lr(s,Lt()),u!==null)for(y=s.onRecoverableError,v=0;v<u.length;v++)S=u[v],y(S.value,{componentStack:S.stack,digest:S.digest});if(kl)throw kl=!1,s=Ef,Ef=null,s;return(Tl&1)!==0&&s.tag!==0&&Ai(),P=s.pendingLanes,(P&1)!==0?s===_f?Fs++:(Fs=0,_f=s):Fs=0,ta(),null}function Ai(){if(sa!==null){var s=xv(Tl),u=Qr.transition,v=mt;try{if(Qr.transition=null,mt=16>s?16:s,sa===null)var y=!1;else{if(s=sa,sa=null,Tl=0,(ct&6)!==0)throw Error(t(331));var S=ct;for(ct|=4,Ve=s.current;Ve!==null;){var P=Ve,V=P.child;if((Ve.flags&16)!==0){var re=P.deletions;if(re!==null){for(var le=0;le<re.length;le++){var Te=re[le];for(Ve=Te;Ve!==null;){var Le=Ve;switch(Le.tag){case 0:case 11:case 15:Os(8,Le,P)}var Me=Le.child;if(Me!==null)Me.return=Le,Ve=Me;else for(;Ve!==null;){Le=Ve;var Ne=Le.sibling,je=Le.return;if(mg(Le),Le===Te){Ve=null;break}if(Ne!==null){Ne.return=je,Ve=Ne;break}Ve=je}}}var He=P.alternate;if(He!==null){var Ze=He.child;if(Ze!==null){He.child=null;do{var qt=Ze.sibling;Ze.sibling=null,Ze=qt}while(Ze!==null)}}Ve=P}}if((P.subtreeFlags&2064)!==0&&V!==null)V.return=P,Ve=V;else e:for(;Ve!==null;){if(P=Ve,(P.flags&2048)!==0)switch(P.tag){case 0:case 11:case 15:Os(9,P,P.return)}var be=P.sibling;if(be!==null){be.return=P.return,Ve=be;break e}Ve=P.return}}var de=s.current;for(Ve=de;Ve!==null;){V=Ve;var Se=V.child;if((V.subtreeFlags&2064)!==0&&Se!==null)Se.return=V,Ve=Se;else e:for(V=de;Ve!==null;){if(re=Ve,(re.flags&2048)!==0)try{switch(re.tag){case 0:case 11:case 15:El(9,re)}}catch(Ye){$t(re,re.return,Ye)}if(re===V){Ve=null;break e}var Fe=re.sibling;if(Fe!==null){Fe.return=re.return,Ve=Fe;break e}Ve=re.return}}if(ct=S,ta(),jr&&typeof jr.onPostCommitFiberRoot=="function")try{jr.onPostCommitFiberRoot(Aa,s)}catch{}y=!0}return y}finally{mt=v,Qr.transition=u}}return!1}function Dg(s,u,v){u=Ti(v,u),u=Yp(s,u,1),s=na(s,u,1),u=Cr(),s!==null&&(us(s,1,u),Lr(s,u))}function $t(s,u,v){if(s.tag===3)Dg(s,s,v);else for(;u!==null;){if(u.tag===3){Dg(u,s,v);break}else if(u.tag===1){var y=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(ia===null||!ia.has(y))){s=Ti(v,s),s=Qp(u,s,1),u=na(u,s,1),s=Cr(),u!==null&&(us(u,1,s),Lr(u,s));break}}u=u.return}}function Cb(s,u,v){var y=s.pingCache;y!==null&&y.delete(u),u=Cr(),s.pingedLanes|=s.suspendedLanes&v,rr===s&&(ur&v)===v&&(Zt===4||Zt===3&&(ur&130023424)===ur&&500>Lt()-bf?ja(s,0):xf|=v),Lr(s,u)}function Ng(s,u){u===0&&((s.mode&1)===0?u=1:(u=oi,oi<<=1,(oi&130023424)===0&&(oi=4194304)));var v=Cr();s=Dn(s,u),s!==null&&(us(s,u,v),Lr(s,v))}function Tb(s){var u=s.memoizedState,v=0;u!==null&&(v=u.retryLane),Ng(s,v)}function Pb(s,u){var v=0;switch(s.tag){case 13:var y=s.stateNode,S=s.memoizedState;S!==null&&(v=S.retryLane);break;case 19:y=s.stateNode;break;default:throw Error(t(314))}y!==null&&y.delete(u),Ng(s,v)}var Lg;Lg=function(s,u,v){if(s!==null)if(s.memoizedProps!==u.pendingProps||Ar.current)Dr=!0;else{if((s.lanes&v)===0&&(u.flags&128)===0)return Dr=!1,pb(s,u,v);Dr=(s.flags&131072)!==0}else Dr=!1,At&&(u.flags&1048576)!==0&&vp(u,il,u.index);switch(u.lanes=0,u.tag){case 2:var y=u.type;xl(s,u),s=u.pendingProps;var S=wi(u,gr.current);ki(u,v),S=Yc(null,u,y,s,S,v);var P=Qc();return u.flags|=1,typeof S=="object"&&S!==null&&typeof S.render=="function"&&S.$$typeof===void 0?(u.tag=1,u.memoizedState=null,u.updateQueue=null,Ir(y)?(P=!0,rl(u)):P=!1,u.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,qc(u),S.updater=yl,u.stateNode=S,S._reactInternals=u,af(u,y,s,v),u=uf(null,u,y,!0,P,v)):(u.tag=0,At&&P&&Nc(u),kr(null,u,S,v),u=u.child),u;case 16:y=u.elementType;e:{switch(xl(s,u),s=u.pendingProps,S=y._init,y=S(y._payload),u.type=y,S=u.tag=Bb(y),s=ln(y,s),S){case 0:u=lf(null,u,y,s,v);break e;case 1:u=og(null,u,y,s,v);break e;case 11:u=rg(null,u,y,s,v);break e;case 14:u=ng(null,u,y,ln(y.type,s),v);break e}throw Error(t(306,y,""))}return u;case 0:return y=u.type,S=u.pendingProps,S=u.elementType===y?S:ln(y,S),lf(s,u,y,S,v);case 1:return y=u.type,S=u.pendingProps,S=u.elementType===y?S:ln(y,S),og(s,u,y,S,v);case 3:e:{if(lg(u),s===null)throw Error(t(387));y=u.pendingProps,P=u.memoizedState,S=P.element,_p(s,u),fl(u,y,null,v);var V=u.memoizedState;if(y=V.element,P.isDehydrated)if(P={element:y,isDehydrated:!1,cache:V.cache,pendingSuspenseBoundaries:V.pendingSuspenseBoundaries,transitions:V.transitions},u.updateQueue.baseState=P,u.memoizedState=P,u.flags&256){S=Ti(Error(t(423)),u),u=ug(s,u,y,v,S);break e}else if(y!==S){S=Ti(Error(t(424)),u),u=ug(s,u,y,v,S);break e}else for(Wr=Qn(u.stateNode.containerInfo.firstChild),qr=u,At=!0,on=null,v=bp(u,null,y,v),u.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling;else{if(Ei(),y===S){u=Ln(s,u,v);break e}kr(s,u,y,v)}u=u.child}return u;case 5:return Cp(u),s===null&&Mc(u),y=u.type,S=u.pendingProps,P=s!==null?s.memoizedProps:null,V=S.children,Pc(y,S)?V=null:P!==null&&Pc(y,P)&&(u.flags|=32),sg(s,u),kr(s,u,V,v),u.child;case 6:return s===null&&Mc(u),null;case 13:return cg(s,u,v);case 4:return Wc(u,u.stateNode.containerInfo),y=u.pendingProps,s===null?u.child=_i(u,null,y,v):kr(s,u,y,v),u.child;case 11:return y=u.type,S=u.pendingProps,S=u.elementType===y?S:ln(y,S),rg(s,u,y,S,v);case 7:return kr(s,u,u.pendingProps,v),u.child;case 8:return kr(s,u,u.pendingProps.children,v),u.child;case 12:return kr(s,u,u.pendingProps.children,v),u.child;case 10:e:{if(y=u.type._context,S=u.pendingProps,P=u.memoizedProps,V=S.value,xt(ll,y._currentValue),y._currentValue=V,P!==null)if(sn(P.value,V)){if(P.children===S.children&&!Ar.current){u=Ln(s,u,v);break e}}else for(P=u.child,P!==null&&(P.return=u);P!==null;){var re=P.dependencies;if(re!==null){V=P.child;for(var le=re.firstContext;le!==null;){if(le.context===y){if(P.tag===1){le=Nn(-1,v&-v),le.tag=2;var Te=P.updateQueue;if(Te!==null){Te=Te.shared;var Le=Te.pending;Le===null?le.next=le:(le.next=Le.next,Le.next=le),Te.pending=le}}P.lanes|=v,le=P.alternate,le!==null&&(le.lanes|=v),jc(P.return,v,u),re.lanes|=v;break}le=le.next}}else if(P.tag===10)V=P.type===u.type?null:P.child;else if(P.tag===18){if(V=P.return,V===null)throw Error(t(341));V.lanes|=v,re=V.alternate,re!==null&&(re.lanes|=v),jc(V,v,u),V=P.sibling}else V=P.child;if(V!==null)V.return=P;else for(V=P;V!==null;){if(V===u){V=null;break}if(P=V.sibling,P!==null){P.return=V.return,V=P;break}V=V.return}P=V}kr(s,u,S.children,v),u=u.child}return u;case 9:return S=u.type,y=u.pendingProps.children,ki(u,v),S=Zr(S),y=y(S),u.flags|=1,kr(s,u,y,v),u.child;case 14:return y=u.type,S=ln(y,u.pendingProps),S=ln(y.type,S),ng(s,u,y,S,v);case 15:return ag(s,u,u.type,u.pendingProps,v);case 17:return y=u.type,S=u.pendingProps,S=u.elementType===y?S:ln(y,S),xl(s,u),u.tag=1,Ir(y)?(s=!0,rl(u)):s=!1,ki(u,v),Xp(u,y,S),af(u,y,S,v),uf(null,u,y,!0,s,v);case 19:return dg(s,u,v);case 22:return ig(s,u,v)}throw Error(t(156,u.tag))};function Og(s,u){return is(s,u)}function Rb(s,u,v,y){this.tag=s,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jr(s,u,v,y){return new Rb(s,u,v,y)}function Rf(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Bb(s){if(typeof s=="function")return Rf(s)?1:0;if(s!=null){if(s=s.$$typeof,s===D)return 11;if(s===G)return 14}return 2}function ua(s,u){var v=s.alternate;return v===null?(v=Jr(s.tag,u,s.key,s.mode),v.elementType=s.elementType,v.type=s.type,v.stateNode=s.stateNode,v.alternate=s,s.alternate=v):(v.pendingProps=u,v.type=s.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=s.flags&14680064,v.childLanes=s.childLanes,v.lanes=s.lanes,v.child=s.child,v.memoizedProps=s.memoizedProps,v.memoizedState=s.memoizedState,v.updateQueue=s.updateQueue,u=s.dependencies,v.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},v.sibling=s.sibling,v.index=s.index,v.ref=s.ref,v}function Al(s,u,v,y,S,P){var V=2;if(y=s,typeof s=="function")Rf(s)&&(V=1);else if(typeof s=="string")V=5;else e:switch(s){case A:return qa(v.children,S,P,u);case z:V=8,S|=8;break;case M:return s=Jr(12,v,u,S|2),s.elementType=M,s.lanes=P,s;case F:return s=Jr(13,v,u,S),s.elementType=F,s.lanes=P,s;case T:return s=Jr(19,v,u,S),s.elementType=T,s.lanes=P,s;case W:return Il(v,S,P,u);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case U:V=10;break e;case q:V=9;break e;case D:V=11;break e;case G:V=14;break e;case Q:V=16,y=null;break e}throw Error(t(130,s==null?s:typeof s,""))}return u=Jr(V,v,u,S),u.elementType=s,u.type=y,u.lanes=P,u}function qa(s,u,v,y){return s=Jr(7,s,y,u),s.lanes=v,s}function Il(s,u,v,y){return s=Jr(22,s,y,u),s.elementType=W,s.lanes=v,s.stateNode={isHidden:!1},s}function Bf(s,u,v){return s=Jr(6,s,null,u),s.lanes=v,s}function Af(s,u,v){return u=Jr(4,s.children!==null?s.children:[],s.key,u),u.lanes=v,u.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},u}function Ab(s,u,v,y,S){this.tag=u,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nc(0),this.expirationTimes=nc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nc(0),this.identifierPrefix=y,this.onRecoverableError=S,this.mutableSourceEagerHydrationData=null}function If(s,u,v,y,S,P,V,re,le){return s=new Ab(s,u,v,re,le),u===1?(u=1,P===!0&&(u|=8)):u=0,P=Jr(3,null,null,u),s.current=P,P.stateNode=s,P.memoizedState={element:y,isDehydrated:v,cache:null,transitions:null,pendingSuspenseBoundaries:null},qc(P),s}function Ib(s,u,v){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:L,key:y==null?null:""+y,children:s,containerInfo:u,implementation:v}}function Mg(s){if(!s)return ea;s=s._reactInternals;e:{if(_r(s)!==s||s.tag!==1)throw Error(t(170));var u=s;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(Ir(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(u!==null);throw Error(t(171))}if(s.tag===1){var v=s.type;if(Ir(v))return fp(s,v,u)}return u}function zg(s,u,v,y,S,P,V,re,le){return s=If(v,y,!0,s,S,P,V,re,le),s.context=Mg(null),v=s.current,y=Cr(),S=oa(v),P=Nn(y,S),P.callback=u??null,na(v,P,S),s.current.lanes=S,us(s,S,y),Lr(s,y),s}function Dl(s,u,v,y){var S=u.current,P=Cr(),V=oa(S);return v=Mg(v),u.context===null?u.context=v:u.pendingContext=v,u=Nn(P,V),u.payload={element:s},y=y===void 0?null:y,y!==null&&(u.callback=y),s=na(S,u,V),s!==null&&(fn(s,S,V,P),cl(s,S,V)),V}function Nl(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function Fg(s,u){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var v=s.retryLane;s.retryLane=v!==0&&v<u?v:u}}function Df(s,u){Fg(s,u),(s=s.alternate)&&Fg(s,u)}function Db(){return null}var $g=typeof reportError=="function"?reportError:function(s){console.error(s)};function Nf(s){this._internalRoot=s}Ll.prototype.render=Nf.prototype.render=function(s){var u=this._internalRoot;if(u===null)throw Error(t(409));Dl(s,u,null,null)},Ll.prototype.unmount=Nf.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var u=s.containerInfo;Ua(function(){Dl(null,s,null,null)}),u[Rn]=null}};function Ll(s){this._internalRoot=s}Ll.prototype.unstable_scheduleHydration=function(s){if(s){var u=_v();s={blockedOn:null,target:s,priority:u};for(var v=0;v<Xn.length&&u!==0&&u<Xn[v].priority;v++);Xn.splice(v,0,s),v===0&&Cv(s)}};function Lf(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function Ol(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function Ug(){}function Nb(s,u,v,y,S){if(S){if(typeof y=="function"){var P=y;y=function(){var Te=Nl(V);P.call(Te)}}var V=zg(u,y,s,0,null,!1,!1,"",Ug);return s._reactRootContainer=V,s[Rn]=V.current,_s(s.nodeType===8?s.parentNode:s),Ua(),V}for(;S=s.lastChild;)s.removeChild(S);if(typeof y=="function"){var re=y;y=function(){var Te=Nl(le);re.call(Te)}}var le=If(s,0,!1,null,null,!1,!1,"",Ug);return s._reactRootContainer=le,s[Rn]=le.current,_s(s.nodeType===8?s.parentNode:s),Ua(function(){Dl(u,le,v,y)}),le}function Ml(s,u,v,y,S){var P=v._reactRootContainer;if(P){var V=P;if(typeof S=="function"){var re=S;S=function(){var le=Nl(V);re.call(le)}}Dl(u,V,s,S)}else V=Nb(v,u,s,S,y);return Nl(V)}bv=function(s){switch(s.tag){case 3:var u=s.stateNode;if(u.current.memoizedState.isDehydrated){var v=li(u.pendingLanes);v!==0&&(ac(u,v|1),Lr(u,Lt()),(ct&6)===0&&(Bi=Lt()+500,ta()))}break;case 13:Ua(function(){var y=Dn(s,1);if(y!==null){var S=Cr();fn(y,s,1,S)}}),Df(s,1)}},ic=function(s){if(s.tag===13){var u=Dn(s,134217728);if(u!==null){var v=Cr();fn(u,s,134217728,v)}Df(s,134217728)}},Ev=function(s){if(s.tag===13){var u=oa(s),v=Dn(s,u);if(v!==null){var y=Cr();fn(v,s,u,y)}Df(s,u)}},_v=function(){return mt},Sv=function(s,u){var v=mt;try{return mt=s,u()}finally{mt=v}},We=function(s,u,v){switch(u){case"input":if(Y(s,v),u=v.name,v.type==="radio"&&u!=null){for(v=s;v.parentNode;)v=v.parentNode;for(v=v.querySelectorAll("input[name="+JSON.stringify(""+u)+'][type="radio"]'),u=0;u<v.length;u++){var y=v[u];if(y!==s&&y.form===s.form){var S=el(y);if(!S)throw Error(t(90));Ee(y),Y(y,S)}}}break;case"textarea":Ie(s,v);break;case"select":u=v.value,u!=null&&ye(s,!!v.multiple,u,!1)}},st=Cf,it=Ua;var Lb={usingClientEntryPoint:!1,Events:[Cs,mi,el,at,Xe,Cf]},$s={findFiberByHostInstance:Da,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ob={bundleType:$s.bundleType,version:$s.version,rendererPackageName:$s.rendererPackageName,rendererConfig:$s.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:C.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=Wn(s),s===null?null:s.stateNode},findFiberByHostInstance:$s.findFiberByHostInstance||Db,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zl.isDisabled&&zl.supportsFiber)try{Aa=zl.inject(Ob),jr=zl}catch{}}return Or.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Lb,Or.createPortal=function(s,u){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Lf(u))throw Error(t(200));return Ib(s,u,null,v)},Or.createRoot=function(s,u){if(!Lf(s))throw Error(t(299));var v=!1,y="",S=$g;return u!=null&&(u.unstable_strictMode===!0&&(v=!0),u.identifierPrefix!==void 0&&(y=u.identifierPrefix),u.onRecoverableError!==void 0&&(S=u.onRecoverableError)),u=If(s,1,!1,null,null,v,!1,y,S),s[Rn]=u.current,_s(s.nodeType===8?s.parentNode:s),new Nf(u)},Or.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var u=s._reactInternals;if(u===void 0)throw typeof s.render=="function"?Error(t(188)):(s=Object.keys(s).join(","),Error(t(268,s)));return s=Wn(u),s=s===null?null:s.stateNode,s},Or.flushSync=function(s){return Ua(s)},Or.hydrate=function(s,u,v){if(!Ol(u))throw Error(t(200));return Ml(null,s,u,!0,v)},Or.hydrateRoot=function(s,u,v){if(!Lf(s))throw Error(t(405));var y=v!=null&&v.hydratedSources||null,S=!1,P="",V=$g;if(v!=null&&(v.unstable_strictMode===!0&&(S=!0),v.identifierPrefix!==void 0&&(P=v.identifierPrefix),v.onRecoverableError!==void 0&&(V=v.onRecoverableError)),u=zg(u,null,s,1,v??null,S,!1,P,V),s[Rn]=u.current,_s(s),y)for(s=0;s<y.length;s++)v=y[s],S=v._getVersion,S=S(v._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[v,S]:u.mutableSourceEagerHydrationData.push(v,S);return new Ll(u)},Or.render=function(s,u,v){if(!Ol(u))throw Error(t(200));return Ml(null,s,u,!1,v)},Or.unmountComponentAtNode=function(s){if(!Ol(s))throw Error(t(40));return s._reactRootContainer?(Ua(function(){Ml(null,null,s,!1,function(){s._reactRootContainer=null,s[Rn]=null})}),!0):!1},Or.unstable_batchedUpdates=Cf,Or.unstable_renderSubtreeIntoContainer=function(s,u,v,y){if(!Ol(v))throw Error(t(200));if(s==null||s._reactInternals===void 0)throw Error(t(38));return Ml(s,u,v,!1,y)},Or.version="18.3.1-next-f1338f8080-20240426",Or}var Xg;function qb(){if(Xg)return zf.exports;Xg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),zf.exports=Vb(),zf.exports}var Zg;function Wb(){if(Zg)return $l;Zg=1;var r=qb();return $l.createRoot=r.createRoot,$l.hydrateRoot=r.hydrateRoot,$l}var Gb=Wb();const Hb=Iu(Gb),Kb={},Yg=r=>{let e;const t=new Set,n=(d,h)=>{const p=typeof d=="function"?d(e):d;if(!Object.is(p,e)){const g=e;e=h??(typeof p!="object"||p===null)?p:Object.assign({},e,p),t.forEach(m=>m(e,g))}},a=()=>e,c={setState:n,getState:a,getInitialState:()=>f,subscribe:d=>(t.add(d),()=>t.delete(d)),destroy:()=>{(Kb?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},f=e=r(n,a,c);return c},Xb=r=>r?Yg(r):Yg;var Uf={exports:{}},jf={},Vf={exports:{}},qf={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qg;function Zb(){if(Qg)return qf;Qg=1;var r=bo();function e(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var t=typeof Object.is=="function"?Object.is:e,n=r.useState,a=r.useEffect,i=r.useLayoutEffect,o=r.useDebugValue;function l(h,p){var g=p(),m=n({inst:{value:g,getSnapshot:p}}),w=m[0].inst,x=m[1];return i(function(){w.value=g,w.getSnapshot=p,c(w)&&x({inst:w})},[h,g,p]),a(function(){return c(w)&&x({inst:w}),h(function(){c(w)&&x({inst:w})})},[h]),o(g),g}function c(h){var p=h.getSnapshot;h=h.value;try{var g=p();return!t(h,g)}catch{return!0}}function f(h,p){return p()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:l;return qf.useSyncExternalStore=r.useSyncExternalStore!==void 0?r.useSyncExternalStore:d,qf}var Jg;function Yb(){return Jg||(Jg=1,Vf.exports=Zb()),Vf.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var em;function Qb(){if(em)return jf;em=1;var r=bo(),e=Yb();function t(f,d){return f===d&&(f!==0||1/f===1/d)||f!==f&&d!==d}var n=typeof Object.is=="function"?Object.is:t,a=e.useSyncExternalStore,i=r.useRef,o=r.useEffect,l=r.useMemo,c=r.useDebugValue;return jf.useSyncExternalStoreWithSelector=function(f,d,h,p,g){var m=i(null);if(m.current===null){var w={hasValue:!1,value:null};m.current=w}else w=m.current;m=l(function(){function b(L){if(!E){if(E=!0,_=L,L=p(L),g!==void 0&&w.hasValue){var A=w.value;if(g(A,L))return C=A}return C=L}if(A=C,n(_,L))return A;var z=p(L);return g!==void 0&&g(A,z)?(_=L,A):(_=L,C=z)}var E=!1,_,C,B=h===void 0?null:h;return[function(){return b(d())},B===null?void 0:function(){return b(B())}]},[d,h,p,g]);var x=a(f,m[0],m[1]);return o(function(){w.hasValue=!0,w.value=x},[x]),c(x),x},jf}var tm;function Jb(){return tm||(tm=1,Uf.exports=Qb()),Uf.exports}var e2=Jb();const t2=Iu(e2),X0={},{useDebugValue:r2}=K0,{useSyncExternalStoreWithSelector:n2}=t2;let rm=!1;const a2=r=>r;function i2(r,e=a2,t){(X0?"production":void 0)!=="production"&&t&&!rm&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),rm=!0);const n=n2(r.subscribe,r.getState,r.getServerState||r.getInitialState,e,t);return r2(n),n}const nm=r=>{(X0?"production":void 0)!=="production"&&typeof r!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof r=="function"?Xb(r):r,t=(n,a)=>i2(e,n,a);return Object.assign(t,e),t},s2=r=>r?nm(r):nm,Z0=["Theorem","Lemma","Corollary","Definition","Formula","Example","Exercise","Axiom","Proposition","Conclusion"],Y0=["Proves","DependsOn","DerivedFrom","Contains","EquivalentTo","AppliesTo","Uses","AssistsIn"],o2=[...Z0],l2=[...Y0],am={nodes:[],edges:[]},Ke=s2((r,e)=>({graph:am,assets:{},latexFiles:[],schema:{entityTypes:o2,relationTypes:l2,notes:""},llm:{enabled:!1,protocol:"openai",baseUrl:"https://api.openai.com/v1",model:"gpt-5",apiKey:"",temperature:.2,topP:.9,maxTokens:1e5,parallelism:4},view:{showExamples:!0,showExercises:!0,showIsolated:!0},processing:{status:"idle",totalChunks:0,doneChunks:0},lastError:null,lastInfo:null,setInfo:t=>r({lastInfo:t}),setError:t=>r({lastError:t}),setSchema:t=>r({schema:{...e().schema,...t}}),setLlm:t=>r({llm:{...e().llm,...t}}),setView:t=>r({view:{...e().view,...t}}),setLatexFiles:t=>r({latexFiles:t}),setAssets:t=>r({assets:t}),setGraph:t=>r({graph:t}),mergeGraph:t=>r(n=>({graph:{nodes:t.nodes?u2(n.graph.nodes,t.nodes):n.graph.nodes,edges:t.edges?c2(n.graph.edges,t.edges):n.graph.edges}})),updateNode:(t,n)=>r(a=>({graph:{...a.graph,nodes:a.graph.nodes.map(i=>i.id===t?{...i,...n,meta:{...i.meta,...n.meta}}:i)}})),updateNodes:t=>r(n=>{const a=new Map(t.map(i=>[i.id,i.patch]));return{graph:{...n.graph,nodes:n.graph.nodes.map(i=>{const o=a.get(i.id);return o?{...i,...o,meta:{...i.meta,...o.meta}}:i})}}}),setProcessing:t=>r({processing:{...e().processing,...t}}),stopProcessing:()=>{const t=e().processing.abortController;t&&t.abort(),r({processing:{...e().processing,status:"stopped",abortController:void 0}})},resetAll:()=>{const t=e().assets;for(const n of Object.values(t))URL.revokeObjectURL(n);r({graph:am,assets:{},latexFiles:[],processing:{status:"idle",totalChunks:0,doneChunks:0},lastError:null,lastInfo:null})}}));function u2(r,e){const t=new Map(r.map(n=>[n.id,n]));for(const n of e){const a=t.get(n.id);t.set(n.id,a?{...a,...n,meta:{...a.meta,...n.meta}}:n)}return[...t.values()]}function c2(r,e){const t=a=>{var i;return`${a.source}::${a.type}::${a.target}${(i=a.meta)!=null&&i.chunkId?`::${a.meta.chunkId}`:""}`},n=new Map(r.map(a=>[t(a),a]));for(const a of e){const i=t(a),o=n.get(i);n.set(i,o?{...o,...a,meta:{...o.meta,...a.meta}}:a)}return[...n.values()]}function Ul(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Wf={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var im;function f2(){return im||(im=1,(function(r,e){(function(t){r.exports=t()})(function(){return(function t(n,a,i){function o(f,d){if(!a[f]){if(!n[f]){var h=typeof Ul=="function"&&Ul;if(!d&&h)return h(f,!0);if(l)return l(f,!0);var p=new Error("Cannot find module '"+f+"'");throw p.code="MODULE_NOT_FOUND",p}var g=a[f]={exports:{}};n[f][0].call(g.exports,function(m){var w=n[f][1][m];return o(w||m)},g,g.exports,t,n,a,i)}return a[f].exports}for(var l=typeof Ul=="function"&&Ul,c=0;c<i.length;c++)o(i[c]);return o})({1:[function(t,n,a){var i=t("./utils"),o=t("./support"),l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.encode=function(c){for(var f,d,h,p,g,m,w,x=[],b=0,E=c.length,_=E,C=i.getTypeOf(c)!=="string";b<c.length;)_=E-b,h=C?(f=c[b++],d=b<E?c[b++]:0,b<E?c[b++]:0):(f=c.charCodeAt(b++),d=b<E?c.charCodeAt(b++):0,b<E?c.charCodeAt(b++):0),p=f>>2,g=(3&f)<<4|d>>4,m=1<_?(15&d)<<2|h>>6:64,w=2<_?63&h:64,x.push(l.charAt(p)+l.charAt(g)+l.charAt(m)+l.charAt(w));return x.join("")},a.decode=function(c){var f,d,h,p,g,m,w=0,x=0,b="data:";if(c.substr(0,b.length)===b)throw new Error("Invalid base64 input, it looks like a data url.");var E,_=3*(c=c.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(c.charAt(c.length-1)===l.charAt(64)&&_--,c.charAt(c.length-2)===l.charAt(64)&&_--,_%1!=0)throw new Error("Invalid base64 input, bad content length.");for(E=o.uint8array?new Uint8Array(0|_):new Array(0|_);w<c.length;)f=l.indexOf(c.charAt(w++))<<2|(p=l.indexOf(c.charAt(w++)))>>4,d=(15&p)<<4|(g=l.indexOf(c.charAt(w++)))>>2,h=(3&g)<<6|(m=l.indexOf(c.charAt(w++))),E[x++]=f,g!==64&&(E[x++]=d),m!==64&&(E[x++]=h);return E}},{"./support":30,"./utils":32}],2:[function(t,n,a){var i=t("./external"),o=t("./stream/DataWorker"),l=t("./stream/Crc32Probe"),c=t("./stream/DataLengthProbe");function f(d,h,p,g,m){this.compressedSize=d,this.uncompressedSize=h,this.crc32=p,this.compression=g,this.compressedContent=m}f.prototype={getContentWorker:function(){var d=new o(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new c("data_length")),h=this;return d.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),d},getCompressedWorker:function(){return new o(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},f.createWorkerFrom=function(d,h,p){return d.pipe(new l).pipe(new c("uncompressedSize")).pipe(h.compressWorker(p)).pipe(new c("compressedSize")).withStreamInfo("compression",h)},n.exports=f},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,n,a){var i=t("./stream/GenericWorker");a.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},a.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,n,a){var i=t("./utils"),o=(function(){for(var l,c=[],f=0;f<256;f++){l=f;for(var d=0;d<8;d++)l=1&l?3988292384^l>>>1:l>>>1;c[f]=l}return c})();n.exports=function(l,c){return l!==void 0&&l.length?i.getTypeOf(l)!=="string"?(function(f,d,h,p){var g=o,m=p+h;f^=-1;for(var w=p;w<m;w++)f=f>>>8^g[255&(f^d[w])];return-1^f})(0|c,l,l.length,0):(function(f,d,h,p){var g=o,m=p+h;f^=-1;for(var w=p;w<m;w++)f=f>>>8^g[255&(f^d.charCodeAt(w))];return-1^f})(0|c,l,l.length,0):0}},{"./utils":32}],5:[function(t,n,a){a.base64=!1,a.binary=!1,a.dir=!1,a.createFolders=!0,a.date=null,a.compression=null,a.compressionOptions=null,a.comment=null,a.unixPermissions=null,a.dosPermissions=null},{}],6:[function(t,n,a){var i=null;i=typeof Promise<"u"?Promise:t("lie"),n.exports={Promise:i}},{lie:37}],7:[function(t,n,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=t("pako"),l=t("./utils"),c=t("./stream/GenericWorker"),f=i?"uint8array":"array";function d(h,p){c.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=p,this.meta={}}a.magic="\b\0",l.inherits(d,c),d.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(l.transformTo(f,h.data),!1)},d.prototype.flush=function(){c.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},d.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this._pako=null},d.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(p){h.push({data:p,meta:h.meta})}},a.compressWorker=function(h){return new d("Deflate",h)},a.uncompressWorker=function(){return new d("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,n,a){function i(g,m){var w,x="";for(w=0;w<m;w++)x+=String.fromCharCode(255&g),g>>>=8;return x}function o(g,m,w,x,b,E){var _,C,B=g.file,L=g.compression,A=E!==f.utf8encode,z=l.transformTo("string",E(B.name)),M=l.transformTo("string",f.utf8encode(B.name)),U=B.comment,q=l.transformTo("string",E(U)),D=l.transformTo("string",f.utf8encode(U)),F=M.length!==B.name.length,T=D.length!==U.length,G="",Q="",W="",X=B.dir,Z=B.date,te={crc32:0,compressedSize:0,uncompressedSize:0};m&&!w||(te.crc32=g.crc32,te.compressedSize=g.compressedSize,te.uncompressedSize=g.uncompressedSize);var N=0;m&&(N|=8),A||!F&&!T||(N|=2048);var $=0,oe=0;X&&($|=16),b==="UNIX"?(oe=798,$|=(function(ne,xe){var Pe=ne;return ne||(Pe=xe?16893:33204),(65535&Pe)<<16})(B.unixPermissions,X)):(oe=20,$|=(function(ne){return 63&(ne||0)})(B.dosPermissions)),_=Z.getUTCHours(),_<<=6,_|=Z.getUTCMinutes(),_<<=5,_|=Z.getUTCSeconds()/2,C=Z.getUTCFullYear()-1980,C<<=4,C|=Z.getUTCMonth()+1,C<<=5,C|=Z.getUTCDate(),F&&(Q=i(1,1)+i(d(z),4)+M,G+="up"+i(Q.length,2)+Q),T&&(W=i(1,1)+i(d(q),4)+D,G+="uc"+i(W.length,2)+W);var ie="";return ie+=`
\0`,ie+=i(N,2),ie+=L.magic,ie+=i(_,2),ie+=i(C,2),ie+=i(te.crc32,4),ie+=i(te.compressedSize,4),ie+=i(te.uncompressedSize,4),ie+=i(z.length,2),ie+=i(G.length,2),{fileRecord:h.LOCAL_FILE_HEADER+ie+z+G,dirRecord:h.CENTRAL_FILE_HEADER+i(oe,2)+ie+i(q.length,2)+"\0\0\0\0"+i($,4)+i(x,4)+z+G+q}}var l=t("../utils"),c=t("../stream/GenericWorker"),f=t("../utf8"),d=t("../crc32"),h=t("../signature");function p(g,m,w,x){c.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=m,this.zipPlatform=w,this.encodeFileName=x,this.streamFiles=g,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}l.inherits(p,c),p.prototype.push=function(g){var m=g.meta.percent||0,w=this.entriesCount,x=this._sources.length;this.accumulate?this.contentBuffer.push(g):(this.bytesWritten+=g.data.length,c.prototype.push.call(this,{data:g.data,meta:{currentFile:this.currentFile,percent:w?(m+100*(w-x-1))/w:100}}))},p.prototype.openedSource=function(g){this.currentSourceOffset=this.bytesWritten,this.currentFile=g.file.name;var m=this.streamFiles&&!g.file.dir;if(m){var w=o(g,m,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:w.fileRecord,meta:{percent:0}})}else this.accumulate=!0},p.prototype.closedSource=function(g){this.accumulate=!1;var m=this.streamFiles&&!g.file.dir,w=o(g,m,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(w.dirRecord),m)this.push({data:(function(x){return h.DATA_DESCRIPTOR+i(x.crc32,4)+i(x.compressedSize,4)+i(x.uncompressedSize,4)})(g),meta:{percent:100}});else for(this.push({data:w.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},p.prototype.flush=function(){for(var g=this.bytesWritten,m=0;m<this.dirRecords.length;m++)this.push({data:this.dirRecords[m],meta:{percent:100}});var w=this.bytesWritten-g,x=(function(b,E,_,C,B){var L=l.transformTo("string",B(C));return h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(b,2)+i(b,2)+i(E,4)+i(_,4)+i(L.length,2)+L})(this.dirRecords.length,w,g,this.zipComment,this.encodeFileName);this.push({data:x,meta:{percent:100}})},p.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},p.prototype.registerPrevious=function(g){this._sources.push(g);var m=this;return g.on("data",function(w){m.processChunk(w)}),g.on("end",function(){m.closedSource(m.previous.streamInfo),m._sources.length?m.prepareNextSource():m.end()}),g.on("error",function(w){m.error(w)}),this},p.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},p.prototype.error=function(g){var m=this._sources;if(!c.prototype.error.call(this,g))return!1;for(var w=0;w<m.length;w++)try{m[w].error(g)}catch{}return!0},p.prototype.lock=function(){c.prototype.lock.call(this);for(var g=this._sources,m=0;m<g.length;m++)g[m].lock()},n.exports=p},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,n,a){var i=t("../compressions"),o=t("./ZipFileWorker");a.generateWorker=function(l,c,f){var d=new o(c.streamFiles,f,c.platform,c.encodeFileName),h=0;try{l.forEach(function(p,g){h++;var m=(function(E,_){var C=E||_,B=i[C];if(!B)throw new Error(C+" is not a valid compression method !");return B})(g.options.compression,c.compression),w=g.options.compressionOptions||c.compressionOptions||{},x=g.dir,b=g.date;g._compressWorker(m,w).withStreamInfo("file",{name:p,dir:x,date:b,comment:g.comment||"",unixPermissions:g.unixPermissions,dosPermissions:g.dosPermissions}).pipe(d)}),d.entriesCount=h}catch(p){d.error(p)}return d}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,n,a){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new i;for(var l in this)typeof this[l]!="function"&&(o[l]=this[l]);return o}}(i.prototype=t("./object")).loadAsync=t("./load"),i.support=t("./support"),i.defaults=t("./defaults"),i.version="3.10.1",i.loadAsync=function(o,l){return new i().loadAsync(o,l)},i.external=t("./external"),n.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,n,a){var i=t("./utils"),o=t("./external"),l=t("./utf8"),c=t("./zipEntries"),f=t("./stream/Crc32Probe"),d=t("./nodejsUtils");function h(p){return new o.Promise(function(g,m){var w=p.decompressed.getContentWorker().pipe(new f);w.on("error",function(x){m(x)}).on("end",function(){w.streamInfo.crc32!==p.decompressed.crc32?m(new Error("Corrupted zip : CRC32 mismatch")):g()}).resume()})}n.exports=function(p,g){var m=this;return g=i.extend(g||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:l.utf8decode}),d.isNode&&d.isStream(p)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",p,!0,g.optimizedBinaryString,g.base64).then(function(w){var x=new c(g);return x.load(w),x}).then(function(w){var x=[o.Promise.resolve(w)],b=w.files;if(g.checkCRC32)for(var E=0;E<b.length;E++)x.push(h(b[E]));return o.Promise.all(x)}).then(function(w){for(var x=w.shift(),b=x.files,E=0;E<b.length;E++){var _=b[E],C=_.fileNameStr,B=i.resolve(_.fileNameStr);m.file(B,_.decompressed,{binary:!0,optimizedBinaryString:!0,date:_.date,dir:_.dir,comment:_.fileCommentStr.length?_.fileCommentStr:null,unixPermissions:_.unixPermissions,dosPermissions:_.dosPermissions,createFolders:g.createFolders}),_.dir||(m.file(B).unsafeOriginalName=C)}return x.zipComment.length&&(m.comment=x.zipComment),m})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,n,a){var i=t("../utils"),o=t("../stream/GenericWorker");function l(c,f){o.call(this,"Nodejs stream input adapter for "+c),this._upstreamEnded=!1,this._bindStream(f)}i.inherits(l,o),l.prototype._bindStream=function(c){var f=this;(this._stream=c).pause(),c.on("data",function(d){f.push({data:d,meta:{percent:0}})}).on("error",function(d){f.isPaused?this.generatedError=d:f.error(d)}).on("end",function(){f.isPaused?f._upstreamEnded=!0:f.end()})},l.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},l.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=l},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,n,a){var i=t("readable-stream").Readable;function o(l,c,f){i.call(this,c),this._helper=l;var d=this;l.on("data",function(h,p){d.push(h)||d._helper.pause(),f&&f(p)}).on("error",function(h){d.emit("error",h)}).on("end",function(){d.push(null)})}t("../utils").inherits(o,i),o.prototype._read=function(){this._helper.resume()},n.exports=o},{"../utils":32,"readable-stream":16}],14:[function(t,n,a){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,o);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,o)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var o=new Buffer(i);return o.fill(0),o},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(t,n,a){function i(B,L,A){var z,M=l.getTypeOf(L),U=l.extend(A||{},d);U.date=U.date||new Date,U.compression!==null&&(U.compression=U.compression.toUpperCase()),typeof U.unixPermissions=="string"&&(U.unixPermissions=parseInt(U.unixPermissions,8)),U.unixPermissions&&16384&U.unixPermissions&&(U.dir=!0),U.dosPermissions&&16&U.dosPermissions&&(U.dir=!0),U.dir&&(B=b(B)),U.createFolders&&(z=x(B))&&E.call(this,z,!0);var q=M==="string"&&U.binary===!1&&U.base64===!1;A&&A.binary!==void 0||(U.binary=!q),(L instanceof h&&L.uncompressedSize===0||U.dir||!L||L.length===0)&&(U.base64=!1,U.binary=!0,L="",U.compression="STORE",M="string");var D=null;D=L instanceof h||L instanceof c?L:m.isNode&&m.isStream(L)?new w(B,L):l.prepareContent(B,L,U.binary,U.optimizedBinaryString,U.base64);var F=new p(B,D,U);this.files[B]=F}var o=t("./utf8"),l=t("./utils"),c=t("./stream/GenericWorker"),f=t("./stream/StreamHelper"),d=t("./defaults"),h=t("./compressedObject"),p=t("./zipObject"),g=t("./generate"),m=t("./nodejsUtils"),w=t("./nodejs/NodejsStreamInputAdapter"),x=function(B){B.slice(-1)==="/"&&(B=B.substring(0,B.length-1));var L=B.lastIndexOf("/");return 0<L?B.substring(0,L):""},b=function(B){return B.slice(-1)!=="/"&&(B+="/"),B},E=function(B,L){return L=L!==void 0?L:d.createFolders,B=b(B),this.files[B]||i.call(this,B,null,{dir:!0,createFolders:L}),this.files[B]};function _(B){return Object.prototype.toString.call(B)==="[object RegExp]"}var C={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(B){var L,A,z;for(L in this.files)z=this.files[L],(A=L.slice(this.root.length,L.length))&&L.slice(0,this.root.length)===this.root&&B(A,z)},filter:function(B){var L=[];return this.forEach(function(A,z){B(A,z)&&L.push(z)}),L},file:function(B,L,A){if(arguments.length!==1)return B=this.root+B,i.call(this,B,L,A),this;if(_(B)){var z=B;return this.filter(function(U,q){return!q.dir&&z.test(U)})}var M=this.files[this.root+B];return M&&!M.dir?M:null},folder:function(B){if(!B)return this;if(_(B))return this.filter(function(M,U){return U.dir&&B.test(M)});var L=this.root+B,A=E.call(this,L),z=this.clone();return z.root=A.name,z},remove:function(B){B=this.root+B;var L=this.files[B];if(L||(B.slice(-1)!=="/"&&(B+="/"),L=this.files[B]),L&&!L.dir)delete this.files[B];else for(var A=this.filter(function(M,U){return U.name.slice(0,B.length)===B}),z=0;z<A.length;z++)delete this.files[A[z].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(B){var L,A={};try{if((A=l.extend(B||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=A.type.toLowerCase(),A.compression=A.compression.toUpperCase(),A.type==="binarystring"&&(A.type="string"),!A.type)throw new Error("No output type specified.");l.checkSupport(A.type),A.platform!=="darwin"&&A.platform!=="freebsd"&&A.platform!=="linux"&&A.platform!=="sunos"||(A.platform="UNIX"),A.platform==="win32"&&(A.platform="DOS");var z=A.comment||this.comment||"";L=g.generateWorker(this,A,z)}catch(M){(L=new c("error")).error(M)}return new f(L,A.type||"string",A.mimeType)},generateAsync:function(B,L){return this.generateInternalStream(B).accumulate(L)},generateNodeStream:function(B,L){return(B=B||{}).type||(B.type="nodebuffer"),this.generateInternalStream(B).toNodejsStream(L)}};n.exports=C},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,n,a){n.exports=t("stream")},{stream:void 0}],17:[function(t,n,a){var i=t("./DataReader");function o(l){i.call(this,l);for(var c=0;c<this.data.length;c++)l[c]=255&l[c]}t("../utils").inherits(o,i),o.prototype.byteAt=function(l){return this.data[this.zero+l]},o.prototype.lastIndexOfSignature=function(l){for(var c=l.charCodeAt(0),f=l.charCodeAt(1),d=l.charCodeAt(2),h=l.charCodeAt(3),p=this.length-4;0<=p;--p)if(this.data[p]===c&&this.data[p+1]===f&&this.data[p+2]===d&&this.data[p+3]===h)return p-this.zero;return-1},o.prototype.readAndCheckSignature=function(l){var c=l.charCodeAt(0),f=l.charCodeAt(1),d=l.charCodeAt(2),h=l.charCodeAt(3),p=this.readData(4);return c===p[0]&&f===p[1]&&d===p[2]&&h===p[3]},o.prototype.readData=function(l){if(this.checkOffset(l),l===0)return[];var c=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},n.exports=o},{"../utils":32,"./DataReader":18}],18:[function(t,n,a){var i=t("../utils");function o(l){this.data=l,this.length=l.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(l){this.checkIndex(this.index+l)},checkIndex:function(l){if(this.length<this.zero+l||l<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+l+"). Corrupted zip ?")},setIndex:function(l){this.checkIndex(l),this.index=l},skip:function(l){this.setIndex(this.index+l)},byteAt:function(){},readInt:function(l){var c,f=0;for(this.checkOffset(l),c=this.index+l-1;c>=this.index;c--)f=(f<<8)+this.byteAt(c);return this.index+=l,f},readString:function(l){return i.transformTo("string",this.readData(l))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var l=this.readInt(4);return new Date(Date.UTC(1980+(l>>25&127),(l>>21&15)-1,l>>16&31,l>>11&31,l>>5&63,(31&l)<<1))}},n.exports=o},{"../utils":32}],19:[function(t,n,a){var i=t("./Uint8ArrayReader");function o(l){i.call(this,l)}t("../utils").inherits(o,i),o.prototype.readData=function(l){this.checkOffset(l);var c=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},n.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,n,a){var i=t("./DataReader");function o(l){i.call(this,l)}t("../utils").inherits(o,i),o.prototype.byteAt=function(l){return this.data.charCodeAt(this.zero+l)},o.prototype.lastIndexOfSignature=function(l){return this.data.lastIndexOf(l)-this.zero},o.prototype.readAndCheckSignature=function(l){return l===this.readData(4)},o.prototype.readData=function(l){this.checkOffset(l);var c=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},n.exports=o},{"../utils":32,"./DataReader":18}],21:[function(t,n,a){var i=t("./ArrayReader");function o(l){i.call(this,l)}t("../utils").inherits(o,i),o.prototype.readData=function(l){if(this.checkOffset(l),l===0)return new Uint8Array(0);var c=this.data.subarray(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},n.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(t,n,a){var i=t("../utils"),o=t("../support"),l=t("./ArrayReader"),c=t("./StringReader"),f=t("./NodeBufferReader"),d=t("./Uint8ArrayReader");n.exports=function(h){var p=i.getTypeOf(h);return i.checkSupport(p),p!=="string"||o.uint8array?p==="nodebuffer"?new f(h):o.uint8array?new d(i.transformTo("uint8array",h)):new l(i.transformTo("array",h)):new c(h)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,n,a){a.LOCAL_FILE_HEADER="PK",a.CENTRAL_FILE_HEADER="PK",a.CENTRAL_DIRECTORY_END="PK",a.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",a.ZIP64_CENTRAL_DIRECTORY_END="PK",a.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,n,a){var i=t("./GenericWorker"),o=t("../utils");function l(c){i.call(this,"ConvertWorker to "+c),this.destType=c}o.inherits(l,i),l.prototype.processChunk=function(c){this.push({data:o.transformTo(this.destType,c.data),meta:c.meta})},n.exports=l},{"../utils":32,"./GenericWorker":28}],25:[function(t,n,a){var i=t("./GenericWorker"),o=t("../crc32");function l(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(l,i),l.prototype.processChunk=function(c){this.streamInfo.crc32=o(c.data,this.streamInfo.crc32||0),this.push(c)},n.exports=l},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,n,a){var i=t("../utils"),o=t("./GenericWorker");function l(c){o.call(this,"DataLengthProbe for "+c),this.propName=c,this.withStreamInfo(c,0)}i.inherits(l,o),l.prototype.processChunk=function(c){if(c){var f=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=f+c.data.length}o.prototype.processChunk.call(this,c)},n.exports=l},{"../utils":32,"./GenericWorker":28}],27:[function(t,n,a){var i=t("../utils"),o=t("./GenericWorker");function l(c){o.call(this,"DataWorker");var f=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,c.then(function(d){f.dataIsReady=!0,f.data=d,f.max=d&&d.length||0,f.type=i.getTypeOf(d),f.isPaused||f._tickAndRepeat()},function(d){f.error(d)})}i.inherits(l,o),l.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},l.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},l.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},l.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var c=null,f=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":c=this.data.substring(this.index,f);break;case"uint8array":c=this.data.subarray(this.index,f);break;case"array":case"nodebuffer":c=this.data.slice(this.index,f)}return this.index=f,this.push({data:c,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=l},{"../utils":32,"./GenericWorker":28}],28:[function(t,n,a){function i(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,l){return this._listeners[o].push(l),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,l){if(this._listeners[o])for(var c=0;c<this._listeners[o].length;c++)this._listeners[o][c].call(this,l)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var l=this;return o.on("data",function(c){l.processChunk(c)}),o.on("end",function(){l.end()}),o.on("error",function(c){l.error(c)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,l){return this.extraStreamInfo[o]=l,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},n.exports=i},{}],29:[function(t,n,a){var i=t("../utils"),o=t("./ConvertWorker"),l=t("./GenericWorker"),c=t("../base64"),f=t("../support"),d=t("../external"),h=null;if(f.nodestream)try{h=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function p(m,w){return new d.Promise(function(x,b){var E=[],_=m._internalType,C=m._outputType,B=m._mimeType;m.on("data",function(L,A){E.push(L),w&&w(A)}).on("error",function(L){E=[],b(L)}).on("end",function(){try{var L=(function(A,z,M){switch(A){case"blob":return i.newBlob(i.transformTo("arraybuffer",z),M);case"base64":return c.encode(z);default:return i.transformTo(A,z)}})(C,(function(A,z){var M,U=0,q=null,D=0;for(M=0;M<z.length;M++)D+=z[M].length;switch(A){case"string":return z.join("");case"array":return Array.prototype.concat.apply([],z);case"uint8array":for(q=new Uint8Array(D),M=0;M<z.length;M++)q.set(z[M],U),U+=z[M].length;return q;case"nodebuffer":return Buffer.concat(z);default:throw new Error("concat : unsupported type '"+A+"'")}})(_,E),B);x(L)}catch(A){b(A)}E=[]}).resume()})}function g(m,w,x){var b=w;switch(w){case"blob":case"arraybuffer":b="uint8array";break;case"base64":b="string"}try{this._internalType=b,this._outputType=w,this._mimeType=x,i.checkSupport(b),this._worker=m.pipe(new o(b)),m.lock()}catch(E){this._worker=new l("error"),this._worker.error(E)}}g.prototype={accumulate:function(m){return p(this,m)},on:function(m,w){var x=this;return m==="data"?this._worker.on(m,function(b){w.call(x,b.data,b.meta)}):this._worker.on(m,function(){i.delay(w,arguments,x)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(m){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},m)}},n.exports=g},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,n,a){if(a.base64=!0,a.array=!0,a.string=!0,a.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",a.nodebuffer=typeof Buffer<"u",a.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")a.blob=!1;else{var i=new ArrayBuffer(0);try{a.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(i),a.blob=o.getBlob("application/zip").size===0}catch{a.blob=!1}}}try{a.nodestream=!!t("readable-stream").Readable}catch{a.nodestream=!1}},{"readable-stream":16}],31:[function(t,n,a){for(var i=t("./utils"),o=t("./support"),l=t("./nodejsUtils"),c=t("./stream/GenericWorker"),f=new Array(256),d=0;d<256;d++)f[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;f[254]=f[254]=1;function h(){c.call(this,"utf-8 decode"),this.leftOver=null}function p(){c.call(this,"utf-8 encode")}a.utf8encode=function(g){return o.nodebuffer?l.newBufferFrom(g,"utf-8"):(function(m){var w,x,b,E,_,C=m.length,B=0;for(E=0;E<C;E++)(64512&(x=m.charCodeAt(E)))==55296&&E+1<C&&(64512&(b=m.charCodeAt(E+1)))==56320&&(x=65536+(x-55296<<10)+(b-56320),E++),B+=x<128?1:x<2048?2:x<65536?3:4;for(w=o.uint8array?new Uint8Array(B):new Array(B),E=_=0;_<B;E++)(64512&(x=m.charCodeAt(E)))==55296&&E+1<C&&(64512&(b=m.charCodeAt(E+1)))==56320&&(x=65536+(x-55296<<10)+(b-56320),E++),x<128?w[_++]=x:(x<2048?w[_++]=192|x>>>6:(x<65536?w[_++]=224|x>>>12:(w[_++]=240|x>>>18,w[_++]=128|x>>>12&63),w[_++]=128|x>>>6&63),w[_++]=128|63&x);return w})(g)},a.utf8decode=function(g){return o.nodebuffer?i.transformTo("nodebuffer",g).toString("utf-8"):(function(m){var w,x,b,E,_=m.length,C=new Array(2*_);for(w=x=0;w<_;)if((b=m[w++])<128)C[x++]=b;else if(4<(E=f[b]))C[x++]=65533,w+=E-1;else{for(b&=E===2?31:E===3?15:7;1<E&&w<_;)b=b<<6|63&m[w++],E--;1<E?C[x++]=65533:b<65536?C[x++]=b:(b-=65536,C[x++]=55296|b>>10&1023,C[x++]=56320|1023&b)}return C.length!==x&&(C.subarray?C=C.subarray(0,x):C.length=x),i.applyFromCharCode(C)})(g=i.transformTo(o.uint8array?"uint8array":"array",g))},i.inherits(h,c),h.prototype.processChunk=function(g){var m=i.transformTo(o.uint8array?"uint8array":"array",g.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var w=m;(m=new Uint8Array(w.length+this.leftOver.length)).set(this.leftOver,0),m.set(w,this.leftOver.length)}else m=this.leftOver.concat(m);this.leftOver=null}var x=(function(E,_){var C;for((_=_||E.length)>E.length&&(_=E.length),C=_-1;0<=C&&(192&E[C])==128;)C--;return C<0||C===0?_:C+f[E[C]]>_?C:_})(m),b=m;x!==m.length&&(o.uint8array?(b=m.subarray(0,x),this.leftOver=m.subarray(x,m.length)):(b=m.slice(0,x),this.leftOver=m.slice(x,m.length))),this.push({data:a.utf8decode(b),meta:g.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:a.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},a.Utf8DecodeWorker=h,i.inherits(p,c),p.prototype.processChunk=function(g){this.push({data:a.utf8encode(g.data),meta:g.meta})},a.Utf8EncodeWorker=p},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,n,a){var i=t("./support"),o=t("./base64"),l=t("./nodejsUtils"),c=t("./external");function f(w){return w}function d(w,x){for(var b=0;b<w.length;++b)x[b]=255&w.charCodeAt(b);return x}t("setimmediate"),a.newBlob=function(w,x){a.checkSupport("blob");try{return new Blob([w],{type:x})}catch{try{var b=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return b.append(w),b.getBlob(x)}catch{throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(w,x,b){var E=[],_=0,C=w.length;if(C<=b)return String.fromCharCode.apply(null,w);for(;_<C;)x==="array"||x==="nodebuffer"?E.push(String.fromCharCode.apply(null,w.slice(_,Math.min(_+b,C)))):E.push(String.fromCharCode.apply(null,w.subarray(_,Math.min(_+b,C)))),_+=b;return E.join("")},stringifyByChar:function(w){for(var x="",b=0;b<w.length;b++)x+=String.fromCharCode(w[b]);return x},applyCanBeUsed:{uint8array:(function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,l.allocBuffer(1)).length===1}catch{return!1}})()}};function p(w){var x=65536,b=a.getTypeOf(w),E=!0;if(b==="uint8array"?E=h.applyCanBeUsed.uint8array:b==="nodebuffer"&&(E=h.applyCanBeUsed.nodebuffer),E)for(;1<x;)try{return h.stringifyByChunk(w,b,x)}catch{x=Math.floor(x/2)}return h.stringifyByChar(w)}function g(w,x){for(var b=0;b<w.length;b++)x[b]=w[b];return x}a.applyFromCharCode=p;var m={};m.string={string:f,array:function(w){return d(w,new Array(w.length))},arraybuffer:function(w){return m.string.uint8array(w).buffer},uint8array:function(w){return d(w,new Uint8Array(w.length))},nodebuffer:function(w){return d(w,l.allocBuffer(w.length))}},m.array={string:p,array:f,arraybuffer:function(w){return new Uint8Array(w).buffer},uint8array:function(w){return new Uint8Array(w)},nodebuffer:function(w){return l.newBufferFrom(w)}},m.arraybuffer={string:function(w){return p(new Uint8Array(w))},array:function(w){return g(new Uint8Array(w),new Array(w.byteLength))},arraybuffer:f,uint8array:function(w){return new Uint8Array(w)},nodebuffer:function(w){return l.newBufferFrom(new Uint8Array(w))}},m.uint8array={string:p,array:function(w){return g(w,new Array(w.length))},arraybuffer:function(w){return w.buffer},uint8array:f,nodebuffer:function(w){return l.newBufferFrom(w)}},m.nodebuffer={string:p,array:function(w){return g(w,new Array(w.length))},arraybuffer:function(w){return m.nodebuffer.uint8array(w).buffer},uint8array:function(w){return g(w,new Uint8Array(w.length))},nodebuffer:f},a.transformTo=function(w,x){if(x=x||"",!w)return x;a.checkSupport(w);var b=a.getTypeOf(x);return m[b][w](x)},a.resolve=function(w){for(var x=w.split("/"),b=[],E=0;E<x.length;E++){var _=x[E];_==="."||_===""&&E!==0&&E!==x.length-1||(_===".."?b.pop():b.push(_))}return b.join("/")},a.getTypeOf=function(w){return typeof w=="string"?"string":Object.prototype.toString.call(w)==="[object Array]"?"array":i.nodebuffer&&l.isBuffer(w)?"nodebuffer":i.uint8array&&w instanceof Uint8Array?"uint8array":i.arraybuffer&&w instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(w){if(!i[w.toLowerCase()])throw new Error(w+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(w){var x,b,E="";for(b=0;b<(w||"").length;b++)E+="\\x"+((x=w.charCodeAt(b))<16?"0":"")+x.toString(16).toUpperCase();return E},a.delay=function(w,x,b){setImmediate(function(){w.apply(b||null,x||[])})},a.inherits=function(w,x){function b(){}b.prototype=x.prototype,w.prototype=new b},a.extend=function(){var w,x,b={};for(w=0;w<arguments.length;w++)for(x in arguments[w])Object.prototype.hasOwnProperty.call(arguments[w],x)&&b[x]===void 0&&(b[x]=arguments[w][x]);return b},a.prepareContent=function(w,x,b,E,_){return c.Promise.resolve(x).then(function(C){return i.blob&&(C instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(C))!==-1)&&typeof FileReader<"u"?new c.Promise(function(B,L){var A=new FileReader;A.onload=function(z){B(z.target.result)},A.onerror=function(z){L(z.target.error)},A.readAsArrayBuffer(C)}):C}).then(function(C){var B=a.getTypeOf(C);return B?(B==="arraybuffer"?C=a.transformTo("uint8array",C):B==="string"&&(_?C=o.decode(C):b&&E!==!0&&(C=(function(L){return d(L,i.uint8array?new Uint8Array(L.length):new Array(L.length))})(C))),C):c.Promise.reject(new Error("Can't read the data of '"+w+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,n,a){var i=t("./reader/readerFor"),o=t("./utils"),l=t("./signature"),c=t("./zipEntry"),f=t("./support");function d(h){this.files=[],this.loadOptions=h}d.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var p=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(p)+", expected "+o.pretty(h)+")")}},isSignature:function(h,p){var g=this.reader.index;this.reader.setIndex(h);var m=this.reader.readString(4)===p;return this.reader.setIndex(g),m},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),p=f.uint8array?"uint8array":"array",g=o.transformTo(p,h);this.zipComment=this.loadOptions.decodeFileName(g)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h,p,g,m=this.zip64EndOfCentralSize-44;0<m;)h=this.reader.readInt(2),p=this.reader.readInt(4),g=this.reader.readData(p),this.zip64ExtensibleData[h]={id:h,length:p,value:g}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,p;for(h=0;h<this.files.length;h++)p=this.files[h],this.reader.setIndex(p.localHeaderOffset),this.checkSignature(l.LOCAL_FILE_HEADER),p.readLocalPart(this.reader),p.handleUTF8(),p.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(l.CENTRAL_FILE_HEADER);)(h=new c({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(l.CENTRAL_DIRECTORY_END);if(h<0)throw this.isSignature(0,l.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(h);var p=h;if(this.checkSignature(l.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(h=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,l.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var g=this.centralDirOffset+this.centralDirSize;this.zip64&&(g+=20,g+=12+this.zip64EndOfCentralSize);var m=p-g;if(0<m)this.isSignature(p,l.CENTRAL_FILE_HEADER)||(this.reader.zero=m);else if(m<0)throw new Error("Corrupted zip: missing "+Math.abs(m)+" bytes.")},prepareReader:function(h){this.reader=i(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=d},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,n,a){var i=t("./reader/readerFor"),o=t("./utils"),l=t("./compressedObject"),c=t("./crc32"),f=t("./utf8"),d=t("./compressions"),h=t("./support");function p(g,m){this.options=g,this.loadOptions=m}p.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(g){var m,w;if(g.skip(22),this.fileNameLength=g.readInt(2),w=g.readInt(2),this.fileName=g.readData(this.fileNameLength),g.skip(w),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((m=(function(x){for(var b in d)if(Object.prototype.hasOwnProperty.call(d,b)&&d[b].magic===x)return d[b];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new l(this.compressedSize,this.uncompressedSize,this.crc32,m,g.readData(this.compressedSize))},readCentralPart:function(g){this.versionMadeBy=g.readInt(2),g.skip(2),this.bitFlag=g.readInt(2),this.compressionMethod=g.readString(2),this.date=g.readDate(),this.crc32=g.readInt(4),this.compressedSize=g.readInt(4),this.uncompressedSize=g.readInt(4);var m=g.readInt(2);if(this.extraFieldsLength=g.readInt(2),this.fileCommentLength=g.readInt(2),this.diskNumberStart=g.readInt(2),this.internalFileAttributes=g.readInt(2),this.externalFileAttributes=g.readInt(4),this.localHeaderOffset=g.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");g.skip(m),this.readExtraFields(g),this.parseZIP64ExtraField(g),this.fileComment=g.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var g=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),g==0&&(this.dosPermissions=63&this.externalFileAttributes),g==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var g=i(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=g.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=g.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=g.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=g.readInt(4))}},readExtraFields:function(g){var m,w,x,b=g.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});g.index+4<b;)m=g.readInt(2),w=g.readInt(2),x=g.readData(w),this.extraFields[m]={id:m,length:w,value:x};g.setIndex(b)},handleUTF8:function(){var g=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=f.utf8decode(this.fileName),this.fileCommentStr=f.utf8decode(this.fileComment);else{var m=this.findExtraFieldUnicodePath();if(m!==null)this.fileNameStr=m;else{var w=o.transformTo(g,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(w)}var x=this.findExtraFieldUnicodeComment();if(x!==null)this.fileCommentStr=x;else{var b=o.transformTo(g,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(b)}}},findExtraFieldUnicodePath:function(){var g=this.extraFields[28789];if(g){var m=i(g.value);return m.readInt(1)!==1||c(this.fileName)!==m.readInt(4)?null:f.utf8decode(m.readData(g.length-5))}return null},findExtraFieldUnicodeComment:function(){var g=this.extraFields[25461];if(g){var m=i(g.value);return m.readInt(1)!==1||c(this.fileComment)!==m.readInt(4)?null:f.utf8decode(m.readData(g.length-5))}return null}},n.exports=p},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,n,a){function i(m,w,x){this.name=m,this.dir=x.dir,this.date=x.date,this.comment=x.comment,this.unixPermissions=x.unixPermissions,this.dosPermissions=x.dosPermissions,this._data=w,this._dataBinary=x.binary,this.options={compression:x.compression,compressionOptions:x.compressionOptions}}var o=t("./stream/StreamHelper"),l=t("./stream/DataWorker"),c=t("./utf8"),f=t("./compressedObject"),d=t("./stream/GenericWorker");i.prototype={internalStream:function(m){var w=null,x="string";try{if(!m)throw new Error("No output type specified.");var b=(x=m.toLowerCase())==="string"||x==="text";x!=="binarystring"&&x!=="text"||(x="string"),w=this._decompressWorker();var E=!this._dataBinary;E&&!b&&(w=w.pipe(new c.Utf8EncodeWorker)),!E&&b&&(w=w.pipe(new c.Utf8DecodeWorker))}catch(_){(w=new d("error")).error(_)}return new o(w,x,"")},async:function(m,w){return this.internalStream(m).accumulate(w)},nodeStream:function(m,w){return this.internalStream(m||"nodebuffer").toNodejsStream(w)},_compressWorker:function(m,w){if(this._data instanceof f&&this._data.compression.magic===m.magic)return this._data.getCompressedWorker();var x=this._decompressWorker();return this._dataBinary||(x=x.pipe(new c.Utf8EncodeWorker)),f.createWorkerFrom(x,m,w)},_decompressWorker:function(){return this._data instanceof f?this._data.getContentWorker():this._data instanceof d?this._data:new l(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],p=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},g=0;g<h.length;g++)i.prototype[h[g]]=p;n.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,n,a){(function(i){var o,l,c=i.MutationObserver||i.WebKitMutationObserver;if(c){var f=0,d=new c(m),h=i.document.createTextNode("");d.observe(h,{characterData:!0}),o=function(){h.data=f=++f%2}}else if(i.setImmediate||i.MessageChannel===void 0)o="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var w=i.document.createElement("script");w.onreadystatechange=function(){m(),w.onreadystatechange=null,w.parentNode.removeChild(w),w=null},i.document.documentElement.appendChild(w)}:function(){setTimeout(m,0)};else{var p=new i.MessageChannel;p.port1.onmessage=m,o=function(){p.port2.postMessage(0)}}var g=[];function m(){var w,x;l=!0;for(var b=g.length;b;){for(x=g,g=[],w=-1;++w<b;)x[w]();b=g.length}l=!1}n.exports=function(w){g.push(w)!==1||l||o()}}).call(this,typeof Fl<"u"?Fl:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,n,a){var i=t("immediate");function o(){}var l={},c=["REJECTED"],f=["FULFILLED"],d=["PENDING"];function h(b){if(typeof b!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,b!==o&&w(this,b)}function p(b,E,_){this.promise=b,typeof E=="function"&&(this.onFulfilled=E,this.callFulfilled=this.otherCallFulfilled),typeof _=="function"&&(this.onRejected=_,this.callRejected=this.otherCallRejected)}function g(b,E,_){i(function(){var C;try{C=E(_)}catch(B){return l.reject(b,B)}C===b?l.reject(b,new TypeError("Cannot resolve promise with itself")):l.resolve(b,C)})}function m(b){var E=b&&b.then;if(b&&(typeof b=="object"||typeof b=="function")&&typeof E=="function")return function(){E.apply(b,arguments)}}function w(b,E){var _=!1;function C(A){_||(_=!0,l.reject(b,A))}function B(A){_||(_=!0,l.resolve(b,A))}var L=x(function(){E(B,C)});L.status==="error"&&C(L.value)}function x(b,E){var _={};try{_.value=b(E),_.status="success"}catch(C){_.status="error",_.value=C}return _}(n.exports=h).prototype.finally=function(b){if(typeof b!="function")return this;var E=this.constructor;return this.then(function(_){return E.resolve(b()).then(function(){return _})},function(_){return E.resolve(b()).then(function(){throw _})})},h.prototype.catch=function(b){return this.then(null,b)},h.prototype.then=function(b,E){if(typeof b!="function"&&this.state===f||typeof E!="function"&&this.state===c)return this;var _=new this.constructor(o);return this.state!==d?g(_,this.state===f?b:E,this.outcome):this.queue.push(new p(_,b,E)),_},p.prototype.callFulfilled=function(b){l.resolve(this.promise,b)},p.prototype.otherCallFulfilled=function(b){g(this.promise,this.onFulfilled,b)},p.prototype.callRejected=function(b){l.reject(this.promise,b)},p.prototype.otherCallRejected=function(b){g(this.promise,this.onRejected,b)},l.resolve=function(b,E){var _=x(m,E);if(_.status==="error")return l.reject(b,_.value);var C=_.value;if(C)w(b,C);else{b.state=f,b.outcome=E;for(var B=-1,L=b.queue.length;++B<L;)b.queue[B].callFulfilled(E)}return b},l.reject=function(b,E){b.state=c,b.outcome=E;for(var _=-1,C=b.queue.length;++_<C;)b.queue[_].callRejected(E);return b},h.resolve=function(b){return b instanceof this?b:l.resolve(new this(o),b)},h.reject=function(b){var E=new this(o);return l.reject(E,b)},h.all=function(b){var E=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _=b.length,C=!1;if(!_)return this.resolve([]);for(var B=new Array(_),L=0,A=-1,z=new this(o);++A<_;)M(b[A],A);return z;function M(U,q){E.resolve(U).then(function(D){B[q]=D,++L!==_||C||(C=!0,l.resolve(z,B))},function(D){C||(C=!0,l.reject(z,D))})}},h.race=function(b){var E=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _=b.length,C=!1;if(!_)return this.resolve([]);for(var B=-1,L=new this(o);++B<_;)A=b[B],E.resolve(A).then(function(z){C||(C=!0,l.resolve(L,z))},function(z){C||(C=!0,l.reject(L,z))});var A;return L}},{immediate:36}],38:[function(t,n,a){var i={};(0,t("./lib/utils/common").assign)(i,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),n.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,n,a){var i=t("./zlib/deflate"),o=t("./utils/common"),l=t("./utils/strings"),c=t("./zlib/messages"),f=t("./zlib/zstream"),d=Object.prototype.toString,h=0,p=-1,g=0,m=8;function w(b){if(!(this instanceof w))return new w(b);this.options=o.assign({level:p,method:m,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},b||{});var E=this.options;E.raw&&0<E.windowBits?E.windowBits=-E.windowBits:E.gzip&&0<E.windowBits&&E.windowBits<16&&(E.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var _=i.deflateInit2(this.strm,E.level,E.method,E.windowBits,E.memLevel,E.strategy);if(_!==h)throw new Error(c[_]);if(E.header&&i.deflateSetHeader(this.strm,E.header),E.dictionary){var C;if(C=typeof E.dictionary=="string"?l.string2buf(E.dictionary):d.call(E.dictionary)==="[object ArrayBuffer]"?new Uint8Array(E.dictionary):E.dictionary,(_=i.deflateSetDictionary(this.strm,C))!==h)throw new Error(c[_]);this._dict_set=!0}}function x(b,E){var _=new w(E);if(_.push(b,!0),_.err)throw _.msg||c[_.err];return _.result}w.prototype.push=function(b,E){var _,C,B=this.strm,L=this.options.chunkSize;if(this.ended)return!1;C=E===~~E?E:E===!0?4:0,typeof b=="string"?B.input=l.string2buf(b):d.call(b)==="[object ArrayBuffer]"?B.input=new Uint8Array(b):B.input=b,B.next_in=0,B.avail_in=B.input.length;do{if(B.avail_out===0&&(B.output=new o.Buf8(L),B.next_out=0,B.avail_out=L),(_=i.deflate(B,C))!==1&&_!==h)return this.onEnd(_),!(this.ended=!0);B.avail_out!==0&&(B.avail_in!==0||C!==4&&C!==2)||(this.options.to==="string"?this.onData(l.buf2binstring(o.shrinkBuf(B.output,B.next_out))):this.onData(o.shrinkBuf(B.output,B.next_out)))}while((0<B.avail_in||B.avail_out===0)&&_!==1);return C===4?(_=i.deflateEnd(this.strm),this.onEnd(_),this.ended=!0,_===h):C!==2||(this.onEnd(h),!(B.avail_out=0))},w.prototype.onData=function(b){this.chunks.push(b)},w.prototype.onEnd=function(b){b===h&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg},a.Deflate=w,a.deflate=x,a.deflateRaw=function(b,E){return(E=E||{}).raw=!0,x(b,E)},a.gzip=function(b,E){return(E=E||{}).gzip=!0,x(b,E)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,n,a){var i=t("./zlib/inflate"),o=t("./utils/common"),l=t("./utils/strings"),c=t("./zlib/constants"),f=t("./zlib/messages"),d=t("./zlib/zstream"),h=t("./zlib/gzheader"),p=Object.prototype.toString;function g(w){if(!(this instanceof g))return new g(w);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},w||{});var x=this.options;x.raw&&0<=x.windowBits&&x.windowBits<16&&(x.windowBits=-x.windowBits,x.windowBits===0&&(x.windowBits=-15)),!(0<=x.windowBits&&x.windowBits<16)||w&&w.windowBits||(x.windowBits+=32),15<x.windowBits&&x.windowBits<48&&(15&x.windowBits)==0&&(x.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var b=i.inflateInit2(this.strm,x.windowBits);if(b!==c.Z_OK)throw new Error(f[b]);this.header=new h,i.inflateGetHeader(this.strm,this.header)}function m(w,x){var b=new g(x);if(b.push(w,!0),b.err)throw b.msg||f[b.err];return b.result}g.prototype.push=function(w,x){var b,E,_,C,B,L,A=this.strm,z=this.options.chunkSize,M=this.options.dictionary,U=!1;if(this.ended)return!1;E=x===~~x?x:x===!0?c.Z_FINISH:c.Z_NO_FLUSH,typeof w=="string"?A.input=l.binstring2buf(w):p.call(w)==="[object ArrayBuffer]"?A.input=new Uint8Array(w):A.input=w,A.next_in=0,A.avail_in=A.input.length;do{if(A.avail_out===0&&(A.output=new o.Buf8(z),A.next_out=0,A.avail_out=z),(b=i.inflate(A,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&M&&(L=typeof M=="string"?l.string2buf(M):p.call(M)==="[object ArrayBuffer]"?new Uint8Array(M):M,b=i.inflateSetDictionary(this.strm,L)),b===c.Z_BUF_ERROR&&U===!0&&(b=c.Z_OK,U=!1),b!==c.Z_STREAM_END&&b!==c.Z_OK)return this.onEnd(b),!(this.ended=!0);A.next_out&&(A.avail_out!==0&&b!==c.Z_STREAM_END&&(A.avail_in!==0||E!==c.Z_FINISH&&E!==c.Z_SYNC_FLUSH)||(this.options.to==="string"?(_=l.utf8border(A.output,A.next_out),C=A.next_out-_,B=l.buf2string(A.output,_),A.next_out=C,A.avail_out=z-C,C&&o.arraySet(A.output,A.output,_,C,0),this.onData(B)):this.onData(o.shrinkBuf(A.output,A.next_out)))),A.avail_in===0&&A.avail_out===0&&(U=!0)}while((0<A.avail_in||A.avail_out===0)&&b!==c.Z_STREAM_END);return b===c.Z_STREAM_END&&(E=c.Z_FINISH),E===c.Z_FINISH?(b=i.inflateEnd(this.strm),this.onEnd(b),this.ended=!0,b===c.Z_OK):E!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),!(A.avail_out=0))},g.prototype.onData=function(w){this.chunks.push(w)},g.prototype.onEnd=function(w){w===c.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=w,this.msg=this.strm.msg},a.Inflate=g,a.inflate=m,a.inflateRaw=function(w,x){return(x=x||{}).raw=!0,m(w,x)},a.ungzip=m},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,n,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";a.assign=function(c){for(var f=Array.prototype.slice.call(arguments,1);f.length;){var d=f.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var h in d)d.hasOwnProperty(h)&&(c[h]=d[h])}}return c},a.shrinkBuf=function(c,f){return c.length===f?c:c.subarray?c.subarray(0,f):(c.length=f,c)};var o={arraySet:function(c,f,d,h,p){if(f.subarray&&c.subarray)c.set(f.subarray(d,d+h),p);else for(var g=0;g<h;g++)c[p+g]=f[d+g]},flattenChunks:function(c){var f,d,h,p,g,m;for(f=h=0,d=c.length;f<d;f++)h+=c[f].length;for(m=new Uint8Array(h),f=p=0,d=c.length;f<d;f++)g=c[f],m.set(g,p),p+=g.length;return m}},l={arraySet:function(c,f,d,h,p){for(var g=0;g<h;g++)c[p+g]=f[d+g]},flattenChunks:function(c){return[].concat.apply([],c)}};a.setTyped=function(c){c?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,o)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,l))},a.setTyped(i)},{}],42:[function(t,n,a){var i=t("./common"),o=!0,l=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{l=!1}for(var c=new i.Buf8(256),f=0;f<256;f++)c[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;function d(h,p){if(p<65537&&(h.subarray&&l||!h.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(h,p));for(var g="",m=0;m<p;m++)g+=String.fromCharCode(h[m]);return g}c[254]=c[254]=1,a.string2buf=function(h){var p,g,m,w,x,b=h.length,E=0;for(w=0;w<b;w++)(64512&(g=h.charCodeAt(w)))==55296&&w+1<b&&(64512&(m=h.charCodeAt(w+1)))==56320&&(g=65536+(g-55296<<10)+(m-56320),w++),E+=g<128?1:g<2048?2:g<65536?3:4;for(p=new i.Buf8(E),w=x=0;x<E;w++)(64512&(g=h.charCodeAt(w)))==55296&&w+1<b&&(64512&(m=h.charCodeAt(w+1)))==56320&&(g=65536+(g-55296<<10)+(m-56320),w++),g<128?p[x++]=g:(g<2048?p[x++]=192|g>>>6:(g<65536?p[x++]=224|g>>>12:(p[x++]=240|g>>>18,p[x++]=128|g>>>12&63),p[x++]=128|g>>>6&63),p[x++]=128|63&g);return p},a.buf2binstring=function(h){return d(h,h.length)},a.binstring2buf=function(h){for(var p=new i.Buf8(h.length),g=0,m=p.length;g<m;g++)p[g]=h.charCodeAt(g);return p},a.buf2string=function(h,p){var g,m,w,x,b=p||h.length,E=new Array(2*b);for(g=m=0;g<b;)if((w=h[g++])<128)E[m++]=w;else if(4<(x=c[w]))E[m++]=65533,g+=x-1;else{for(w&=x===2?31:x===3?15:7;1<x&&g<b;)w=w<<6|63&h[g++],x--;1<x?E[m++]=65533:w<65536?E[m++]=w:(w-=65536,E[m++]=55296|w>>10&1023,E[m++]=56320|1023&w)}return d(E,m)},a.utf8border=function(h,p){var g;for((p=p||h.length)>h.length&&(p=h.length),g=p-1;0<=g&&(192&h[g])==128;)g--;return g<0||g===0?p:g+c[h[g]]>p?g:p}},{"./common":41}],43:[function(t,n,a){n.exports=function(i,o,l,c){for(var f=65535&i|0,d=i>>>16&65535|0,h=0;l!==0;){for(l-=h=2e3<l?2e3:l;d=d+(f=f+o[c++]|0)|0,--h;);f%=65521,d%=65521}return f|d<<16|0}},{}],44:[function(t,n,a){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,n,a){var i=(function(){for(var o,l=[],c=0;c<256;c++){o=c;for(var f=0;f<8;f++)o=1&o?3988292384^o>>>1:o>>>1;l[c]=o}return l})();n.exports=function(o,l,c,f){var d=i,h=f+c;o^=-1;for(var p=f;p<h;p++)o=o>>>8^d[255&(o^l[p])];return-1^o}},{}],46:[function(t,n,a){var i,o=t("../utils/common"),l=t("./trees"),c=t("./adler32"),f=t("./crc32"),d=t("./messages"),h=0,p=4,g=0,m=-2,w=-1,x=4,b=2,E=8,_=9,C=286,B=30,L=19,A=2*C+1,z=15,M=3,U=258,q=U+M+1,D=42,F=113,T=1,G=2,Q=3,W=4;function X(I,pe){return I.msg=d[pe],pe}function Z(I){return(I<<1)-(4<I?9:0)}function te(I){for(var pe=I.length;0<=--pe;)I[pe]=0}function N(I){var pe=I.state,ge=pe.pending;ge>I.avail_out&&(ge=I.avail_out),ge!==0&&(o.arraySet(I.output,pe.pending_buf,pe.pending_out,ge,I.next_out),I.next_out+=ge,pe.pending_out+=ge,I.total_out+=ge,I.avail_out-=ge,pe.pending-=ge,pe.pending===0&&(pe.pending_out=0))}function $(I,pe){l._tr_flush_block(I,0<=I.block_start?I.block_start:-1,I.strstart-I.block_start,pe),I.block_start=I.strstart,N(I.strm)}function oe(I,pe){I.pending_buf[I.pending++]=pe}function ie(I,pe){I.pending_buf[I.pending++]=pe>>>8&255,I.pending_buf[I.pending++]=255&pe}function ne(I,pe){var ge,Y,K=I.max_chain_length,ae=I.strstart,ve=I.prev_length,ye=I.nice_match,se=I.strstart>I.w_size-q?I.strstart-(I.w_size-q):0,Be=I.window,Ie=I.w_mask,Ae=I.prev,ze=I.strstart+U,j=Be[ae+ve-1],k=Be[ae+ve];I.prev_length>=I.good_match&&(K>>=2),ye>I.lookahead&&(ye=I.lookahead);do if(Be[(ge=pe)+ve]===k&&Be[ge+ve-1]===j&&Be[ge]===Be[ae]&&Be[++ge]===Be[ae+1]){ae+=2,ge++;do;while(Be[++ae]===Be[++ge]&&Be[++ae]===Be[++ge]&&Be[++ae]===Be[++ge]&&Be[++ae]===Be[++ge]&&Be[++ae]===Be[++ge]&&Be[++ae]===Be[++ge]&&Be[++ae]===Be[++ge]&&Be[++ae]===Be[++ge]&&ae<ze);if(Y=U-(ze-ae),ae=ze-U,ve<Y){if(I.match_start=pe,ye<=(ve=Y))break;j=Be[ae+ve-1],k=Be[ae+ve]}}while((pe=Ae[pe&Ie])>se&&--K!=0);return ve<=I.lookahead?ve:I.lookahead}function xe(I){var pe,ge,Y,K,ae,ve,ye,se,Be,Ie,Ae=I.w_size;do{if(K=I.window_size-I.lookahead-I.strstart,I.strstart>=Ae+(Ae-q)){for(o.arraySet(I.window,I.window,Ae,Ae,0),I.match_start-=Ae,I.strstart-=Ae,I.block_start-=Ae,pe=ge=I.hash_size;Y=I.head[--pe],I.head[pe]=Ae<=Y?Y-Ae:0,--ge;);for(pe=ge=Ae;Y=I.prev[--pe],I.prev[pe]=Ae<=Y?Y-Ae:0,--ge;);K+=Ae}if(I.strm.avail_in===0)break;if(ve=I.strm,ye=I.window,se=I.strstart+I.lookahead,Be=K,Ie=void 0,Ie=ve.avail_in,Be<Ie&&(Ie=Be),ge=Ie===0?0:(ve.avail_in-=Ie,o.arraySet(ye,ve.input,ve.next_in,Ie,se),ve.state.wrap===1?ve.adler=c(ve.adler,ye,Ie,se):ve.state.wrap===2&&(ve.adler=f(ve.adler,ye,Ie,se)),ve.next_in+=Ie,ve.total_in+=Ie,Ie),I.lookahead+=ge,I.lookahead+I.insert>=M)for(ae=I.strstart-I.insert,I.ins_h=I.window[ae],I.ins_h=(I.ins_h<<I.hash_shift^I.window[ae+1])&I.hash_mask;I.insert&&(I.ins_h=(I.ins_h<<I.hash_shift^I.window[ae+M-1])&I.hash_mask,I.prev[ae&I.w_mask]=I.head[I.ins_h],I.head[I.ins_h]=ae,ae++,I.insert--,!(I.lookahead+I.insert<M)););}while(I.lookahead<q&&I.strm.avail_in!==0)}function Pe(I,pe){for(var ge,Y;;){if(I.lookahead<q){if(xe(I),I.lookahead<q&&pe===h)return T;if(I.lookahead===0)break}if(ge=0,I.lookahead>=M&&(I.ins_h=(I.ins_h<<I.hash_shift^I.window[I.strstart+M-1])&I.hash_mask,ge=I.prev[I.strstart&I.w_mask]=I.head[I.ins_h],I.head[I.ins_h]=I.strstart),ge!==0&&I.strstart-ge<=I.w_size-q&&(I.match_length=ne(I,ge)),I.match_length>=M)if(Y=l._tr_tally(I,I.strstart-I.match_start,I.match_length-M),I.lookahead-=I.match_length,I.match_length<=I.max_lazy_match&&I.lookahead>=M){for(I.match_length--;I.strstart++,I.ins_h=(I.ins_h<<I.hash_shift^I.window[I.strstart+M-1])&I.hash_mask,ge=I.prev[I.strstart&I.w_mask]=I.head[I.ins_h],I.head[I.ins_h]=I.strstart,--I.match_length!=0;);I.strstart++}else I.strstart+=I.match_length,I.match_length=0,I.ins_h=I.window[I.strstart],I.ins_h=(I.ins_h<<I.hash_shift^I.window[I.strstart+1])&I.hash_mask;else Y=l._tr_tally(I,0,I.window[I.strstart]),I.lookahead--,I.strstart++;if(Y&&($(I,!1),I.strm.avail_out===0))return T}return I.insert=I.strstart<M-1?I.strstart:M-1,pe===p?($(I,!0),I.strm.avail_out===0?Q:W):I.last_lit&&($(I,!1),I.strm.avail_out===0)?T:G}function Ce(I,pe){for(var ge,Y,K;;){if(I.lookahead<q){if(xe(I),I.lookahead<q&&pe===h)return T;if(I.lookahead===0)break}if(ge=0,I.lookahead>=M&&(I.ins_h=(I.ins_h<<I.hash_shift^I.window[I.strstart+M-1])&I.hash_mask,ge=I.prev[I.strstart&I.w_mask]=I.head[I.ins_h],I.head[I.ins_h]=I.strstart),I.prev_length=I.match_length,I.prev_match=I.match_start,I.match_length=M-1,ge!==0&&I.prev_length<I.max_lazy_match&&I.strstart-ge<=I.w_size-q&&(I.match_length=ne(I,ge),I.match_length<=5&&(I.strategy===1||I.match_length===M&&4096<I.strstart-I.match_start)&&(I.match_length=M-1)),I.prev_length>=M&&I.match_length<=I.prev_length){for(K=I.strstart+I.lookahead-M,Y=l._tr_tally(I,I.strstart-1-I.prev_match,I.prev_length-M),I.lookahead-=I.prev_length-1,I.prev_length-=2;++I.strstart<=K&&(I.ins_h=(I.ins_h<<I.hash_shift^I.window[I.strstart+M-1])&I.hash_mask,ge=I.prev[I.strstart&I.w_mask]=I.head[I.ins_h],I.head[I.ins_h]=I.strstart),--I.prev_length!=0;);if(I.match_available=0,I.match_length=M-1,I.strstart++,Y&&($(I,!1),I.strm.avail_out===0))return T}else if(I.match_available){if((Y=l._tr_tally(I,0,I.window[I.strstart-1]))&&$(I,!1),I.strstart++,I.lookahead--,I.strm.avail_out===0)return T}else I.match_available=1,I.strstart++,I.lookahead--}return I.match_available&&(Y=l._tr_tally(I,0,I.window[I.strstart-1]),I.match_available=0),I.insert=I.strstart<M-1?I.strstart:M-1,pe===p?($(I,!0),I.strm.avail_out===0?Q:W):I.last_lit&&($(I,!1),I.strm.avail_out===0)?T:G}function me(I,pe,ge,Y,K){this.good_length=I,this.max_lazy=pe,this.nice_length=ge,this.max_chain=Y,this.func=K}function fe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=E,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*A),this.dyn_dtree=new o.Buf16(2*(2*B+1)),this.bl_tree=new o.Buf16(2*(2*L+1)),te(this.dyn_ltree),te(this.dyn_dtree),te(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(z+1),this.heap=new o.Buf16(2*C+1),te(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*C+1),te(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function he(I){var pe;return I&&I.state?(I.total_in=I.total_out=0,I.data_type=b,(pe=I.state).pending=0,pe.pending_out=0,pe.wrap<0&&(pe.wrap=-pe.wrap),pe.status=pe.wrap?D:F,I.adler=pe.wrap===2?0:1,pe.last_flush=h,l._tr_init(pe),g):X(I,m)}function Ee(I){var pe=he(I);return pe===g&&(function(ge){ge.window_size=2*ge.w_size,te(ge.head),ge.max_lazy_match=i[ge.level].max_lazy,ge.good_match=i[ge.level].good_length,ge.nice_match=i[ge.level].nice_length,ge.max_chain_length=i[ge.level].max_chain,ge.strstart=0,ge.block_start=0,ge.lookahead=0,ge.insert=0,ge.match_length=ge.prev_length=M-1,ge.match_available=0,ge.ins_h=0})(I.state),pe}function Re(I,pe,ge,Y,K,ae){if(!I)return m;var ve=1;if(pe===w&&(pe=6),Y<0?(ve=0,Y=-Y):15<Y&&(ve=2,Y-=16),K<1||_<K||ge!==E||Y<8||15<Y||pe<0||9<pe||ae<0||x<ae)return X(I,m);Y===8&&(Y=9);var ye=new fe;return(I.state=ye).strm=I,ye.wrap=ve,ye.gzhead=null,ye.w_bits=Y,ye.w_size=1<<ye.w_bits,ye.w_mask=ye.w_size-1,ye.hash_bits=K+7,ye.hash_size=1<<ye.hash_bits,ye.hash_mask=ye.hash_size-1,ye.hash_shift=~~((ye.hash_bits+M-1)/M),ye.window=new o.Buf8(2*ye.w_size),ye.head=new o.Buf16(ye.hash_size),ye.prev=new o.Buf16(ye.w_size),ye.lit_bufsize=1<<K+6,ye.pending_buf_size=4*ye.lit_bufsize,ye.pending_buf=new o.Buf8(ye.pending_buf_size),ye.d_buf=1*ye.lit_bufsize,ye.l_buf=3*ye.lit_bufsize,ye.level=pe,ye.strategy=ae,ye.method=ge,Ee(I)}i=[new me(0,0,0,0,function(I,pe){var ge=65535;for(ge>I.pending_buf_size-5&&(ge=I.pending_buf_size-5);;){if(I.lookahead<=1){if(xe(I),I.lookahead===0&&pe===h)return T;if(I.lookahead===0)break}I.strstart+=I.lookahead,I.lookahead=0;var Y=I.block_start+ge;if((I.strstart===0||I.strstart>=Y)&&(I.lookahead=I.strstart-Y,I.strstart=Y,$(I,!1),I.strm.avail_out===0)||I.strstart-I.block_start>=I.w_size-q&&($(I,!1),I.strm.avail_out===0))return T}return I.insert=0,pe===p?($(I,!0),I.strm.avail_out===0?Q:W):(I.strstart>I.block_start&&($(I,!1),I.strm.avail_out),T)}),new me(4,4,8,4,Pe),new me(4,5,16,8,Pe),new me(4,6,32,32,Pe),new me(4,4,16,16,Ce),new me(8,16,32,32,Ce),new me(8,16,128,128,Ce),new me(8,32,128,256,Ce),new me(32,128,258,1024,Ce),new me(32,258,258,4096,Ce)],a.deflateInit=function(I,pe){return Re(I,pe,E,15,8,0)},a.deflateInit2=Re,a.deflateReset=Ee,a.deflateResetKeep=he,a.deflateSetHeader=function(I,pe){return I&&I.state?I.state.wrap!==2?m:(I.state.gzhead=pe,g):m},a.deflate=function(I,pe){var ge,Y,K,ae;if(!I||!I.state||5<pe||pe<0)return I?X(I,m):m;if(Y=I.state,!I.output||!I.input&&I.avail_in!==0||Y.status===666&&pe!==p)return X(I,I.avail_out===0?-5:m);if(Y.strm=I,ge=Y.last_flush,Y.last_flush=pe,Y.status===D)if(Y.wrap===2)I.adler=0,oe(Y,31),oe(Y,139),oe(Y,8),Y.gzhead?(oe(Y,(Y.gzhead.text?1:0)+(Y.gzhead.hcrc?2:0)+(Y.gzhead.extra?4:0)+(Y.gzhead.name?8:0)+(Y.gzhead.comment?16:0)),oe(Y,255&Y.gzhead.time),oe(Y,Y.gzhead.time>>8&255),oe(Y,Y.gzhead.time>>16&255),oe(Y,Y.gzhead.time>>24&255),oe(Y,Y.level===9?2:2<=Y.strategy||Y.level<2?4:0),oe(Y,255&Y.gzhead.os),Y.gzhead.extra&&Y.gzhead.extra.length&&(oe(Y,255&Y.gzhead.extra.length),oe(Y,Y.gzhead.extra.length>>8&255)),Y.gzhead.hcrc&&(I.adler=f(I.adler,Y.pending_buf,Y.pending,0)),Y.gzindex=0,Y.status=69):(oe(Y,0),oe(Y,0),oe(Y,0),oe(Y,0),oe(Y,0),oe(Y,Y.level===9?2:2<=Y.strategy||Y.level<2?4:0),oe(Y,3),Y.status=F);else{var ve=E+(Y.w_bits-8<<4)<<8;ve|=(2<=Y.strategy||Y.level<2?0:Y.level<6?1:Y.level===6?2:3)<<6,Y.strstart!==0&&(ve|=32),ve+=31-ve%31,Y.status=F,ie(Y,ve),Y.strstart!==0&&(ie(Y,I.adler>>>16),ie(Y,65535&I.adler)),I.adler=1}if(Y.status===69)if(Y.gzhead.extra){for(K=Y.pending;Y.gzindex<(65535&Y.gzhead.extra.length)&&(Y.pending!==Y.pending_buf_size||(Y.gzhead.hcrc&&Y.pending>K&&(I.adler=f(I.adler,Y.pending_buf,Y.pending-K,K)),N(I),K=Y.pending,Y.pending!==Y.pending_buf_size));)oe(Y,255&Y.gzhead.extra[Y.gzindex]),Y.gzindex++;Y.gzhead.hcrc&&Y.pending>K&&(I.adler=f(I.adler,Y.pending_buf,Y.pending-K,K)),Y.gzindex===Y.gzhead.extra.length&&(Y.gzindex=0,Y.status=73)}else Y.status=73;if(Y.status===73)if(Y.gzhead.name){K=Y.pending;do{if(Y.pending===Y.pending_buf_size&&(Y.gzhead.hcrc&&Y.pending>K&&(I.adler=f(I.adler,Y.pending_buf,Y.pending-K,K)),N(I),K=Y.pending,Y.pending===Y.pending_buf_size)){ae=1;break}ae=Y.gzindex<Y.gzhead.name.length?255&Y.gzhead.name.charCodeAt(Y.gzindex++):0,oe(Y,ae)}while(ae!==0);Y.gzhead.hcrc&&Y.pending>K&&(I.adler=f(I.adler,Y.pending_buf,Y.pending-K,K)),ae===0&&(Y.gzindex=0,Y.status=91)}else Y.status=91;if(Y.status===91)if(Y.gzhead.comment){K=Y.pending;do{if(Y.pending===Y.pending_buf_size&&(Y.gzhead.hcrc&&Y.pending>K&&(I.adler=f(I.adler,Y.pending_buf,Y.pending-K,K)),N(I),K=Y.pending,Y.pending===Y.pending_buf_size)){ae=1;break}ae=Y.gzindex<Y.gzhead.comment.length?255&Y.gzhead.comment.charCodeAt(Y.gzindex++):0,oe(Y,ae)}while(ae!==0);Y.gzhead.hcrc&&Y.pending>K&&(I.adler=f(I.adler,Y.pending_buf,Y.pending-K,K)),ae===0&&(Y.status=103)}else Y.status=103;if(Y.status===103&&(Y.gzhead.hcrc?(Y.pending+2>Y.pending_buf_size&&N(I),Y.pending+2<=Y.pending_buf_size&&(oe(Y,255&I.adler),oe(Y,I.adler>>8&255),I.adler=0,Y.status=F)):Y.status=F),Y.pending!==0){if(N(I),I.avail_out===0)return Y.last_flush=-1,g}else if(I.avail_in===0&&Z(pe)<=Z(ge)&&pe!==p)return X(I,-5);if(Y.status===666&&I.avail_in!==0)return X(I,-5);if(I.avail_in!==0||Y.lookahead!==0||pe!==h&&Y.status!==666){var ye=Y.strategy===2?(function(se,Be){for(var Ie;;){if(se.lookahead===0&&(xe(se),se.lookahead===0)){if(Be===h)return T;break}if(se.match_length=0,Ie=l._tr_tally(se,0,se.window[se.strstart]),se.lookahead--,se.strstart++,Ie&&($(se,!1),se.strm.avail_out===0))return T}return se.insert=0,Be===p?($(se,!0),se.strm.avail_out===0?Q:W):se.last_lit&&($(se,!1),se.strm.avail_out===0)?T:G})(Y,pe):Y.strategy===3?(function(se,Be){for(var Ie,Ae,ze,j,k=se.window;;){if(se.lookahead<=U){if(xe(se),se.lookahead<=U&&Be===h)return T;if(se.lookahead===0)break}if(se.match_length=0,se.lookahead>=M&&0<se.strstart&&(Ae=k[ze=se.strstart-1])===k[++ze]&&Ae===k[++ze]&&Ae===k[++ze]){j=se.strstart+U;do;while(Ae===k[++ze]&&Ae===k[++ze]&&Ae===k[++ze]&&Ae===k[++ze]&&Ae===k[++ze]&&Ae===k[++ze]&&Ae===k[++ze]&&Ae===k[++ze]&&ze<j);se.match_length=U-(j-ze),se.match_length>se.lookahead&&(se.match_length=se.lookahead)}if(se.match_length>=M?(Ie=l._tr_tally(se,1,se.match_length-M),se.lookahead-=se.match_length,se.strstart+=se.match_length,se.match_length=0):(Ie=l._tr_tally(se,0,se.window[se.strstart]),se.lookahead--,se.strstart++),Ie&&($(se,!1),se.strm.avail_out===0))return T}return se.insert=0,Be===p?($(se,!0),se.strm.avail_out===0?Q:W):se.last_lit&&($(se,!1),se.strm.avail_out===0)?T:G})(Y,pe):i[Y.level].func(Y,pe);if(ye!==Q&&ye!==W||(Y.status=666),ye===T||ye===Q)return I.avail_out===0&&(Y.last_flush=-1),g;if(ye===G&&(pe===1?l._tr_align(Y):pe!==5&&(l._tr_stored_block(Y,0,0,!1),pe===3&&(te(Y.head),Y.lookahead===0&&(Y.strstart=0,Y.block_start=0,Y.insert=0))),N(I),I.avail_out===0))return Y.last_flush=-1,g}return pe!==p?g:Y.wrap<=0?1:(Y.wrap===2?(oe(Y,255&I.adler),oe(Y,I.adler>>8&255),oe(Y,I.adler>>16&255),oe(Y,I.adler>>24&255),oe(Y,255&I.total_in),oe(Y,I.total_in>>8&255),oe(Y,I.total_in>>16&255),oe(Y,I.total_in>>24&255)):(ie(Y,I.adler>>>16),ie(Y,65535&I.adler)),N(I),0<Y.wrap&&(Y.wrap=-Y.wrap),Y.pending!==0?g:1)},a.deflateEnd=function(I){var pe;return I&&I.state?(pe=I.state.status)!==D&&pe!==69&&pe!==73&&pe!==91&&pe!==103&&pe!==F&&pe!==666?X(I,m):(I.state=null,pe===F?X(I,-3):g):m},a.deflateSetDictionary=function(I,pe){var ge,Y,K,ae,ve,ye,se,Be,Ie=pe.length;if(!I||!I.state||(ae=(ge=I.state).wrap)===2||ae===1&&ge.status!==D||ge.lookahead)return m;for(ae===1&&(I.adler=c(I.adler,pe,Ie,0)),ge.wrap=0,Ie>=ge.w_size&&(ae===0&&(te(ge.head),ge.strstart=0,ge.block_start=0,ge.insert=0),Be=new o.Buf8(ge.w_size),o.arraySet(Be,pe,Ie-ge.w_size,ge.w_size,0),pe=Be,Ie=ge.w_size),ve=I.avail_in,ye=I.next_in,se=I.input,I.avail_in=Ie,I.next_in=0,I.input=pe,xe(ge);ge.lookahead>=M;){for(Y=ge.strstart,K=ge.lookahead-(M-1);ge.ins_h=(ge.ins_h<<ge.hash_shift^ge.window[Y+M-1])&ge.hash_mask,ge.prev[Y&ge.w_mask]=ge.head[ge.ins_h],ge.head[ge.ins_h]=Y,Y++,--K;);ge.strstart=Y,ge.lookahead=M-1,xe(ge)}return ge.strstart+=ge.lookahead,ge.block_start=ge.strstart,ge.insert=ge.lookahead,ge.lookahead=0,ge.match_length=ge.prev_length=M-1,ge.match_available=0,I.next_in=ye,I.input=se,I.avail_in=ve,ge.wrap=ae,g},a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,n,a){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,n,a){n.exports=function(i,o){var l,c,f,d,h,p,g,m,w,x,b,E,_,C,B,L,A,z,M,U,q,D,F,T,G;l=i.state,c=i.next_in,T=i.input,f=c+(i.avail_in-5),d=i.next_out,G=i.output,h=d-(o-i.avail_out),p=d+(i.avail_out-257),g=l.dmax,m=l.wsize,w=l.whave,x=l.wnext,b=l.window,E=l.hold,_=l.bits,C=l.lencode,B=l.distcode,L=(1<<l.lenbits)-1,A=(1<<l.distbits)-1;e:do{_<15&&(E+=T[c++]<<_,_+=8,E+=T[c++]<<_,_+=8),z=C[E&L];t:for(;;){if(E>>>=M=z>>>24,_-=M,(M=z>>>16&255)===0)G[d++]=65535&z;else{if(!(16&M)){if((64&M)==0){z=C[(65535&z)+(E&(1<<M)-1)];continue t}if(32&M){l.mode=12;break e}i.msg="invalid literal/length code",l.mode=30;break e}U=65535&z,(M&=15)&&(_<M&&(E+=T[c++]<<_,_+=8),U+=E&(1<<M)-1,E>>>=M,_-=M),_<15&&(E+=T[c++]<<_,_+=8,E+=T[c++]<<_,_+=8),z=B[E&A];r:for(;;){if(E>>>=M=z>>>24,_-=M,!(16&(M=z>>>16&255))){if((64&M)==0){z=B[(65535&z)+(E&(1<<M)-1)];continue r}i.msg="invalid distance code",l.mode=30;break e}if(q=65535&z,_<(M&=15)&&(E+=T[c++]<<_,(_+=8)<M&&(E+=T[c++]<<_,_+=8)),g<(q+=E&(1<<M)-1)){i.msg="invalid distance too far back",l.mode=30;break e}if(E>>>=M,_-=M,(M=d-h)<q){if(w<(M=q-M)&&l.sane){i.msg="invalid distance too far back",l.mode=30;break e}if(F=b,(D=0)===x){if(D+=m-M,M<U){for(U-=M;G[d++]=b[D++],--M;);D=d-q,F=G}}else if(x<M){if(D+=m+x-M,(M-=x)<U){for(U-=M;G[d++]=b[D++],--M;);if(D=0,x<U){for(U-=M=x;G[d++]=b[D++],--M;);D=d-q,F=G}}}else if(D+=x-M,M<U){for(U-=M;G[d++]=b[D++],--M;);D=d-q,F=G}for(;2<U;)G[d++]=F[D++],G[d++]=F[D++],G[d++]=F[D++],U-=3;U&&(G[d++]=F[D++],1<U&&(G[d++]=F[D++]))}else{for(D=d-q;G[d++]=G[D++],G[d++]=G[D++],G[d++]=G[D++],2<(U-=3););U&&(G[d++]=G[D++],1<U&&(G[d++]=G[D++]))}break}}break}}while(c<f&&d<p);c-=U=_>>3,E&=(1<<(_-=U<<3))-1,i.next_in=c,i.next_out=d,i.avail_in=c<f?f-c+5:5-(c-f),i.avail_out=d<p?p-d+257:257-(d-p),l.hold=E,l.bits=_}},{}],49:[function(t,n,a){var i=t("../utils/common"),o=t("./adler32"),l=t("./crc32"),c=t("./inffast"),f=t("./inftrees"),d=1,h=2,p=0,g=-2,m=1,w=852,x=592;function b(D){return(D>>>24&255)+(D>>>8&65280)+((65280&D)<<8)+((255&D)<<24)}function E(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function _(D){var F;return D&&D.state?(F=D.state,D.total_in=D.total_out=F.total=0,D.msg="",F.wrap&&(D.adler=1&F.wrap),F.mode=m,F.last=0,F.havedict=0,F.dmax=32768,F.head=null,F.hold=0,F.bits=0,F.lencode=F.lendyn=new i.Buf32(w),F.distcode=F.distdyn=new i.Buf32(x),F.sane=1,F.back=-1,p):g}function C(D){var F;return D&&D.state?((F=D.state).wsize=0,F.whave=0,F.wnext=0,_(D)):g}function B(D,F){var T,G;return D&&D.state?(G=D.state,F<0?(T=0,F=-F):(T=1+(F>>4),F<48&&(F&=15)),F&&(F<8||15<F)?g:(G.window!==null&&G.wbits!==F&&(G.window=null),G.wrap=T,G.wbits=F,C(D))):g}function L(D,F){var T,G;return D?(G=new E,(D.state=G).window=null,(T=B(D,F))!==p&&(D.state=null),T):g}var A,z,M=!0;function U(D){if(M){var F;for(A=new i.Buf32(512),z=new i.Buf32(32),F=0;F<144;)D.lens[F++]=8;for(;F<256;)D.lens[F++]=9;for(;F<280;)D.lens[F++]=7;for(;F<288;)D.lens[F++]=8;for(f(d,D.lens,0,288,A,0,D.work,{bits:9}),F=0;F<32;)D.lens[F++]=5;f(h,D.lens,0,32,z,0,D.work,{bits:5}),M=!1}D.lencode=A,D.lenbits=9,D.distcode=z,D.distbits=5}function q(D,F,T,G){var Q,W=D.state;return W.window===null&&(W.wsize=1<<W.wbits,W.wnext=0,W.whave=0,W.window=new i.Buf8(W.wsize)),G>=W.wsize?(i.arraySet(W.window,F,T-W.wsize,W.wsize,0),W.wnext=0,W.whave=W.wsize):(G<(Q=W.wsize-W.wnext)&&(Q=G),i.arraySet(W.window,F,T-G,Q,W.wnext),(G-=Q)?(i.arraySet(W.window,F,T-G,G,0),W.wnext=G,W.whave=W.wsize):(W.wnext+=Q,W.wnext===W.wsize&&(W.wnext=0),W.whave<W.wsize&&(W.whave+=Q))),0}a.inflateReset=C,a.inflateReset2=B,a.inflateResetKeep=_,a.inflateInit=function(D){return L(D,15)},a.inflateInit2=L,a.inflate=function(D,F){var T,G,Q,W,X,Z,te,N,$,oe,ie,ne,xe,Pe,Ce,me,fe,he,Ee,Re,I,pe,ge,Y,K=0,ae=new i.Buf8(4),ve=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!D||!D.state||!D.output||!D.input&&D.avail_in!==0)return g;(T=D.state).mode===12&&(T.mode=13),X=D.next_out,Q=D.output,te=D.avail_out,W=D.next_in,G=D.input,Z=D.avail_in,N=T.hold,$=T.bits,oe=Z,ie=te,pe=p;e:for(;;)switch(T.mode){case m:if(T.wrap===0){T.mode=13;break}for(;$<16;){if(Z===0)break e;Z--,N+=G[W++]<<$,$+=8}if(2&T.wrap&&N===35615){ae[T.check=0]=255&N,ae[1]=N>>>8&255,T.check=l(T.check,ae,2,0),$=N=0,T.mode=2;break}if(T.flags=0,T.head&&(T.head.done=!1),!(1&T.wrap)||(((255&N)<<8)+(N>>8))%31){D.msg="incorrect header check",T.mode=30;break}if((15&N)!=8){D.msg="unknown compression method",T.mode=30;break}if($-=4,I=8+(15&(N>>>=4)),T.wbits===0)T.wbits=I;else if(I>T.wbits){D.msg="invalid window size",T.mode=30;break}T.dmax=1<<I,D.adler=T.check=1,T.mode=512&N?10:12,$=N=0;break;case 2:for(;$<16;){if(Z===0)break e;Z--,N+=G[W++]<<$,$+=8}if(T.flags=N,(255&T.flags)!=8){D.msg="unknown compression method",T.mode=30;break}if(57344&T.flags){D.msg="unknown header flags set",T.mode=30;break}T.head&&(T.head.text=N>>8&1),512&T.flags&&(ae[0]=255&N,ae[1]=N>>>8&255,T.check=l(T.check,ae,2,0)),$=N=0,T.mode=3;case 3:for(;$<32;){if(Z===0)break e;Z--,N+=G[W++]<<$,$+=8}T.head&&(T.head.time=N),512&T.flags&&(ae[0]=255&N,ae[1]=N>>>8&255,ae[2]=N>>>16&255,ae[3]=N>>>24&255,T.check=l(T.check,ae,4,0)),$=N=0,T.mode=4;case 4:for(;$<16;){if(Z===0)break e;Z--,N+=G[W++]<<$,$+=8}T.head&&(T.head.xflags=255&N,T.head.os=N>>8),512&T.flags&&(ae[0]=255&N,ae[1]=N>>>8&255,T.check=l(T.check,ae,2,0)),$=N=0,T.mode=5;case 5:if(1024&T.flags){for(;$<16;){if(Z===0)break e;Z--,N+=G[W++]<<$,$+=8}T.length=N,T.head&&(T.head.extra_len=N),512&T.flags&&(ae[0]=255&N,ae[1]=N>>>8&255,T.check=l(T.check,ae,2,0)),$=N=0}else T.head&&(T.head.extra=null);T.mode=6;case 6:if(1024&T.flags&&(Z<(ne=T.length)&&(ne=Z),ne&&(T.head&&(I=T.head.extra_len-T.length,T.head.extra||(T.head.extra=new Array(T.head.extra_len)),i.arraySet(T.head.extra,G,W,ne,I)),512&T.flags&&(T.check=l(T.check,G,ne,W)),Z-=ne,W+=ne,T.length-=ne),T.length))break e;T.length=0,T.mode=7;case 7:if(2048&T.flags){if(Z===0)break e;for(ne=0;I=G[W+ne++],T.head&&I&&T.length<65536&&(T.head.name+=String.fromCharCode(I)),I&&ne<Z;);if(512&T.flags&&(T.check=l(T.check,G,ne,W)),Z-=ne,W+=ne,I)break e}else T.head&&(T.head.name=null);T.length=0,T.mode=8;case 8:if(4096&T.flags){if(Z===0)break e;for(ne=0;I=G[W+ne++],T.head&&I&&T.length<65536&&(T.head.comment+=String.fromCharCode(I)),I&&ne<Z;);if(512&T.flags&&(T.check=l(T.check,G,ne,W)),Z-=ne,W+=ne,I)break e}else T.head&&(T.head.comment=null);T.mode=9;case 9:if(512&T.flags){for(;$<16;){if(Z===0)break e;Z--,N+=G[W++]<<$,$+=8}if(N!==(65535&T.check)){D.msg="header crc mismatch",T.mode=30;break}$=N=0}T.head&&(T.head.hcrc=T.flags>>9&1,T.head.done=!0),D.adler=T.check=0,T.mode=12;break;case 10:for(;$<32;){if(Z===0)break e;Z--,N+=G[W++]<<$,$+=8}D.adler=T.check=b(N),$=N=0,T.mode=11;case 11:if(T.havedict===0)return D.next_out=X,D.avail_out=te,D.next_in=W,D.avail_in=Z,T.hold=N,T.bits=$,2;D.adler=T.check=1,T.mode=12;case 12:if(F===5||F===6)break e;case 13:if(T.last){N>>>=7&$,$-=7&$,T.mode=27;break}for(;$<3;){if(Z===0)break e;Z--,N+=G[W++]<<$,$+=8}switch(T.last=1&N,$-=1,3&(N>>>=1)){case 0:T.mode=14;break;case 1:if(U(T),T.mode=20,F!==6)break;N>>>=2,$-=2;break e;case 2:T.mode=17;break;case 3:D.msg="invalid block type",T.mode=30}N>>>=2,$-=2;break;case 14:for(N>>>=7&$,$-=7&$;$<32;){if(Z===0)break e;Z--,N+=G[W++]<<$,$+=8}if((65535&N)!=(N>>>16^65535)){D.msg="invalid stored block lengths",T.mode=30;break}if(T.length=65535&N,$=N=0,T.mode=15,F===6)break e;case 15:T.mode=16;case 16:if(ne=T.length){if(Z<ne&&(ne=Z),te<ne&&(ne=te),ne===0)break e;i.arraySet(Q,G,W,ne,X),Z-=ne,W+=ne,te-=ne,X+=ne,T.length-=ne;break}T.mode=12;break;case 17:for(;$<14;){if(Z===0)break e;Z--,N+=G[W++]<<$,$+=8}if(T.nlen=257+(31&N),N>>>=5,$-=5,T.ndist=1+(31&N),N>>>=5,$-=5,T.ncode=4+(15&N),N>>>=4,$-=4,286<T.nlen||30<T.ndist){D.msg="too many length or distance symbols",T.mode=30;break}T.have=0,T.mode=18;case 18:for(;T.have<T.ncode;){for(;$<3;){if(Z===0)break e;Z--,N+=G[W++]<<$,$+=8}T.lens[ve[T.have++]]=7&N,N>>>=3,$-=3}for(;T.have<19;)T.lens[ve[T.have++]]=0;if(T.lencode=T.lendyn,T.lenbits=7,ge={bits:T.lenbits},pe=f(0,T.lens,0,19,T.lencode,0,T.work,ge),T.lenbits=ge.bits,pe){D.msg="invalid code lengths set",T.mode=30;break}T.have=0,T.mode=19;case 19:for(;T.have<T.nlen+T.ndist;){for(;me=(K=T.lencode[N&(1<<T.lenbits)-1])>>>16&255,fe=65535&K,!((Ce=K>>>24)<=$);){if(Z===0)break e;Z--,N+=G[W++]<<$,$+=8}if(fe<16)N>>>=Ce,$-=Ce,T.lens[T.have++]=fe;else{if(fe===16){for(Y=Ce+2;$<Y;){if(Z===0)break e;Z--,N+=G[W++]<<$,$+=8}if(N>>>=Ce,$-=Ce,T.have===0){D.msg="invalid bit length repeat",T.mode=30;break}I=T.lens[T.have-1],ne=3+(3&N),N>>>=2,$-=2}else if(fe===17){for(Y=Ce+3;$<Y;){if(Z===0)break e;Z--,N+=G[W++]<<$,$+=8}$-=Ce,I=0,ne=3+(7&(N>>>=Ce)),N>>>=3,$-=3}else{for(Y=Ce+7;$<Y;){if(Z===0)break e;Z--,N+=G[W++]<<$,$+=8}$-=Ce,I=0,ne=11+(127&(N>>>=Ce)),N>>>=7,$-=7}if(T.have+ne>T.nlen+T.ndist){D.msg="invalid bit length repeat",T.mode=30;break}for(;ne--;)T.lens[T.have++]=I}}if(T.mode===30)break;if(T.lens[256]===0){D.msg="invalid code -- missing end-of-block",T.mode=30;break}if(T.lenbits=9,ge={bits:T.lenbits},pe=f(d,T.lens,0,T.nlen,T.lencode,0,T.work,ge),T.lenbits=ge.bits,pe){D.msg="invalid literal/lengths set",T.mode=30;break}if(T.distbits=6,T.distcode=T.distdyn,ge={bits:T.distbits},pe=f(h,T.lens,T.nlen,T.ndist,T.distcode,0,T.work,ge),T.distbits=ge.bits,pe){D.msg="invalid distances set",T.mode=30;break}if(T.mode=20,F===6)break e;case 20:T.mode=21;case 21:if(6<=Z&&258<=te){D.next_out=X,D.avail_out=te,D.next_in=W,D.avail_in=Z,T.hold=N,T.bits=$,c(D,ie),X=D.next_out,Q=D.output,te=D.avail_out,W=D.next_in,G=D.input,Z=D.avail_in,N=T.hold,$=T.bits,T.mode===12&&(T.back=-1);break}for(T.back=0;me=(K=T.lencode[N&(1<<T.lenbits)-1])>>>16&255,fe=65535&K,!((Ce=K>>>24)<=$);){if(Z===0)break e;Z--,N+=G[W++]<<$,$+=8}if(me&&(240&me)==0){for(he=Ce,Ee=me,Re=fe;me=(K=T.lencode[Re+((N&(1<<he+Ee)-1)>>he)])>>>16&255,fe=65535&K,!(he+(Ce=K>>>24)<=$);){if(Z===0)break e;Z--,N+=G[W++]<<$,$+=8}N>>>=he,$-=he,T.back+=he}if(N>>>=Ce,$-=Ce,T.back+=Ce,T.length=fe,me===0){T.mode=26;break}if(32&me){T.back=-1,T.mode=12;break}if(64&me){D.msg="invalid literal/length code",T.mode=30;break}T.extra=15&me,T.mode=22;case 22:if(T.extra){for(Y=T.extra;$<Y;){if(Z===0)break e;Z--,N+=G[W++]<<$,$+=8}T.length+=N&(1<<T.extra)-1,N>>>=T.extra,$-=T.extra,T.back+=T.extra}T.was=T.length,T.mode=23;case 23:for(;me=(K=T.distcode[N&(1<<T.distbits)-1])>>>16&255,fe=65535&K,!((Ce=K>>>24)<=$);){if(Z===0)break e;Z--,N+=G[W++]<<$,$+=8}if((240&me)==0){for(he=Ce,Ee=me,Re=fe;me=(K=T.distcode[Re+((N&(1<<he+Ee)-1)>>he)])>>>16&255,fe=65535&K,!(he+(Ce=K>>>24)<=$);){if(Z===0)break e;Z--,N+=G[W++]<<$,$+=8}N>>>=he,$-=he,T.back+=he}if(N>>>=Ce,$-=Ce,T.back+=Ce,64&me){D.msg="invalid distance code",T.mode=30;break}T.offset=fe,T.extra=15&me,T.mode=24;case 24:if(T.extra){for(Y=T.extra;$<Y;){if(Z===0)break e;Z--,N+=G[W++]<<$,$+=8}T.offset+=N&(1<<T.extra)-1,N>>>=T.extra,$-=T.extra,T.back+=T.extra}if(T.offset>T.dmax){D.msg="invalid distance too far back",T.mode=30;break}T.mode=25;case 25:if(te===0)break e;if(ne=ie-te,T.offset>ne){if((ne=T.offset-ne)>T.whave&&T.sane){D.msg="invalid distance too far back",T.mode=30;break}xe=ne>T.wnext?(ne-=T.wnext,T.wsize-ne):T.wnext-ne,ne>T.length&&(ne=T.length),Pe=T.window}else Pe=Q,xe=X-T.offset,ne=T.length;for(te<ne&&(ne=te),te-=ne,T.length-=ne;Q[X++]=Pe[xe++],--ne;);T.length===0&&(T.mode=21);break;case 26:if(te===0)break e;Q[X++]=T.length,te--,T.mode=21;break;case 27:if(T.wrap){for(;$<32;){if(Z===0)break e;Z--,N|=G[W++]<<$,$+=8}if(ie-=te,D.total_out+=ie,T.total+=ie,ie&&(D.adler=T.check=T.flags?l(T.check,Q,ie,X-ie):o(T.check,Q,ie,X-ie)),ie=te,(T.flags?N:b(N))!==T.check){D.msg="incorrect data check",T.mode=30;break}$=N=0}T.mode=28;case 28:if(T.wrap&&T.flags){for(;$<32;){if(Z===0)break e;Z--,N+=G[W++]<<$,$+=8}if(N!==(4294967295&T.total)){D.msg="incorrect length check",T.mode=30;break}$=N=0}T.mode=29;case 29:pe=1;break e;case 30:pe=-3;break e;case 31:return-4;case 32:default:return g}return D.next_out=X,D.avail_out=te,D.next_in=W,D.avail_in=Z,T.hold=N,T.bits=$,(T.wsize||ie!==D.avail_out&&T.mode<30&&(T.mode<27||F!==4))&&q(D,D.output,D.next_out,ie-D.avail_out)?(T.mode=31,-4):(oe-=D.avail_in,ie-=D.avail_out,D.total_in+=oe,D.total_out+=ie,T.total+=ie,T.wrap&&ie&&(D.adler=T.check=T.flags?l(T.check,Q,ie,D.next_out-ie):o(T.check,Q,ie,D.next_out-ie)),D.data_type=T.bits+(T.last?64:0)+(T.mode===12?128:0)+(T.mode===20||T.mode===15?256:0),(oe==0&&ie===0||F===4)&&pe===p&&(pe=-5),pe)},a.inflateEnd=function(D){if(!D||!D.state)return g;var F=D.state;return F.window&&(F.window=null),D.state=null,p},a.inflateGetHeader=function(D,F){var T;return D&&D.state?(2&(T=D.state).wrap)==0?g:((T.head=F).done=!1,p):g},a.inflateSetDictionary=function(D,F){var T,G=F.length;return D&&D.state?(T=D.state).wrap!==0&&T.mode!==11?g:T.mode===11&&o(1,F,G,0)!==T.check?-3:q(D,F,G,G)?(T.mode=31,-4):(T.havedict=1,p):g},a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,n,a){var i=t("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(d,h,p,g,m,w,x,b){var E,_,C,B,L,A,z,M,U,q=b.bits,D=0,F=0,T=0,G=0,Q=0,W=0,X=0,Z=0,te=0,N=0,$=null,oe=0,ie=new i.Buf16(16),ne=new i.Buf16(16),xe=null,Pe=0;for(D=0;D<=15;D++)ie[D]=0;for(F=0;F<g;F++)ie[h[p+F]]++;for(Q=q,G=15;1<=G&&ie[G]===0;G--);if(G<Q&&(Q=G),G===0)return m[w++]=20971520,m[w++]=20971520,b.bits=1,0;for(T=1;T<G&&ie[T]===0;T++);for(Q<T&&(Q=T),D=Z=1;D<=15;D++)if(Z<<=1,(Z-=ie[D])<0)return-1;if(0<Z&&(d===0||G!==1))return-1;for(ne[1]=0,D=1;D<15;D++)ne[D+1]=ne[D]+ie[D];for(F=0;F<g;F++)h[p+F]!==0&&(x[ne[h[p+F]]++]=F);if(A=d===0?($=xe=x,19):d===1?($=o,oe-=257,xe=l,Pe-=257,256):($=c,xe=f,-1),D=T,L=w,X=F=N=0,C=-1,B=(te=1<<(W=Q))-1,d===1&&852<te||d===2&&592<te)return 1;for(;;){for(z=D-X,U=x[F]<A?(M=0,x[F]):x[F]>A?(M=xe[Pe+x[F]],$[oe+x[F]]):(M=96,0),E=1<<D-X,T=_=1<<W;m[L+(N>>X)+(_-=E)]=z<<24|M<<16|U|0,_!==0;);for(E=1<<D-1;N&E;)E>>=1;if(E!==0?(N&=E-1,N+=E):N=0,F++,--ie[D]==0){if(D===G)break;D=h[p+x[F]]}if(Q<D&&(N&B)!==C){for(X===0&&(X=Q),L+=T,Z=1<<(W=D-X);W+X<G&&!((Z-=ie[W+X])<=0);)W++,Z<<=1;if(te+=1<<W,d===1&&852<te||d===2&&592<te)return 1;m[C=N&B]=Q<<24|W<<16|L-w|0}}return N!==0&&(m[L+N]=D-X<<24|64<<16|0),b.bits=Q,0}},{"../utils/common":41}],51:[function(t,n,a){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,n,a){var i=t("../utils/common"),o=0,l=1;function c(K){for(var ae=K.length;0<=--ae;)K[ae]=0}var f=0,d=29,h=256,p=h+1+d,g=30,m=19,w=2*p+1,x=15,b=16,E=7,_=256,C=16,B=17,L=18,A=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],z=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],M=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],q=new Array(2*(p+2));c(q);var D=new Array(2*g);c(D);var F=new Array(512);c(F);var T=new Array(256);c(T);var G=new Array(d);c(G);var Q,W,X,Z=new Array(g);function te(K,ae,ve,ye,se){this.static_tree=K,this.extra_bits=ae,this.extra_base=ve,this.elems=ye,this.max_length=se,this.has_stree=K&&K.length}function N(K,ae){this.dyn_tree=K,this.max_code=0,this.stat_desc=ae}function $(K){return K<256?F[K]:F[256+(K>>>7)]}function oe(K,ae){K.pending_buf[K.pending++]=255&ae,K.pending_buf[K.pending++]=ae>>>8&255}function ie(K,ae,ve){K.bi_valid>b-ve?(K.bi_buf|=ae<<K.bi_valid&65535,oe(K,K.bi_buf),K.bi_buf=ae>>b-K.bi_valid,K.bi_valid+=ve-b):(K.bi_buf|=ae<<K.bi_valid&65535,K.bi_valid+=ve)}function ne(K,ae,ve){ie(K,ve[2*ae],ve[2*ae+1])}function xe(K,ae){for(var ve=0;ve|=1&K,K>>>=1,ve<<=1,0<--ae;);return ve>>>1}function Pe(K,ae,ve){var ye,se,Be=new Array(x+1),Ie=0;for(ye=1;ye<=x;ye++)Be[ye]=Ie=Ie+ve[ye-1]<<1;for(se=0;se<=ae;se++){var Ae=K[2*se+1];Ae!==0&&(K[2*se]=xe(Be[Ae]++,Ae))}}function Ce(K){var ae;for(ae=0;ae<p;ae++)K.dyn_ltree[2*ae]=0;for(ae=0;ae<g;ae++)K.dyn_dtree[2*ae]=0;for(ae=0;ae<m;ae++)K.bl_tree[2*ae]=0;K.dyn_ltree[2*_]=1,K.opt_len=K.static_len=0,K.last_lit=K.matches=0}function me(K){8<K.bi_valid?oe(K,K.bi_buf):0<K.bi_valid&&(K.pending_buf[K.pending++]=K.bi_buf),K.bi_buf=0,K.bi_valid=0}function fe(K,ae,ve,ye){var se=2*ae,Be=2*ve;return K[se]<K[Be]||K[se]===K[Be]&&ye[ae]<=ye[ve]}function he(K,ae,ve){for(var ye=K.heap[ve],se=ve<<1;se<=K.heap_len&&(se<K.heap_len&&fe(ae,K.heap[se+1],K.heap[se],K.depth)&&se++,!fe(ae,ye,K.heap[se],K.depth));)K.heap[ve]=K.heap[se],ve=se,se<<=1;K.heap[ve]=ye}function Ee(K,ae,ve){var ye,se,Be,Ie,Ae=0;if(K.last_lit!==0)for(;ye=K.pending_buf[K.d_buf+2*Ae]<<8|K.pending_buf[K.d_buf+2*Ae+1],se=K.pending_buf[K.l_buf+Ae],Ae++,ye===0?ne(K,se,ae):(ne(K,(Be=T[se])+h+1,ae),(Ie=A[Be])!==0&&ie(K,se-=G[Be],Ie),ne(K,Be=$(--ye),ve),(Ie=z[Be])!==0&&ie(K,ye-=Z[Be],Ie)),Ae<K.last_lit;);ne(K,_,ae)}function Re(K,ae){var ve,ye,se,Be=ae.dyn_tree,Ie=ae.stat_desc.static_tree,Ae=ae.stat_desc.has_stree,ze=ae.stat_desc.elems,j=-1;for(K.heap_len=0,K.heap_max=w,ve=0;ve<ze;ve++)Be[2*ve]!==0?(K.heap[++K.heap_len]=j=ve,K.depth[ve]=0):Be[2*ve+1]=0;for(;K.heap_len<2;)Be[2*(se=K.heap[++K.heap_len]=j<2?++j:0)]=1,K.depth[se]=0,K.opt_len--,Ae&&(K.static_len-=Ie[2*se+1]);for(ae.max_code=j,ve=K.heap_len>>1;1<=ve;ve--)he(K,Be,ve);for(se=ze;ve=K.heap[1],K.heap[1]=K.heap[K.heap_len--],he(K,Be,1),ye=K.heap[1],K.heap[--K.heap_max]=ve,K.heap[--K.heap_max]=ye,Be[2*se]=Be[2*ve]+Be[2*ye],K.depth[se]=(K.depth[ve]>=K.depth[ye]?K.depth[ve]:K.depth[ye])+1,Be[2*ve+1]=Be[2*ye+1]=se,K.heap[1]=se++,he(K,Be,1),2<=K.heap_len;);K.heap[--K.heap_max]=K.heap[1],(function(k,R){var H,ee,J,O,ce,_e,we=R.dyn_tree,ke=R.max_code,Oe=R.stat_desc.static_tree,De=R.stat_desc.has_stree,We=R.stat_desc.extra_bits,Ue=R.stat_desc.extra_base,Ge=R.stat_desc.max_length,nt=0;for(O=0;O<=x;O++)k.bl_count[O]=0;for(we[2*k.heap[k.heap_max]+1]=0,H=k.heap_max+1;H<w;H++)Ge<(O=we[2*we[2*(ee=k.heap[H])+1]+1]+1)&&(O=Ge,nt++),we[2*ee+1]=O,ke<ee||(k.bl_count[O]++,ce=0,Ue<=ee&&(ce=We[ee-Ue]),_e=we[2*ee],k.opt_len+=_e*(O+ce),De&&(k.static_len+=_e*(Oe[2*ee+1]+ce)));if(nt!==0){do{for(O=Ge-1;k.bl_count[O]===0;)O--;k.bl_count[O]--,k.bl_count[O+1]+=2,k.bl_count[Ge]--,nt-=2}while(0<nt);for(O=Ge;O!==0;O--)for(ee=k.bl_count[O];ee!==0;)ke<(J=k.heap[--H])||(we[2*J+1]!==O&&(k.opt_len+=(O-we[2*J+1])*we[2*J],we[2*J+1]=O),ee--)}})(K,ae),Pe(Be,j,K.bl_count)}function I(K,ae,ve){var ye,se,Be=-1,Ie=ae[1],Ae=0,ze=7,j=4;for(Ie===0&&(ze=138,j=3),ae[2*(ve+1)+1]=65535,ye=0;ye<=ve;ye++)se=Ie,Ie=ae[2*(ye+1)+1],++Ae<ze&&se===Ie||(Ae<j?K.bl_tree[2*se]+=Ae:se!==0?(se!==Be&&K.bl_tree[2*se]++,K.bl_tree[2*C]++):Ae<=10?K.bl_tree[2*B]++:K.bl_tree[2*L]++,Be=se,j=(Ae=0)===Ie?(ze=138,3):se===Ie?(ze=6,3):(ze=7,4))}function pe(K,ae,ve){var ye,se,Be=-1,Ie=ae[1],Ae=0,ze=7,j=4;for(Ie===0&&(ze=138,j=3),ye=0;ye<=ve;ye++)if(se=Ie,Ie=ae[2*(ye+1)+1],!(++Ae<ze&&se===Ie)){if(Ae<j)for(;ne(K,se,K.bl_tree),--Ae!=0;);else se!==0?(se!==Be&&(ne(K,se,K.bl_tree),Ae--),ne(K,C,K.bl_tree),ie(K,Ae-3,2)):Ae<=10?(ne(K,B,K.bl_tree),ie(K,Ae-3,3)):(ne(K,L,K.bl_tree),ie(K,Ae-11,7));Be=se,j=(Ae=0)===Ie?(ze=138,3):se===Ie?(ze=6,3):(ze=7,4)}}c(Z);var ge=!1;function Y(K,ae,ve,ye){ie(K,(f<<1)+(ye?1:0),3),(function(se,Be,Ie,Ae){me(se),oe(se,Ie),oe(se,~Ie),i.arraySet(se.pending_buf,se.window,Be,Ie,se.pending),se.pending+=Ie})(K,ae,ve)}a._tr_init=function(K){ge||((function(){var ae,ve,ye,se,Be,Ie=new Array(x+1);for(se=ye=0;se<d-1;se++)for(G[se]=ye,ae=0;ae<1<<A[se];ae++)T[ye++]=se;for(T[ye-1]=se,se=Be=0;se<16;se++)for(Z[se]=Be,ae=0;ae<1<<z[se];ae++)F[Be++]=se;for(Be>>=7;se<g;se++)for(Z[se]=Be<<7,ae=0;ae<1<<z[se]-7;ae++)F[256+Be++]=se;for(ve=0;ve<=x;ve++)Ie[ve]=0;for(ae=0;ae<=143;)q[2*ae+1]=8,ae++,Ie[8]++;for(;ae<=255;)q[2*ae+1]=9,ae++,Ie[9]++;for(;ae<=279;)q[2*ae+1]=7,ae++,Ie[7]++;for(;ae<=287;)q[2*ae+1]=8,ae++,Ie[8]++;for(Pe(q,p+1,Ie),ae=0;ae<g;ae++)D[2*ae+1]=5,D[2*ae]=xe(ae,5);Q=new te(q,A,h+1,p,x),W=new te(D,z,0,g,x),X=new te(new Array(0),M,0,m,E)})(),ge=!0),K.l_desc=new N(K.dyn_ltree,Q),K.d_desc=new N(K.dyn_dtree,W),K.bl_desc=new N(K.bl_tree,X),K.bi_buf=0,K.bi_valid=0,Ce(K)},a._tr_stored_block=Y,a._tr_flush_block=function(K,ae,ve,ye){var se,Be,Ie=0;0<K.level?(K.strm.data_type===2&&(K.strm.data_type=(function(Ae){var ze,j=4093624447;for(ze=0;ze<=31;ze++,j>>>=1)if(1&j&&Ae.dyn_ltree[2*ze]!==0)return o;if(Ae.dyn_ltree[18]!==0||Ae.dyn_ltree[20]!==0||Ae.dyn_ltree[26]!==0)return l;for(ze=32;ze<h;ze++)if(Ae.dyn_ltree[2*ze]!==0)return l;return o})(K)),Re(K,K.l_desc),Re(K,K.d_desc),Ie=(function(Ae){var ze;for(I(Ae,Ae.dyn_ltree,Ae.l_desc.max_code),I(Ae,Ae.dyn_dtree,Ae.d_desc.max_code),Re(Ae,Ae.bl_desc),ze=m-1;3<=ze&&Ae.bl_tree[2*U[ze]+1]===0;ze--);return Ae.opt_len+=3*(ze+1)+5+5+4,ze})(K),se=K.opt_len+3+7>>>3,(Be=K.static_len+3+7>>>3)<=se&&(se=Be)):se=Be=ve+5,ve+4<=se&&ae!==-1?Y(K,ae,ve,ye):K.strategy===4||Be===se?(ie(K,2+(ye?1:0),3),Ee(K,q,D)):(ie(K,4+(ye?1:0),3),(function(Ae,ze,j,k){var R;for(ie(Ae,ze-257,5),ie(Ae,j-1,5),ie(Ae,k-4,4),R=0;R<k;R++)ie(Ae,Ae.bl_tree[2*U[R]+1],3);pe(Ae,Ae.dyn_ltree,ze-1),pe(Ae,Ae.dyn_dtree,j-1)})(K,K.l_desc.max_code+1,K.d_desc.max_code+1,Ie+1),Ee(K,K.dyn_ltree,K.dyn_dtree)),Ce(K),ye&&me(K)},a._tr_tally=function(K,ae,ve){return K.pending_buf[K.d_buf+2*K.last_lit]=ae>>>8&255,K.pending_buf[K.d_buf+2*K.last_lit+1]=255&ae,K.pending_buf[K.l_buf+K.last_lit]=255&ve,K.last_lit++,ae===0?K.dyn_ltree[2*ve]++:(K.matches++,ae--,K.dyn_ltree[2*(T[ve]+h+1)]++,K.dyn_dtree[2*$(ae)]++),K.last_lit===K.lit_bufsize-1},a._tr_align=function(K){ie(K,2,3),ne(K,_,q),(function(ae){ae.bi_valid===16?(oe(ae,ae.bi_buf),ae.bi_buf=0,ae.bi_valid=0):8<=ae.bi_valid&&(ae.pending_buf[ae.pending++]=255&ae.bi_buf,ae.bi_buf>>=8,ae.bi_valid-=8)})(K)}},{"../utils/common":41}],53:[function(t,n,a){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,n,a){(function(i){(function(o,l){if(!o.setImmediate){var c,f,d,h,p=1,g={},m=!1,w=o.document,x=Object.getPrototypeOf&&Object.getPrototypeOf(o);x=x&&x.setTimeout?x:o,c={}.toString.call(o.process)==="[object process]"?function(C){process.nextTick(function(){E(C)})}:(function(){if(o.postMessage&&!o.importScripts){var C=!0,B=o.onmessage;return o.onmessage=function(){C=!1},o.postMessage("","*"),o.onmessage=B,C}})()?(h="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",_,!1):o.attachEvent("onmessage",_),function(C){o.postMessage(h+C,"*")}):o.MessageChannel?((d=new MessageChannel).port1.onmessage=function(C){E(C.data)},function(C){d.port2.postMessage(C)}):w&&"onreadystatechange"in w.createElement("script")?(f=w.documentElement,function(C){var B=w.createElement("script");B.onreadystatechange=function(){E(C),B.onreadystatechange=null,f.removeChild(B),B=null},f.appendChild(B)}):function(C){setTimeout(E,0,C)},x.setImmediate=function(C){typeof C!="function"&&(C=new Function(""+C));for(var B=new Array(arguments.length-1),L=0;L<B.length;L++)B[L]=arguments[L+1];var A={callback:C,args:B};return g[p]=A,c(p),p++},x.clearImmediate=b}function b(C){delete g[C]}function E(C){if(m)setTimeout(E,0,C);else{var B=g[C];if(B){m=!0;try{(function(L){var A=L.callback,z=L.args;switch(z.length){case 0:A();break;case 1:A(z[0]);break;case 2:A(z[0],z[1]);break;case 3:A(z[0],z[1],z[2]);break;default:A.apply(l,z)}})(B)}finally{b(C),m=!1}}}}function _(C){C.source===o&&typeof C.data=="string"&&C.data.indexOf(h)===0&&E(+C.data.slice(h.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof Fl<"u"?Fl:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Wf)),Wf.exports}var d2=f2();const h2=Iu(d2),sm=new Set(["png","jpg","jpeg","gif","webp","svg"]);async function v2(r){const e=[],t=[],n={};for(const a of r.files){const i=a.name,o=a.webkitRelativePath?a.webkitRelativePath:i,l=i.toLowerCase(),c=l.includes(".")?l.split(".").pop():"";if(c==="zip"){const f=await h2.loadAsync(await a.arrayBuffer()),d=Object.values(f.files);for(const h of d){if(h.dir)continue;const p=h.name,g=p.toLowerCase(),m=g.includes(".")?g.split(".").pop():"";if(m==="tex"){const w=await h.async("string");t.push({path:p,content:w})}else if(sm.has(m)){const w=await h.async("blob");n[p]=URL.createObjectURL(w)}}continue}if(c==="tex"){const f=await a.text();t.push({path:o,content:f});continue}if(sm.has(c)){n[o]=URL.createObjectURL(a);continue}e.push(`: ${o}`)}return t.length===0&&e.push(" .tex "),{latexFiles:t,assets:n,warnings:e}}function p2(r){return r.split(`
`).map(e=>{let t="",n=!1;for(let a=0;a<e.length;a++){const i=e[a];if(n){t+=i,n=!1;continue}if(i==="\\"){t+=i,n=!0;continue}if(i==="%")break;t+=i}return t}).join(`
`)}const g2=/^\\(section|subsection|subsubsection)\*?\{(.+?)\}\s*$/m;function m2(r,e={}){const t=e.maxChars??6e3,n=[],a=[...r].sort((i,o)=>i.path.localeCompare(o.path));for(const i of a){const l=p2(i.content).split(`
`);let c=[`${i.path}`],f=[],d=i.path;const h=()=>{const p=f.join(`
`).trim();if(!p)return;const g=y2(i.path,n.length);n.push({id:g,file:i.path,title:d,sectionPath:[...c],text:p}),f=[]};for(let p=0;p<l.length;p++){const g=l[p],m=g.match(g2);if(m){h();const w=m[1],x=w2(m[2]);c=x2(c,w,x,i.path),d=c.slice(-1)[0]??x,f.push(g);continue}f.push(g),f.join(`
`).length>t&&h()}h()}return b2(n,t)}function y2(r,e){return`chunk:${r}:${e}`}function w2(r){return r.replace(/\s+/g," ").trim()}function x2(r,e,t,n){const a=r.length?[r[0]]:[n],i=r.slice(1),o=e==="section"?1:e==="subsection"?2:3,l=i.slice(0,o-1);return l.push(t),[...a,...l]}function b2(r,e){const t=[];for(const n of r){if(n.text.length<=e){t.push(n);continue}const a=n.text.split(/\n\s*\n+/);let i="",o=0;for(const l of a){const c=(i?`${i}

${l}`:l).trim();c.length>e&&i?(t.push({...n,id:`${n.id}:p${o++}`,text:i.trim()}),i=l):i=c}i.trim()&&t.push({...n,id:`${n.id}:p${o++}`,text:i.trim()})}return t}const E2={theorem:"Theorem",lemma:"Lemma",corollary:"Corollary",definition:"Definition",example:"Example",exercise:"Exercise",axiom:"Axiom",proposition:"Proposition",conclusion:"Conclusion"};function _2(r){const{chunk:e,selectedEntities:t,selectedRelations:n,knownLabelToNodeId:a}=r,i=[],o=[],l=`sec:${e.sectionPath.join(" / ")}`;t.includes("Conclusion")&&i.push({id:l,type:"Conclusion",title:e.sectionPath.slice(1).join(" / ")||e.title,content:"",source:{file:e.file,sectionPath:e.sectionPath}});const c=S2(e,t,a);i.push(...c);for(const h of c)if(h.type==="Example"||h.type==="Exercise"){const p=B2(h.content??"");p&&(h.meta={...h.meta??{},problem:p.problem,solution:p.solution,answer:p.answer})}const f=["Theorem","Lemma","Corollary","Definition","Axiom","Proposition","Conclusion","Formula"];let d=null;for(const h of c)f.includes(h.type)&&h.type!=="Example"&&h.type!=="Exercise"&&(d=h),(h.type==="Example"||h.type==="Exercise")&&d&&(h.type==="Exercise"&&n.includes("AppliesTo")?o.push({type:"AppliesTo",source:h.id,target:d.id,meta:{chunkId:e.id}}):n.includes("AssistsIn")&&o.push({type:"AssistsIn",source:h.id,target:d.id,meta:{chunkId:e.id}}));if(t.includes("Formula")){const h=k2(e,a);i.push(...h)}if(n.includes("Contains"))for(const h of i)h.id!==l&&l.startsWith("sec:")&&i.find(p=>p.id===l)&&o.push({type:"Contains",source:l,target:h.id,meta:{chunkId:e.id}});if(n.includes("DependsOn")){const h=T2(e.text),p=i.filter(g=>g.id!==l);for(const g of p)for(const m of h){const w=a.get(m);w&&w!==g.id&&o.push({type:"DependsOn",source:g.id,target:w,evidence:`reference: ${m}`,meta:{chunkId:e.id}})}}if(n.includes("DerivedFrom")){const h=/derived\s+from\s+(\\ref\{([^}]+)\})/gi,p=[...e.text.matchAll(h)];if(p.length){const g=i.filter(m=>m.id!==l);for(const m of g)for(const w of p){const x=w[2],b=a.get(x);b&&b!==m.id&&o.push({type:"DerivedFrom",source:m.id,target:b,evidence:w[0],meta:{chunkId:e.id}})}}}return{nodes:P2(i),edges:R2(o)}}function S2(r,e,t){const n=[],a=/\\begin\{(theorem|lemma|corollary|definition|example|exercise|axiom|proposition|conclusion)\}([\s\S]*?)\\end\{\1\}/gi;let i=0;for(const o of r.text.matchAll(a)){const l=(o[1]??"").toLowerCase(),c=E2[l];if(!c||!e.includes(c))continue;const f=(o[2]??"").trim(),d=Q0(f),h=C2(o[0])??`${c} ${i+1}`,p=d?`tex:${d}`:`${r.id}:${l}:${i}`;i++;const g={id:p,type:c,title:h,content:f,source:{file:r.file,latexLabel:d??void 0,sectionPath:r.sectionPath}};n.push(g),d&&t.set(d,p)}return n}function k2(r,e){const t=[],n=A2(r.text),a=[/\\begin\{equation\}([\s\S]*?)\\end\{equation\}/gi,/\\begin\{align\}([\s\S]*?)\\end\{align\}/gi,/\$\$([\s\S]*?)\$\$/g,/\\\[([\s\S]*?)\\\]/g];let i=0;for(const o of a)for(const l of r.text.matchAll(o)){const c=(l[1]??"").trim();if(!c)continue;const f=Q0(c),d=l.index;if(!f&&typeof d=="number"&&I2(d,n))continue;const h=f?`tex:${f}`:`${r.id}:formula:${i++}`,p=f?`Formula (${f})`:`Formula ${i}`;t.push({id:h,type:"Formula",title:p,content:c,source:{file:r.file,latexLabel:f??void 0,sectionPath:r.sectionPath}}),f&&e.set(f,h)}return t}function Q0(r){const e=r.match(/\\label\{([^}]+)\}/);return e?e[1].trim():null}function C2(r){const e=r.match(/\\begin\{[a-zA-Z*]+\}\s*\[([^\]]+)\]/);return e?e[1].trim():null}function T2(r){const e=new Set;for(const t of r.matchAll(/\\(eqref|ref|autoref|cref)\{([^}]+)\}/g))e.add(t[2].trim());return[...e.values()]}function P2(r){const e=new Map;for(const t of r){const n=e.get(t.id);e.set(t.id,n?{...n,...t,meta:{...n.meta,...t.meta}}:t)}return[...e.values()]}function R2(r){const e=n=>{var a;return`${n.source}::${n.type}::${n.target}::${String(((a=n.meta)==null?void 0:a.chunkId)??"")}`},t=new Map;for(const n of r)t.set(e(n),n);return[...t.values()]}function B2(r){var o,l;const e=(r??"").trim();if(!e)return null;const t=e.match(/\\begin\{solution\}([\s\S]*?)\\end\{solution\}/i),n=e.match(/\\begin\{answer\}([\s\S]*?)\\end\{answer\}/i);if(t||n){const c=((o=t==null?void 0:t[1])==null?void 0:o.trim())??"",f=((l=n==null?void 0:n[1])==null?void 0:l.trim())??"";return{problem:e.replace((t==null?void 0:t[0])??"","").replace((n==null?void 0:n[0])??"","").trim(),solution:c,answer:f}}const a=e.search(/\n\s*(||)\s*[:]?\s*\n/),i=e.search(/\n\s*()\s*[:]?\s*\n/);if(a>=0||i>=0){const c=g=>g>=0?g:e.length,f=Math.min(c(a),c(i)),d=e.slice(0,f).trim();let h="",p="";if(a>=0){const g=i>=0&&i>a?i:e.length;h=e.slice(a,g).trim()}return i>=0&&(p=e.slice(i).trim()),{problem:d,solution:h,answer:p}}return null}function A2(r){var n;const e=[],t=/\\begin\{(example|exercise)\}[\s\S]*?\\end\{\1\}/gi;for(const a of r.matchAll(t)){const i=a.index;typeof i=="number"&&e.push({start:i,end:i+(((n=a[0])==null?void 0:n.length)??0)})}return e}function I2(r,e){return e.some(t=>r>=t.start&&r<=t.end)}function D2(r){const{chunk:e,selectedEntities:t,selectedRelations:n,graphSummary:a,userNotes:i}=r;return`
LaTeX  LaTeX  JSON markdown

## 
${t.map(o=>`- ${o}`).join(`
`)}

## 
${n.map(o=>`- ${o}`).join(`
`)}

## 
- /////////label
- 
-  \\label / \\ref / \\eqref 

## 
- **** LaTeX 
- **Formula ** equation/align/\\[ \\]/$$ $$  Formula
- title /label/
- **** "..."  ""  content  LaTeX
- **/**/// content /
- **/ trivial **// label//

## 
${a}

${i!=null&&i.trim()?`## 
${i.trim()}
`:""}

## 
- chunk_id: ${e.id}
- file: ${e.file}
- section_path: ${e.sectionPath.join(" / ")}
- title: ${e.title}

## LaTeX 
${e.text}

##  JSON 
 nodes  edges
{
  "nodes": [
    {
      "id": "string ( tex:<label> label  chunk:<chunkId>:<type>:<idx>)",
      "type": "EntityType",
      "title": "//",
      "content": " LaTeX Formula  math delimiter",
      "source": { "file": "string", "latexLabel": "string|null", "sectionPath": ["..."] },
      "meta": { "chunkId": "string", "confidence": 0.0 }
    }
  ],
  "edges": [
    {
      "type": "RelationType",
      "source": "node.id",
      "target": "node.id",
      "evidence": "",
      "meta": { "chunkId": "string", "confidence": 0.0 }
    }
  ]
}


-  JSON markdown
- nodes[].type edges[].type 
- edges  source/target  nodes  id id id  title/content/source
`.trim()}function N2(r,e=120){const t=r.nodes.slice(0,e),n=t.map(i=>{var l;const o=typeof((l=i.source)==null?void 0:l.latexLabel)=="string"?` label=${i.source.latexLabel}`:"";return`- ${i.id} | ${i.type} | ${i.title}${o}`}),a=r.edges.slice(0,80).map(i=>`- (${i.type}) ${i.source} -> ${i.target}`);return[`nodes(${r.nodes.length}) showing ${t.length}:`,...n,"",`edges(${r.edges.length}) showing ${a.length}:`,...a].join(`
`).trim()}async function L2(r){try{const e=await fetch(`${r.baseUrl.replace(/\/$/,"")}/models`,{method:"GET",headers:{Authorization:`Bearer ${r.apiKey}`},signal:r.signal});return e.ok?{ok:!0,message:" models "}:{ok:!1,message:`HTTP ${e.status}`,detail:await J0(e)}}catch(e){return{ok:!1,message:" CORS / Key / ",detail:String((e==null?void 0:e.message)??e)}}}async function O2(r){const e=`${r.baseUrl.replace(/\/$/,"")}/responses`,t={model:r.model,input:r.prompt,temperature:r.temperature,top_p:r.topP,max_output_tokens:r.maxTokens,response_format:{type:"json_object"}},n=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r.apiKey}`},body:JSON.stringify(t),signal:r.signal});if(!n.ok)throw new Error(`OpenAI HTTP ${n.status}: ${await J0(n)}`);const a=await n.json(),i=M2(a);return{...JSON.parse(i),rawText:i}}function M2(r){var t,n,a,i;if(typeof(r==null?void 0:r.output_text)=="string")return r.output_text;const e=(i=(a=(n=(t=r==null?void 0:r.output)==null?void 0:t[0])==null?void 0:n.content)==null?void 0:a[0])==null?void 0:i.text;return typeof e=="string"?e:JSON.stringify(r)}async function J0(r){try{return await r.text()}catch{return""}}async function z2(r){try{const e=await fetch(`${r.baseUrl.replace(/\/$/,"")}/v1/models`,{method:"GET",headers:{"x-api-key":r.apiKey,"anthropic-version":"2023-06-01"},signal:r.signal});return e.ok?{ok:!0,message:" models "}:{ok:!1,message:`HTTP ${e.status}`,detail:await e1(e)}}catch(e){return{ok:!1,message:" CORS / Key / ",detail:String((e==null?void 0:e.message)??e)}}}async function F2(r){const e=`${r.baseUrl.replace(/\/$/,"")}/v1/messages`,t={model:r.model,max_tokens:r.maxTokens,temperature:r.temperature,top_p:r.topP,messages:[{role:"user",content:r.prompt}]},n=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":r.apiKey,"anthropic-version":"2023-06-01"},body:JSON.stringify(t),signal:r.signal});if(!n.ok)throw new Error(`Anthropic HTTP ${n.status}: ${await e1(n)}`);const a=await n.json(),i=$2(a);return{...JSON.parse(i),rawText:i}}function $2(r){var t;const e=r==null?void 0:r.content;if(Array.isArray(e)){const n=(t=e.find(a=>(a==null?void 0:a.type)==="text"))==null?void 0:t.text;if(typeof n=="string")return n}return typeof(r==null?void 0:r.text)=="string"?r.text:JSON.stringify(r)}async function e1(r){try{return await r.text()}catch{return""}}async function U2(r){try{const e=`${r.baseUrl.replace(/\/$/,"")}/v1beta/models?key=${encodeURIComponent(r.apiKey)}`,t=await fetch(e,{method:"GET",signal:r.signal});return t.ok?{ok:!0,message:" models "}:{ok:!1,message:`HTTP ${t.status}`,detail:await t1(t)}}catch(e){return{ok:!1,message:" CORS / Key / ",detail:String((e==null?void 0:e.message)??e)}}}async function j2(r){const e=r.model.startsWith("models/")?r.model:`models/${r.model}`,t=`${r.baseUrl.replace(/\/$/,"")}/v1beta/${e}:generateContent?key=${encodeURIComponent(r.apiKey)}`,n={contents:[{role:"user",parts:[{text:r.prompt}]}],generationConfig:{temperature:r.temperature,topP:r.topP,maxOutputTokens:r.maxTokens,responseMimeType:"application/json"}},a=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n),signal:r.signal});if(!a.ok)throw new Error(`Gemini HTTP ${a.status}: ${await t1(a)}`);const i=await a.json(),o=V2(i);return{...JSON.parse(o),rawText:o}}function V2(r){var t,n,a,i,o;const e=(o=(i=(a=(n=(t=r==null?void 0:r.candidates)==null?void 0:t[0])==null?void 0:n.content)==null?void 0:a.parts)==null?void 0:i[0])==null?void 0:o.text;return typeof e=="string"?e:JSON.stringify(r)}async function t1(r){try{return await r.text()}catch{return""}}function q2(r,e){const t=[];for(const n of r){const a=W2(n),i=(n.content??"").trim(),o=om(i)||i.length<20||!i;if(a&&o){const l=H2(e,a);if(l){t.push({id:n.id,patch:{content:l,title:G2(n,a)}});continue}}if(!a&&om(i)){const l=K2(e,i);l&&t.push({id:n.id,patch:{content:l}})}}return t}function W2(r){var e;return typeof((e=r.source)==null?void 0:e.latexLabel)=="string"&&r.source.latexLabel.trim()?r.source.latexLabel.trim():r.id.startsWith("tex:")?r.id.slice(4):null}function om(r){return r.includes("...")||r.includes("")||//.test(r)}function G2(r,e){const t=(r.title??"").trim(),n=t.length>=8&&/[\u4e00-\u9fff]/.test(t)&&!/(\(|\)|\\|=|\$|_|\^)/.test(t);return r.type==="Formula"&&(n||!t.includes(e))?`Formula (${e})`:r.title}function H2(r,e){const t=["theorem","lemma","corollary","definition","example","exercise","axiom","proposition","conclusion"];for(const i of t){const o=new RegExp(String.raw`\\begin\{${i}\}([\s\S]*?)\\end\{${i}\}`,"gi");for(const l of r.matchAll(o)){const c=(l[1]??"").trim();if(new RegExp(String.raw`\\label\{${lm(e)}\}`).test(c))return c}}const n=["equation","equation\\*","align","align\\*","gather","gather\\*","multline","multline\\*"];for(const i of n){const o=new RegExp(String.raw`\\begin\{${i}\}([\s\S]*?)\\end\{${i}\}`,"gi");for(const l of r.matchAll(o)){const c=(l[1]??"").trim();if(new RegExp(String.raw`\\label\{${lm(e)}\}`).test(c))return c}}const a=r.indexOf(`\\label{${e}}`);if(a>=0){const i=Math.max(0,a-4e3),o=Math.min(r.length,a+4e3);return r.slice(i,o).trim()}return null}function lm(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function K2(r,e){const t=e.includes("")?"":"...",n=e.split(t);if(n.length<2)return null;const a=n[0].trim(),i=n[n.length-1].trim();if(a.length<10||i.length<10)return null;const o=r.indexOf(a);if(o<0)return null;const l=o+a.length,c=r.indexOf(i,l);if(c<0)return null;const f=r.slice(o,c+i.length).trim();return f.length>6e4?null:f}async function X2(r){const e=N2(r.graph,160),t=D2({chunk:r.chunk,selectedEntities:r.selectedEntities,selectedRelations:r.selectedRelations,graphSummary:e,userNotes:r.userNotes}),n={baseUrl:r.baseUrl,apiKey:r.apiKey,model:r.model,prompt:t,temperature:r.temperature,topP:r.topP,maxTokens:r.maxTokens,signal:r.signal},a=r.protocol==="openai"?await O2(n):r.protocol==="anthropic"?await F2(n):await j2(n),i=Z2(a),o=nE(i,q2(i.nodes,r.chunk.text)),l=tE(o),{filtered:c,warnings:f}=Y2(l,r.chunk.text);return{...c,warnings:f}}function Z2(r){const e=Array.isArray(r==null?void 0:r.nodes)?r.nodes:[],t=Array.isArray(r==null?void 0:r.edges)?r.edges:[];return{nodes:e.filter(n=>n&&typeof n.id=="string"&&typeof n.type=="string"&&typeof n.title=="string").map(n=>({id:n.id,type:n.type,title:n.title,content:typeof n.content=="string"?n.content:void 0,source:typeof n.source=="object"?n.source:void 0,meta:typeof n.meta=="object"?n.meta:void 0})),edges:t.filter(n=>n&&typeof n.type=="string"&&typeof n.source=="string"&&typeof n.target=="string"&&n.source!==n.target).map(n=>({type:n.type,source:n.source,target:n.target,evidence:typeof n.evidence=="string"?n.evidence:void 0,meta:typeof n.meta=="object"?n.meta:void 0}))}}function Y2(r,e){var c,f;const t=[],n=[],a=new Set;for(const d of r.nodes){if(J2(d)){a.add(d.id),t.push(` trivial : ${d.type} ${d.title} (${d.id})`);continue}if(d.type==="Formula"){const h=(d.content??"").trim(),p=(d.title??"").trim(),g=Q2(h)||typeof((c=d.source)==null?void 0:c.latexLabel)=="string"&&d.source.latexLabel.length>0,m=p.length>=8&&/[\u4e00-\u9fff]/.test(p)&&!/(\(|\)|\\|=|\$|_|\^)/.test(p),w=p&&e.includes(p),b=!(typeof((f=d.source)==null?void 0:f.latexLabel)=="string"||d.id.startsWith("tex:"))&&eE(e,h);if(!g||b||m&&!w){a.add(d.id),t.push(` Formula: ${d.title} (${d.id})`);continue}}n.push(d)}const i=new Set(n.map(d=>d.id)),o=r.edges.filter(d=>i.has(d.source)&&i.has(d.target)),l=r.edges.length-o.length;return l>0&&t.push(` ${l} /`),{filtered:{nodes:n,edges:o},warnings:t}}function Q2(r){return r?!!(/\\begin\{(equation|align|aligned|gather|multline)\}/.test(r)||/\$\$[\s\S]*\$\$/.test(r)||/\\\[[\s\S]*\\\]/.test(r)||/\\(frac|sum|int|prod|mathbb|mathbf|mathrm|left|right|cdot|leq|geq|neq|infty)\b/.test(r)||/[=<>]/.test(r)&&/[a-zA-Z\\]/.test(r)||/[0-9]/.test(r)&&/[_^]/.test(r)):!1}function J2(r){var o;if(typeof((o=r.source)==null?void 0:o.latexLabel)=="string"||r.id.startsWith("tex:"))return!1;const t=(r.title??"").trim(),n=(r.content??"").trim();if(r.type==="Example"||r.type==="Exercise"||r.type==="Formula")return!1;const a=/^(Theorem|Lemma|Corollary|Definition|Axiom|Proposition|Conclusion)\s*\d+$/i.test(t),i=n.length>0&&n.length<40&&!/\\(begin|frac|sum|int|label|ref)\b/.test(n);return a&&i}function eE(r,e){return!e||e.length<8?!1:[...r.matchAll(/\\begin\{(example|exercise)\}([\s\S]*?)\\end\{\1\}/gi)].map(n=>n[2]??"").some(n=>n.includes(e))}function tE(r){const e=r.nodes.map(t=>{if(t.type!=="Example"&&t.type!=="Exercise")return t;const n=(t.content??"").trim();if(!n)return t;const a=rE(n);return a?{...t,meta:{...t.meta??{},problem:a.problem,solution:a.solution,answer:a.answer}}:t});return{...r,nodes:e}}function rE(r){var i,o;const e=r.match(/\\begin\{solution\}([\s\S]*?)\\end\{solution\}/i),t=r.match(/\\begin\{answer\}([\s\S]*?)\\end\{answer\}/i);if(e||t){const l=((i=e==null?void 0:e[1])==null?void 0:i.trim())??"",c=((o=t==null?void 0:t[1])==null?void 0:o.trim())??"";return{problem:r.replace((e==null?void 0:e[0])??"","").replace((t==null?void 0:t[0])??"","").trim(),solution:l,answer:c}}const n=r.search(/\n\s*(||)\s*[:]?\s*\n/),a=r.search(/\n\s*()\s*[:]?\s*\n/);if(n>=0||a>=0){const l=p=>p>=0?p:r.length,c=Math.min(l(n),l(a)),f=r.slice(0,c).trim();let d="",h="";if(n>=0){const p=a>=0&&a>n?a:r.length;d=r.slice(n,p).trim()}return a>=0&&(h=r.slice(a).trim()),{problem:f,solution:d,answer:h}}return null}function nE(r,e){if(!e.length)return r;const t=new Map(e.map(a=>[a.id,a.patch])),n=r.nodes.map(a=>{const i=t.get(a.id);return i?{...a,...i,meta:{...a.meta??{},...i.meta}}:a});return{...r,nodes:n}}const Du="latexkg:snapshots:index",Eo="latexkg:snapshot:";function r1(){const r=Wh(),e=[];for(const t of r){const n=localStorage.getItem(Eo+t);if(n)try{const a=JSON.parse(n);a&&typeof a.id=="string"&&typeof a.createdAt=="number"&&e.push({id:a.id,createdAt:a.createdAt,nodes:a.nodes??0,edges:a.edges??0,note:a.note})}catch{}}return e.sort((t,n)=>n.createdAt-t.createdAt),e}function aE(r){var n,a;const e=localStorage.getItem(Eo+r);if(!e)throw new Error("");const t=JSON.parse(e);if(!((n=t==null?void 0:t.graph)!=null&&n.nodes)||!((a=t==null?void 0:t.graph)!=null&&a.edges))throw new Error("");return t}function iE(r){const e=lE(),t=Date.now(),n={id:e,createdAt:t,nodes:r.graph.nodes.length,edges:r.graph.edges.length,note:r.note,graph:r.graph,schema:r.schema,view:r.view,llm:uE(r.llm)};localStorage.setItem(Eo+e,JSON.stringify(n));const a=Wh();return a.push(e),localStorage.setItem(Du,JSON.stringify(a)),e}function sE(){const r=Wh();for(const e of r)localStorage.removeItem(Eo+e);localStorage.removeItem(Du)}function oE(){const r=r1();if(r.length<=1)return;const e=r[0].id;for(const t of r.slice(1))localStorage.removeItem(Eo+t.id);localStorage.setItem(Du,JSON.stringify([e]))}function Wh(){const r=localStorage.getItem(Du);if(!r)return[];try{const e=JSON.parse(r);if(Array.isArray(e))return e.filter(t=>typeof t=="string")}catch{}return[]}function lE(){return`${Date.now()}-${Math.random().toString(16).slice(2)}`}function uE(r){const{apiKey:e,...t}=r;return t}async function cE(r){var a,i,o;const e=Ke.getState();e.setError(null),e.setInfo(null),e.setProcessing({status:"extracting",totalChunks:r.chunks.length,doneChunks:0});const t=new AbortController;e.setProcessing({abortController:t});const n=new Map;for(const l of e.graph.nodes){const c=typeof((a=l.source)==null?void 0:a.latexLabel)=="string"?l.source.latexLabel:null;c&&n.set(c,l.id)}try{if(!(r.llm.enabled&&r.llm.apiKey.trim().length>0)){for(let x=0;x<r.chunks.length;x++){if(t.signal.aborted){Ke.getState().setProcessing({status:"stopped",abortController:void 0});return}const b=r.chunks[x];e.setProcessing({currentChunkTitle:b.title});const E=_2({chunk:b,selectedEntities:r.schema.entityTypes,selectedRelations:r.schema.relationTypes,knownLabelToNodeId:n});for(const _ of E.nodes){const C=typeof((i=_==null?void 0:_.source)==null?void 0:i.latexLabel)=="string"?_.source.latexLabel:null;C&&n.set(C,_.id)}e.mergeGraph({nodes:E.nodes,edges:E.edges}),e.setProcessing({doneChunks:x+1})}e.setProcessing({status:"done",abortController:void 0}),e.setInfo("");return}const c=Math.max(1,Math.min(32,Math.floor(r.llm.parallelism||1))),f=new Map;let d=0,h=0,p=0;const g=[],m=async x=>{const b=r.chunks[x],E=Ke.getState().graph;return await X2({protocol:r.llm.protocol,baseUrl:r.llm.baseUrl,apiKey:r.llm.apiKey,model:r.llm.model,temperature:r.llm.temperature,topP:r.llm.topP,maxTokens:r.llm.maxTokens,chunk:b,selectedEntities:r.schema.entityTypes,selectedRelations:r.schema.relationTypes,graph:E,userNotes:r.schema.notes??"",signal:t.signal})},w=async()=>{for(;!t.signal.aborted&&d<r.chunks.length&&p<c;){const x=d++;p++,e.setProcessing({currentChunkTitle:r.chunks[x].title}),m(x).then(b=>{f.set(x,b)}).catch(b=>{f.set(x,{nodes:[],edges:[],warnings:[`chunk ${x} : ${String((b==null?void 0:b.message)??b)}`]})}).finally(()=>{p--})}};for(;!t.signal.aborted&&h<r.chunks.length;){await w();const x=f.get(h);if(!x){await fE(60);continue}f.delete(h);for(const b of x.nodes??[]){const E=typeof((o=b==null?void 0:b.source)==null?void 0:o.latexLabel)=="string"?b.source.latexLabel:null;E&&typeof(b==null?void 0:b.id)=="string"&&n.set(E,b.id)}if(Array.isArray(x.warnings)&&g.push(...x.warnings),e.mergeGraph({nodes:x.nodes,edges:x.edges}),h++,e.setProcessing({doneChunks:h}),h%10===0)try{const b=Ke.getState();iE({graph:b.graph,schema:b.schema,view:b.view,llm:b.llm,note:`auto@${h}`}),b.setInfo(`LLM  ${h} `)}catch{}}if(t.signal.aborted){e.setProcessing({status:"stopped",abortController:void 0});return}e.setProcessing({status:"done",abortController:void 0}),e.setInfo(g.length?`LLM/${g.slice(0,2).join("")}${g.length>2?` ${g.length} `:""}`:"LLM")}catch(l){if(t.signal.aborted){e.setProcessing({status:"stopped",abortController:void 0});return}e.setProcessing({status:"error",abortController:void 0}),e.setError(String((l==null?void 0:l.message)??l))}}function fE(r){return new Promise(e=>setTimeout(e,r))}function dE(){const r=Ke(d=>d.latexFiles),e=Ke(d=>d.processing);Ke(d=>d.schema),Ke(d=>d.llm);const[t,n]=Et.useState([]),[a,i]=Et.useState(2e4),o=e.status!=="idle"&&e.status!=="done"&&e.status!=="stopped"&&e.status!=="error",l=Et.useMemo(()=>` .tex: ${r.length}`,[r.length]);async function c(d){if(!d)return;Ke.getState().setError(null),Ke.getState().setInfo(null);const h=Array.from(d),{latexFiles:p,assets:g,warnings:m}=await v2({files:h});n(m),Ke.getState().setLatexFiles(p),Ke.getState().setAssets(g),Ke.getState().setInfo(` ${p.length}  .tex  ${Object.keys(g).length} `)}async function f(){const d=Ke.getState();if(!d.latexFiles.length){d.setError(" .tex  zip/");return}d.setProcessing({status:"chunking",totalChunks:0,doneChunks:0});const h=m2(d.latexFiles,{maxChars:a});d.setInfo(`${h.length} maxChars=${a}`),await cE({chunks:h,schema:d.schema,llm:d.llm})}return ue.jsxs("div",{className:"card",children:[ue.jsx("div",{className:"h1",children:" LaTeX / zip / "}),ue.jsx("div",{className:"muted",children:" 1 zip .tex   2  3"}),ue.jsx("div",{className:"label",children:"zip / "}),ue.jsx("input",{className:"input",type:"file",multiple:!0,onChange:d=>c(d.target.files),disabled:o}),ue.jsx("div",{className:"label",children:""}),ue.jsx("input",{className:"input",type:"file",multiple:!0,webkitdirectory:"true",directory:"true",onChange:d=>c(d.target.files),disabled:o}),ue.jsx("div",{className:"label",children:""}),ue.jsx("input",{className:"input mono",type:"number",min:1500,step:500,value:a,onChange:d=>i(Number(d.target.value)),disabled:o}),ue.jsx("div",{className:"muted",style:{marginTop:8},children:l}),t.length?ue.jsxs("div",{className:"muted",style:{marginTop:8},children:[ue.jsx("b",{children:""}),"",ue.jsxs("ul",{style:{margin:"6px 0 0 18px"},children:[t.slice(0,6).map((d,h)=>ue.jsx("li",{children:d},h)),t.length>6?ue.jsxs("li",{children:[" ",t.length-6," "]}):null]})]}):null,ue.jsxs("div",{className:"row",style:{marginTop:12},children:[ue.jsx("button",{className:"btn primary",onClick:f,disabled:o,children:""}),ue.jsx("button",{className:"btn danger",onClick:()=>Ke.getState().stopProcessing(),disabled:e.status==="idle",children:""})]}),ue.jsxs("div",{className:"muted",style:{marginTop:8},children:["",ue.jsx("span",{className:"mono",children:e.currentChunkTitle??"-"})]})]})}function hE(){const r=Ke(h=>h.schema),e=Ke(h=>h.llm),t=Ke(h=>h.processing),[n,a]=Et.useState(!1),[i,o]=Et.useState(null),l=t.status!=="idle"&&t.status!=="done"&&t.status!=="stopped"&&t.status!=="error",c=Et.useMemo(()=>new Set(r.entityTypes),[r.entityTypes]),f=Et.useMemo(()=>new Set(r.relationTypes),[r.relationTypes]);async function d(){a(!0),o(null);const h=new AbortController;try{const p=e.baseUrl.trim(),g=e.apiKey.trim();if(!p||!g){o(" Base URL  API Key");return}const m=e.protocol==="openai"?await L2({baseUrl:p,apiKey:g,model:e.model,signal:h.signal}):e.protocol==="anthropic"?await z2({baseUrl:p,apiKey:g,model:e.model,signal:h.signal}):await U2({baseUrl:p,apiKey:g,model:e.model,signal:h.signal});o(m.ok?`OK: ${m.message}`:`FAIL: ${m.message}${m.detail?`
${m.detail}`:""}`)}finally{a(!1)}}return ue.jsxs("div",{className:"card",children:[ue.jsx("div",{className:"h1",children:"/ + LLM "}),ue.jsxs("div",{className:"muted",children:["/LLM  LLM ",ue.jsx("br",{})," LLM  CORS/Key  Key"]}),ue.jsx("div",{className:"label",children:"Entities"}),ue.jsx("div",{className:"row",children:Z0.map(h=>ue.jsxs("label",{className:"pill",style:{cursor:"pointer"},children:[ue.jsx("input",{type:"checkbox",checked:c.has(h),onChange:p=>{const g=new Set(r.entityTypes);p.target.checked?g.add(h):g.delete(h),Ke.getState().setSchema({entityTypes:[...g.values()]})},disabled:l,style:{marginRight:6}}),h]},h))}),ue.jsx("div",{className:"label",children:"Relations"}),ue.jsx("div",{className:"row",children:Y0.map(h=>ue.jsxs("label",{className:"pill",style:{cursor:"pointer"},children:[ue.jsx("input",{type:"checkbox",checked:f.has(h),onChange:p=>{const g=new Set(r.relationTypes);p.target.checked?g.add(h):g.delete(h),Ke.getState().setSchema({relationTypes:[...g.values()]})},disabled:l,style:{marginRight:6}}),h]},h))}),ue.jsx("div",{className:"label",children:" LLM "}),ue.jsx("textarea",{className:"input",value:r.notes??"",onChange:h=>Ke.getState().setSchema({notes:h.target.value}),disabled:l,placeholder:"DerivedFrom..."}),ue.jsx("div",{className:"label",children:" LLM"}),ue.jsxs("label",{className:"pill",style:{cursor:"pointer"},children:[ue.jsx("input",{type:"checkbox",checked:e.enabled,onChange:h=>Ke.getState().setLlm({enabled:h.target.checked}),disabled:l,style:{marginRight:6}})," LLM "]}),e.enabled?ue.jsxs(ue.Fragment,{children:[ue.jsx("div",{className:"label",children:"openai / claude / gemini"}),ue.jsxs("select",{className:"input",value:e.protocol,onChange:h=>{const p=h.target.value,g=p==="openai"?{baseUrl:"https://api.openai.com/v1",model:"gpt-5"}:p==="anthropic"?{baseUrl:"https://api.anthropic.com",model:"claude-3-5-sonnet-latest"}:{baseUrl:"https://generativelanguage.googleapis.com",model:"gemini-1.5-pro"};Ke.getState().setLlm({protocol:p,...g})},disabled:l,children:[ue.jsx("option",{value:"openai",children:"openai"}),ue.jsx("option",{value:"anthropic",children:"claude (anthropic)"}),ue.jsx("option",{value:"gemini",children:"gemini"})]}),ue.jsx("div",{className:"label",children:"Base URL"}),ue.jsx("input",{className:"input mono",value:e.baseUrl,onChange:h=>Ke.getState().setLlm({baseUrl:h.target.value}),disabled:l,placeholder:" https://api.openai.com/v1"}),ue.jsx("div",{className:"label",children:"Model"}),ue.jsx("input",{className:"input mono",value:e.model,onChange:h=>Ke.getState().setLlm({model:h.target.value}),disabled:l,placeholder:" gpt-5 / claude-... / gemini-..."}),ue.jsx("div",{className:"label",children:"API Key"}),ue.jsx("input",{className:"input mono",value:e.apiKey,onChange:h=>Ke.getState().setLlm({apiKey:h.target.value}),disabled:l,placeholder:""}),ue.jsxs("div",{className:"row",style:{marginTop:10},children:[ue.jsxs("div",{style:{flex:1,minWidth:160},children:[ue.jsx("div",{className:"label",children:"max_tokens 100000"}),ue.jsx("input",{className:"input mono",type:"number",min:256,step:256,value:e.maxTokens,onChange:h=>Ke.getState().setLlm({maxTokens:Number(h.target.value)}),disabled:l}),ue.jsx("div",{className:"muted",style:{marginTop:6},children:""})]}),ue.jsxs("div",{style:{flex:1,minWidth:160},children:[ue.jsx("div",{className:"label",children:"LLM "}),ue.jsx("input",{className:"input mono",type:"number",min:1,max:32,step:1,value:e.parallelism,onChange:h=>Ke.getState().setLlm({parallelism:Number(h.target.value)}),disabled:l}),ue.jsx("div",{className:"muted",style:{marginTop:6},children:"/ 2-6"})]})]}),ue.jsxs("div",{className:"row",style:{marginTop:10},children:[ue.jsxs("div",{style:{flex:1,minWidth:160},children:[ue.jsx("div",{className:"label",children:"temperature"}),ue.jsx("input",{className:"input mono",type:"number",step:.05,min:0,max:2,value:e.temperature,onChange:h=>Ke.getState().setLlm({temperature:Number(h.target.value)}),disabled:l})]}),ue.jsxs("div",{style:{flex:1,minWidth:160},children:[ue.jsx("div",{className:"label",children:"top_p"}),ue.jsx("input",{className:"input mono",type:"number",step:.05,min:0,max:1,value:e.topP,onChange:h=>Ke.getState().setLlm({topP:Number(h.target.value)}),disabled:l})]})]}),ue.jsx("div",{className:"row",style:{marginTop:12},children:ue.jsx("button",{className:"btn ok",onClick:d,disabled:n||l,children:n?"...":""})}),i?ue.jsxs(ue.Fragment,{children:[ue.jsx("div",{className:"label",children:""}),ue.jsx("textarea",{className:"input mono",value:i,readOnly:!0})]}):null]}):null]})}var Gf={},js={},um;function vE(){if(um)return js;um=1,js.byteLength=l,js.toByteArray=f,js.fromByteArray=p;for(var r=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,i=n.length;a<i;++a)r[a]=n[a],e[n.charCodeAt(a)]=a;e[45]=62,e[95]=63;function o(g){var m=g.length;if(m%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var w=g.indexOf("=");w===-1&&(w=m);var x=w===m?0:4-w%4;return[w,x]}function l(g){var m=o(g),w=m[0],x=m[1];return(w+x)*3/4-x}function c(g,m,w){return(m+w)*3/4-w}function f(g){var m,w=o(g),x=w[0],b=w[1],E=new t(c(g,x,b)),_=0,C=b>0?x-4:x,B;for(B=0;B<C;B+=4)m=e[g.charCodeAt(B)]<<18|e[g.charCodeAt(B+1)]<<12|e[g.charCodeAt(B+2)]<<6|e[g.charCodeAt(B+3)],E[_++]=m>>16&255,E[_++]=m>>8&255,E[_++]=m&255;return b===2&&(m=e[g.charCodeAt(B)]<<2|e[g.charCodeAt(B+1)]>>4,E[_++]=m&255),b===1&&(m=e[g.charCodeAt(B)]<<10|e[g.charCodeAt(B+1)]<<4|e[g.charCodeAt(B+2)]>>2,E[_++]=m>>8&255,E[_++]=m&255),E}function d(g){return r[g>>18&63]+r[g>>12&63]+r[g>>6&63]+r[g&63]}function h(g,m,w){for(var x,b=[],E=m;E<w;E+=3)x=(g[E]<<16&16711680)+(g[E+1]<<8&65280)+(g[E+2]&255),b.push(d(x));return b.join("")}function p(g){for(var m,w=g.length,x=w%3,b=[],E=16383,_=0,C=w-x;_<C;_+=E)b.push(h(g,_,_+E>C?C:_+E));return x===1?(m=g[w-1],b.push(r[m>>2]+r[m<<4&63]+"==")):x===2&&(m=(g[w-2]<<8)+g[w-1],b.push(r[m>>10]+r[m>>4&63]+r[m<<2&63]+"=")),b.join("")}return js}var jl={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var cm;function pE(){return cm||(cm=1,jl.read=function(r,e,t,n,a){var i,o,l=a*8-n-1,c=(1<<l)-1,f=c>>1,d=-7,h=t?a-1:0,p=t?-1:1,g=r[e+h];for(h+=p,i=g&(1<<-d)-1,g>>=-d,d+=l;d>0;i=i*256+r[e+h],h+=p,d-=8);for(o=i&(1<<-d)-1,i>>=-d,d+=n;d>0;o=o*256+r[e+h],h+=p,d-=8);if(i===0)i=1-f;else{if(i===c)return o?NaN:(g?-1:1)*(1/0);o=o+Math.pow(2,n),i=i-f}return(g?-1:1)*o*Math.pow(2,i-n)},jl.write=function(r,e,t,n,a,i){var o,l,c,f=i*8-a-1,d=(1<<f)-1,h=d>>1,p=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=n?0:i-1,m=n?1:-1,w=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(l=isNaN(e)?1:0,o=d):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+h>=1?e+=p/c:e+=p*Math.pow(2,1-h),e*c>=2&&(o++,c/=2),o+h>=d?(l=0,o=d):o+h>=1?(l=(e*c-1)*Math.pow(2,a),o=o+h):(l=e*Math.pow(2,h-1)*Math.pow(2,a),o=0));a>=8;r[t+g]=l&255,g+=m,l/=256,a-=8);for(o=o<<a|l,f+=a;f>0;r[t+g]=o&255,g+=m,o/=256,f-=8);r[t+g-m]|=w*128}),jl}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var fm;function gE(){return fm||(fm=1,(function(r){const e=vE(),t=pE(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=l,r.SlowBuffer=E,r.INSPECT_MAX_BYTES=50;const a=2147483647;r.kMaxLength=a,l.TYPED_ARRAY_SUPPORT=i(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const j=new Uint8Array(1),k={foo:function(){return 42}};return Object.setPrototypeOf(k,Uint8Array.prototype),Object.setPrototypeOf(j,k),j.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function o(j){if(j>a)throw new RangeError('The value "'+j+'" is invalid for option "size"');const k=new Uint8Array(j);return Object.setPrototypeOf(k,l.prototype),k}function l(j,k,R){if(typeof j=="number"){if(typeof k=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return h(j)}return c(j,k,R)}l.poolSize=8192;function c(j,k,R){if(typeof j=="string")return p(j,k);if(ArrayBuffer.isView(j))return m(j);if(j==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof j);if(se(j,ArrayBuffer)||j&&se(j.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(se(j,SharedArrayBuffer)||j&&se(j.buffer,SharedArrayBuffer)))return w(j,k,R);if(typeof j=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const H=j.valueOf&&j.valueOf();if(H!=null&&H!==j)return l.from(H,k,R);const ee=x(j);if(ee)return ee;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof j[Symbol.toPrimitive]=="function")return l.from(j[Symbol.toPrimitive]("string"),k,R);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof j)}l.from=function(j,k,R){return c(j,k,R)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array);function f(j){if(typeof j!="number")throw new TypeError('"size" argument must be of type number');if(j<0)throw new RangeError('The value "'+j+'" is invalid for option "size"')}function d(j,k,R){return f(j),j<=0?o(j):k!==void 0?typeof R=="string"?o(j).fill(k,R):o(j).fill(k):o(j)}l.alloc=function(j,k,R){return d(j,k,R)};function h(j){return f(j),o(j<0?0:b(j)|0)}l.allocUnsafe=function(j){return h(j)},l.allocUnsafeSlow=function(j){return h(j)};function p(j,k){if((typeof k!="string"||k==="")&&(k="utf8"),!l.isEncoding(k))throw new TypeError("Unknown encoding: "+k);const R=_(j,k)|0;let H=o(R);const ee=H.write(j,k);return ee!==R&&(H=H.slice(0,ee)),H}function g(j){const k=j.length<0?0:b(j.length)|0,R=o(k);for(let H=0;H<k;H+=1)R[H]=j[H]&255;return R}function m(j){if(se(j,Uint8Array)){const k=new Uint8Array(j);return w(k.buffer,k.byteOffset,k.byteLength)}return g(j)}function w(j,k,R){if(k<0||j.byteLength<k)throw new RangeError('"offset" is outside of buffer bounds');if(j.byteLength<k+(R||0))throw new RangeError('"length" is outside of buffer bounds');let H;return k===void 0&&R===void 0?H=new Uint8Array(j):R===void 0?H=new Uint8Array(j,k):H=new Uint8Array(j,k,R),Object.setPrototypeOf(H,l.prototype),H}function x(j){if(l.isBuffer(j)){const k=b(j.length)|0,R=o(k);return R.length===0||j.copy(R,0,0,k),R}if(j.length!==void 0)return typeof j.length!="number"||Be(j.length)?o(0):g(j);if(j.type==="Buffer"&&Array.isArray(j.data))return g(j.data)}function b(j){if(j>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return j|0}function E(j){return+j!=j&&(j=0),l.alloc(+j)}l.isBuffer=function(k){return k!=null&&k._isBuffer===!0&&k!==l.prototype},l.compare=function(k,R){if(se(k,Uint8Array)&&(k=l.from(k,k.offset,k.byteLength)),se(R,Uint8Array)&&(R=l.from(R,R.offset,R.byteLength)),!l.isBuffer(k)||!l.isBuffer(R))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(k===R)return 0;let H=k.length,ee=R.length;for(let J=0,O=Math.min(H,ee);J<O;++J)if(k[J]!==R[J]){H=k[J],ee=R[J];break}return H<ee?-1:ee<H?1:0},l.isEncoding=function(k){switch(String(k).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(k,R){if(!Array.isArray(k))throw new TypeError('"list" argument must be an Array of Buffers');if(k.length===0)return l.alloc(0);let H;if(R===void 0)for(R=0,H=0;H<k.length;++H)R+=k[H].length;const ee=l.allocUnsafe(R);let J=0;for(H=0;H<k.length;++H){let O=k[H];if(se(O,Uint8Array))J+O.length>ee.length?(l.isBuffer(O)||(O=l.from(O)),O.copy(ee,J)):Uint8Array.prototype.set.call(ee,O,J);else if(l.isBuffer(O))O.copy(ee,J);else throw new TypeError('"list" argument must be an Array of Buffers');J+=O.length}return ee};function _(j,k){if(l.isBuffer(j))return j.length;if(ArrayBuffer.isView(j)||se(j,ArrayBuffer))return j.byteLength;if(typeof j!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof j);const R=j.length,H=arguments.length>2&&arguments[2]===!0;if(!H&&R===0)return 0;let ee=!1;for(;;)switch(k){case"ascii":case"latin1":case"binary":return R;case"utf8":case"utf-8":return Y(j).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R*2;case"hex":return R>>>1;case"base64":return ve(j).length;default:if(ee)return H?-1:Y(j).length;k=(""+k).toLowerCase(),ee=!0}}l.byteLength=_;function C(j,k,R){let H=!1;if((k===void 0||k<0)&&(k=0),k>this.length||((R===void 0||R>this.length)&&(R=this.length),R<=0)||(R>>>=0,k>>>=0,R<=k))return"";for(j||(j="utf8");;)switch(j){case"hex":return Z(this,k,R);case"utf8":case"utf-8":return T(this,k,R);case"ascii":return W(this,k,R);case"latin1":case"binary":return X(this,k,R);case"base64":return F(this,k,R);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return te(this,k,R);default:if(H)throw new TypeError("Unknown encoding: "+j);j=(j+"").toLowerCase(),H=!0}}l.prototype._isBuffer=!0;function B(j,k,R){const H=j[k];j[k]=j[R],j[R]=H}l.prototype.swap16=function(){const k=this.length;if(k%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let R=0;R<k;R+=2)B(this,R,R+1);return this},l.prototype.swap32=function(){const k=this.length;if(k%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let R=0;R<k;R+=4)B(this,R,R+3),B(this,R+1,R+2);return this},l.prototype.swap64=function(){const k=this.length;if(k%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let R=0;R<k;R+=8)B(this,R,R+7),B(this,R+1,R+6),B(this,R+2,R+5),B(this,R+3,R+4);return this},l.prototype.toString=function(){const k=this.length;return k===0?"":arguments.length===0?T(this,0,k):C.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(k){if(!l.isBuffer(k))throw new TypeError("Argument must be a Buffer");return this===k?!0:l.compare(this,k)===0},l.prototype.inspect=function(){let k="";const R=r.INSPECT_MAX_BYTES;return k=this.toString("hex",0,R).replace(/(.{2})/g,"$1 ").trim(),this.length>R&&(k+=" ... "),"<Buffer "+k+">"},n&&(l.prototype[n]=l.prototype.inspect),l.prototype.compare=function(k,R,H,ee,J){if(se(k,Uint8Array)&&(k=l.from(k,k.offset,k.byteLength)),!l.isBuffer(k))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof k);if(R===void 0&&(R=0),H===void 0&&(H=k?k.length:0),ee===void 0&&(ee=0),J===void 0&&(J=this.length),R<0||H>k.length||ee<0||J>this.length)throw new RangeError("out of range index");if(ee>=J&&R>=H)return 0;if(ee>=J)return-1;if(R>=H)return 1;if(R>>>=0,H>>>=0,ee>>>=0,J>>>=0,this===k)return 0;let O=J-ee,ce=H-R;const _e=Math.min(O,ce),we=this.slice(ee,J),ke=k.slice(R,H);for(let Oe=0;Oe<_e;++Oe)if(we[Oe]!==ke[Oe]){O=we[Oe],ce=ke[Oe];break}return O<ce?-1:ce<O?1:0};function L(j,k,R,H,ee){if(j.length===0)return-1;if(typeof R=="string"?(H=R,R=0):R>2147483647?R=2147483647:R<-2147483648&&(R=-2147483648),R=+R,Be(R)&&(R=ee?0:j.length-1),R<0&&(R=j.length+R),R>=j.length){if(ee)return-1;R=j.length-1}else if(R<0)if(ee)R=0;else return-1;if(typeof k=="string"&&(k=l.from(k,H)),l.isBuffer(k))return k.length===0?-1:A(j,k,R,H,ee);if(typeof k=="number")return k=k&255,typeof Uint8Array.prototype.indexOf=="function"?ee?Uint8Array.prototype.indexOf.call(j,k,R):Uint8Array.prototype.lastIndexOf.call(j,k,R):A(j,[k],R,H,ee);throw new TypeError("val must be string, number or Buffer")}function A(j,k,R,H,ee){let J=1,O=j.length,ce=k.length;if(H!==void 0&&(H=String(H).toLowerCase(),H==="ucs2"||H==="ucs-2"||H==="utf16le"||H==="utf-16le")){if(j.length<2||k.length<2)return-1;J=2,O/=2,ce/=2,R/=2}function _e(ke,Oe){return J===1?ke[Oe]:ke.readUInt16BE(Oe*J)}let we;if(ee){let ke=-1;for(we=R;we<O;we++)if(_e(j,we)===_e(k,ke===-1?0:we-ke)){if(ke===-1&&(ke=we),we-ke+1===ce)return ke*J}else ke!==-1&&(we-=we-ke),ke=-1}else for(R+ce>O&&(R=O-ce),we=R;we>=0;we--){let ke=!0;for(let Oe=0;Oe<ce;Oe++)if(_e(j,we+Oe)!==_e(k,Oe)){ke=!1;break}if(ke)return we}return-1}l.prototype.includes=function(k,R,H){return this.indexOf(k,R,H)!==-1},l.prototype.indexOf=function(k,R,H){return L(this,k,R,H,!0)},l.prototype.lastIndexOf=function(k,R,H){return L(this,k,R,H,!1)};function z(j,k,R,H){R=Number(R)||0;const ee=j.length-R;H?(H=Number(H),H>ee&&(H=ee)):H=ee;const J=k.length;H>J/2&&(H=J/2);let O;for(O=0;O<H;++O){const ce=parseInt(k.substr(O*2,2),16);if(Be(ce))return O;j[R+O]=ce}return O}function M(j,k,R,H){return ye(Y(k,j.length-R),j,R,H)}function U(j,k,R,H){return ye(K(k),j,R,H)}function q(j,k,R,H){return ye(ve(k),j,R,H)}function D(j,k,R,H){return ye(ae(k,j.length-R),j,R,H)}l.prototype.write=function(k,R,H,ee){if(R===void 0)ee="utf8",H=this.length,R=0;else if(H===void 0&&typeof R=="string")ee=R,H=this.length,R=0;else if(isFinite(R))R=R>>>0,isFinite(H)?(H=H>>>0,ee===void 0&&(ee="utf8")):(ee=H,H=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const J=this.length-R;if((H===void 0||H>J)&&(H=J),k.length>0&&(H<0||R<0)||R>this.length)throw new RangeError("Attempt to write outside buffer bounds");ee||(ee="utf8");let O=!1;for(;;)switch(ee){case"hex":return z(this,k,R,H);case"utf8":case"utf-8":return M(this,k,R,H);case"ascii":case"latin1":case"binary":return U(this,k,R,H);case"base64":return q(this,k,R,H);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,k,R,H);default:if(O)throw new TypeError("Unknown encoding: "+ee);ee=(""+ee).toLowerCase(),O=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function F(j,k,R){return k===0&&R===j.length?e.fromByteArray(j):e.fromByteArray(j.slice(k,R))}function T(j,k,R){R=Math.min(j.length,R);const H=[];let ee=k;for(;ee<R;){const J=j[ee];let O=null,ce=J>239?4:J>223?3:J>191?2:1;if(ee+ce<=R){let _e,we,ke,Oe;switch(ce){case 1:J<128&&(O=J);break;case 2:_e=j[ee+1],(_e&192)===128&&(Oe=(J&31)<<6|_e&63,Oe>127&&(O=Oe));break;case 3:_e=j[ee+1],we=j[ee+2],(_e&192)===128&&(we&192)===128&&(Oe=(J&15)<<12|(_e&63)<<6|we&63,Oe>2047&&(Oe<55296||Oe>57343)&&(O=Oe));break;case 4:_e=j[ee+1],we=j[ee+2],ke=j[ee+3],(_e&192)===128&&(we&192)===128&&(ke&192)===128&&(Oe=(J&15)<<18|(_e&63)<<12|(we&63)<<6|ke&63,Oe>65535&&Oe<1114112&&(O=Oe))}}O===null?(O=65533,ce=1):O>65535&&(O-=65536,H.push(O>>>10&1023|55296),O=56320|O&1023),H.push(O),ee+=ce}return Q(H)}const G=4096;function Q(j){const k=j.length;if(k<=G)return String.fromCharCode.apply(String,j);let R="",H=0;for(;H<k;)R+=String.fromCharCode.apply(String,j.slice(H,H+=G));return R}function W(j,k,R){let H="";R=Math.min(j.length,R);for(let ee=k;ee<R;++ee)H+=String.fromCharCode(j[ee]&127);return H}function X(j,k,R){let H="";R=Math.min(j.length,R);for(let ee=k;ee<R;++ee)H+=String.fromCharCode(j[ee]);return H}function Z(j,k,R){const H=j.length;(!k||k<0)&&(k=0),(!R||R<0||R>H)&&(R=H);let ee="";for(let J=k;J<R;++J)ee+=Ie[j[J]];return ee}function te(j,k,R){const H=j.slice(k,R);let ee="";for(let J=0;J<H.length-1;J+=2)ee+=String.fromCharCode(H[J]+H[J+1]*256);return ee}l.prototype.slice=function(k,R){const H=this.length;k=~~k,R=R===void 0?H:~~R,k<0?(k+=H,k<0&&(k=0)):k>H&&(k=H),R<0?(R+=H,R<0&&(R=0)):R>H&&(R=H),R<k&&(R=k);const ee=this.subarray(k,R);return Object.setPrototypeOf(ee,l.prototype),ee};function N(j,k,R){if(j%1!==0||j<0)throw new RangeError("offset is not uint");if(j+k>R)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(k,R,H){k=k>>>0,R=R>>>0,H||N(k,R,this.length);let ee=this[k],J=1,O=0;for(;++O<R&&(J*=256);)ee+=this[k+O]*J;return ee},l.prototype.readUintBE=l.prototype.readUIntBE=function(k,R,H){k=k>>>0,R=R>>>0,H||N(k,R,this.length);let ee=this[k+--R],J=1;for(;R>0&&(J*=256);)ee+=this[k+--R]*J;return ee},l.prototype.readUint8=l.prototype.readUInt8=function(k,R){return k=k>>>0,R||N(k,1,this.length),this[k]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(k,R){return k=k>>>0,R||N(k,2,this.length),this[k]|this[k+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(k,R){return k=k>>>0,R||N(k,2,this.length),this[k]<<8|this[k+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(k,R){return k=k>>>0,R||N(k,4,this.length),(this[k]|this[k+1]<<8|this[k+2]<<16)+this[k+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(k,R){return k=k>>>0,R||N(k,4,this.length),this[k]*16777216+(this[k+1]<<16|this[k+2]<<8|this[k+3])},l.prototype.readBigUInt64LE=Ae(function(k){k=k>>>0,Re(k,"offset");const R=this[k],H=this[k+7];(R===void 0||H===void 0)&&I(k,this.length-8);const ee=R+this[++k]*2**8+this[++k]*2**16+this[++k]*2**24,J=this[++k]+this[++k]*2**8+this[++k]*2**16+H*2**24;return BigInt(ee)+(BigInt(J)<<BigInt(32))}),l.prototype.readBigUInt64BE=Ae(function(k){k=k>>>0,Re(k,"offset");const R=this[k],H=this[k+7];(R===void 0||H===void 0)&&I(k,this.length-8);const ee=R*2**24+this[++k]*2**16+this[++k]*2**8+this[++k],J=this[++k]*2**24+this[++k]*2**16+this[++k]*2**8+H;return(BigInt(ee)<<BigInt(32))+BigInt(J)}),l.prototype.readIntLE=function(k,R,H){k=k>>>0,R=R>>>0,H||N(k,R,this.length);let ee=this[k],J=1,O=0;for(;++O<R&&(J*=256);)ee+=this[k+O]*J;return J*=128,ee>=J&&(ee-=Math.pow(2,8*R)),ee},l.prototype.readIntBE=function(k,R,H){k=k>>>0,R=R>>>0,H||N(k,R,this.length);let ee=R,J=1,O=this[k+--ee];for(;ee>0&&(J*=256);)O+=this[k+--ee]*J;return J*=128,O>=J&&(O-=Math.pow(2,8*R)),O},l.prototype.readInt8=function(k,R){return k=k>>>0,R||N(k,1,this.length),this[k]&128?(255-this[k]+1)*-1:this[k]},l.prototype.readInt16LE=function(k,R){k=k>>>0,R||N(k,2,this.length);const H=this[k]|this[k+1]<<8;return H&32768?H|4294901760:H},l.prototype.readInt16BE=function(k,R){k=k>>>0,R||N(k,2,this.length);const H=this[k+1]|this[k]<<8;return H&32768?H|4294901760:H},l.prototype.readInt32LE=function(k,R){return k=k>>>0,R||N(k,4,this.length),this[k]|this[k+1]<<8|this[k+2]<<16|this[k+3]<<24},l.prototype.readInt32BE=function(k,R){return k=k>>>0,R||N(k,4,this.length),this[k]<<24|this[k+1]<<16|this[k+2]<<8|this[k+3]},l.prototype.readBigInt64LE=Ae(function(k){k=k>>>0,Re(k,"offset");const R=this[k],H=this[k+7];(R===void 0||H===void 0)&&I(k,this.length-8);const ee=this[k+4]+this[k+5]*2**8+this[k+6]*2**16+(H<<24);return(BigInt(ee)<<BigInt(32))+BigInt(R+this[++k]*2**8+this[++k]*2**16+this[++k]*2**24)}),l.prototype.readBigInt64BE=Ae(function(k){k=k>>>0,Re(k,"offset");const R=this[k],H=this[k+7];(R===void 0||H===void 0)&&I(k,this.length-8);const ee=(R<<24)+this[++k]*2**16+this[++k]*2**8+this[++k];return(BigInt(ee)<<BigInt(32))+BigInt(this[++k]*2**24+this[++k]*2**16+this[++k]*2**8+H)}),l.prototype.readFloatLE=function(k,R){return k=k>>>0,R||N(k,4,this.length),t.read(this,k,!0,23,4)},l.prototype.readFloatBE=function(k,R){return k=k>>>0,R||N(k,4,this.length),t.read(this,k,!1,23,4)},l.prototype.readDoubleLE=function(k,R){return k=k>>>0,R||N(k,8,this.length),t.read(this,k,!0,52,8)},l.prototype.readDoubleBE=function(k,R){return k=k>>>0,R||N(k,8,this.length),t.read(this,k,!1,52,8)};function $(j,k,R,H,ee,J){if(!l.isBuffer(j))throw new TypeError('"buffer" argument must be a Buffer instance');if(k>ee||k<J)throw new RangeError('"value" argument is out of bounds');if(R+H>j.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(k,R,H,ee){if(k=+k,R=R>>>0,H=H>>>0,!ee){const ce=Math.pow(2,8*H)-1;$(this,k,R,H,ce,0)}let J=1,O=0;for(this[R]=k&255;++O<H&&(J*=256);)this[R+O]=k/J&255;return R+H},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(k,R,H,ee){if(k=+k,R=R>>>0,H=H>>>0,!ee){const ce=Math.pow(2,8*H)-1;$(this,k,R,H,ce,0)}let J=H-1,O=1;for(this[R+J]=k&255;--J>=0&&(O*=256);)this[R+J]=k/O&255;return R+H},l.prototype.writeUint8=l.prototype.writeUInt8=function(k,R,H){return k=+k,R=R>>>0,H||$(this,k,R,1,255,0),this[R]=k&255,R+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(k,R,H){return k=+k,R=R>>>0,H||$(this,k,R,2,65535,0),this[R]=k&255,this[R+1]=k>>>8,R+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(k,R,H){return k=+k,R=R>>>0,H||$(this,k,R,2,65535,0),this[R]=k>>>8,this[R+1]=k&255,R+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(k,R,H){return k=+k,R=R>>>0,H||$(this,k,R,4,4294967295,0),this[R+3]=k>>>24,this[R+2]=k>>>16,this[R+1]=k>>>8,this[R]=k&255,R+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(k,R,H){return k=+k,R=R>>>0,H||$(this,k,R,4,4294967295,0),this[R]=k>>>24,this[R+1]=k>>>16,this[R+2]=k>>>8,this[R+3]=k&255,R+4};function oe(j,k,R,H,ee){Ee(k,H,ee,j,R,7);let J=Number(k&BigInt(4294967295));j[R++]=J,J=J>>8,j[R++]=J,J=J>>8,j[R++]=J,J=J>>8,j[R++]=J;let O=Number(k>>BigInt(32)&BigInt(4294967295));return j[R++]=O,O=O>>8,j[R++]=O,O=O>>8,j[R++]=O,O=O>>8,j[R++]=O,R}function ie(j,k,R,H,ee){Ee(k,H,ee,j,R,7);let J=Number(k&BigInt(4294967295));j[R+7]=J,J=J>>8,j[R+6]=J,J=J>>8,j[R+5]=J,J=J>>8,j[R+4]=J;let O=Number(k>>BigInt(32)&BigInt(4294967295));return j[R+3]=O,O=O>>8,j[R+2]=O,O=O>>8,j[R+1]=O,O=O>>8,j[R]=O,R+8}l.prototype.writeBigUInt64LE=Ae(function(k,R=0){return oe(this,k,R,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=Ae(function(k,R=0){return ie(this,k,R,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(k,R,H,ee){if(k=+k,R=R>>>0,!ee){const _e=Math.pow(2,8*H-1);$(this,k,R,H,_e-1,-_e)}let J=0,O=1,ce=0;for(this[R]=k&255;++J<H&&(O*=256);)k<0&&ce===0&&this[R+J-1]!==0&&(ce=1),this[R+J]=(k/O>>0)-ce&255;return R+H},l.prototype.writeIntBE=function(k,R,H,ee){if(k=+k,R=R>>>0,!ee){const _e=Math.pow(2,8*H-1);$(this,k,R,H,_e-1,-_e)}let J=H-1,O=1,ce=0;for(this[R+J]=k&255;--J>=0&&(O*=256);)k<0&&ce===0&&this[R+J+1]!==0&&(ce=1),this[R+J]=(k/O>>0)-ce&255;return R+H},l.prototype.writeInt8=function(k,R,H){return k=+k,R=R>>>0,H||$(this,k,R,1,127,-128),k<0&&(k=255+k+1),this[R]=k&255,R+1},l.prototype.writeInt16LE=function(k,R,H){return k=+k,R=R>>>0,H||$(this,k,R,2,32767,-32768),this[R]=k&255,this[R+1]=k>>>8,R+2},l.prototype.writeInt16BE=function(k,R,H){return k=+k,R=R>>>0,H||$(this,k,R,2,32767,-32768),this[R]=k>>>8,this[R+1]=k&255,R+2},l.prototype.writeInt32LE=function(k,R,H){return k=+k,R=R>>>0,H||$(this,k,R,4,2147483647,-2147483648),this[R]=k&255,this[R+1]=k>>>8,this[R+2]=k>>>16,this[R+3]=k>>>24,R+4},l.prototype.writeInt32BE=function(k,R,H){return k=+k,R=R>>>0,H||$(this,k,R,4,2147483647,-2147483648),k<0&&(k=4294967295+k+1),this[R]=k>>>24,this[R+1]=k>>>16,this[R+2]=k>>>8,this[R+3]=k&255,R+4},l.prototype.writeBigInt64LE=Ae(function(k,R=0){return oe(this,k,R,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=Ae(function(k,R=0){return ie(this,k,R,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ne(j,k,R,H,ee,J){if(R+H>j.length)throw new RangeError("Index out of range");if(R<0)throw new RangeError("Index out of range")}function xe(j,k,R,H,ee){return k=+k,R=R>>>0,ee||ne(j,k,R,4),t.write(j,k,R,H,23,4),R+4}l.prototype.writeFloatLE=function(k,R,H){return xe(this,k,R,!0,H)},l.prototype.writeFloatBE=function(k,R,H){return xe(this,k,R,!1,H)};function Pe(j,k,R,H,ee){return k=+k,R=R>>>0,ee||ne(j,k,R,8),t.write(j,k,R,H,52,8),R+8}l.prototype.writeDoubleLE=function(k,R,H){return Pe(this,k,R,!0,H)},l.prototype.writeDoubleBE=function(k,R,H){return Pe(this,k,R,!1,H)},l.prototype.copy=function(k,R,H,ee){if(!l.isBuffer(k))throw new TypeError("argument should be a Buffer");if(H||(H=0),!ee&&ee!==0&&(ee=this.length),R>=k.length&&(R=k.length),R||(R=0),ee>0&&ee<H&&(ee=H),ee===H||k.length===0||this.length===0)return 0;if(R<0)throw new RangeError("targetStart out of bounds");if(H<0||H>=this.length)throw new RangeError("Index out of range");if(ee<0)throw new RangeError("sourceEnd out of bounds");ee>this.length&&(ee=this.length),k.length-R<ee-H&&(ee=k.length-R+H);const J=ee-H;return this===k&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(R,H,ee):Uint8Array.prototype.set.call(k,this.subarray(H,ee),R),J},l.prototype.fill=function(k,R,H,ee){if(typeof k=="string"){if(typeof R=="string"?(ee=R,R=0,H=this.length):typeof H=="string"&&(ee=H,H=this.length),ee!==void 0&&typeof ee!="string")throw new TypeError("encoding must be a string");if(typeof ee=="string"&&!l.isEncoding(ee))throw new TypeError("Unknown encoding: "+ee);if(k.length===1){const O=k.charCodeAt(0);(ee==="utf8"&&O<128||ee==="latin1")&&(k=O)}}else typeof k=="number"?k=k&255:typeof k=="boolean"&&(k=Number(k));if(R<0||this.length<R||this.length<H)throw new RangeError("Out of range index");if(H<=R)return this;R=R>>>0,H=H===void 0?this.length:H>>>0,k||(k=0);let J;if(typeof k=="number")for(J=R;J<H;++J)this[J]=k;else{const O=l.isBuffer(k)?k:l.from(k,ee),ce=O.length;if(ce===0)throw new TypeError('The value "'+k+'" is invalid for argument "value"');for(J=0;J<H-R;++J)this[J+R]=O[J%ce]}return this};const Ce={};function me(j,k,R){Ce[j]=class extends R{constructor(){super(),Object.defineProperty(this,"message",{value:k.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${j}]`,this.stack,delete this.name}get code(){return j}set code(ee){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ee,writable:!0})}toString(){return`${this.name} [${j}]: ${this.message}`}}}me("ERR_BUFFER_OUT_OF_BOUNDS",function(j){return j?`${j} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),me("ERR_INVALID_ARG_TYPE",function(j,k){return`The "${j}" argument must be of type number. Received type ${typeof k}`},TypeError),me("ERR_OUT_OF_RANGE",function(j,k,R){let H=`The value of "${j}" is out of range.`,ee=R;return Number.isInteger(R)&&Math.abs(R)>2**32?ee=fe(String(R)):typeof R=="bigint"&&(ee=String(R),(R>BigInt(2)**BigInt(32)||R<-(BigInt(2)**BigInt(32)))&&(ee=fe(ee)),ee+="n"),H+=` It must be ${k}. Received ${ee}`,H},RangeError);function fe(j){let k="",R=j.length;const H=j[0]==="-"?1:0;for(;R>=H+4;R-=3)k=`_${j.slice(R-3,R)}${k}`;return`${j.slice(0,R)}${k}`}function he(j,k,R){Re(k,"offset"),(j[k]===void 0||j[k+R]===void 0)&&I(k,j.length-(R+1))}function Ee(j,k,R,H,ee,J){if(j>R||j<k){const O=typeof k=="bigint"?"n":"";let ce;throw k===0||k===BigInt(0)?ce=`>= 0${O} and < 2${O} ** ${(J+1)*8}${O}`:ce=`>= -(2${O} ** ${(J+1)*8-1}${O}) and < 2 ** ${(J+1)*8-1}${O}`,new Ce.ERR_OUT_OF_RANGE("value",ce,j)}he(H,ee,J)}function Re(j,k){if(typeof j!="number")throw new Ce.ERR_INVALID_ARG_TYPE(k,"number",j)}function I(j,k,R){throw Math.floor(j)!==j?(Re(j,R),new Ce.ERR_OUT_OF_RANGE("offset","an integer",j)):k<0?new Ce.ERR_BUFFER_OUT_OF_BOUNDS:new Ce.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${k}`,j)}const pe=/[^+/0-9A-Za-z-_]/g;function ge(j){if(j=j.split("=")[0],j=j.trim().replace(pe,""),j.length<2)return"";for(;j.length%4!==0;)j=j+"=";return j}function Y(j,k){k=k||1/0;let R;const H=j.length;let ee=null;const J=[];for(let O=0;O<H;++O){if(R=j.charCodeAt(O),R>55295&&R<57344){if(!ee){if(R>56319){(k-=3)>-1&&J.push(239,191,189);continue}else if(O+1===H){(k-=3)>-1&&J.push(239,191,189);continue}ee=R;continue}if(R<56320){(k-=3)>-1&&J.push(239,191,189),ee=R;continue}R=(ee-55296<<10|R-56320)+65536}else ee&&(k-=3)>-1&&J.push(239,191,189);if(ee=null,R<128){if((k-=1)<0)break;J.push(R)}else if(R<2048){if((k-=2)<0)break;J.push(R>>6|192,R&63|128)}else if(R<65536){if((k-=3)<0)break;J.push(R>>12|224,R>>6&63|128,R&63|128)}else if(R<1114112){if((k-=4)<0)break;J.push(R>>18|240,R>>12&63|128,R>>6&63|128,R&63|128)}else throw new Error("Invalid code point")}return J}function K(j){const k=[];for(let R=0;R<j.length;++R)k.push(j.charCodeAt(R)&255);return k}function ae(j,k){let R,H,ee;const J=[];for(let O=0;O<j.length&&!((k-=2)<0);++O)R=j.charCodeAt(O),H=R>>8,ee=R%256,J.push(ee),J.push(H);return J}function ve(j){return e.toByteArray(ge(j))}function ye(j,k,R,H){let ee;for(ee=0;ee<H&&!(ee+R>=k.length||ee>=j.length);++ee)k[ee+R]=j[ee];return ee}function se(j,k){return j instanceof k||j!=null&&j.constructor!=null&&j.constructor.name!=null&&j.constructor.name===k.name}function Be(j){return j!==j}const Ie=(function(){const j="0123456789abcdef",k=new Array(256);for(let R=0;R<16;++R){const H=R*16;for(let ee=0;ee<16;++ee)k[H+ee]=j[R]+j[ee]}return k})();function Ae(j){return typeof BigInt>"u"?ze:j}function ze(){throw new Error("BigInt not supported")}})(Gf)),Gf}var mE=gE();const Vs="http://www.w3.org/1999/02/22-rdf-syntax-ns#",qs="http://www.w3.org/2001/XMLSchema#",Vl="http://www.w3.org/2000/10/swap/",tn={xsd:{decimal:`${qs}decimal`,boolean:`${qs}boolean`,double:`${qs}double`,integer:`${qs}integer`,string:`${qs}string`},rdf:{type:`${Vs}type`,nil:`${Vs}nil`,first:`${Vs}first`,rest:`${Vs}rest`,langString:`${Vs}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${Vl}reify#forSome`,forAll:`${Vl}reify#forAll`},log:{implies:`${Vl}log#implies`,isImpliedBy:`${Vl}log#isImpliedBy`}},{xsd:ql}=tn,yE=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,dm={"\\":"\\","'":"'",'"':'"',n:`
`,r:"\r",t:"	",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},wE=/[\x00-\x20<>\\"\{\}\|\^\`]/,xE={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},bE=/$0^/;class EE{constructor(e){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,e=e||{},this._isImpliedBy=e.isImpliedBy,this._lineMode=!!e.lineMode){this._n3Mode=!1;for(const t in this)!(t in xE)&&this[t]instanceof RegExp&&(this[t]=bE)}else this._n3Mode=e.n3!==!1;this.comments=!!e.comments,this._literalClosingPos=0}_tokenizeToEnd(e,t){let n=this._input,a=n.length;for(;;){let l,c;for(;l=this._newline.exec(n);)this.comments&&(c=this._comment.exec(l[0]))&&i("comment",c[1],"",this._line,l[0].length),n=n.substr(l[0].length,n.length),a=n.length,this._line++;if(!l&&(l=this._whitespace.exec(n))&&(n=n.substr(l[0].length,n.length)),this._endOfFile.test(n))return t&&(this.comments&&(c=this._comment.exec(n))&&i("comment",c[1],"",this._line,n.length),n=null,i("eof","","",this._line,0)),this._input=n;const f=this._line,d=n[0];let h="",p="",g="",m=null,w=0,x=!1;switch(d){case"^":if(n.length<3)break;if(n[1]==="^"){if(this._previousMarker="^^",n=n.substr(2),n[0]!=="<"){x=!0;break}}else{this._n3Mode&&(w=1,h="^");break}case"<":if(m=this._unescapedIri.exec(n))h="IRI",p=m[1];else if(m=this._iri.exec(n)){if(p=this._unescape(m[1]),p===null||wE.test(p))return o(this);h="IRI"}else n.length>1&&n[1]==="<"?(h="<<",w=2):this._n3Mode&&n.length>1&&n[1]==="="&&(w=2,this._isImpliedBy?(h="abbreviation",p="<"):(h="inverse",p=">"));break;case">":n.length>1&&n[1]===">"&&(h=">>",w=2);break;case"_":((m=this._blank.exec(n))||t&&(m=this._blank.exec(`${n} `)))&&(h="blank",g="_",p=m[1]);break;case'"':if(m=this._simpleQuotedString.exec(n))p=m[1];else if({value:p,matchLength:w}=this._parseLiteral(n),p===null)return o(this);(m!==null||w!==0)&&(h="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(m=this._simpleApostropheString.exec(n))p=m[1];else if({value:p,matchLength:w}=this._parseLiteral(n),p===null)return o(this);(m!==null||w!==0)&&(h="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(m=this._variable.exec(n))&&(h="var",p=m[0]);break;case"@":this._previousMarker==="literal"&&(m=this._langcode.exec(n))?(h="langcode",p=m[1]):(m=this._keyword.exec(n))&&(h=m[0]);break;case".":if(n.length===1?t:n[1]<"0"||n[1]>"9"){h=".",w=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(m=this._number.exec(n)||t&&(m=this._number.exec(`${n} `)))&&(h="literal",p=m[0],g=typeof m[1]=="string"?ql.double:typeof m[2]=="string"?ql.decimal:ql.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(m=this._sparqlKeyword.exec(n))?h=m[0].toUpperCase():x=!0;break;case"f":case"t":(m=this._boolean.exec(n))?(h="literal",p=m[0],g=ql.boolean):x=!0;break;case"a":(m=this._shortPredicates.exec(n))?(h="abbreviation",p="a"):x=!0;break;case"=":this._n3Mode&&n.length>1&&(h="abbreviation",n[1]!==">"?(w=1,p="="):(w=2,p=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"}":this._lineMode||(w=1,h=d);break;case"{":!this._lineMode&&n.length>=2&&(n[1]==="|"?(h="{|",w=2):(h=d,w=1));break;case"|":n.length>=2&&n[1]==="}"&&(h="|}",w=2);break;default:x=!0}if(x&&((this._previousMarker==="@prefix"||this._previousMarker==="PREFIX")&&(m=this._prefix.exec(n))?(h="prefix",p=m[1]||""):((m=this._prefixed.exec(n))||t&&(m=this._prefixed.exec(`${n} `)))&&(h="prefixed",g=m[1]||"",p=this._unescape(m[2]))),this._previousMarker==="^^")switch(h){case"prefixed":h="type";break;case"IRI":h="typeIRI";break;default:h=""}if(!h)return t||!/^'''|^"""/.test(n)&&/\n|\r/.test(n)?o(this):this._input=n;const b=w||m[0].length,E=i(h,p,g,f,b);this.previousToken=E,this._previousMarker=h,n=n.substr(b,n.length)}function i(l,c,f,d,h){const p=n?a-n.length:a,g=p+h,m={type:l,value:c,prefix:f,line:d,start:p,end:g};return e(null,m),m}function o(l){e(l._syntaxError(/^\S*/.exec(n)[0]))}}_unescape(e){let t=!1;const n=e.replace(yE,(a,i,o,l)=>{if(typeof i=="string")return String.fromCharCode(Number.parseInt(i,16));if(typeof o=="string"){let c=Number.parseInt(o,16);return c<=65535?String.fromCharCode(Number.parseInt(o,16)):String.fromCharCode(55296+((c-=65536)>>10),56320+(c&1023))}return l in dm?dm[l]:(t=!0,"")});return t?null:n}_parseLiteral(e){if(e.length>=3){const t=e.match(/^(?:"""|"|'''|'|)/)[0],n=t.length;let a=Math.max(this._literalClosingPos,n);for(;(a=e.indexOf(t,a))>0;){let i=0;for(;e[a-i-1]==="\\";)i++;if(i%2===0){const o=e.substring(n,a),l=o.split(/\r\n|\r|\n/).length-1,c=a+n;if(n===1&&l!==0||n===3&&this._lineMode)break;return this._line+=l,{value:this._unescape(o),matchLength:c}}a++}this._literalClosingPos=e.length-n+1}return{value:"",matchLength:0}}_syntaxError(e){this._input=null;const t=new Error(`Unexpected "${e}" on line ${this._line}.`);return t.context={token:void 0,line:this._line,previousToken:this.previousToken},t}_readStartingBom(e){return e.startsWith("\uFEFF")?e.substr(1):e}tokenize(e,t){if(this._line=1,typeof e=="string")if(this._input=this._readStartingBom(e),typeof t=="function")queueMicrotask(()=>this._tokenizeToEnd(t,!0));else{const n=[];let a;if(this._tokenizeToEnd((i,o)=>i?a=i:n.push(o),!0),a)throw a;return n}else this._pendingBuffer=null,typeof e.setEncoding=="function"&&e.setEncoding("utf8"),e.on("data",n=>{this._input!==null&&n.length!==0&&(this._pendingBuffer&&(n=mE.Buffer.concat([this._pendingBuffer,n]),this._pendingBuffer=null),n[n.length-1]&128?this._pendingBuffer=n:(typeof this._input>"u"?this._input=this._readStartingBom(typeof n=="string"?n:n.toString()):this._input+=n,this._tokenizeToEnd(t,!1)))}),e.on("end",()=>{typeof this._input=="string"&&this._tokenizeToEnd(t,!0)}),e.on("error",t)}}const{rdf:_E,xsd:Ui}=tn;let _o,SE=0;const Gh={namedNode:i1,blankNode:s1,variable:l1,literal:o1,defaultGraph:PE,quad:Sh,triple:Sh,fromTerm:ro,fromQuad:u1};class Cn{constructor(e){this.id=e}get value(){return this.id}equals(e){return e instanceof Cn?this.id===e.id:!!e&&this.termType===e.termType&&this.value===e.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}class n1 extends Cn{get termType(){return"NamedNode"}}class so extends Cn{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const e=this.id;let t=e.lastIndexOf('"')+1;return t<e.length&&e[t++]==="@"?e.substr(t).toLowerCase():""}get datatype(){return new n1(this.datatypeString)}get datatypeString(){const e=this.id,t=e.lastIndexOf('"')+1,n=t<e.length?e[t]:"";return n==="^"?e.substr(t+2):n!=="@"?Ui.string:_E.langString}equals(e){return e instanceof so?this.id===e.id:!!e&&!!e.datatype&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&this.datatype.value===e.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}}class kE extends Cn{constructor(e){super(`_:${e}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}}class CE extends Cn{constructor(e){super(`?${e}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}}class TE extends Cn{constructor(){return super(""),_o||this}get termType(){return"DefaultGraph"}equals(e){return this===e||!!e&&this.termType===e.termType}}_o=new TE;class a1 extends Cn{constructor(e,t,n,a){super(""),this._subject=e,this._predicate=t,this._object=n,this._graph=a||_o}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(e){return!!e&&this._subject.equals(e.subject)&&this._predicate.equals(e.predicate)&&this._object.equals(e.object)&&this._graph.equals(e.graph)}}function i1(r){return new n1(r)}function s1(r){return new kE(r||`n3-${SE++}`)}function o1(r,e){if(typeof e=="string")return new so(`"${r}"@${e.toLowerCase()}`);let t=e?e.value:"";return t===""&&(typeof r=="boolean"?t=Ui.boolean:typeof r=="number"&&(Number.isFinite(r)?t=Number.isInteger(r)?Ui.integer:Ui.double:(t=Ui.double,Number.isNaN(r)||(r=r>0?"INF":"-INF")))),t===""||t===Ui.string?new so(`"${r}"`):new so(`"${r}"^^${t}`)}function l1(r){return new CE(r)}function PE(){return _o}function Sh(r,e,t,n){return new a1(r,e,t,n)}function ro(r){if(r instanceof Cn)return r;switch(r.termType){case"NamedNode":return i1(r.value);case"BlankNode":return s1(r.value);case"Variable":return l1(r.value);case"DefaultGraph":return _o;case"Literal":return o1(r.value,r.language||r.datatype);case"Quad":return u1(r);default:throw new Error(`Unexpected termType: ${r.termType}`)}}function u1(r){if(r instanceof a1)return r;if(r.termType!=="Quad")throw new Error(`Unexpected termType: ${r.termType}`);return Sh(ro(r.subject),ro(r.predicate),ro(r.object),ro(r.graph))}let hm=0;class c1{constructor(e){this._contextStack=[],this._graph=null,e=e||{},this._setBase(e.baseIRI),e.factory&&f1(this,e.factory);const t=typeof e.format=="string"?e.format.match(/\w*$/)[0].toLowerCase():"",n=/turtle/.test(t),a=/trig/.test(t),i=/triple/.test(t),o=/quad/.test(t),l=this._n3Mode=/n3/.test(t),c=i||o;(this._supportsNamedGraphs=!(n||l))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(n||a||i||l),this._isImpliedBy=e.isImpliedBy,this._supportsRDFStar=t===""||/star|\*$/.test(t),c&&(this._resolveRelativeIRI=f=>null),this._blankNodePrefix=typeof e.blankNodePrefix!="string"?"":e.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=e.lexer||new EE({lineMode:c,n3:l,isImpliedBy:this._isImpliedBy}),this._explicitQuantifiers=!!e.explicitQuantifiers}static _resetBlankNodePrefix(){hm=0}_setBase(e){if(!e)this._base="",this._basePath="";else{const t=e.indexOf("#");t>=0&&(e=e.substr(0,t)),this._base=e,this._basePath=e.indexOf("/")<0?e:e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1]}}_saveContext(e,t,n,a,i){const o=this._n3Mode;this._contextStack.push({type:e,subject:n,predicate:a,object:i,graph:t,inverse:o?this._inversePredicate:!1,blankPrefix:o?this._prefixes._:"",quantified:o?this._quantified:null}),o&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(e,t){const n=this._contextStack.pop();if(!n||n.type!==e)return this._error(`Unexpected ${t.type}`,t);this._subject=n.subject,this._predicate=n.predicate,this._object=n.object,this._graph=n.graph,this._n3Mode&&(this._inversePredicate=n.inverse,this._prefixes._=n.blankPrefix,this._quantified=n.quantified)}_readInTopContext(e){switch(e.type){case"eof":return this._graph!==null?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}}_readEntity(e,t){let n;switch(e.type){case"IRI":case"typeIRI":const a=this._resolveIRI(e.value);if(a===null)return this._error("Invalid IRI",e);n=this._factory.namedNode(a);break;case"type":case"prefixed":const i=this._prefixes[e.prefix];if(i===void 0)return this._error(`Undefined prefix "${e.prefix}:"`,e);n=this._factory.namedNode(i+e.value);break;case"blank":n=this._factory.blankNode(this._prefixes[e.prefix]+e.value);break;case"var":n=this._factory.variable(e.value.substr(1));break;default:return this._error(`Expected entity but got ${e.type}`,e)}return!t&&this._n3Mode&&n.id in this._quantified&&(n=this._quantified[n.id]),n}_readSubject(e){switch(this._predicate=null,e.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._factory.blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._factory.blankNode(),null,null),this._readSubject):this._error("Unexpected graph",e);case"}":return this._readPunctuation(e);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier="blankNode",this._readQuantifierList):this._error('Unexpected "@forSome"',e);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier="variable",this._readQuantifierList):this._error('Unexpected "@forAll"',e);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",e);if(e.prefix.length===0)return this._literalValue=e.value,this._completeSubjectLiteral;this._subject=this._factory.literal(e.value,this._factory.namedNode(e.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",e);default:if((this._subject=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(e){const t=e.type;switch(t){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[e.value];break;case".":case"]":case"}":return this._predicate===null?this._error(`Unexpected ${t}`,e):(this._subject=null,t==="]"?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return this._predicate!==null?this._readPredicate:this._error("Expected predicate but got ;",e);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._factory.blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",e);default:if((this._predicate=this._readEntity(e))===void 0)return}return this._readObject}_readObject(e){switch(e.type){case"literal":if(e.prefix.length===0)return this._literalValue=e.value,this._readDataTypeOrLang;this._object=this._factory.literal(e.value,this._factory.namedNode(e.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._factory.blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",e);default:if((this._object=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(e){return e.type==="{"?this._readGraph(e):this._readPredicate(e)}_readGraph(e){return e.type!=="{"?this._error(`Expected graph but got ${e.type}`,e):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(e){return e.type==="]"?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))}_readBlankNodeTail(e){if(e.type!=="]")return this._readBlankNodePunctuation(e);this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph);const t=this._predicate===null;return this._restoreContext("blank",e),this._object!==null?this._getContextEndReader():this._predicate!==null?this._readObject:t?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(e){switch(e.type){case".":case"}":return this._subject=null,this._readPunctuation(e);default:return this._readPredicate(e)}}_readListItem(e){let t=null,n=null,a=this._readListItem;const i=this._subject,o=this._contextStack,l=o[o.length-1];switch(e.type){case"[":this._saveContext("blank",this._graph,n=this._factory.blankNode(),this.RDF_FIRST,this._subject=t=this._factory.blankNode()),a=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,n=this._factory.blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",e),o.length!==0&&o[o.length-1].type==="list"&&this._emit(this._subject,this._predicate,this._object,this._graph),this._predicate===null){if(a=this._readPredicate,this._subject===this.RDF_NIL)return a}else if(a=this._getContextEndReader(),this._object===this.RDF_NIL)return a;n=this.RDF_NIL;break;case"literal":e.prefix.length===0?(this._literalValue=e.value,a=this._readListItemDataTypeOrLang):(t=this._factory.literal(e.value,this._factory.namedNode(e.prefix)),a=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",e);default:if((t=this._readEntity(e))===void 0)return}if(n===null&&(this._subject=n=this._factory.blankNode()),i===null?l.predicate===null?l.subject=n:l.object=n:this._emit(i,this.RDF_REST,n,this._graph),t!==null){if(this._n3Mode&&(e.type==="IRI"||e.type==="prefixed"))return this._saveContext("item",this._graph,n,this.RDF_FIRST,t),this._subject=t,this._predicate=null,this._getPathReader(this._readListItem);this._emit(n,this.RDF_FIRST,t,this._graph)}return a}_readDataTypeOrLang(e){return this._completeObjectLiteral(e,!1)}_readListItemDataTypeOrLang(e){return this._completeObjectLiteral(e,!0)}_completeLiteral(e){let t=this._factory.literal(this._literalValue);switch(e.type){case"type":case"typeIRI":const n=this._readEntity(e);if(n===void 0)return;t=this._factory.literal(this._literalValue,n),e=null;break;case"langcode":t=this._factory.literal(this._literalValue,e.value),e=null;break}return{token:e,literal:t}}_completeSubjectLiteral(e){return this._subject=this._completeLiteral(e).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(e,t){const n=this._completeLiteral(e);if(n)return this._object=n.literal,t&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),n.token===null?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(n.token))}_readFormulaTail(e){return e.type!=="}"?this._readPunctuation(e):(this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",e),this._object===null?this._readPredicate:this._getContextEndReader())}_readPunctuation(e){let t,n=this._graph;const a=this._subject,i=this._inversePredicate;switch(e.type){case"}":if(this._graph===null)return this._error("Unexpected graph closing",e);if(this._n3Mode)return this._readFormulaTail(e);this._graph=null;case".":this._subject=null,t=this._contextStack.length?this._readSubject:this._readInTopContext,i&&(this._inversePredicate=!1);break;case";":t=this._readPredicate;break;case",":t=this._readObject;break;case"{|":if(!this._supportsRDFStar)return this._error("Unexpected RDF-star syntax",e);const o=this._predicate,l=this._object;this._subject=this._factory.quad(a,o,l,this.DEFAULTGRAPH),t=this._readPredicate;break;case"|}":if(this._subject.termType!=="Quad")return this._error("Unexpected asserted triple closing",e);this._subject=null,t=this._readPunctuation;break;default:if(this._supportsQuads&&this._graph===null&&(n=this._readEntity(e))!==void 0){t=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}if(a!==null){const o=this._predicate,l=this._object;i?this._emit(l,o,a,n):this._emit(a,o,l,n)}return t}_readBlankNodePunctuation(e){let t;switch(e.type){case";":t=this._readPredicate;break;case",":t=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}return this._emit(this._subject,this._predicate,this._object,this._graph),t}_readQuadPunctuation(e){return e.type!=="."?this._error("Expected dot to follow quad",e):this._readInTopContext}_readPrefix(e){return e.type!=="prefix"?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)}_readPrefixIRI(e){if(e.type!=="IRI")return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,e);const t=this._readEntity(e);return this._prefixes[this._prefix]=t.value,this._prefixCallback(this._prefix,t),this._readDeclarationPunctuation}_readBaseIRI(e){const t=e.type==="IRI"&&this._resolveIRI(e.value);return t?(this._setBase(t),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",e)}_readNamedGraphLabel(e){switch(e.type){case"IRI":case"blank":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}}_readNamedGraphBlankLabel(e){return e.type!=="]"?this._error("Invalid graph label",e):(this._subject=this._factory.blankNode(),this._readGraph)}_readDeclarationPunctuation(e){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(e)):e.type!=="."?this._error("Expected declaration to end with a dot",e):this._readInTopContext}_readQuantifierList(e){let t;switch(e.type){case"IRI":case"prefixed":if((t=this._readEntity(e,!0))!==void 0)break;default:return this._error(`Unexpected ${e.type}`,e)}return this._explicitQuantifiers?(this._subject===null?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,t,this.QUANTIFIERS_GRAPH)):this._quantified[t.id]=this._factory[this._quantifier](this._factory.blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(e){return e.type===","?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(e))}_getPathReader(e){return this._afterPath=e,this._readPath}_readPath(e){switch(e.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const t=this._contextStack,n=t.length&&t[t.length-1];if(n&&n.type==="item"){const a=this._subject;this._restoreContext("item",e),this._emit(this._subject,this.RDF_FIRST,a,this._graph)}return this._afterPath(e)}}_readForwardPath(e){let t,n;const a=this._factory.blankNode();if((n=this._readEntity(e))!==void 0)return this._predicate===null?(t=this._subject,this._subject=a):(t=this._object,this._object=a),this._emit(t,n,a,this._graph),this._readPath}_readBackwardPath(e){const t=this._factory.blankNode();let n,a;if((n=this._readEntity(e))!==void 0)return this._predicate===null?(a=this._subject,this._subject=t):(a=this._object,this._object=t),this._emit(t,n,a,this._graph),this._readPath}_readRDFStarTailOrGraph(e){return e.type!==">>"?this._supportsQuads&&this._graph===null&&(this._graph=this._readEntity(e))!==void 0?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,e):this._readRDFStarTail(e)}_readRDFStarTail(e){if(e.type!==">>")return this._error(`Expected >> but got ${e.type}`,e);const t=this._factory.quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",e),this._subject===null?(this._subject=t,this._readPredicate):(this._object=t,this._getContextEndReader())}_getContextEndReader(){const e=this._contextStack;if(!e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(e,t,n,a){this._callback(null,this._factory.quad(e,t,n,a||this.DEFAULTGRAPH))}_error(e,t){const n=new Error(`${e} on line ${t.line}.`);n.context={token:t,line:t.line,previousToken:this._lexer.previousToken},this._callback(n),this._callback=Wl}_resolveIRI(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)?e:this._resolveRelativeIRI(e)}_resolveRelativeIRI(e){if(!e.length)return this._base;switch(e[0]){case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return(e[1]==="/"?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return/^[^/:]*:/.test(e)?null:this._removeDotSegments(this._basePath+e)}}_removeDotSegments(e){if(!/(^|\/)\.\.?($|[/#?])/.test(e))return e;const t=e.length;let n="",a=-1,i=-1,o=0,l="/";for(;a<t;){switch(l){case":":if(i<0&&e[++a]==="/"&&e[++a]==="/")for(;(i=a+1)<t&&e[i]!=="/";)a=i;break;case"?":case"#":a=t;break;case"/":if(e[a+1]===".")switch(l=e[++a+1],l){case"/":n+=e.substring(o,a-1),o=a+1;break;case void 0:case"?":case"#":return n+e.substring(o,a)+e.substr(a+1);case".":if(l=e[++a+1],l===void 0||l==="/"||l==="?"||l==="#"){if(n+=e.substring(o,a-2),(o=n.lastIndexOf("/"))>=i&&(n=n.substr(0,o)),l!=="/")return`${n}/${e.substr(a+1)}`;o=a+1}}}l=e[++a]}return n+e.substring(o)}parse(e,t,n){let a,i,o;if(t&&(t.onQuad||t.onPrefix||t.onComment)?(a=t.onQuad,i=t.onPrefix,o=t.onComment):(a=t,i=n),this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${hm++}_`,this._prefixCallback=i||Wl,this._inversePredicate=!1,this._quantified=Object.create(null),!a){const c=[];let f;if(this._callback=(d,h)=>{d?f=d:h&&c.push(h)},this._lexer.tokenize(e).every(d=>this._readCallback=this._readCallback(d)),f)throw f;return c}let l=(c,f)=>{c!==null?(this._callback(c),this._callback=Wl):this._readCallback&&(this._readCallback=this._readCallback(f))};o&&(this._lexer.comments=!0,l=(c,f)=>{c!==null?(this._callback(c),this._callback=Wl):this._readCallback&&(f.type==="comment"?o(f.value):this._readCallback=this._readCallback(f))}),this._callback=a,this._lexer.tokenize(e,l)}}function Wl(){}function f1(r,e){r._factory=e,r.DEFAULTGRAPH=e.defaultGraph(),r.RDF_FIRST=e.namedNode(tn.rdf.first),r.RDF_REST=e.namedNode(tn.rdf.rest),r.RDF_NIL=e.namedNode(tn.rdf.nil),r.N3_FORALL=e.namedNode(tn.r.forAll),r.N3_FORSOME=e.namedNode(tn.r.forSome),r.ABBREVIATIONS={a:e.namedNode(tn.rdf.type),"=":e.namedNode(tn.owl.sameAs),">":e.namedNode(tn.log.implies),"<":e.namedNode(tn.log.isImpliedBy)},r.QUANTIFIERS_GRAPH=e.namedNode("urn:n3:quantifiers")}f1(c1.prototype,Gh);function RE(r){return!!r&&r.termType==="DefaultGraph"}function su(r){return r.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&")}const BE=/^:?[^:?#]*(?:[?#]|$)|^file:|^[^:]*:\/*[^?#]+?\/(?:\.\.?(?:\/|$)|\/)/i,AE=/^(?:(?:[^/?#]{3,}|\.?[^/?#.]\.?)(?:\/[^/?#]{3,}|\.?[^/?#.]\.?)*\/?)?(?:[?#]|$)/,vm="./",IE="../",Hf="?",pm="#";class Hh{constructor(e){this.base=e,this._baseLength=0,this._baseMatcher=null,this._pathReplacements=new Array(e.length+1)}static supports(e){return!BE.test(e)}_getBaseMatcher(){if(this._baseMatcher)return this._baseMatcher;if(!Hh.supports(this.base))return this._baseMatcher=/.^/;const e=/^[^:]*:\/*/.exec(this.base)[0],t=["^",su(e)],n=[],a=[],i=/[^/?#]*([/?#])/y;let o,l=0,c=0,f=i.lastIndex=e.length;for(;!l&&!c&&(o=i.exec(this.base));)o[1]===pm?c=i.lastIndex-1:(t.push(su(o[0]),"(?:"),n.push(")?"),o[1]!==Hf?a.push(f=i.lastIndex):(l=f=i.lastIndex,c=this.base.indexOf(pm,l),this._pathReplacements[l]=Hf));for(let d=0;d<a.length;d++)this._pathReplacements[a[d]]=IE.repeat(a.length-d-1);return this._pathReplacements[a[a.length-1]]=vm,this._baseLength=c>0?c:this.base.length,t.push(su(this.base.substring(f,this._baseLength)),l?"(?:#|$)":"(?:[?#]|$)"),this._baseMatcher=new RegExp([...t,...n].join(""))}toRelative(e){const t=this._getBaseMatcher().exec(e);if(!t)return e;const n=t[0].length;if(n===this._baseLength&&n===e.length)return"";const a=this._pathReplacements[n];if(a){const i=e.substring(n);return a!==Hf&&!AE.test(i)?e:a===vm&&/^[^?#]/.test(i)?i:a+i}return e.substring(n-1)}}const Ws=Gh.defaultGraph(),{rdf:DE,xsd:Ii}=tn,gm=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,mm=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,NE={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};class Gs extends Cn{equals(e){return e===this}}class LE{constructor(e,t){if(this._prefixRegex=/$0^/,e&&typeof e.write!="function"&&(t=e,e=null),t=t||{},this._lists=t.lists,e)this._outputStream=e,this._endStream=t.end===void 0?!0:!!t.end;else{let n="";this._outputStream={write(a,i,o){n+=a,o&&o()},end:a=>{a&&a(null,n)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(t.format)?(this._lineMode=!0,this._writeQuad=this._writeQuadLine):(this._lineMode=!1,this._graph=Ws,this._prefixIRIs=Object.create(null),t.prefixes&&this.addPrefixes(t.prefixes),t.baseIRI&&(this._baseIri=new Hh(t.baseIRI)))}get _inDefaultGraph(){return Ws.equals(this._graph)}_write(e,t){this._outputStream.write(e,"utf8",t)}_writeQuad(e,t,n,a,i){try{a.equals(this._graph)||(this._write((this._subject===null?"":this._inDefaultGraph?`.
`:`
}
`)+(Ws.equals(a)?"":`${this._encodeIriOrBlank(a)} {
`)),this._graph=a,this._subject=null),e.equals(this._subject)?t.equals(this._predicate)?this._write(`, ${this._encodeObject(n)}`,i):this._write(`;
    ${this._encodePredicate(this._predicate=t)} ${this._encodeObject(n)}`,i):this._write(`${(this._subject===null?"":`.
`)+this._encodeSubject(this._subject=e)} ${this._encodePredicate(this._predicate=t)} ${this._encodeObject(n)}`,i)}catch(o){i&&i(o)}}_writeQuadLine(e,t,n,a,i){delete this._prefixMatch,this._write(this.quadToString(e,t,n,a),i)}quadToString(e,t,n,a){return`${this._encodeSubject(e)} ${this._encodeIriOrBlank(t)} ${this._encodeObject(n)}${a&&a.value?` ${this._encodeIriOrBlank(a)} .
`:` .
`}`}quadsToString(e){let t="";for(const n of e)t+=this.quadToString(n.subject,n.predicate,n.object,n.graph);return t}_encodeSubject(e){return e.termType==="Quad"?this._encodeQuad(e):this._encodeIriOrBlank(e)}_encodeIriOrBlank(e){if(e.termType!=="NamedNode")return this._lists&&e.value in this._lists&&(e=this.list(this._lists[e.value])),"id"in e?e.id:`_:${e.value}`;let t=e.value;this._baseIri&&(t=this._baseIri.toRelative(t)),gm.test(t)&&(t=t.replace(mm,ym));const n=this._prefixRegex.exec(t);return n?n[1]?this._prefixIRIs[n[1]]+n[2]:t:`<${t}>`}_encodeLiteral(e){let t=e.value;if(gm.test(t)&&(t=t.replace(mm,ym)),e.language)return`"${t}"@${e.language}`;if(this._lineMode){if(e.datatype.value===Ii.string)return`"${t}"`}else switch(e.datatype.value){case Ii.string:return`"${t}"`;case Ii.boolean:if(t==="true"||t==="false")return t;break;case Ii.integer:if(/^[+-]?\d+$/.test(t))return t;break;case Ii.decimal:if(/^[+-]?\d*\.\d+$/.test(t))return t;break;case Ii.double:if(/^[+-]?(?:\d+\.\d*|\.?\d+)[eE][+-]?\d+$/.test(t))return t;break}return`"${t}"^^${this._encodeIriOrBlank(e.datatype)}`}_encodePredicate(e){return e.value===DE.type?"a":this._encodeIriOrBlank(e)}_encodeObject(e){switch(e.termType){case"Quad":return this._encodeQuad(e);case"Literal":return this._encodeLiteral(e);default:return this._encodeIriOrBlank(e)}}_encodeQuad({subject:e,predicate:t,object:n,graph:a}){return`<<${this._encodeSubject(e)} ${this._encodePredicate(t)} ${this._encodeObject(n)}${RE(a)?"":` ${this._encodeIriOrBlank(a)}`}>>`}_blockedWrite(){throw new Error("Cannot write because the writer has been closed.")}addQuad(e,t,n,a,i){n===void 0?this._writeQuad(e.subject,e.predicate,e.object,e.graph,t):typeof a=="function"?this._writeQuad(e,t,n,Ws,a):this._writeQuad(e,t,n,a||Ws,i)}addQuads(e){for(let t=0;t<e.length;t++)this.addQuad(e[t])}addPrefix(e,t,n){const a={};a[e]=t,this.addPrefixes(a,n)}addPrefixes(e,t){if(!this._prefixIRIs)return t&&t();let n=!1;for(let a in e){let i=e[a];typeof i!="string"&&(i=i.value),n=!0,this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null,this._graph=""),this._prefixIRIs[i]=a+=":",this._write(`@prefix ${a} <${i}>.
`)}if(n){let a="",i="";for(const o in this._prefixIRIs)a+=a?`|${o}`:o,i+=(i?"|":"")+this._prefixIRIs[o];a=su(a),this._prefixRegex=new RegExp(`^(?:${i})[^/]*$|^(${a})([_a-zA-Z0-9][\\-_a-zA-Z0-9]*)$`)}this._write(n?`
`:"",t)}blank(e,t){let n=e,a,i;switch(e===void 0?n=[]:e.termType?n=[{predicate:e,object:t}]:"length"in e||(n=[e]),i=n.length){case 0:return new Gs("[]");case 1:if(a=n[0],!(a.object instanceof Gs))return new Gs(`[ ${this._encodePredicate(a.predicate)} ${this._encodeObject(a.object)} ]`);default:let o="[";for(let l=0;l<i;l++)a=n[l],a.predicate.equals(e)?o+=`, ${this._encodeObject(a.object)}`:(o+=`${(l?`;
  `:`
  `)+this._encodePredicate(a.predicate)} ${this._encodeObject(a.object)}`,e=a.predicate);return new Gs(`${o}
]`)}}list(e){const t=e&&e.length||0,n=new Array(t);for(let a=0;a<t;a++)n[a]=this._encodeObject(e[a]);return new Gs(`(${n.join(" ")})`)}end(e){this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null),this._write=this._blockedWrite;let t=e&&((n,a)=>{t=null,e(n,a)});if(this._endStream)try{return this._outputStream.end(t)}catch{}t&&t()}}function ym(r){let e=NE[r];return e===void 0&&(r.length===1?(e=r.charCodeAt(0).toString(16),e="\\u0000".substr(0,6-e.length)+e):(e=((r.charCodeAt(0)-55296)*1024+r.charCodeAt(1)+9216).toString(16),e="\\U00000000".substr(0,10-e.length)+e)),e}const{namedNode:Tr,literal:Hs,quad:dn}=Gh,ot={base:"https://example.org/latexkg#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",owl:"http://www.w3.org/2002/07/owl#"};function OE(r){return JSON.stringify({version:1,graph:r},null,2)}async function ME(r){var t,n;const e=new LE({prefixes:{latexkg:ot.base,rdf:ot.rdf,rdfs:ot.rdfs,owl:ot.owl}});for(const a of r.nodes){const i=Ks(a.id);e.addQuad(dn(i,Tr(`${ot.rdf}type`),Tr(`${ot.base}${a.type}`))),e.addQuad(dn(i,Tr(`${ot.rdfs}label`),Hs(a.title))),a.content&&e.addQuad(dn(i,Tr(`${ot.base}content`),Hs(a.content))),(t=a.source)!=null&&t.file&&e.addQuad(dn(i,Tr(`${ot.base}sourceFile`),Hs(a.source.file))),(n=a.source)!=null&&n.latexLabel&&e.addQuad(dn(i,Tr(`${ot.base}latexLabel`),Hs(a.source.latexLabel)))}for(const a of r.edges){const i=FE(a.type);if(e.addQuad(dn(Ks(a.source),i,Ks(a.target))),a.evidence){const o=Tr(`${ot.base}stmt:${encodeURIComponent(`${a.source}|${a.type}|${a.target}`)}`);e.addQuad(dn(o,Tr(`${ot.rdf}type`),Tr(`${ot.rdf}Statement`))),e.addQuad(dn(o,Tr(`${ot.rdf}subject`),Ks(a.source))),e.addQuad(dn(o,Tr(`${ot.rdf}predicate`),i)),e.addQuad(dn(o,Tr(`${ot.rdf}object`),Ks(a.target))),e.addQuad(dn(o,Tr(`${ot.base}evidence`),Hs(a.evidence)))}}return await new Promise((a,i)=>{e.end((o,l)=>{o?i(o):a(l)})})}function zE(r){const e=c=>c.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"),t=new Set(r.nodes.map(c=>c.type)),n=new Set(r.edges.map(c=>c.type)),a=[...t].map(c=>`  <owl:Class rdf:about="${ot.base}${c}"/>`).join(`
`),i=[...n].map(c=>`  <owl:ObjectProperty rdf:about="${ot.base}${c}"/>`).join(`
`),o=r.nodes.map(c=>{const f=`${ot.base}node:${encodeURIComponent(c.id)}`,d=e(c.title),h=c.content?`
    <latexkg:content>${e(c.content)}</latexkg:content>`:"";return`  <owl:NamedIndividual rdf:about="${f}">
    <rdf:type rdf:resource="${ot.base}${c.type}"/>
    <rdfs:label>${d}</rdfs:label>${h}
  </owl:NamedIndividual>`}).join(`
`),l=r.edges.map(c=>{const f=`${ot.base}node:${encodeURIComponent(c.source)}`,d=`${ot.base}node:${encodeURIComponent(c.target)}`;return`  <rdf:Description rdf:about="${f}">
    <latexkg:${c.type} rdf:resource="${d}"/>
  </rdf:Description>`}).join(`
`);return`<?xml version="1.0" encoding="UTF-8"?>
<rdf:RDF
  xmlns:rdf="${ot.rdf}"
  xmlns:rdfs="${ot.rdfs}"
  xmlns:owl="${ot.owl}"
  xmlns:latexkg="${ot.base}">
  <owl:Ontology rdf:about="${ot.base}"/>
${a?`
`+a:""}${i?`
`+i:""}${o?`
`+o:""}${l?`
`+l:""}
</rdf:RDF>
`}function Ks(r){return Tr(`${ot.base}node:${encodeURIComponent(r)}`)}function FE(r){return Tr(`${ot.base}${r}`)}function $E(r){var t,n;const e=JSON.parse(r);if((t=e==null?void 0:e.graph)!=null&&t.nodes&&((n=e==null?void 0:e.graph)!=null&&n.edges))return e.graph;if(e!=null&&e.nodes&&(e!=null&&e.edges))return e;throw new Error("JSON  {graph:{nodes,edges}}  {nodes,edges}")}async function UE(r){const t=new c1().parse(r),n=new Map,a=[],i=c=>{const f=`${ot.base}node:`;return c.startsWith(f)?decodeURIComponent(c.slice(f.length)):null},o=c=>c.startsWith(ot.base);for(const c of t){const f=c.subject.value,d=c.predicate.value,h=c.object,p=i(f);if(!p)continue;const g=n.get(p)??{id:p};if(n.set(p,g),d===`${ot.rdf}type`&&h.termType==="NamedNode"&&h.value.startsWith(ot.base)){const m=h.value.slice(ot.base.length);g.type=m}else if(d===`${ot.rdfs}label`&&h.termType==="Literal")g.title=h.value;else if(d===`${ot.base}content`&&h.termType==="Literal")g.content=h.value;else if(d===`${ot.base}sourceFile`&&h.termType==="Literal")g.source={...g.source,file:h.value};else if(d===`${ot.base}latexLabel`&&h.termType==="Literal")g.source={...g.source,latexLabel:h.value};else if(o(d)&&h.termType==="NamedNode"){const m=d.slice(ot.base.length),w=i(h.value);w&&a.push({type:m,source:p,target:w})}}const l=[];for(const[c,f]of n.entries())!f.type||!f.title?l.push({id:c,type:f.type??"Conclusion",title:f.title??c,content:f.content,source:f.source}):l.push(f);return{nodes:l,edges:a}}function jE({onAfterImport:r}){const e=Ke(o=>o.graph),[t,n]=Et.useState(null);function a(o,l,c="application/octet-stream"){const f=new Blob([l],{type:c}),d=URL.createObjectURL(f),h=document.createElement("a");h.href=d,h.download=o,h.click(),setTimeout(()=>URL.revokeObjectURL(d),5e3)}async function i(o){n(null);try{const l=await o.text();let c=null;if(o.name.toLowerCase().endsWith(".json"))c=$E(l);else if(o.name.toLowerCase().endsWith(".ttl")||o.name.toLowerCase().endsWith(".turtle"))c=await UE(l);else throw new Error(" .json  .ttl(turtle)");Ke.getState().setGraph(c),Ke.getState().setInfo(`nodes=${c.nodes.length}, edges=${c.edges.length}`),n(""),r==null||r()}catch(l){const c=String((l==null?void 0:l.message)??l);n(`${c}`),Ke.getState().setError(c)}}return ue.jsxs("div",{className:"card",children:[ue.jsx("div",{className:"h1",children:" /  "}),ue.jsx("div",{className:"muted",children:" JSON / RDF(Turtle) / OWL(RDF/XML) JSON / Turtle"}),ue.jsxs("div",{className:"row",style:{marginTop:10},children:[ue.jsx("button",{className:"btn",onClick:()=>a("graph.json",OE(e),"application/json"),children:" JSON"}),ue.jsx("button",{className:"btn",onClick:async()=>a("graph.ttl",await ME(e),"text/turtle"),children:" RDF(TTL)"}),ue.jsx("button",{className:"btn",onClick:()=>a("graph.owl.xml",zE(e),"application/rdf+xml"),children:" OWL"})]}),ue.jsx("div",{className:"label",children:".json / .ttl"}),ue.jsx("input",{className:"input",type:"file",accept:".json,.ttl,.turtle,application/json,text/turtle",onChange:o=>{var c;const l=(c=o.target.files)==null?void 0:c[0];l&&i(l)}}),t?ue.jsx("div",{className:"muted",style:{marginTop:8},children:t}):null]})}function kh(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function VE(r){if(Array.isArray(r))return r}function qE(r){if(Array.isArray(r))return kh(r)}function ka(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function WE(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,h1(n.key),n)}}function Ca(r,e,t){return e&&WE(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function Fr(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=Kh(r))||e){t&&(r=t);var n=0,a=function(){};return{s:a,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(c){throw c},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i,o=!0,l=!1;return{s:function(){t=t.call(r)},n:function(){var c=t.next();return o=c.done,c},e:function(c){l=!0,i=c},f:function(){try{o||t.return==null||t.return()}finally{if(l)throw i}}}}function d1(r,e,t){return(e=h1(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function GE(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function HE(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,a,i,o,l=[],c=!0,f=!1;try{if(i=(t=t.call(r)).next,e===0){if(Object(t)!==t)return;c=!1}else for(;!(c=(n=i.call(t)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){f=!0,a=d}finally{try{if(!c&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(f)throw a}}return l}}function KE(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XE(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ht(r,e){return VE(r)||HE(r,e)||Kh(r,e)||KE()}function yu(r){return qE(r)||GE(r)||Kh(r)||XE()}function ZE(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}function h1(r){var e=ZE(r,"string");return typeof e=="symbol"?e:e+""}function Jt(r){"@babel/helpers - typeof";return Jt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jt(r)}function Kh(r,e){if(r){if(typeof r=="string")return kh(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?kh(r,e):void 0}}var Yt=typeof window>"u"?null:window,wm=Yt?Yt.navigator:null;Yt&&Yt.document;var YE=Jt(""),v1=Jt({}),QE=Jt(function(){}),JE=typeof HTMLElement>"u"?"undefined":Jt(HTMLElement),So=function(e){return e&&e.instanceString&&Ft(e.instanceString)?e.instanceString():null},Qe=function(e){return e!=null&&Jt(e)==YE},Ft=function(e){return e!=null&&Jt(e)===QE},wt=function(e){return!Hr(e)&&(Array.isArray?Array.isArray(e):e!=null&&e instanceof Array)},dt=function(e){return e!=null&&Jt(e)===v1&&!wt(e)&&e.constructor===Object},e_=function(e){return e!=null&&Jt(e)===v1},$e=function(e){return e!=null&&Jt(e)===Jt(1)&&!isNaN(e)},t_=function(e){return $e(e)&&Math.floor(e)===e},wu=function(e){if(JE!=="undefined")return e!=null&&e instanceof HTMLElement},Hr=function(e){return ko(e)||p1(e)},ko=function(e){return So(e)==="collection"&&e._private.single},p1=function(e){return So(e)==="collection"&&!e._private.single},Xh=function(e){return So(e)==="core"},g1=function(e){return So(e)==="stylesheet"},r_=function(e){return So(e)==="event"},wa=function(e){return e==null?!0:!!(e===""||e.match(/^\s+$/))},n_=function(e){return typeof HTMLElement>"u"?!1:e instanceof HTMLElement},a_=function(e){return dt(e)&&$e(e.x1)&&$e(e.x2)&&$e(e.y1)&&$e(e.y2)},i_=function(e){return e_(e)&&Ft(e.then)},s_=function(){return wm&&wm.userAgent.match(/msie|trident|edge/i)},Zi=function(e,t){t||(t=function(){if(arguments.length===1)return arguments[0];if(arguments.length===0)return"undefined";for(var i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);return i.join("$")});var n=function(){var i=this,o=arguments,l,c=t.apply(i,o),f=n.cache;return(l=f[c])||(l=f[c]=e.apply(i,o)),l};return n.cache={},n},Zh=Zi(function(r){return r.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}),Nu=Zi(function(r){return r.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}),m1=Zi(function(r,e){return r+e[0].toUpperCase()+e.substring(1)},function(r,e){return r+"$"+e}),xm=function(e){return wa(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},va=function(e,t){return e.slice(-1*t.length)===t},Qt="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",o_="rgb[a]?\\(("+Qt+"[%]?)\\s*,\\s*("+Qt+"[%]?)\\s*,\\s*("+Qt+"[%]?)(?:\\s*,\\s*("+Qt+"))?\\)",l_="rgb[a]?\\((?:"+Qt+"[%]?)\\s*,\\s*(?:"+Qt+"[%]?)\\s*,\\s*(?:"+Qt+"[%]?)(?:\\s*,\\s*(?:"+Qt+"))?\\)",u_="hsl[a]?\\(("+Qt+")\\s*,\\s*("+Qt+"[%])\\s*,\\s*("+Qt+"[%])(?:\\s*,\\s*("+Qt+"))?\\)",c_="hsl[a]?\\((?:"+Qt+")\\s*,\\s*(?:"+Qt+"[%])\\s*,\\s*(?:"+Qt+"[%])(?:\\s*,\\s*(?:"+Qt+"))?\\)",f_="\\#[0-9a-fA-F]{3}",d_="\\#[0-9a-fA-F]{6}",y1=function(e,t){return e<t?-1:e>t?1:0},h_=function(e,t){return-1*y1(e,t)},tt=Object.assign!=null?Object.assign.bind(Object):function(r){for(var e=arguments,t=1;t<e.length;t++){var n=e[t];if(n!=null)for(var a=Object.keys(n),i=0;i<a.length;i++){var o=a[i];r[o]=n[o]}}return r},v_=function(e){if(!(!(e.length===4||e.length===7)||e[0]!=="#")){var t=e.length===4,n,a,i,o=16;return t?(n=parseInt(e[1]+e[1],o),a=parseInt(e[2]+e[2],o),i=parseInt(e[3]+e[3],o)):(n=parseInt(e[1]+e[2],o),a=parseInt(e[3]+e[4],o),i=parseInt(e[5]+e[6],o)),[n,a,i]}},p_=function(e){var t,n,a,i,o,l,c,f;function d(m,w,x){return x<0&&(x+=1),x>1&&(x-=1),x<1/6?m+(w-m)*6*x:x<1/2?w:x<2/3?m+(w-m)*(2/3-x)*6:m}var h=new RegExp("^"+u_+"$").exec(e);if(h){if(n=parseInt(h[1]),n<0?n=(360- -1*n%360)%360:n>360&&(n=n%360),n/=360,a=parseFloat(h[2]),a<0||a>100||(a=a/100,i=parseFloat(h[3]),i<0||i>100)||(i=i/100,o=h[4],o!==void 0&&(o=parseFloat(o),o<0||o>1)))return;if(a===0)l=c=f=Math.round(i*255);else{var p=i<.5?i*(1+a):i+a-i*a,g=2*i-p;l=Math.round(255*d(g,p,n+1/3)),c=Math.round(255*d(g,p,n)),f=Math.round(255*d(g,p,n-1/3))}t=[l,c,f,o]}return t},g_=function(e){var t,n=new RegExp("^"+o_+"$").exec(e);if(n){t=[];for(var a=[],i=1;i<=3;i++){var o=n[i];if(o[o.length-1]==="%"&&(a[i]=!0),o=parseFloat(o),a[i]&&(o=o/100*255),o<0||o>255)return;t.push(Math.floor(o))}var l=a[1]||a[2]||a[3],c=a[1]&&a[2]&&a[3];if(l&&!c)return;var f=n[4];if(f!==void 0){if(f=parseFloat(f),f<0||f>1)return;t.push(f)}}return t},m_=function(e){return y_[e.toLowerCase()]},w1=function(e){return(wt(e)?e:null)||m_(e)||v_(e)||g_(e)||p_(e)},y_={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},x1=function(e){for(var t=e.map,n=e.keys,a=n.length,i=0;i<a;i++){var o=n[i];if(dt(o))throw Error("Tried to set map with object key");i<n.length-1?(t[o]==null&&(t[o]={}),t=t[o]):t[o]=e.value}},b1=function(e){for(var t=e.map,n=e.keys,a=n.length,i=0;i<a;i++){var o=n[i];if(dt(o))throw Error("Tried to get map with object key");if(t=t[o],t==null)return t}return t},Gl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Co(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Kf,bm;function To(){if(bm)return Kf;bm=1;function r(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return Kf=r,Kf}var Xf,Em;function w_(){if(Em)return Xf;Em=1;var r=typeof Gl=="object"&&Gl&&Gl.Object===Object&&Gl;return Xf=r,Xf}var Zf,_m;function Lu(){if(_m)return Zf;_m=1;var r=w_(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=r||e||Function("return this")();return Zf=t,Zf}var Yf,Sm;function x_(){if(Sm)return Yf;Sm=1;var r=Lu(),e=function(){return r.Date.now()};return Yf=e,Yf}var Qf,km;function b_(){if(km)return Qf;km=1;var r=/\s/;function e(t){for(var n=t.length;n--&&r.test(t.charAt(n)););return n}return Qf=e,Qf}var Jf,Cm;function E_(){if(Cm)return Jf;Cm=1;var r=b_(),e=/^\s+/;function t(n){return n&&n.slice(0,r(n)+1).replace(e,"")}return Jf=t,Jf}var ed,Tm;function Yh(){if(Tm)return ed;Tm=1;var r=Lu(),e=r.Symbol;return ed=e,ed}var td,Pm;function __(){if(Pm)return td;Pm=1;var r=Yh(),e=Object.prototype,t=e.hasOwnProperty,n=e.toString,a=r?r.toStringTag:void 0;function i(o){var l=t.call(o,a),c=o[a];try{o[a]=void 0;var f=!0}catch{}var d=n.call(o);return f&&(l?o[a]=c:delete o[a]),d}return td=i,td}var rd,Rm;function S_(){if(Rm)return rd;Rm=1;var r=Object.prototype,e=r.toString;function t(n){return e.call(n)}return rd=t,rd}var nd,Bm;function E1(){if(Bm)return nd;Bm=1;var r=Yh(),e=__(),t=S_(),n="[object Null]",a="[object Undefined]",i=r?r.toStringTag:void 0;function o(l){return l==null?l===void 0?a:n:i&&i in Object(l)?e(l):t(l)}return nd=o,nd}var ad,Am;function k_(){if(Am)return ad;Am=1;function r(e){return e!=null&&typeof e=="object"}return ad=r,ad}var id,Im;function Po(){if(Im)return id;Im=1;var r=E1(),e=k_(),t="[object Symbol]";function n(a){return typeof a=="symbol"||e(a)&&r(a)==t}return id=n,id}var sd,Dm;function C_(){if(Dm)return sd;Dm=1;var r=E_(),e=To(),t=Po(),n=NaN,a=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt;function c(f){if(typeof f=="number")return f;if(t(f))return n;if(e(f)){var d=typeof f.valueOf=="function"?f.valueOf():f;f=e(d)?d+"":d}if(typeof f!="string")return f===0?f:+f;f=r(f);var h=i.test(f);return h||o.test(f)?l(f.slice(2),h?2:8):a.test(f)?n:+f}return sd=c,sd}var od,Nm;function T_(){if(Nm)return od;Nm=1;var r=To(),e=x_(),t=C_(),n="Expected a function",a=Math.max,i=Math.min;function o(l,c,f){var d,h,p,g,m,w,x=0,b=!1,E=!1,_=!0;if(typeof l!="function")throw new TypeError(n);c=t(c)||0,r(f)&&(b=!!f.leading,E="maxWait"in f,p=E?a(t(f.maxWait)||0,c):p,_="trailing"in f?!!f.trailing:_);function C(F){var T=d,G=h;return d=h=void 0,x=F,g=l.apply(G,T),g}function B(F){return x=F,m=setTimeout(z,c),b?C(F):g}function L(F){var T=F-w,G=F-x,Q=c-T;return E?i(Q,p-G):Q}function A(F){var T=F-w,G=F-x;return w===void 0||T>=c||T<0||E&&G>=p}function z(){var F=e();if(A(F))return M(F);m=setTimeout(z,L(F))}function M(F){return m=void 0,_&&d?C(F):(d=h=void 0,g)}function U(){m!==void 0&&clearTimeout(m),x=0,d=w=h=m=void 0}function q(){return m===void 0?g:M(e())}function D(){var F=e(),T=A(F);if(d=arguments,h=this,w=F,T){if(m===void 0)return B(w);if(E)return clearTimeout(m),m=setTimeout(z,c),C(w)}return m===void 0&&(m=setTimeout(z,c)),g}return D.cancel=U,D.flush=q,D}return od=o,od}var P_=T_(),Ro=Co(P_),ld=Yt?Yt.performance:null,_1=ld&&ld.now?function(){return ld.now()}:function(){return Date.now()},R_=(function(){if(Yt){if(Yt.requestAnimationFrame)return function(r){Yt.requestAnimationFrame(r)};if(Yt.mozRequestAnimationFrame)return function(r){Yt.mozRequestAnimationFrame(r)};if(Yt.webkitRequestAnimationFrame)return function(r){Yt.webkitRequestAnimationFrame(r)};if(Yt.msRequestAnimationFrame)return function(r){Yt.msRequestAnimationFrame(r)}}return function(r){r&&setTimeout(function(){r(_1())},1e3/60)}})(),xu=function(e){return R_(e)},$n=_1,Xa=9261,S1=65599,ji=5381,k1=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Xa,n=t,a;a=e.next(),!a.done;)n=n*S1+a.value|0;return n},co=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Xa;return t*S1+e|0},fo=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ji;return(t<<5)+t+e|0},B_=function(e,t){return e*2097152+t},fa=function(e){return e[0]*2097152+e[1]},Hl=function(e,t){return[co(e[0],t[0]),fo(e[1],t[1])]},Lm=function(e,t){var n={value:0,done:!1},a=0,i=e.length,o={next:function(){return a<i?n.value=e[a++]:n.done=!0,n}};return k1(o,t)},Qa=function(e,t){var n={value:0,done:!1},a=0,i=e.length,o={next:function(){return a<i?n.value=e.charCodeAt(a++):n.done=!0,n}};return k1(o,t)},C1=function(){return A_(arguments)},A_=function(e){for(var t,n=0;n<e.length;n++){var a=e[n];n===0?t=Qa(a):t=Qa(a,t)}return t};function I_(r,e,t,n,a){var i=a*Math.PI/180,o=Math.cos(i)*(r-t)-Math.sin(i)*(e-n)+t,l=Math.sin(i)*(r-t)+Math.cos(i)*(e-n)+n;return{x:o,y:l}}var D_=function(e,t,n,a,i,o){return{x:(e-n)*i+n,y:(t-a)*o+a}};function N_(r,e,t){if(t===0)return r;var n=(e.x1+e.x2)/2,a=(e.y1+e.y2)/2,i=e.w/e.h,o=1/i,l=I_(r.x,r.y,n,a,t),c=D_(l.x,l.y,n,a,i,o);return{x:c.x,y:c.y}}var Om=!0,L_=console.warn!=null,O_=console.trace!=null,Qh=Number.MAX_SAFE_INTEGER||9007199254740991,T1=function(){return!0},bu=function(){return!1},Mm=function(){return 0},Jh=function(){},It=function(e){throw new Error(e)},P1=function(e){if(e!==void 0)Om=!!e;else return Om},gt=function(e){P1()&&(L_?console.warn(e):(console.log(e),O_&&console.trace()))},M_=function(e){return tt({},e)},Sn=function(e){return e==null?e:wt(e)?e.slice():dt(e)?M_(e):e},z_=function(e){return e.slice()},R1=function(e,t){for(t=e="";e++<36;t+=e*51&52?(e^15?8^Math.random()*(e^20?16:4):4).toString(16):"-");return t},F_={},B1=function(){return F_},dr=function(e){var t=Object.keys(e);return function(n){for(var a={},i=0;i<t.length;i++){var o=t[i],l=n==null?void 0:n[o];a[o]=l===void 0?e[o]:l}return a}},xa=function(e,t,n){for(var a=e.length-1;a>=0;a--)e[a]===t&&e.splice(a,1)},ev=function(e){e.splice(0,e.length)},$_=function(e,t){for(var n=0;n<t.length;n++){var a=t[n];e.push(a)}},Mr=function(e,t,n){return n&&(t=m1(n,t)),e[t]},zn=function(e,t,n,a){n&&(t=m1(n,t)),e[t]=a},U_=(function(){function r(){ka(this,r),this._obj={}}return Ca(r,[{key:"set",value:function(t,n){return this._obj[t]=n,this}},{key:"delete",value:function(t){return this._obj[t]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(t){return this._obj[t]!==void 0}},{key:"get",value:function(t){return this._obj[t]}}])})(),Fn=typeof Map<"u"?Map:U_,j_="undefined",V_=(function(){function r(e){if(ka(this,r),this._obj=Object.create(null),this.size=0,e!=null){var t;e.instanceString!=null&&e.instanceString()===this.instanceString()?t=e.toArray():t=e;for(var n=0;n<t.length;n++)this.add(t[n])}}return Ca(r,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(t){var n=this._obj;n[t]!==1&&(n[t]=1,this.size++)}},{key:"delete",value:function(t){var n=this._obj;n[t]===1&&(n[t]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(t){return this._obj[t]===1}},{key:"toArray",value:function(){var t=this;return Object.keys(this._obj).filter(function(n){return t.has(n)})}},{key:"forEach",value:function(t,n){return this.toArray().forEach(t,n)}}])})(),Ji=(typeof Set>"u"?"undefined":Jt(Set))!==j_?Set:V_,Ou=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0||t===void 0||!Xh(e)){It("An element must have a core reference and parameters set");return}var a=t.group;if(a==null&&(t.data&&t.data.source!=null&&t.data.target!=null?a="edges":a="nodes"),a!=="nodes"&&a!=="edges"){It("An element must be of type `nodes` or `edges`; you specified `"+a+"`");return}this.length=1,this[0]=this;var i=this._private={cy:e,single:!0,data:t.data||{},position:t.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:a,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!t.selected,selectable:t.selectable===void 0?!0:!!t.selectable,locked:!!t.locked,grabbed:!1,grabbable:t.grabbable===void 0?!0:!!t.grabbable,pannable:t.pannable===void 0?a==="edges":!!t.pannable,active:!1,classes:new Ji,animation:{current:[],queue:[]},rscratch:{},scratch:t.scratch||{},edges:[],children:[],parent:t.parent&&t.parent.isNode()?t.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(i.position.x==null&&(i.position.x=0),i.position.y==null&&(i.position.y=0),t.renderedPosition){var o=t.renderedPosition,l=e.pan(),c=e.zoom();i.position={x:(o.x-l.x)/c,y:(o.y-l.y)/c}}var f=[];wt(t.classes)?f=t.classes:Qe(t.classes)&&(f=t.classes.split(/\s+/));for(var d=0,h=f.length;d<h;d++){var p=f[d];!p||p===""||i.classes.add(p)}this.createEmitter(),(n===void 0||n)&&this.restore();var g=t.style||t.css;g&&(gt("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(g))},zm=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(n,a,i){var o;dt(n)&&!Hr(n)&&(o=n,n=o.roots||o.root,a=o.visit,i=o.directed),i=arguments.length===2&&!Ft(a)?a:i,a=Ft(a)?a:function(){};for(var l=this._private.cy,c=n=Qe(n)?this.filter(n):n,f=[],d=[],h={},p={},g={},m=0,w,x=this.byGroup(),b=x.nodes,E=x.edges,_=0;_<c.length;_++){var C=c[_],B=C.id();C.isNode()&&(f.unshift(C),e.bfs&&(g[B]=!0,d.push(C)),p[B]=0)}for(var L=function(){var F=e.bfs?f.shift():f.pop(),T=F.id();if(e.dfs){if(g[T])return 0;g[T]=!0,d.push(F)}var G=p[T],Q=h[T],W=Q!=null?Q.source():null,X=Q!=null?Q.target():null,Z=Q==null?void 0:F.same(W)?X[0]:W[0],te;if(te=a(F,Q,Z,m++,G),te===!0)return w=F,1;if(te===!1)return 1;for(var N=F.connectedEdges().filter(function(xe){return(!i||xe.source().same(F))&&E.has(xe)}),$=0;$<N.length;$++){var oe=N[$],ie=oe.connectedNodes().filter(function(xe){return!xe.same(F)&&b.has(xe)}),ne=ie.id();ie.length!==0&&!g[ne]&&(ie=ie[0],f.push(ie),e.bfs&&(g[ne]=!0,d.push(ie)),h[ne]=oe,p[ne]=p[T]+1)}},A;f.length!==0&&(A=L(),!(A!==0&&A===1)););for(var z=l.collection(),M=0;M<d.length;M++){var U=d[M],q=h[U.id()];q!=null&&z.push(q),z.push(U)}return{path:l.collection(z),found:l.collection(w)}}},ho={breadthFirstSearch:zm({bfs:!0}),depthFirstSearch:zm({dfs:!0})};ho.bfs=ho.breadthFirstSearch;ho.dfs=ho.depthFirstSearch;var ou={exports:{}},q_=ou.exports,Fm;function W_(){return Fm||(Fm=1,(function(r,e){(function(){var t,n,a,i,o,l,c,f,d,h,p,g,m,w,x;a=Math.floor,h=Math.min,n=function(b,E){return b<E?-1:b>E?1:0},d=function(b,E,_,C,B){var L;if(_==null&&(_=0),B==null&&(B=n),_<0)throw new Error("lo must be non-negative");for(C==null&&(C=b.length);_<C;)L=a((_+C)/2),B(E,b[L])<0?C=L:_=L+1;return[].splice.apply(b,[_,_-_].concat(E)),E},l=function(b,E,_){return _==null&&(_=n),b.push(E),w(b,0,b.length-1,_)},o=function(b,E){var _,C;return E==null&&(E=n),_=b.pop(),b.length?(C=b[0],b[0]=_,x(b,0,E)):C=_,C},f=function(b,E,_){var C;return _==null&&(_=n),C=b[0],b[0]=E,x(b,0,_),C},c=function(b,E,_){var C;return _==null&&(_=n),b.length&&_(b[0],E)<0&&(C=[b[0],E],E=C[0],b[0]=C[1],x(b,0,_)),E},i=function(b,E){var _,C,B,L,A,z;for(E==null&&(E=n),L=(function(){z=[];for(var M=0,U=a(b.length/2);0<=U?M<U:M>U;0<=U?M++:M--)z.push(M);return z}).apply(this).reverse(),A=[],C=0,B=L.length;C<B;C++)_=L[C],A.push(x(b,_,E));return A},m=function(b,E,_){var C;if(_==null&&(_=n),C=b.indexOf(E),C!==-1)return w(b,0,C,_),x(b,C,_)},p=function(b,E,_){var C,B,L,A,z;if(_==null&&(_=n),B=b.slice(0,E),!B.length)return B;for(i(B,_),z=b.slice(E),L=0,A=z.length;L<A;L++)C=z[L],c(B,C,_);return B.sort(_).reverse()},g=function(b,E,_){var C,B,L,A,z,M,U,q,D;if(_==null&&(_=n),E*10<=b.length){if(L=b.slice(0,E).sort(_),!L.length)return L;for(B=L[L.length-1],U=b.slice(E),A=0,M=U.length;A<M;A++)C=U[A],_(C,B)<0&&(d(L,C,0,null,_),L.pop(),B=L[L.length-1]);return L}for(i(b,_),D=[],z=0,q=h(E,b.length);0<=q?z<q:z>q;0<=q?++z:--z)D.push(o(b,_));return D},w=function(b,E,_,C){var B,L,A;for(C==null&&(C=n),B=b[_];_>E;){if(A=_-1>>1,L=b[A],C(B,L)<0){b[_]=L,_=A;continue}break}return b[_]=B},x=function(b,E,_){var C,B,L,A,z;for(_==null&&(_=n),B=b.length,z=E,L=b[E],C=2*E+1;C<B;)A=C+1,A<B&&!(_(b[C],b[A])<0)&&(C=A),b[E]=b[C],E=C,C=2*E+1;return b[E]=L,w(b,z,E,_)},t=(function(){b.push=l,b.pop=o,b.replace=f,b.pushpop=c,b.heapify=i,b.updateItem=m,b.nlargest=p,b.nsmallest=g;function b(E){this.cmp=E??n,this.nodes=[]}return b.prototype.push=function(E){return l(this.nodes,E,this.cmp)},b.prototype.pop=function(){return o(this.nodes,this.cmp)},b.prototype.peek=function(){return this.nodes[0]},b.prototype.contains=function(E){return this.nodes.indexOf(E)!==-1},b.prototype.replace=function(E){return f(this.nodes,E,this.cmp)},b.prototype.pushpop=function(E){return c(this.nodes,E,this.cmp)},b.prototype.heapify=function(){return i(this.nodes,this.cmp)},b.prototype.updateItem=function(E){return m(this.nodes,E,this.cmp)},b.prototype.clear=function(){return this.nodes=[]},b.prototype.empty=function(){return this.nodes.length===0},b.prototype.size=function(){return this.nodes.length},b.prototype.clone=function(){var E;return E=new b,E.nodes=this.nodes.slice(0),E},b.prototype.toArray=function(){return this.nodes.slice(0)},b.prototype.insert=b.prototype.push,b.prototype.top=b.prototype.peek,b.prototype.front=b.prototype.peek,b.prototype.has=b.prototype.contains,b.prototype.copy=b.prototype.clone,b})(),(function(b,E){return r.exports=E()})(this,function(){return t})}).call(q_)})(ou)),ou.exports}var ud,$m;function G_(){return $m||($m=1,ud=W_()),ud}var H_=G_(),Bo=Co(H_),K_=dr({root:null,weight:function(e){return 1},directed:!1}),X_={dijkstra:function(e){if(!dt(e)){var t=arguments;e={root:t[0],weight:t[1],directed:t[2]}}var n=K_(e),a=n.root,i=n.weight,o=n.directed,l=this,c=i,f=Qe(a)?this.filter(a)[0]:a[0],d={},h={},p={},g=this.byGroup(),m=g.nodes,w=g.edges;w.unmergeBy(function(G){return G.isLoop()});for(var x=function(Q){return d[Q.id()]},b=function(Q,W){d[Q.id()]=W,E.updateItem(Q)},E=new Bo(function(G,Q){return x(G)-x(Q)}),_=0;_<m.length;_++){var C=m[_];d[C.id()]=C.same(f)?0:1/0,E.push(C)}for(var B=function(Q,W){for(var X=(o?Q.edgesTo(W):Q.edgesWith(W)).intersect(w),Z=1/0,te,N=0;N<X.length;N++){var $=X[N],oe=c($);(oe<Z||!te)&&(Z=oe,te=$)}return{edge:te,dist:Z}};E.size()>0;){var L=E.pop(),A=x(L),z=L.id();if(p[z]=A,A!==1/0)for(var M=L.neighborhood().intersect(m),U=0;U<M.length;U++){var q=M[U],D=q.id(),F=B(L,q),T=A+F.dist;T<x(q)&&(b(q,T),h[D]={node:L,edge:F.edge})}}return{distanceTo:function(Q){var W=Qe(Q)?m.filter(Q)[0]:Q[0];return p[W.id()]},pathTo:function(Q){var W=Qe(Q)?m.filter(Q)[0]:Q[0],X=[],Z=W,te=Z.id();if(W.length>0)for(X.unshift(W);h[te];){var N=h[te];X.unshift(N.edge),X.unshift(N.node),Z=N.node,te=Z.id()}return l.spawn(X)}}}},Z_={kruskal:function(e){e=e||function(_){return 1};for(var t=this.byGroup(),n=t.nodes,a=t.edges,i=n.length,o=new Array(i),l=n,c=function(C){for(var B=0;B<o.length;B++){var L=o[B];if(L.has(C))return B}},f=0;f<i;f++)o[f]=this.spawn(n[f]);for(var d=a.sort(function(_,C){return e(_)-e(C)}),h=0;h<d.length;h++){var p=d[h],g=p.source()[0],m=p.target()[0],w=c(g),x=c(m),b=o[w],E=o[x];w!==x&&(l.merge(p),b.merge(E),o.splice(x,1))}return l}},Y_=dr({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),Q_={aStar:function(e){var t=this.cy(),n=Y_(e),a=n.root,i=n.goal,o=n.heuristic,l=n.directed,c=n.weight;a=t.collection(a)[0],i=t.collection(i)[0];var f=a.id(),d=i.id(),h={},p={},g={},m=new Bo(function(te,N){return p[te.id()]-p[N.id()]}),w=new Ji,x={},b={},E=function(N,$){m.push(N),w.add($)},_,C,B=function(){_=m.pop(),C=_.id(),w.delete(C)},L=function(N){return w.has(N)};E(a,f),h[f]=0,p[f]=o(a);for(var A=0;m.size()>0;){if(B(),A++,C===d){for(var z=[],M=i,U=d,q=b[U];z.unshift(M),q!=null&&z.unshift(q),M=x[U],M!=null;)U=M.id(),q=b[U];return{found:!0,distance:h[C],path:this.spawn(z),steps:A}}g[C]=!0;for(var D=_._private.edges,F=0;F<D.length;F++){var T=D[F];if(this.hasElementWithId(T.id())&&!(l&&T.data("source")!==C)){var G=T.source(),Q=T.target(),W=G.id()!==C?G:Q,X=W.id();if(this.hasElementWithId(X)&&!g[X]){var Z=h[C]+c(T);if(!L(X)){h[X]=Z,p[X]=Z+o(W),E(W,X),x[X]=_,b[X]=T;continue}Z<h[X]&&(h[X]=Z,p[X]=Z+o(W),x[X]=_,b[X]=T)}}}}return{found:!1,distance:void 0,path:void 0,steps:A}}},J_=dr({weight:function(e){return 1},directed:!1}),eS={floydWarshall:function(e){for(var t=this.cy(),n=J_(e),a=n.weight,i=n.directed,o=a,l=this.byGroup(),c=l.nodes,f=l.edges,d=c.length,h=d*d,p=function(oe){return c.indexOf(oe)},g=function(oe){return c[oe]},m=new Array(h),w=0;w<h;w++){var x=w%d,b=(w-x)/d;b===x?m[w]=0:m[w]=1/0}for(var E=new Array(h),_=new Array(h),C=0;C<f.length;C++){var B=f[C],L=B.source()[0],A=B.target()[0];if(L!==A){var z=p(L),M=p(A),U=z*d+M,q=o(B);if(m[U]>q&&(m[U]=q,E[U]=M,_[U]=B),!i){var D=M*d+z;!i&&m[D]>q&&(m[D]=q,E[D]=z,_[D]=B)}}}for(var F=0;F<d;F++)for(var T=0;T<d;T++)for(var G=T*d+F,Q=0;Q<d;Q++){var W=T*d+Q,X=F*d+Q;m[G]+m[X]<m[W]&&(m[W]=m[G]+m[X],E[W]=E[G])}var Z=function(oe){return(Qe(oe)?t.filter(oe):oe)[0]},te=function(oe){return p(Z(oe))},N={distance:function(oe,ie){var ne=te(oe),xe=te(ie);return m[ne*d+xe]},path:function(oe,ie){var ne=te(oe),xe=te(ie),Pe=g(ne);if(ne===xe)return Pe.collection();if(E[ne*d+xe]==null)return t.collection();var Ce=t.collection(),me=ne,fe;for(Ce.merge(Pe);ne!==xe;)me=ne,ne=E[ne*d+xe],fe=_[me*d+ne],Ce.merge(fe),Ce.merge(g(ne));return Ce}};return N}},tS=dr({weight:function(e){return 1},directed:!1,root:null}),rS={bellmanFord:function(e){var t=this,n=tS(e),a=n.weight,i=n.directed,o=n.root,l=a,c=this,f=this.cy(),d=this.byGroup(),h=d.edges,p=d.nodes,g=p.length,m=new Fn,w=!1,x=[];o=f.collection(o)[0],h.unmergeBy(function(Y){return Y.isLoop()});for(var b=h.length,E=function(K){var ae=m.get(K.id());return ae||(ae={},m.set(K.id(),ae)),ae},_=function(K){return(Qe(K)?f.$(K):K)[0]},C=function(K){return E(_(K)).dist},B=function(K){for(var ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o,ve=_(K),ye=[],se=ve;;){if(se==null)return t.spawn();var Be=E(se),Ie=Be.edge,Ae=Be.pred;if(ye.unshift(se[0]),se.same(ae)&&ye.length>0)break;Ie!=null&&ye.unshift(Ie),se=Ae}return c.spawn(ye)},L=0;L<g;L++){var A=p[L],z=E(A);A.same(o)?z.dist=0:z.dist=1/0,z.pred=null,z.edge=null}for(var M=!1,U=function(K,ae,ve,ye,se,Be){var Ie=ye.dist+Be;Ie<se.dist&&!ve.same(ye.edge)&&(se.dist=Ie,se.pred=K,se.edge=ve,M=!0)},q=1;q<g;q++){M=!1;for(var D=0;D<b;D++){var F=h[D],T=F.source(),G=F.target(),Q=l(F),W=E(T),X=E(G);U(T,G,F,W,X,Q),i||U(G,T,F,X,W,Q)}if(!M)break}if(M)for(var Z=[],te=0;te<b;te++){var N=h[te],$=N.source(),oe=N.target(),ie=l(N),ne=E($).dist,xe=E(oe).dist;if(ne+ie<xe||!i&&xe+ie<ne)if(w||(gt("Graph contains a negative weight cycle for Bellman-Ford"),w=!0),e.findNegativeWeightCycles!==!1){var Pe=[];ne+ie<xe&&Pe.push($),!i&&xe+ie<ne&&Pe.push(oe);for(var Ce=Pe.length,me=0;me<Ce;me++){var fe=Pe[me],he=[fe];he.push(E(fe).edge);for(var Ee=E(fe).pred;he.indexOf(Ee)===-1;)he.push(Ee),he.push(E(Ee).edge),Ee=E(Ee).pred;he=he.slice(he.indexOf(Ee));for(var Re=he[0].id(),I=0,pe=2;pe<he.length;pe+=2)he[pe].id()<Re&&(Re=he[pe].id(),I=pe);he=he.slice(I).concat(he.slice(0,I)),he.push(he[0]);var ge=he.map(function(Y){return Y.id()}).join(",");Z.indexOf(ge)===-1&&(x.push(c.spawn(he)),Z.push(ge))}}else break}return{distanceTo:C,pathTo:B,hasNegativeWeightCycle:w,negativeWeightCycles:x}}},nS=Math.sqrt(2),aS=function(e,t,n){n.length===0&&It("Karger-Stein must be run on a connected (sub)graph");for(var a=n[e],i=a[1],o=a[2],l=t[i],c=t[o],f=n,d=f.length-1;d>=0;d--){var h=f[d],p=h[1],g=h[2];(t[p]===l&&t[g]===c||t[p]===c&&t[g]===l)&&f.splice(d,1)}for(var m=0;m<f.length;m++){var w=f[m];w[1]===c?(f[m]=w.slice(),f[m][1]=l):w[2]===c&&(f[m]=w.slice(),f[m][2]=l)}for(var x=0;x<t.length;x++)t[x]===c&&(t[x]=l);return f},cd=function(e,t,n,a){for(;n>a;){var i=Math.floor(Math.random()*t.length);t=aS(i,e,t),n--}return t},iS={kargerStein:function(){var e=this,t=this.byGroup(),n=t.nodes,a=t.edges;a.unmergeBy(function(X){return X.isLoop()});var i=n.length,o=a.length,l=Math.ceil(Math.pow(Math.log(i)/Math.LN2,2)),c=Math.floor(i/nS);if(i<2){It("At least 2 nodes are required for Karger-Stein algorithm");return}for(var f=[],d=0;d<o;d++){var h=a[d];f.push([d,n.indexOf(h.source()),n.indexOf(h.target())])}for(var p=1/0,g=[],m=new Array(i),w=new Array(i),x=new Array(i),b=function(Z,te){for(var N=0;N<i;N++)te[N]=Z[N]},E=0;E<=l;E++){for(var _=0;_<i;_++)w[_]=_;var C=cd(w,f.slice(),i,c),B=C.slice();b(w,x);var L=cd(w,C,c,2),A=cd(x,B,c,2);L.length<=A.length&&L.length<p?(p=L.length,g=L,b(w,m)):A.length<=L.length&&A.length<p&&(p=A.length,g=A,b(x,m))}for(var z=this.spawn(g.map(function(X){return a[X[0]]})),M=this.spawn(),U=this.spawn(),q=m[0],D=0;D<m.length;D++){var F=m[D],T=n[D];F===q?M.merge(T):U.merge(T)}var G=function(Z){var te=e.spawn();return Z.forEach(function(N){te.merge(N),N.connectedEdges().forEach(function($){e.contains($)&&!z.contains($)&&te.merge($)})}),te},Q=[G(M),G(U)],W={cut:z,components:Q,partition1:M,partition2:U};return W}},fd,sS=function(e){return{x:e.x,y:e.y}},Mu=function(e,t,n){return{x:e.x*t+n.x,y:e.y*t+n.y}},A1=function(e,t,n){return{x:(e.x-n.x)/t,y:(e.y-n.y)/t}},Vi=function(e){return{x:e[0],y:e[1]}},oS=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=1/0,i=t;i<n;i++){var o=e[i];isFinite(o)&&(a=Math.min(o,a))}return a},lS=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=-1/0,i=t;i<n;i++){var o=e[i];isFinite(o)&&(a=Math.max(o,a))}return a},uS=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=0,i=0,o=t;o<n;o++){var l=e[o];isFinite(l)&&(a+=l,i++)}return a/i},cS=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;a?e=e.slice(t,n):(n<e.length&&e.splice(n,e.length-n),t>0&&e.splice(0,t));for(var l=0,c=e.length-1;c>=0;c--){var f=e[c];o?isFinite(f)||(e[c]=-1/0,l++):e.splice(c,1)}i&&e.sort(function(p,g){return p-g});var d=e.length,h=Math.floor(d/2);return d%2!==0?e[h+1+l]:(e[h-1+l]+e[h+l])/2},fS=function(e){return Math.PI*e/180},Kl=function(e,t){return Math.atan2(t,e)-Math.PI/2},tv=Math.log2||function(r){return Math.log(r)/Math.log(2)},rv=function(e){return e>0?1:e<0?-1:0},Ja=function(e,t){return Math.sqrt(Ha(e,t))},Ha=function(e,t){var n=t.x-e.x,a=t.y-e.y;return n*n+a*a},dS=function(e){for(var t=e.length,n=0,a=0;a<t;a++)n+=e[a];for(var i=0;i<t;i++)e[i]=e[i]/n;return e},ar=function(e,t,n,a){return(1-a)*(1-a)*e+2*(1-a)*a*t+a*a*n},Gi=function(e,t,n,a){return{x:ar(e.x,t.x,n.x,a),y:ar(e.y,t.y,n.y,a)}},hS=function(e,t,n,a){var i={x:t.x-e.x,y:t.y-e.y},o=Ja(e,t),l={x:i.x/o,y:i.y/o};return n=n??0,a=a??n*o,{x:e.x+l.x*a,y:e.y+l.y*a}},vo=function(e,t,n){return Math.max(e,Math.min(n,t))},Rr=function(e){if(e==null)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(e.x1!=null&&e.y1!=null){if(e.x2!=null&&e.y2!=null&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(e.w!=null&&e.h!=null&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},vS=function(e){return{x1:e.x1,x2:e.x2,w:e.w,y1:e.y1,y2:e.y2,h:e.h}},pS=function(e){e.x1=1/0,e.y1=1/0,e.x2=-1/0,e.y2=-1/0,e.w=0,e.h=0},gS=function(e,t){e.x1=Math.min(e.x1,t.x1),e.x2=Math.max(e.x2,t.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,t.y1),e.y2=Math.max(e.y2,t.y2),e.h=e.y2-e.y1},I1=function(e,t,n){e.x1=Math.min(e.x1,t),e.x2=Math.max(e.x2,t),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,n),e.y2=Math.max(e.y2,n),e.h=e.y2-e.y1},lu=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.x1-=t,e.x2+=t,e.y1-=t,e.y2+=t,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},uu=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0],n,a,i,o;if(t.length===1)n=a=i=o=t[0];else if(t.length===2)n=i=t[0],o=a=t[1];else if(t.length===4){var l=Ht(t,4);n=l[0],a=l[1],i=l[2],o=l[3]}return e.x1-=o,e.x2+=a,e.y1-=n,e.y2+=i,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},Um=function(e,t){e.x1=t.x1,e.y1=t.y1,e.x2=t.x2,e.y2=t.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},nv=function(e,t){return!(e.x1>t.x2||t.x1>e.x2||e.x2<t.x1||t.x2<e.x1||e.y2<t.y1||t.y2<e.y1||e.y1>t.y2||t.y1>e.y2)},pa=function(e,t,n){return e.x1<=t&&t<=e.x2&&e.y1<=n&&n<=e.y2},jm=function(e,t){return pa(e,t.x,t.y)},D1=function(e,t){return pa(e,t.x1,t.y1)&&pa(e,t.x2,t.y2)},mS=(fd=Math.hypot)!==null&&fd!==void 0?fd:function(r,e){return Math.sqrt(r*r+e*e)};function yS(r,e){if(r.length<3)throw new Error("Need at least 3 vertices");var t=function(z,M){return{x:z.x+M.x,y:z.y+M.y}},n=function(z,M){return{x:z.x-M.x,y:z.y-M.y}},a=function(z,M){return{x:z.x*M,y:z.y*M}},i=function(z,M){return z.x*M.y-z.y*M.x},o=function(z){var M=mS(z.x,z.y);return M===0?{x:0,y:0}:{x:z.x/M,y:z.y/M}},l=function(z){for(var M=0,U=0;U<z.length;U++){var q=z[U],D=z[(U+1)%z.length];M+=q.x*D.y-D.x*q.y}return M/2},c=function(z,M,U,q){var D=n(M,z),F=n(q,U),T=i(D,F);if(Math.abs(T)<1e-9)return t(z,a(D,.5));var G=i(n(U,z),F)/T;return t(z,a(D,G))},f=r.map(function(A){return{x:A.x,y:A.y}});l(f)<0&&f.reverse();for(var d=f.length,h=[],p=0;p<d;p++){var g=f[p],m=f[(p+1)%d],w=n(m,g),x=o({x:w.y,y:-w.x});h.push(x)}for(var b=h.map(function(A,z){var M=t(f[z],a(A,e)),U=t(f[(z+1)%d],a(A,e));return{p1:M,p2:U}}),E=[],_=0;_<d;_++){var C=b[(_-1+d)%d],B=b[_],L=c(C.p1,C.p2,B.p1,B.p2);E.push(L)}return E}function wS(r,e,t,n,a,i){var o=PS(r,e,t,n,a),l=yS(o,i),c=Rr();return l.forEach(function(f){return I1(c,f.x,f.y)}),c}var N1=function(e,t,n,a,i,o,l){var c=arguments.length>7&&arguments[7]!==void 0?arguments[7]:"auto",f=c==="auto"?ba(i,o):c,d=i/2,h=o/2;f=Math.min(f,d,h);var p=f!==d,g=f!==h,m;if(p){var w=n-d+f-l,x=a-h-l,b=n+d-f+l,E=x;if(m=ga(e,t,n,a,w,x,b,E,!1),m.length>0)return m}if(g){var _=n+d+l,C=a-h+f-l,B=_,L=a+h-f+l;if(m=ga(e,t,n,a,_,C,B,L,!1),m.length>0)return m}if(p){var A=n-d+f-l,z=a+h+l,M=n+d-f+l,U=z;if(m=ga(e,t,n,a,A,z,M,U,!1),m.length>0)return m}if(g){var q=n-d-l,D=a-h+f-l,F=q,T=a+h-f+l;if(m=ga(e,t,n,a,q,D,F,T,!1),m.length>0)return m}var G;{var Q=n-d+f,W=a-h+f;if(G=no(e,t,n,a,Q,W,f+l),G.length>0&&G[0]<=Q&&G[1]<=W)return[G[0],G[1]]}{var X=n+d-f,Z=a-h+f;if(G=no(e,t,n,a,X,Z,f+l),G.length>0&&G[0]>=X&&G[1]<=Z)return[G[0],G[1]]}{var te=n+d-f,N=a+h-f;if(G=no(e,t,n,a,te,N,f+l),G.length>0&&G[0]>=te&&G[1]>=N)return[G[0],G[1]]}{var $=n-d+f,oe=a+h-f;if(G=no(e,t,n,a,$,oe,f+l),G.length>0&&G[0]<=$&&G[1]>=oe)return[G[0],G[1]]}return[]},xS=function(e,t,n,a,i,o,l){var c=l,f=Math.min(n,i),d=Math.max(n,i),h=Math.min(a,o),p=Math.max(a,o);return f-c<=e&&e<=d+c&&h-c<=t&&t<=p+c},bS=function(e,t,n,a,i,o,l,c,f){var d={x1:Math.min(n,l,i)-f,x2:Math.max(n,l,i)+f,y1:Math.min(a,c,o)-f,y2:Math.max(a,c,o)+f};return!(e<d.x1||e>d.x2||t<d.y1||t>d.y2)},ES=function(e,t,n,a){n-=a;var i=t*t-4*e*n;if(i<0)return[];var o=Math.sqrt(i),l=2*e,c=(-t+o)/l,f=(-t-o)/l;return[c,f]},_S=function(e,t,n,a,i){var o=1e-5;e===0&&(e=o),t/=e,n/=e,a/=e;var l,c,f,d,h,p,g,m;if(c=(3*n-t*t)/9,f=-(27*a)+t*(9*n-2*(t*t)),f/=54,l=c*c*c+f*f,i[1]=0,g=t/3,l>0){h=f+Math.sqrt(l),h=h<0?-Math.pow(-h,1/3):Math.pow(h,1/3),p=f-Math.sqrt(l),p=p<0?-Math.pow(-p,1/3):Math.pow(p,1/3),i[0]=-g+h+p,g+=(h+p)/2,i[4]=i[2]=-g,g=Math.sqrt(3)*(-p+h)/2,i[3]=g,i[5]=-g;return}if(i[5]=i[3]=0,l===0){m=f<0?-Math.pow(-f,1/3):Math.pow(f,1/3),i[0]=-g+2*m,i[4]=i[2]=-(m+g);return}c=-c,d=c*c*c,d=Math.acos(f/Math.sqrt(d)),m=2*Math.sqrt(c),i[0]=-g+m*Math.cos(d/3),i[2]=-g+m*Math.cos((d+2*Math.PI)/3),i[4]=-g+m*Math.cos((d+4*Math.PI)/3)},SS=function(e,t,n,a,i,o,l,c){var f=1*n*n-4*n*i+2*n*l+4*i*i-4*i*l+l*l+a*a-4*a*o+2*a*c+4*o*o-4*o*c+c*c,d=9*n*i-3*n*n-3*n*l-6*i*i+3*i*l+9*a*o-3*a*a-3*a*c-6*o*o+3*o*c,h=3*n*n-6*n*i+n*l-n*e+2*i*i+2*i*e-l*e+3*a*a-6*a*o+a*c-a*t+2*o*o+2*o*t-c*t,p=1*n*i-n*n+n*e-i*e+a*o-a*a+a*t-o*t,g=[];_S(f,d,h,p,g);for(var m=1e-7,w=[],x=0;x<6;x+=2)Math.abs(g[x+1])<m&&g[x]>=0&&g[x]<=1&&w.push(g[x]);w.push(1),w.push(0);for(var b=-1,E,_,C,B=0;B<w.length;B++)E=Math.pow(1-w[B],2)*n+2*(1-w[B])*w[B]*i+w[B]*w[B]*l,_=Math.pow(1-w[B],2)*a+2*(1-w[B])*w[B]*o+w[B]*w[B]*c,C=Math.pow(E-e,2)+Math.pow(_-t,2),b>=0?C<b&&(b=C):b=C;return b},kS=function(e,t,n,a,i,o){var l=[e-n,t-a],c=[i-n,o-a],f=c[0]*c[0]+c[1]*c[1],d=l[0]*l[0]+l[1]*l[1],h=l[0]*c[0]+l[1]*c[1],p=h*h/f;return h<0?d:p>f?(e-i)*(e-i)+(t-o)*(t-o):d-p},zr=function(e,t,n){for(var a,i,o,l,c,f=0,d=0;d<n.length/2;d++)if(a=n[d*2],i=n[d*2+1],d+1<n.length/2?(o=n[(d+1)*2],l=n[(d+1)*2+1]):(o=n[(d+1-n.length/2)*2],l=n[(d+1-n.length/2)*2+1]),!(a==e&&o==e))if(a>=e&&e>=o||a<=e&&e<=o)c=(e-a)/(o-a)*(l-i)+i,c>t&&f++;else continue;return f%2!==0},Un=function(e,t,n,a,i,o,l,c,f){var d=new Array(n.length),h;c[0]!=null?(h=Math.atan(c[1]/c[0]),c[0]<0?h=h+Math.PI/2:h=-h-Math.PI/2):h=c;for(var p=Math.cos(-h),g=Math.sin(-h),m=0;m<d.length/2;m++)d[m*2]=o/2*(n[m*2]*p-n[m*2+1]*g),d[m*2+1]=l/2*(n[m*2+1]*p+n[m*2]*g),d[m*2]+=a,d[m*2+1]+=i;var w;if(f>0){var x=_u(d,-f);w=Eu(x)}else w=d;return zr(e,t,w)},CS=function(e,t,n,a,i,o,l,c){for(var f=new Array(n.length*2),d=0;d<c.length;d++){var h=c[d];f[d*4+0]=h.startX,f[d*4+1]=h.startY,f[d*4+2]=h.stopX,f[d*4+3]=h.stopY;var p=Math.pow(h.cx-e,2)+Math.pow(h.cy-t,2);if(p<=Math.pow(h.radius,2))return!0}return zr(e,t,f)},Eu=function(e){for(var t=new Array(e.length/2),n,a,i,o,l,c,f,d,h=0;h<e.length/4;h++){n=e[h*4],a=e[h*4+1],i=e[h*4+2],o=e[h*4+3],h<e.length/4-1?(l=e[(h+1)*4],c=e[(h+1)*4+1],f=e[(h+1)*4+2],d=e[(h+1)*4+3]):(l=e[0],c=e[1],f=e[2],d=e[3]);var p=ga(n,a,i,o,l,c,f,d,!0);t[h*2]=p[0],t[h*2+1]=p[1]}return t},_u=function(e,t){for(var n=new Array(e.length*2),a,i,o,l,c=0;c<e.length/2;c++){a=e[c*2],i=e[c*2+1],c<e.length/2-1?(o=e[(c+1)*2],l=e[(c+1)*2+1]):(o=e[0],l=e[1]);var f=l-i,d=-(o-a),h=Math.sqrt(f*f+d*d),p=f/h,g=d/h;n[c*4]=a+p*t,n[c*4+1]=i+g*t,n[c*4+2]=o+p*t,n[c*4+3]=l+g*t}return n},TS=function(e,t,n,a,i,o){var l=n-e,c=a-t;l/=i,c/=o;var f=Math.sqrt(l*l+c*c),d=f-1;if(d<0)return[];var h=d/f;return[(n-e)*h+e,(a-t)*h+t]},Ya=function(e,t,n,a,i,o,l){return e-=i,t-=o,e/=n/2+l,t/=a/2+l,e*e+t*t<=1},no=function(e,t,n,a,i,o,l){var c=[n-e,a-t],f=[e-i,t-o],d=c[0]*c[0]+c[1]*c[1],h=2*(f[0]*c[0]+f[1]*c[1]),p=f[0]*f[0]+f[1]*f[1]-l*l,g=h*h-4*d*p;if(g<0)return[];var m=(-h+Math.sqrt(g))/(2*d),w=(-h-Math.sqrt(g))/(2*d),x=Math.min(m,w),b=Math.max(m,w),E=[];if(x>=0&&x<=1&&E.push(x),b>=0&&b<=1&&E.push(b),E.length===0)return[];var _=E[0]*c[0]+e,C=E[0]*c[1]+t;if(E.length>1){if(E[0]==E[1])return[_,C];var B=E[1]*c[0]+e,L=E[1]*c[1]+t;return[_,C,B,L]}else return[_,C]},dd=function(e,t,n){return t<=e&&e<=n||n<=e&&e<=t?e:e<=t&&t<=n||n<=t&&t<=e?t:n},ga=function(e,t,n,a,i,o,l,c,f){var d=e-i,h=n-e,p=l-i,g=t-o,m=a-t,w=c-o,x=p*g-w*d,b=h*g-m*d,E=w*h-p*m;if(E!==0){var _=x/E,C=b/E,B=.001,L=0-B,A=1+B;return L<=_&&_<=A&&L<=C&&C<=A?[e+_*h,t+_*m]:f?[e+_*h,t+_*m]:[]}else return x===0||b===0?dd(e,n,l)===l?[l,c]:dd(e,n,i)===i?[i,o]:dd(i,l,n)===n?[n,a]:[]:[]},PS=function(e,t,n,a,i){var o=[],l=a/2,c=i/2,f=t,d=n;o.push({x:f+l*e[0],y:d+c*e[1]});for(var h=1;h<e.length/2;h++)o.push({x:f+l*e[h*2],y:d+c*e[h*2+1]});return o},po=function(e,t,n,a,i,o,l,c){var f=[],d,h=new Array(n.length),p=!0;o==null&&(p=!1);var g;if(p){for(var m=0;m<h.length/2;m++)h[m*2]=n[m*2]*o+a,h[m*2+1]=n[m*2+1]*l+i;if(c>0){var w=_u(h,-c);g=Eu(w)}else g=h}else g=n;for(var x,b,E,_,C=0;C<g.length/2;C++)x=g[C*2],b=g[C*2+1],C<g.length/2-1?(E=g[(C+1)*2],_=g[(C+1)*2+1]):(E=g[0],_=g[1]),d=ga(e,t,a,i,x,b,E,_),d.length!==0&&f.push(d[0],d[1]);return f},RS=function(e,t,n,a,i,o,l,c,f){var d=[],h,p=new Array(n.length*2);f.forEach(function(E,_){_===0?(p[p.length-2]=E.startX,p[p.length-1]=E.startY):(p[_*4-2]=E.startX,p[_*4-1]=E.startY),p[_*4]=E.stopX,p[_*4+1]=E.stopY,h=no(e,t,a,i,E.cx,E.cy,E.radius),h.length!==0&&d.push(h[0],h[1])});for(var g=0;g<p.length/4;g++)h=ga(e,t,a,i,p[g*4],p[g*4+1],p[g*4+2],p[g*4+3],!1),h.length!==0&&d.push(h[0],h[1]);if(d.length>2){for(var m=[d[0],d[1]],w=Math.pow(m[0]-e,2)+Math.pow(m[1]-t,2),x=1;x<d.length/2;x++){var b=Math.pow(d[x*2]-e,2)+Math.pow(d[x*2+1]-t,2);b<=w&&(m[0]=d[x*2],m[1]=d[x*2+1],w=b)}return m}return d},Xl=function(e,t,n){var a=[e[0]-t[0],e[1]-t[1]],i=Math.sqrt(a[0]*a[0]+a[1]*a[1]),o=(i-n)/i;return o<0&&(o=1e-5),[t[0]+o*a[0],t[1]+o*a[1]]},Pr=function(e,t){var n=Ch(e,t);return n=L1(n),n},L1=function(e){for(var t,n,a=e.length/2,i=1/0,o=1/0,l=-1/0,c=-1/0,f=0;f<a;f++)t=e[2*f],n=e[2*f+1],i=Math.min(i,t),l=Math.max(l,t),o=Math.min(o,n),c=Math.max(c,n);for(var d=2/(l-i),h=2/(c-o),p=0;p<a;p++)t=e[2*p]=e[2*p]*d,n=e[2*p+1]=e[2*p+1]*h,i=Math.min(i,t),l=Math.max(l,t),o=Math.min(o,n),c=Math.max(c,n);if(o<-1)for(var g=0;g<a;g++)n=e[2*g+1]=e[2*g+1]+(-1-o);return e},Ch=function(e,t){var n=1/e*2*Math.PI,a=e%2===0?Math.PI/2+n/2:Math.PI/2;a+=t;for(var i=new Array(e*2),o,l=0;l<e;l++)o=l*n+a,i[2*l]=Math.cos(o),i[2*l+1]=Math.sin(-o);return i},ba=function(e,t){return Math.min(e/4,t/4,8)},O1=function(e,t){return Math.min(e/10,t/10,8)},av=function(){return 8},BS=function(e,t,n){return[e-2*t+n,2*(t-e),e]},Th=function(e,t){return{heightOffset:Math.min(15,.05*t),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}};function hd(r,e){function t(h){for(var p=[],g=0;g<h.length;g++){var m=h[g],w=h[(g+1)%h.length],x={x:w.x-m.x,y:w.y-m.y},b={x:-x.y,y:x.x},E=Math.sqrt(b.x*b.x+b.y*b.y);p.push({x:b.x/E,y:b.y/E})}return p}function n(h,p){var g=1/0,m=-1/0,w=Fr(h),x;try{for(w.s();!(x=w.n()).done;){var b=x.value,E=b.x*p.x+b.y*p.y;g=Math.min(g,E),m=Math.max(m,E)}}catch(_){w.e(_)}finally{w.f()}return{min:g,max:m}}function a(h,p){return!(h.max<p.min||p.max<h.min)}var i=[].concat(yu(t(r)),yu(t(e))),o=Fr(i),l;try{for(o.s();!(l=o.n()).done;){var c=l.value,f=n(r,c),d=n(e,c);if(!a(f,d))return!1}}catch(h){o.e(h)}finally{o.f()}return!0}var AS=dr({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),IS={pageRank:function(e){for(var t=AS(e),n=t.dampingFactor,a=t.precision,i=t.iterations,o=t.weight,l=this._private.cy,c=this.byGroup(),f=c.nodes,d=c.edges,h=f.length,p=h*h,g=d.length,m=new Array(p),w=new Array(h),x=(1-n)/h,b=0;b<h;b++){for(var E=0;E<h;E++){var _=b*h+E;m[_]=0}w[b]=0}for(var C=0;C<g;C++){var B=d[C],L=B.data("source"),A=B.data("target");if(L!==A){var z=f.indexOfId(L),M=f.indexOfId(A),U=o(B),q=M*h+z;m[q]+=U,w[z]+=U}}for(var D=1/h+x,F=0;F<h;F++)if(w[F]===0)for(var T=0;T<h;T++){var G=T*h+F;m[G]=D}else for(var Q=0;Q<h;Q++){var W=Q*h+F;m[W]=m[W]/w[F]+x}for(var X=new Array(h),Z=new Array(h),te,N=0;N<h;N++)X[N]=1;for(var $=0;$<i;$++){for(var oe=0;oe<h;oe++)Z[oe]=0;for(var ie=0;ie<h;ie++)for(var ne=0;ne<h;ne++){var xe=ie*h+ne;Z[ie]+=m[xe]*X[ne]}dS(Z),te=X,X=Z,Z=te;for(var Pe=0,Ce=0;Ce<h;Ce++){var me=te[Ce]-X[Ce];Pe+=me*me}if(Pe<a)break}var fe={rank:function(Ee){return Ee=l.collection(Ee)[0],X[f.indexOf(Ee)]}};return fe}},Vm=dr({root:null,weight:function(e){return 1},directed:!1,alpha:0}),Hi={degreeCentralityNormalized:function(e){e=Vm(e);var t=this.cy(),n=this.nodes(),a=n.length;if(e.directed){for(var d={},h={},p=0,g=0,m=0;m<a;m++){var w=n[m],x=w.id();e.root=w;var b=this.degreeCentrality(e);p<b.indegree&&(p=b.indegree),g<b.outdegree&&(g=b.outdegree),d[x]=b.indegree,h[x]=b.outdegree}return{indegree:function(_){return p==0?0:(Qe(_)&&(_=t.filter(_)),d[_.id()]/p)},outdegree:function(_){return g===0?0:(Qe(_)&&(_=t.filter(_)),h[_.id()]/g)}}}else{for(var i={},o=0,l=0;l<a;l++){var c=n[l];e.root=c;var f=this.degreeCentrality(e);o<f.degree&&(o=f.degree),i[c.id()]=f.degree}return{degree:function(_){return o===0?0:(Qe(_)&&(_=t.filter(_)),i[_.id()]/o)}}}},degreeCentrality:function(e){e=Vm(e);var t=this.cy(),n=this,a=e,i=a.root,o=a.weight,l=a.directed,c=a.alpha;if(i=t.collection(i)[0],l){for(var g=i.connectedEdges(),m=g.filter(function(L){return L.target().same(i)&&n.has(L)}),w=g.filter(function(L){return L.source().same(i)&&n.has(L)}),x=m.length,b=w.length,E=0,_=0,C=0;C<m.length;C++)E+=o(m[C]);for(var B=0;B<w.length;B++)_+=o(w[B]);return{indegree:Math.pow(x,1-c)*Math.pow(E,c),outdegree:Math.pow(b,1-c)*Math.pow(_,c)}}else{for(var f=i.connectedEdges().intersection(n),d=f.length,h=0,p=0;p<f.length;p++)h+=o(f[p]);return{degree:Math.pow(d,1-c)*Math.pow(h,c)}}}};Hi.dc=Hi.degreeCentrality;Hi.dcn=Hi.degreeCentralityNormalised=Hi.degreeCentralityNormalized;var qm=dr({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),Ki={closenessCentralityNormalized:function(e){for(var t=qm(e),n=t.harmonic,a=t.weight,i=t.directed,o=this.cy(),l={},c=0,f=this.nodes(),d=this.floydWarshall({weight:a,directed:i}),h=0;h<f.length;h++){for(var p=0,g=f[h],m=0;m<f.length;m++)if(h!==m){var w=d.distance(g,f[m]);n?p+=1/w:p+=w}n||(p=1/p),c<p&&(c=p),l[g.id()]=p}return{closeness:function(b){return c==0?0:(Qe(b)?b=o.filter(b)[0].id():b=b.id(),l[b]/c)}}},closenessCentrality:function(e){var t=qm(e),n=t.root,a=t.weight,i=t.directed,o=t.harmonic;n=this.filter(n)[0];for(var l=this.dijkstra({root:n,weight:a,directed:i}),c=0,f=this.nodes(),d=0;d<f.length;d++){var h=f[d];if(!h.same(n)){var p=l.distanceTo(h);o?c+=1/p:c+=p}}return o?c:1/c}};Ki.cc=Ki.closenessCentrality;Ki.ccn=Ki.closenessCentralityNormalised=Ki.closenessCentralityNormalized;var DS=dr({weight:null,directed:!1}),Ph={betweennessCentrality:function(e){for(var t=DS(e),n=t.directed,a=t.weight,i=a!=null,o=this.cy(),l=this.nodes(),c={},f={},d=0,h={set:function(_,C){f[_]=C,C>d&&(d=C)},get:function(_){return f[_]}},p=0;p<l.length;p++){var g=l[p],m=g.id();n?c[m]=g.outgoers().nodes():c[m]=g.openNeighborhood().nodes(),h.set(m,0)}for(var w=function(){for(var _=l[x].id(),C=[],B={},L={},A={},z=new Bo(function(ie,ne){return A[ie]-A[ne]}),M=0;M<l.length;M++){var U=l[M].id();B[U]=[],L[U]=0,A[U]=1/0}for(L[_]=1,A[_]=0,z.push(_);!z.empty();){var q=z.pop();if(C.push(q),i)for(var D=0;D<c[q].length;D++){var F=c[q][D],T=o.getElementById(q),G=void 0;T.edgesTo(F).length>0?G=T.edgesTo(F)[0]:G=F.edgesTo(T)[0];var Q=a(G);F=F.id(),A[F]>A[q]+Q&&(A[F]=A[q]+Q,z.nodes.indexOf(F)<0?z.push(F):z.updateItem(F),L[F]=0,B[F]=[]),A[F]==A[q]+Q&&(L[F]=L[F]+L[q],B[F].push(q))}else for(var W=0;W<c[q].length;W++){var X=c[q][W].id();A[X]==1/0&&(z.push(X),A[X]=A[q]+1),A[X]==A[q]+1&&(L[X]=L[X]+L[q],B[X].push(q))}}for(var Z={},te=0;te<l.length;te++)Z[l[te].id()]=0;for(;C.length>0;){for(var N=C.pop(),$=0;$<B[N].length;$++){var oe=B[N][$];Z[oe]=Z[oe]+L[oe]/L[N]*(1+Z[N])}N!=l[x].id()&&h.set(N,h.get(N)+Z[N])}},x=0;x<l.length;x++)w();var b={betweenness:function(_){var C=o.collection(_).id();return h.get(C)},betweennessNormalized:function(_){if(d==0)return 0;var C=o.collection(_).id();return h.get(C)/d}};return b.betweennessNormalised=b.betweennessNormalized,b}};Ph.bc=Ph.betweennessCentrality;var NS=dr({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(r){return 1}]}),LS=function(e){return NS(e)},OS=function(e,t){for(var n=0,a=0;a<t.length;a++)n+=t[a](e);return n},MS=function(e,t,n){for(var a=0;a<t;a++)e[a*t+a]=n},M1=function(e,t){for(var n,a=0;a<t;a++){n=0;for(var i=0;i<t;i++)n+=e[i*t+a];for(var o=0;o<t;o++)e[o*t+a]=e[o*t+a]/n}},zS=function(e,t,n){for(var a=new Array(n*n),i=0;i<n;i++){for(var o=0;o<n;o++)a[i*n+o]=0;for(var l=0;l<n;l++)for(var c=0;c<n;c++)a[i*n+c]+=e[i*n+l]*t[l*n+c]}return a},FS=function(e,t,n){for(var a=e.slice(0),i=1;i<n;i++)e=zS(e,a,t);return e},$S=function(e,t,n){for(var a=new Array(t*t),i=0;i<t*t;i++)a[i]=Math.pow(e[i],n);return M1(a,t),a},US=function(e,t,n,a){for(var i=0;i<n;i++){var o=Math.round(e[i]*Math.pow(10,a))/Math.pow(10,a),l=Math.round(t[i]*Math.pow(10,a))/Math.pow(10,a);if(o!==l)return!1}return!0},jS=function(e,t,n,a){for(var i=[],o=0;o<t;o++){for(var l=[],c=0;c<t;c++)Math.round(e[o*t+c]*1e3)/1e3>0&&l.push(n[c]);l.length!==0&&i.push(a.collection(l))}return i},VS=function(e,t){for(var n=0;n<e.length;n++)if(!t[n]||e[n].id()!==t[n].id())return!1;return!0},qS=function(e){for(var t=0;t<e.length;t++)for(var n=0;n<e.length;n++)t!=n&&VS(e[t],e[n])&&e.splice(n,1);return e},Wm=function(e){for(var t=this.nodes(),n=this.edges(),a=this.cy(),i=LS(e),o={},l=0;l<t.length;l++)o[t[l].id()]=l;for(var c=t.length,f=c*c,d=new Array(f),h,p=0;p<f;p++)d[p]=0;for(var g=0;g<n.length;g++){var m=n[g],w=o[m.source().id()],x=o[m.target().id()],b=OS(m,i.attributes);d[w*c+x]+=b,d[x*c+w]+=b}MS(d,c,i.multFactor),M1(d,c);for(var E=!0,_=0;E&&_<i.maxIterations;)E=!1,h=FS(d,c,i.expandFactor),d=$S(h,c,i.inflateFactor),US(d,h,f,4)||(E=!0),_++;var C=jS(d,c,t,a);return C=qS(C),C},WS={markovClustering:Wm,mcl:Wm},GS=function(e){return e},z1=function(e,t){return Math.abs(t-e)},Gm=function(e,t,n){return e+z1(t,n)},Hm=function(e,t,n){return e+Math.pow(n-t,2)},HS=function(e){return Math.sqrt(e)},KS=function(e,t,n){return Math.max(e,z1(t,n))},Xs=function(e,t,n,a,i){for(var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:GS,l=a,c,f,d=0;d<e;d++)c=t(d),f=n(d),l=i(l,c,f);return o(l)},Yi={euclidean:function(e,t,n){return e>=2?Xs(e,t,n,0,Hm,HS):Xs(e,t,n,0,Gm)},squaredEuclidean:function(e,t,n){return Xs(e,t,n,0,Hm)},manhattan:function(e,t,n){return Xs(e,t,n,0,Gm)},max:function(e,t,n){return Xs(e,t,n,-1/0,KS)}};Yi["squared-euclidean"]=Yi.squaredEuclidean;Yi.squaredeuclidean=Yi.squaredEuclidean;function zu(r,e,t,n,a,i){var o;return Ft(r)?o=r:o=Yi[r]||Yi.euclidean,e===0&&Ft(r)?o(a,i):o(e,t,n,a,i)}var XS=dr({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),iv=function(e){return XS(e)},Su=function(e,t,n,a,i){var o=i!=="kMedoids",l=o?function(h){return n[h]}:function(h){return a[h](n)},c=function(p){return a[p](t)},f=n,d=t;return zu(e,a.length,l,c,f,d)},vd=function(e,t,n){for(var a=n.length,i=new Array(a),o=new Array(a),l=new Array(t),c=null,f=0;f<a;f++)i[f]=e.min(n[f]).value,o[f]=e.max(n[f]).value;for(var d=0;d<t;d++){c=[];for(var h=0;h<a;h++)c[h]=Math.random()*(o[h]-i[h])+i[h];l[d]=c}return l},F1=function(e,t,n,a,i){for(var o=1/0,l=0,c=0;c<t.length;c++){var f=Su(n,e,t[c],a,i);f<o&&(o=f,l=c)}return l},$1=function(e,t,n){for(var a=[],i=null,o=0;o<t.length;o++)i=t[o],n[i.id()]===e&&a.push(i);return a},ZS=function(e,t,n){return Math.abs(t-e)<=n},YS=function(e,t,n){for(var a=0;a<e.length;a++)for(var i=0;i<e[a].length;i++){var o=Math.abs(e[a][i]-t[a][i]);if(o>n)return!1}return!0},QS=function(e,t,n){for(var a=0;a<n;a++)if(e===t[a])return!0;return!1},Km=function(e,t){var n=new Array(t);if(e.length<50)for(var a=0;a<t;a++){for(var i=e[Math.floor(Math.random()*e.length)];QS(i,n,a);)i=e[Math.floor(Math.random()*e.length)];n[a]=i}else for(var o=0;o<t;o++)n[o]=e[Math.floor(Math.random()*e.length)];return n},Xm=function(e,t,n){for(var a=0,i=0;i<t.length;i++)a+=Su("manhattan",t[i],e,n,"kMedoids");return a},JS=function(e){var t=this.cy(),n=this.nodes(),a=null,i=iv(e),o=new Array(i.k),l={},c;i.testMode?typeof i.testCentroids=="number"?(i.testCentroids,c=vd(n,i.k,i.attributes)):Jt(i.testCentroids)==="object"?c=i.testCentroids:c=vd(n,i.k,i.attributes):c=vd(n,i.k,i.attributes);for(var f=!0,d=0;f&&d<i.maxIterations;){for(var h=0;h<n.length;h++)a=n[h],l[a.id()]=F1(a,c,i.distance,i.attributes,"kMeans");f=!1;for(var p=0;p<i.k;p++){var g=$1(p,n,l);if(g.length!==0){for(var m=i.attributes.length,w=c[p],x=new Array(m),b=new Array(m),E=0;E<m;E++){b[E]=0;for(var _=0;_<g.length;_++)a=g[_],b[E]+=i.attributes[E](a);x[E]=b[E]/g.length,ZS(x[E],w[E],i.sensitivityThreshold)||(f=!0)}c[p]=x,o[p]=t.collection(g)}}d++}return o},ek=function(e){var t=this.cy(),n=this.nodes(),a=null,i=iv(e),o=new Array(i.k),l,c={},f,d=new Array(i.k);i.testMode?typeof i.testCentroids=="number"||(Jt(i.testCentroids)==="object"?l=i.testCentroids:l=Km(n,i.k)):l=Km(n,i.k);for(var h=!0,p=0;h&&p<i.maxIterations;){for(var g=0;g<n.length;g++)a=n[g],c[a.id()]=F1(a,l,i.distance,i.attributes,"kMedoids");h=!1;for(var m=0;m<l.length;m++){var w=$1(m,n,c);if(w.length!==0){d[m]=Xm(l[m],w,i.attributes);for(var x=0;x<w.length;x++)f=Xm(w[x],w,i.attributes),f<d[m]&&(d[m]=f,l[m]=w[x],h=!0);o[m]=t.collection(w)}}p++}return o},tk=function(e,t,n,a,i){for(var o,l,c=0;c<t.length;c++)for(var f=0;f<e.length;f++)a[c][f]=Math.pow(n[c][f],i.m);for(var d=0;d<e.length;d++)for(var h=0;h<i.attributes.length;h++){o=0,l=0;for(var p=0;p<t.length;p++)o+=a[p][d]*i.attributes[h](t[p]),l+=a[p][d];e[d][h]=o/l}},rk=function(e,t,n,a,i){for(var o=0;o<e.length;o++)t[o]=e[o].slice();for(var l,c,f,d=2/(i.m-1),h=0;h<n.length;h++)for(var p=0;p<a.length;p++){l=0;for(var g=0;g<n.length;g++)c=Su(i.distance,a[p],n[h],i.attributes,"cmeans"),f=Su(i.distance,a[p],n[g],i.attributes,"cmeans"),l+=Math.pow(c/f,d);e[p][h]=1/l}},nk=function(e,t,n,a){for(var i=new Array(n.k),o=0;o<i.length;o++)i[o]=[];for(var l,c,f=0;f<t.length;f++){l=-1/0,c=-1;for(var d=0;d<t[0].length;d++)t[f][d]>l&&(l=t[f][d],c=d);i[c].push(e[f])}for(var h=0;h<i.length;h++)i[h]=a.collection(i[h]);return i},Zm=function(e){var t=this.cy(),n=this.nodes(),a=iv(e),i,o,l,c,f;c=new Array(n.length);for(var d=0;d<n.length;d++)c[d]=new Array(a.k);l=new Array(n.length);for(var h=0;h<n.length;h++)l[h]=new Array(a.k);for(var p=0;p<n.length;p++){for(var g=0,m=0;m<a.k;m++)l[p][m]=Math.random(),g+=l[p][m];for(var w=0;w<a.k;w++)l[p][w]=l[p][w]/g}o=new Array(a.k);for(var x=0;x<a.k;x++)o[x]=new Array(a.attributes.length);f=new Array(n.length);for(var b=0;b<n.length;b++)f[b]=new Array(a.k);for(var E=!0,_=0;E&&_<a.maxIterations;)E=!1,tk(o,n,l,f,a),rk(l,c,o,n,a),YS(l,c,a.sensitivityThreshold)||(E=!0),_++;return i=nk(n,l,a,t),{clusters:i,degreeOfMembership:l}},ak={kMeans:JS,kMedoids:ek,fuzzyCMeans:Zm,fcm:Zm},ik=dr({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),sk={single:"min",complete:"max"},ok=function(e){var t=ik(e),n=sk[t.linkage];return n!=null&&(t.linkage=n),t},Ym=function(e,t,n,a,i){for(var o=0,l=1/0,c,f=i.attributes,d=function(M,U){return zu(i.distance,f.length,function(q){return f[q](M)},function(q){return f[q](U)},M,U)},h=0;h<e.length;h++){var p=e[h].key,g=n[p][a[p]];g<l&&(o=p,l=g)}if(i.mode==="threshold"&&l>=i.threshold||i.mode==="dendrogram"&&e.length===1)return!1;var m=t[o],w=t[a[o]],x;i.mode==="dendrogram"?x={left:m,right:w,key:m.key}:x={value:m.value.concat(w.value),key:m.key},e[m.index]=x,e.splice(w.index,1),t[m.key]=x;for(var b=0;b<e.length;b++){var E=e[b];m.key===E.key?c=1/0:i.linkage==="min"?(c=n[m.key][E.key],n[m.key][E.key]>n[w.key][E.key]&&(c=n[w.key][E.key])):i.linkage==="max"?(c=n[m.key][E.key],n[m.key][E.key]<n[w.key][E.key]&&(c=n[w.key][E.key])):i.linkage==="mean"?c=(n[m.key][E.key]*m.size+n[w.key][E.key]*w.size)/(m.size+w.size):i.mode==="dendrogram"?c=d(E.value,m.value):c=d(E.value[0],m.value[0]),n[m.key][E.key]=n[E.key][m.key]=c}for(var _=0;_<e.length;_++){var C=e[_].key;if(a[C]===m.key||a[C]===w.key){for(var B=C,L=0;L<e.length;L++){var A=e[L].key;n[C][A]<n[C][B]&&(B=A)}a[C]=B}e[_].index=_}return m.key=w.key=m.index=w.index=null,!0},qi=function(e,t,n){e&&(e.value?t.push(e.value):(e.left&&qi(e.left,t),e.right&&qi(e.right,t)))},Rh=function(e,t){if(!e)return"";if(e.left&&e.right){var n=Rh(e.left,t),a=Rh(e.right,t),i=t.add({group:"nodes",data:{id:n+","+a}});return t.add({group:"edges",data:{source:n,target:i.id()}}),t.add({group:"edges",data:{source:a,target:i.id()}}),i.id()}else if(e.value)return e.value.id()},Bh=function(e,t,n){if(!e)return[];var a=[],i=[],o=[];return t===0?(e.left&&qi(e.left,a),e.right&&qi(e.right,i),o=a.concat(i),[n.collection(o)]):t===1?e.value?[n.collection(e.value)]:(e.left&&qi(e.left,a),e.right&&qi(e.right,i),[n.collection(a),n.collection(i)]):e.value?[n.collection(e.value)]:(e.left&&(a=Bh(e.left,t-1,n)),e.right&&(i=Bh(e.right,t-1,n)),a.concat(i))},Qm=function(e){for(var t=this.cy(),n=this.nodes(),a=ok(e),i=a.attributes,o=function(_,C){return zu(a.distance,i.length,function(B){return i[B](_)},function(B){return i[B](C)},_,C)},l=[],c=[],f=[],d=[],h=0;h<n.length;h++){var p={value:a.mode==="dendrogram"?n[h]:[n[h]],key:h,index:h};l[h]=p,d[h]=p,c[h]=[],f[h]=0}for(var g=0;g<l.length;g++)for(var m=0;m<=g;m++){var w=void 0;a.mode==="dendrogram"?w=g===m?1/0:o(l[g].value,l[m].value):w=g===m?1/0:o(l[g].value[0],l[m].value[0]),c[g][m]=w,c[m][g]=w,w<c[g][f[g]]&&(f[g]=m)}for(var x=Ym(l,d,c,f,a);x;)x=Ym(l,d,c,f,a);var b;return a.mode==="dendrogram"?(b=Bh(l[0],a.dendrogramDepth,t),a.addDendrogram&&Rh(l[0],t)):(b=new Array(l.length),l.forEach(function(E,_){E.key=E.index=null,b[_]=t.collection(E.value)})),b},lk={hierarchicalClustering:Qm,hca:Qm},uk=dr({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),ck=function(e){var t=e.damping,n=e.preference;.5<=t&&t<1||It("Damping must range on [0.5, 1).  Got: ".concat(t));var a=["median","mean","min","max"];return a.some(function(i){return i===n})||$e(n)||It("Preference must be one of [".concat(a.map(function(i){return"'".concat(i,"'")}).join(", "),"] or a number.  Got: ").concat(n)),uk(e)},fk=function(e,t,n,a){var i=function(l,c){return a[c](l)};return-zu(e,a.length,function(o){return i(t,o)},function(o){return i(n,o)},t,n)},dk=function(e,t){var n=null;return t==="median"?n=cS(e):t==="mean"?n=uS(e):t==="min"?n=oS(e):t==="max"?n=lS(e):n=t,n},hk=function(e,t,n){for(var a=[],i=0;i<e;i++)t[i*e+i]+n[i*e+i]>0&&a.push(i);return a},Jm=function(e,t,n){for(var a=[],i=0;i<e;i++){for(var o=-1,l=-1/0,c=0;c<n.length;c++){var f=n[c];t[i*e+f]>l&&(o=f,l=t[i*e+f])}o>0&&a.push(o)}for(var d=0;d<n.length;d++)a[n[d]]=n[d];return a},vk=function(e,t,n){for(var a=Jm(e,t,n),i=0;i<n.length;i++){for(var o=[],l=0;l<a.length;l++)a[l]===n[i]&&o.push(l);for(var c=-1,f=-1/0,d=0;d<o.length;d++){for(var h=0,p=0;p<o.length;p++)h+=t[o[p]*e+o[d]];h>f&&(c=d,f=h)}n[i]=o[c]}return a=Jm(e,t,n),a},ey=function(e){for(var t=this.cy(),n=this.nodes(),a=ck(e),i={},o=0;o<n.length;o++)i[n[o].id()]=o;var l,c,f,d,h,p;l=n.length,c=l*l,f=new Array(c);for(var g=0;g<c;g++)f[g]=-1/0;for(var m=0;m<l;m++)for(var w=0;w<l;w++)m!==w&&(f[m*l+w]=fk(a.distance,n[m],n[w],a.attributes));d=dk(f,a.preference);for(var x=0;x<l;x++)f[x*l+x]=d;h=new Array(c);for(var b=0;b<c;b++)h[b]=0;p=new Array(c);for(var E=0;E<c;E++)p[E]=0;for(var _=new Array(l),C=new Array(l),B=new Array(l),L=0;L<l;L++)_[L]=0,C[L]=0,B[L]=0;for(var A=new Array(l*a.minIterations),z=0;z<A.length;z++)A[z]=0;var M;for(M=0;M<a.maxIterations;M++){for(var U=0;U<l;U++){for(var q=-1/0,D=-1/0,F=-1,T=0,G=0;G<l;G++)_[G]=h[U*l+G],T=p[U*l+G]+f[U*l+G],T>=q?(D=q,q=T,F=G):T>D&&(D=T);for(var Q=0;Q<l;Q++)h[U*l+Q]=(1-a.damping)*(f[U*l+Q]-q)+a.damping*_[Q];h[U*l+F]=(1-a.damping)*(f[U*l+F]-D)+a.damping*_[F]}for(var W=0;W<l;W++){for(var X=0,Z=0;Z<l;Z++)_[Z]=p[Z*l+W],C[Z]=Math.max(0,h[Z*l+W]),X+=C[Z];X-=C[W],C[W]=h[W*l+W],X+=C[W];for(var te=0;te<l;te++)p[te*l+W]=(1-a.damping)*Math.min(0,X-C[te])+a.damping*_[te];p[W*l+W]=(1-a.damping)*(X-C[W])+a.damping*_[W]}for(var N=0,$=0;$<l;$++){var oe=p[$*l+$]+h[$*l+$]>0?1:0;A[M%a.minIterations*l+$]=oe,N+=oe}if(N>0&&(M>=a.minIterations-1||M==a.maxIterations-1)){for(var ie=0,ne=0;ne<l;ne++){B[ne]=0;for(var xe=0;xe<a.minIterations;xe++)B[ne]+=A[xe*l+ne];(B[ne]===0||B[ne]===a.minIterations)&&ie++}if(ie===l)break}}for(var Pe=hk(l,h,p),Ce=vk(l,f,Pe),me={},fe=0;fe<Pe.length;fe++)me[Pe[fe]]=[];for(var he=0;he<n.length;he++){var Ee=i[n[he].id()],Re=Ce[Ee];Re!=null&&me[Re].push(n[he])}for(var I=new Array(Pe.length),pe=0;pe<Pe.length;pe++)I[pe]=t.collection(me[Pe[pe]]);return I},pk={affinityPropagation:ey,ap:ey},gk=dr({root:void 0,directed:!1}),mk={hierholzer:function(e){if(!dt(e)){var t=arguments;e={root:t[0],directed:t[1]}}var n=gk(e),a=n.root,i=n.directed,o=this,l=!1,c,f,d;a&&(d=Qe(a)?this.filter(a)[0].id():a[0].id());var h={},p={};i?o.forEach(function(E){var _=E.id();if(E.isNode()){var C=E.indegree(!0),B=E.outdegree(!0),L=C-B,A=B-C;L==1?c?l=!0:c=_:A==1?f?l=!0:f=_:(A>1||L>1)&&(l=!0),h[_]=[],E.outgoers().forEach(function(z){z.isEdge()&&h[_].push(z.id())})}else p[_]=[void 0,E.target().id()]}):o.forEach(function(E){var _=E.id();if(E.isNode()){var C=E.degree(!0);C%2&&(c?f?l=!0:f=_:c=_),h[_]=[],E.connectedEdges().forEach(function(B){return h[_].push(B.id())})}else p[_]=[E.source().id(),E.target().id()]});var g={found:!1,trail:void 0};if(l)return g;if(f&&c)if(i){if(d&&f!=d)return g;d=f}else{if(d&&f!=d&&c!=d)return g;d||(d=f)}else d||(d=o[0].id());var m=function(_){for(var C=_,B=[_],L,A,z;h[C].length;)L=h[C].shift(),A=p[L][0],z=p[L][1],C!=z?(h[z]=h[z].filter(function(M){return M!=L}),C=z):!i&&C!=A&&(h[A]=h[A].filter(function(M){return M!=L}),C=A),B.unshift(L),B.unshift(C);return B},w=[],x=[];for(x=m(d);x.length!=1;)h[x[0]].length==0?(w.unshift(o.getElementById(x.shift())),w.unshift(o.getElementById(x.shift()))):x=m(x.shift()).concat(x);w.unshift(o.getElementById(x.shift()));for(var b in h)if(h[b].length)return g;return g.found=!0,g.trail=this.spawn(w,!0),g}},Zl=function(){var e=this,t={},n=0,a=0,i=[],o=[],l={},c=function(p,g){for(var m=o.length-1,w=[],x=e.spawn();o[m].x!=p||o[m].y!=g;)w.push(o.pop().edge),m--;w.push(o.pop().edge),w.forEach(function(b){var E=b.connectedNodes().intersection(e);x.merge(b),E.forEach(function(_){var C=_.id(),B=_.connectedEdges().intersection(e);x.merge(_),t[C].cutVertex?x.merge(B.filter(function(L){return L.isLoop()})):x.merge(B)})}),i.push(x)},f=function(p,g,m){p===m&&(a+=1),t[g]={id:n,low:n++,cutVertex:!1};var w=e.getElementById(g).connectedEdges().intersection(e);if(w.size()===0)i.push(e.spawn(e.getElementById(g)));else{var x,b,E,_;w.forEach(function(C){x=C.source().id(),b=C.target().id(),E=x===g?b:x,E!==m&&(_=C.id(),l[_]||(l[_]=!0,o.push({x:g,y:E,edge:C})),E in t?t[g].low=Math.min(t[g].low,t[E].id):(f(p,E,g),t[g].low=Math.min(t[g].low,t[E].low),t[g].id<=t[E].low&&(t[g].cutVertex=!0,c(g,E))))})}};e.forEach(function(h){if(h.isNode()){var p=h.id();p in t||(a=0,f(p,p),t[p].cutVertex=a>1)}});var d=Object.keys(t).filter(function(h){return t[h].cutVertex}).map(function(h){return e.getElementById(h)});return{cut:e.spawn(d),components:i}},yk={hopcroftTarjanBiconnected:Zl,htbc:Zl,htb:Zl,hopcroftTarjanBiconnectedComponents:Zl},Yl=function(){var e=this,t={},n=0,a=[],i=[],o=e.spawn(e),l=function(f){i.push(f),t[f]={index:n,low:n++,explored:!1};var d=e.getElementById(f).connectedEdges().intersection(e);if(d.forEach(function(w){var x=w.target().id();x!==f&&(x in t||l(x),t[x].explored||(t[f].low=Math.min(t[f].low,t[x].low)))}),t[f].index===t[f].low){for(var h=e.spawn();;){var p=i.pop();if(h.merge(e.getElementById(p)),t[p].low=t[f].index,t[p].explored=!0,p===f)break}var g=h.edgesWith(h),m=h.merge(g);a.push(m),o=o.difference(m)}};return e.forEach(function(c){if(c.isNode()){var f=c.id();f in t||l(f)}}),{cut:o,components:a}},wk={tarjanStronglyConnected:Yl,tsc:Yl,tscc:Yl,tarjanStronglyConnectedComponents:Yl},U1={};[ho,X_,Z_,Q_,eS,rS,iS,IS,Hi,Ki,Ph,WS,ak,lk,pk,mk,yk,wk].forEach(function(r){tt(U1,r)});/*!
Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
Licensed under The MIT License (http://opensource.org/licenses/MIT)
*/var j1=0,V1=1,q1=2,pn=function(e){if(!(this instanceof pn))return new pn(e);this.id="Thenable/1.0.7",this.state=j1,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},typeof e=="function"&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};pn.prototype={fulfill:function(e){return ty(this,V1,"fulfillValue",e)},reject:function(e){return ty(this,q1,"rejectReason",e)},then:function(e,t){var n=this,a=new pn;return n.onFulfilled.push(ny(e,a,"fulfill")),n.onRejected.push(ny(t,a,"reject")),W1(n),a.proxy}};var ty=function(e,t,n,a){return e.state===j1&&(e.state=t,e[n]=a,W1(e)),e},W1=function(e){e.state===V1?ry(e,"onFulfilled",e.fulfillValue):e.state===q1&&ry(e,"onRejected",e.rejectReason)},ry=function(e,t,n){if(e[t].length!==0){var a=e[t];e[t]=[];var i=function(){for(var l=0;l<a.length;l++)a[l](n)};typeof setImmediate=="function"?setImmediate(i):setTimeout(i,0)}},ny=function(e,t,n){return function(a){if(typeof e!="function")t[n].call(t,a);else{var i;try{i=e(a)}catch(o){t.reject(o);return}G1(t,i)}}},G1=function(e,t){if(e===t||e.proxy===t){e.reject(new TypeError("cannot resolve promise with itself"));return}var n;if(Jt(t)==="object"&&t!==null||typeof t=="function")try{n=t.then}catch(i){e.reject(i);return}if(typeof n=="function"){var a=!1;try{n.call(t,function(i){a||(a=!0,i===t?e.reject(new TypeError("circular thenable chain")):G1(e,i))},function(i){a||(a=!0,e.reject(i))})}catch(i){a||e.reject(i)}return}e.fulfill(t)};pn.all=function(r){return new pn(function(e,t){for(var n=new Array(r.length),a=0,i=function(c,f){n[c]=f,a++,a===r.length&&e(n)},o=0;o<r.length;o++)(function(l){var c=r[l],f=c!=null&&c.then!=null;if(f)c.then(function(h){i(l,h)},function(h){t(h)});else{var d=c;i(l,d)}})(o)})};pn.resolve=function(r){return new pn(function(e,t){e(r)})};pn.reject=function(r){return new pn(function(e,t){t(r)})};var es=typeof Promise<"u"?Promise:pn,Ah=function(e,t,n){var a=Xh(e),i=!a,o=this._private=tt({duration:1e3},t,n);if(o.target=e,o.style=o.style||o.css,o.started=!1,o.playing=!1,o.hooked=!1,o.applying=!1,o.progress=0,o.completes=[],o.frames=[],o.complete&&Ft(o.complete)&&o.completes.push(o.complete),i){var l=e.position();o.startPosition=o.startPosition||{x:l.x,y:l.y},o.startStyle=o.startStyle||e.cy().style().getAnimationStartStyle(e,o.style)}if(a){var c=e.pan();o.startPan={x:c.x,y:c.y},o.startZoom=e.zoom()}this.length=1,this[0]=this},ei=Ah.prototype;tt(ei,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var t,n=e.target._private.animation;e.queue?t=n.queue:t=n.current,t.push(this),Hr(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return e.progress===1&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var t=this._private;return e===void 0?t.progress*t.duration:this.progress(e/t.duration)},progress:function(e){var t=this._private,n=t.playing;return e===void 0?t.progress:(n&&this.pause(),t.progress=e,t.started=!1,n&&this.play(),this)},completed:function(){return this._private.progress===1},reverse:function(){var e=this._private,t=e.playing;t&&this.pause(),e.progress=1-e.progress,e.started=!1;var n=function(f,d){var h=e[f];h!=null&&(e[f]=e[d],e[d]=h)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),e.style)for(var a=0;a<e.style.length;a++){var i=e.style[a],o=i.name,l=e.startStyle[o];e.startStyle[o]=i,e.style[a]=l}return t&&this.play(),this},promise:function(e){var t=this._private,n;switch(e){case"frame":n=t.frames;break;default:case"complete":case"completed":n=t.completes}return new es(function(a,i){n.push(function(){a()})})}});ei.complete=ei.completed;ei.run=ei.play;ei.running=ei.playing;var xk={animated:function(){return function(){var t=this,n=t.length!==void 0,a=n?t:[t],i=this._private.cy||this;if(!i.styleEnabled())return!1;var o=a[0];if(o)return o._private.animation.current.length>0}},clearQueue:function(){return function(){var t=this,n=t.length!==void 0,a=n?t:[t],i=this._private.cy||this;if(!i.styleEnabled())return this;for(var o=0;o<a.length;o++){var l=a[o];l._private.animation.queue=[]}return this}},delay:function(){return function(t,n){var a=this._private.cy||this;return a.styleEnabled()?this.animate({delay:t,duration:t,complete:n}):this}},delayAnimation:function(){return function(t,n){var a=this._private.cy||this;return a.styleEnabled()?this.animation({delay:t,duration:t,complete:n}):this}},animation:function(){return function(t,n){var a=this,i=a.length!==void 0,o=i?a:[a],l=this._private.cy||this,c=!i,f=!c;if(!l.styleEnabled())return this;var d=l.style();t=tt({},t,n);var h=Object.keys(t).length===0;if(h)return new Ah(o[0],t);switch(t.duration===void 0&&(t.duration=400),t.duration){case"slow":t.duration=600;break;case"fast":t.duration=200;break}if(f&&(t.style=d.getPropsList(t.style||t.css),t.css=void 0),f&&t.renderedPosition!=null){var p=t.renderedPosition,g=l.pan(),m=l.zoom();t.position=A1(p,m,g)}if(c&&t.panBy!=null){var w=t.panBy,x=l.pan();t.pan={x:x.x+w.x,y:x.y+w.y}}var b=t.center||t.centre;if(c&&b!=null){var E=l.getCenterPan(b.eles,t.zoom);E!=null&&(t.pan=E)}if(c&&t.fit!=null){var _=t.fit,C=l.getFitViewport(_.eles||_.boundingBox,_.padding);C!=null&&(t.pan=C.pan,t.zoom=C.zoom)}if(c&&dt(t.zoom)){var B=l.getZoomedViewport(t.zoom);B!=null?(B.zoomed&&(t.zoom=B.zoom),B.panned&&(t.pan=B.pan)):t.zoom=null}return new Ah(o[0],t)}},animate:function(){return function(t,n){var a=this,i=a.length!==void 0,o=i?a:[a],l=this._private.cy||this;if(!l.styleEnabled())return this;n&&(t=tt({},t,n));for(var c=0;c<o.length;c++){var f=o[c],d=f.animated()&&(t.queue===void 0||t.queue),h=f.animation(t,d?{queue:!0}:void 0);h.play()}return this}},stop:function(){return function(t,n){var a=this,i=a.length!==void 0,o=i?a:[a],l=this._private.cy||this;if(!l.styleEnabled())return this;for(var c=0;c<o.length;c++){for(var f=o[c],d=f._private,h=d.animation.current,p=0;p<h.length;p++){var g=h[p],m=g._private;n&&(m.duration=0)}t&&(d.animation.queue=[]),n||(d.animation.current=[])}return l.notify("draw"),this}}},pd,ay;function Fu(){if(ay)return pd;ay=1;var r=Array.isArray;return pd=r,pd}var gd,iy;function bk(){if(iy)return gd;iy=1;var r=Fu(),e=Po(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(i,o){if(r(i))return!1;var l=typeof i;return l=="number"||l=="symbol"||l=="boolean"||i==null||e(i)?!0:n.test(i)||!t.test(i)||o!=null&&i in Object(o)}return gd=a,gd}var md,sy;function Ek(){if(sy)return md;sy=1;var r=E1(),e=To(),t="[object AsyncFunction]",n="[object Function]",a="[object GeneratorFunction]",i="[object Proxy]";function o(l){if(!e(l))return!1;var c=r(l);return c==n||c==a||c==t||c==i}return md=o,md}var yd,oy;function _k(){if(oy)return yd;oy=1;var r=Lu(),e=r["__core-js_shared__"];return yd=e,yd}var wd,ly;function Sk(){if(ly)return wd;ly=1;var r=_k(),e=(function(){var n=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function t(n){return!!e&&e in n}return wd=t,wd}var xd,uy;function kk(){if(uy)return xd;uy=1;var r=Function.prototype,e=r.toString;function t(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return xd=t,xd}var bd,cy;function Ck(){if(cy)return bd;cy=1;var r=Ek(),e=Sk(),t=To(),n=kk(),a=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,c=o.toString,f=l.hasOwnProperty,d=RegExp("^"+c.call(f).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function h(p){if(!t(p)||e(p))return!1;var g=r(p)?d:i;return g.test(n(p))}return bd=h,bd}var Ed,fy;function Tk(){if(fy)return Ed;fy=1;function r(e,t){return e==null?void 0:e[t]}return Ed=r,Ed}var _d,dy;function sv(){if(dy)return _d;dy=1;var r=Ck(),e=Tk();function t(n,a){var i=e(n,a);return r(i)?i:void 0}return _d=t,_d}var Sd,hy;function $u(){if(hy)return Sd;hy=1;var r=sv(),e=r(Object,"create");return Sd=e,Sd}var kd,vy;function Pk(){if(vy)return kd;vy=1;var r=$u();function e(){this.__data__=r?r(null):{},this.size=0}return kd=e,kd}var Cd,py;function Rk(){if(py)return Cd;py=1;function r(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return Cd=r,Cd}var Td,gy;function Bk(){if(gy)return Td;gy=1;var r=$u(),e="__lodash_hash_undefined__",t=Object.prototype,n=t.hasOwnProperty;function a(i){var o=this.__data__;if(r){var l=o[i];return l===e?void 0:l}return n.call(o,i)?o[i]:void 0}return Td=a,Td}var Pd,my;function Ak(){if(my)return Pd;my=1;var r=$u(),e=Object.prototype,t=e.hasOwnProperty;function n(a){var i=this.__data__;return r?i[a]!==void 0:t.call(i,a)}return Pd=n,Pd}var Rd,yy;function Ik(){if(yy)return Rd;yy=1;var r=$u(),e="__lodash_hash_undefined__";function t(n,a){var i=this.__data__;return this.size+=this.has(n)?0:1,i[n]=r&&a===void 0?e:a,this}return Rd=t,Rd}var Bd,wy;function Dk(){if(wy)return Bd;wy=1;var r=Pk(),e=Rk(),t=Bk(),n=Ak(),a=Ik();function i(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var f=o[l];this.set(f[0],f[1])}}return i.prototype.clear=r,i.prototype.delete=e,i.prototype.get=t,i.prototype.has=n,i.prototype.set=a,Bd=i,Bd}var Ad,xy;function Nk(){if(xy)return Ad;xy=1;function r(){this.__data__=[],this.size=0}return Ad=r,Ad}var Id,by;function H1(){if(by)return Id;by=1;function r(e,t){return e===t||e!==e&&t!==t}return Id=r,Id}var Dd,Ey;function Uu(){if(Ey)return Dd;Ey=1;var r=H1();function e(t,n){for(var a=t.length;a--;)if(r(t[a][0],n))return a;return-1}return Dd=e,Dd}var Nd,_y;function Lk(){if(_y)return Nd;_y=1;var r=Uu(),e=Array.prototype,t=e.splice;function n(a){var i=this.__data__,o=r(i,a);if(o<0)return!1;var l=i.length-1;return o==l?i.pop():t.call(i,o,1),--this.size,!0}return Nd=n,Nd}var Ld,Sy;function Ok(){if(Sy)return Ld;Sy=1;var r=Uu();function e(t){var n=this.__data__,a=r(n,t);return a<0?void 0:n[a][1]}return Ld=e,Ld}var Od,ky;function Mk(){if(ky)return Od;ky=1;var r=Uu();function e(t){return r(this.__data__,t)>-1}return Od=e,Od}var Md,Cy;function zk(){if(Cy)return Md;Cy=1;var r=Uu();function e(t,n){var a=this.__data__,i=r(a,t);return i<0?(++this.size,a.push([t,n])):a[i][1]=n,this}return Md=e,Md}var zd,Ty;function Fk(){if(Ty)return zd;Ty=1;var r=Nk(),e=Lk(),t=Ok(),n=Mk(),a=zk();function i(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var f=o[l];this.set(f[0],f[1])}}return i.prototype.clear=r,i.prototype.delete=e,i.prototype.get=t,i.prototype.has=n,i.prototype.set=a,zd=i,zd}var Fd,Py;function $k(){if(Py)return Fd;Py=1;var r=sv(),e=Lu(),t=r(e,"Map");return Fd=t,Fd}var $d,Ry;function Uk(){if(Ry)return $d;Ry=1;var r=Dk(),e=Fk(),t=$k();function n(){this.size=0,this.__data__={hash:new r,map:new(t||e),string:new r}}return $d=n,$d}var Ud,By;function jk(){if(By)return Ud;By=1;function r(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return Ud=r,Ud}var jd,Ay;function ju(){if(Ay)return jd;Ay=1;var r=jk();function e(t,n){var a=t.__data__;return r(n)?a[typeof n=="string"?"string":"hash"]:a.map}return jd=e,jd}var Vd,Iy;function Vk(){if(Iy)return Vd;Iy=1;var r=ju();function e(t){var n=r(this,t).delete(t);return this.size-=n?1:0,n}return Vd=e,Vd}var qd,Dy;function qk(){if(Dy)return qd;Dy=1;var r=ju();function e(t){return r(this,t).get(t)}return qd=e,qd}var Wd,Ny;function Wk(){if(Ny)return Wd;Ny=1;var r=ju();function e(t){return r(this,t).has(t)}return Wd=e,Wd}var Gd,Ly;function Gk(){if(Ly)return Gd;Ly=1;var r=ju();function e(t,n){var a=r(this,t),i=a.size;return a.set(t,n),this.size+=a.size==i?0:1,this}return Gd=e,Gd}var Hd,Oy;function Hk(){if(Oy)return Hd;Oy=1;var r=Uk(),e=Vk(),t=qk(),n=Wk(),a=Gk();function i(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var f=o[l];this.set(f[0],f[1])}}return i.prototype.clear=r,i.prototype.delete=e,i.prototype.get=t,i.prototype.has=n,i.prototype.set=a,Hd=i,Hd}var Kd,My;function Kk(){if(My)return Kd;My=1;var r=Hk(),e="Expected a function";function t(n,a){if(typeof n!="function"||a!=null&&typeof a!="function")throw new TypeError(e);var i=function(){var o=arguments,l=a?a.apply(this,o):o[0],c=i.cache;if(c.has(l))return c.get(l);var f=n.apply(this,o);return i.cache=c.set(l,f)||c,f};return i.cache=new(t.Cache||r),i}return t.Cache=r,Kd=t,Kd}var Xd,zy;function Xk(){if(zy)return Xd;zy=1;var r=Kk(),e=500;function t(n){var a=r(n,function(o){return i.size===e&&i.clear(),o}),i=a.cache;return a}return Xd=t,Xd}var Zd,Fy;function K1(){if(Fy)return Zd;Fy=1;var r=Xk(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,n=r(function(a){var i=[];return a.charCodeAt(0)===46&&i.push(""),a.replace(e,function(o,l,c,f){i.push(c?f.replace(t,"$1"):l||o)}),i});return Zd=n,Zd}var Yd,$y;function X1(){if($y)return Yd;$y=1;function r(e,t){for(var n=-1,a=e==null?0:e.length,i=Array(a);++n<a;)i[n]=t(e[n],n,e);return i}return Yd=r,Yd}var Qd,Uy;function Zk(){if(Uy)return Qd;Uy=1;var r=Yh(),e=X1(),t=Fu(),n=Po(),a=r?r.prototype:void 0,i=a?a.toString:void 0;function o(l){if(typeof l=="string")return l;if(t(l))return e(l,o)+"";if(n(l))return i?i.call(l):"";var c=l+"";return c=="0"&&1/l==-1/0?"-0":c}return Qd=o,Qd}var Jd,jy;function Z1(){if(jy)return Jd;jy=1;var r=Zk();function e(t){return t==null?"":r(t)}return Jd=e,Jd}var eh,Vy;function Y1(){if(Vy)return eh;Vy=1;var r=Fu(),e=bk(),t=K1(),n=Z1();function a(i,o){return r(i)?i:e(i,o)?[i]:t(n(i))}return eh=a,eh}var th,qy;function ov(){if(qy)return th;qy=1;var r=Po();function e(t){if(typeof t=="string"||r(t))return t;var n=t+"";return n=="0"&&1/t==-1/0?"-0":n}return th=e,th}var rh,Wy;function Yk(){if(Wy)return rh;Wy=1;var r=Y1(),e=ov();function t(n,a){a=r(a,n);for(var i=0,o=a.length;n!=null&&i<o;)n=n[e(a[i++])];return i&&i==o?n:void 0}return rh=t,rh}var nh,Gy;function Qk(){if(Gy)return nh;Gy=1;var r=Yk();function e(t,n,a){var i=t==null?void 0:r(t,n);return i===void 0?a:i}return nh=e,nh}var Jk=Qk(),eC=Co(Jk),ah,Hy;function tC(){if(Hy)return ah;Hy=1;var r=sv(),e=(function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch{}})();return ah=e,ah}var ih,Ky;function rC(){if(Ky)return ih;Ky=1;var r=tC();function e(t,n,a){n=="__proto__"&&r?r(t,n,{configurable:!0,enumerable:!0,value:a,writable:!0}):t[n]=a}return ih=e,ih}var sh,Xy;function nC(){if(Xy)return sh;Xy=1;var r=rC(),e=H1(),t=Object.prototype,n=t.hasOwnProperty;function a(i,o,l){var c=i[o];(!(n.call(i,o)&&e(c,l))||l===void 0&&!(o in i))&&r(i,o,l)}return sh=a,sh}var oh,Zy;function aC(){if(Zy)return oh;Zy=1;var r=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(n,a){var i=typeof n;return a=a??r,!!a&&(i=="number"||i!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<a}return oh=t,oh}var lh,Yy;function iC(){if(Yy)return lh;Yy=1;var r=nC(),e=Y1(),t=aC(),n=To(),a=ov();function i(o,l,c,f){if(!n(o))return o;l=e(l,o);for(var d=-1,h=l.length,p=h-1,g=o;g!=null&&++d<h;){var m=a(l[d]),w=c;if(m==="__proto__"||m==="constructor"||m==="prototype")return o;if(d!=p){var x=g[m];w=f?f(x,m,g):void 0,w===void 0&&(w=n(x)?x:t(l[d+1])?[]:{})}r(g,m,w),g=g[m]}return o}return lh=i,lh}var uh,Qy;function sC(){if(Qy)return uh;Qy=1;var r=iC();function e(t,n,a){return t==null?t:r(t,n,a)}return uh=e,uh}var oC=sC(),lC=Co(oC),ch,Jy;function uC(){if(Jy)return ch;Jy=1;function r(e,t){var n=-1,a=e.length;for(t||(t=Array(a));++n<a;)t[n]=e[n];return t}return ch=r,ch}var fh,e0;function cC(){if(e0)return fh;e0=1;var r=X1(),e=uC(),t=Fu(),n=Po(),a=K1(),i=ov(),o=Z1();function l(c){return t(c)?r(c,i):n(c)?[c]:e(a(o(c)))}return fh=l,fh}var fC=cC(),dC=Co(fC),hC={data:function(e){var t={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(a){},beforeSet:function(a,i){},onSet:function(a){},canSet:function(a){return!0}};return e=tt({},t,e),function(a,i){var o=e,l=this,c=l.length!==void 0,f=c?l:[l],d=c?l[0]:l;if(Qe(a)){var h=a.indexOf(".")!==-1,p=h&&dC(a);if(o.allowGetting&&i===void 0){var g;return d&&(o.beforeGet(d),p&&d._private[o.field][a]===void 0?g=eC(d._private[o.field],p):g=d._private[o.field][a]),g}else if(o.allowSetting&&i!==void 0){var m=!o.immutableKeys[a];if(m){var w=d1({},a,i);o.beforeSet(l,w);for(var x=0,b=f.length;x<b;x++){var E=f[x];o.canSet(E)&&(p&&d._private[o.field][a]===void 0?lC(E._private[o.field],p,i):E._private[o.field][a]=i)}o.updateStyle&&l.updateStyle(),o.onSet(l),o.settingTriggersEvent&&l[o.triggerFnName](o.settingEvent)}}}else if(o.allowSetting&&dt(a)){var _=a,C,B,L=Object.keys(_);o.beforeSet(l,_);for(var A=0;A<L.length;A++){C=L[A],B=_[C];var z=!o.immutableKeys[C];if(z)for(var M=0;M<f.length;M++){var U=f[M];o.canSet(U)&&(U._private[o.field][C]=B)}}o.updateStyle&&l.updateStyle(),o.onSet(l),o.settingTriggersEvent&&l[o.triggerFnName](o.settingEvent)}else if(o.allowBinding&&Ft(a)){var q=a;l.on(o.bindingEvent,q)}else if(o.allowGetting&&a===void 0){var D;return d&&(o.beforeGet(d),D=d._private[o.field]),D}return l}},removeData:function(e){var t={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return e=tt({},t,e),function(a){var i=e,o=this,l=o.length!==void 0,c=l?o:[o];if(Qe(a)){for(var f=a.split(/\s+/),d=f.length,h=0;h<d;h++){var p=f[h];if(!wa(p)){var g=!i.immutableKeys[p];if(g)for(var m=0,w=c.length;m<w;m++)c[m]._private[i.field][p]=void 0}}i.triggerEvent&&o[i.triggerFnName](i.event)}else if(a===void 0){for(var x=0,b=c.length;x<b;x++)for(var E=c[x]._private[i.field],_=Object.keys(E),C=0;C<_.length;C++){var B=_[C],L=!i.immutableKeys[B];L&&(E[B]=void 0)}i.triggerEvent&&o[i.triggerFnName](i.event)}return o}}},vC={eventAliasesOn:function(e){var t=e;t.addListener=t.listen=t.bind=t.on,t.unlisten=t.unbind=t.off=t.removeListener,t.trigger=t.emit,t.pon=t.promiseOn=function(n,a){var i=this,o=Array.prototype.slice.call(arguments,0);return new es(function(l,c){var f=function(g){i.off.apply(i,h),l(g)},d=o.concat([f]),h=d.concat([]);i.on.apply(i,d)})}}},pt={};[xk,hC,vC].forEach(function(r){tt(pt,r)});var pC={animate:pt.animate(),animation:pt.animation(),animated:pt.animated(),clearQueue:pt.clearQueue(),delay:pt.delay(),delayAnimation:pt.delayAnimation(),stop:pt.stop()},cu={classes:function(e){var t=this;if(e===void 0){var n=[];return t[0]._private.classes.forEach(function(m){return n.push(m)}),n}else wt(e)||(e=(e||"").match(/\S+/g)||[]);for(var a=[],i=new Ji(e),o=0;o<t.length;o++){for(var l=t[o],c=l._private,f=c.classes,d=!1,h=0;h<e.length;h++){var p=e[h],g=f.has(p);if(!g){d=!0;break}}d||(d=f.size!==e.length),d&&(c.classes=i,a.push(l))}return a.length>0&&this.spawn(a).updateStyle().emit("class"),t},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var t=this[0];return t!=null&&t._private.classes.has(e)},toggleClass:function(e,t){wt(e)||(e=e.match(/\S+/g)||[]);for(var n=this,a=t===void 0,i=[],o=0,l=n.length;o<l;o++)for(var c=n[o],f=c._private.classes,d=!1,h=0;h<e.length;h++){var p=e[h],g=f.has(p),m=!1;t||a&&!g?(f.add(p),m=!0):(!t||a&&g)&&(f.delete(p),m=!0),!d&&m&&(i.push(c),d=!0)}return i.length>0&&this.spawn(i).updateStyle().emit("class"),n},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,t){var n=this;if(t==null)t=250;else if(t===0)return n;return n.addClass(e),setTimeout(function(){n.removeClass(e)},t),n}};cu.className=cu.classNames=cu.classes;var ft={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:`"(?:\\\\"|[^"])*"|'(?:\\\\'|[^'])*'`,number:Qt,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};ft.variable="(?:[\\w-.]|(?:\\\\"+ft.metaChar+"))+";ft.className="(?:[\\w-]|(?:\\\\"+ft.metaChar+"))+";ft.value=ft.string+"|"+ft.number;ft.id=ft.variable;(function(){var r,e,t;for(r=ft.comparatorOp.split("|"),t=0;t<r.length;t++)e=r[t],ft.comparatorOp+="|@"+e;for(r=ft.comparatorOp.split("|"),t=0;t<r.length;t++)e=r[t],!(e.indexOf("!")>=0)&&e!=="="&&(ft.comparatorOp+="|\\!"+e)})();var yt=function(){return{checks:[]}},qe={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},Ih=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort(function(r,e){return h_(r.selector,e.selector)}),gC=(function(){for(var r={},e,t=0;t<Ih.length;t++)e=Ih[t],r[e.selector]=e.matches;return r})(),mC=function(e,t){return gC[e](t)},yC="("+Ih.map(function(r){return r.selector}).join("|")+")",Di=function(e){return e.replace(new RegExp("\\\\("+ft.metaChar+")","g"),function(t,n){return n})},da=function(e,t,n){e[e.length-1]=n},Dh=[{name:"group",query:!0,regex:"("+ft.group+")",populate:function(e,t,n){var a=Ht(n,1),i=a[0];t.checks.push({type:qe.GROUP,value:i==="*"?i:i+"s"})}},{name:"state",query:!0,regex:yC,populate:function(e,t,n){var a=Ht(n,1),i=a[0];t.checks.push({type:qe.STATE,value:i})}},{name:"id",query:!0,regex:"\\#("+ft.id+")",populate:function(e,t,n){var a=Ht(n,1),i=a[0];t.checks.push({type:qe.ID,value:Di(i)})}},{name:"className",query:!0,regex:"\\.("+ft.className+")",populate:function(e,t,n){var a=Ht(n,1),i=a[0];t.checks.push({type:qe.CLASS,value:Di(i)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+ft.variable+")\\s*\\]",populate:function(e,t,n){var a=Ht(n,1),i=a[0];t.checks.push({type:qe.DATA_EXIST,field:Di(i)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+ft.variable+")\\s*("+ft.comparatorOp+")\\s*("+ft.value+")\\s*\\]",populate:function(e,t,n){var a=Ht(n,3),i=a[0],o=a[1],l=a[2],c=new RegExp("^"+ft.string+"$").exec(l)!=null;c?l=l.substring(1,l.length-1):l=parseFloat(l),t.checks.push({type:qe.DATA_COMPARE,field:Di(i),operator:o,value:l})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+ft.boolOp+")\\s*("+ft.variable+")\\s*\\]",populate:function(e,t,n){var a=Ht(n,2),i=a[0],o=a[1];t.checks.push({type:qe.DATA_BOOL,field:Di(o),operator:i})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+ft.meta+")\\s*("+ft.comparatorOp+")\\s*("+ft.number+")\\s*\\]\\]",populate:function(e,t,n){var a=Ht(n,3),i=a[0],o=a[1],l=a[2];t.checks.push({type:qe.META_COMPARE,field:Di(i),operator:o,value:parseFloat(l)})}},{name:"nextQuery",separator:!0,regex:ft.separator,populate:function(e,t){var n=e.currentSubject,a=e.edgeCount,i=e.compoundCount,o=e[e.length-1];n!=null&&(o.subject=n,e.currentSubject=null),o.edgeCount=a,o.compoundCount=i,e.edgeCount=0,e.compoundCount=0;var l=e[e.length++]=yt();return l}},{name:"directedEdge",separator:!0,regex:ft.directedEdge,populate:function(e,t){if(e.currentSubject==null){var n=yt(),a=t,i=yt();return n.checks.push({type:qe.DIRECTED_EDGE,source:a,target:i}),da(e,t,n),e.edgeCount++,i}else{var o=yt(),l=t,c=yt();return o.checks.push({type:qe.NODE_SOURCE,source:l,target:c}),da(e,t,o),e.edgeCount++,c}}},{name:"undirectedEdge",separator:!0,regex:ft.undirectedEdge,populate:function(e,t){if(e.currentSubject==null){var n=yt(),a=t,i=yt();return n.checks.push({type:qe.UNDIRECTED_EDGE,nodes:[a,i]}),da(e,t,n),e.edgeCount++,i}else{var o=yt(),l=t,c=yt();return o.checks.push({type:qe.NODE_NEIGHBOR,node:l,neighbor:c}),da(e,t,o),c}}},{name:"child",separator:!0,regex:ft.child,populate:function(e,t){if(e.currentSubject==null){var n=yt(),a=yt(),i=e[e.length-1];return n.checks.push({type:qe.CHILD,parent:i,child:a}),da(e,t,n),e.compoundCount++,a}else if(e.currentSubject===t){var o=yt(),l=e[e.length-1],c=yt(),f=yt(),d=yt(),h=yt();return o.checks.push({type:qe.COMPOUND_SPLIT,left:l,right:c,subject:f}),f.checks=t.checks,t.checks=[{type:qe.TRUE}],h.checks.push({type:qe.TRUE}),c.checks.push({type:qe.PARENT,parent:h,child:d}),da(e,l,o),e.currentSubject=f,e.compoundCount++,d}else{var p=yt(),g=yt(),m=[{type:qe.PARENT,parent:p,child:g}];return p.checks=t.checks,t.checks=m,e.compoundCount++,g}}},{name:"descendant",separator:!0,regex:ft.descendant,populate:function(e,t){if(e.currentSubject==null){var n=yt(),a=yt(),i=e[e.length-1];return n.checks.push({type:qe.DESCENDANT,ancestor:i,descendant:a}),da(e,t,n),e.compoundCount++,a}else if(e.currentSubject===t){var o=yt(),l=e[e.length-1],c=yt(),f=yt(),d=yt(),h=yt();return o.checks.push({type:qe.COMPOUND_SPLIT,left:l,right:c,subject:f}),f.checks=t.checks,t.checks=[{type:qe.TRUE}],h.checks.push({type:qe.TRUE}),c.checks.push({type:qe.ANCESTOR,ancestor:h,descendant:d}),da(e,l,o),e.currentSubject=f,e.compoundCount++,d}else{var p=yt(),g=yt(),m=[{type:qe.ANCESTOR,ancestor:p,descendant:g}];return p.checks=t.checks,t.checks=m,e.compoundCount++,g}}},{name:"subject",modifier:!0,regex:ft.subject,populate:function(e,t){if(e.currentSubject!=null&&e.currentSubject!==t)return gt("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=t;var n=e[e.length-1],a=n.checks[0],i=a==null?null:a.type;i===qe.DIRECTED_EDGE?a.type=qe.NODE_TARGET:i===qe.UNDIRECTED_EDGE&&(a.type=qe.NODE_NEIGHBOR,a.node=a.nodes[1],a.neighbor=a.nodes[0],a.nodes=null)}}];Dh.forEach(function(r){return r.regexObj=new RegExp("^"+r.regex)});var wC=function(e){for(var t,n,a,i=0;i<Dh.length;i++){var o=Dh[i],l=o.name,c=e.match(o.regexObj);if(c!=null){n=c,t=o,a=l;var f=c[0];e=e.substring(f.length);break}}return{expr:t,match:n,name:a,remaining:e}},xC=function(e){var t=e.match(/^\s+/);if(t){var n=t[0];e=e.substring(n.length)}return e},bC=function(e){var t=this,n=t.inputText=e,a=t[0]=yt();for(t.length=1,n=xC(n);;){var i=wC(n);if(i.expr==null)return gt("The selector `"+e+"`is invalid"),!1;var o=i.match.slice(1),l=i.expr.populate(t,a,o);if(l===!1)return!1;if(l!=null&&(a=l),n=i.remaining,n.match(/^\s*$/))break}var c=t[t.length-1];t.currentSubject!=null&&(c.subject=t.currentSubject),c.edgeCount=t.edgeCount,c.compoundCount=t.compoundCount;for(var f=0;f<t.length;f++){var d=t[f];if(d.compoundCount>0&&d.edgeCount>0)return gt("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(d.edgeCount>1)return gt("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;d.edgeCount===1&&gt("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},EC=function(){if(this.toStringCache!=null)return this.toStringCache;for(var e=function(d){return d??""},t=function(d){return Qe(d)?'"'+d+'"':e(d)},n=function(d){return" "+d+" "},a=function(d,h){var p=d.type,g=d.value;switch(p){case qe.GROUP:{var m=e(g);return m.substring(0,m.length-1)}case qe.DATA_COMPARE:{var w=d.field,x=d.operator;return"["+w+n(e(x))+t(g)+"]"}case qe.DATA_BOOL:{var b=d.operator,E=d.field;return"["+e(b)+E+"]"}case qe.DATA_EXIST:{var _=d.field;return"["+_+"]"}case qe.META_COMPARE:{var C=d.operator,B=d.field;return"[["+B+n(e(C))+t(g)+"]]"}case qe.STATE:return g;case qe.ID:return"#"+g;case qe.CLASS:return"."+g;case qe.PARENT:case qe.CHILD:return i(d.parent,h)+n(">")+i(d.child,h);case qe.ANCESTOR:case qe.DESCENDANT:return i(d.ancestor,h)+" "+i(d.descendant,h);case qe.COMPOUND_SPLIT:{var L=i(d.left,h),A=i(d.subject,h),z=i(d.right,h);return L+(L.length>0?" ":"")+A+z}case qe.TRUE:return""}},i=function(d,h){return d.checks.reduce(function(p,g,m){return p+(h===d&&m===0?"$":"")+a(g,h)},"")},o="",l=0;l<this.length;l++){var c=this[l];o+=i(c,c.subject),this.length>1&&l<this.length-1&&(o+=", ")}return this.toStringCache=o,o},_C={parse:bC,toString:EC},Q1=function(e,t,n){var a,i=Qe(e),o=$e(e),l=Qe(n),c,f,d=!1,h=!1,p=!1;switch(t.indexOf("!")>=0&&(t=t.replace("!",""),h=!0),t.indexOf("@")>=0&&(t=t.replace("@",""),d=!0),(i||l||d)&&(c=!i&&!o?"":""+e,f=""+n),d&&(e=c=c.toLowerCase(),n=f=f.toLowerCase()),t){case"*=":a=c.indexOf(f)>=0;break;case"$=":a=c.indexOf(f,c.length-f.length)>=0;break;case"^=":a=c.indexOf(f)===0;break;case"=":a=e===n;break;case">":p=!0,a=e>n;break;case">=":p=!0,a=e>=n;break;case"<":p=!0,a=e<n;break;case"<=":p=!0,a=e<=n;break;default:a=!1;break}return h&&(e!=null||!p)&&(a=!a),a},SC=function(e,t){switch(t){case"?":return!!e;case"!":return!e;case"^":return e===void 0}},kC=function(e){return e!==void 0},lv=function(e,t){return e.data(t)},CC=function(e,t){return e[t]()},Ut=[],Pt=function(e,t){return e.checks.every(function(n){return Ut[n.type](n,t)})};Ut[qe.GROUP]=function(r,e){var t=r.value;return t==="*"||t===e.group()};Ut[qe.STATE]=function(r,e){var t=r.value;return mC(t,e)};Ut[qe.ID]=function(r,e){var t=r.value;return e.id()===t};Ut[qe.CLASS]=function(r,e){var t=r.value;return e.hasClass(t)};Ut[qe.META_COMPARE]=function(r,e){var t=r.field,n=r.operator,a=r.value;return Q1(CC(e,t),n,a)};Ut[qe.DATA_COMPARE]=function(r,e){var t=r.field,n=r.operator,a=r.value;return Q1(lv(e,t),n,a)};Ut[qe.DATA_BOOL]=function(r,e){var t=r.field,n=r.operator;return SC(lv(e,t),n)};Ut[qe.DATA_EXIST]=function(r,e){var t=r.field;return r.operator,kC(lv(e,t))};Ut[qe.UNDIRECTED_EDGE]=function(r,e){var t=r.nodes[0],n=r.nodes[1],a=e.source(),i=e.target();return Pt(t,a)&&Pt(n,i)||Pt(n,a)&&Pt(t,i)};Ut[qe.NODE_NEIGHBOR]=function(r,e){return Pt(r.node,e)&&e.neighborhood().some(function(t){return t.isNode()&&Pt(r.neighbor,t)})};Ut[qe.DIRECTED_EDGE]=function(r,e){return Pt(r.source,e.source())&&Pt(r.target,e.target())};Ut[qe.NODE_SOURCE]=function(r,e){return Pt(r.source,e)&&e.outgoers().some(function(t){return t.isNode()&&Pt(r.target,t)})};Ut[qe.NODE_TARGET]=function(r,e){return Pt(r.target,e)&&e.incomers().some(function(t){return t.isNode()&&Pt(r.source,t)})};Ut[qe.CHILD]=function(r,e){return Pt(r.child,e)&&Pt(r.parent,e.parent())};Ut[qe.PARENT]=function(r,e){return Pt(r.parent,e)&&e.children().some(function(t){return Pt(r.child,t)})};Ut[qe.DESCENDANT]=function(r,e){return Pt(r.descendant,e)&&e.ancestors().some(function(t){return Pt(r.ancestor,t)})};Ut[qe.ANCESTOR]=function(r,e){return Pt(r.ancestor,e)&&e.descendants().some(function(t){return Pt(r.descendant,t)})};Ut[qe.COMPOUND_SPLIT]=function(r,e){return Pt(r.subject,e)&&Pt(r.left,e)&&Pt(r.right,e)};Ut[qe.TRUE]=function(){return!0};Ut[qe.COLLECTION]=function(r,e){var t=r.value;return t.has(e)};Ut[qe.FILTER]=function(r,e){var t=r.value;return t(e)};var TC=function(e){var t=this;if(t.length===1&&t[0].checks.length===1&&t[0].checks[0].type===qe.ID)return e.getElementById(t[0].checks[0].value).collection();var n=function(i){for(var o=0;o<t.length;o++){var l=t[o];if(Pt(l,i))return!0}return!1};return t.text()==null&&(n=function(){return!0}),e.filter(n)},PC=function(e){for(var t=this,n=0;n<t.length;n++){var a=t[n];if(Pt(a,e))return!0}return!1},RC={matches:PC,filter:TC},Ea=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,e==null||Qe(e)&&e.match(/^\s*$/)||(Hr(e)?this.addQuery({checks:[{type:qe.COLLECTION,value:e.collection()}]}):Ft(e)?this.addQuery({checks:[{type:qe.FILTER,value:e}]}):Qe(e)?this.parse(e)||(this.invalid=!0):It("A selector must be created from a string; found "))},_a=Ea.prototype;[_C,RC].forEach(function(r){return tt(_a,r)});_a.text=function(){return this.inputText};_a.size=function(){return this.length};_a.eq=function(r){return this[r]};_a.sameText=function(r){return!this.invalid&&!r.invalid&&this.text()===r.text()};_a.addQuery=function(r){this[this.length++]=r};_a.selector=_a.toString;var ma={allAre:function(e){var t=new Ea(e);return this.every(function(n){return t.matches(n)})},is:function(e){var t=new Ea(e);return this.some(function(n){return t.matches(n)})},some:function(e,t){for(var n=0;n<this.length;n++){var a=t?e.apply(t,[this[n],n,this]):e(this[n],n,this);if(a)return!0}return!1},every:function(e,t){for(var n=0;n<this.length;n++){var a=t?e.apply(t,[this[n],n,this]):e(this[n],n,this);if(!a)return!1}return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var t=this.length,n=e.length;return t!==n?!1:t===1?this[0]===e[0]:this.every(function(a){return e.hasElementWithId(a.id())})},anySame:function(e){return e=this.cy().collection(e),this.some(function(t){return e.hasElementWithId(t.id())})},allAreNeighbors:function(e){e=this.cy().collection(e);var t=this.neighborhood();return e.every(function(n){return t.hasElementWithId(n.id())})},contains:function(e){e=this.cy().collection(e);var t=this;return e.every(function(n){return t.hasElementWithId(n.id())})}};ma.allAreNeighbours=ma.allAreNeighbors;ma.has=ma.contains;ma.equal=ma.equals=ma.same;var nn=function(e,t){return function(a,i,o,l){var c=a,f=this,d;if(c==null?d="":Hr(c)&&c.length===1&&(d=c.id()),f.length===1&&d){var h=f[0]._private,p=h.traversalCache=h.traversalCache||{},g=p[t]=p[t]||[],m=Qa(d),w=g[m];return w||(g[m]=e.call(f,a,i,o,l))}else return e.call(f,a,i,o,l)}},Qi={parent:function(e){var t=[];if(this.length===1){var n=this[0]._private.parent;if(n)return n}for(var a=0;a<this.length;a++){var i=this[a],o=i._private.parent;o&&t.push(o)}return this.spawn(t,!0).filter(e)},parents:function(e){for(var t=[],n=this.parent();n.nonempty();){for(var a=0;a<n.length;a++){var i=n[a];t.push(i)}n=n.parent()}return this.spawn(t,!0).filter(e)},commonAncestors:function(e){for(var t,n=0;n<this.length;n++){var a=this[n],i=a.parents();t=t||i,t=t.intersect(i)}return t.filter(e)},orphans:function(e){return this.stdFilter(function(t){return t.isOrphan()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(t){return t.isChild()}).filter(e)},children:nn(function(r){for(var e=[],t=0;t<this.length;t++)for(var n=this[t],a=n._private.children,i=0;i<a.length;i++)e.push(a[i]);return this.spawn(e,!0).filter(r)},"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length!==0},isChildless:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length===0},isChild:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent!=null},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent==null},descendants:function(e){var t=[];function n(a){for(var i=0;i<a.length;i++){var o=a[i];t.push(o),o.children().nonempty()&&n(o.children())}}return n(this.children()),this.spawn(t,!0).filter(e)}};function uv(r,e,t,n){for(var a=[],i=new Ji,o=r.cy(),l=o.hasCompoundNodes(),c=0;c<r.length;c++){var f=r[c];t?a.push(f):l&&n(a,i,f)}for(;a.length>0;){var d=a.shift();e(d),i.add(d.id()),l&&n(a,i,d)}return r}function J1(r,e,t){if(t.isParent())for(var n=t._private.children,a=0;a<n.length;a++){var i=n[a];e.has(i.id())||r.push(i)}}Qi.forEachDown=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return uv(this,r,e,J1)};function ew(r,e,t){if(t.isChild()){var n=t._private.parent;e.has(n.id())||r.push(n)}}Qi.forEachUp=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return uv(this,r,e,ew)};function BC(r,e,t){ew(r,e,t),J1(r,e,t)}Qi.forEachUpAndDown=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return uv(this,r,e,BC)};Qi.ancestors=Qi.parents;var go,tw;go=tw={data:pt.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:pt.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:pt.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:pt.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:pt.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:pt.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}};go.attr=go.data;go.removeAttr=go.removeData;var AC=tw,Vu={};function dh(r){return function(e){var t=this;if(e===void 0&&(e=!0),t.length!==0)if(t.isNode()&&!t.removed()){for(var n=0,a=t[0],i=a._private.edges,o=0;o<i.length;o++){var l=i[o];!e&&l.isLoop()||(n+=r(a,l))}return n}else return}}tt(Vu,{degree:dh(function(r,e){return e.source().same(e.target())?2:1}),indegree:dh(function(r,e){return e.target().same(r)?1:0}),outdegree:dh(function(r,e){return e.source().same(r)?1:0})});function Ni(r,e){return function(t){for(var n,a=this.nodes(),i=0;i<a.length;i++){var o=a[i],l=o[r](t);l!==void 0&&(n===void 0||e(l,n))&&(n=l)}return n}}tt(Vu,{minDegree:Ni("degree",function(r,e){return r<e}),maxDegree:Ni("degree",function(r,e){return r>e}),minIndegree:Ni("indegree",function(r,e){return r<e}),maxIndegree:Ni("indegree",function(r,e){return r>e}),minOutdegree:Ni("outdegree",function(r,e){return r<e}),maxOutdegree:Ni("outdegree",function(r,e){return r>e})});tt(Vu,{totalDegree:function(e){for(var t=0,n=this.nodes(),a=0;a<n.length;a++)t+=n[a].degree(e);return t}});var vn,rw,nw=function(e,t,n){for(var a=0;a<e.length;a++){var i=e[a];if(!i.locked()){var o=i._private.position,l={x:t.x!=null?t.x-o.x:0,y:t.y!=null?t.y-o.y:0};i.isParent()&&!(l.x===0&&l.y===0)&&i.children().shift(l,n),i.dirtyBoundingBoxCache()}}},t0={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,t){nw(e,t,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}};vn=rw={position:pt.data(t0),silentPosition:pt.data(tt({},t0,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,t){nw(e,t,!0)},onSet:function(e){e.dirtyCompoundBoundsCache()}})),positions:function(e,t){if(dt(e))t?this.silentPosition(e):this.position(e);else if(Ft(e)){var n=e,a=this.cy();a.startBatch();for(var i=0;i<this.length;i++){var o=this[i],l=void 0;(l=n(o,i))&&(t?o.silentPosition(l):o.position(l))}a.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,t,n){var a;if(dt(e)?(a={x:$e(e.x)?e.x:0,y:$e(e.y)?e.y:0},n=t):Qe(e)&&$e(t)&&(a={x:0,y:0},a[e]=t),a!=null){var i=this.cy();i.startBatch();for(var o=0;o<this.length;o++){var l=this[o];if(!(i.hasCompoundNodes()&&l.isChild()&&l.ancestors().anySame(this))){var c=l.position(),f={x:c.x+a.x,y:c.y+a.y};n?l.silentPosition(f):l.position(f)}}i.endBatch()}return this},silentShift:function(e,t){return dt(e)?this.shift(e,!0):Qe(e)&&$e(t)&&this.shift(e,t,!0),this},renderedPosition:function(e,t){var n=this[0],a=this.cy(),i=a.zoom(),o=a.pan(),l=dt(e)?e:void 0,c=l!==void 0||t!==void 0&&Qe(e);if(n&&n.isNode())if(c)for(var f=0;f<this.length;f++){var d=this[f];t!==void 0?d.position(e,(t-o[e])/i):l!==void 0&&d.position(A1(l,i,o))}else{var h=n.position();return l=Mu(h,i,o),e===void 0?l:l[e]}else if(!c)return;return this},relativePosition:function(e,t){var n=this[0],a=this.cy(),i=dt(e)?e:void 0,o=i!==void 0||t!==void 0&&Qe(e),l=a.hasCompoundNodes();if(n&&n.isNode())if(o)for(var c=0;c<this.length;c++){var f=this[c],d=l?f.parent():null,h=d&&d.length>0,p=h;h&&(d=d[0]);var g=p?d.position():{x:0,y:0};t!==void 0?f.position(e,t+g[e]):i!==void 0&&f.position({x:i.x+g.x,y:i.y+g.y})}else{var m=n.position(),w=l?n.parent():null,x=w&&w.length>0,b=x;x&&(w=w[0]);var E=b?w.position():{x:0,y:0};return i={x:m.x-E.x,y:m.y-E.y},e===void 0?i:i[e]}else if(!o)return;return this}};vn.modelPosition=vn.point=vn.position;vn.modelPositions=vn.points=vn.positions;vn.renderedPoint=vn.renderedPosition;vn.relativePoint=vn.relativePosition;var IC=rw,Xi,Ta;Xi=Ta={};Ta.renderedBoundingBox=function(r){var e=this.boundingBox(r),t=this.cy(),n=t.zoom(),a=t.pan(),i=e.x1*n+a.x,o=e.x2*n+a.x,l=e.y1*n+a.y,c=e.y2*n+a.y;return{x1:i,x2:o,y1:l,y2:c,w:o-i,h:c-l}};Ta.dirtyCompoundBoundsCache=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();return!e.styleEnabled()||!e.hasCompoundNodes()?this:(this.forEachUp(function(t){if(t.isParent()){var n=t._private;n.compoundBoundsClean=!1,n.bbCache=null,r||t.emitAndNotify("bounds")}}),this)};Ta.updateCompoundBounds=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();if(!e.styleEnabled()||!e.hasCompoundNodes())return this;if(!r&&e.batching())return this;function t(o){if(!o.isParent())return;var l=o._private,c=o.children(),f=o.pstyle("compound-sizing-wrt-labels").value==="include",d={width:{val:o.pstyle("min-width").pfValue,left:o.pstyle("min-width-bias-left"),right:o.pstyle("min-width-bias-right")},height:{val:o.pstyle("min-height").pfValue,top:o.pstyle("min-height-bias-top"),bottom:o.pstyle("min-height-bias-bottom")}},h=c.boundingBox({includeLabels:f,includeOverlays:!1,useCache:!1}),p=l.position;(h.w===0||h.h===0)&&(h={w:o.pstyle("width").pfValue,h:o.pstyle("height").pfValue},h.x1=p.x-h.w/2,h.x2=p.x+h.w/2,h.y1=p.y-h.h/2,h.y2=p.y+h.h/2);function g(M,U,q){var D=0,F=0,T=U+q;return M>0&&T>0&&(D=U/T*M,F=q/T*M),{biasDiff:D,biasComplementDiff:F}}function m(M,U,q,D){if(q.units==="%")switch(D){case"width":return M>0?q.pfValue*M:0;case"height":return U>0?q.pfValue*U:0;case"average":return M>0&&U>0?q.pfValue*(M+U)/2:0;case"min":return M>0&&U>0?M>U?q.pfValue*U:q.pfValue*M:0;case"max":return M>0&&U>0?M>U?q.pfValue*M:q.pfValue*U:0;default:return 0}else return q.units==="px"?q.pfValue:0}var w=d.width.left.value;d.width.left.units==="px"&&d.width.val>0&&(w=w*100/d.width.val);var x=d.width.right.value;d.width.right.units==="px"&&d.width.val>0&&(x=x*100/d.width.val);var b=d.height.top.value;d.height.top.units==="px"&&d.height.val>0&&(b=b*100/d.height.val);var E=d.height.bottom.value;d.height.bottom.units==="px"&&d.height.val>0&&(E=E*100/d.height.val);var _=g(d.width.val-h.w,w,x),C=_.biasDiff,B=_.biasComplementDiff,L=g(d.height.val-h.h,b,E),A=L.biasDiff,z=L.biasComplementDiff;l.autoPadding=m(h.w,h.h,o.pstyle("padding"),o.pstyle("padding-relative-to").value),l.autoWidth=Math.max(h.w,d.width.val),p.x=(-C+h.x1+h.x2+B)/2,l.autoHeight=Math.max(h.h,d.height.val),p.y=(-A+h.y1+h.y2+z)/2}for(var n=0;n<this.length;n++){var a=this[n],i=a._private;(!i.compoundBoundsClean||r)&&(t(a),e.batching()||(i.compoundBoundsClean=!0))}return this};var rn=function(e){return e===1/0||e===-1/0?0:e},hn=function(e,t,n,a,i){a-t===0||i-n===0||t==null||n==null||a==null||i==null||(e.x1=t<e.x1?t:e.x1,e.x2=a>e.x2?a:e.x2,e.y1=n<e.y1?n:e.y1,e.y2=i>e.y2?i:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},ha=function(e,t){return t==null?e:hn(e,t.x1,t.y1,t.x2,t.y2)},Zs=function(e,t,n){return Mr(e,t,n)},Ql=function(e,t,n){if(!t.cy().headless()){var a=t._private,i=a.rstyle,o=i.arrowWidth/2,l=t.pstyle(n+"-arrow-shape").value,c,f;if(l!=="none"){n==="source"?(c=i.srcX,f=i.srcY):n==="target"?(c=i.tgtX,f=i.tgtY):(c=i.midX,f=i.midY);var d=a.arrowBounds=a.arrowBounds||{},h=d[n]=d[n]||{};h.x1=c-o,h.y1=f-o,h.x2=c+o,h.y2=f+o,h.w=h.x2-h.x1,h.h=h.y2-h.y1,lu(h,1),hn(e,h.x1,h.y1,h.x2,h.y2)}}},hh=function(e,t,n){if(!t.cy().headless()){var a;n?a=n+"-":a="";var i=t._private,o=i.rstyle,l=t.pstyle(a+"label").strValue;if(l){var c=t.pstyle("text-halign"),f=t.pstyle("text-valign"),d=Zs(o,"labelWidth",n),h=Zs(o,"labelHeight",n),p=Zs(o,"labelX",n),g=Zs(o,"labelY",n),m=t.pstyle(a+"text-margin-x").pfValue,w=t.pstyle(a+"text-margin-y").pfValue,x=t.isEdge(),b=t.pstyle(a+"text-rotation"),E=t.pstyle("text-outline-width").pfValue,_=t.pstyle("text-border-width").pfValue,C=_/2,B=t.pstyle("text-background-padding").pfValue,L=2,A=h,z=d,M=z/2,U=A/2,q,D,F,T;if(x)q=p-M,D=p+M,F=g-U,T=g+U;else{switch(c.value){case"left":q=p-z,D=p;break;case"center":q=p-M,D=p+M;break;case"right":q=p,D=p+z;break}switch(f.value){case"top":F=g-A,T=g;break;case"center":F=g-U,T=g+U;break;case"bottom":F=g,T=g+A;break}}var G=m-Math.max(E,C)-B-L,Q=m+Math.max(E,C)+B+L,W=w-Math.max(E,C)-B-L,X=w+Math.max(E,C)+B+L;q+=G,D+=Q,F+=W,T+=X;var Z=n||"main",te=i.labelBounds,N=te[Z]=te[Z]||{};N.x1=q,N.y1=F,N.x2=D,N.y2=T,N.w=D-q,N.h=T-F,N.leftPad=G,N.rightPad=Q,N.topPad=W,N.botPad=X;var $=x&&b.strValue==="autorotate",oe=b.pfValue!=null&&b.pfValue!==0;if($||oe){var ie=$?Zs(i.rstyle,"labelAngle",n):b.pfValue,ne=Math.cos(ie),xe=Math.sin(ie),Pe=(q+D)/2,Ce=(F+T)/2;if(!x){switch(c.value){case"left":Pe=D;break;case"right":Pe=q;break}switch(f.value){case"top":Ce=T;break;case"bottom":Ce=F;break}}var me=function(Y,K){return Y=Y-Pe,K=K-Ce,{x:Y*ne-K*xe+Pe,y:Y*xe+K*ne+Ce}},fe=me(q,F),he=me(q,T),Ee=me(D,F),Re=me(D,T);q=Math.min(fe.x,he.x,Ee.x,Re.x),D=Math.max(fe.x,he.x,Ee.x,Re.x),F=Math.min(fe.y,he.y,Ee.y,Re.y),T=Math.max(fe.y,he.y,Ee.y,Re.y)}var I=Z+"Rot",pe=te[I]=te[I]||{};pe.x1=q,pe.y1=F,pe.x2=D,pe.y2=T,pe.w=D-q,pe.h=T-F,hn(e,q,F,D,T),hn(i.labelBounds.all,q,F,D,T)}return e}},r0=function(e,t){if(!t.cy().headless()){var n=t.pstyle("outline-opacity").value,a=t.pstyle("outline-width").value,i=t.pstyle("outline-offset").value,o=a+i;aw(e,t,n,o,"outside",o/2)}},aw=function(e,t,n,a,i,o){if(!(n===0||a<=0||i==="inside")){var l=t.cy(),c=t.pstyle("shape").value,f=l.renderer().nodeShapes[c],d=t.position(),h=d.x,p=d.y,g=t.width(),m=t.height();if(f.hasMiterBounds){i==="center"&&(a/=2);var w=f.miterBounds(h,p,g,m,a);ha(e,w)}else o!=null&&o>0&&uu(e,[o,o,o,o])}},DC=function(e,t){if(!t.cy().headless()){var n=t.pstyle("border-opacity").value,a=t.pstyle("border-width").pfValue,i=t.pstyle("border-position").value;aw(e,t,n,a,i)}},NC=function(e,t){var n=e._private.cy,a=n.styleEnabled(),i=n.headless(),o=Rr(),l=e._private,c=e.isNode(),f=e.isEdge(),d,h,p,g,m,w,x=l.rstyle,b=c&&a?e.pstyle("bounds-expansion").pfValue:[0],E=function(ge){return ge.pstyle("display").value!=="none"},_=!a||E(e)&&(!f||E(e.source())&&E(e.target()));if(_){var C=0,B=0;a&&t.includeOverlays&&(C=e.pstyle("overlay-opacity").value,C!==0&&(B=e.pstyle("overlay-padding").value));var L=0,A=0;a&&t.includeUnderlays&&(L=e.pstyle("underlay-opacity").value,L!==0&&(A=e.pstyle("underlay-padding").value));var z=Math.max(B,A),M=0,U=0;if(a&&(M=e.pstyle("width").pfValue,U=M/2),c&&t.includeNodes){var q=e.position();m=q.x,w=q.y;var D=e.outerWidth(),F=D/2,T=e.outerHeight(),G=T/2;d=m-F,h=m+F,p=w-G,g=w+G,hn(o,d,p,h,g),a&&r0(o,e),a&&t.includeOutlines&&!i&&r0(o,e),a&&DC(o,e)}else if(f&&t.includeEdges)if(a&&!i){var Q=e.pstyle("curve-style").strValue;if(d=Math.min(x.srcX,x.midX,x.tgtX),h=Math.max(x.srcX,x.midX,x.tgtX),p=Math.min(x.srcY,x.midY,x.tgtY),g=Math.max(x.srcY,x.midY,x.tgtY),d-=U,h+=U,p-=U,g+=U,hn(o,d,p,h,g),Q==="haystack"){var W=x.haystackPts;if(W&&W.length===2){if(d=W[0].x,p=W[0].y,h=W[1].x,g=W[1].y,d>h){var X=d;d=h,h=X}if(p>g){var Z=p;p=g,g=Z}hn(o,d-U,p-U,h+U,g+U)}}else if(Q==="bezier"||Q==="unbundled-bezier"||va(Q,"segments")||va(Q,"taxi")){var te;switch(Q){case"bezier":case"unbundled-bezier":te=x.bezierPts;break;case"segments":case"taxi":case"round-segments":case"round-taxi":te=x.linePts;break}if(te!=null)for(var N=0;N<te.length;N++){var $=te[N];d=$.x-U,h=$.x+U,p=$.y-U,g=$.y+U,hn(o,d,p,h,g)}}}else{var oe=e.source(),ie=oe.position(),ne=e.target(),xe=ne.position();if(d=ie.x,h=xe.x,p=ie.y,g=xe.y,d>h){var Pe=d;d=h,h=Pe}if(p>g){var Ce=p;p=g,g=Ce}d-=U,h+=U,p-=U,g+=U,hn(o,d,p,h,g)}if(a&&t.includeEdges&&f&&(Ql(o,e,"mid-source"),Ql(o,e,"mid-target"),Ql(o,e,"source"),Ql(o,e,"target")),a){var me=e.pstyle("ghost").value==="yes";if(me){var fe=e.pstyle("ghost-offset-x").pfValue,he=e.pstyle("ghost-offset-y").pfValue;hn(o,o.x1+fe,o.y1+he,o.x2+fe,o.y2+he)}}var Ee=l.bodyBounds=l.bodyBounds||{};Um(Ee,o),uu(Ee,b),lu(Ee,1),a&&(d=o.x1,h=o.x2,p=o.y1,g=o.y2,hn(o,d-z,p-z,h+z,g+z));var Re=l.overlayBounds=l.overlayBounds||{};Um(Re,o),uu(Re,b),lu(Re,1);var I=l.labelBounds=l.labelBounds||{};I.all!=null?pS(I.all):I.all=Rr(),a&&t.includeLabels&&(t.includeMainLabels&&hh(o,e,null),f&&(t.includeSourceLabels&&hh(o,e,"source"),t.includeTargetLabels&&hh(o,e,"target")))}return o.x1=rn(o.x1),o.y1=rn(o.y1),o.x2=rn(o.x2),o.y2=rn(o.y2),o.w=rn(o.x2-o.x1),o.h=rn(o.y2-o.y1),o.w>0&&o.h>0&&_&&(uu(o,b),lu(o,1)),o},iw=function(e){var t=0,n=function(o){return(o?1:0)<<t++},a=0;return a+=n(e.incudeNodes),a+=n(e.includeEdges),a+=n(e.includeLabels),a+=n(e.includeMainLabels),a+=n(e.includeSourceLabels),a+=n(e.includeTargetLabels),a+=n(e.includeOverlays),a+=n(e.includeOutlines),a},sw=function(e){var t=function(l){return Math.round(l)};if(e.isEdge()){var n=e.source().position(),a=e.target().position();return Lm([t(n.x),t(n.y),t(a.x),t(a.y)])}else{var i=e.position();return Lm([t(i.x),t(i.y)])}},n0=function(e,t){var n=e._private,a,i=e.isEdge(),o=t==null?a0:iw(t),l=o===a0;if(n.bbCache==null?(a=NC(e,mo),n.bbCache=a,n.bbCachePosKey=sw(e)):a=n.bbCache,!l){var c=e.isNode();a=Rr(),(t.includeNodes&&c||t.includeEdges&&!c)&&(t.includeOverlays?ha(a,n.overlayBounds):ha(a,n.bodyBounds)),t.includeLabels&&(t.includeMainLabels&&(!i||t.includeSourceLabels&&t.includeTargetLabels)?ha(a,n.labelBounds.all):(t.includeMainLabels&&ha(a,n.labelBounds.mainRot),t.includeSourceLabels&&ha(a,n.labelBounds.sourceRot),t.includeTargetLabels&&ha(a,n.labelBounds.targetRot))),a.w=a.x2-a.x1,a.h=a.y2-a.y1}return a},mo={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},a0=iw(mo),i0=dr(mo);Ta.boundingBox=function(r){var e,t=r===void 0||r.useCache===void 0||r.useCache===!0,n=Zi(function(d){var h=d._private;return h.bbCache==null||h.styleDirty||h.bbCachePosKey!==sw(d)},function(d){return d.id()});if(t&&this.length===1&&!n(this[0]))r===void 0?r=mo:r=i0(r),e=n0(this[0],r);else{e=Rr(),r=r||mo;var a=i0(r),i=this,o=i.cy(),l=o.styleEnabled();this.edges().forEach(n),this.nodes().forEach(n),l&&this.recalculateRenderedStyle(t),this.updateCompoundBounds(!t);for(var c=0;c<i.length;c++){var f=i[c];n(f)&&f.dirtyBoundingBoxCache(),ha(e,n0(f,a))}}return e.x1=rn(e.x1),e.y1=rn(e.y1),e.x2=rn(e.x2),e.y2=rn(e.y2),e.w=rn(e.x2-e.x1),e.h=rn(e.y2-e.y1),e};Ta.dirtyBoundingBoxCache=function(){for(var r=0;r<this.length;r++){var e=this[r]._private;e.bbCache=null,e.bbCachePosKey=null,e.bodyBounds=null,e.overlayBounds=null,e.labelBounds.all=null,e.labelBounds.source=null,e.labelBounds.target=null,e.labelBounds.main=null,e.labelBounds.sourceRot=null,e.labelBounds.targetRot=null,e.labelBounds.mainRot=null,e.arrowBounds.source=null,e.arrowBounds.target=null,e.arrowBounds["mid-source"]=null,e.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this};Ta.boundingBoxAt=function(r){var e=this.nodes(),t=this.cy(),n=t.hasCompoundNodes(),a=t.collection();if(n&&(a=e.filter(function(f){return f.isParent()}),e=e.not(a)),dt(r)){var i=r;r=function(){return i}}var o=function(d,h){return d._private.bbAtOldPos=r(d,h)},l=function(d){return d._private.bbAtOldPos};t.startBatch(),e.forEach(o).silentPositions(r),n&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0));var c=vS(this.boundingBox({useCache:!1}));return e.silentPositions(l),n&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0)),t.endBatch(),c};Xi.boundingbox=Xi.bb=Xi.boundingBox;Xi.renderedBoundingbox=Xi.renderedBoundingBox;var LC=Ta,ao,Ao;ao=Ao={};var ow=function(e){e.uppercaseName=xm(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=xm(e.outerName),ao[e.name]=function(){var n=this[0],a=n._private,i=a.cy,o=i._private.styleEnabled;if(n)if(o){if(n.isParent())return n.updateCompoundBounds(),a[e.autoName]||0;var l=n.pstyle(e.name);switch(l.strValue){case"label":return n.recalculateRenderedStyle(),a.rstyle[e.labelName]||0;default:return l.pfValue}}else return 1},ao["outer"+e.uppercaseName]=function(){var n=this[0],a=n._private,i=a.cy,o=i._private.styleEnabled;if(n)if(o){var l=n[e.name](),c=n.pstyle("border-position").value,f;c==="center"?f=n.pstyle("border-width").pfValue:c==="outside"?f=2*n.pstyle("border-width").pfValue:f=0;var d=2*n.padding();return l+f+d}else return 1},ao["rendered"+e.uppercaseName]=function(){var n=this[0];if(n){var a=n[e.name]();return a*this.cy().zoom()}},ao["rendered"+e.uppercaseOuterName]=function(){var n=this[0];if(n){var a=n[e.outerName]();return a*this.cy().zoom()}}};ow({name:"width"});ow({name:"height"});Ao.padding=function(){var r=this[0],e=r._private;return r.isParent()?(r.updateCompoundBounds(),e.autoPadding!==void 0?e.autoPadding:r.pstyle("padding").pfValue):r.pstyle("padding").pfValue};Ao.paddedHeight=function(){var r=this[0];return r.height()+2*r.padding()};Ao.paddedWidth=function(){var r=this[0];return r.width()+2*r.padding()};var OC=Ao,MC=function(e,t){if(e.isEdge()&&e.takesUpSpace())return t(e)},zC=function(e,t){if(e.isEdge()&&e.takesUpSpace()){var n=e.cy();return Mu(t(e),n.zoom(),n.pan())}},FC=function(e,t){if(e.isEdge()&&e.takesUpSpace()){var n=e.cy(),a=n.pan(),i=n.zoom();return t(e).map(function(o){return Mu(o,i,a)})}},$C=function(e){return e.renderer().getControlPoints(e)},UC=function(e){return e.renderer().getSegmentPoints(e)},jC=function(e){return e.renderer().getSourceEndpoint(e)},VC=function(e){return e.renderer().getTargetEndpoint(e)},qC=function(e){return e.renderer().getEdgeMidpoint(e)},s0={controlPoints:{get:$C,mult:!0},segmentPoints:{get:UC,mult:!0},sourceEndpoint:{get:jC},targetEndpoint:{get:VC},midpoint:{get:qC}},WC=function(e){return"rendered"+e[0].toUpperCase()+e.substr(1)},GC=Object.keys(s0).reduce(function(r,e){var t=s0[e],n=WC(e);return r[e]=function(){return MC(this,t.get)},t.mult?r[n]=function(){return FC(this,t.get)}:r[n]=function(){return zC(this,t.get)},r},{}),HC=tt({},IC,LC,OC,GC);/*!
Event object based on jQuery events, MIT license

https://jquery.org/license/
https://tldrlegal.com/license/mit-license
https://github.com/jquery/jquery/blob/master/src/event.js
*/var lw=function(e,t){this.recycle(e,t)};function Ys(){return!1}function Jl(){return!0}lw.prototype={instanceString:function(){return"event"},recycle:function(e,t){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=Ys,e!=null&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?Jl:Ys):e!=null&&e.type?t=e:this.type=e,t!=null&&(this.originalEvent=t.originalEvent,this.type=t.type!=null?t.type:this.type,this.cy=t.cy,this.target=t.target,this.position=t.position,this.renderedPosition=t.renderedPosition,this.namespace=t.namespace,this.layout=t.layout),this.cy!=null&&this.position!=null&&this.renderedPosition==null){var n=this.position,a=this.cy.zoom(),i=this.cy.pan();this.renderedPosition={x:n.x*a+i.x,y:n.y*a+i.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=Jl;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=Jl;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=Jl,this.stopPropagation()},isDefaultPrevented:Ys,isPropagationStopped:Ys,isImmediatePropagationStopped:Ys};var uw=/^([^.]+)(\.(?:[^.]+))?$/,KC=".*",cw={qualifierCompare:function(e,t){return e===t},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},o0=Object.keys(cw),XC={};function qu(){for(var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:XC,e=arguments.length>1?arguments[1]:void 0,t=0;t<o0.length;t++){var n=o0[t];this[n]=r[n]||cw[n]}this.context=e||this.context,this.listeners=[],this.emitting=0}var Sa=qu.prototype,fw=function(e,t,n,a,i,o,l){Ft(a)&&(i=a,a=null),l&&(o==null?o=l:o=tt({},o,l));for(var c=wt(n)?n:n.split(/\s+/),f=0;f<c.length;f++){var d=c[f];if(!wa(d)){var h=d.match(uw);if(h){var p=h[1],g=h[2]?h[2]:null,m=t(e,d,p,g,a,i,o);if(m===!1)break}}}},l0=function(e,t){return e.addEventFields(e.context,t),new lw(t.type,t)},ZC=function(e,t,n){if(r_(n)){t(e,n);return}else if(dt(n)){t(e,l0(e,n));return}for(var a=wt(n)?n:n.split(/\s+/),i=0;i<a.length;i++){var o=a[i];if(!wa(o)){var l=o.match(uw);if(l){var c=l[1],f=l[2]?l[2]:null,d=l0(e,{type:c,namespace:f,target:e.context});t(e,d)}}}};Sa.on=Sa.addListener=function(r,e,t,n,a){return fw(this,function(i,o,l,c,f,d,h){Ft(d)&&i.listeners.push({event:o,callback:d,type:l,namespace:c,qualifier:f,conf:h})},r,e,t,n,a),this};Sa.one=function(r,e,t,n){return this.on(r,e,t,n,{one:!0})};Sa.removeListener=Sa.off=function(r,e,t,n){var a=this;this.emitting!==0&&(this.listeners=z_(this.listeners));for(var i=this.listeners,o=function(f){var d=i[f];fw(a,function(h,p,g,m,w,x){if((d.type===g||r==="*")&&(!m&&d.namespace!==".*"||d.namespace===m)&&(!w||h.qualifierCompare(d.qualifier,w))&&(!x||d.callback===x))return i.splice(f,1),!1},r,e,t,n)},l=i.length-1;l>=0;l--)o(l);return this};Sa.removeAllListeners=function(){return this.removeListener("*")};Sa.emit=Sa.trigger=function(r,e,t){var n=this.listeners,a=n.length;return this.emitting++,wt(e)||(e=[e]),ZC(this,function(i,o){t!=null&&(n=[{event:o.event,type:o.type,namespace:o.namespace,callback:t}],a=n.length);for(var l=function(){var d=n[c];if(d.type===o.type&&(!d.namespace||d.namespace===o.namespace||d.namespace===KC)&&i.eventMatches(i.context,d,o)){var h=[o];e!=null&&$_(h,e),i.beforeEmit(i.context,d,o),d.conf&&d.conf.one&&(i.listeners=i.listeners.filter(function(m){return m!==d}));var p=i.callbackContext(i.context,d,o),g=d.callback.apply(p,h);i.afterEmit(i.context,d,o),g===!1&&(o.stopPropagation(),o.preventDefault())}},c=0;c<a;c++)l();i.bubble(i.context)&&!o.isPropagationStopped()&&i.parent(i.context).emit(o,e)},r),this.emitting--,this};var YC={qualifierCompare:function(e,t){return e==null||t==null?e==null&&t==null:e.sameText(t)},eventMatches:function(e,t,n){var a=t.qualifier;return a!=null?e!==n.target&&ko(n.target)&&a.matches(n.target):!0},addEventFields:function(e,t){t.cy=e.cy(),t.target=e},callbackContext:function(e,t,n){return t.qualifier!=null?n.target:e},beforeEmit:function(e,t){t.conf&&t.conf.once&&t.conf.onceCollection.removeListener(t.event,t.qualifier,t.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},eu=function(e){return Qe(e)?new Ea(e):e},dw={createEmitter:function(){for(var e=0;e<this.length;e++){var t=this[e],n=t._private;n.emitter||(n.emitter=new qu(YC,t))}return this},emitter:function(){return this._private.emitter},on:function(e,t,n){for(var a=eu(t),i=0;i<this.length;i++){var o=this[i];o.emitter().on(e,a,n)}return this},removeListener:function(e,t,n){for(var a=eu(t),i=0;i<this.length;i++){var o=this[i];o.emitter().removeListener(e,a,n)}return this},removeAllListeners:function(){for(var e=0;e<this.length;e++){var t=this[e];t.emitter().removeAllListeners()}return this},one:function(e,t,n){for(var a=eu(t),i=0;i<this.length;i++){var o=this[i];o.emitter().one(e,a,n)}return this},once:function(e,t,n){for(var a=eu(t),i=0;i<this.length;i++){var o=this[i];o.emitter().on(e,a,n,{once:!0,onceCollection:this})}},emit:function(e,t){for(var n=0;n<this.length;n++){var a=this[n];a.emitter().emit(e,t)}return this},emitAndNotify:function(e,t){if(this.length!==0)return this.cy().notify(e,this),this.emit(e,t),this}};pt.eventAliasesOn(dw);var hw={nodes:function(e){return this.filter(function(t){return t.isNode()}).filter(e)},edges:function(e){return this.filter(function(t){return t.isEdge()}).filter(e)},byGroup:function(){for(var e=this.spawn(),t=this.spawn(),n=0;n<this.length;n++){var a=this[n];a.isNode()?e.push(a):t.push(a)}return{nodes:e,edges:t}},filter:function(e,t){if(e===void 0)return this;if(Qe(e)||Hr(e))return new Ea(e).filter(this);if(Ft(e)){for(var n=this.spawn(),a=this,i=0;i<a.length;i++){var o=a[i],l=t?e.apply(t,[o,i,a]):e(o,i,a);l&&n.push(o)}return n}return this.spawn()},not:function(e){if(e){Qe(e)&&(e=this.filter(e));for(var t=this.spawn(),n=0;n<this.length;n++){var a=this[n],i=e.has(a);i||t.push(a)}return t}else return this},absoluteComplement:function(){var e=this.cy();return e.mutableElements().not(this)},intersect:function(e){if(Qe(e)){var t=e;return this.filter(t)}for(var n=this.spawn(),a=this,i=e,o=this.length<e.length,l=o?a:i,c=o?i:a,f=0;f<l.length;f++){var d=l[f];c.has(d)&&n.push(d)}return n},xor:function(e){var t=this._private.cy;Qe(e)&&(e=t.$(e));var n=this.spawn(),a=this,i=e,o=function(c,f){for(var d=0;d<c.length;d++){var h=c[d],p=h._private.data.id,g=f.hasElementWithId(p);g||n.push(h)}};return o(a,i),o(i,a),n},diff:function(e){var t=this._private.cy;Qe(e)&&(e=t.$(e));var n=this.spawn(),a=this.spawn(),i=this.spawn(),o=this,l=e,c=function(d,h,p){for(var g=0;g<d.length;g++){var m=d[g],w=m._private.data.id,x=h.hasElementWithId(w);x?i.merge(m):p.push(m)}};return c(o,l,n),c(l,o,a),{left:n,right:a,both:i}},add:function(e){var t=this._private.cy;if(!e)return this;if(Qe(e)){var n=e;e=t.mutableElements().filter(n)}for(var a=this.spawnSelf(),i=0;i<e.length;i++){var o=e[i],l=!this.has(o);l&&a.push(o)}return a},merge:function(e){var t=this._private,n=t.cy;if(!e)return this;if(e&&Qe(e)){var a=e;e=n.mutableElements().filter(a)}for(var i=t.map,o=0;o<e.length;o++){var l=e[o],c=l._private.data.id,f=!i.has(c);if(f){var d=this.length++;this[d]=l,i.set(c,{ele:l,index:d})}}return this},unmergeAt:function(e){var t=this[e],n=t.id(),a=this._private,i=a.map;this[e]=void 0,i.delete(n);var o=e===this.length-1;if(this.length>1&&!o){var l=this.length-1,c=this[l],f=c._private.data.id;this[l]=void 0,this[e]=c,i.set(f,{ele:c,index:e})}return this.length--,this},unmergeOne:function(e){e=e[0];var t=this._private,n=e._private.data.id,a=t.map,i=a.get(n);if(!i)return this;var o=i.index;return this.unmergeAt(o),this},unmerge:function(e){var t=this._private.cy;if(!e)return this;if(e&&Qe(e)){var n=e;e=t.mutableElements().filter(n)}for(var a=0;a<e.length;a++)this.unmergeOne(e[a]);return this},unmergeBy:function(e){for(var t=this.length-1;t>=0;t--){var n=this[t];e(n)&&this.unmergeAt(t)}return this},map:function(e,t){for(var n=[],a=this,i=0;i<a.length;i++){var o=a[i],l=t?e.apply(t,[o,i,a]):e(o,i,a);n.push(l)}return n},reduce:function(e,t){for(var n=t,a=this,i=0;i<a.length;i++)n=e(n,a[i],i,a);return n},max:function(e,t){for(var n=-1/0,a,i=this,o=0;o<i.length;o++){var l=i[o],c=t?e.apply(t,[l,o,i]):e(l,o,i);c>n&&(n=c,a=l)}return{value:n,ele:a}},min:function(e,t){for(var n=1/0,a,i=this,o=0;o<i.length;o++){var l=i[o],c=t?e.apply(t,[l,o,i]):e(l,o,i);c<n&&(n=c,a=l)}return{value:n,ele:a}}},vt=hw;vt.u=vt["|"]=vt["+"]=vt.union=vt.or=vt.add;vt["\\"]=vt["!"]=vt["-"]=vt.difference=vt.relativeComplement=vt.subtract=vt.not;vt.n=vt["&"]=vt["."]=vt.and=vt.intersection=vt.intersect;vt["^"]=vt["(+)"]=vt["(-)"]=vt.symmetricDifference=vt.symdiff=vt.xor;vt.fnFilter=vt.filterFn=vt.stdFilter=vt.filter;vt.complement=vt.abscomp=vt.absoluteComplement;var QC={isNode:function(){return this.group()==="nodes"},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},vw=function(e,t){var n=e.cy(),a=n.hasCompoundNodes();function i(d){var h=d.pstyle("z-compound-depth");return h.value==="auto"?a?d.zDepth():0:h.value==="bottom"?-1:h.value==="top"?Qh:0}var o=i(e)-i(t);if(o!==0)return o;function l(d){var h=d.pstyle("z-index-compare");return h.value==="auto"&&d.isNode()?1:0}var c=l(e)-l(t);if(c!==0)return c;var f=e.pstyle("z-index").value-t.pstyle("z-index").value;return f!==0?f:e.poolIndex()-t.poolIndex()},ku={forEach:function(e,t){if(Ft(e))for(var n=this.length,a=0;a<n;a++){var i=this[a],o=t?e.apply(t,[i,a,this]):e(i,a,this);if(o===!1)break}return this},toArray:function(){for(var e=[],t=0;t<this.length;t++)e.push(this[t]);return e},slice:function(e,t){var n=[],a=this.length;t==null&&(t=a),e==null&&(e=0),e<0&&(e=a+e),t<0&&(t=a+t);for(var i=e;i>=0&&i<t&&i<a;i++)n.push(this[i]);return this.spawn(n)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return this.length===0},nonempty:function(){return!this.empty()},sort:function(e){if(!Ft(e))return this;var t=this.toArray().sort(e);return this.spawn(t)},sortByZIndex:function(){return this.sort(vw)},zDepth:function(){var e=this[0];if(e){var t=e._private,n=t.group;if(n==="nodes"){var a=t.data.parent?e.parents().size():0;return e.isParent()?a:Qh-1}else{var i=t.source,o=t.target,l=i.zDepth(),c=o.zDepth();return Math.max(l,c,0)}}}};ku.each=ku.forEach;var JC=function(){var e="undefined",t=(typeof Symbol>"u"?"undefined":Jt(Symbol))!=e&&Jt(Symbol.iterator)!=e;t&&(ku[Symbol.iterator]=function(){var n=this,a={value:void 0,done:!1},i=0,o=this.length;return d1({next:function(){return i<o?a.value=n[i++]:(a.value=void 0,a.done=!0),a}},Symbol.iterator,function(){return this})})};JC();var eT=dr({nodeDimensionsIncludeLabels:!1}),fu={layoutDimensions:function(e){e=eT(e);var t;if(!this.takesUpSpace())t={w:0,h:0};else if(e.nodeDimensionsIncludeLabels){var n=this.boundingBox();t={w:n.w,h:n.h}}else t={w:this.outerWidth(),h:this.outerHeight()};return(t.w===0||t.h===0)&&(t.w=t.h=1),t},layoutPositions:function(e,t,n){var a=this.nodes().filter(function(B){return!B.isParent()}),i=this.cy(),o=t.eles,l=function(L){return L.id()},c=Zi(n,l);e.emit({type:"layoutstart",layout:e}),e.animations=[];var f=function(L,A,z){var M={x:A.x1+A.w/2,y:A.y1+A.h/2},U={x:(z.x-M.x)*L,y:(z.y-M.y)*L};return{x:M.x+U.x,y:M.y+U.y}},d=t.spacingFactor&&t.spacingFactor!==1,h=function(){if(!d)return null;for(var L=Rr(),A=0;A<a.length;A++){var z=a[A],M=c(z,A);I1(L,M.x,M.y)}return L},p=h(),g=Zi(function(B,L){var A=c(B,L);if(d){var z=Math.abs(t.spacingFactor);A=f(z,p,A)}return t.transform!=null&&(A=t.transform(B,A)),A},l);if(t.animate){for(var m=0;m<a.length;m++){var w=a[m],x=g(w,m),b=t.animateFilter==null||t.animateFilter(w,m);if(b){var E=w.animation({position:x,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(E)}else w.position(x)}if(t.fit){var _=i.animation({fit:{boundingBox:o.boundingBoxAt(g),padding:t.padding},duration:t.animationDuration,easing:t.animationEasing});e.animations.push(_)}else if(t.zoom!==void 0&&t.pan!==void 0){var C=i.animation({zoom:t.zoom,pan:t.pan,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(C)}e.animations.forEach(function(B){return B.play()}),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),es.all(e.animations.map(function(B){return B.promise()})).then(function(){e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e})})}else a.positions(g),t.fit&&i.fit(t.eles,t.padding),t.zoom!=null&&i.zoom(t.zoom),t.pan&&i.pan(t.pan),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){var t=this.cy();return t.makeLayout(tt({},e,{eles:this}))}};fu.createLayout=fu.makeLayout=fu.layout;function pw(r,e,t){var n=t._private,a=n.styleCache=n.styleCache||[],i;return(i=a[r])!=null||(i=a[r]=e(t)),i}function Wu(r,e){return r=Qa(r),function(n){return pw(r,e,n)}}function Gu(r,e){r=Qa(r);var t=function(a){return e.call(a)};return function(){var a=this[0];if(a)return pw(r,t,a)}}var cr={recalculateRenderedStyle:function(e){var t=this.cy(),n=t.renderer(),a=t.styleEnabled();return n&&a&&n.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e=this.cy(),t=function(i){return i._private.styleCache=null};if(e.hasCompoundNodes()){var n;n=this.spawnSelf().merge(this.descendants()).merge(this.parents()),n.merge(n.connectedEdges()),n.forEach(t)}else this.forEach(function(a){t(a),a.connectedEdges().forEach(t)});return this},updateStyle:function(e){var t=this._private.cy;if(!t.styleEnabled())return this;if(t.batching()){var n=t._private.batchStyleEles;return n.merge(this),this}var a=t.hasCompoundNodes(),i=this;e=!!(e||e===void 0),a&&(i=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var o=i;return e?o.emitAndNotify("style"):o.emit("style"),i.forEach(function(l){return l._private.styleDirty=!0}),this},cleanStyle:function(){var e=this.cy();if(e.styleEnabled())for(var t=0;t<this.length;t++){var n=this[t];n._private.styleDirty&&(n._private.styleDirty=!1,e.style().apply(n))}},parsedStyle:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this[0],a=n.cy();if(a.styleEnabled()&&n){n._private.styleDirty&&(n._private.styleDirty=!1,a.style().apply(n));var i=n._private.style[e];return i??(t?a.style().getDefaultProperty(e):null)}},numericStyle:function(e){var t=this[0];if(t.cy().styleEnabled()&&t){var n=t.pstyle(e);return n.pfValue!==void 0?n.pfValue:n.value}},numericStyleUnits:function(e){var t=this[0];if(t.cy().styleEnabled()&&t)return t.pstyle(e).units},renderedStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=this[0];if(n)return t.style().getRenderedStyle(n,e)},style:function(e,t){var n=this.cy();if(!n.styleEnabled())return this;var a=!1,i=n.style();if(dt(e)){var o=e;i.applyBypass(this,o,a),this.emitAndNotify("style")}else if(Qe(e))if(t===void 0){var l=this[0];return l?i.getStylePropertyValue(l,e):void 0}else i.applyBypass(this,e,t,a),this.emitAndNotify("style");else if(e===void 0){var c=this[0];return c?i.getRawStyle(c):void 0}return this},removeStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=!1,a=t.style(),i=this;if(e===void 0)for(var o=0;o<i.length;o++){var l=i[o];a.removeAllBypasses(l,n)}else{e=e.split(/\s+/);for(var c=0;c<i.length;c++){var f=i[c];a.removeBypasses(f,e,n)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var t=e.hasCompoundNodes(),n=this[0];if(n){var a=n._private,i=n.pstyle("opacity").value;if(!t)return i;var o=a.data.parent?n.parents():null;if(o)for(var l=0;l<o.length;l++){var c=o[l],f=c.pstyle("opacity").value;i=f*i}return i}},transparent:function(){var e=this.cy();if(!e.styleEnabled())return!1;var t=this[0],n=t.cy().hasCompoundNodes();if(t)return n?t.effectiveOpacity()===0:t.pstyle("opacity").value===0},backgrounding:function(){var e=this.cy();if(!e.styleEnabled())return!1;var t=this[0];return!!t._private.backgrounding}};function vh(r,e){var t=r._private,n=t.data.parent?r.parents():null;if(n)for(var a=0;a<n.length;a++){var i=n[a];if(!e(i))return!1}return!0}function cv(r){var e=r.ok,t=r.edgeOkViaNode||r.ok,n=r.parentOk||r.ok;return function(){var a=this.cy();if(!a.styleEnabled())return!0;var i=this[0],o=a.hasCompoundNodes();if(i){var l=i._private;if(!e(i))return!1;if(i.isNode())return!o||vh(i,n);var c=l.source,f=l.target;return t(c)&&(!o||vh(c,t))&&(c===f||t(f)&&(!o||vh(f,t)))}}}var ts=Wu("eleTakesUpSpace",function(r){return r.pstyle("display").value==="element"&&r.width()!==0&&(r.isNode()?r.height()!==0:!0)});cr.takesUpSpace=Gu("takesUpSpace",cv({ok:ts}));var tT=Wu("eleInteractive",function(r){return r.pstyle("events").value==="yes"&&r.pstyle("visibility").value==="visible"&&ts(r)}),rT=Wu("parentInteractive",function(r){return r.pstyle("visibility").value==="visible"&&ts(r)});cr.interactive=Gu("interactive",cv({ok:tT,parentOk:rT,edgeOkViaNode:ts}));cr.noninteractive=function(){var r=this[0];if(r)return!r.interactive()};var nT=Wu("eleVisible",function(r){return r.pstyle("visibility").value==="visible"&&r.pstyle("opacity").pfValue!==0&&ts(r)}),aT=ts;cr.visible=Gu("visible",cv({ok:nT,edgeOkViaNode:aT}));cr.hidden=function(){var r=this[0];if(r)return!r.visible()};cr.isBundledBezier=Gu("isBundledBezier",function(){return this.cy().styleEnabled()?!this.removed()&&this.pstyle("curve-style").value==="bezier"&&this.takesUpSpace():!1});cr.bypass=cr.css=cr.style;cr.renderedCss=cr.renderedStyle;cr.removeBypass=cr.removeCss=cr.removeStyle;cr.pstyle=cr.parsedStyle;var ya={};function u0(r){return function(){var e=arguments,t=[];if(e.length===2){var n=e[0],a=e[1];this.on(r.event,n,a)}else if(e.length===1&&Ft(e[0])){var i=e[0];this.on(r.event,i)}else if(e.length===0||e.length===1&&wt(e[0])){for(var o=e.length===1?e[0]:null,l=0;l<this.length;l++){var c=this[l],f=!r.ableField||c._private[r.ableField],d=c._private[r.field]!=r.value;if(r.overrideAble){var h=r.overrideAble(c);if(h!==void 0&&(f=h,!h))return this}f&&(c._private[r.field]=r.value,d&&t.push(c))}var p=this.spawn(t);p.updateStyle(),p.emit(r.event),o&&p.emit(o)}return this}}function rs(r){ya[r.field]=function(){var e=this[0];if(e){if(r.overrideField){var t=r.overrideField(e);if(t!==void 0)return t}return e._private[r.field]}},ya[r.on]=u0({event:r.on,field:r.field,ableField:r.ableField,overrideAble:r.overrideAble,value:!0}),ya[r.off]=u0({event:r.off,field:r.field,ableField:r.ableField,overrideAble:r.overrideAble,value:!1})}rs({field:"locked",overrideField:function(e){return e.cy().autolock()?!0:void 0},on:"lock",off:"unlock"});rs({field:"grabbable",overrideField:function(e){return e.cy().autoungrabify()||e.pannable()?!1:void 0},on:"grabify",off:"ungrabify"});rs({field:"selected",ableField:"selectable",overrideAble:function(e){return e.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"});rs({field:"selectable",overrideField:function(e){return e.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"});ya.deselect=ya.unselect;ya.grabbed=function(){var r=this[0];if(r)return r._private.grabbed};rs({field:"active",on:"activate",off:"unactivate"});rs({field:"pannable",on:"panify",off:"unpanify"});ya.inactive=function(){var r=this[0];if(r)return!r._private.active};var xr={},c0=function(e){return function(n){for(var a=this,i=[],o=0;o<a.length;o++){var l=a[o];if(l.isNode()){for(var c=!1,f=l.connectedEdges(),d=0;d<f.length;d++){var h=f[d],p=h.source(),g=h.target();if(e.noIncomingEdges&&g===l&&p!==l||e.noOutgoingEdges&&p===l&&g!==l){c=!0;break}}c||i.push(l)}}return this.spawn(i,!0).filter(n)}},f0=function(e){return function(t){for(var n=this,a=[],i=0;i<n.length;i++){var o=n[i];if(o.isNode())for(var l=o.connectedEdges(),c=0;c<l.length;c++){var f=l[c],d=f.source(),h=f.target();e.outgoing&&d===o?(a.push(f),a.push(h)):e.incoming&&h===o&&(a.push(f),a.push(d))}}return this.spawn(a,!0).filter(t)}},d0=function(e){return function(t){for(var n=this,a=[],i={};;){var o=e.outgoing?n.outgoers():n.incomers();if(o.length===0)break;for(var l=!1,c=0;c<o.length;c++){var f=o[c],d=f.id();i[d]||(i[d]=!0,a.push(f),l=!0)}if(!l)break;n=o}return this.spawn(a,!0).filter(t)}};xr.clearTraversalCache=function(){for(var r=0;r<this.length;r++)this[r]._private.traversalCache=null};tt(xr,{roots:c0({noIncomingEdges:!0}),leaves:c0({noOutgoingEdges:!0}),outgoers:nn(f0({outgoing:!0}),"outgoers"),successors:d0({outgoing:!0}),incomers:nn(f0({incoming:!0}),"incomers"),predecessors:d0({})});tt(xr,{neighborhood:nn(function(r){for(var e=[],t=this.nodes(),n=0;n<t.length;n++)for(var a=t[n],i=a.connectedEdges(),o=0;o<i.length;o++){var l=i[o],c=l.source(),f=l.target(),d=a===c?f:c;d.length>0&&e.push(d[0]),e.push(l[0])}return this.spawn(e,!0).filter(r)},"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}});xr.neighbourhood=xr.neighborhood;xr.closedNeighbourhood=xr.closedNeighborhood;xr.openNeighbourhood=xr.openNeighborhood;tt(xr,{source:nn(function(e){var t=this[0],n;return t&&(n=t._private.source||t.cy().collection()),n&&e?n.filter(e):n},"source"),target:nn(function(e){var t=this[0],n;return t&&(n=t._private.target||t.cy().collection()),n&&e?n.filter(e):n},"target"),sources:h0({attr:"source"}),targets:h0({attr:"target"})});function h0(r){return function(t){for(var n=[],a=0;a<this.length;a++){var i=this[a],o=i._private[r.attr];o&&n.push(o)}return this.spawn(n,!0).filter(t)}}tt(xr,{edgesWith:nn(v0(),"edgesWith"),edgesTo:nn(v0({thisIsSrc:!0}),"edgesTo")});function v0(r){return function(t){var n=[],a=this._private.cy,i=r||{};Qe(t)&&(t=a.$(t));for(var o=0;o<t.length;o++)for(var l=t[o]._private.edges,c=0;c<l.length;c++){var f=l[c],d=f._private.data,h=this.hasElementWithId(d.source)&&t.hasElementWithId(d.target),p=t.hasElementWithId(d.source)&&this.hasElementWithId(d.target),g=h||p;g&&((i.thisIsSrc||i.thisIsTgt)&&(i.thisIsSrc&&!h||i.thisIsTgt&&!p)||n.push(f))}return this.spawn(n,!0)}}tt(xr,{connectedEdges:nn(function(r){for(var e=[],t=this,n=0;n<t.length;n++){var a=t[n];if(a.isNode())for(var i=a._private.edges,o=0;o<i.length;o++){var l=i[o];e.push(l)}}return this.spawn(e,!0).filter(r)},"connectedEdges"),connectedNodes:nn(function(r){for(var e=[],t=this,n=0;n<t.length;n++){var a=t[n];a.isEdge()&&(e.push(a.source()[0]),e.push(a.target()[0]))}return this.spawn(e,!0).filter(r)},"connectedNodes"),parallelEdges:nn(p0(),"parallelEdges"),codirectedEdges:nn(p0({codirected:!0}),"codirectedEdges")});function p0(r){var e={codirected:!1};return r=tt({},e,r),function(n){for(var a=[],i=this.edges(),o=r,l=0;l<i.length;l++)for(var c=i[l],f=c._private,d=f.source,h=d._private.data.id,p=f.data.target,g=d._private.edges,m=0;m<g.length;m++){var w=g[m],x=w._private.data,b=x.target,E=x.source,_=b===p&&E===h,C=h===b&&p===E;(o.codirected&&_||!o.codirected&&(_||C))&&a.push(w)}return this.spawn(a,!0).filter(n)}}tt(xr,{components:function(e){var t=this,n=t.cy(),a=n.collection(),i=e==null?t.nodes():e.nodes(),o=[];e!=null&&i.empty()&&(i=e.sources());var l=function(d,h){a.merge(d),i.unmerge(d),h.merge(d)};if(i.empty())return t.spawn();var c=function(){var d=n.collection();o.push(d);var h=i[0];l(h,d),t.bfs({directed:!1,roots:h,visit:function(g){return l(g,d)}}),d.forEach(function(p){p.connectedEdges().forEach(function(g){t.has(g)&&d.has(g.source())&&d.has(g.target())&&d.merge(g)})})};do c();while(i.length>0);return o},component:function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}});xr.componentsOf=xr.components;var fr=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e===void 0){It("A collection must have a reference to the core");return}var i=new Fn,o=!1;if(!t)t=[];else if(t.length>0&&dt(t[0])&&!ko(t[0])){o=!0;for(var l=[],c=new Ji,f=0,d=t.length;f<d;f++){var h=t[f];h.data==null&&(h.data={});var p=h.data;if(p.id==null)p.id=R1();else if(e.hasElementWithId(p.id)||c.has(p.id))continue;var g=new Ou(e,h,!1);l.push(g),c.add(p.id)}t=l}this.length=0;for(var m=0,w=t.length;m<w;m++){var x=t[m][0];if(x!=null){var b=x._private.data.id;(!n||!i.has(b))&&(n&&i.set(b,{index:this.length,ele:x}),this[this.length]=x,this.length++)}}this._private={eles:this,cy:e,get map(){return this.lazyMap==null&&this.rebuildMap(),this.lazyMap},set map(E){this.lazyMap=E},rebuildMap:function(){for(var _=this.lazyMap=new Fn,C=this.eles,B=0;B<C.length;B++){var L=C[B];_.set(L.id(),{index:B,ele:L})}}},n&&(this._private.map=i),o&&!a&&this.restore()},_t=Ou.prototype=fr.prototype=Object.create(Array.prototype);_t.instanceString=function(){return"collection"};_t.spawn=function(r,e){return new fr(this.cy(),r,e)};_t.spawnSelf=function(){return this.spawn(this)};_t.cy=function(){return this._private.cy};_t.renderer=function(){return this._private.cy.renderer()};_t.element=function(){return this[0]};_t.collection=function(){return p1(this)?this:new fr(this._private.cy,[this])};_t.unique=function(){return new fr(this._private.cy,this,!0)};_t.hasElementWithId=function(r){return r=""+r,this._private.map.has(r)};_t.getElementById=function(r){r=""+r;var e=this._private.cy,t=this._private.map.get(r);return t?t.ele:new fr(e)};_t.$id=_t.getElementById;_t.poolIndex=function(){var r=this._private.cy,e=r._private.elements,t=this[0]._private.data.id;return e._private.map.get(t).index};_t.indexOf=function(r){var e=r[0]._private.data.id;return this._private.map.get(e).index};_t.indexOfId=function(r){return r=""+r,this._private.map.get(r).index};_t.json=function(r){var e=this.element(),t=this.cy();if(e==null&&r)return this;if(e!=null){var n=e._private;if(dt(r)){if(t.startBatch(),r.data){e.data(r.data);var a=n.data;if(e.isEdge()){var i=!1,o={},l=r.data.source,c=r.data.target;l!=null&&l!=a.source&&(o.source=""+l,i=!0),c!=null&&c!=a.target&&(o.target=""+c,i=!0),i&&(e=e.move(o))}else{var f="parent"in r.data,d=r.data.parent;f&&(d!=null||a.parent!=null)&&d!=a.parent&&(d===void 0&&(d=null),d!=null&&(d=""+d),e=e.move({parent:d}))}}r.position&&e.position(r.position);var h=function(w,x,b){var E=r[w];E!=null&&E!==n[w]&&(E?e[x]():e[b]())};return h("removed","remove","restore"),h("selected","select","unselect"),h("selectable","selectify","unselectify"),h("locked","lock","unlock"),h("grabbable","grabify","ungrabify"),h("pannable","panify","unpanify"),r.classes!=null&&e.classes(r.classes),t.endBatch(),this}else if(r===void 0){var p={data:Sn(n.data),position:Sn(n.position),group:n.group,removed:n.removed,selected:n.selected,selectable:n.selectable,locked:n.locked,grabbable:n.grabbable,pannable:n.pannable,classes:null};p.classes="";var g=0;return n.classes.forEach(function(m){return p.classes+=g++===0?m:" "+m}),p}}};_t.jsons=function(){for(var r=[],e=0;e<this.length;e++){var t=this[e],n=t.json();r.push(n)}return r};_t.clone=function(){for(var r=this.cy(),e=[],t=0;t<this.length;t++){var n=this[t],a=n.json(),i=new Ou(r,a,!1);e.push(i)}return new fr(r,e)};_t.copy=_t.clone;_t.restore=function(){for(var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=this,n=t.cy(),a=n._private,i=[],o=[],l,c=0,f=t.length;c<f;c++){var d=t[c];e&&!d.removed()||(d.isNode()?i.push(d):o.push(d))}l=i.concat(o);var h,p=function(){l.splice(h,1),h--};for(h=0;h<l.length;h++){var g=l[h],m=g._private,w=m.data;if(g.clearTraversalCache(),!(!e&&!m.removed)){if(w.id===void 0)w.id=R1();else if($e(w.id))w.id=""+w.id;else if(wa(w.id)||!Qe(w.id)){It("Can not create element with invalid string ID `"+w.id+"`"),p();continue}else if(n.hasElementWithId(w.id)){It("Can not create second element with ID `"+w.id+"`"),p();continue}}var x=w.id;if(g.isNode()){var b=m.position;b.x==null&&(b.x=0),b.y==null&&(b.y=0)}if(g.isEdge()){for(var E=g,_=["source","target"],C=_.length,B=!1,L=0;L<C;L++){var A=_[L],z=w[A];$e(z)&&(z=w[A]=""+w[A]),z==null||z===""?(It("Can not create edge `"+x+"` with unspecified "+A),B=!0):n.hasElementWithId(z)||(It("Can not create edge `"+x+"` with nonexistant "+A+" `"+z+"`"),B=!0)}if(B){p();continue}var M=n.getElementById(w.source),U=n.getElementById(w.target);M.same(U)?M._private.edges.push(E):(M._private.edges.push(E),U._private.edges.push(E)),E._private.source=M,E._private.target=U}m.map=new Fn,m.map.set(x,{ele:g,index:0}),m.removed=!1,e&&n.addToPool(g)}for(var q=0;q<i.length;q++){var D=i[q],F=D._private.data;$e(F.parent)&&(F.parent=""+F.parent);var T=F.parent,G=T!=null;if(G||D._private.parent){var Q=D._private.parent?n.collection().merge(D._private.parent):n.getElementById(T);if(Q.empty())F.parent=void 0;else if(Q[0].removed())gt("Node added with missing parent, reference to parent removed"),F.parent=void 0,D._private.parent=null;else{for(var W=!1,X=Q;!X.empty();){if(D.same(X)){W=!0,F.parent=void 0;break}X=X.parent()}W||(Q[0]._private.children.push(D),D._private.parent=Q[0],a.hasCompoundNodes=!0)}}}if(l.length>0){for(var Z=l.length===t.length?t:new fr(n,l),te=0;te<Z.length;te++){var N=Z[te];N.isNode()||(N.parallelEdges().clearTraversalCache(),N.source().clearTraversalCache(),N.target().clearTraversalCache())}var $;a.hasCompoundNodes?$=n.collection().merge(Z).merge(Z.connectedNodes()).merge(Z.parent()):$=Z,$.dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(r),r?Z.emitAndNotify("add"):e&&Z.emit("add")}return t};_t.removed=function(){var r=this[0];return r&&r._private.removed};_t.inside=function(){var r=this[0];return r&&!r._private.removed};_t.remove=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=this,n=[],a={},i=t._private.cy;function o(T){for(var G=T._private.edges,Q=0;Q<G.length;Q++)c(G[Q])}function l(T){for(var G=T._private.children,Q=0;Q<G.length;Q++)c(G[Q])}function c(T){var G=a[T.id()];e&&T.removed()||G||(a[T.id()]=!0,T.isNode()?(n.push(T),o(T),l(T)):n.unshift(T))}for(var f=0,d=t.length;f<d;f++){var h=t[f];c(h)}function p(T,G){var Q=T._private.edges;xa(Q,G),T.clearTraversalCache()}function g(T){T.clearTraversalCache()}var m=[];m.ids={};function w(T,G){G=G[0],T=T[0];var Q=T._private.children,W=T.id();xa(Q,G),G._private.parent=null,m.ids[W]||(m.ids[W]=!0,m.push(T))}t.dirtyCompoundBoundsCache(),e&&i.removeFromPool(n);for(var x=0;x<n.length;x++){var b=n[x];if(b.isEdge()){var E=b.source()[0],_=b.target()[0];p(E,b),p(_,b);for(var C=b.parallelEdges(),B=0;B<C.length;B++){var L=C[B];g(L),L.isBundledBezier()&&L.dirtyBoundingBoxCache()}}else{var A=b.parent();A.length!==0&&w(A,b)}e&&(b._private.removed=!0)}var z=i._private.elements;i._private.hasCompoundNodes=!1;for(var M=0;M<z.length;M++){var U=z[M];if(U.isParent()){i._private.hasCompoundNodes=!0;break}}var q=new fr(this.cy(),n);q.size()>0&&(r?q.emitAndNotify("remove"):e&&q.emit("remove"));for(var D=0;D<m.length;D++){var F=m[D];(!e||!F.removed())&&F.updateStyle()}return q};_t.move=function(r){var e=this._private.cy,t=this,n=!1,a=!1,i=function(m){return m==null?m:""+m};if(r.source!==void 0||r.target!==void 0){var o=i(r.source),l=i(r.target),c=o!=null&&e.hasElementWithId(o),f=l!=null&&e.hasElementWithId(l);(c||f)&&(e.batch(function(){t.remove(n,a),t.emitAndNotify("moveout");for(var g=0;g<t.length;g++){var m=t[g],w=m._private.data;m.isEdge()&&(c&&(w.source=o),f&&(w.target=l))}t.restore(n,a)}),t.emitAndNotify("move"))}else if(r.parent!==void 0){var d=i(r.parent),h=d===null||e.hasElementWithId(d);if(h){var p=d===null?void 0:d;e.batch(function(){var g=t.remove(n,a);g.emitAndNotify("moveout");for(var m=0;m<t.length;m++){var w=t[m],x=w._private.data;w.isNode()&&(x.parent=p)}g.restore(n,a)}),t.emitAndNotify("move")}}return this};[U1,pC,cu,ma,Qi,AC,Vu,HC,dw,hw,QC,ku,fu,cr,ya,xr].forEach(function(r){tt(_t,r)});var iT={add:function(e){var t,n=this;if(Hr(e)){var a=e;if(a._private.cy===n)t=a.restore();else{for(var i=[],o=0;o<a.length;o++){var l=a[o];i.push(l.json())}t=new fr(n,i)}}else if(wt(e)){var c=e;t=new fr(n,c)}else if(dt(e)&&(wt(e.nodes)||wt(e.edges))){for(var f=e,d=[],h=["nodes","edges"],p=0,g=h.length;p<g;p++){var m=h[p],w=f[m];if(wt(w))for(var x=0,b=w.length;x<b;x++){var E=tt({group:m},w[x]);d.push(E)}}t=new fr(n,d)}else{var _=e;t=new Ou(n,_).collection()}return t},remove:function(e){if(!Hr(e)){if(Qe(e)){var t=e;e=this.$(t)}}return e.remove()}};/*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License */function sT(r,e,t,n){var a=4,i=.001,o=1e-7,l=10,c=11,f=1/(c-1),d=typeof Float32Array<"u";if(arguments.length!==4)return!1;for(var h=0;h<4;++h)if(typeof arguments[h]!="number"||isNaN(arguments[h])||!isFinite(arguments[h]))return!1;r=Math.min(r,1),t=Math.min(t,1),r=Math.max(r,0),t=Math.max(t,0);var p=d?new Float32Array(c):new Array(c);function g(U,q){return 1-3*q+3*U}function m(U,q){return 3*q-6*U}function w(U){return 3*U}function x(U,q,D){return((g(q,D)*U+m(q,D))*U+w(q))*U}function b(U,q,D){return 3*g(q,D)*U*U+2*m(q,D)*U+w(q)}function E(U,q){for(var D=0;D<a;++D){var F=b(q,r,t);if(F===0)return q;var T=x(q,r,t)-U;q-=T/F}return q}function _(){for(var U=0;U<c;++U)p[U]=x(U*f,r,t)}function C(U,q,D){var F,T,G=0;do T=q+(D-q)/2,F=x(T,r,t)-U,F>0?D=T:q=T;while(Math.abs(F)>o&&++G<l);return T}function B(U){for(var q=0,D=1,F=c-1;D!==F&&p[D]<=U;++D)q+=f;--D;var T=(U-p[D])/(p[D+1]-p[D]),G=q+T*f,Q=b(G,r,t);return Q>=i?E(U,G):Q===0?G:C(U,q,q+f)}var L=!1;function A(){L=!0,(r!==e||t!==n)&&_()}var z=function(q){return L||A(),r===e&&t===n?q:q===0?0:q===1?1:x(B(q),e,n)};z.getControlPoints=function(){return[{x:r,y:e},{x:t,y:n}]};var M="generateBezier("+[r,e,t,n]+")";return z.toString=function(){return M},z}/*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License */var oT=(function(){function r(n){return-n.tension*n.x-n.friction*n.v}function e(n,a,i){var o={x:n.x+i.dx*a,v:n.v+i.dv*a,tension:n.tension,friction:n.friction};return{dx:o.v,dv:r(o)}}function t(n,a){var i={dx:n.v,dv:r(n)},o=e(n,a*.5,i),l=e(n,a*.5,o),c=e(n,a,l),f=1/6*(i.dx+2*(o.dx+l.dx)+c.dx),d=1/6*(i.dv+2*(o.dv+l.dv)+c.dv);return n.x=n.x+f*a,n.v=n.v+d*a,n}return function n(a,i,o){var l={x:-1,v:0,tension:null,friction:null},c=[0],f=0,d=1/1e4,h=16/1e3,p,g,m;for(a=parseFloat(a)||500,i=parseFloat(i)||20,o=o||null,l.tension=a,l.friction=i,p=o!==null,p?(f=n(a,i),g=f/o*h):g=h;m=t(m||l,g),c.push(1+m.x),f+=16,Math.abs(m.x)>d&&Math.abs(m.v)>d;);return p?function(w){return c[w*(c.length-1)|0]}:f}})(),bt=function(e,t,n,a){var i=sT(e,t,n,a);return function(o,l,c){return o+(l-o)*i(c)}},du={linear:function(e,t,n){return e+(t-e)*n},ease:bt(.25,.1,.25,1),"ease-in":bt(.42,0,1,1),"ease-out":bt(0,0,.58,1),"ease-in-out":bt(.42,0,.58,1),"ease-in-sine":bt(.47,0,.745,.715),"ease-out-sine":bt(.39,.575,.565,1),"ease-in-out-sine":bt(.445,.05,.55,.95),"ease-in-quad":bt(.55,.085,.68,.53),"ease-out-quad":bt(.25,.46,.45,.94),"ease-in-out-quad":bt(.455,.03,.515,.955),"ease-in-cubic":bt(.55,.055,.675,.19),"ease-out-cubic":bt(.215,.61,.355,1),"ease-in-out-cubic":bt(.645,.045,.355,1),"ease-in-quart":bt(.895,.03,.685,.22),"ease-out-quart":bt(.165,.84,.44,1),"ease-in-out-quart":bt(.77,0,.175,1),"ease-in-quint":bt(.755,.05,.855,.06),"ease-out-quint":bt(.23,1,.32,1),"ease-in-out-quint":bt(.86,0,.07,1),"ease-in-expo":bt(.95,.05,.795,.035),"ease-out-expo":bt(.19,1,.22,1),"ease-in-out-expo":bt(1,0,0,1),"ease-in-circ":bt(.6,.04,.98,.335),"ease-out-circ":bt(.075,.82,.165,1),"ease-in-out-circ":bt(.785,.135,.15,.86),spring:function(e,t,n){if(n===0)return du.linear;var a=oT(e,t,n);return function(i,o,l){return i+(o-i)*a(l)}},"cubic-bezier":bt};function g0(r,e,t,n,a){if(n===1||e===t)return t;var i=a(e,t,n);return r==null||((r.roundValue||r.color)&&(i=Math.round(i)),r.min!==void 0&&(i=Math.max(i,r.min)),r.max!==void 0&&(i=Math.min(i,r.max))),i}function m0(r,e){return r.pfValue!=null||r.value!=null?r.pfValue!=null&&(e==null||e.type.units!=="%")?r.pfValue:r.value:r}function Li(r,e,t,n,a){var i=a!=null?a.type:null;t<0?t=0:t>1&&(t=1);var o=m0(r,a),l=m0(e,a);if($e(o)&&$e(l))return g0(i,o,l,t,n);if(wt(o)&&wt(l)){for(var c=[],f=0;f<l.length;f++){var d=o[f],h=l[f];if(d!=null&&h!=null){var p=g0(i,d,h,t,n);c.push(p)}else c.push(h)}return c}}function lT(r,e,t,n){var a=!n,i=r._private,o=e._private,l=o.easing,c=o.startTime,f=n?r:r.cy(),d=f.style();if(!o.easingImpl)if(l==null)o.easingImpl=du.linear;else{var h;if(Qe(l)){var p=d.parse("transition-timing-function",l);h=p.value}else h=l;var g,m;Qe(h)?(g=h,m=[]):(g=h[1],m=h.slice(2).map(function(Z){return+Z})),m.length>0?(g==="spring"&&m.push(o.duration),o.easingImpl=du[g].apply(null,m)):o.easingImpl=du[g]}var w=o.easingImpl,x;if(o.duration===0?x=1:x=(t-c)/o.duration,o.applying&&(x=o.progress),x<0?x=0:x>1&&(x=1),o.delay==null){var b=o.startPosition,E=o.position;if(E&&a&&!r.locked()){var _={};Qs(b.x,E.x)&&(_.x=Li(b.x,E.x,x,w)),Qs(b.y,E.y)&&(_.y=Li(b.y,E.y,x,w)),r.position(_)}var C=o.startPan,B=o.pan,L=i.pan,A=B!=null&&n;A&&(Qs(C.x,B.x)&&(L.x=Li(C.x,B.x,x,w)),Qs(C.y,B.y)&&(L.y=Li(C.y,B.y,x,w)),r.emit("pan"));var z=o.startZoom,M=o.zoom,U=M!=null&&n;U&&(Qs(z,M)&&(i.zoom=vo(i.minZoom,Li(z,M,x,w),i.maxZoom)),r.emit("zoom")),(A||U)&&r.emit("viewport");var q=o.style;if(q&&q.length>0&&a){for(var D=0;D<q.length;D++){var F=q[D],T=F.name,G=F,Q=o.startStyle[T],W=d.properties[Q.name],X=Li(Q,G,x,w,W);d.overrideBypass(r,T,X)}r.emit("style")}}return o.progress=x,x}function Qs(r,e){return r==null||e==null?!1:$e(r)&&$e(e)?!0:!!(r&&e)}function uT(r,e,t,n){var a=e._private;a.started=!0,a.startTime=t-a.progress*a.duration}function y0(r,e){var t=e._private.aniEles,n=[];function a(d,h){var p=d._private,g=p.animation.current,m=p.animation.queue,w=!1;if(g.length===0){var x=m.shift();x&&g.push(x)}for(var b=function(L){for(var A=L.length-1;A>=0;A--){var z=L[A];z()}L.splice(0,L.length)},E=g.length-1;E>=0;E--){var _=g[E],C=_._private;if(C.stopped){g.splice(E,1),C.hooked=!1,C.playing=!1,C.started=!1,b(C.frames);continue}!C.playing&&!C.applying||(C.playing&&C.applying&&(C.applying=!1),C.started||uT(d,_,r),lT(d,_,r,h),C.applying&&(C.applying=!1),b(C.frames),C.step!=null&&C.step(r),_.completed()&&(g.splice(E,1),C.hooked=!1,C.playing=!1,C.started=!1,b(C.completes)),w=!0)}return!h&&g.length===0&&m.length===0&&n.push(d),w}for(var i=!1,o=0;o<t.length;o++){var l=t[o],c=a(l);i=i||c}var f=a(e,!0);(i||f)&&(t.length>0?e.notify("draw",t):e.notify("draw")),t.unmerge(n),e.emit("step")}var cT={animate:pt.animate(),animation:pt.animation(),animated:pt.animated(),clearQueue:pt.clearQueue(),delay:pt.delay(),delayAnimation:pt.delayAnimation(),stop:pt.stop(),addToAnimationPool:function(e){var t=this;t.styleEnabled()&&t._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,!e.styleEnabled())return;function t(){e._private.animationsRunning&&xu(function(i){y0(i,e),t()})}var n=e.renderer();n&&n.beforeRender?n.beforeRender(function(i,o){y0(o,e)},n.beforeRenderPriorities.animations):t()}},fT={qualifierCompare:function(e,t){return e==null||t==null?e==null&&t==null:e.sameText(t)},eventMatches:function(e,t,n){var a=t.qualifier;return a!=null?e!==n.target&&ko(n.target)&&a.matches(n.target):!0},addEventFields:function(e,t){t.cy=e,t.target=e},callbackContext:function(e,t,n){return t.qualifier!=null?n.target:e}},tu=function(e){return Qe(e)?new Ea(e):e},gw={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new qu(fT,this)),this},emitter:function(){return this._private.emitter},on:function(e,t,n){return this.emitter().on(e,tu(t),n),this},removeListener:function(e,t,n){return this.emitter().removeListener(e,tu(t),n),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(e,t,n){return this.emitter().one(e,tu(t),n),this},once:function(e,t,n){return this.emitter().one(e,tu(t),n),this},emit:function(e,t){return this.emitter().emit(e,t),this},emitAndNotify:function(e,t){return this.emit(e),this.notify(e,t),this}};pt.eventAliasesOn(gw);var Nh={png:function(e){var t=this._private.renderer;return e=e||{},t.png(e)},jpg:function(e){var t=this._private.renderer;return e=e||{},e.bg=e.bg||"#fff",t.jpg(e)}};Nh.jpeg=Nh.jpg;var hu={layout:function(e){var t=this;if(e==null){It("Layout options must be specified to make a layout");return}if(e.name==null){It("A `name` must be specified to make a layout");return}var n=e.name,a=t.extension("layout",n);if(a==null){It("No such layout `"+n+"` found.  Did you forget to import it and `cytoscape.use()` it?");return}var i;Qe(e.eles)?i=t.$(e.eles):i=e.eles!=null?e.eles:t.$();var o=new a(tt({},e,{cy:t,eles:i}));return o}};hu.createLayout=hu.makeLayout=hu.layout;var dT={notify:function(e,t){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var a=n.batchNotifications[e]=n.batchNotifications[e]||this.collection();t!=null&&a.merge(t);return}if(n.notificationsEnabled){var i=this.renderer();this.destroyed()||!i||i.notify(e,t)}},notifications:function(e){var t=this._private;return e===void 0?t.notificationsEnabled:(t.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return e.batchCount==null&&(e.batchCount=0),e.batchCount===0&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(e.batchCount===0)return this;if(e.batchCount--,e.batchCount===0){e.batchStyleEles.updateStyle();var t=this.renderer();Object.keys(e.batchNotifications).forEach(function(n){var a=e.batchNotifications[n];a.empty()?t.notify(n):t.notify(n,a)})}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var t=this;return this.batch(function(){for(var n=Object.keys(e),a=0;a<n.length;a++){var i=n[a],o=e[i],l=t.getElementById(i);l.data(o)}})}},hT=dr({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1,webgl:!1,webglDebug:!1,webglDebugShowAtlases:!1,webglTexSize:2048,webglTexRows:36,webglTexRowsNodes:18,webglBatchSize:2048,webglTexPerBatch:14,webglBgColor:[255,255,255]}),Lh={renderTo:function(e,t,n,a){var i=this._private.renderer;return i.renderTo(e,t,n,a),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var t=this,n=t.extension("renderer",e.name);if(n==null){It("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));return}e.wheelSensitivity!==void 0&&gt("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var a=hT(e);a.cy=t,t._private.renderer=new n(a),this.notify("init")},destroyRenderer:function(){var e=this;e.notify("destroy");var t=e.container();if(t)for(t._cyreg=null;t.childNodes.length>0;)t.removeChild(t.childNodes[0]);e._private.renderer=null,e.mutableElements().forEach(function(n){var a=n._private;a.rscratch={},a.rstyle={},a.animation.current=[],a.animation.queue=[]})},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};Lh.invalidateDimensions=Lh.resize;var vu={collection:function(e,t){return Qe(e)?this.$(e):Hr(e)?e.collection():wt(e)?(t||(t={}),new fr(this,e,t.unique,t.removed)):new fr(this)},nodes:function(e){var t=this.$(function(n){return n.isNode()});return e?t.filter(e):t},edges:function(e){var t=this.$(function(n){return n.isEdge()});return e?t.filter(e):t},$:function(e){var t=this._private.elements;return e?t.filter(e):t.spawnSelf()},mutableElements:function(){return this._private.elements}};vu.elements=vu.filter=vu.$;var sr={},oo="t",vT="f";sr.apply=function(r){for(var e=this,t=e._private,n=t.cy,a=n.collection(),i=0;i<r.length;i++){var o=r[i],l=e.getContextMeta(o);if(!l.empty){var c=e.getContextStyle(l),f=e.applyContextStyle(l,c,o);o._private.appliedInitStyle?e.updateTransitions(o,f.diffProps):o._private.appliedInitStyle=!0;var d=e.updateStyleHints(o);d&&a.push(o)}}return a};sr.getPropertiesDiff=function(r,e){var t=this,n=t._private.propDiffs=t._private.propDiffs||{},a=r+"-"+e,i=n[a];if(i)return i;for(var o=[],l={},c=0;c<t.length;c++){var f=t[c],d=r[c]===oo,h=e[c]===oo,p=d!==h,g=f.mappedProperties.length>0;if(p||h&&g){var m=void 0;p&&g||p?m=f.properties:g&&(m=f.mappedProperties);for(var w=0;w<m.length;w++){for(var x=m[w],b=x.name,E=!1,_=c+1;_<t.length;_++){var C=t[_],B=e[_]===oo;if(B&&(E=C.properties[x.name]!=null,E))break}!l[b]&&!E&&(l[b]=!0,o.push(b))}}}return n[a]=o,o};sr.getContextMeta=function(r){for(var e=this,t="",n,a=r._private.styleCxtKey||"",i=0;i<e.length;i++){var o=e[i],l=o.selector&&o.selector.matches(r);l?t+=oo:t+=vT}return n=e.getPropertiesDiff(a,t),r._private.styleCxtKey=t,{key:t,diffPropNames:n,empty:n.length===0}};sr.getContextStyle=function(r){var e=r.key,t=this,n=this._private.contextStyles=this._private.contextStyles||{};if(n[e])return n[e];for(var a={_private:{key:e}},i=0;i<t.length;i++){var o=t[i],l=e[i]===oo;if(l)for(var c=0;c<o.properties.length;c++){var f=o.properties[c];a[f.name]=f}}return n[e]=a,a};sr.applyContextStyle=function(r,e,t){for(var n=this,a=r.diffPropNames,i={},o=n.types,l=0;l<a.length;l++){var c=a[l],f=e[c],d=t.pstyle(c);if(!f)if(d)d.bypass?f={name:c,deleteBypassed:!0}:f={name:c,delete:!0};else continue;if(d!==f){if(f.mapped===o.fn&&d!=null&&d.mapping!=null&&d.mapping.value===f.value){var h=d.mapping,p=h.fnValue=f.value(t);if(p===h.prevFnValue)continue}var g=i[c]={prev:d};n.applyParsedProperty(t,f),g.next=t.pstyle(c),g.next&&g.next.bypass&&(g.next=g.next.bypassed)}}return{diffProps:i}};sr.updateStyleHints=function(r){var e=r._private,t=this,n=t.propertyGroupNames,a=t.propertyGroupKeys,i=function(Ee,Re,I){return t.getPropertiesHash(Ee,Re,I)},o=e.styleKey;if(r.removed())return!1;var l=e.group==="nodes",c=r._private.style;n=Object.keys(c);for(var f=0;f<a.length;f++){var d=a[f];e.styleKeys[d]=[Xa,ji]}for(var h=function(Ee,Re){return e.styleKeys[Re][0]=co(Ee,e.styleKeys[Re][0])},p=function(Ee,Re){return e.styleKeys[Re][1]=fo(Ee,e.styleKeys[Re][1])},g=function(Ee,Re){h(Ee,Re),p(Ee,Re)},m=function(Ee,Re){for(var I=0;I<Ee.length;I++){var pe=Ee.charCodeAt(I);h(pe,Re),p(pe,Re)}},w=2e9,x=function(Ee){return-128<Ee&&Ee<128&&Math.floor(Ee)!==Ee?w-(Ee*1024|0):Ee},b=0;b<n.length;b++){var E=n[b],_=c[E];if(_!=null){var C=this.properties[E],B=C.type,L=C.groupKey,A=void 0;C.hashOverride!=null?A=C.hashOverride(r,_):_.pfValue!=null&&(A=_.pfValue);var z=C.enums==null?_.value:null,M=A!=null,U=z!=null,q=M||U,D=_.units;if(B.number&&q&&!B.multiple){var F=M?A:z;g(x(F),L),!M&&D!=null&&m(D,L)}else m(_.strValue,L)}}for(var T=[Xa,ji],G=0;G<a.length;G++){var Q=a[G],W=e.styleKeys[Q];T[0]=co(W[0],T[0]),T[1]=fo(W[1],T[1])}e.styleKey=B_(T[0],T[1]);var X=e.styleKeys;e.labelDimsKey=fa(X.labelDimensions);var Z=i(r,["label"],X.labelDimensions);if(e.labelKey=fa(Z),e.labelStyleKey=fa(Hl(X.commonLabel,Z)),!l){var te=i(r,["source-label"],X.labelDimensions);e.sourceLabelKey=fa(te),e.sourceLabelStyleKey=fa(Hl(X.commonLabel,te));var N=i(r,["target-label"],X.labelDimensions);e.targetLabelKey=fa(N),e.targetLabelStyleKey=fa(Hl(X.commonLabel,N))}if(l){var $=e.styleKeys,oe=$.nodeBody,ie=$.nodeBorder,ne=$.nodeOutline,xe=$.backgroundImage,Pe=$.compound,Ce=$.pie,me=$.stripe,fe=[oe,ie,ne,xe,Pe,Ce,me].filter(function(he){return he!=null}).reduce(Hl,[Xa,ji]);e.nodeKey=fa(fe),e.hasPie=Ce!=null&&Ce[0]!==Xa&&Ce[1]!==ji,e.hasStripe=me!=null&&me[0]!==Xa&&me[1]!==ji}return o!==e.styleKey};sr.clearStyleHints=function(r){var e=r._private;e.styleCxtKey="",e.styleKeys={},e.styleKey=null,e.labelKey=null,e.labelStyleKey=null,e.sourceLabelKey=null,e.sourceLabelStyleKey=null,e.targetLabelKey=null,e.targetLabelStyleKey=null,e.nodeKey=null,e.hasPie=null,e.hasStripe=null};sr.applyParsedProperty=function(r,e){var t=this,n=e,a=r._private.style,i,o=t.types,l=t.properties[n.name].type,c=n.bypass,f=a[n.name],d=f&&f.bypass,h=r._private,p="mapping",g=function(oe){return oe==null?null:oe.pfValue!=null?oe.pfValue:oe.value},m=function(){var oe=g(f),ie=g(n);t.checkTriggers(r,n.name,oe,ie)};if(e.name==="curve-style"&&r.isEdge()&&(e.value!=="bezier"&&r.isLoop()||e.value==="haystack"&&(r.source().isParent()||r.target().isParent()))&&(n=e=this.parse(e.name,"bezier",c)),n.delete)return a[n.name]=void 0,m(),!0;if(n.deleteBypassed)return f?f.bypass?(f.bypassed=void 0,m(),!0):!1:(m(),!0);if(n.deleteBypass)return f?f.bypass?(a[n.name]=f.bypassed,m(),!0):!1:(m(),!0);var w=function(){gt("Do not assign mappings to elements without corresponding data (i.e. ele `"+r.id()+"` has no mapping for property `"+n.name+"` with data field `"+n.field+"`); try a `["+n.field+"]` selector to limit scope to elements with `"+n.field+"` defined")};switch(n.mapped){case o.mapData:{for(var x=n.field.split("."),b=h.data,E=0;E<x.length&&b;E++){var _=x[E];b=b[_]}if(b==null)return w(),!1;var C;if($e(b)){var B=n.fieldMax-n.fieldMin;B===0?C=0:C=(b-n.fieldMin)/B}else return gt("Do not use continuous mappers without specifying numeric data (i.e. `"+n.field+": "+b+"` for `"+r.id()+"` is non-numeric)"),!1;if(C<0?C=0:C>1&&(C=1),l.color){var L=n.valueMin[0],A=n.valueMax[0],z=n.valueMin[1],M=n.valueMax[1],U=n.valueMin[2],q=n.valueMax[2],D=n.valueMin[3]==null?1:n.valueMin[3],F=n.valueMax[3]==null?1:n.valueMax[3],T=[Math.round(L+(A-L)*C),Math.round(z+(M-z)*C),Math.round(U+(q-U)*C),Math.round(D+(F-D)*C)];i={bypass:n.bypass,name:n.name,value:T,strValue:"rgb("+T[0]+", "+T[1]+", "+T[2]+")"}}else if(l.number){var G=n.valueMin+(n.valueMax-n.valueMin)*C;i=this.parse(n.name,G,n.bypass,p)}else return!1;if(!i)return w(),!1;i.mapping=n,n=i;break}case o.data:{for(var Q=n.field.split("."),W=h.data,X=0;X<Q.length&&W;X++){var Z=Q[X];W=W[Z]}if(W!=null&&(i=this.parse(n.name,W,n.bypass,p)),!i)return w(),!1;i.mapping=n,n=i;break}case o.fn:{var te=n.value,N=n.fnValue!=null?n.fnValue:te(r);if(n.prevFnValue=N,N==null)return gt("Custom function mappers may not return null (i.e. `"+n.name+"` for ele `"+r.id()+"` is null)"),!1;if(i=this.parse(n.name,N,n.bypass,p),!i)return gt("Custom function mappers may not return invalid values for the property type (i.e. `"+n.name+"` for ele `"+r.id()+"` is invalid)"),!1;i.mapping=Sn(n),n=i;break}case void 0:break;default:return!1}return c?(d?n.bypassed=f.bypassed:n.bypassed=f,a[n.name]=n):d?f.bypassed=n:a[n.name]=n,m(),!0};sr.cleanElements=function(r,e){for(var t=0;t<r.length;t++){var n=r[t];if(this.clearStyleHints(n),n.dirtyCompoundBoundsCache(),n.dirtyBoundingBoxCache(),!e)n._private.style={};else for(var a=n._private.style,i=Object.keys(a),o=0;o<i.length;o++){var l=i[o],c=a[l];c!=null&&(c.bypass?c.bypassed=null:a[l]=null)}}};sr.update=function(){var r=this._private.cy,e=r.mutableElements();e.updateStyle()};sr.updateTransitions=function(r,e){var t=this,n=r._private,a=r.pstyle("transition-property").value,i=r.pstyle("transition-duration").pfValue,o=r.pstyle("transition-delay").pfValue;if(a.length>0&&i>0){for(var l={},c=!1,f=0;f<a.length;f++){var d=a[f],h=r.pstyle(d),p=e[d];if(p){var g=p.prev,m=g,w=p.next!=null?p.next:h,x=!1,b=void 0,E=1e-6;m&&($e(m.pfValue)&&$e(w.pfValue)?(x=w.pfValue-m.pfValue,b=m.pfValue+E*x):$e(m.value)&&$e(w.value)?(x=w.value-m.value,b=m.value+E*x):wt(m.value)&&wt(w.value)&&(x=m.value[0]!==w.value[0]||m.value[1]!==w.value[1]||m.value[2]!==w.value[2],b=m.strValue),x&&(l[d]=w.strValue,this.applyBypass(r,d,b),c=!0))}}if(!c)return;n.transitioning=!0,new es(function(_){o>0?r.delayAnimation(o).play().promise().then(_):_()}).then(function(){return r.animation({style:l,duration:i,easing:r.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){t.removeBypasses(r,a),r.emitAndNotify("style"),n.transitioning=!1})}else n.transitioning&&(this.removeBypasses(r,a),r.emitAndNotify("style"),n.transitioning=!1)};sr.checkTrigger=function(r,e,t,n,a,i){var o=this.properties[e],l=a(o);r.removed()||l!=null&&l(t,n,r)&&i(o)};sr.checkZOrderTrigger=function(r,e,t,n){var a=this;this.checkTrigger(r,e,t,n,function(i){return i.triggersZOrder},function(){a._private.cy.notify("zorder",r)})};sr.checkBoundsTrigger=function(r,e,t,n){this.checkTrigger(r,e,t,n,function(a){return a.triggersBounds},function(a){r.dirtyCompoundBoundsCache(),r.dirtyBoundingBoxCache()})};sr.checkConnectedEdgesBoundsTrigger=function(r,e,t,n){this.checkTrigger(r,e,t,n,function(a){return a.triggersBoundsOfConnectedEdges},function(a){r.connectedEdges().forEach(function(i){i.dirtyBoundingBoxCache()})})};sr.checkParallelEdgesBoundsTrigger=function(r,e,t,n){this.checkTrigger(r,e,t,n,function(a){return a.triggersBoundsOfParallelEdges},function(a){r.parallelEdges().forEach(function(i){i.dirtyBoundingBoxCache()})})};sr.checkTriggers=function(r,e,t,n){r.dirtyStyleCache(),this.checkZOrderTrigger(r,e,t,n),this.checkBoundsTrigger(r,e,t,n),this.checkConnectedEdgesBoundsTrigger(r,e,t,n),this.checkParallelEdgesBoundsTrigger(r,e,t,n)};var Io={};Io.applyBypass=function(r,e,t,n){var a=this,i=[],o=!0;if(e==="*"||e==="**"){if(t!==void 0)for(var l=0;l<a.properties.length;l++){var c=a.properties[l],f=c.name,d=this.parse(f,t,!0);d&&i.push(d)}}else if(Qe(e)){var h=this.parse(e,t,!0);h&&i.push(h)}else if(dt(e)){var p=e;n=t;for(var g=Object.keys(p),m=0;m<g.length;m++){var w=g[m],x=p[w];if(x===void 0&&(x=p[Nu(w)]),x!==void 0){var b=this.parse(w,x,!0);b&&i.push(b)}}}else return!1;if(i.length===0)return!1;for(var E=!1,_=0;_<r.length;_++){for(var C=r[_],B={},L=void 0,A=0;A<i.length;A++){var z=i[A];if(n){var M=C.pstyle(z.name);L=B[z.name]={prev:M}}E=this.applyParsedProperty(C,Sn(z))||E,n&&(L.next=C.pstyle(z.name))}E&&this.updateStyleHints(C),n&&this.updateTransitions(C,B,o)}return E};Io.overrideBypass=function(r,e,t){e=Zh(e);for(var n=0;n<r.length;n++){var a=r[n],i=a._private.style[e],o=this.properties[e].type,l=o.color,c=o.mutiple,f=i?i.pfValue!=null?i.pfValue:i.value:null;!i||!i.bypass?this.applyBypass(a,e,t):(i.value=t,i.pfValue!=null&&(i.pfValue=t),l?i.strValue="rgb("+t.join(",")+")":c?i.strValue=t.join(" "):i.strValue=""+t,this.updateStyleHints(a)),this.checkTriggers(a,e,f,t)}};Io.removeAllBypasses=function(r,e){return this.removeBypasses(r,this.propertyNames,e)};Io.removeBypasses=function(r,e,t){for(var n=!0,a=0;a<r.length;a++){for(var i=r[a],o={},l=0;l<e.length;l++){var c=e[l],f=this.properties[c],d=i.pstyle(f.name);if(!(!d||!d.bypass)){var h="",p=this.parse(c,h,!0),g=o[f.name]={prev:d};this.applyParsedProperty(i,p),g.next=i.pstyle(f.name)}}this.updateStyleHints(i),t&&this.updateTransitions(i,o,n)}};var fv={};fv.getEmSizeInPixels=function(){var r=this.containerCss("font-size");return r!=null?parseFloat(r):1};fv.containerCss=function(r){var e=this._private.cy,t=e.container(),n=e.window();if(n&&t&&n.getComputedStyle)return n.getComputedStyle(t).getPropertyValue(r)};var kn={};kn.getRenderedStyle=function(r,e){return e?this.getStylePropertyValue(r,e,!0):this.getRawStyle(r,!0)};kn.getRawStyle=function(r,e){var t=this;if(r=r[0],r){for(var n={},a=0;a<t.properties.length;a++){var i=t.properties[a],o=t.getStylePropertyValue(r,i.name,e);o!=null&&(n[i.name]=o,n[Nu(i.name)]=o)}return n}};kn.getIndexedStyle=function(r,e,t,n){var a=r.pstyle(e)[t][n];return a??r.cy().style().getDefaultProperty(e)[t][0]};kn.getStylePropertyValue=function(r,e,t){var n=this;if(r=r[0],r){var a=n.properties[e];a.alias&&(a=a.pointsTo);var i=a.type,o=r.pstyle(a.name);if(o){var l=o.value,c=o.units,f=o.strValue;if(t&&i.number&&l!=null&&$e(l)){var d=r.cy().zoom(),h=function(x){return x*d},p=function(x,b){return h(x)+b},g=wt(l),m=g?c.every(function(w){return w!=null}):c!=null;return m?g?l.map(function(w,x){return p(w,c[x])}).join(" "):p(l,c):g?l.map(function(w){return Qe(w)?w:""+h(w)}).join(" "):""+h(l)}else if(f!=null)return f}return null}};kn.getAnimationStartStyle=function(r,e){for(var t={},n=0;n<e.length;n++){var a=e[n],i=a.name,o=r.pstyle(i);o!==void 0&&(dt(o)?o=this.parse(i,o.strValue):o=this.parse(i,o)),o&&(t[i]=o)}return t};kn.getPropsList=function(r){var e=this,t=[],n=r,a=e.properties;if(n)for(var i=Object.keys(n),o=0;o<i.length;o++){var l=i[o],c=n[l],f=a[l]||a[Zh(l)],d=this.parse(f.name,c);d&&t.push(d)}return t};kn.getNonDefaultPropertiesHash=function(r,e,t){var n=t.slice(),a,i,o,l,c,f;for(c=0;c<e.length;c++)if(a=e[c],i=r.pstyle(a,!1),i!=null)if(i.pfValue!=null)n[0]=co(l,n[0]),n[1]=fo(l,n[1]);else for(o=i.strValue,f=0;f<o.length;f++)l=o.charCodeAt(f),n[0]=co(l,n[0]),n[1]=fo(l,n[1]);return n};kn.getPropertiesHash=kn.getNonDefaultPropertiesHash;var Hu={};Hu.appendFromJson=function(r){for(var e=this,t=0;t<r.length;t++){var n=r[t],a=n.selector,i=n.style||n.css,o=Object.keys(i);e.selector(a);for(var l=0;l<o.length;l++){var c=o[l],f=i[c];e.css(c,f)}}return e};Hu.fromJson=function(r){var e=this;return e.resetToDefault(),e.appendFromJson(r),e};Hu.json=function(){for(var r=[],e=this.defaultLength;e<this.length;e++){for(var t=this[e],n=t.selector,a=t.properties,i={},o=0;o<a.length;o++){var l=a[o];i[l.name]=l.strValue}r.push({selector:n?n.toString():"core",style:i})}return r};var dv={};dv.appendFromString=function(r){var e=this,t=this,n=""+r,a,i,o;n=n.replace(/[/][*](\s|.)+?[*][/]/g,"");function l(){n.length>a.length?n=n.substr(a.length):n=""}function c(){i.length>o.length?i=i.substr(o.length):i=""}for(;;){var f=n.match(/^\s*$/);if(f)break;var d=n.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!d){gt("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+n);break}a=d[0];var h=d[1];if(h!=="core"){var p=new Ea(h);if(p.invalid){gt("Skipping parsing of block: Invalid selector found in string stylesheet: "+h),l();continue}}var g=d[2],m=!1;i=g;for(var w=[];;){var x=i.match(/^\s*$/);if(x)break;var b=i.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!b){gt("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+g),m=!0;break}o=b[0];var E=b[1],_=b[2],C=e.properties[E];if(!C){gt("Skipping property: Invalid property name in: "+o),c();continue}var B=t.parse(E,_);if(!B){gt("Skipping property: Invalid property definition in: "+o),c();continue}w.push({name:E,val:_}),c()}if(m){l();break}t.selector(h);for(var L=0;L<w.length;L++){var A=w[L];t.css(A.name,A.val)}l()}return t};dv.fromString=function(r){var e=this;return e.resetToDefault(),e.appendFromString(r),e};var Gt={};(function(){var r=Qt,e=l_,t=c_,n=f_,a=d_,i=function(he){return"^"+he+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},o=function(he){var Ee=r+"|\\w+|"+e+"|"+t+"|"+n+"|"+a;return"^"+he+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+r+")\\s*\\,\\s*("+r+")\\s*,\\s*("+Ee+")\\s*\\,\\s*("+Ee+")\\)$"},l=[`^url\\s*\\(\\s*['"]?(.+?)['"]?\\s*\\)$`,"^(none)$","^(.+)$"];Gt.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},axisDirectionExplicit:{enums:["leftward","rightward","upward","downward"]},axisDirectionPrimary:{enums:["horizontal","vertical"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},boxSelection:{enums:["contain","overlap","none"]},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},linePosition:{enums:["center","inside","outside"]},lineJoin:{enums:["round","bevel","miter"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi","round-segments","round-taxi"]},radiusType:{enums:["arc-radius","influence-radius"],multiple:!0},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle","circle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},cornerRadius:{number:!0,min:0,units:"px|em",implicitUnits:"px",enums:["auto"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:i("data")},layoutData:{mapping:!0,regex:i("layoutData")},scratch:{mapping:!0,regex:i("scratch")},mapData:{mapping:!0,regex:o("mapData")},mapLayoutData:{mapping:!0,regex:o("mapLayoutData")},mapScratch:{mapping:!0,regex:o("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:l,singleRegexMatchValue:!0},urls:{regexes:l,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(he,Ee){switch(he.length){case 2:return Ee[0]!=="deg"&&Ee[0]!=="rad"&&Ee[1]!=="deg"&&Ee[1]!=="rad";case 1:return Qe(he[0])||Ee[0]==="deg"||Ee[0]==="rad";default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+r+")\\s*,\\s*("+r+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+r+")\\s*,\\s*("+r+")\\s*,\\s*("+r+")\\s*,\\s*("+r+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(he){var Ee=he.length;return Ee===1||Ee===2||Ee===4}}};var c={zeroNonZero:function(he,Ee){return(he==null||Ee==null)&&he!==Ee||he==0&&Ee!=0?!0:he!=0&&Ee==0},any:function(he,Ee){return he!=Ee},emptyNonEmpty:function(he,Ee){var Re=wa(he),I=wa(Ee);return Re&&!I||!Re&&I}},f=Gt.types,d=[{name:"label",type:f.text,triggersBounds:c.any,triggersZOrder:c.emptyNonEmpty},{name:"text-rotation",type:f.textRotation,triggersBounds:c.any},{name:"text-margin-x",type:f.bidirectionalSize,triggersBounds:c.any},{name:"text-margin-y",type:f.bidirectionalSize,triggersBounds:c.any}],h=[{name:"source-label",type:f.text,triggersBounds:c.any},{name:"source-text-rotation",type:f.textRotation,triggersBounds:c.any},{name:"source-text-margin-x",type:f.bidirectionalSize,triggersBounds:c.any},{name:"source-text-margin-y",type:f.bidirectionalSize,triggersBounds:c.any},{name:"source-text-offset",type:f.size,triggersBounds:c.any}],p=[{name:"target-label",type:f.text,triggersBounds:c.any},{name:"target-text-rotation",type:f.textRotation,triggersBounds:c.any},{name:"target-text-margin-x",type:f.bidirectionalSize,triggersBounds:c.any},{name:"target-text-margin-y",type:f.bidirectionalSize,triggersBounds:c.any},{name:"target-text-offset",type:f.size,triggersBounds:c.any}],g=[{name:"font-family",type:f.fontFamily,triggersBounds:c.any},{name:"font-style",type:f.fontStyle,triggersBounds:c.any},{name:"font-weight",type:f.fontWeight,triggersBounds:c.any},{name:"font-size",type:f.size,triggersBounds:c.any},{name:"text-transform",type:f.textTransform,triggersBounds:c.any},{name:"text-wrap",type:f.textWrap,triggersBounds:c.any},{name:"text-overflow-wrap",type:f.textOverflowWrap,triggersBounds:c.any},{name:"text-max-width",type:f.size,triggersBounds:c.any},{name:"text-outline-width",type:f.size,triggersBounds:c.any},{name:"line-height",type:f.positiveNumber,triggersBounds:c.any}],m=[{name:"text-valign",type:f.valign,triggersBounds:c.any},{name:"text-halign",type:f.halign,triggersBounds:c.any},{name:"color",type:f.color},{name:"text-outline-color",type:f.color},{name:"text-outline-opacity",type:f.zeroOneNumber},{name:"text-background-color",type:f.color},{name:"text-background-opacity",type:f.zeroOneNumber},{name:"text-background-padding",type:f.size,triggersBounds:c.any},{name:"text-border-opacity",type:f.zeroOneNumber},{name:"text-border-color",type:f.color},{name:"text-border-width",type:f.size,triggersBounds:c.any},{name:"text-border-style",type:f.borderStyle,triggersBounds:c.any},{name:"text-background-shape",type:f.textBackgroundShape,triggersBounds:c.any},{name:"text-justification",type:f.justification},{name:"box-select-labels",type:f.bool,triggersBounds:c.any}],w=[{name:"events",type:f.bool,triggersZOrder:c.any},{name:"text-events",type:f.bool,triggersZOrder:c.any},{name:"box-selection",type:f.boxSelection,triggersZOrder:c.any}],x=[{name:"display",type:f.display,triggersZOrder:c.any,triggersBounds:c.any,triggersBoundsOfConnectedEdges:c.any,triggersBoundsOfParallelEdges:function(he,Ee,Re){return he===Ee?!1:Re.pstyle("curve-style").value==="bezier"}},{name:"visibility",type:f.visibility,triggersZOrder:c.any},{name:"opacity",type:f.zeroOneNumber,triggersZOrder:c.zeroNonZero},{name:"text-opacity",type:f.zeroOneNumber},{name:"min-zoomed-font-size",type:f.size},{name:"z-compound-depth",type:f.zCompoundDepth,triggersZOrder:c.any},{name:"z-index-compare",type:f.zIndexCompare,triggersZOrder:c.any},{name:"z-index",type:f.number,triggersZOrder:c.any}],b=[{name:"overlay-padding",type:f.size,triggersBounds:c.any},{name:"overlay-color",type:f.color},{name:"overlay-opacity",type:f.zeroOneNumber,triggersBounds:c.zeroNonZero},{name:"overlay-shape",type:f.overlayShape,triggersBounds:c.any},{name:"overlay-corner-radius",type:f.cornerRadius}],E=[{name:"underlay-padding",type:f.size,triggersBounds:c.any},{name:"underlay-color",type:f.color},{name:"underlay-opacity",type:f.zeroOneNumber,triggersBounds:c.zeroNonZero},{name:"underlay-shape",type:f.overlayShape,triggersBounds:c.any},{name:"underlay-corner-radius",type:f.cornerRadius}],_=[{name:"transition-property",type:f.propList},{name:"transition-duration",type:f.time},{name:"transition-delay",type:f.time},{name:"transition-timing-function",type:f.easing}],C=function(he,Ee){return Ee.value==="label"?-he.poolIndex():Ee.pfValue},B=[{name:"height",type:f.nodeSize,triggersBounds:c.any,hashOverride:C},{name:"width",type:f.nodeSize,triggersBounds:c.any,hashOverride:C},{name:"shape",type:f.nodeShape,triggersBounds:c.any},{name:"shape-polygon-points",type:f.polygonPointList,triggersBounds:c.any},{name:"corner-radius",type:f.cornerRadius},{name:"background-color",type:f.color},{name:"background-fill",type:f.fill},{name:"background-opacity",type:f.zeroOneNumber},{name:"background-blacken",type:f.nOneOneNumber},{name:"background-gradient-stop-colors",type:f.colors},{name:"background-gradient-stop-positions",type:f.percentages},{name:"background-gradient-direction",type:f.gradientDirection},{name:"padding",type:f.sizeMaybePercent,triggersBounds:c.any},{name:"padding-relative-to",type:f.paddingRelativeTo,triggersBounds:c.any},{name:"bounds-expansion",type:f.boundsExpansion,triggersBounds:c.any}],L=[{name:"border-color",type:f.color},{name:"border-opacity",type:f.zeroOneNumber},{name:"border-width",type:f.size,triggersBounds:c.any},{name:"border-style",type:f.borderStyle},{name:"border-cap",type:f.lineCap},{name:"border-join",type:f.lineJoin},{name:"border-dash-pattern",type:f.numbers},{name:"border-dash-offset",type:f.number},{name:"border-position",type:f.linePosition}],A=[{name:"outline-color",type:f.color},{name:"outline-opacity",type:f.zeroOneNumber},{name:"outline-width",type:f.size,triggersBounds:c.any},{name:"outline-style",type:f.borderStyle},{name:"outline-offset",type:f.size,triggersBounds:c.any}],z=[{name:"background-image",type:f.urls},{name:"background-image-crossorigin",type:f.bgCrossOrigin},{name:"background-image-opacity",type:f.zeroOneNumbers},{name:"background-image-containment",type:f.bgContainment},{name:"background-image-smoothing",type:f.bools},{name:"background-position-x",type:f.bgPos},{name:"background-position-y",type:f.bgPos},{name:"background-width-relative-to",type:f.bgRelativeTo},{name:"background-height-relative-to",type:f.bgRelativeTo},{name:"background-repeat",type:f.bgRepeat},{name:"background-fit",type:f.bgFit},{name:"background-clip",type:f.bgClip},{name:"background-width",type:f.bgWH},{name:"background-height",type:f.bgWH},{name:"background-offset-x",type:f.bgPos},{name:"background-offset-y",type:f.bgPos}],M=[{name:"position",type:f.position,triggersBounds:c.any},{name:"compound-sizing-wrt-labels",type:f.compoundIncludeLabels,triggersBounds:c.any},{name:"min-width",type:f.size,triggersBounds:c.any},{name:"min-width-bias-left",type:f.sizeMaybePercent,triggersBounds:c.any},{name:"min-width-bias-right",type:f.sizeMaybePercent,triggersBounds:c.any},{name:"min-height",type:f.size,triggersBounds:c.any},{name:"min-height-bias-top",type:f.sizeMaybePercent,triggersBounds:c.any},{name:"min-height-bias-bottom",type:f.sizeMaybePercent,triggersBounds:c.any}],U=[{name:"line-style",type:f.lineStyle},{name:"line-color",type:f.color},{name:"line-fill",type:f.fill},{name:"line-cap",type:f.lineCap},{name:"line-opacity",type:f.zeroOneNumber},{name:"line-dash-pattern",type:f.numbers},{name:"line-dash-offset",type:f.number},{name:"line-outline-width",type:f.size},{name:"line-outline-color",type:f.color},{name:"line-gradient-stop-colors",type:f.colors},{name:"line-gradient-stop-positions",type:f.percentages},{name:"curve-style",type:f.curveStyle,triggersBounds:c.any,triggersBoundsOfParallelEdges:function(he,Ee){return he===Ee?!1:he==="bezier"||Ee==="bezier"}},{name:"haystack-radius",type:f.zeroOneNumber,triggersBounds:c.any},{name:"source-endpoint",type:f.edgeEndpoint,triggersBounds:c.any},{name:"target-endpoint",type:f.edgeEndpoint,triggersBounds:c.any},{name:"control-point-step-size",type:f.size,triggersBounds:c.any},{name:"control-point-distances",type:f.bidirectionalSizes,triggersBounds:c.any},{name:"control-point-weights",type:f.numbers,triggersBounds:c.any},{name:"segment-distances",type:f.bidirectionalSizes,triggersBounds:c.any},{name:"segment-weights",type:f.numbers,triggersBounds:c.any},{name:"segment-radii",type:f.numbers,triggersBounds:c.any},{name:"radius-type",type:f.radiusType,triggersBounds:c.any},{name:"taxi-turn",type:f.bidirectionalSizeMaybePercent,triggersBounds:c.any},{name:"taxi-turn-min-distance",type:f.size,triggersBounds:c.any},{name:"taxi-direction",type:f.axisDirection,triggersBounds:c.any},{name:"taxi-radius",type:f.number,triggersBounds:c.any},{name:"edge-distances",type:f.edgeDistances,triggersBounds:c.any},{name:"arrow-scale",type:f.positiveNumber,triggersBounds:c.any},{name:"loop-direction",type:f.angle,triggersBounds:c.any},{name:"loop-sweep",type:f.angle,triggersBounds:c.any},{name:"source-distance-from-node",type:f.size,triggersBounds:c.any},{name:"target-distance-from-node",type:f.size,triggersBounds:c.any}],q=[{name:"ghost",type:f.bool,triggersBounds:c.any},{name:"ghost-offset-x",type:f.bidirectionalSize,triggersBounds:c.any},{name:"ghost-offset-y",type:f.bidirectionalSize,triggersBounds:c.any},{name:"ghost-opacity",type:f.zeroOneNumber}],D=[{name:"selection-box-color",type:f.color},{name:"selection-box-opacity",type:f.zeroOneNumber},{name:"selection-box-border-color",type:f.color},{name:"selection-box-border-width",type:f.size},{name:"active-bg-color",type:f.color},{name:"active-bg-opacity",type:f.zeroOneNumber},{name:"active-bg-size",type:f.size},{name:"outside-texture-bg-color",type:f.color},{name:"outside-texture-bg-opacity",type:f.zeroOneNumber}],F=[];Gt.pieBackgroundN=16,F.push({name:"pie-size",type:f.sizeMaybePercent}),F.push({name:"pie-hole",type:f.sizeMaybePercent}),F.push({name:"pie-start-angle",type:f.angle});for(var T=1;T<=Gt.pieBackgroundN;T++)F.push({name:"pie-"+T+"-background-color",type:f.color}),F.push({name:"pie-"+T+"-background-size",type:f.percent}),F.push({name:"pie-"+T+"-background-opacity",type:f.zeroOneNumber});var G=[];Gt.stripeBackgroundN=16,G.push({name:"stripe-size",type:f.sizeMaybePercent}),G.push({name:"stripe-direction",type:f.axisDirectionPrimary});for(var Q=1;Q<=Gt.stripeBackgroundN;Q++)G.push({name:"stripe-"+Q+"-background-color",type:f.color}),G.push({name:"stripe-"+Q+"-background-size",type:f.percent}),G.push({name:"stripe-"+Q+"-background-opacity",type:f.zeroOneNumber});var W=[],X=Gt.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:f.arrowShape,triggersBounds:c.any},{name:"arrow-color",type:f.color},{name:"arrow-fill",type:f.arrowFill},{name:"arrow-width",type:f.arrowWidth}].forEach(function(fe){X.forEach(function(he){var Ee=he+"-"+fe.name,Re=fe.type,I=fe.triggersBounds;W.push({name:Ee,type:Re,triggersBounds:I})})},{});var Z=Gt.properties=[].concat(w,_,x,b,E,q,m,g,d,h,p,B,L,A,z,F,G,M,U,W,D),te=Gt.propertyGroups={behavior:w,transition:_,visibility:x,overlay:b,underlay:E,ghost:q,commonLabel:m,labelDimensions:g,mainLabel:d,sourceLabel:h,targetLabel:p,nodeBody:B,nodeBorder:L,nodeOutline:A,backgroundImage:z,pie:F,stripe:G,compound:M,edgeLine:U,edgeArrow:W,core:D},N=Gt.propertyGroupNames={},$=Gt.propertyGroupKeys=Object.keys(te);$.forEach(function(fe){N[fe]=te[fe].map(function(he){return he.name}),te[fe].forEach(function(he){return he.groupKey=fe})});var oe=Gt.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"segment-distance",pointsTo:"segment-distances"},{name:"segment-weight",pointsTo:"segment-weights"},{name:"segment-radius",pointsTo:"segment-radii"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];Gt.propertyNames=Z.map(function(fe){return fe.name});for(var ie=0;ie<Z.length;ie++){var ne=Z[ie];Z[ne.name]=ne}for(var xe=0;xe<oe.length;xe++){var Pe=oe[xe],Ce=Z[Pe.pointsTo],me={name:Pe.name,alias:!0,pointsTo:Ce};Z.push(me),Z[Pe.name]=me}})();Gt.getDefaultProperty=function(r){return this.getDefaultProperties()[r]};Gt.getDefaultProperties=function(){var r=this._private;if(r.defaultProperties!=null)return r.defaultProperties;for(var e=tt({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","box-selection":"contain","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","overlay-corner-radius":"auto","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","underlay-corner-radius":"auto","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","box-select-labels":"no","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","border-dash-pattern":[4,2],"border-dash-offset":0,"border-cap":"butt","border-join":"miter","border-position":"center","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","corner-radius":"auto","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%","pie-hole":0,"pie-start-angle":"0deg"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(c,f){for(var d=1;d<=Gt.pieBackgroundN;d++){var h=f.name.replace("{{i}}",d),p=f.value;c[h]=p}return c},{}),{"stripe-size":"100%","stripe-direction":"horizontal"},[{name:"stripe-{{i}}-background-color",value:"black"},{name:"stripe-{{i}}-background-size",value:"0%"},{name:"stripe-{{i}}-background-opacity",value:1}].reduce(function(c,f){for(var d=1;d<=Gt.stripeBackgroundN;d++){var h=f.name.replace("{{i}}",d),p=f.value;c[h]=p}return c},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-outline-width":0,"line-outline-color":"#000","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"segment-radii":15,"radius-type":"arc-radius","taxi-turn":"50%","taxi-radius":15,"taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce(function(c,f){return Gt.arrowPrefixes.forEach(function(d){var h=d+"-"+f.name,p=f.value;c[h]=p}),c},{})),t={},n=0;n<this.properties.length;n++){var a=this.properties[n];if(!a.pointsTo){var i=a.name,o=e[i],l=this.parse(i,o);t[i]=l}}return r.defaultProperties=t,r.defaultProperties};Gt.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var Ku={};Ku.parse=function(r,e,t,n){var a=this;if(Ft(e))return a.parseImplWarn(r,e,t,n);var i=n==="mapping"||n===!0||n===!1||n==null?"dontcare":n,o=t?"t":"f",l=""+e,c=C1(r,l,o,i),f=a.propCache=a.propCache||[],d;return(d=f[c])||(d=f[c]=a.parseImplWarn(r,e,t,n)),(t||n==="mapping")&&(d=Sn(d),d&&(d.value=Sn(d.value))),d};Ku.parseImplWarn=function(r,e,t,n){var a=this.parseImpl(r,e,t,n);return!a&&e!=null&&gt("The style property `".concat(r,": ").concat(e,"` is invalid")),a&&(a.name==="width"||a.name==="height")&&e==="label"&&gt("The style value of `label` is deprecated for `"+a.name+"`"),a};Ku.parseImpl=function(r,e,t,n){var a=this;r=Zh(r);var i=a.properties[r],o=e,l=a.types;if(!i||e===void 0)return null;i.alias&&(i=i.pointsTo,r=i.name);var c=Qe(e);c&&(e=e.trim());var f=i.type;if(!f)return null;if(t&&(e===""||e===null))return{name:r,value:e,bypass:!0,deleteBypass:!0};if(Ft(e))return{name:r,value:e,strValue:"fn",mapped:l.fn,bypass:t};var d,h;if(!(!c||n||e.length<7||e[1]!=="a")){if(e.length>=7&&e[0]==="d"&&(d=new RegExp(l.data.regex).exec(e))){if(t)return!1;var p=l.data;return{name:r,value:d,strValue:""+e,mapped:p,field:d[1],bypass:t}}else if(e.length>=10&&e[0]==="m"&&(h=new RegExp(l.mapData.regex).exec(e))){if(t||f.multiple)return!1;var g=l.mapData;if(!(f.color||f.number))return!1;var m=this.parse(r,h[4]);if(!m||m.mapped)return!1;var w=this.parse(r,h[5]);if(!w||w.mapped)return!1;if(m.pfValue===w.pfValue||m.strValue===w.strValue)return gt("`"+r+": "+e+"` is not a valid mapper because the output range is zero; converting to `"+r+": "+m.strValue+"`"),this.parse(r,m.strValue);if(f.color){var x=m.value,b=w.value,E=x[0]===b[0]&&x[1]===b[1]&&x[2]===b[2]&&(x[3]===b[3]||(x[3]==null||x[3]===1)&&(b[3]==null||b[3]===1));if(E)return!1}return{name:r,value:h,strValue:""+e,mapped:g,field:h[1],fieldMin:parseFloat(h[2]),fieldMax:parseFloat(h[3]),valueMin:m.value,valueMax:w.value,bypass:t}}}if(f.multiple&&n!=="multiple"){var _;if(c?_=e.split(/\s+/):wt(e)?_=e:_=[e],f.evenMultiple&&_.length%2!==0)return null;for(var C=[],B=[],L=[],A="",z=!1,M=0;M<_.length;M++){var U=a.parse(r,_[M],t,"multiple");z=z||Qe(U.value),C.push(U.value),L.push(U.pfValue!=null?U.pfValue:U.value),B.push(U.units),A+=(M>0?" ":"")+U.strValue}return f.validate&&!f.validate(C,B)?null:f.singleEnum&&z?C.length===1&&Qe(C[0])?{name:r,value:C[0],strValue:C[0],bypass:t}:null:{name:r,value:C,pfValue:L,strValue:A,bypass:t,units:B}}var q=function(){for(var me=0;me<f.enums.length;me++){var fe=f.enums[me];if(fe===e)return{name:r,value:e,strValue:""+e,bypass:t}}return null};if(f.number){var D,F="px";if(f.units&&(D=f.units),f.implicitUnits&&(F=f.implicitUnits),!f.unitless)if(c){var T="px|em"+(f.allowPercent?"|\\%":"");D&&(T=D);var G=e.match("^("+Qt+")("+T+")?$");G&&(e=G[1],D=G[2]||F)}else(!D||f.implicitUnits)&&(D=F);if(e=parseFloat(e),isNaN(e)&&f.enums===void 0)return null;if(isNaN(e)&&f.enums!==void 0)return e=o,q();if(f.integer&&!t_(e)||f.min!==void 0&&(e<f.min||f.strictMin&&e===f.min)||f.max!==void 0&&(e>f.max||f.strictMax&&e===f.max))return null;var Q={name:r,value:e,strValue:""+e+(D||""),units:D,bypass:t};return f.unitless||D!=="px"&&D!=="em"?Q.pfValue=e:Q.pfValue=D==="px"||!D?e:this.getEmSizeInPixels()*e,(D==="ms"||D==="s")&&(Q.pfValue=D==="ms"?e:1e3*e),(D==="deg"||D==="rad")&&(Q.pfValue=D==="rad"?e:fS(e)),D==="%"&&(Q.pfValue=e/100),Q}else if(f.propList){var W=[],X=""+e;if(X!=="none"){for(var Z=X.split(/\s*,\s*|\s+/),te=0;te<Z.length;te++){var N=Z[te].trim();a.properties[N]?W.push(N):gt("`"+N+"` is not a valid property name")}if(W.length===0)return null}return{name:r,value:W,strValue:W.length===0?"none":W.join(" "),bypass:t}}else if(f.color){var $=w1(e);return $?{name:r,value:$,pfValue:$,strValue:"rgb("+$[0]+","+$[1]+","+$[2]+")",bypass:t}:null}else if(f.regex||f.regexes){if(f.enums){var oe=q();if(oe)return oe}for(var ie=f.regexes?f.regexes:[f.regex],ne=0;ne<ie.length;ne++){var xe=new RegExp(ie[ne]),Pe=xe.exec(e);if(Pe)return{name:r,value:f.singleRegexMatchValue?Pe[1]:Pe,strValue:""+e,bypass:t}}return null}else return f.string?{name:r,value:""+e,strValue:""+e,bypass:t}:f.enums?q():null};var ir=function(e){if(!(this instanceof ir))return new ir(e);if(!Xh(e)){It("A style must have a core reference");return}this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()},br=ir.prototype;br.instanceString=function(){return"style"};br.clear=function(){for(var r=this._private,e=r.cy,t=e.elements(),n=0;n<this.length;n++)this[n]=void 0;return this.length=0,r.contextStyles={},r.propDiffs={},this.cleanElements(t,!0),t.forEach(function(a){var i=a[0]._private;i.styleDirty=!0,i.appliedInitStyle=!1}),this};br.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this};br.core=function(r){return this._private.coreStyle[r]||this.getDefaultProperty(r)};br.selector=function(r){var e=r==="core"?null:new Ea(r),t=this.length++;return this[t]={selector:e,properties:[],mappedProperties:[],index:t},this};br.css=function(){var r=this,e=arguments;if(e.length===1)for(var t=e[0],n=0;n<r.properties.length;n++){var a=r.properties[n],i=t[a.name];i===void 0&&(i=t[Nu(a.name)]),i!==void 0&&this.cssRule(a.name,i)}else e.length===2&&this.cssRule(e[0],e[1]);return this};br.style=br.css;br.cssRule=function(r,e){var t=this.parse(r,e);if(t){var n=this.length-1;this[n].properties.push(t),this[n].properties[t.name]=t,t.name.match(/pie-(\d+)-background-size/)&&t.value&&(this._private.hasPie=!0),t.name.match(/stripe-(\d+)-background-size/)&&t.value&&(this._private.hasStripe=!0),t.mapped&&this[n].mappedProperties.push(t);var a=!this[n].selector;a&&(this._private.coreStyle[t.name]=t)}return this};br.append=function(r){return g1(r)?r.appendToStyle(this):wt(r)?this.appendFromJson(r):Qe(r)&&this.appendFromString(r),this};ir.fromJson=function(r,e){var t=new ir(r);return t.fromJson(e),t};ir.fromString=function(r,e){return new ir(r).fromString(e)};[sr,Io,fv,kn,Hu,dv,Gt,Ku].forEach(function(r){tt(br,r)});ir.types=br.types;ir.properties=br.properties;ir.propertyGroups=br.propertyGroups;ir.propertyGroupNames=br.propertyGroupNames;ir.propertyGroupKeys=br.propertyGroupKeys;var pT={style:function(e){if(e){var t=this.setStyle(e);t.update()}return this._private.style},setStyle:function(e){var t=this._private;return g1(e)?t.style=e.generateStyle(this):wt(e)?t.style=ir.fromJson(this,e):Qe(e)?t.style=ir.fromString(this,e):t.style=ir(this),t.style},updateStyle:function(){this.mutableElements().updateStyle()}},gT="single",ti={autolock:function(e){if(e!==void 0)this._private.autolock=!!e;else return this._private.autolock;return this},autoungrabify:function(e){if(e!==void 0)this._private.autoungrabify=!!e;else return this._private.autoungrabify;return this},autounselectify:function(e){if(e!==void 0)this._private.autounselectify=!!e;else return this._private.autounselectify;return this},selectionType:function(e){var t=this._private;if(t.selectionType==null&&(t.selectionType=gT),e!==void 0)(e==="additive"||e==="single")&&(t.selectionType=e);else return t.selectionType;return this},panningEnabled:function(e){if(e!==void 0)this._private.panningEnabled=!!e;else return this._private.panningEnabled;return this},userPanningEnabled:function(e){if(e!==void 0)this._private.userPanningEnabled=!!e;else return this._private.userPanningEnabled;return this},zoomingEnabled:function(e){if(e!==void 0)this._private.zoomingEnabled=!!e;else return this._private.zoomingEnabled;return this},userZoomingEnabled:function(e){if(e!==void 0)this._private.userZoomingEnabled=!!e;else return this._private.userZoomingEnabled;return this},boxSelectionEnabled:function(e){if(e!==void 0)this._private.boxSelectionEnabled=!!e;else return this._private.boxSelectionEnabled;return this},pan:function(){var e=arguments,t=this._private.pan,n,a,i,o,l;switch(e.length){case 0:return t;case 1:if(Qe(e[0]))return n=e[0],t[n];if(dt(e[0])){if(!this._private.panningEnabled)return this;i=e[0],o=i.x,l=i.y,$e(o)&&(t.x=o),$e(l)&&(t.y=l),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;n=e[0],a=e[1],(n==="x"||n==="y")&&$e(a)&&(t[n]=a),this.emit("pan viewport");break}return this.notify("viewport"),this},panBy:function(e,t){var n=arguments,a=this._private.pan,i,o,l,c,f;if(!this._private.panningEnabled)return this;switch(n.length){case 1:dt(e)&&(l=n[0],c=l.x,f=l.y,$e(c)&&(a.x+=c),$e(f)&&(a.y+=f),this.emit("pan viewport"));break;case 2:i=e,o=t,(i==="x"||i==="y")&&$e(o)&&(a[i]+=o),this.emit("pan viewport");break}return this.notify("viewport"),this},gc:function(){this.notify("gc")},fit:function(e,t){var n=this.getFitViewport(e,t);if(n){var a=this._private;a.zoom=n.zoom,a.pan=n.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,t){if($e(e)&&t===void 0&&(t=e,e=void 0),!(!this._private.panningEnabled||!this._private.zoomingEnabled)){var n;if(Qe(e)){var a=e;e=this.$(a)}else if(a_(e)){var i=e;n={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2},n.w=n.x2-n.x1,n.h=n.y2-n.y1}else Hr(e)||(e=this.mutableElements());if(!(Hr(e)&&e.empty())){n=n||e.boundingBox();var o=this.width(),l=this.height(),c;if(t=$e(t)?t:0,!isNaN(o)&&!isNaN(l)&&o>0&&l>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0){c=Math.min((o-2*t)/n.w,(l-2*t)/n.h),c=c>this._private.maxZoom?this._private.maxZoom:c,c=c<this._private.minZoom?this._private.minZoom:c;var f={x:(o-c*(n.x1+n.x2))/2,y:(l-c*(n.y1+n.y2))/2};return{zoom:c,pan:f}}}}},zoomRange:function(e,t){var n=this._private;if(t==null){var a=e;e=a.min,t=a.max}return $e(e)&&$e(t)&&e<=t?(n.minZoom=e,n.maxZoom=t):$e(e)&&t===void 0&&e<=n.maxZoom?n.minZoom=e:$e(t)&&e===void 0&&t>=n.minZoom&&(n.maxZoom=t),this},minZoom:function(e){return e===void 0?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return e===void 0?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var t=this._private,n=t.pan,a=t.zoom,i,o,l=!1;if(t.zoomingEnabled||(l=!0),$e(e)?o=e:dt(e)&&(o=e.level,e.position!=null?i=Mu(e.position,a,n):e.renderedPosition!=null&&(i=e.renderedPosition),i!=null&&!t.panningEnabled&&(l=!0)),o=o>t.maxZoom?t.maxZoom:o,o=o<t.minZoom?t.minZoom:o,l||!$e(o)||o===a||i!=null&&(!$e(i.x)||!$e(i.y)))return null;if(i!=null){var c=n,f=a,d=o,h={x:-d/f*(i.x-c.x)+i.x,y:-d/f*(i.y-c.y)+i.y};return{zoomed:!0,panned:!0,zoom:d,pan:h}}else return{zoomed:!0,panned:!1,zoom:o,pan:n}},zoom:function(e){if(e===void 0)return this._private.zoom;var t=this.getZoomedViewport(e),n=this._private;return t==null||!t.zoomed?this:(n.zoom=t.zoom,t.panned&&(n.pan.x=t.pan.x,n.pan.y=t.pan.y),this.emit("zoom"+(t.panned?" pan":"")+" viewport"),this.notify("viewport"),this)},viewport:function(e){var t=this._private,n=!0,a=!0,i=[],o=!1,l=!1;if(!e)return this;if($e(e.zoom)||(n=!1),dt(e.pan)||(a=!1),!n&&!a)return this;if(n){var c=e.zoom;c<t.minZoom||c>t.maxZoom||!t.zoomingEnabled?o=!0:(t.zoom=c,i.push("zoom"))}if(a&&(!o||!e.cancelOnFailedZoom)&&t.panningEnabled){var f=e.pan;$e(f.x)&&(t.pan.x=f.x,l=!1),$e(f.y)&&(t.pan.y=f.y,l=!1),l||i.push("pan")}return i.length>0&&(i.push("viewport"),this.emit(i.join(" ")),this.notify("viewport")),this},center:function(e){var t=this.getCenterPan(e);return t&&(this._private.pan=t,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,t){if(this._private.panningEnabled){if(Qe(e)){var n=e;e=this.mutableElements().filter(n)}else Hr(e)||(e=this.mutableElements());if(e.length!==0){var a=e.boundingBox(),i=this.width(),o=this.height();t=t===void 0?this._private.zoom:t;var l={x:(i-t*(a.x1+a.x2))/2,y:(o-t*(a.y1+a.y2))/2};return l}}},reset:function(){return!this._private.panningEnabled||!this._private.zoomingEnabled?this:(this.viewport({pan:{x:0,y:0},zoom:1}),this)},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e=this._private,t=e.container,n=this;return e.sizeCache=e.sizeCache||(t?(function(){var a=n.window().getComputedStyle(t),i=function(l){return parseFloat(a.getPropertyValue(l))};return{width:t.clientWidth-i("padding-left")-i("padding-right"),height:t.clientHeight-i("padding-top")-i("padding-bottom")}})():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,t=this._private.zoom,n=this.renderedExtent(),a={x1:(n.x1-e.x)/t,x2:(n.x2-e.x)/t,y1:(n.y1-e.y)/t,y2:(n.y2-e.y)/t};return a.w=a.x2-a.x1,a.h=a.y2-a.y1,a},renderedExtent:function(){var e=this.width(),t=this.height();return{x1:0,y1:0,x2:e,y2:t,w:e,h:t}},multiClickDebounceTime:function(e){if(e)this._private.multiClickDebounceTime=e;else return this._private.multiClickDebounceTime;return this}};ti.centre=ti.center;ti.autolockNodes=ti.autolock;ti.autoungrabifyNodes=ti.autoungrabify;var yo={data:pt.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:pt.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:pt.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:pt.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};yo.attr=yo.data;yo.removeAttr=yo.removeData;var wo=function(e){var t=this;e=tt({},e);var n=e.container;n&&!wu(n)&&wu(n[0])&&(n=n[0]);var a=n?n._cyreg:null;a=a||{},a&&a.cy&&(a.cy.destroy(),a={});var i=a.readies=a.readies||[];n&&(n._cyreg=a),a.cy=t;var o=Yt!==void 0&&n!==void 0&&!e.headless,l=e;l.layout=tt({name:o?"grid":"null"},l.layout),l.renderer=tt({name:o?"canvas":"null"},l.renderer);var c=function(m,w,x){return w!==void 0?w:x!==void 0?x:m},f=this._private={container:n,ready:!1,options:l,elements:new fr(this),listeners:[],aniEles:new fr(this),data:l.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:c(!0,l.zoomingEnabled),userZoomingEnabled:c(!0,l.userZoomingEnabled),panningEnabled:c(!0,l.panningEnabled),userPanningEnabled:c(!0,l.userPanningEnabled),boxSelectionEnabled:c(!0,l.boxSelectionEnabled),autolock:c(!1,l.autolock,l.autolockNodes),autoungrabify:c(!1,l.autoungrabify,l.autoungrabifyNodes),autounselectify:c(!1,l.autounselectify),styleEnabled:l.styleEnabled===void 0?o:l.styleEnabled,zoom:$e(l.zoom)?l.zoom:1,pan:{x:dt(l.pan)&&$e(l.pan.x)?l.pan.x:0,y:dt(l.pan)&&$e(l.pan.y)?l.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:c(250,l.multiClickDebounceTime)};this.createEmitter(),this.selectionType(l.selectionType),this.zoomRange({min:l.minZoom,max:l.maxZoom});var d=function(m,w){var x=m.some(i_);if(x)return es.all(m).then(w);w(m)};f.styleEnabled&&t.setStyle([]);var h=tt({},l,l.renderer);t.initRenderer(h);var p=function(m,w,x){t.notifications(!1);var b=t.mutableElements();b.length>0&&b.remove(),m!=null&&(dt(m)||wt(m))&&t.add(m),t.one("layoutready",function(_){t.notifications(!0),t.emit(_),t.one("load",w),t.emitAndNotify("load")}).one("layoutstop",function(){t.one("done",x),t.emit("done")});var E=tt({},t._private.options.layout);E.eles=t.elements(),t.layout(E).run()};d([l.style,l.elements],function(g){var m=g[0],w=g[1];f.styleEnabled&&t.style().append(m),p(w,function(){t.startAnimationLoop(),f.ready=!0,Ft(l.ready)&&t.on("ready",l.ready);for(var x=0;x<i.length;x++){var b=i[x];t.on("ready",b)}a&&(a.readies=[]),t.emit("ready")},l.done)})},Cu=wo.prototype;tt(Cu,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},window:function(){var e=this._private.container;if(e==null)return Yt;var t=this._private.container.ownerDocument;return t===void 0||t==null?Yt:t.defaultView||Yt},mount:function(e){if(e!=null){var t=this,n=t._private,a=n.options;return!wu(e)&&wu(e[0])&&(e=e[0]),t.stopAnimationLoop(),t.destroyRenderer(),n.container=e,n.styleEnabled=!0,t.invalidateSize(),t.initRenderer(tt({},a,a.renderer,{name:a.renderer.name==="null"?"canvas":a.renderer.name})),t.startAnimationLoop(),t.style(a.style),t.emit("mount"),t}},unmount:function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},options:function(){return Sn(this._private.options)},json:function(e){var t=this,n=t._private,a=t.mutableElements(),i=function(C){return t.getElementById(C.id())};if(dt(e)){if(t.startBatch(),e.elements){var o={},l=function(C,B){for(var L=[],A=[],z=0;z<C.length;z++){var M=C[z];if(!M.data.id){gt("cy.json() cannot handle elements without an ID attribute");continue}var U=""+M.data.id,q=t.getElementById(U);o[U]=!0,q.length!==0?A.push({ele:q,json:M}):(B&&(M.group=B),L.push(M))}t.add(L);for(var D=0;D<A.length;D++){var F=A[D],T=F.ele,G=F.json;T.json(G)}};if(wt(e.elements))l(e.elements);else for(var c=["nodes","edges"],f=0;f<c.length;f++){var d=c[f],h=e.elements[d];wt(h)&&l(h,d)}var p=t.collection();a.filter(function(_){return!o[_.id()]}).forEach(function(_){_.isParent()?p.merge(_):_.remove()}),p.forEach(function(_){return _.children().move({parent:null})}),p.forEach(function(_){return i(_).remove()})}e.style&&t.style(e.style),e.zoom!=null&&e.zoom!==n.zoom&&t.zoom(e.zoom),e.pan&&(e.pan.x!==n.pan.x||e.pan.y!==n.pan.y)&&t.pan(e.pan),e.data&&t.data(e.data);for(var g=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],m=0;m<g.length;m++){var w=g[m];e[w]!=null&&t[w](e[w])}return t.endBatch(),this}else{var x=!!e,b={};x?b.elements=this.elements().map(function(_){return _.json()}):(b.elements={},a.forEach(function(_){var C=_.group();b.elements[C]||(b.elements[C]=[]),b.elements[C].push(_.json())})),this._private.styleEnabled&&(b.style=t.style().json()),b.data=Sn(t.data());var E=n.options;return b.zoomingEnabled=n.zoomingEnabled,b.userZoomingEnabled=n.userZoomingEnabled,b.zoom=n.zoom,b.minZoom=n.minZoom,b.maxZoom=n.maxZoom,b.panningEnabled=n.panningEnabled,b.userPanningEnabled=n.userPanningEnabled,b.pan=Sn(n.pan),b.boxSelectionEnabled=n.boxSelectionEnabled,b.renderer=Sn(E.renderer),b.hideEdgesOnViewport=E.hideEdgesOnViewport,b.textureOnViewport=E.textureOnViewport,b.wheelSensitivity=E.wheelSensitivity,b.motionBlur=E.motionBlur,b.multiClickDebounceTime=E.multiClickDebounceTime,b}}});Cu.$id=Cu.getElementById;[iT,cT,gw,Nh,hu,dT,Lh,vu,pT,ti,yo].forEach(function(r){tt(Cu,r)});var mT={fit:!0,directed:!1,direction:"downward",padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}},yT={maximal:!1,acyclic:!1},Oi=function(e){return e.scratch("breadthfirst")},w0=function(e,t){return e.scratch("breadthfirst",t)};function mw(r){this.options=tt({},mT,yT,r)}mw.prototype.run=function(){var r=this.options,e=r.cy,t=r.eles,n=t.nodes().filter(function(ae){return ae.isChildless()}),a=t,i=r.directed,o=r.acyclic||r.maximal||r.maximalAdjustments>0,l=!!r.boundingBox,c=Rr(l?r.boundingBox:structuredClone(e.extent())),f;if(Hr(r.roots))f=r.roots;else if(wt(r.roots)){for(var d=[],h=0;h<r.roots.length;h++){var p=r.roots[h],g=e.getElementById(p);d.push(g)}f=e.collection(d)}else if(Qe(r.roots))f=e.$(r.roots);else if(i)f=n.roots();else{var m=t.components();f=e.collection();for(var w=function(){var ve=m[x],ye=ve.maxDegree(!1),se=ve.filter(function(Be){return Be.degree(!1)===ye});f=f.add(se)},x=0;x<m.length;x++)w()}var b=[],E={},_=function(ve,ye){b[ye]==null&&(b[ye]=[]);var se=b[ye].length;b[ye].push(ve),w0(ve,{index:se,depth:ye})},C=function(ve,ye){var se=Oi(ve),Be=se.depth,Ie=se.index;b[Be][Ie]=null,ve.isChildless()&&_(ve,ye)};a.bfs({roots:f,directed:r.directed,visit:function(ve,ye,se,Be,Ie){var Ae=ve[0],ze=Ae.id();Ae.isChildless()&&_(Ae,Ie),E[ze]=!0}});for(var B=[],L=0;L<n.length;L++){var A=n[L];E[A.id()]||B.push(A)}var z=function(ve){for(var ye=b[ve],se=0;se<ye.length;se++){var Be=ye[se];if(Be==null){ye.splice(se,1),se--;continue}w0(Be,{depth:ve,index:se})}},M=function(ve,ye){for(var se=Oi(ve),Be=ve.incomers().filter(function(H){return H.isNode()&&t.has(H)}),Ie=-1,Ae=ve.id(),ze=0;ze<Be.length;ze++){var j=Be[ze],k=Oi(j);Ie=Math.max(Ie,k.depth)}if(se.depth<=Ie){if(!r.acyclic&&ye[Ae])return null;var R=Ie+1;return C(ve,R),ye[Ae]=R,!0}return!1};if(i&&o){var U=[],q={},D=function(ve){return U.push(ve)},F=function(){return U.shift()};for(n.forEach(function(ae){return U.push(ae)});U.length>0;){var T=F(),G=M(T,q);if(G)T.outgoers().filter(function(ae){return ae.isNode()&&t.has(ae)}).forEach(D);else if(G===null){gt("Detected double maximal shift for node `"+T.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}var Q=0;if(r.avoidOverlap)for(var W=0;W<n.length;W++){var X=n[W],Z=X.layoutDimensions(r),te=Z.w,N=Z.h;Q=Math.max(Q,te,N)}var $={},oe=function(ve){if($[ve.id()])return $[ve.id()];for(var ye=Oi(ve).depth,se=ve.neighborhood(),Be=0,Ie=0,Ae=0;Ae<se.length;Ae++){var ze=se[Ae];if(!(ze.isEdge()||ze.isParent()||!n.has(ze))){var j=Oi(ze);if(j!=null){var k=j.index,R=j.depth;if(!(k==null||R==null)){var H=b[R].length;R<ye&&(Be+=k/H,Ie++)}}}}return Ie=Math.max(1,Ie),Be=Be/Ie,Ie===0&&(Be=0),$[ve.id()]=Be,Be},ie=function(ve,ye){var se=oe(ve),Be=oe(ye),Ie=se-Be;return Ie===0?y1(ve.id(),ye.id()):Ie};r.depthSort!==void 0&&(ie=r.depthSort);for(var ne=b.length,xe=0;xe<ne;xe++)b[xe].sort(ie),z(xe);for(var Pe=[],Ce=0;Ce<B.length;Ce++)Pe.push(B[Ce]);var me=function(){for(var ve=0;ve<ne;ve++)z(ve)};Pe.length&&(b.unshift(Pe),ne=b.length,me());for(var fe=0,he=0;he<ne;he++)fe=Math.max(b[he].length,fe);var Ee={x:c.x1+c.w/2,y:c.y1+c.h/2},Re=n.reduce(function(ae,ve){return(function(ye){return{w:ae.w===-1?ye.w:(ae.w+ye.w)/2,h:ae.h===-1?ye.h:(ae.h+ye.h)/2}})(ve.boundingBox({includeLabels:r.nodeDimensionsIncludeLabels}))},{w:-1,h:-1}),I=Math.max(ne===1?0:l?(c.h-r.padding*2-Re.h)/(ne-1):(c.h-r.padding*2-Re.h)/(ne+1),Q),pe=b.reduce(function(ae,ve){return Math.max(ae,ve.length)},0),ge=function(ve){var ye=Oi(ve),se=ye.depth,Be=ye.index;if(r.circle){var Ie=Math.min(c.w/2/ne,c.h/2/ne);Ie=Math.max(Ie,Q);var Ae=Ie*se+Ie-(ne>0&&b[0].length<=3?Ie/2:0),ze=2*Math.PI/b[se].length*Be;return se===0&&b[0].length===1&&(Ae=1),{x:Ee.x+Ae*Math.cos(ze),y:Ee.y+Ae*Math.sin(ze)}}else{var j=b[se].length,k=Math.max(j===1?0:l?(c.w-r.padding*2-Re.w)/((r.grid?pe:j)-1):(c.w-r.padding*2-Re.w)/((r.grid?pe:j)+1),Q),R={x:Ee.x+(Be+1-(j+1)/2)*k,y:Ee.y+(se+1-(ne+1)/2)*I};return R}},Y={downward:0,leftward:90,upward:180,rightward:-90};Object.keys(Y).indexOf(r.direction)===-1&&It("Invalid direction '".concat(r.direction,"' specified for breadthfirst layout. Valid values are: ").concat(Object.keys(Y).join(", ")));var K=function(ve){return N_(ge(ve),c,Y[r.direction])};return t.nodes().layoutPositions(this,r,K),this};var wT={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function yw(r){this.options=tt({},wT,r)}yw.prototype.run=function(){var r=this.options,e=r,t=r.cy,n=e.eles,a=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,i=n.nodes().not(":parent");e.sort&&(i=i.sort(e.sort));for(var o=Rr(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()}),l={x:o.x1+o.w/2,y:o.y1+o.h/2},c=e.sweep===void 0?2*Math.PI-2*Math.PI/i.length:e.sweep,f=c/Math.max(1,i.length-1),d,h=0,p=0;p<i.length;p++){var g=i[p],m=g.layoutDimensions(e),w=m.w,x=m.h;h=Math.max(h,w,x)}if($e(e.radius)?d=e.radius:i.length<=1?d=0:d=Math.min(o.h,o.w)/2-h,i.length>1&&e.avoidOverlap){h*=1.75;var b=Math.cos(f)-Math.cos(0),E=Math.sin(f)-Math.sin(0),_=Math.sqrt(h*h/(b*b+E*E));d=Math.max(_,d)}var C=function(L,A){var z=e.startAngle+A*f*(a?1:-1),M=d*Math.cos(z),U=d*Math.sin(z),q={x:l.x+M,y:l.y+U};return q};return n.nodes().layoutPositions(this,e,C),this};var xT={fit:!0,padding:30,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function ww(r){this.options=tt({},xT,r)}ww.prototype.run=function(){for(var r=this.options,e=r,t=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,n=r.cy,a=e.eles,i=a.nodes().not(":parent"),o=Rr(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),l={x:o.x1+o.w/2,y:o.y1+o.h/2},c=[],f=0,d=0;d<i.length;d++){var h=i[d],p=void 0;p=e.concentric(h),c.push({value:p,node:h}),h._private.scratch.concentric=p}i.updateStyle();for(var g=0;g<i.length;g++){var m=i[g],w=m.layoutDimensions(e);f=Math.max(f,w.w,w.h)}c.sort(function(I,pe){return pe.value-I.value});for(var x=e.levelWidth(i),b=[[]],E=b[0],_=0;_<c.length;_++){var C=c[_];if(E.length>0){var B=Math.abs(E[0].value-C.value);B>=x&&(E=[],b.push(E))}E.push(C)}var L=f+e.minNodeSpacing;if(!e.avoidOverlap){var A=b.length>0&&b[0].length>1,z=Math.min(o.w,o.h)/2-L,M=z/(b.length+A?1:0);L=Math.min(L,M)}for(var U=0,q=0;q<b.length;q++){var D=b[q],F=e.sweep===void 0?2*Math.PI-2*Math.PI/D.length:e.sweep,T=D.dTheta=F/Math.max(1,D.length-1);if(D.length>1&&e.avoidOverlap){var G=Math.cos(T)-Math.cos(0),Q=Math.sin(T)-Math.sin(0),W=Math.sqrt(L*L/(G*G+Q*Q));U=Math.max(W,U)}D.r=U,U+=L}if(e.equidistant){for(var X=0,Z=0,te=0;te<b.length;te++){var N=b[te],$=N.r-Z;X=Math.max(X,$)}Z=0;for(var oe=0;oe<b.length;oe++){var ie=b[oe];oe===0&&(Z=ie.r),ie.r=Z,Z+=X}}for(var ne={},xe=0;xe<b.length;xe++)for(var Pe=b[xe],Ce=Pe.dTheta,me=Pe.r,fe=0;fe<Pe.length;fe++){var he=Pe[fe],Ee=e.startAngle+(t?1:-1)*Ce*fe,Re={x:l.x+me*Math.cos(Ee),y:l.y+me*Math.sin(Ee)};ne[he.node.id()]=Re}return a.nodes().layoutPositions(this,e,function(I){var pe=I.id();return ne[pe]}),this};var ph,bT={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,t){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function Xu(r){this.options=tt({},bT,r),this.options.layout=this;var e=this.options.eles.nodes(),t=this.options.eles.edges(),n=t.filter(function(a){var i=a.source().data("id"),o=a.target().data("id"),l=e.some(function(f){return f.data("id")===i}),c=e.some(function(f){return f.data("id")===o});return!l||!c});this.options.eles=this.options.eles.not(n)}Xu.prototype.run=function(){var r=this.options,e=r.cy,t=this;t.stopped=!1,(r.animate===!0||r.animate===!1)&&t.emit({type:"layoutstart",layout:t}),r.debug===!0?ph=!0:ph=!1;var n=ET(e,t,r);ph&&ST(n),r.randomize&&kT(n);var a=$n(),i=function(){CT(n,e,r),r.fit===!0&&e.fit(r.padding)},o=function(p){return!(t.stopped||p>=r.numIter||(TT(n,r),n.temperature=n.temperature*r.coolingFactor,n.temperature<r.minTemp))},l=function(){if(r.animate===!0||r.animate===!1)i(),t.one("layoutstop",r.stop),t.emit({type:"layoutstop",layout:t});else{var p=r.eles.nodes(),g=bw(n,r,p);p.layoutPositions(t,r,g)}},c=0,f=!0;if(r.animate===!0){var d=function(){for(var p=0;f&&p<r.refresh;)f=o(c),c++,p++;if(!f)b0(n,r),l();else{var g=$n();g-a>=r.animationThreshold&&i(),xu(d)}};d()}else{for(;f;)f=o(c),c++;b0(n,r),l()}return this};Xu.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this};Xu.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var ET=function(e,t,n){for(var a=n.eles.edges(),i=n.eles.nodes(),o=Rr(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),l={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:i.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:a.size(),temperature:n.initialTemp,clientWidth:o.w,clientHeight:o.h,boundingBox:o},c=n.eles.components(),f={},d=0;d<c.length;d++)for(var h=c[d],p=0;p<h.length;p++){var g=h[p];f[g.id()]=d}for(var d=0;d<l.nodeSize;d++){var m=i[d],w=m.layoutDimensions(n),x={};x.isLocked=m.locked(),x.id=m.data("id"),x.parentId=m.data("parent"),x.cmptId=f[m.id()],x.children=[],x.positionX=m.position("x"),x.positionY=m.position("y"),x.offsetX=0,x.offsetY=0,x.height=w.w,x.width=w.h,x.maxX=x.positionX+x.width/2,x.minX=x.positionX-x.width/2,x.maxY=x.positionY+x.height/2,x.minY=x.positionY-x.height/2,x.padLeft=parseFloat(m.style("padding")),x.padRight=parseFloat(m.style("padding")),x.padTop=parseFloat(m.style("padding")),x.padBottom=parseFloat(m.style("padding")),x.nodeRepulsion=Ft(n.nodeRepulsion)?n.nodeRepulsion(m):n.nodeRepulsion,l.layoutNodes.push(x),l.idToIndex[x.id]=d}for(var b=[],E=0,_=-1,C=[],d=0;d<l.nodeSize;d++){var m=l.layoutNodes[d],B=m.parentId;B!=null?l.layoutNodes[l.idToIndex[B]].children.push(m.id):(b[++_]=m.id,C.push(m.id))}for(l.graphSet.push(C);E<=_;){var L=b[E++],A=l.idToIndex[L],g=l.layoutNodes[A],z=g.children;if(z.length>0){l.graphSet.push(z);for(var d=0;d<z.length;d++)b[++_]=z[d]}}for(var d=0;d<l.graphSet.length;d++)for(var M=l.graphSet[d],p=0;p<M.length;p++){var U=l.idToIndex[M[p]];l.indexToGraph[U]=d}for(var d=0;d<l.edgeSize;d++){var q=a[d],D={};D.id=q.data("id"),D.sourceId=q.data("source"),D.targetId=q.data("target");var F=Ft(n.idealEdgeLength)?n.idealEdgeLength(q):n.idealEdgeLength,T=Ft(n.edgeElasticity)?n.edgeElasticity(q):n.edgeElasticity,G=l.idToIndex[D.sourceId],Q=l.idToIndex[D.targetId],W=l.indexToGraph[G],X=l.indexToGraph[Q];if(W!=X){for(var Z=_T(D.sourceId,D.targetId,l),te=l.graphSet[Z],N=0,x=l.layoutNodes[G];te.indexOf(x.id)===-1;)x=l.layoutNodes[l.idToIndex[x.parentId]],N++;for(x=l.layoutNodes[Q];te.indexOf(x.id)===-1;)x=l.layoutNodes[l.idToIndex[x.parentId]],N++;F*=N*n.nestingFactor}D.idealLength=F,D.elasticity=T,l.layoutEdges.push(D)}return l},_T=function(e,t,n){var a=xw(e,t,0,n);return 2>a.count?0:a.graph},xw=function(e,t,n,a){var i=a.graphSet[n];if(-1<i.indexOf(e)&&-1<i.indexOf(t))return{count:2,graph:n};for(var o=0,l=0;l<i.length;l++){var c=i[l],f=a.idToIndex[c],d=a.layoutNodes[f].children;if(d.length!==0){var h=a.indexToGraph[a.idToIndex[d[0]]],p=xw(e,t,h,a);if(p.count!==0)if(p.count===1){if(o++,o===2)break}else return p}}return{count:o,graph:n}},ST,kT=function(e,t){for(var n=e.clientWidth,a=e.clientHeight,i=0;i<e.nodeSize;i++){var o=e.layoutNodes[i];o.children.length===0&&!o.isLocked&&(o.positionX=Math.random()*n,o.positionY=Math.random()*a)}},bw=function(e,t,n){var a=e.boundingBox,i={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return t.boundingBox&&(n.forEach(function(o){var l=e.layoutNodes[e.idToIndex[o.data("id")]];i.x1=Math.min(i.x1,l.positionX),i.x2=Math.max(i.x2,l.positionX),i.y1=Math.min(i.y1,l.positionY),i.y2=Math.max(i.y2,l.positionY)}),i.w=i.x2-i.x1,i.h=i.y2-i.y1),function(o,l){var c=e.layoutNodes[e.idToIndex[o.data("id")]];if(t.boundingBox){var f=i.w===0?.5:(c.positionX-i.x1)/i.w,d=i.h===0?.5:(c.positionY-i.y1)/i.h;return{x:a.x1+f*a.w,y:a.y1+d*a.h}}else return{x:c.positionX,y:c.positionY}}},CT=function(e,t,n){var a=n.layout,i=n.eles.nodes(),o=bw(e,n,i);i.positions(o),e.ready!==!0&&(e.ready=!0,a.one("layoutready",n.ready),a.emit({type:"layoutready",layout:this}))},TT=function(e,t,n){PT(e,t),AT(e),IT(e,t),DT(e),NT(e)},PT=function(e,t){for(var n=0;n<e.graphSet.length;n++)for(var a=e.graphSet[n],i=a.length,o=0;o<i;o++)for(var l=e.layoutNodes[e.idToIndex[a[o]]],c=o+1;c<i;c++){var f=e.layoutNodes[e.idToIndex[a[c]]];RT(l,f,e,t)}},x0=function(e){return-1+2*e*Math.random()},RT=function(e,t,n,a){var i=e.cmptId,o=t.cmptId;if(!(i!==o&&!n.isCompound)){var l=t.positionX-e.positionX,c=t.positionY-e.positionY,f=1;l===0&&c===0&&(l=x0(f),c=x0(f));var d=BT(e,t,l,c);if(d>0)var h=a.nodeOverlap*d,p=Math.sqrt(l*l+c*c),g=h*l/p,m=h*c/p;else var w=Tu(e,l,c),x=Tu(t,-1*l,-1*c),b=x.x-w.x,E=x.y-w.y,_=b*b+E*E,p=Math.sqrt(_),h=(e.nodeRepulsion+t.nodeRepulsion)/_,g=h*b/p,m=h*E/p;e.isLocked||(e.offsetX-=g,e.offsetY-=m),t.isLocked||(t.offsetX+=g,t.offsetY+=m)}},BT=function(e,t,n,a){if(n>0)var i=e.maxX-t.minX;else var i=t.maxX-e.minX;if(a>0)var o=e.maxY-t.minY;else var o=t.maxY-e.minY;return i>=0&&o>=0?Math.sqrt(i*i+o*o):0},Tu=function(e,t,n){var a=e.positionX,i=e.positionY,o=e.height||1,l=e.width||1,c=n/t,f=o/l,d={};return t===0&&0<n||t===0&&0>n?(d.x=a,d.y=i+o/2,d):0<t&&-1*f<=c&&c<=f?(d.x=a+l/2,d.y=i+l*n/2/t,d):0>t&&-1*f<=c&&c<=f?(d.x=a-l/2,d.y=i-l*n/2/t,d):0<n&&(c<=-1*f||c>=f)?(d.x=a+o*t/2/n,d.y=i+o/2,d):(0>n&&(c<=-1*f||c>=f)&&(d.x=a-o*t/2/n,d.y=i-o/2),d)},AT=function(e,t){for(var n=0;n<e.edgeSize;n++){var a=e.layoutEdges[n],i=e.idToIndex[a.sourceId],o=e.layoutNodes[i],l=e.idToIndex[a.targetId],c=e.layoutNodes[l],f=c.positionX-o.positionX,d=c.positionY-o.positionY;if(!(f===0&&d===0)){var h=Tu(o,f,d),p=Tu(c,-1*f,-1*d),g=p.x-h.x,m=p.y-h.y,w=Math.sqrt(g*g+m*m),x=Math.pow(a.idealLength-w,2)/a.elasticity;if(w!==0)var b=x*g/w,E=x*m/w;else var b=0,E=0;o.isLocked||(o.offsetX+=b,o.offsetY+=E),c.isLocked||(c.offsetX-=b,c.offsetY-=E)}}},IT=function(e,t){if(t.gravity!==0)for(var n=1,a=0;a<e.graphSet.length;a++){var i=e.graphSet[a],o=i.length;if(a===0)var l=e.clientHeight/2,c=e.clientWidth/2;else var f=e.layoutNodes[e.idToIndex[i[0]]],d=e.layoutNodes[e.idToIndex[f.parentId]],l=d.positionX,c=d.positionY;for(var h=0;h<o;h++){var p=e.layoutNodes[e.idToIndex[i[h]]];if(!p.isLocked){var g=l-p.positionX,m=c-p.positionY,w=Math.sqrt(g*g+m*m);if(w>n){var x=t.gravity*g/w,b=t.gravity*m/w;p.offsetX+=x,p.offsetY+=b}}}}},DT=function(e,t){var n=[],a=0,i=-1;for(n.push.apply(n,e.graphSet[0]),i+=e.graphSet[0].length;a<=i;){var o=n[a++],l=e.idToIndex[o],c=e.layoutNodes[l],f=c.children;if(0<f.length&&!c.isLocked){for(var d=c.offsetX,h=c.offsetY,p=0;p<f.length;p++){var g=e.layoutNodes[e.idToIndex[f[p]]];g.offsetX+=d,g.offsetY+=h,n[++i]=f[p]}c.offsetX=0,c.offsetY=0}}},NT=function(e,t){for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];0<a.children.length&&(a.maxX=void 0,a.minX=void 0,a.maxY=void 0,a.minY=void 0)}for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];if(!(0<a.children.length||a.isLocked)){var i=LT(a.offsetX,a.offsetY,e.temperature);a.positionX+=i.x,a.positionY+=i.y,a.offsetX=0,a.offsetY=0,a.minX=a.positionX-a.width,a.maxX=a.positionX+a.width,a.minY=a.positionY-a.height,a.maxY=a.positionY+a.height,Ew(a,e)}}for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];0<a.children.length&&!a.isLocked&&(a.positionX=(a.maxX+a.minX)/2,a.positionY=(a.maxY+a.minY)/2,a.width=a.maxX-a.minX,a.height=a.maxY-a.minY)}},LT=function(e,t,n){var a=Math.sqrt(e*e+t*t);if(a>n)var i={x:n*e/a,y:n*t/a};else var i={x:e,y:t};return i},Ew=function(e,t){var n=e.parentId;if(n!=null){var a=t.layoutNodes[t.idToIndex[n]],i=!1;if((a.maxX==null||e.maxX+a.padRight>a.maxX)&&(a.maxX=e.maxX+a.padRight,i=!0),(a.minX==null||e.minX-a.padLeft<a.minX)&&(a.minX=e.minX-a.padLeft,i=!0),(a.maxY==null||e.maxY+a.padBottom>a.maxY)&&(a.maxY=e.maxY+a.padBottom,i=!0),(a.minY==null||e.minY-a.padTop<a.minY)&&(a.minY=e.minY-a.padTop,i=!0),i)return Ew(a,t)}},b0=function(e,t){for(var n=e.layoutNodes,a=[],i=0;i<n.length;i++){var o=n[i],l=o.cmptId,c=a[l]=a[l]||[];c.push(o)}for(var f=0,i=0;i<a.length;i++){var d=a[i];if(d){d.x1=1/0,d.x2=-1/0,d.y1=1/0,d.y2=-1/0;for(var h=0;h<d.length;h++){var p=d[h];d.x1=Math.min(d.x1,p.positionX-p.width/2),d.x2=Math.max(d.x2,p.positionX+p.width/2),d.y1=Math.min(d.y1,p.positionY-p.height/2),d.y2=Math.max(d.y2,p.positionY+p.height/2)}d.w=d.x2-d.x1,d.h=d.y2-d.y1,f+=d.w*d.h}}a.sort(function(E,_){return _.w*_.h-E.w*E.h});for(var g=0,m=0,w=0,x=0,b=Math.sqrt(f)*e.clientWidth/e.clientHeight,i=0;i<a.length;i++){var d=a[i];if(d){for(var h=0;h<d.length;h++){var p=d[h];p.isLocked||(p.positionX+=g-d.x1,p.positionY+=m-d.y1)}g+=d.w+t.componentSpacing,w+=d.w+t.componentSpacing,x=Math.max(x,d.h),w>b&&(m+=x+t.componentSpacing,g=0,w=0,x=0)}}},OT={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function _w(r){this.options=tt({},OT,r)}_w.prototype.run=function(){var r=this.options,e=r,t=r.cy,n=e.eles,a=n.nodes().not(":parent");e.sort&&(a=a.sort(e.sort));var i=Rr(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()});if(i.h===0||i.w===0)n.nodes().layoutPositions(this,e,function(oe){return{x:i.x1,y:i.y1}});else{var o=a.size(),l=Math.sqrt(o*i.h/i.w),c=Math.round(l),f=Math.round(i.w/i.h*l),d=function(ie){if(ie==null)return Math.min(c,f);var ne=Math.min(c,f);ne==c?c=ie:f=ie},h=function(ie){if(ie==null)return Math.max(c,f);var ne=Math.max(c,f);ne==c?c=ie:f=ie},p=e.rows,g=e.cols!=null?e.cols:e.columns;if(p!=null&&g!=null)c=p,f=g;else if(p!=null&&g==null)c=p,f=Math.ceil(o/c);else if(p==null&&g!=null)f=g,c=Math.ceil(o/f);else if(f*c>o){var m=d(),w=h();(m-1)*w>=o?d(m-1):(w-1)*m>=o&&h(w-1)}else for(;f*c<o;){var x=d(),b=h();(b+1)*x>=o?h(b+1):d(x+1)}var E=i.w/f,_=i.h/c;if(e.condense&&(E=0,_=0),e.avoidOverlap)for(var C=0;C<a.length;C++){var B=a[C],L=B._private.position;(L.x==null||L.y==null)&&(L.x=0,L.y=0);var A=B.layoutDimensions(e),z=e.avoidOverlapPadding,M=A.w+z,U=A.h+z;E=Math.max(E,M),_=Math.max(_,U)}for(var q={},D=function(ie,ne){return!!q["c-"+ie+"-"+ne]},F=function(ie,ne){q["c-"+ie+"-"+ne]=!0},T=0,G=0,Q=function(){G++,G>=f&&(G=0,T++)},W={},X=0;X<a.length;X++){var Z=a[X],te=e.position(Z);if(te&&(te.row!==void 0||te.col!==void 0)){var N={row:te.row,col:te.col};if(N.col===void 0)for(N.col=0;D(N.row,N.col);)N.col++;else if(N.row===void 0)for(N.row=0;D(N.row,N.col);)N.row++;W[Z.id()]=N,F(N.row,N.col)}}var $=function(ie,ne){var xe,Pe;if(ie.locked()||ie.isParent())return!1;var Ce=W[ie.id()];if(Ce)xe=Ce.col*E+E/2+i.x1,Pe=Ce.row*_+_/2+i.y1;else{for(;D(T,G);)Q();xe=G*E+E/2+i.x1,Pe=T*_+_/2+i.y1,F(T,G),Q()}return{x:xe,y:Pe}};a.layoutPositions(this,e,$)}return this};var MT={ready:function(){},stop:function(){}};function hv(r){this.options=tt({},MT,r)}hv.prototype.run=function(){var r=this.options,e=r.eles,t=this;return r.cy,t.emit("layoutstart"),e.nodes().positions(function(){return{x:0,y:0}}),t.one("layoutready",r.ready),t.emit("layoutready"),t.one("layoutstop",r.stop),t.emit("layoutstop"),this};hv.prototype.stop=function(){return this};var zT={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function Sw(r){this.options=tt({},zT,r)}Sw.prototype.run=function(){var r=this.options,e=r.eles,t=e.nodes(),n=Ft(r.positions);function a(i){if(r.positions==null)return sS(i.position());if(n)return r.positions(i);var o=r.positions[i._private.data.id];return o??null}return t.layoutPositions(this,r,function(i,o){var l=a(i);return i.locked()||l==null?!1:l}),this};var FT={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function kw(r){this.options=tt({},FT,r)}kw.prototype.run=function(){var r=this.options,e=r.cy,t=r.eles,n=Rr(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),a=function(o,l){return{x:n.x1+Math.round(Math.random()*n.w),y:n.y1+Math.round(Math.random()*n.h)}};return t.nodes().layoutPositions(this,r,a),this};var $T=[{name:"breadthfirst",impl:mw},{name:"circle",impl:yw},{name:"concentric",impl:ww},{name:"cose",impl:Xu},{name:"grid",impl:_w},{name:"null",impl:hv},{name:"preset",impl:Sw},{name:"random",impl:kw}];function Cw(r){this.options=r,this.notifications=0}var E0=function(){},_0=function(){throw new Error("A headless instance can not render images")};Cw.prototype={recalculateRenderedStyle:E0,notify:function(){this.notifications++},init:E0,isHeadless:function(){return!0},png:_0,jpg:_0};var vv={};vv.arrowShapeWidth=.3;vv.registerArrowShapes=function(){var r=this.arrowShapes={},e=this,t=function(f,d,h,p,g,m,w){var x=g.x-h/2-w,b=g.x+h/2+w,E=g.y-h/2-w,_=g.y+h/2+w,C=x<=f&&f<=b&&E<=d&&d<=_;return C},n=function(f,d,h,p,g){var m=f*Math.cos(p)-d*Math.sin(p),w=f*Math.sin(p)+d*Math.cos(p),x=m*h,b=w*h,E=x+g.x,_=b+g.y;return{x:E,y:_}},a=function(f,d,h,p){for(var g=[],m=0;m<f.length;m+=2){var w=f[m],x=f[m+1];g.push(n(w,x,d,h,p))}return g},i=function(f){for(var d=[],h=0;h<f.length;h++){var p=f[h];d.push(p.x,p.y)}return d},o=function(f){return f.pstyle("width").pfValue*f.pstyle("arrow-scale").pfValue*2},l=function(f,d){Qe(d)&&(d=r[d]),r[f]=tt({name:f,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(p,g,m,w,x,b){var E=i(a(this.points,m+2*b,w,x)),_=zr(p,g,E);return _},roughCollide:t,draw:function(p,g,m,w){var x=a(this.points,g,m,w);e.arrowShapeImpl("polygon")(p,x)},spacing:function(p){return 0},gap:o},d)};l("none",{collide:bu,roughCollide:bu,draw:Jh,spacing:Mm,gap:Mm}),l("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),l("arrow","triangle"),l("triangle-backcurve",{points:r.triangle.points,controlPoint:[0,-.15],roughCollide:t,draw:function(f,d,h,p,g){var m=a(this.points,d,h,p),w=this.controlPoint,x=n(w[0],w[1],d,h,p);e.arrowShapeImpl(this.name)(f,m,x)},gap:function(f){return o(f)*.8}}),l("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(f,d,h,p,g,m,w){var x=i(a(this.points,h+2*w,p,g)),b=i(a(this.pointsTee,h+2*w,p,g)),E=zr(f,d,x)||zr(f,d,b);return E},draw:function(f,d,h,p,g){var m=a(this.points,d,h,p),w=a(this.pointsTee,d,h,p);e.arrowShapeImpl(this.name)(f,m,w)}}),l("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(f,d,h,p,g,m,w){var x=g,b=Math.pow(x.x-f,2)+Math.pow(x.y-d,2)<=Math.pow((h+2*w)*this.radius,2),E=i(a(this.points,h+2*w,p,g));return zr(f,d,E)||b},draw:function(f,d,h,p,g){var m=a(this.pointsTr,d,h,p);e.arrowShapeImpl(this.name)(f,m,p.x,p.y,this.radius*d)},spacing:function(f){return e.getArrowWidth(f.pstyle("width").pfValue,f.pstyle("arrow-scale").value)*this.radius}}),l("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(f,d){var h=this.baseCrossLinePts.slice(),p=d/f,g=3,m=5;return h[g]=h[g]-p,h[m]=h[m]-p,h},collide:function(f,d,h,p,g,m,w){var x=i(a(this.points,h+2*w,p,g)),b=i(a(this.crossLinePts(h,m),h+2*w,p,g)),E=zr(f,d,x)||zr(f,d,b);return E},draw:function(f,d,h,p,g){var m=a(this.points,d,h,p),w=a(this.crossLinePts(d,g),d,h,p);e.arrowShapeImpl(this.name)(f,m,w)}}),l("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(f){return o(f)*.525}}),l("circle",{radius:.15,collide:function(f,d,h,p,g,m,w){var x=g,b=Math.pow(x.x-f,2)+Math.pow(x.y-d,2)<=Math.pow((h+2*w)*this.radius,2);return b},draw:function(f,d,h,p,g){e.arrowShapeImpl(this.name)(f,p.x,p.y,this.radius*d)},spacing:function(f){return e.getArrowWidth(f.pstyle("width").pfValue,f.pstyle("arrow-scale").value)*this.radius}}),l("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(f){return 1},gap:function(f){return 1}}),l("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),l("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(f){return f.pstyle("width").pfValue*f.pstyle("arrow-scale").value}}),l("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(f){return .95*f.pstyle("width").pfValue*f.pstyle("arrow-scale").value}})};var ai={};ai.projectIntoViewport=function(r,e){var t=this.cy,n=this.findContainerClientCoords(),a=n[0],i=n[1],o=n[4],l=t.pan(),c=t.zoom(),f=((r-a)/o-l.x)/c,d=((e-i)/o-l.y)/c;return[f,d]};ai.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var r=this.container,e=r.getBoundingClientRect(),t=this.cy.window().getComputedStyle(r),n=function(b){return parseFloat(t.getPropertyValue(b))},a={left:n("padding-left"),right:n("padding-right"),top:n("padding-top"),bottom:n("padding-bottom")},i={left:n("border-left-width"),right:n("border-right-width"),top:n("border-top-width"),bottom:n("border-bottom-width")},o=r.clientWidth,l=r.clientHeight,c=a.left+a.right,f=a.top+a.bottom,d=i.left+i.right,h=e.width/(o+d),p=o-c,g=l-f,m=e.left+a.left+i.left,w=e.top+a.top+i.top;return this.containerBB=[m,w,p,g,h]};ai.invalidateContainerClientCoordsCache=function(){this.containerBB=null};ai.findNearestElement=function(r,e,t,n){return this.findNearestElements(r,e,t,n)[0]};ai.findNearestElements=function(r,e,t,n){var a=this,i=this,o=i.getCachedZSortedEles(),l=[],c=i.cy.zoom(),f=i.cy.hasCompoundNodes(),d=(n?24:8)/c,h=(n?8:2)/c,p=(n?8:2)/c,g=1/0,m,w;t&&(o=o.interactive);function x(A,z){if(A.isNode()){if(w)return;w=A,l.push(A)}if(A.isEdge()&&(z==null||z<g))if(m){if(m.pstyle("z-compound-depth").value===A.pstyle("z-compound-depth").value&&m.pstyle("z-compound-depth").value===A.pstyle("z-compound-depth").value){for(var M=0;M<l.length;M++)if(l[M].isEdge()){l[M]=A,m=A,g=z??g;break}}}else l.push(A),m=A,g=z??g}function b(A){var z=A.outerWidth()+2*h,M=A.outerHeight()+2*h,U=z/2,q=M/2,D=A.position(),F=A.pstyle("corner-radius").value==="auto"?"auto":A.pstyle("corner-radius").pfValue,T=A._private.rscratch;if(D.x-U<=r&&r<=D.x+U&&D.y-q<=e&&e<=D.y+q){var G=i.nodeShapes[a.getNodeShape(A)];if(G.checkPoint(r,e,0,z,M,D.x,D.y,F,T))return x(A,0),!0}}function E(A){var z=A._private,M=z.rscratch,U=A.pstyle("width").pfValue,q=A.pstyle("arrow-scale").value,D=U/2+d,F=D*D,T=D*2,X=z.source,Z=z.target,G;if(M.edgeType==="segments"||M.edgeType==="straight"||M.edgeType==="haystack"){for(var Q=M.allpts,W=0;W+3<Q.length;W+=2)if(xS(r,e,Q[W],Q[W+1],Q[W+2],Q[W+3],T)&&F>(G=kS(r,e,Q[W],Q[W+1],Q[W+2],Q[W+3])))return x(A,G),!0}else if(M.edgeType==="bezier"||M.edgeType==="multibezier"||M.edgeType==="self"||M.edgeType==="compound"){for(var Q=M.allpts,W=0;W+5<M.allpts.length;W+=4)if(bS(r,e,Q[W],Q[W+1],Q[W+2],Q[W+3],Q[W+4],Q[W+5],T)&&F>(G=SS(r,e,Q[W],Q[W+1],Q[W+2],Q[W+3],Q[W+4],Q[W+5])))return x(A,G),!0}for(var X=X||z.source,Z=Z||z.target,te=a.getArrowWidth(U,q),N=[{name:"source",x:M.arrowStartX,y:M.arrowStartY,angle:M.srcArrowAngle},{name:"target",x:M.arrowEndX,y:M.arrowEndY,angle:M.tgtArrowAngle},{name:"mid-source",x:M.midX,y:M.midY,angle:M.midsrcArrowAngle},{name:"mid-target",x:M.midX,y:M.midY,angle:M.midtgtArrowAngle}],W=0;W<N.length;W++){var $=N[W],oe=i.arrowShapes[A.pstyle($.name+"-arrow-shape").value],ie=A.pstyle("width").pfValue;if(oe.roughCollide(r,e,te,$.angle,{x:$.x,y:$.y},ie,d)&&oe.collide(r,e,te,$.angle,{x:$.x,y:$.y},ie,d))return x(A),!0}f&&l.length>0&&(b(X),b(Z))}function _(A,z,M){return Mr(A,z,M)}function C(A,z){var M=A._private,U=p,q;z?q=z+"-":q="",A.boundingBox();var D=M.labelBounds[z||"main"],F=A.pstyle(q+"label").value,T=A.pstyle("text-events").strValue==="yes";if(!(!T||!F)){var G=_(M.rscratch,"labelX",z),Q=_(M.rscratch,"labelY",z),W=_(M.rscratch,"labelAngle",z),X=A.pstyle(q+"text-margin-x").pfValue,Z=A.pstyle(q+"text-margin-y").pfValue,te=D.x1-U-X,N=D.x2+U-X,$=D.y1-U-Z,oe=D.y2+U-Z;if(W){var ie=Math.cos(W),ne=Math.sin(W),xe=function(Re,I){return Re=Re-G,I=I-Q,{x:Re*ie-I*ne+G,y:Re*ne+I*ie+Q}},Pe=xe(te,$),Ce=xe(te,oe),me=xe(N,$),fe=xe(N,oe),he=[Pe.x+X,Pe.y+Z,me.x+X,me.y+Z,fe.x+X,fe.y+Z,Ce.x+X,Ce.y+Z];if(zr(r,e,he))return x(A),!0}else if(pa(D,r,e))return x(A),!0}}for(var B=o.length-1;B>=0;B--){var L=o[B];L.isNode()?b(L)||C(L):E(L)||C(L)||C(L,"source")||C(L,"target")}return l};ai.getAllInBox=function(r,e,t,n){var a=this.getCachedZSortedEles().interactive,i=this.cy.zoom(),o=2/i,l=[],c=Math.min(r,t),f=Math.max(r,t),d=Math.min(e,n),h=Math.max(e,n);r=c,t=f,e=d,n=h;var p=Rr({x1:r,y1:e,x2:t,y2:n}),g=[{x:p.x1,y:p.y1},{x:p.x2,y:p.y1},{x:p.x2,y:p.y2},{x:p.x1,y:p.y2}],m=[[g[0],g[1]],[g[1],g[2]],[g[2],g[3]],[g[3],g[0]]];function w(Re,I,pe){return Mr(Re,I,pe)}function x(Re,I){var pe=Re._private,ge=o,Y="";Re.boundingBox();var K=pe.labelBounds.main;if(!K)return null;var ae=w(pe.rscratch,"labelX",I),ve=w(pe.rscratch,"labelY",I),ye=w(pe.rscratch,"labelAngle",I),se=Re.pstyle(Y+"text-margin-x").pfValue,Be=Re.pstyle(Y+"text-margin-y").pfValue,Ie=K.x1-ge-se,Ae=K.x2+ge-se,ze=K.y1-ge-Be,j=K.y2+ge-Be;if(ye){var k=Math.cos(ye),R=Math.sin(ye),H=function(J,O){return J=J-ae,O=O-ve,{x:J*k-O*R+ae,y:J*R+O*k+ve}};return[H(Ie,ze),H(Ae,ze),H(Ae,j),H(Ie,j)]}else return[{x:Ie,y:ze},{x:Ae,y:ze},{x:Ae,y:j},{x:Ie,y:j}]}function b(Re,I,pe,ge){function Y(K,ae,ve){return(ve.y-K.y)*(ae.x-K.x)>(ae.y-K.y)*(ve.x-K.x)}return Y(Re,pe,ge)!==Y(I,pe,ge)&&Y(Re,I,pe)!==Y(Re,I,ge)}for(var E=0;E<a.length;E++){var _=a[E];if(_.isNode()){var C=_,B=C.pstyle("text-events").strValue==="yes",L=C.pstyle("box-selection").strValue,A=C.pstyle("box-select-labels").strValue==="yes";if(L==="none")continue;var z=(L==="overlap"||A)&&B,M=C.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:z});if(L==="contain"){var U=!1;if(A&&B){var q=x(C);q&&hd(q,g)&&(l.push(C),U=!0)}!U&&D1(p,M)&&l.push(C)}else if(L==="overlap"&&nv(p,M)){var D=C.boundingBox({includeNodes:!0,includeEdges:!0,includeLabels:!1,includeMainLabels:!1,includeSourceLabels:!1,includeTargetLabels:!1}),F=[{x:D.x1,y:D.y1},{x:D.x2,y:D.y1},{x:D.x2,y:D.y2},{x:D.x1,y:D.y2}];if(hd(F,g))l.push(C);else{var T=x(C);T&&hd(T,g)&&l.push(C)}}}else{var G=_,Q=G._private,W=Q.rscratch,X=G.pstyle("box-selection").strValue;if(X==="none")continue;if(X==="contain"){if(W.startX!=null&&W.startY!=null&&!pa(p,W.startX,W.startY)||W.endX!=null&&W.endY!=null&&!pa(p,W.endX,W.endY))continue;if(W.edgeType==="bezier"||W.edgeType==="multibezier"||W.edgeType==="self"||W.edgeType==="compound"||W.edgeType==="segments"||W.edgeType==="haystack"){for(var Z=Q.rstyle.bezierPts||Q.rstyle.linePts||Q.rstyle.haystackPts,te=!0,N=0;N<Z.length;N++)if(!jm(p,Z[N])){te=!1;break}te&&l.push(G)}else W.edgeType==="straight"&&l.push(G)}else if(X==="overlap"){var $=!1;if(W.startX!=null&&W.startY!=null&&W.endX!=null&&W.endY!=null&&(pa(p,W.startX,W.startY)||pa(p,W.endX,W.endY)))l.push(G),$=!0;else if(!$&&W.edgeType==="haystack"){for(var oe=Q.rstyle.haystackPts,ie=0;ie<oe.length;ie++)if(jm(p,oe[ie])){l.push(G),$=!0;break}}if(!$){var ne=Q.rstyle.bezierPts||Q.rstyle.linePts||Q.rstyle.haystackPts;if((!ne||ne.length<2)&&W.edgeType==="straight"&&W.startX!=null&&W.startY!=null&&W.endX!=null&&W.endY!=null&&(ne=[{x:W.startX,y:W.startY},{x:W.endX,y:W.endY}]),!ne||ne.length<2)continue;for(var xe=0;xe<ne.length-1;xe++){for(var Pe=ne[xe],Ce=ne[xe+1],me=0;me<m.length;me++){var fe=Ht(m[me],2),he=fe[0],Ee=fe[1];if(b(Pe,Ce,he,Ee)){l.push(G),$=!0;break}}if($)break}}}}}return l};var Pu={};Pu.calculateArrowAngles=function(r){var e=r._private.rscratch,t=e.edgeType==="haystack",n=e.edgeType==="bezier",a=e.edgeType==="multibezier",i=e.edgeType==="segments",o=e.edgeType==="compound",l=e.edgeType==="self",c,f,d,h,p,g,b,E;if(t?(d=e.haystackPts[0],h=e.haystackPts[1],p=e.haystackPts[2],g=e.haystackPts[3]):(d=e.arrowStartX,h=e.arrowStartY,p=e.arrowEndX,g=e.arrowEndY),b=e.midX,E=e.midY,i)c=d-e.segpts[0],f=h-e.segpts[1];else if(a||o||l||n){var m=e.allpts,w=ar(m[0],m[2],m[4],.1),x=ar(m[1],m[3],m[5],.1);c=d-w,f=h-x}else c=d-b,f=h-E;e.srcArrowAngle=Kl(c,f);var b=e.midX,E=e.midY;if(t&&(b=(d+p)/2,E=(h+g)/2),c=p-d,f=g-h,i){var m=e.allpts;if(m.length/2%2===0){var _=m.length/2,C=_-2;c=m[_]-m[C],f=m[_+1]-m[C+1]}else if(e.isRound)c=e.midVector[1],f=-e.midVector[0];else{var _=m.length/2-1,C=_-2;c=m[_]-m[C],f=m[_+1]-m[C+1]}}else if(a||o||l){var m=e.allpts,B=e.ctrlpts,L,A,z,M;if(B.length/2%2===0){var U=m.length/2-1,q=U+2,D=q+2;L=ar(m[U],m[q],m[D],0),A=ar(m[U+1],m[q+1],m[D+1],0),z=ar(m[U],m[q],m[D],1e-4),M=ar(m[U+1],m[q+1],m[D+1],1e-4)}else{var q=m.length/2-1,U=q-2,D=q+2;L=ar(m[U],m[q],m[D],.4999),A=ar(m[U+1],m[q+1],m[D+1],.4999),z=ar(m[U],m[q],m[D],.5),M=ar(m[U+1],m[q+1],m[D+1],.5)}c=z-L,f=M-A}if(e.midtgtArrowAngle=Kl(c,f),e.midDispX=c,e.midDispY=f,c*=-1,f*=-1,i){var m=e.allpts;if(m.length/2%2!==0){if(!e.isRound){var _=m.length/2-1,F=_+2;c=-(m[F]-m[_]),f=-(m[F+1]-m[_+1])}}}if(e.midsrcArrowAngle=Kl(c,f),i)c=p-e.segpts[e.segpts.length-2],f=g-e.segpts[e.segpts.length-1];else if(a||o||l||n){var m=e.allpts,T=m.length,w=ar(m[T-6],m[T-4],m[T-2],.9),x=ar(m[T-5],m[T-3],m[T-1],.9);c=p-w,f=g-x}else c=p-b,f=g-E;e.tgtArrowAngle=Kl(c,f)};Pu.getArrowWidth=Pu.getArrowHeight=function(r,e){var t=this.arrowWidthCache=this.arrowWidthCache||{},n=t[r+", "+e];return n||(n=Math.max(Math.pow(r*13.37,.9),29)*e,t[r+", "+e]=n,n)};var Oh,Mh,_n={},en={},S0,k0,Za,pu,Mn,Wa,Ka,bn,Mi,ru,Tw,Pw,zh,Fh,C0,T0=function(e,t,n){n.x=t.x-e.x,n.y=t.y-e.y,n.len=Math.sqrt(n.x*n.x+n.y*n.y),n.nx=n.x/n.len,n.ny=n.y/n.len,n.ang=Math.atan2(n.ny,n.nx)},UT=function(e,t){t.x=e.x*-1,t.y=e.y*-1,t.nx=e.nx*-1,t.ny=e.ny*-1,t.ang=e.ang>0?-(Math.PI-e.ang):Math.PI+e.ang},jT=function(e,t,n,a,i){if(e!==C0?T0(t,e,_n):UT(en,_n),T0(t,n,en),S0=_n.nx*en.ny-_n.ny*en.nx,k0=_n.nx*en.nx-_n.ny*-en.ny,Mn=Math.asin(Math.max(-1,Math.min(1,S0))),Math.abs(Mn)<1e-6){Oh=t.x,Mh=t.y,Ka=Mi=0;return}Za=1,pu=!1,k0<0?Mn<0?Mn=Math.PI+Mn:(Mn=Math.PI-Mn,Za=-1,pu=!0):Mn>0&&(Za=-1,pu=!0),t.radius!==void 0?Mi=t.radius:Mi=a,Wa=Mn/2,ru=Math.min(_n.len/2,en.len/2),i?(bn=Math.abs(Math.cos(Wa)*Mi/Math.sin(Wa)),bn>ru?(bn=ru,Ka=Math.abs(bn*Math.sin(Wa)/Math.cos(Wa))):Ka=Mi):(bn=Math.min(ru,Mi),Ka=Math.abs(bn*Math.sin(Wa)/Math.cos(Wa))),zh=t.x+en.nx*bn,Fh=t.y+en.ny*bn,Oh=zh-en.ny*Ka*Za,Mh=Fh+en.nx*Ka*Za,Tw=t.x+_n.nx*bn,Pw=t.y+_n.ny*bn,C0=t};function Rw(r,e){e.radius===0?r.lineTo(e.cx,e.cy):r.arc(e.cx,e.cy,e.radius,e.startAngle,e.endAngle,e.counterClockwise)}function pv(r,e,t,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;return n===0||e.radius===0?{cx:e.x,cy:e.y,radius:0,startX:e.x,startY:e.y,stopX:e.x,stopY:e.y,startAngle:void 0,endAngle:void 0,counterClockwise:void 0}:(jT(r,e,t,n,a),{cx:Oh,cy:Mh,radius:Ka,startX:Tw,startY:Pw,stopX:zh,stopY:Fh,startAngle:_n.ang+Math.PI/2*Za,endAngle:en.ang-Math.PI/2*Za,counterClockwise:pu})}var xo=.01,VT=Math.sqrt(2*xo),Er={};Er.findMidptPtsEtc=function(r,e){var t=e.posPts,n=e.intersectionPts,a=e.vectorNormInverse,i,o=r.pstyle("source-endpoint"),l=r.pstyle("target-endpoint"),c=o.units!=null&&l.units!=null,f=function(B,L,A,z){var M=z-L,U=A-B,q=Math.sqrt(U*U+M*M);return{x:-M/q,y:U/q}},d=r.pstyle("edge-distances").value;switch(d){case"node-position":i=t;break;case"intersection":i=n;break;case"endpoints":{if(c){var h=this.manualEndptToPx(r.source()[0],o),p=Ht(h,2),g=p[0],m=p[1],w=this.manualEndptToPx(r.target()[0],l),x=Ht(w,2),b=x[0],E=x[1],_={x1:g,y1:m,x2:b,y2:E};a=f(g,m,b,E),i=_}else gt("Edge ".concat(r.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),i=n;break}}return{midptPts:i,vectorNormInverse:a}};Er.findHaystackPoints=function(r){for(var e=0;e<r.length;e++){var t=r[e],n=t._private,a=n.rscratch;if(!a.haystack){var i=Math.random()*2*Math.PI;a.source={x:Math.cos(i),y:Math.sin(i)},i=Math.random()*2*Math.PI,a.target={x:Math.cos(i),y:Math.sin(i)}}var o=n.source,l=n.target,c=o.position(),f=l.position(),d=o.width(),h=l.width(),p=o.height(),g=l.height(),m=t.pstyle("haystack-radius").value,w=m/2;a.haystackPts=a.allpts=[a.source.x*d*w+c.x,a.source.y*p*w+c.y,a.target.x*h*w+f.x,a.target.y*g*w+f.y],a.midX=(a.allpts[0]+a.allpts[2])/2,a.midY=(a.allpts[1]+a.allpts[3])/2,a.edgeType="haystack",a.haystack=!0,this.storeEdgeProjections(t),this.calculateArrowAngles(t),this.recalculateEdgeLabelProjections(t),this.calculateLabelAngles(t)}};Er.findSegmentsPoints=function(r,e){var t=r._private.rscratch,n=r.pstyle("segment-weights"),a=r.pstyle("segment-distances"),i=r.pstyle("segment-radii"),o=r.pstyle("radius-type"),l=Math.min(n.pfValue.length,a.pfValue.length),c=i.pfValue[i.pfValue.length-1],f=o.pfValue[o.pfValue.length-1];t.edgeType="segments",t.segpts=[],t.radii=[],t.isArcRadius=[];for(var d=0;d<l;d++){var h=n.pfValue[d],p=a.pfValue[d],g=1-h,m=h,w=this.findMidptPtsEtc(r,e),x=w.midptPts,b=w.vectorNormInverse,E={x:x.x1*g+x.x2*m,y:x.y1*g+x.y2*m};t.segpts.push(E.x+b.x*p,E.y+b.y*p),t.radii.push(i.pfValue[d]!==void 0?i.pfValue[d]:c),t.isArcRadius.push((o.pfValue[d]!==void 0?o.pfValue[d]:f)==="arc-radius")}};Er.findLoopPoints=function(r,e,t,n){var a=r._private.rscratch,i=e.dirCounts,o=e.srcPos,l=r.pstyle("control-point-distances"),c=l?l.pfValue[0]:void 0,f=r.pstyle("loop-direction").pfValue,d=r.pstyle("loop-sweep").pfValue,h=r.pstyle("control-point-step-size").pfValue;a.edgeType="self";var p=t,g=h;n&&(p=0,g=c);var m=f-Math.PI/2,w=m-d/2,x=m+d/2,b=f+"_"+d;p=i[b]===void 0?i[b]=0:++i[b],a.ctrlpts=[o.x+Math.cos(w)*1.4*g*(p/3+1),o.y+Math.sin(w)*1.4*g*(p/3+1),o.x+Math.cos(x)*1.4*g*(p/3+1),o.y+Math.sin(x)*1.4*g*(p/3+1)]};Er.findCompoundLoopPoints=function(r,e,t,n){var a=r._private.rscratch;a.edgeType="compound";var i=e.srcPos,o=e.tgtPos,l=e.srcW,c=e.srcH,f=e.tgtW,d=e.tgtH,h=r.pstyle("control-point-step-size").pfValue,p=r.pstyle("control-point-distances"),g=p?p.pfValue[0]:void 0,m=t,w=h;n&&(m=0,w=g);var x=50,b={x:i.x-l/2,y:i.y-c/2},E={x:o.x-f/2,y:o.y-d/2},_={x:Math.min(b.x,E.x),y:Math.min(b.y,E.y)},C=.5,B=Math.max(C,Math.log(l*xo)),L=Math.max(C,Math.log(f*xo));a.ctrlpts=[_.x,_.y-(1+Math.pow(x,1.12)/100)*w*(m/3+1)*B,_.x-(1+Math.pow(x,1.12)/100)*w*(m/3+1)*L,_.y]};Er.findStraightEdgePoints=function(r){r._private.rscratch.edgeType="straight"};Er.findBezierPoints=function(r,e,t,n,a){var i=r._private.rscratch,o=r.pstyle("control-point-step-size").pfValue,l=r.pstyle("control-point-distances"),c=r.pstyle("control-point-weights"),f=l&&c?Math.min(l.value.length,c.value.length):1,d=l?l.pfValue[0]:void 0,h=c.value[0],p=n;i.edgeType=p?"multibezier":"bezier",i.ctrlpts=[];for(var g=0;g<f;g++){var m=(.5-e.eles.length/2+t)*o*(a?-1:1),w=void 0,x=rv(m);p&&(d=l?l.pfValue[g]:o,h=c.value[g]),n?w=d:w=d!==void 0?x*d:void 0;var b=w!==void 0?w:m,E=1-h,_=h,C=this.findMidptPtsEtc(r,e),B=C.midptPts,L=C.vectorNormInverse,A={x:B.x1*E+B.x2*_,y:B.y1*E+B.y2*_};i.ctrlpts.push(A.x+L.x*b,A.y+L.y*b)}};Er.findTaxiPoints=function(r,e){var t=r._private.rscratch;t.edgeType="segments";var n="vertical",a="horizontal",i="leftward",o="rightward",l="downward",c="upward",f="auto",d=e.posPts,h=e.srcW,p=e.srcH,g=e.tgtW,m=e.tgtH,w=r.pstyle("edge-distances").value,x=w!=="node-position",b=r.pstyle("taxi-direction").value,E=b,_=r.pstyle("taxi-turn"),C=_.units==="%",B=_.pfValue,L=B<0,A=r.pstyle("taxi-turn-min-distance").pfValue,z=x?(h+g)/2:0,M=x?(p+m)/2:0,U=d.x2-d.x1,q=d.y2-d.y1,D=function(O,ce){return O>0?Math.max(O-ce,0):Math.min(O+ce,0)},F=D(U,z),T=D(q,M),G=!1;E===f?b=Math.abs(F)>Math.abs(T)?a:n:E===c||E===l?(b=n,G=!0):(E===i||E===o)&&(b=a,G=!0);var Q=b===n,W=Q?T:F,X=Q?q:U,Z=rv(X),te=!1;!(G&&(C||L))&&(E===l&&X<0||E===c&&X>0||E===i&&X>0||E===o&&X<0)&&(Z*=-1,W=Z*Math.abs(W),te=!0);var N;if(C){var $=B<0?1+B:B;N=$*W}else{var oe=B<0?W:0;N=oe+B*Z}var ie=function(O){return Math.abs(O)<A||Math.abs(O)>=Math.abs(W)},ne=ie(N),xe=ie(Math.abs(W)-Math.abs(N)),Pe=ne||xe;if(Pe&&!te)if(Q){var Ce=Math.abs(X)<=p/2,me=Math.abs(U)<=g/2;if(Ce){var fe=(d.x1+d.x2)/2,he=d.y1,Ee=d.y2;t.segpts=[fe,he,fe,Ee]}else if(me){var Re=(d.y1+d.y2)/2,I=d.x1,pe=d.x2;t.segpts=[I,Re,pe,Re]}else t.segpts=[d.x1,d.y2]}else{var ge=Math.abs(X)<=h/2,Y=Math.abs(q)<=m/2;if(ge){var K=(d.y1+d.y2)/2,ae=d.x1,ve=d.x2;t.segpts=[ae,K,ve,K]}else if(Y){var ye=(d.x1+d.x2)/2,se=d.y1,Be=d.y2;t.segpts=[ye,se,ye,Be]}else t.segpts=[d.x2,d.y1]}else if(Q){var Ie=d.y1+N+(x?p/2*Z:0),Ae=d.x1,ze=d.x2;t.segpts=[Ae,Ie,ze,Ie]}else{var j=d.x1+N+(x?h/2*Z:0),k=d.y1,R=d.y2;t.segpts=[j,k,j,R]}if(t.isRound){var H=r.pstyle("taxi-radius").value,ee=r.pstyle("radius-type").value[0]==="arc-radius";t.radii=new Array(t.segpts.length/2).fill(H),t.isArcRadius=new Array(t.segpts.length/2).fill(ee)}};Er.tryToCorrectInvalidPoints=function(r,e){var t=r._private.rscratch;if(t.edgeType==="bezier"){var n=e.srcPos,a=e.tgtPos,i=e.srcW,o=e.srcH,l=e.tgtW,c=e.tgtH,f=e.srcShape,d=e.tgtShape,h=e.srcCornerRadius,p=e.tgtCornerRadius,g=e.srcRs,m=e.tgtRs,w=!$e(t.startX)||!$e(t.startY),x=!$e(t.arrowStartX)||!$e(t.arrowStartY),b=!$e(t.endX)||!$e(t.endY),E=!$e(t.arrowEndX)||!$e(t.arrowEndY),_=3,C=this.getArrowWidth(r.pstyle("width").pfValue,r.pstyle("arrow-scale").value)*this.arrowShapeWidth,B=_*C,L=Ja({x:t.ctrlpts[0],y:t.ctrlpts[1]},{x:t.startX,y:t.startY}),A=L<B,z=Ja({x:t.ctrlpts[0],y:t.ctrlpts[1]},{x:t.endX,y:t.endY}),M=z<B,U=!1;if(w||x||A){U=!0;var q={x:t.ctrlpts[0]-n.x,y:t.ctrlpts[1]-n.y},D=Math.sqrt(q.x*q.x+q.y*q.y),F={x:q.x/D,y:q.y/D},T=Math.max(i,o),G={x:t.ctrlpts[0]+F.x*2*T,y:t.ctrlpts[1]+F.y*2*T},Q=f.intersectLine(n.x,n.y,i,o,G.x,G.y,0,h,g);A?(t.ctrlpts[0]=t.ctrlpts[0]+F.x*(B-L),t.ctrlpts[1]=t.ctrlpts[1]+F.y*(B-L)):(t.ctrlpts[0]=Q[0]+F.x*B,t.ctrlpts[1]=Q[1]+F.y*B)}if(b||E||M){U=!0;var W={x:t.ctrlpts[0]-a.x,y:t.ctrlpts[1]-a.y},X=Math.sqrt(W.x*W.x+W.y*W.y),Z={x:W.x/X,y:W.y/X},te=Math.max(i,o),N={x:t.ctrlpts[0]+Z.x*2*te,y:t.ctrlpts[1]+Z.y*2*te},$=d.intersectLine(a.x,a.y,l,c,N.x,N.y,0,p,m);M?(t.ctrlpts[0]=t.ctrlpts[0]+Z.x*(B-z),t.ctrlpts[1]=t.ctrlpts[1]+Z.y*(B-z)):(t.ctrlpts[0]=$[0]+Z.x*B,t.ctrlpts[1]=$[1]+Z.y*B)}U&&this.findEndpoints(r)}};Er.storeAllpts=function(r){var e=r._private.rscratch;if(e.edgeType==="multibezier"||e.edgeType==="bezier"||e.edgeType==="self"||e.edgeType==="compound"){e.allpts=[],e.allpts.push(e.startX,e.startY);for(var t=0;t+1<e.ctrlpts.length;t+=2)e.allpts.push(e.ctrlpts[t],e.ctrlpts[t+1]),t+3<e.ctrlpts.length&&e.allpts.push((e.ctrlpts[t]+e.ctrlpts[t+2])/2,(e.ctrlpts[t+1]+e.ctrlpts[t+3])/2);e.allpts.push(e.endX,e.endY);var n,a;e.ctrlpts.length/2%2===0?(n=e.allpts.length/2-1,e.midX=e.allpts[n],e.midY=e.allpts[n+1]):(n=e.allpts.length/2-3,a=.5,e.midX=ar(e.allpts[n],e.allpts[n+2],e.allpts[n+4],a),e.midY=ar(e.allpts[n+1],e.allpts[n+3],e.allpts[n+5],a))}else if(e.edgeType==="straight")e.allpts=[e.startX,e.startY,e.endX,e.endY],e.midX=(e.startX+e.endX+e.arrowStartX+e.arrowEndX)/4,e.midY=(e.startY+e.endY+e.arrowStartY+e.arrowEndY)/4;else if(e.edgeType==="segments"){if(e.allpts=[],e.allpts.push(e.startX,e.startY),e.allpts.push.apply(e.allpts,e.segpts),e.allpts.push(e.endX,e.endY),e.isRound){e.roundCorners=[];for(var i=2;i+3<e.allpts.length;i+=2){var o=e.radii[i/2-1],l=e.isArcRadius[i/2-1];e.roundCorners.push(pv({x:e.allpts[i-2],y:e.allpts[i-1]},{x:e.allpts[i],y:e.allpts[i+1],radius:o},{x:e.allpts[i+2],y:e.allpts[i+3]},o,l))}}if(e.segpts.length%4===0){var c=e.segpts.length/2,f=c-2;e.midX=(e.segpts[f]+e.segpts[c])/2,e.midY=(e.segpts[f+1]+e.segpts[c+1])/2}else{var d=e.segpts.length/2-1;if(!e.isRound)e.midX=e.segpts[d],e.midY=e.segpts[d+1];else{var h={x:e.segpts[d],y:e.segpts[d+1]},p=e.roundCorners[d/2];if(p.radius===0){var g={x:e.segpts[d+2],y:e.segpts[d+3]};e.midX=h.x,e.midY=h.y,e.midVector=[h.y-g.y,g.x-h.x]}else{var m=[h.x-p.cx,h.y-p.cy],w=p.radius/Math.sqrt(Math.pow(m[0],2)+Math.pow(m[1],2));m=m.map(function(x){return x*w}),e.midX=p.cx+m[0],e.midY=p.cy+m[1],e.midVector=m}}}}};Er.checkForInvalidEdgeWarning=function(r){var e=r[0]._private.rscratch;e.nodesOverlap||$e(e.startX)&&$e(e.startY)&&$e(e.endX)&&$e(e.endY)?e.loggedErr=!1:e.loggedErr||(e.loggedErr=!0,gt("Edge `"+r.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))};Er.findEdgeControlPoints=function(r){var e=this;if(!(!r||r.length===0)){for(var t=this,n=t.cy,a=n.hasCompoundNodes(),i=new Fn,o=function(M,U){return[].concat(yu(M),[U?1:0]).join("-")},l=[],c=[],f=0;f<r.length;f++){var d=r[f],h=d._private,p=d.pstyle("curve-style").value;if(!(d.removed()||!d.takesUpSpace())){if(p==="haystack"){c.push(d);continue}var g=p==="unbundled-bezier"||va(p,"segments")||p==="straight"||p==="straight-triangle"||va(p,"taxi"),m=p==="unbundled-bezier"||p==="bezier",w=h.source,x=h.target,b=w.poolIndex(),E=x.poolIndex(),_=[b,E].sort(),C=o(_,g),B=i.get(C);B==null&&(B={eles:[]},l.push({pairId:_,edgeIsUnbundled:g}),i.set(C,B)),B.eles.push(d),g&&(B.hasUnbundled=!0),m&&(B.hasBezier=!0)}}for(var L=function(){var M=l[A],U=M.pairId,q=M.edgeIsUnbundled,D=o(U,q),F=i.get(D),T;if(!F.hasUnbundled){var G=F.eles[0].parallelEdges().filter(function(ee){return ee.isBundledBezier()});ev(F.eles),G.forEach(function(ee){return F.eles.push(ee)}),F.eles.sort(function(ee,J){return ee.poolIndex()-J.poolIndex()})}var Q=F.eles[0],W=Q.source(),X=Q.target();if(W.poolIndex()>X.poolIndex()){var Z=W;W=X,X=Z}var te=F.srcPos=W.position(),N=F.tgtPos=X.position(),$=F.srcW=W.outerWidth(),oe=F.srcH=W.outerHeight(),ie=F.tgtW=X.outerWidth(),ne=F.tgtH=X.outerHeight(),xe=F.srcShape=t.nodeShapes[e.getNodeShape(W)],Pe=F.tgtShape=t.nodeShapes[e.getNodeShape(X)],Ce=F.srcCornerRadius=W.pstyle("corner-radius").value==="auto"?"auto":W.pstyle("corner-radius").pfValue,me=F.tgtCornerRadius=X.pstyle("corner-radius").value==="auto"?"auto":X.pstyle("corner-radius").pfValue,fe=F.tgtRs=X._private.rscratch,he=F.srcRs=W._private.rscratch;F.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var Ee=0;Ee<F.eles.length;Ee++){var Re=F.eles[Ee],I=Re[0]._private.rscratch,pe=Re.pstyle("curve-style").value,ge=pe==="unbundled-bezier"||va(pe,"segments")||va(pe,"taxi"),Y=!W.same(Re.source());if(!F.calculatedIntersection&&W!==X&&(F.hasBezier||F.hasUnbundled)){F.calculatedIntersection=!0;var K=xe.intersectLine(te.x,te.y,$,oe,N.x,N.y,0,Ce,he),ae=F.srcIntn=K,ve=Pe.intersectLine(N.x,N.y,ie,ne,te.x,te.y,0,me,fe),ye=F.tgtIntn=ve,se=F.intersectionPts={x1:K[0],x2:ve[0],y1:K[1],y2:ve[1]},Be=F.posPts={x1:te.x,x2:N.x,y1:te.y,y2:N.y},Ie=ve[1]-K[1],Ae=ve[0]-K[0],ze=Math.sqrt(Ae*Ae+Ie*Ie);$e(ze)&&ze>=VT||(ze=Math.sqrt(Math.max(Ae*Ae,xo)+Math.max(Ie*Ie,xo)));var j=F.vector={x:Ae,y:Ie},k=F.vectorNorm={x:j.x/ze,y:j.y/ze},R={x:-k.y,y:k.x};F.nodesOverlap=!$e(ze)||Pe.checkPoint(K[0],K[1],0,ie,ne,N.x,N.y,me,fe)||xe.checkPoint(ve[0],ve[1],0,$,oe,te.x,te.y,Ce,he),F.vectorNormInverse=R,T={nodesOverlap:F.nodesOverlap,dirCounts:F.dirCounts,calculatedIntersection:!0,hasBezier:F.hasBezier,hasUnbundled:F.hasUnbundled,eles:F.eles,srcPos:N,srcRs:fe,tgtPos:te,tgtRs:he,srcW:ie,srcH:ne,tgtW:$,tgtH:oe,srcIntn:ye,tgtIntn:ae,srcShape:Pe,tgtShape:xe,posPts:{x1:Be.x2,y1:Be.y2,x2:Be.x1,y2:Be.y1},intersectionPts:{x1:se.x2,y1:se.y2,x2:se.x1,y2:se.y1},vector:{x:-j.x,y:-j.y},vectorNorm:{x:-k.x,y:-k.y},vectorNormInverse:{x:-R.x,y:-R.y}}}var H=Y?T:F;I.nodesOverlap=H.nodesOverlap,I.srcIntn=H.srcIntn,I.tgtIntn=H.tgtIntn,I.isRound=pe.startsWith("round"),a&&(W.isParent()||W.isChild()||X.isParent()||X.isChild())&&(W.parents().anySame(X)||X.parents().anySame(W)||W.same(X)&&W.isParent())?e.findCompoundLoopPoints(Re,H,Ee,ge):W===X?e.findLoopPoints(Re,H,Ee,ge):pe.endsWith("segments")?e.findSegmentsPoints(Re,H):pe.endsWith("taxi")?e.findTaxiPoints(Re,H):pe==="straight"||!ge&&F.eles.length%2===1&&Ee===Math.floor(F.eles.length/2)?e.findStraightEdgePoints(Re):e.findBezierPoints(Re,H,Ee,ge,Y),e.findEndpoints(Re),e.tryToCorrectInvalidPoints(Re,H),e.checkForInvalidEdgeWarning(Re),e.storeAllpts(Re),e.storeEdgeProjections(Re),e.calculateArrowAngles(Re),e.recalculateEdgeLabelProjections(Re),e.calculateLabelAngles(Re)}},A=0;A<l.length;A++)L();this.findHaystackPoints(c)}};function Bw(r){var e=[];if(r!=null){for(var t=0;t<r.length;t+=2){var n=r[t],a=r[t+1];e.push({x:n,y:a})}return e}}Er.getSegmentPoints=function(r){var e=r[0]._private.rscratch;this.recalculateRenderedStyle(r);var t=e.edgeType;if(t==="segments")return Bw(e.segpts)};Er.getControlPoints=function(r){var e=r[0]._private.rscratch;this.recalculateRenderedStyle(r);var t=e.edgeType;if(t==="bezier"||t==="multibezier"||t==="self"||t==="compound")return Bw(e.ctrlpts)};Er.getEdgeMidpoint=function(r){var e=r[0]._private.rscratch;return this.recalculateRenderedStyle(r),{x:e.midX,y:e.midY}};var Do={};Do.manualEndptToPx=function(r,e){var t=this,n=r.position(),a=r.outerWidth(),i=r.outerHeight(),o=r._private.rscratch;if(e.value.length===2){var l=[e.pfValue[0],e.pfValue[1]];return e.units[0]==="%"&&(l[0]=l[0]*a),e.units[1]==="%"&&(l[1]=l[1]*i),l[0]+=n.x,l[1]+=n.y,l}else{var c=e.pfValue[0];c=-Math.PI/2+c;var f=2*Math.max(a,i),d=[n.x+Math.cos(c)*f,n.y+Math.sin(c)*f];return t.nodeShapes[this.getNodeShape(r)].intersectLine(n.x,n.y,a,i,d[0],d[1],0,r.pstyle("corner-radius").value==="auto"?"auto":r.pstyle("corner-radius").pfValue,o)}};Do.findEndpoints=function(r){var e,t,n,a,i=this,o,l=r.source()[0],c=r.target()[0],f=l.position(),d=c.position(),h=r.pstyle("target-arrow-shape").value,p=r.pstyle("source-arrow-shape").value,g=r.pstyle("target-distance-from-node").pfValue,m=r.pstyle("source-distance-from-node").pfValue,w=l._private.rscratch,x=c._private.rscratch,b=r.pstyle("curve-style").value,E=r._private.rscratch,_=E.edgeType,C=va(b,"taxi"),B=_==="self"||_==="compound",L=_==="bezier"||_==="multibezier"||B,A=_!=="bezier",z=_==="straight"||_==="segments",M=_==="segments",U=L||A||z,q=B||C,D=r.pstyle("source-endpoint"),F=q?"outside-to-node":D.value,T=l.pstyle("corner-radius").value==="auto"?"auto":l.pstyle("corner-radius").pfValue,G=r.pstyle("target-endpoint"),Q=q?"outside-to-node":G.value,W=c.pstyle("corner-radius").value==="auto"?"auto":c.pstyle("corner-radius").pfValue;E.srcManEndpt=D,E.tgtManEndpt=G;var X,Z,te,N,$=(e=(G==null||(t=G.pfValue)===null||t===void 0?void 0:t.length)===2?G.pfValue:null)!==null&&e!==void 0?e:[0,0],oe=(n=(D==null||(a=D.pfValue)===null||a===void 0?void 0:a.length)===2?D.pfValue:null)!==null&&n!==void 0?n:[0,0];if(L){var ie=[E.ctrlpts[0],E.ctrlpts[1]],ne=A?[E.ctrlpts[E.ctrlpts.length-2],E.ctrlpts[E.ctrlpts.length-1]]:ie;X=ne,Z=ie}else if(z){var xe=M?E.segpts.slice(0,2):[d.x+$[0],d.y+$[1]],Pe=M?E.segpts.slice(E.segpts.length-2):[f.x+oe[0],f.y+oe[1]];X=Pe,Z=xe}if(Q==="inside-to-node")o=[d.x,d.y];else if(G.units)o=this.manualEndptToPx(c,G);else if(Q==="outside-to-line")o=E.tgtIntn;else if(Q==="outside-to-node"||Q==="outside-to-node-or-label"?te=X:(Q==="outside-to-line"||Q==="outside-to-line-or-label")&&(te=[f.x,f.y]),o=i.nodeShapes[this.getNodeShape(c)].intersectLine(d.x,d.y,c.outerWidth(),c.outerHeight(),te[0],te[1],0,W,x),Q==="outside-to-node-or-label"||Q==="outside-to-line-or-label"){var Ce=c._private.rscratch,me=Ce.labelWidth,fe=Ce.labelHeight,he=Ce.labelX,Ee=Ce.labelY,Re=me/2,I=fe/2,pe=c.pstyle("text-valign").value;pe==="top"?Ee-=I:pe==="bottom"&&(Ee+=I);var ge=c.pstyle("text-halign").value;ge==="left"?he-=Re:ge==="right"&&(he+=Re);var Y=po(te[0],te[1],[he-Re,Ee-I,he+Re,Ee-I,he+Re,Ee+I,he-Re,Ee+I],d.x,d.y);if(Y.length>0){var K=f,ae=Ha(K,Vi(o)),ve=Ha(K,Vi(Y)),ye=ae;if(ve<ae&&(o=Y,ye=ve),Y.length>2){var se=Ha(K,{x:Y[2],y:Y[3]});se<ye&&(o=[Y[2],Y[3]])}}}var Be=Xl(o,X,i.arrowShapes[h].spacing(r)+g),Ie=Xl(o,X,i.arrowShapes[h].gap(r)+g);if(E.endX=Ie[0],E.endY=Ie[1],E.arrowEndX=Be[0],E.arrowEndY=Be[1],F==="inside-to-node")o=[f.x,f.y];else if(D.units)o=this.manualEndptToPx(l,D);else if(F==="outside-to-line")o=E.srcIntn;else if(F==="outside-to-node"||F==="outside-to-node-or-label"?N=Z:(F==="outside-to-line"||F==="outside-to-line-or-label")&&(N=[d.x,d.y]),o=i.nodeShapes[this.getNodeShape(l)].intersectLine(f.x,f.y,l.outerWidth(),l.outerHeight(),N[0],N[1],0,T,w),F==="outside-to-node-or-label"||F==="outside-to-line-or-label"){var Ae=l._private.rscratch,ze=Ae.labelWidth,j=Ae.labelHeight,k=Ae.labelX,R=Ae.labelY,H=ze/2,ee=j/2,J=l.pstyle("text-valign").value;J==="top"?R-=ee:J==="bottom"&&(R+=ee);var O=l.pstyle("text-halign").value;O==="left"?k-=H:O==="right"&&(k+=H);var ce=po(N[0],N[1],[k-H,R-ee,k+H,R-ee,k+H,R+ee,k-H,R+ee],f.x,f.y);if(ce.length>0){var _e=d,we=Ha(_e,Vi(o)),ke=Ha(_e,Vi(ce)),Oe=we;if(ke<we&&(o=[ce[0],ce[1]],Oe=ke),ce.length>2){var De=Ha(_e,{x:ce[2],y:ce[3]});De<Oe&&(o=[ce[2],ce[3]])}}}var We=Xl(o,Z,i.arrowShapes[p].spacing(r)+m),Ue=Xl(o,Z,i.arrowShapes[p].gap(r)+m);E.startX=Ue[0],E.startY=Ue[1],E.arrowStartX=We[0],E.arrowStartY=We[1],U&&(!$e(E.startX)||!$e(E.startY)||!$e(E.endX)||!$e(E.endY)?E.badLine=!0:E.badLine=!1)};Do.getSourceEndpoint=function(r){var e=r[0]._private.rscratch;switch(this.recalculateRenderedStyle(r),e.edgeType){case"haystack":return{x:e.haystackPts[0],y:e.haystackPts[1]};default:return{x:e.arrowStartX,y:e.arrowStartY}}};Do.getTargetEndpoint=function(r){var e=r[0]._private.rscratch;switch(this.recalculateRenderedStyle(r),e.edgeType){case"haystack":return{x:e.haystackPts[2],y:e.haystackPts[3]};default:return{x:e.arrowEndX,y:e.arrowEndY}}};var gv={};function qT(r,e,t){for(var n=function(f,d,h,p){return ar(f,d,h,p)},a=e._private,i=a.rstyle.bezierPts,o=0;o<r.bezierProjPcts.length;o++){var l=r.bezierProjPcts[o];i.push({x:n(t[0],t[2],t[4],l),y:n(t[1],t[3],t[5],l)})}}gv.storeEdgeProjections=function(r){var e=r._private,t=e.rscratch,n=t.edgeType;if(e.rstyle.bezierPts=null,e.rstyle.linePts=null,e.rstyle.haystackPts=null,n==="multibezier"||n==="bezier"||n==="self"||n==="compound"){e.rstyle.bezierPts=[];for(var a=0;a+5<t.allpts.length;a+=4)qT(this,r,t.allpts.slice(a,a+6))}else if(n==="segments")for(var i=e.rstyle.linePts=[],a=0;a+1<t.allpts.length;a+=2)i.push({x:t.allpts[a],y:t.allpts[a+1]});else if(n==="haystack"){var o=t.haystackPts;e.rstyle.haystackPts=[{x:o[0],y:o[1]},{x:o[2],y:o[3]}]}e.rstyle.arrowWidth=this.getArrowWidth(r.pstyle("width").pfValue,r.pstyle("arrow-scale").value)*this.arrowShapeWidth};gv.recalculateEdgeProjections=function(r){this.findEdgeControlPoints(r)};var Tn={};Tn.recalculateNodeLabelProjection=function(r){var e=r.pstyle("label").strValue;if(!wa(e)){var t,n,a=r._private,i=r.width(),o=r.height(),l=r.padding(),c=r.position(),f=r.pstyle("text-halign").strValue,d=r.pstyle("text-valign").strValue,h=a.rscratch,p=a.rstyle;switch(f){case"left":t=c.x-i/2-l;break;case"right":t=c.x+i/2+l;break;default:t=c.x}switch(d){case"top":n=c.y-o/2-l;break;case"bottom":n=c.y+o/2+l;break;default:n=c.y}h.labelX=t,h.labelY=n,p.labelX=t,p.labelY=n,this.calculateLabelAngles(r),this.applyLabelDimensions(r)}};var Aw=function(e,t){var n=Math.atan(t/e);return e===0&&n<0&&(n=n*-1),n},Iw=function(e,t){var n=t.x-e.x,a=t.y-e.y;return Aw(n,a)},WT=function(e,t,n,a){var i=vo(0,a-.001,1),o=vo(0,a+.001,1),l=Gi(e,t,n,i),c=Gi(e,t,n,o);return Iw(l,c)};Tn.recalculateEdgeLabelProjections=function(r){var e,t=r._private,n=t.rscratch,a=this,i={mid:r.pstyle("label").strValue,source:r.pstyle("source-label").strValue,target:r.pstyle("target-label").strValue};if(i.mid||i.source||i.target){e={x:n.midX,y:n.midY};var o=function(h,p,g){zn(t.rscratch,h,p,g),zn(t.rstyle,h,p,g)};o("labelX",null,e.x),o("labelY",null,e.y);var l=Aw(n.midDispX,n.midDispY);o("labelAutoAngle",null,l);var c=function(){if(c.cache)return c.cache;for(var h=[],p=0;p+5<n.allpts.length;p+=4){var g={x:n.allpts[p],y:n.allpts[p+1]},m={x:n.allpts[p+2],y:n.allpts[p+3]},w={x:n.allpts[p+4],y:n.allpts[p+5]};h.push({p0:g,p1:m,p2:w,startDist:0,length:0,segments:[]})}var x=t.rstyle.bezierPts,b=a.bezierProjPcts.length;function E(A,z,M,U,q){var D=Ja(z,M),F=A.segments[A.segments.length-1],T={p0:z,p1:M,t0:U,t1:q,startDist:F?F.startDist+F.length:0,length:D};A.segments.push(T),A.length+=D}for(var _=0;_<h.length;_++){var C=h[_],B=h[_-1];B&&(C.startDist=B.startDist+B.length),E(C,C.p0,x[_*b],0,a.bezierProjPcts[0]);for(var L=0;L<b-1;L++)E(C,x[_*b+L],x[_*b+L+1],a.bezierProjPcts[L],a.bezierProjPcts[L+1]);E(C,x[_*b+b-1],C.p2,a.bezierProjPcts[b-1],1)}return c.cache=h},f=function(h){var p,g=h==="source";if(i[h]){var m=r.pstyle(h+"-text-offset").pfValue;switch(n.edgeType){case"self":case"compound":case"bezier":case"multibezier":{for(var w=c(),x,b=0,E=0,_=0;_<w.length;_++){for(var C=w[g?_:w.length-1-_],B=0;B<C.segments.length;B++){var L=C.segments[g?B:C.segments.length-1-B],A=_===w.length-1&&B===C.segments.length-1;if(b=E,E+=L.length,E>=m||A){x={cp:C,segment:L};break}}if(x)break}var z=x.cp,M=x.segment,U=(m-b)/M.length,q=M.t1-M.t0,D=g?M.t0+q*U:M.t1-q*U;D=vo(0,D,1),e=Gi(z.p0,z.p1,z.p2,D),p=WT(z.p0,z.p1,z.p2,D);break}case"straight":case"segments":case"haystack":{for(var F=0,T,G,Q,W,X=n.allpts.length,Z=0;Z+3<X&&(g?(Q={x:n.allpts[Z],y:n.allpts[Z+1]},W={x:n.allpts[Z+2],y:n.allpts[Z+3]}):(Q={x:n.allpts[X-2-Z],y:n.allpts[X-1-Z]},W={x:n.allpts[X-4-Z],y:n.allpts[X-3-Z]}),T=Ja(Q,W),G=F,F+=T,!(F>=m));Z+=2);var te=m-G,N=te/T;N=vo(0,N,1),e=hS(Q,W,N),p=Iw(Q,W);break}}o("labelX",h,e.x),o("labelY",h,e.y),o("labelAutoAngle",h,p)}};f("source"),f("target"),this.applyLabelDimensions(r)}};Tn.applyLabelDimensions=function(r){this.applyPrefixedLabelDimensions(r),r.isEdge()&&(this.applyPrefixedLabelDimensions(r,"source"),this.applyPrefixedLabelDimensions(r,"target"))};Tn.applyPrefixedLabelDimensions=function(r,e){var t=r._private,n=this.getLabelText(r,e),a=Qa(n,r._private.labelDimsKey);if(Mr(t.rscratch,"prefixedLabelDimsKey",e)!==a){zn(t.rscratch,"prefixedLabelDimsKey",e,a);var i=this.calculateLabelDimensions(r,n),o=r.pstyle("line-height").pfValue,l=r.pstyle("text-wrap").strValue,c=Mr(t.rscratch,"labelWrapCachedLines",e)||[],f=l!=="wrap"?1:Math.max(c.length,1),d=i.height/f,h=d*o,p=i.width,g=i.height+(f-1)*(o-1)*d;zn(t.rstyle,"labelWidth",e,p),zn(t.rscratch,"labelWidth",e,p),zn(t.rstyle,"labelHeight",e,g),zn(t.rscratch,"labelHeight",e,g),zn(t.rscratch,"labelLineHeight",e,h)}};Tn.getLabelText=function(r,e){var t=r._private,n=e?e+"-":"",a=r.pstyle(n+"label").strValue,i=r.pstyle("text-transform").value,o=function(oe,ie){return ie?(zn(t.rscratch,oe,e,ie),ie):Mr(t.rscratch,oe,e)};if(!a)return"";i=="none"||(i=="uppercase"?a=a.toUpperCase():i=="lowercase"&&(a=a.toLowerCase()));var l=r.pstyle("text-wrap").value;if(l==="wrap"){var c=o("labelKey");if(c!=null&&o("labelWrapKey")===c)return o("labelWrapCachedText");for(var f="",d=a.split(`
`),h=r.pstyle("text-max-width").pfValue,p=r.pstyle("text-overflow-wrap").value,g=p==="anywhere",m=[],w=/[\s\u200b]+|$/g,x=0;x<d.length;x++){var b=d[x],E=this.calculateLabelDimensions(r,b),_=E.width;if(g){var C=b.split("").join(f);b=C}if(_>h){var B=b.matchAll(w),L="",A=0,z=Fr(B),M;try{for(z.s();!(M=z.n()).done;){var U=M.value,q=U[0],D=b.substring(A,U.index);A=U.index+q.length;var F=L.length===0?D:L+D+q,T=this.calculateLabelDimensions(r,F),G=T.width;G<=h?L+=D+q:(L&&m.push(L),L=D+q)}}catch($){z.e($)}finally{z.f()}L.match(/^[\s\u200b]+$/)||m.push(L)}else m.push(b)}o("labelWrapCachedLines",m),a=o("labelWrapCachedText",m.join(`
`)),o("labelWrapKey",c)}else if(l==="ellipsis"){var Q=r.pstyle("text-max-width").pfValue,W="",X="",Z=!1;if(this.calculateLabelDimensions(r,a).width<Q)return a;for(var te=0;te<a.length;te++){var N=this.calculateLabelDimensions(r,W+a[te]+X).width;if(N>Q)break;W+=a[te],te===a.length-1&&(Z=!0)}return Z||(W+=X),W}return a};Tn.getLabelJustification=function(r){var e=r.pstyle("text-justification").strValue,t=r.pstyle("text-halign").strValue;if(e==="auto")if(r.isNode())switch(t){case"left":return"right";case"right":return"left";default:return"center"}else return"center";else return e};Tn.calculateLabelDimensions=function(r,e){var t=this,n=t.cy.window(),a=n.document,i=0,o=r.pstyle("font-style").strValue,l=r.pstyle("font-size").pfValue,c=r.pstyle("font-family").strValue,f=r.pstyle("font-weight").strValue,d=this.labelCalcCanvas,h=this.labelCalcCanvasContext;if(!d){d=this.labelCalcCanvas=a.createElement("canvas"),h=this.labelCalcCanvasContext=d.getContext("2d");var p=d.style;p.position="absolute",p.left="-9999px",p.top="-9999px",p.zIndex="-1",p.visibility="hidden",p.pointerEvents="none"}h.font="".concat(o," ").concat(f," ").concat(l,"px ").concat(c);for(var g=0,m=0,w=e.split(`
`),x=0;x<w.length;x++){var b=w[x],E=h.measureText(b),_=Math.ceil(E.width),C=l;g=Math.max(_,g),m+=C}return g+=i,m+=i,{width:g,height:m}};Tn.calculateLabelAngle=function(r,e){var t=r._private,n=t.rscratch,a=r.isEdge(),i=e?e+"-":"",o=r.pstyle(i+"text-rotation"),l=o.strValue;return l==="none"?0:a&&l==="autorotate"?n.labelAutoAngle:l==="autorotate"?0:o.pfValue};Tn.calculateLabelAngles=function(r){var e=this,t=r.isEdge(),n=r._private,a=n.rscratch;a.labelAngle=e.calculateLabelAngle(r),t&&(a.sourceLabelAngle=e.calculateLabelAngle(r,"source"),a.targetLabelAngle=e.calculateLabelAngle(r,"target"))};var Dw={},P0=28,R0=!1;Dw.getNodeShape=function(r){var e=this,t=r.pstyle("shape").value;if(t==="cutrectangle"&&(r.width()<P0||r.height()<P0))return R0||(gt("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),R0=!0),"rectangle";if(r.isParent())return t==="rectangle"||t==="roundrectangle"||t==="round-rectangle"||t==="cutrectangle"||t==="cut-rectangle"||t==="barrel"?t:"rectangle";if(t==="polygon"){var n=r.pstyle("shape-polygon-points").value;return e.nodeShapes.makePolygon(n).name}return t};var Zu={};Zu.registerCalculationListeners=function(){var r=this.cy,e=r.collection(),t=this,n=function(o){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.merge(o),l)for(var c=0;c<o.length;c++){var f=o[c],d=f._private,h=d.rstyle;h.clean=!1,h.cleanConnected=!1}};t.binder(r).on("bounds.* dirty.*",function(o){var l=o.target;n(l)}).on("style.* background.*",function(o){var l=o.target;n(l,!1)});var a=function(o){if(o){var l=t.onUpdateEleCalcsFns;e.cleanStyle();for(var c=0;c<e.length;c++){var f=e[c],d=f._private.rstyle;f.isNode()&&!d.cleanConnected&&(n(f.connectedEdges()),d.cleanConnected=!0)}if(l)for(var h=0;h<l.length;h++){var p=l[h];p(o,e)}t.recalculateRenderedStyle(e),e=r.collection()}};t.flushRenderedStyleQueue=function(){a(!0)},t.beforeRender(a,t.beforeRenderPriorities.eleCalcs)};Zu.onUpdateEleCalcs=function(r){var e=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];e.push(r)};Zu.recalculateRenderedStyle=function(r,e){var t=function(C){return C._private.rstyle.cleanConnected};if(r.length!==0){var n=[],a=[];if(!this.destroyed){e===void 0&&(e=!0);for(var i=0;i<r.length;i++){var o=r[i],l=o._private,c=l.rstyle;o.isEdge()&&(!t(o.source())||!t(o.target()))&&(c.clean=!1),o.isEdge()&&o.isBundledBezier()&&o.parallelEdges().some(function(_){return!_._private.rstyle.clean&&_.isBundledBezier()})&&(c.clean=!1),!(e&&c.clean||o.removed())&&o.pstyle("display").value!=="none"&&(l.group==="nodes"?a.push(o):n.push(o),c.clean=!0)}for(var f=0;f<a.length;f++){var d=a[f],h=d._private,p=h.rstyle,g=d.position();this.recalculateNodeLabelProjection(d),p.nodeX=g.x,p.nodeY=g.y,p.nodeW=d.pstyle("width").pfValue,p.nodeH=d.pstyle("height").pfValue}this.recalculateEdgeProjections(n);for(var m=0;m<n.length;m++){var w=n[m],x=w._private,b=x.rstyle,E=x.rscratch;b.srcX=E.arrowStartX,b.srcY=E.arrowStartY,b.tgtX=E.arrowEndX,b.tgtY=E.arrowEndY,b.midX=E.midX,b.midY=E.midY,b.labelAngle=E.labelAngle,b.sourceLabelAngle=E.sourceLabelAngle,b.targetLabelAngle=E.targetLabelAngle}}}};var Yu={};Yu.updateCachedGrabbedEles=function(){var r=this.cachedZSortedEles;if(r){r.drag=[],r.nondrag=[];for(var e=[],t=0;t<r.length;t++){var n=r[t],a=n._private.rscratch;n.grabbed()&&!n.isParent()?e.push(n):a.inDragLayer?r.drag.push(n):r.nondrag.push(n)}for(var t=0;t<e.length;t++){var n=e[t];r.drag.push(n)}}};Yu.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null};Yu.getCachedZSortedEles=function(r){if(r||!this.cachedZSortedEles){var e=this.cy.mutableElements().toArray();e.sort(vw),e.interactive=e.filter(function(t){return t.interactive()}),this.cachedZSortedEles=e,this.updateCachedGrabbedEles()}else e=this.cachedZSortedEles;return e};var Nw={};[ai,Pu,Er,Do,gv,Tn,Dw,Zu,Yu].forEach(function(r){tt(Nw,r)});var Lw={};Lw.getCachedImage=function(r,e,t){var n=this,a=n.imageCache=n.imageCache||{},i=a[r];if(i)return i.image.complete||i.image.addEventListener("load",t),i.image;i=a[r]=a[r]||{};var o=i.image=new Image;o.addEventListener("load",t),o.addEventListener("error",function(){o.error=!0});var l="data:",c=r.substring(0,l.length).toLowerCase()===l;return c||(e=e==="null"?null:e,o.crossOrigin=e),o.src=r,o};var ns={};ns.registerBinding=function(r,e,t,n){var a=Array.prototype.slice.apply(arguments,[1]);if(Array.isArray(r)){for(var i=[],o=0;o<r.length;o++){var l=r[o];if(l!==void 0){var c=this.binder(l);i.push(c.on.apply(c,a))}}return i}var c=this.binder(r);return c.on.apply(c,a)};ns.binder=function(r){var e=this,t=e.cy.window(),n=r===t||r===t.document||r===t.document.body||n_(r);if(e.supportsPassiveEvents==null){var a=!1;try{var i=Object.defineProperty({},"passive",{get:function(){return a=!0,!0}});t.addEventListener("test",null,i)}catch{}e.supportsPassiveEvents=a}var o=function(c,f,d){var h=Array.prototype.slice.call(arguments);return n&&e.supportsPassiveEvents&&(h[2]={capture:d??!1,passive:!1,once:!1}),e.bindings.push({target:r,args:h}),(r.addEventListener||r.on).apply(r,h),this};return{on:o,addEventListener:o,addListener:o,bind:o}};ns.nodeIsDraggable=function(r){return r&&r.isNode()&&!r.locked()&&r.grabbable()};ns.nodeIsGrabbable=function(r){return this.nodeIsDraggable(r)&&r.interactive()};ns.load=function(){var r=this,e=r.cy.window(),t=function(O){return O.selected()},n=function(O){var ce=O.getRootNode();if(ce&&ce.nodeType===11&&ce.host!==void 0)return ce},a=function(O,ce,_e,we){O==null&&(O=r.cy);for(var ke=0;ke<ce.length;ke++){var Oe=ce[ke];O.emit({originalEvent:_e,type:Oe,position:we})}},i=function(O){return O.shiftKey||O.metaKey||O.ctrlKey},o=function(O,ce){var _e=!0;if(r.cy.hasCompoundNodes()&&O&&O.pannable())for(var we=0;ce&&we<ce.length;we++){var O=ce[we];if(O.isNode()&&O.isParent()&&!O.pannable()){_e=!1;break}}else _e=!0;return _e},l=function(O){O[0]._private.grabbed=!0},c=function(O){O[0]._private.grabbed=!1},f=function(O){O[0]._private.rscratch.inDragLayer=!0},d=function(O){O[0]._private.rscratch.inDragLayer=!1},h=function(O){O[0]._private.rscratch.isGrabTarget=!0},p=function(O){O[0]._private.rscratch.isGrabTarget=!1},g=function(O,ce){var _e=ce.addToList,we=_e.has(O);!we&&O.grabbable()&&!O.locked()&&(_e.merge(O),l(O))},m=function(O,ce){if(O.cy().hasCompoundNodes()&&!(ce.inDragLayer==null&&ce.addToList==null)){var _e=O.descendants();ce.inDragLayer&&(_e.forEach(f),_e.connectedEdges().forEach(f)),ce.addToList&&g(_e,ce)}},w=function(O,ce){ce=ce||{};var _e=O.cy().hasCompoundNodes();ce.inDragLayer&&(O.forEach(f),O.neighborhood().stdFilter(function(we){return!_e||we.isEdge()}).forEach(f)),ce.addToList&&O.forEach(function(we){g(we,ce)}),m(O,ce),E(O,{inDragLayer:ce.inDragLayer}),r.updateCachedGrabbedEles()},x=w,b=function(O){O&&(r.getCachedZSortedEles().forEach(function(ce){c(ce),d(ce),p(ce)}),r.updateCachedGrabbedEles())},E=function(O,ce){if(!(ce.inDragLayer==null&&ce.addToList==null)&&O.cy().hasCompoundNodes()){var _e=O.ancestors().orphans();if(!_e.same(O)){var we=_e.descendants().spawnSelf().merge(_e).unmerge(O).unmerge(O.descendants()),ke=we.connectedEdges();ce.inDragLayer&&(ke.forEach(f),we.forEach(f)),ce.addToList&&we.forEach(function(Oe){g(Oe,ce)})}}},_=function(){document.activeElement!=null&&document.activeElement.blur!=null&&document.activeElement.blur()},C=typeof MutationObserver<"u",B=typeof ResizeObserver<"u";C?(r.removeObserver=new MutationObserver(function(J){for(var O=0;O<J.length;O++){var ce=J[O],_e=ce.removedNodes;if(_e)for(var we=0;we<_e.length;we++){var ke=_e[we];if(ke===r.container){r.destroy();break}}}}),r.container.parentNode&&r.removeObserver.observe(r.container.parentNode,{childList:!0})):r.registerBinding(r.container,"DOMNodeRemoved",function(J){r.destroy()});var L=Ro(function(){r.cy.resize()},100);C&&(r.styleObserver=new MutationObserver(L),r.styleObserver.observe(r.container,{attributes:!0})),r.registerBinding(e,"resize",L),B&&(r.resizeObserver=new ResizeObserver(L),r.resizeObserver.observe(r.container));var A=function(O,ce){for(;O!=null;)ce(O),O=O.parentNode},z=function(){r.invalidateContainerClientCoordsCache()};A(r.container,function(J){r.registerBinding(J,"transitionend",z),r.registerBinding(J,"animationend",z),r.registerBinding(J,"scroll",z)}),r.registerBinding(r.container,"contextmenu",function(J){J.preventDefault()});var M=function(){return r.selection[4]!==0},U=function(O){for(var ce=r.findContainerClientCoords(),_e=ce[0],we=ce[1],ke=ce[2],Oe=ce[3],De=O.touches?O.touches:[O],We=!1,Ue=0;Ue<De.length;Ue++){var Ge=De[Ue];if(_e<=Ge.clientX&&Ge.clientX<=_e+ke&&we<=Ge.clientY&&Ge.clientY<=we+Oe){We=!0;break}}if(!We)return!1;for(var nt=r.container,at=O.target,Xe=at.parentNode,st=!1;Xe;){if(Xe===nt){st=!0;break}Xe=Xe.parentNode}return!!st};r.registerBinding(r.container,"mousedown",function(O){if(U(O)&&!(r.hoverData.which===1&&O.which!==1)){O.preventDefault(),_(),r.hoverData.capture=!0,r.hoverData.which=O.which;var ce=r.cy,_e=[O.clientX,O.clientY],we=r.projectIntoViewport(_e[0],_e[1]),ke=r.selection,Oe=r.findNearestElements(we[0],we[1],!0,!1),De=Oe[0],We=r.dragData.possibleDragElements;r.hoverData.mdownPos=we,r.hoverData.mdownGPos=_e;var Ue=function(it){return{originalEvent:O,type:it,position:{x:we[0],y:we[1]}}},Ge=function(){r.hoverData.tapholdCancelled=!1,clearTimeout(r.hoverData.tapholdTimeout),r.hoverData.tapholdTimeout=setTimeout(function(){if(!r.hoverData.tapholdCancelled){var it=r.hoverData.down;it?it.emit(Ue("taphold")):ce.emit(Ue("taphold"))}},r.tapholdDuration)};if(O.which==3){r.hoverData.cxtStarted=!0;var nt={originalEvent:O,type:"cxttapstart",position:{x:we[0],y:we[1]}};De?(De.activate(),De.emit(nt),r.hoverData.down=De):ce.emit(nt),r.hoverData.downTime=new Date().getTime(),r.hoverData.cxtDragged=!1}else if(O.which==1){De&&De.activate();{if(De!=null&&r.nodeIsGrabbable(De)){var at=function(it){it.emit(Ue("grab"))};if(h(De),!De.selected())We=r.dragData.possibleDragElements=ce.collection(),x(De,{addToList:We}),De.emit(Ue("grabon")).emit(Ue("grab"));else{We=r.dragData.possibleDragElements=ce.collection();var Xe=ce.$(function(st){return st.isNode()&&st.selected()&&r.nodeIsGrabbable(st)});w(Xe,{addToList:We}),De.emit(Ue("grabon")),Xe.forEach(at)}r.redrawHint("eles",!0),r.redrawHint("drag",!0)}r.hoverData.down=De,r.hoverData.downs=Oe,r.hoverData.downTime=new Date().getTime()}a(De,["mousedown","tapstart","vmousedown"],O,{x:we[0],y:we[1]}),De==null?(ke[4]=1,r.data.bgActivePosistion={x:we[0],y:we[1]},r.redrawHint("select",!0),r.redraw()):De.pannable()&&(ke[4]=1),Ge()}ke[0]=ke[2]=we[0],ke[1]=ke[3]=we[1]}},!1);var q=n(r.container);r.registerBinding([e,q],"mousemove",function(O){var ce=r.hoverData.capture;if(!(!ce&&!U(O))){var _e=!1,we=r.cy,ke=we.zoom(),Oe=[O.clientX,O.clientY],De=r.projectIntoViewport(Oe[0],Oe[1]),We=r.hoverData.mdownPos,Ue=r.hoverData.mdownGPos,Ge=r.selection,nt=null;!r.hoverData.draggingEles&&!r.hoverData.dragging&&!r.hoverData.selecting&&(nt=r.findNearestElement(De[0],De[1],!0,!1));var at=r.hoverData.last,Xe=r.hoverData.down,st=[De[0]-Ge[2],De[1]-Ge[3]],it=r.dragData.possibleDragElements,Dt;if(Ue){var St=Oe[0]-Ue[0],jt=St*St,Rt=Oe[1]-Ue[1],Bt=Rt*Rt,Vt=jt+Bt;r.hoverData.isOverThresholdDrag=Dt=Vt>=r.desktopTapThreshold2}var Nt=i(O);Dt&&(r.hoverData.tapholdCancelled=!0);var $r=function(){var Sr=r.hoverData.dragDelta=r.hoverData.dragDelta||[];Sr.length===0?(Sr.push(st[0]),Sr.push(st[1])):(Sr[0]+=st[0],Sr[1]+=st[1])};_e=!0,a(nt,["mousemove","vmousemove","tapdrag"],O,{x:De[0],y:De[1]});var kt=function(Sr){return{originalEvent:O,type:Sr,position:{x:De[0],y:De[1]}}},Ur=function(){r.data.bgActivePosistion=void 0,r.hoverData.selecting||we.emit(kt("boxstart")),Ge[4]=1,r.hoverData.selecting=!0,r.redrawHint("select",!0),r.redraw()};if(r.hoverData.which===3){if(Dt){var an=kt("cxtdrag");Xe?Xe.emit(an):we.emit(an),r.hoverData.cxtDragged=!0,(!r.hoverData.cxtOver||nt!==r.hoverData.cxtOver)&&(r.hoverData.cxtOver&&r.hoverData.cxtOver.emit(kt("cxtdragout")),r.hoverData.cxtOver=nt,nt&&nt.emit(kt("cxtdragover")))}}else if(r.hoverData.dragging){if(_e=!0,we.panningEnabled()&&we.userPanningEnabled()){var qn;if(r.hoverData.justStartedPan){var si=r.hoverData.mdownPos;qn={x:(De[0]-si[0])*ke,y:(De[1]-si[1])*ke},r.hoverData.justStartedPan=!1}else qn={x:st[0]*ke,y:st[1]*ke};we.panBy(qn),we.emit(kt("dragpan")),r.hoverData.dragged=!0}De=r.projectIntoViewport(O.clientX,O.clientY)}else if(Ge[4]==1&&(Xe==null||Xe.pannable())){if(Dt){if(!r.hoverData.dragging&&we.boxSelectionEnabled()&&(Nt||!we.panningEnabled()||!we.userPanningEnabled()))Ur();else if(!r.hoverData.selecting&&we.panningEnabled()&&we.userPanningEnabled()){var _r=o(Xe,r.hoverData.downs);_r&&(r.hoverData.dragging=!0,r.hoverData.justStartedPan=!0,Ge[4]=0,r.data.bgActivePosistion=Vi(We),r.redrawHint("select",!0),r.redraw())}Xe&&Xe.pannable()&&Xe.active()&&Xe.unactivate()}}else{if(Xe&&Xe.pannable()&&Xe.active()&&Xe.unactivate(),(!Xe||!Xe.grabbed())&&nt!=at&&(at&&a(at,["mouseout","tapdragout"],O,{x:De[0],y:De[1]}),nt&&a(nt,["mouseover","tapdragover"],O,{x:De[0],y:De[1]}),r.hoverData.last=nt),Xe)if(Dt){if(we.boxSelectionEnabled()&&Nt)Xe&&Xe.grabbed()&&(b(it),Xe.emit(kt("freeon")),it.emit(kt("free")),r.dragData.didDrag&&(Xe.emit(kt("dragfreeon")),it.emit(kt("dragfree")))),Ur();else if(Xe&&Xe.grabbed()&&r.nodeIsDraggable(Xe)){var or=!r.dragData.didDrag;or&&r.redrawHint("eles",!0),r.dragData.didDrag=!0,r.hoverData.draggingEles||w(it,{inDragLayer:!0});var Kt={x:0,y:0};if($e(st[0])&&$e(st[1])&&(Kt.x+=st[0],Kt.y+=st[1],or)){var vr=r.hoverData.dragDelta;vr&&$e(vr[0])&&$e(vr[1])&&(Kt.x+=vr[0],Kt.y+=vr[1])}r.hoverData.draggingEles=!0,it.silentShift(Kt).emit(kt("position")).emit(kt("drag")),r.redrawHint("drag",!0),r.redraw()}}else $r();_e=!0}if(Ge[2]=De[0],Ge[3]=De[1],_e)return O.stopPropagation&&O.stopPropagation(),O.preventDefault&&O.preventDefault(),!1}},!1);var D,F,T;r.registerBinding(e,"mouseup",function(O){if(!(r.hoverData.which===1&&O.which!==1&&r.hoverData.capture)){var ce=r.hoverData.capture;if(ce){r.hoverData.capture=!1;var _e=r.cy,we=r.projectIntoViewport(O.clientX,O.clientY),ke=r.selection,Oe=r.findNearestElement(we[0],we[1],!0,!1),De=r.dragData.possibleDragElements,We=r.hoverData.down,Ue=i(O);r.data.bgActivePosistion&&(r.redrawHint("select",!0),r.redraw()),r.hoverData.tapholdCancelled=!0,r.data.bgActivePosistion=void 0,We&&We.unactivate();var Ge=function(St){return{originalEvent:O,type:St,position:{x:we[0],y:we[1]}}};if(r.hoverData.which===3){var nt=Ge("cxttapend");if(We?We.emit(nt):_e.emit(nt),!r.hoverData.cxtDragged){var at=Ge("cxttap");We?We.emit(at):_e.emit(at)}r.hoverData.cxtDragged=!1,r.hoverData.which=null}else if(r.hoverData.which===1){if(a(Oe,["mouseup","tapend","vmouseup"],O,{x:we[0],y:we[1]}),!r.dragData.didDrag&&!r.hoverData.dragged&&!r.hoverData.selecting&&!r.hoverData.isOverThresholdDrag&&(a(We,["click","tap","vclick"],O,{x:we[0],y:we[1]}),F=!1,O.timeStamp-T<=_e.multiClickDebounceTime()?(D&&clearTimeout(D),F=!0,T=null,a(We,["dblclick","dbltap","vdblclick"],O,{x:we[0],y:we[1]})):(D=setTimeout(function(){F||a(We,["oneclick","onetap","voneclick"],O,{x:we[0],y:we[1]})},_e.multiClickDebounceTime()),T=O.timeStamp)),We==null&&!r.dragData.didDrag&&!r.hoverData.selecting&&!r.hoverData.dragged&&!i(O)&&(_e.$(t).unselect(["tapunselect"]),De.length>0&&r.redrawHint("eles",!0),r.dragData.possibleDragElements=De=_e.collection()),Oe==We&&!r.dragData.didDrag&&!r.hoverData.selecting&&Oe!=null&&Oe._private.selectable&&(r.hoverData.dragging||(_e.selectionType()==="additive"||Ue?Oe.selected()?Oe.unselect(["tapunselect"]):Oe.select(["tapselect"]):Ue||(_e.$(t).unmerge(Oe).unselect(["tapunselect"]),Oe.select(["tapselect"]))),r.redrawHint("eles",!0)),r.hoverData.selecting){var Xe=_e.collection(r.getAllInBox(ke[0],ke[1],ke[2],ke[3]));r.redrawHint("select",!0),Xe.length>0&&r.redrawHint("eles",!0),_e.emit(Ge("boxend"));var st=function(St){return St.selectable()&&!St.selected()};_e.selectionType()==="additive"||Ue||_e.$(t).unmerge(Xe).unselect(),Xe.emit(Ge("box")).stdFilter(st).select().emit(Ge("boxselect")),r.redraw()}if(r.hoverData.dragging&&(r.hoverData.dragging=!1,r.redrawHint("select",!0),r.redrawHint("eles",!0),r.redraw()),!ke[4]){r.redrawHint("drag",!0),r.redrawHint("eles",!0);var it=We&&We.grabbed();b(De),it&&(We.emit(Ge("freeon")),De.emit(Ge("free")),r.dragData.didDrag&&(We.emit(Ge("dragfreeon")),De.emit(Ge("dragfree"))))}}ke[4]=0,r.hoverData.down=null,r.hoverData.cxtStarted=!1,r.hoverData.draggingEles=!1,r.hoverData.selecting=!1,r.hoverData.isOverThresholdDrag=!1,r.dragData.didDrag=!1,r.hoverData.dragged=!1,r.hoverData.dragDelta=[],r.hoverData.mdownPos=null,r.hoverData.mdownGPos=null,r.hoverData.which=null}}},!1);var G=[],Q=4,W,X=1e5,Z=function(O,ce){for(var _e=0;_e<O.length;_e++)if(O[_e]%ce!==0)return!1;return!0},te=function(O){for(var ce=Math.abs(O[0]),_e=1;_e<O.length;_e++)if(Math.abs(O[_e])!==ce)return!1;return!0},N=function(O){var ce=!1,_e=O.deltaY;if(_e==null&&(O.wheelDeltaY!=null?_e=O.wheelDeltaY/4:O.wheelDelta!=null&&(_e=O.wheelDelta/4)),_e!==0){if(W==null)if(G.length>=Q){var we=G;if(W=Z(we,5),!W){var ke=Math.abs(we[0]);W=te(we)&&ke>5}if(W)for(var Oe=0;Oe<we.length;Oe++)X=Math.min(Math.abs(we[Oe]),X)}else G.push(_e),ce=!0;else W&&(X=Math.min(Math.abs(_e),X));if(!r.scrollingPage){var De=r.cy,We=De.zoom(),Ue=De.pan(),Ge=r.projectIntoViewport(O.clientX,O.clientY),nt=[Ge[0]*We+Ue.x,Ge[1]*We+Ue.y];if(r.hoverData.draggingEles||r.hoverData.dragging||r.hoverData.cxtStarted||M()){O.preventDefault();return}if(De.panningEnabled()&&De.userPanningEnabled()&&De.zoomingEnabled()&&De.userZoomingEnabled()){O.preventDefault(),r.data.wheelZooming=!0,clearTimeout(r.data.wheelTimeout),r.data.wheelTimeout=setTimeout(function(){r.data.wheelZooming=!1,r.redrawHint("eles",!0),r.redraw()},150);var at;ce&&Math.abs(_e)>5&&(_e=rv(_e)*5),at=_e/-250,W&&(at/=X,at*=3),at=at*r.wheelSensitivity;var Xe=O.deltaMode===1;Xe&&(at*=33);var st=De.zoom()*Math.pow(10,at);O.type==="gesturechange"&&(st=r.gestureStartZoom*O.scale),De.zoom({level:st,renderedPosition:{x:nt[0],y:nt[1]}}),De.emit({type:O.type==="gesturechange"?"pinchzoom":"scrollzoom",originalEvent:O,position:{x:Ge[0],y:Ge[1]}})}}}};r.registerBinding(r.container,"wheel",N,!0),r.registerBinding(e,"scroll",function(O){r.scrollingPage=!0,clearTimeout(r.scrollingPageTimeout),r.scrollingPageTimeout=setTimeout(function(){r.scrollingPage=!1},250)},!0),r.registerBinding(r.container,"gesturestart",function(O){r.gestureStartZoom=r.cy.zoom(),r.hasTouchStarted||O.preventDefault()},!0),r.registerBinding(r.container,"gesturechange",function(J){r.hasTouchStarted||N(J)},!0),r.registerBinding(r.container,"mouseout",function(O){var ce=r.projectIntoViewport(O.clientX,O.clientY);r.cy.emit({originalEvent:O,type:"mouseout",position:{x:ce[0],y:ce[1]}})},!1),r.registerBinding(r.container,"mouseover",function(O){var ce=r.projectIntoViewport(O.clientX,O.clientY);r.cy.emit({originalEvent:O,type:"mouseover",position:{x:ce[0],y:ce[1]}})},!1);var $,oe,ie,ne,xe,Pe,Ce,me,fe,he,Ee,Re,I,pe=function(O,ce,_e,we){return Math.sqrt((_e-O)*(_e-O)+(we-ce)*(we-ce))},ge=function(O,ce,_e,we){return(_e-O)*(_e-O)+(we-ce)*(we-ce)},Y;r.registerBinding(r.container,"touchstart",Y=function(O){if(r.hasTouchStarted=!0,!!U(O)){_(),r.touchData.capture=!0,r.data.bgActivePosistion=void 0;var ce=r.cy,_e=r.touchData.now,we=r.touchData.earlier;if(O.touches[0]){var ke=r.projectIntoViewport(O.touches[0].clientX,O.touches[0].clientY);_e[0]=ke[0],_e[1]=ke[1]}if(O.touches[1]){var ke=r.projectIntoViewport(O.touches[1].clientX,O.touches[1].clientY);_e[2]=ke[0],_e[3]=ke[1]}if(O.touches[2]){var ke=r.projectIntoViewport(O.touches[2].clientX,O.touches[2].clientY);_e[4]=ke[0],_e[5]=ke[1]}var Oe=function(Nt){return{originalEvent:O,type:Nt,position:{x:_e[0],y:_e[1]}}};if(O.touches[1]){r.touchData.singleTouchMoved=!0,b(r.dragData.touchDragEles);var De=r.findContainerClientCoords();fe=De[0],he=De[1],Ee=De[2],Re=De[3],$=O.touches[0].clientX-fe,oe=O.touches[0].clientY-he,ie=O.touches[1].clientX-fe,ne=O.touches[1].clientY-he,I=0<=$&&$<=Ee&&0<=ie&&ie<=Ee&&0<=oe&&oe<=Re&&0<=ne&&ne<=Re;var We=ce.pan(),Ue=ce.zoom();xe=pe($,oe,ie,ne),Pe=ge($,oe,ie,ne),Ce=[($+ie)/2,(oe+ne)/2],me=[(Ce[0]-We.x)/Ue,(Ce[1]-We.y)/Ue];var Ge=200,nt=Ge*Ge;if(Pe<nt&&!O.touches[2]){var at=r.findNearestElement(_e[0],_e[1],!0,!0),Xe=r.findNearestElement(_e[2],_e[3],!0,!0);at&&at.isNode()?(at.activate().emit(Oe("cxttapstart")),r.touchData.start=at):Xe&&Xe.isNode()?(Xe.activate().emit(Oe("cxttapstart")),r.touchData.start=Xe):ce.emit(Oe("cxttapstart")),r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxt=!0,r.touchData.cxtDragged=!1,r.data.bgActivePosistion=void 0,r.redraw();return}}if(O.touches[2])ce.boxSelectionEnabled()&&O.preventDefault();else if(!O.touches[1]){if(O.touches[0]){var st=r.findNearestElements(_e[0],_e[1],!0,!0),it=st[0];if(it!=null&&(it.activate(),r.touchData.start=it,r.touchData.starts=st,r.nodeIsGrabbable(it))){var Dt=r.dragData.touchDragEles=ce.collection(),St=null;r.redrawHint("eles",!0),r.redrawHint("drag",!0),it.selected()?(St=ce.$(function(Vt){return Vt.selected()&&r.nodeIsGrabbable(Vt)}),w(St,{addToList:Dt})):x(it,{addToList:Dt}),h(it),it.emit(Oe("grabon")),St?St.forEach(function(Vt){Vt.emit(Oe("grab"))}):it.emit(Oe("grab"))}a(it,["touchstart","tapstart","vmousedown"],O,{x:_e[0],y:_e[1]}),it==null&&(r.data.bgActivePosistion={x:ke[0],y:ke[1]},r.redrawHint("select",!0),r.redraw()),r.touchData.singleTouchMoved=!1,r.touchData.singleTouchStartTime=+new Date,clearTimeout(r.touchData.tapholdTimeout),r.touchData.tapholdTimeout=setTimeout(function(){r.touchData.singleTouchMoved===!1&&!r.pinching&&!r.touchData.selecting&&a(r.touchData.start,["taphold"],O,{x:_e[0],y:_e[1]})},r.tapholdDuration)}}if(O.touches.length>=1){for(var jt=r.touchData.startPosition=[null,null,null,null,null,null],Rt=0;Rt<_e.length;Rt++)jt[Rt]=we[Rt]=_e[Rt];var Bt=O.touches[0];r.touchData.startGPosition=[Bt.clientX,Bt.clientY]}}},!1);var K;r.registerBinding(e,"touchmove",K=function(O){var ce=r.touchData.capture;if(!(!ce&&!U(O))){var _e=r.selection,we=r.cy,ke=r.touchData.now,Oe=r.touchData.earlier,De=we.zoom();if(O.touches[0]){var We=r.projectIntoViewport(O.touches[0].clientX,O.touches[0].clientY);ke[0]=We[0],ke[1]=We[1]}if(O.touches[1]){var We=r.projectIntoViewport(O.touches[1].clientX,O.touches[1].clientY);ke[2]=We[0],ke[3]=We[1]}if(O.touches[2]){var We=r.projectIntoViewport(O.touches[2].clientX,O.touches[2].clientY);ke[4]=We[0],ke[5]=We[1]}var Ue=function(ui){return{originalEvent:O,type:ui,position:{x:ke[0],y:ke[1]}}},Ge=r.touchData.startGPosition,nt;if(ce&&O.touches[0]&&Ge){for(var at=[],Xe=0;Xe<ke.length;Xe++)at[Xe]=ke[Xe]-Oe[Xe];var st=O.touches[0].clientX-Ge[0],it=st*st,Dt=O.touches[0].clientY-Ge[1],St=Dt*Dt,jt=it+St;nt=jt>=r.touchTapThreshold2}if(ce&&r.touchData.cxt){O.preventDefault();var Rt=O.touches[0].clientX-fe,Bt=O.touches[0].clientY-he,Vt=O.touches[1].clientX-fe,Nt=O.touches[1].clientY-he,$r=ge(Rt,Bt,Vt,Nt),kt=$r/Pe,Ur=150,an=Ur*Ur,qn=1.5,si=qn*qn;if(kt>=si||$r>=an){r.touchData.cxt=!1,r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);var _r=Ue("cxttapend");r.touchData.start?(r.touchData.start.unactivate().emit(_r),r.touchData.start=null):we.emit(_r)}}if(ce&&r.touchData.cxt){var _r=Ue("cxtdrag");r.data.bgActivePosistion=void 0,r.redrawHint("select",!0),r.touchData.start?r.touchData.start.emit(_r):we.emit(_r),r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxtDragged=!0;var or=r.findNearestElement(ke[0],ke[1],!0,!0);(!r.touchData.cxtOver||or!==r.touchData.cxtOver)&&(r.touchData.cxtOver&&r.touchData.cxtOver.emit(Ue("cxtdragout")),r.touchData.cxtOver=or,or&&or.emit(Ue("cxtdragover")))}else if(ce&&O.touches[2]&&we.boxSelectionEnabled())O.preventDefault(),r.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,r.touchData.selecting||we.emit(Ue("boxstart")),r.touchData.selecting=!0,r.touchData.didSelect=!0,_e[4]=1,!_e||_e.length===0||_e[0]===void 0?(_e[0]=(ke[0]+ke[2]+ke[4])/3,_e[1]=(ke[1]+ke[3]+ke[5])/3,_e[2]=(ke[0]+ke[2]+ke[4])/3+1,_e[3]=(ke[1]+ke[3]+ke[5])/3+1):(_e[2]=(ke[0]+ke[2]+ke[4])/3,_e[3]=(ke[1]+ke[3]+ke[5])/3),r.redrawHint("select",!0),r.redraw();else if(ce&&O.touches[1]&&!r.touchData.didSelect&&we.zoomingEnabled()&&we.panningEnabled()&&we.userZoomingEnabled()&&we.userPanningEnabled()){O.preventDefault(),r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);var Kt=r.dragData.touchDragEles;if(Kt){r.redrawHint("drag",!0);for(var vr=0;vr<Kt.length;vr++){var Wn=Kt[vr]._private;Wn.grabbed=!1,Wn.rscratch.inDragLayer=!1}}var Sr=r.touchData.start,Rt=O.touches[0].clientX-fe,Bt=O.touches[0].clientY-he,Vt=O.touches[1].clientX-fe,Nt=O.touches[1].clientY-he,is=pe(Rt,Bt,Vt,Nt),Oo=is/xe;if(I){var Qu=Rt-$,Ju=Bt-oe,Lt=Vt-ie,ec=Nt-ne,ss=(Qu+Lt)/2,Mo=(Ju+ec)/2,gn=we.zoom(),os=gn*Oo,Ba=we.pan(),Aa=me[0]*gn+Ba.x,jr=me[1]*gn+Ba.y,tc={x:-os/gn*(Aa-Ba.x-ss)+Aa,y:-os/gn*(jr-Ba.y-Mo)+jr};if(Sr&&Sr.active()){var Kt=r.dragData.touchDragEles;b(Kt),r.redrawHint("drag",!0),r.redrawHint("eles",!0),Sr.unactivate().emit(Ue("freeon")),Kt.emit(Ue("free")),r.dragData.didDrag&&(Sr.emit(Ue("dragfreeon")),Kt.emit(Ue("dragfree")))}we.viewport({zoom:os,pan:tc,cancelOnFailedZoom:!0}),we.emit(Ue("pinchzoom")),xe=is,$=Rt,oe=Bt,ie=Vt,ne=Nt,r.pinching=!0}if(O.touches[0]){var We=r.projectIntoViewport(O.touches[0].clientX,O.touches[0].clientY);ke[0]=We[0],ke[1]=We[1]}if(O.touches[1]){var We=r.projectIntoViewport(O.touches[1].clientX,O.touches[1].clientY);ke[2]=We[0],ke[3]=We[1]}if(O.touches[2]){var We=r.projectIntoViewport(O.touches[2].clientX,O.touches[2].clientY);ke[4]=We[0],ke[5]=We[1]}}else if(O.touches[0]&&!r.touchData.didSelect){var Ot=r.touchData.start,ls=r.touchData.last,or;if(!r.hoverData.draggingEles&&!r.swipePanning&&(or=r.findNearestElement(ke[0],ke[1],!0,!0)),ce&&Ot!=null&&O.preventDefault(),ce&&Ot!=null&&r.nodeIsDraggable(Ot))if(nt){var Kt=r.dragData.touchDragEles,zo=!r.dragData.didDrag;zo&&w(Kt,{inDragLayer:!0}),r.dragData.didDrag=!0;var Ia={x:0,y:0};if($e(at[0])&&$e(at[1])&&(Ia.x+=at[0],Ia.y+=at[1],zo)){r.redrawHint("eles",!0);var pr=r.touchData.dragDelta;pr&&$e(pr[0])&&$e(pr[1])&&(Ia.x+=pr[0],Ia.y+=pr[1])}r.hoverData.draggingEles=!0,Kt.silentShift(Ia).emit(Ue("position")).emit(Ue("drag")),r.redrawHint("drag",!0),r.touchData.startPosition[0]==Oe[0]&&r.touchData.startPosition[1]==Oe[1]&&r.redrawHint("eles",!0),r.redraw()}else{var pr=r.touchData.dragDelta=r.touchData.dragDelta||[];pr.length===0?(pr.push(at[0]),pr.push(at[1])):(pr[0]+=at[0],pr[1]+=at[1])}if(a(Ot||or,["touchmove","tapdrag","vmousemove"],O,{x:ke[0],y:ke[1]}),(!Ot||!Ot.grabbed())&&or!=ls&&(ls&&ls.emit(Ue("tapdragout")),or&&or.emit(Ue("tapdragover"))),r.touchData.last=or,ce)for(var vr=0;vr<ke.length;vr++)ke[vr]&&r.touchData.startPosition[vr]&&nt&&(r.touchData.singleTouchMoved=!0);if(ce&&(Ot==null||Ot.pannable())&&we.panningEnabled()&&we.userPanningEnabled()){var oi=o(Ot,r.touchData.starts);oi&&(O.preventDefault(),r.data.bgActivePosistion||(r.data.bgActivePosistion=Vi(r.touchData.startPosition)),r.swipePanning?(we.panBy({x:at[0]*De,y:at[1]*De}),we.emit(Ue("dragpan"))):nt&&(r.swipePanning=!0,we.panBy({x:st*De,y:Dt*De}),we.emit(Ue("dragpan")),Ot&&(Ot.unactivate(),r.redrawHint("select",!0),r.touchData.start=null)));var We=r.projectIntoViewport(O.touches[0].clientX,O.touches[0].clientY);ke[0]=We[0],ke[1]=We[1]}}for(var Xe=0;Xe<ke.length;Xe++)Oe[Xe]=ke[Xe];ce&&O.touches.length>0&&!r.hoverData.draggingEles&&!r.swipePanning&&r.data.bgActivePosistion!=null&&(r.data.bgActivePosistion=void 0,r.redrawHint("select",!0),r.redraw())}},!1);var ae;r.registerBinding(e,"touchcancel",ae=function(O){var ce=r.touchData.start;r.touchData.capture=!1,ce&&ce.unactivate()});var ve,ye,se,Be;if(r.registerBinding(e,"touchend",ve=function(O){var ce=r.touchData.start,_e=r.touchData.capture;if(_e)O.touches.length===0&&(r.touchData.capture=!1),O.preventDefault();else return;var we=r.selection;r.swipePanning=!1,r.hoverData.draggingEles=!1;var ke=r.cy,Oe=ke.zoom(),De=r.touchData.now,We=r.touchData.earlier;if(O.touches[0]){var Ue=r.projectIntoViewport(O.touches[0].clientX,O.touches[0].clientY);De[0]=Ue[0],De[1]=Ue[1]}if(O.touches[1]){var Ue=r.projectIntoViewport(O.touches[1].clientX,O.touches[1].clientY);De[2]=Ue[0],De[3]=Ue[1]}if(O.touches[2]){var Ue=r.projectIntoViewport(O.touches[2].clientX,O.touches[2].clientY);De[4]=Ue[0],De[5]=Ue[1]}var Ge=function(an){return{originalEvent:O,type:an,position:{x:De[0],y:De[1]}}};ce&&ce.unactivate();var nt;if(r.touchData.cxt){if(nt=Ge("cxttapend"),ce?ce.emit(nt):ke.emit(nt),!r.touchData.cxtDragged){var at=Ge("cxttap");ce?ce.emit(at):ke.emit(at)}r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxt=!1,r.touchData.start=null,r.redraw();return}if(!O.touches[2]&&ke.boxSelectionEnabled()&&r.touchData.selecting){r.touchData.selecting=!1;var Xe=ke.collection(r.getAllInBox(we[0],we[1],we[2],we[3]));we[0]=void 0,we[1]=void 0,we[2]=void 0,we[3]=void 0,we[4]=0,r.redrawHint("select",!0),ke.emit(Ge("boxend"));var st=function(an){return an.selectable()&&!an.selected()};Xe.emit(Ge("box")).stdFilter(st).select().emit(Ge("boxselect")),Xe.nonempty()&&r.redrawHint("eles",!0),r.redraw()}if(ce!=null&&ce.unactivate(),O.touches[2])r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);else if(!O.touches[1]){if(!O.touches[0]){if(!O.touches[0]){r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);var it=r.dragData.touchDragEles;if(ce!=null){var Dt=ce._private.grabbed;b(it),r.redrawHint("drag",!0),r.redrawHint("eles",!0),Dt&&(ce.emit(Ge("freeon")),it.emit(Ge("free")),r.dragData.didDrag&&(ce.emit(Ge("dragfreeon")),it.emit(Ge("dragfree")))),a(ce,["touchend","tapend","vmouseup","tapdragout"],O,{x:De[0],y:De[1]}),ce.unactivate(),r.touchData.start=null}else{var St=r.findNearestElement(De[0],De[1],!0,!0);a(St,["touchend","tapend","vmouseup","tapdragout"],O,{x:De[0],y:De[1]})}var jt=r.touchData.startPosition[0]-De[0],Rt=jt*jt,Bt=r.touchData.startPosition[1]-De[1],Vt=Bt*Bt,Nt=Rt+Vt,$r=Nt*Oe*Oe;r.touchData.singleTouchMoved||(ce||ke.$(":selected").unselect(["tapunselect"]),a(ce,["tap","vclick"],O,{x:De[0],y:De[1]}),ye=!1,O.timeStamp-Be<=ke.multiClickDebounceTime()?(se&&clearTimeout(se),ye=!0,Be=null,a(ce,["dbltap","vdblclick"],O,{x:De[0],y:De[1]})):(se=setTimeout(function(){ye||a(ce,["onetap","voneclick"],O,{x:De[0],y:De[1]})},ke.multiClickDebounceTime()),Be=O.timeStamp)),ce!=null&&!r.dragData.didDrag&&ce._private.selectable&&$r<r.touchTapThreshold2&&!r.pinching&&(ke.selectionType()==="single"?(ke.$(t).unmerge(ce).unselect(["tapunselect"]),ce.select(["tapselect"])):ce.selected()?ce.unselect(["tapunselect"]):ce.select(["tapselect"]),r.redrawHint("eles",!0)),r.touchData.singleTouchMoved=!0}}}for(var kt=0;kt<De.length;kt++)We[kt]=De[kt];r.dragData.didDrag=!1,O.touches.length===0&&(r.touchData.dragDelta=[],r.touchData.startPosition=[null,null,null,null,null,null],r.touchData.startGPosition=null,r.touchData.didSelect=!1),O.touches.length<2&&(O.touches.length===1&&(r.touchData.startGPosition=[O.touches[0].clientX,O.touches[0].clientY]),r.pinching=!1,r.redrawHint("eles",!0),r.redraw())},!1),typeof TouchEvent>"u"){var Ie=[],Ae=function(O){return{clientX:O.clientX,clientY:O.clientY,force:1,identifier:O.pointerId,pageX:O.pageX,pageY:O.pageY,radiusX:O.width/2,radiusY:O.height/2,screenX:O.screenX,screenY:O.screenY,target:O.target}},ze=function(O){return{event:O,touch:Ae(O)}},j=function(O){Ie.push(ze(O))},k=function(O){for(var ce=0;ce<Ie.length;ce++){var _e=Ie[ce];if(_e.event.pointerId===O.pointerId){Ie.splice(ce,1);return}}},R=function(O){var ce=Ie.filter(function(_e){return _e.event.pointerId===O.pointerId})[0];ce.event=O,ce.touch=Ae(O)},H=function(O){O.touches=Ie.map(function(ce){return ce.touch})},ee=function(O){return O.pointerType==="mouse"||O.pointerType===4};r.registerBinding(r.container,"pointerdown",function(J){ee(J)||(J.preventDefault(),j(J),H(J),Y(J))}),r.registerBinding(r.container,"pointerup",function(J){ee(J)||(k(J),H(J),ve(J))}),r.registerBinding(r.container,"pointercancel",function(J){ee(J)||(k(J),H(J),ae(J))}),r.registerBinding(r.container,"pointermove",function(J){ee(J)||(J.preventDefault(),R(J),H(J),K(J))})}};var jn={};jn.generatePolygon=function(r,e){return this.nodeShapes[r]={renderer:this,name:r,points:e,draw:function(n,a,i,o,l,c){this.renderer.nodeShapeImpl("polygon",n,a,i,o,l,this.points)},intersectLine:function(n,a,i,o,l,c,f,d){return po(l,c,this.points,n,a,i/2,o/2,f)},checkPoint:function(n,a,i,o,l,c,f,d){return Un(n,a,this.points,c,f,o,l,[0,-1],i)},hasMiterBounds:r!=="rectangle",miterBounds:function(n,a,i,o,l,c){return wS(this.points,n,a,i,o,l)}}};jn.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,t,n,a,i,o){this.renderer.nodeShapeImpl(this.name,e,t,n,a,i)},intersectLine:function(e,t,n,a,i,o,l,c){return TS(i,o,e,t,n/2+l,a/2+l)},checkPoint:function(e,t,n,a,i,o,l,c){return Ya(e,t,a,i,o,l,n)}}};jn.generateRoundPolygon=function(r,e){return this.nodeShapes[r]={renderer:this,name:r,points:e,getOrCreateCorners:function(n,a,i,o,l,c,f){if(c[f]!==void 0&&c[f+"-cx"]===n&&c[f+"-cy"]===a)return c[f];c[f]=new Array(e.length/2),c[f+"-cx"]=n,c[f+"-cy"]=a;var d=i/2,h=o/2;l=l==="auto"?O1(i,o):l;for(var p=new Array(e.length/2),g=0;g<e.length/2;g++)p[g]={x:n+d*e[g*2],y:a+h*e[g*2+1]};var m,w,x,b,E=p.length;for(w=p[E-1],m=0;m<E;m++)x=p[m%E],b=p[(m+1)%E],c[f][m]=pv(w,x,b,l),w=x,x=b;return c[f]},draw:function(n,a,i,o,l,c,f){this.renderer.nodeShapeImpl("round-polygon",n,a,i,o,l,this.points,this.getOrCreateCorners(a,i,o,l,c,f,"drawCorners"))},intersectLine:function(n,a,i,o,l,c,f,d,h){return RS(l,c,this.points,n,a,i,o,f,this.getOrCreateCorners(n,a,i,o,d,h,"corners"))},checkPoint:function(n,a,i,o,l,c,f,d,h){return CS(n,a,this.points,c,f,o,l,this.getOrCreateCorners(c,f,o,l,d,h,"corners"))}}};jn.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:Pr(4,0),draw:function(e,t,n,a,i,o){this.renderer.nodeShapeImpl(this.name,e,t,n,a,i,this.points,o)},intersectLine:function(e,t,n,a,i,o,l,c){return N1(i,o,e,t,n,a,l,c)},checkPoint:function(e,t,n,a,i,o,l,c){var f=a/2,d=i/2;c=c==="auto"?ba(a,i):c,c=Math.min(f,d,c);var h=c*2;return!!(Un(e,t,this.points,o,l,a,i-h,[0,-1],n)||Un(e,t,this.points,o,l,a-h,i,[0,-1],n)||Ya(e,t,h,h,o-f+c,l-d+c,n)||Ya(e,t,h,h,o+f-c,l-d+c,n)||Ya(e,t,h,h,o+f-c,l+d-c,n)||Ya(e,t,h,h,o-f+c,l+d-c,n))}}};jn.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:av(),points:Pr(4,0),draw:function(e,t,n,a,i,o){this.renderer.nodeShapeImpl(this.name,e,t,n,a,i,null,o)},generateCutTrianglePts:function(e,t,n,a,i){var o=i==="auto"?this.cornerLength:i,l=t/2,c=e/2,f=n-c,d=n+c,h=a-l,p=a+l;return{topLeft:[f,h+o,f+o,h,f+o,h+o],topRight:[d-o,h,d,h+o,d-o,h+o],bottomRight:[d,p-o,d-o,p,d-o,p-o],bottomLeft:[f+o,p,f,p-o,f+o,p-o]}},intersectLine:function(e,t,n,a,i,o,l,c){var f=this.generateCutTrianglePts(n+2*l,a+2*l,e,t,c),d=[].concat.apply([],[f.topLeft.splice(0,4),f.topRight.splice(0,4),f.bottomRight.splice(0,4),f.bottomLeft.splice(0,4)]);return po(i,o,d,e,t)},checkPoint:function(e,t,n,a,i,o,l,c){var f=c==="auto"?this.cornerLength:c;if(Un(e,t,this.points,o,l,a,i-2*f,[0,-1],n)||Un(e,t,this.points,o,l,a-2*f,i,[0,-1],n))return!0;var d=this.generateCutTrianglePts(a,i,o,l);return zr(e,t,d.topLeft)||zr(e,t,d.topRight)||zr(e,t,d.bottomRight)||zr(e,t,d.bottomLeft)}}};jn.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:Pr(4,0),draw:function(e,t,n,a,i,o){this.renderer.nodeShapeImpl(this.name,e,t,n,a,i)},intersectLine:function(e,t,n,a,i,o,l,c){var f=.15,d=.5,h=.85,p=this.generateBarrelBezierPts(n+2*l,a+2*l,e,t),g=function(x){var b=Gi({x:x[0],y:x[1]},{x:x[2],y:x[3]},{x:x[4],y:x[5]},f),E=Gi({x:x[0],y:x[1]},{x:x[2],y:x[3]},{x:x[4],y:x[5]},d),_=Gi({x:x[0],y:x[1]},{x:x[2],y:x[3]},{x:x[4],y:x[5]},h);return[x[0],x[1],b.x,b.y,E.x,E.y,_.x,_.y,x[4],x[5]]},m=[].concat(g(p.topLeft),g(p.topRight),g(p.bottomRight),g(p.bottomLeft));return po(i,o,m,e,t)},generateBarrelBezierPts:function(e,t,n,a){var i=t/2,o=e/2,l=n-o,c=n+o,f=a-i,d=a+i,h=Th(e,t),p=h.heightOffset,g=h.widthOffset,m=h.ctrlPtOffsetPct*e,w={topLeft:[l,f+p,l+m,f,l+g,f],topRight:[c-g,f,c-m,f,c,f+p],bottomRight:[c,d-p,c-m,d,c-g,d],bottomLeft:[l+g,d,l+m,d,l,d-p]};return w.topLeft.isTop=!0,w.topRight.isTop=!0,w.bottomLeft.isBottom=!0,w.bottomRight.isBottom=!0,w},checkPoint:function(e,t,n,a,i,o,l,c){var f=Th(a,i),d=f.heightOffset,h=f.widthOffset;if(Un(e,t,this.points,o,l,a,i-2*d,[0,-1],n)||Un(e,t,this.points,o,l,a-2*h,i,[0,-1],n))return!0;for(var p=this.generateBarrelBezierPts(a,i,o,l),g=function(z,M,U){var q=U[4],D=U[2],F=U[0],T=U[5],G=U[1],Q=Math.min(q,F),W=Math.max(q,F),X=Math.min(T,G),Z=Math.max(T,G);if(Q<=z&&z<=W&&X<=M&&M<=Z){var te=BS(q,D,F),N=ES(te[0],te[1],te[2],z),$=N.filter(function(oe){return 0<=oe&&oe<=1});if($.length>0)return $[0]}return null},m=Object.keys(p),w=0;w<m.length;w++){var x=m[w],b=p[x],E=g(e,t,b);if(E!=null){var _=b[5],C=b[3],B=b[1],L=ar(_,C,B,E);if(b.isTop&&L<=t||b.isBottom&&t<=L)return!0}}return!1}}};jn.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:Pr(4,0),draw:function(e,t,n,a,i,o){this.renderer.nodeShapeImpl(this.name,e,t,n,a,i,this.points,o)},intersectLine:function(e,t,n,a,i,o,l,c){var f=e-(n/2+l),d=t-(a/2+l),h=d,p=e+(n/2+l),g=ga(i,o,e,t,f,d,p,h,!1);return g.length>0?g:N1(i,o,e,t,n,a,l,c)},checkPoint:function(e,t,n,a,i,o,l,c){c=c==="auto"?ba(a,i):c;var f=2*c;if(Un(e,t,this.points,o,l,a,i-f,[0,-1],n)||Un(e,t,this.points,o,l,a-f,i,[0,-1],n))return!0;var d=a/2+2*n,h=i/2+2*n,p=[o-d,l-h,o-d,l,o+d,l,o+d,l-h];return!!(zr(e,t,p)||Ya(e,t,f,f,o+a/2-c,l+i/2-c,n)||Ya(e,t,f,f,o-a/2+c,l+i/2-c,n))}}};jn.registerNodeShapes=function(){var r=this.nodeShapes={},e=this;this.generateEllipse(),this.generatePolygon("triangle",Pr(3,0)),this.generateRoundPolygon("round-triangle",Pr(3,0)),this.generatePolygon("rectangle",Pr(4,0)),r.square=r.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();{var t=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",t),this.generateRoundPolygon("round-diamond",t)}this.generatePolygon("pentagon",Pr(5,0)),this.generateRoundPolygon("round-pentagon",Pr(5,0)),this.generatePolygon("hexagon",Pr(6,0)),this.generateRoundPolygon("round-hexagon",Pr(6,0)),this.generatePolygon("heptagon",Pr(7,0)),this.generateRoundPolygon("round-heptagon",Pr(7,0)),this.generatePolygon("octagon",Pr(8,0)),this.generateRoundPolygon("round-octagon",Pr(8,0));var n=new Array(20);{var a=Ch(5,0),i=Ch(5,Math.PI/5),o=.5*(3-Math.sqrt(5));o*=1.57;for(var l=0;l<i.length/2;l++)i[l*2]*=o,i[l*2+1]*=o;for(var l=0;l<20/4;l++)n[l*4]=a[l*2],n[l*4+1]=a[l*2+1],n[l*4+2]=i[l*2],n[l*4+3]=i[l*2+1]}n=L1(n),this.generatePolygon("star",n),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);{var c=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",c),this.generateRoundPolygon("round-tag",c)}r.makePolygon=function(f){var d=f.join("$"),h="polygon-"+d,p;return(p=this[h])?p:e.generatePolygon(h,f)}};var No={};No.timeToRender=function(){return this.redrawTotalTime/this.redrawCount};No.redraw=function(r){r=r||B1();var e=this;e.averageRedrawTime===void 0&&(e.averageRedrawTime=0),e.lastRedrawTime===void 0&&(e.lastRedrawTime=0),e.lastDrawTime===void 0&&(e.lastDrawTime=0),e.requestedFrame=!0,e.renderOptions=r};No.beforeRender=function(r,e){if(!this.destroyed){e==null&&It("Priority is not optional for beforeRender");var t=this.beforeRenderCallbacks;t.push({fn:r,priority:e}),t.sort(function(n,a){return a.priority-n.priority})}};var B0=function(e,t,n){for(var a=e.beforeRenderCallbacks,i=0;i<a.length;i++)a[i].fn(t,n)};No.startRenderLoop=function(){var r=this,e=r.cy;if(!r.renderLoopStarted){r.renderLoopStarted=!0;var t=function(a){if(!r.destroyed){if(!e.batching())if(r.requestedFrame&&!r.skipFrame){B0(r,!0,a);var i=$n();r.render(r.renderOptions);var o=r.lastDrawTime=$n();r.averageRedrawTime===void 0&&(r.averageRedrawTime=o-i),r.redrawCount===void 0&&(r.redrawCount=0),r.redrawCount++,r.redrawTotalTime===void 0&&(r.redrawTotalTime=0);var l=o-i;r.redrawTotalTime+=l,r.lastRedrawTime=l,r.averageRedrawTime=r.averageRedrawTime/2+l/2,r.requestedFrame=!1}else B0(r,!1,a);r.skipFrame=!1,xu(t)}};xu(t)}};var GT=function(e){this.init(e)},Ow=GT,as=Ow.prototype;as.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"];as.init=function(r){var e=this;e.options=r,e.cy=r.cy;var t=e.container=r.cy.container(),n=e.cy.window();if(n){var a=n.document,i=a.head,o="__________cytoscape_stylesheet",l="__________cytoscape_container",c=a.getElementById(o)!=null;if(t.className.indexOf(l)<0&&(t.className=(t.className||"")+" "+l),!c){var f=a.createElement("style");f.id=o,f.textContent="."+l+" { position: relative; }",i.insertBefore(f,i.children[0])}var d=n.getComputedStyle(t),h=d.getPropertyValue("position");h==="static"&&gt("A Cytoscape container has style position:static and so can not use UI extensions properly")}e.selection=[void 0,void 0,void 0,void 0,0],e.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=r.showFps,e.debug=r.debug,e.webgl=r.webgl,e.hideEdgesOnViewport=r.hideEdgesOnViewport,e.textureOnViewport=r.textureOnViewport,e.wheelSensitivity=r.wheelSensitivity,e.motionBlurEnabled=r.motionBlur,e.forcedPixelRatio=$e(r.pixelRatio)?r.pixelRatio:null,e.motionBlur=r.motionBlur,e.motionBlurOpacity=r.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=r.desktopTapThreshold,e.desktopTapThreshold2=r.desktopTapThreshold*r.desktopTapThreshold,e.touchTapThreshold=r.touchTapThreshold,e.touchTapThreshold2=r.touchTapThreshold*r.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.beforeRenderCallbacks=[],e.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},e.registerNodeShapes(),e.registerArrowShapes(),e.registerCalculationListeners()};as.notify=function(r,e){var t=this,n=t.cy;if(!this.destroyed){if(r==="init"){t.load();return}if(r==="destroy"){t.destroy();return}(r==="add"||r==="remove"||r==="move"&&n.hasCompoundNodes()||r==="load"||r==="zorder"||r==="mount")&&t.invalidateCachedZSortedEles(),r==="viewport"&&t.redrawHint("select",!0),r==="gc"&&t.redrawHint("gc",!0),(r==="load"||r==="resize"||r==="mount")&&(t.invalidateContainerClientCoordsCache(),t.matchCanvasSize(t.container)),t.redrawHint("eles",!0),t.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}};as.destroy=function(){var r=this;r.destroyed=!0,r.cy.stopAnimationLoop();for(var e=0;e<r.bindings.length;e++){var t=r.bindings[e],n=t,a=n.target;(a.off||a.removeEventListener).apply(a,n.args)}if(r.bindings=[],r.beforeRenderCallbacks=[],r.onUpdateEleCalcsFns=[],r.removeObserver&&r.removeObserver.disconnect(),r.styleObserver&&r.styleObserver.disconnect(),r.resizeObserver&&r.resizeObserver.disconnect(),r.labelCalcDiv)try{document.body.removeChild(r.labelCalcDiv)}catch{}};as.isHeadless=function(){return!1};[vv,Nw,Lw,ns,jn,No].forEach(function(r){tt(as,r)});var gh=1e3/60,Mw={setupDequeueing:function(e){return function(){var n=this,a=this.renderer;if(!n.dequeueingSetup){n.dequeueingSetup=!0;var i=Ro(function(){a.redrawHint("eles",!0),a.redrawHint("drag",!0),a.redraw()},e.deqRedrawThreshold),o=function(f,d){var h=$n(),p=a.averageRedrawTime,g=a.lastRedrawTime,m=[],w=a.cy.extent(),x=a.getPixelRatio();for(f||a.flushRenderedStyleQueue();;){var b=$n(),E=b-h,_=b-d;if(g<gh){var C=gh-(f?p:0);if(_>=e.deqFastCost*C)break}else if(f){if(E>=e.deqCost*g||E>=e.deqAvgCost*p)break}else if(_>=e.deqNoDrawCost*gh)break;var B=e.deq(n,x,w);if(B.length>0)for(var L=0;L<B.length;L++)m.push(B[L]);else break}m.length>0&&(e.onDeqd(n,m),!f&&e.shouldRedraw(n,m,x,w)&&i())},l=e.priority||Jh;a.beforeRender(o,l(n))}}}},HT=(function(){function r(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:bu;ka(this,r),this.idsByKey=new Fn,this.keyForId=new Fn,this.cachesByLvl=new Fn,this.lvls=[],this.getKey=e,this.doesEleInvalidateKey=t}return Ca(r,[{key:"getIdsFor",value:function(t){t==null&&It("Can not get id list for null key");var n=this.idsByKey,a=this.idsByKey.get(t);return a||(a=new Ji,n.set(t,a)),a}},{key:"addIdForKey",value:function(t,n){t!=null&&this.getIdsFor(t).add(n)}},{key:"deleteIdForKey",value:function(t,n){t!=null&&this.getIdsFor(t).delete(n)}},{key:"getNumberOfIdsForKey",value:function(t){return t==null?0:this.getIdsFor(t).size}},{key:"updateKeyMappingFor",value:function(t){var n=t.id(),a=this.keyForId.get(n),i=this.getKey(t);this.deleteIdForKey(a,n),this.addIdForKey(i,n),this.keyForId.set(n,i)}},{key:"deleteKeyMappingFor",value:function(t){var n=t.id(),a=this.keyForId.get(n);this.deleteIdForKey(a,n),this.keyForId.delete(n)}},{key:"keyHasChangedFor",value:function(t){var n=t.id(),a=this.keyForId.get(n),i=this.getKey(t);return a!==i}},{key:"isInvalid",value:function(t){return this.keyHasChangedFor(t)||this.doesEleInvalidateKey(t)}},{key:"getCachesAt",value:function(t){var n=this.cachesByLvl,a=this.lvls,i=n.get(t);return i||(i=new Fn,n.set(t,i),a.push(t)),i}},{key:"getCache",value:function(t,n){return this.getCachesAt(n).get(t)}},{key:"get",value:function(t,n){var a=this.getKey(t),i=this.getCache(a,n);return i!=null&&this.updateKeyMappingFor(t),i}},{key:"getForCachedKey",value:function(t,n){var a=this.keyForId.get(t.id()),i=this.getCache(a,n);return i}},{key:"hasCache",value:function(t,n){return this.getCachesAt(n).has(t)}},{key:"has",value:function(t,n){var a=this.getKey(t);return this.hasCache(a,n)}},{key:"setCache",value:function(t,n,a){a.key=t,this.getCachesAt(n).set(t,a)}},{key:"set",value:function(t,n,a){var i=this.getKey(t);this.setCache(i,n,a),this.updateKeyMappingFor(t)}},{key:"deleteCache",value:function(t,n){this.getCachesAt(n).delete(t)}},{key:"delete",value:function(t,n){var a=this.getKey(t);this.deleteCache(a,n)}},{key:"invalidateKey",value:function(t){var n=this;this.lvls.forEach(function(a){return n.deleteCache(t,a)})}},{key:"invalidate",value:function(t){var n=t.id(),a=this.keyForId.get(n);this.deleteKeyMappingFor(t);var i=this.doesEleInvalidateKey(t);return i&&this.invalidateKey(a),i||this.getNumberOfIdsForKey(a)===0}}])})(),A0=25,nu=50,gu=-4,$h=3,zw=7.99,KT=8,XT=1024,ZT=1024,YT=1024,QT=.2,JT=.8,eP=10,tP=.15,rP=.1,nP=.9,aP=.9,iP=100,sP=1,Wi={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},oP=dr({getKey:null,doesEleInvalidateKey:bu,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:T1,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),io=function(e,t){var n=this;n.renderer=e,n.onDequeues=[];var a=oP(t);tt(n,a),n.lookup=new HT(a.getKey,a.doesEleInvalidateKey),n.setupDequeueing()},er=io.prototype;er.reasons=Wi;er.getTextureQueue=function(r){var e=this;return e.eleImgCaches=e.eleImgCaches||{},e.eleImgCaches[r]=e.eleImgCaches[r]||[]};er.getRetiredTextureQueue=function(r){var e=this,t=e.eleImgCaches.retired=e.eleImgCaches.retired||{},n=t[r]=t[r]||[];return n};er.getElementQueue=function(){var r=this,e=r.eleCacheQueue=r.eleCacheQueue||new Bo(function(t,n){return n.reqs-t.reqs});return e};er.getElementKeyToQueue=function(){var r=this,e=r.eleKeyToCacheQueue=r.eleKeyToCacheQueue||{};return e};er.getElement=function(r,e,t,n,a){var i=this,o=this.renderer,l=o.cy.zoom(),c=this.lookup;if(!e||e.w===0||e.h===0||isNaN(e.w)||isNaN(e.h)||!r.visible()||r.removed()||!i.allowEdgeTxrCaching&&r.isEdge()||!i.allowParentTxrCaching&&r.isParent())return null;if(n==null&&(n=Math.ceil(tv(l*t))),n<gu)n=gu;else if(l>=zw||n>$h)return null;var f=Math.pow(2,n),d=e.h*f,h=e.w*f,p=o.eleTextBiggerThanMin(r,f);if(!this.isVisible(r,p))return null;var g=c.get(r,n);if(g&&g.invalidated&&(g.invalidated=!1,g.texture.invalidatedWidth-=g.width),g)return g;var m;if(d<=A0?m=A0:d<=nu?m=nu:m=Math.ceil(d/nu)*nu,d>YT||h>ZT)return null;var w=i.getTextureQueue(m),x=w[w.length-2],b=function(){return i.recycleTexture(m,h)||i.addTexture(m,h)};x||(x=w[w.length-1]),x||(x=b()),x.width-x.usedWidth<h&&(x=b());for(var E=function(Q){return Q&&Q.scaledLabelShown===p},_=a&&a===Wi.dequeue,C=a&&a===Wi.highQuality,B=a&&a===Wi.downscale,L,A=n+1;A<=$h;A++){var z=c.get(r,A);if(z){L=z;break}}var M=L&&L.level===n+1?L:null,U=function(){x.context.drawImage(M.texture.canvas,M.x,0,M.width,M.height,x.usedWidth,0,h,d)};if(x.context.setTransform(1,0,0,1,0,0),x.context.clearRect(x.usedWidth,0,h,m),E(M))U();else if(E(L))if(C){for(var q=L.level;q>n;q--)M=i.getElement(r,e,t,q,Wi.downscale);U()}else return i.queueElement(r,L.level-1),L;else{var D;if(!_&&!C&&!B)for(var F=n-1;F>=gu;F--){var T=c.get(r,F);if(T){D=T;break}}if(E(D))return i.queueElement(r,n),D;x.context.translate(x.usedWidth,0),x.context.scale(f,f),this.drawElement(x.context,r,e,p,!1),x.context.scale(1/f,1/f),x.context.translate(-x.usedWidth,0)}return g={x:x.usedWidth,texture:x,level:n,scale:f,width:h,height:d,scaledLabelShown:p},x.usedWidth+=Math.ceil(h+KT),x.eleCaches.push(g),c.set(r,n,g),i.checkTextureFullness(x),g};er.invalidateElements=function(r){for(var e=0;e<r.length;e++)this.invalidateElement(r[e])};er.invalidateElement=function(r){var e=this,t=e.lookup,n=[],a=t.isInvalid(r);if(a){for(var i=gu;i<=$h;i++){var o=t.getForCachedKey(r,i);o&&n.push(o)}var l=t.invalidate(r);if(l)for(var c=0;c<n.length;c++){var f=n[c],d=f.texture;d.invalidatedWidth+=f.width,f.invalidated=!0,e.checkTextureUtility(d)}e.removeFromQueue(r)}};er.checkTextureUtility=function(r){r.invalidatedWidth>=QT*r.width&&this.retireTexture(r)};er.checkTextureFullness=function(r){var e=this,t=e.getTextureQueue(r.height);r.usedWidth/r.width>JT&&r.fullnessChecks>=eP?xa(t,r):r.fullnessChecks++};er.retireTexture=function(r){var e=this,t=r.height,n=e.getTextureQueue(t),a=this.lookup;xa(n,r),r.retired=!0;for(var i=r.eleCaches,o=0;o<i.length;o++){var l=i[o];a.deleteCache(l.key,l.level)}ev(i);var c=e.getRetiredTextureQueue(t);c.push(r)};er.addTexture=function(r,e){var t=this,n=t.getTextureQueue(r),a={};return n.push(a),a.eleCaches=[],a.height=r,a.width=Math.max(XT,e),a.usedWidth=0,a.invalidatedWidth=0,a.fullnessChecks=0,a.canvas=t.renderer.makeOffscreenCanvas(a.width,a.height),a.context=a.canvas.getContext("2d"),a};er.recycleTexture=function(r,e){for(var t=this,n=t.getTextureQueue(r),a=t.getRetiredTextureQueue(r),i=0;i<a.length;i++){var o=a[i];if(o.width>=e)return o.retired=!1,o.usedWidth=0,o.invalidatedWidth=0,o.fullnessChecks=0,ev(o.eleCaches),o.context.setTransform(1,0,0,1,0,0),o.context.clearRect(0,0,o.width,o.height),xa(a,o),n.push(o),o}};er.queueElement=function(r,e){var t=this,n=t.getElementQueue(),a=t.getElementKeyToQueue(),i=this.getKey(r),o=a[i];if(o)o.level=Math.max(o.level,e),o.eles.merge(r),o.reqs++,n.updateItem(o);else{var l={eles:r.spawn().merge(r),level:e,reqs:1,key:i};n.push(l),a[i]=l}};er.dequeue=function(r){for(var e=this,t=e.getElementQueue(),n=e.getElementKeyToQueue(),a=[],i=e.lookup,o=0;o<sP&&t.size()>0;o++){var l=t.pop(),c=l.key,f=l.eles[0],d=i.hasCache(f,l.level);if(n[c]=null,d)continue;a.push(l);var h=e.getBoundingBox(f);e.getElement(f,h,r,l.level,Wi.dequeue)}return a};er.removeFromQueue=function(r){var e=this,t=e.getElementQueue(),n=e.getElementKeyToQueue(),a=this.getKey(r),i=n[a];i!=null&&(i.eles.length===1?(i.reqs=Qh,t.updateItem(i),t.pop(),n[a]=null):i.eles.unmerge(r))};er.onDequeue=function(r){this.onDequeues.push(r)};er.offDequeue=function(r){xa(this.onDequeues,r)};er.setupDequeueing=Mw.setupDequeueing({deqRedrawThreshold:iP,deqCost:tP,deqAvgCost:rP,deqNoDrawCost:nP,deqFastCost:aP,deq:function(e,t,n){return e.dequeue(t,n)},onDeqd:function(e,t){for(var n=0;n<e.onDequeues.length;n++){var a=e.onDequeues[n];a(t)}},shouldRedraw:function(e,t,n,a){for(var i=0;i<t.length;i++)for(var o=t[i].eles,l=0;l<o.length;l++){var c=o[l].boundingBox();if(nv(c,a))return!0}return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});var lP=1,lo=-4,Ru=2,uP=3.99,cP=50,fP=50,dP=.15,hP=.1,vP=.9,pP=.9,gP=1,I0=250,mP=4e3*4e3,D0=32767,yP=!0,Fw=function(e){var t=this,n=t.renderer=e,a=n.cy;t.layersByLevel={},t.firstGet=!0,t.lastInvalidationTime=$n()-2*I0,t.skipping=!1,t.eleTxrDeqs=a.collection(),t.scheduleElementRefinement=Ro(function(){t.refineElementTextures(t.eleTxrDeqs),t.eleTxrDeqs.unmerge(t.eleTxrDeqs)},fP),n.beforeRender(function(o,l){l-t.lastInvalidationTime<=I0?t.skipping=!0:t.skipping=!1},n.beforeRenderPriorities.lyrTxrSkip);var i=function(l,c){return c.reqs-l.reqs};t.layersQueue=new Bo(i),t.setupDequeueing()},hr=Fw.prototype,N0=0,wP=Math.pow(2,53)-1;hr.makeLayer=function(r,e){var t=Math.pow(2,e),n=Math.ceil(r.w*t),a=Math.ceil(r.h*t),i=this.renderer.makeOffscreenCanvas(n,a),o={id:N0=++N0%wP,bb:r,level:e,width:n,height:a,canvas:i,context:i.getContext("2d"),eles:[],elesQueue:[],reqs:0},l=o.context,c=-o.bb.x1,f=-o.bb.y1;return l.scale(t,t),l.translate(c,f),o};hr.getLayers=function(r,e,t){var n=this,a=n.renderer,i=a.cy,o=i.zoom(),l=n.firstGet;if(n.firstGet=!1,t==null){if(t=Math.ceil(tv(o*e)),t<lo)t=lo;else if(o>=uP||t>Ru)return null}n.validateLayersElesOrdering(t,r);var c=n.layersByLevel,f=Math.pow(2,t),d=c[t]=c[t]||[],h,p=n.levelIsComplete(t,r),g,m=function(){var U=function(G){if(n.validateLayersElesOrdering(G,r),n.levelIsComplete(G,r))return g=c[G],!0},q=function(G){if(!g)for(var Q=t+G;lo<=Q&&Q<=Ru&&!U(Q);Q+=G);};q(1),q(-1);for(var D=d.length-1;D>=0;D--){var F=d[D];F.invalid&&xa(d,F)}};if(!p)m();else return d;var w=function(){if(!h){h=Rr();for(var U=0;U<r.length;U++)gS(h,r[U].boundingBox())}return h},x=function(U){U=U||{};var q=U.after;w();var D=Math.ceil(h.w*f),F=Math.ceil(h.h*f);if(D>D0||F>D0)return null;var T=D*F;if(T>mP)return null;var G=n.makeLayer(h,t);if(q!=null){var Q=d.indexOf(q)+1;d.splice(Q,0,G)}else(U.insert===void 0||U.insert)&&d.unshift(G);return G};if(n.skipping&&!l)return null;for(var b=null,E=r.length/lP,_=!l,C=0;C<r.length;C++){var B=r[C],L=B._private.rscratch,A=L.imgLayerCaches=L.imgLayerCaches||{},z=A[t];if(z){b=z;continue}if((!b||b.eles.length>=E||!D1(b.bb,B.boundingBox()))&&(b=x({insert:!0,after:b}),!b))return null;g||_?n.queueLayer(b,B):n.drawEleInLayer(b,B,t,e),b.eles.push(B),A[t]=b}return g||(_?null:d)};hr.getEleLevelForLayerLevel=function(r,e){return r};hr.drawEleInLayer=function(r,e,t,n){var a=this,i=this.renderer,o=r.context,l=e.boundingBox();l.w===0||l.h===0||!e.visible()||(t=a.getEleLevelForLayerLevel(t,n),i.setImgSmoothing(o,!1),i.drawCachedElement(o,e,null,null,t,yP),i.setImgSmoothing(o,!0))};hr.levelIsComplete=function(r,e){var t=this,n=t.layersByLevel[r];if(!n||n.length===0)return!1;for(var a=0,i=0;i<n.length;i++){var o=n[i];if(o.reqs>0||o.invalid)return!1;a+=o.eles.length}return a===e.length};hr.validateLayersElesOrdering=function(r,e){var t=this.layersByLevel[r];if(t)for(var n=0;n<t.length;n++){for(var a=t[n],i=-1,o=0;o<e.length;o++)if(a.eles[0]===e[o]){i=o;break}if(i<0){this.invalidateLayer(a);continue}for(var l=i,o=0;o<a.eles.length;o++)if(a.eles[o]!==e[l+o]){this.invalidateLayer(a);break}}};hr.updateElementsInLayers=function(r,e){for(var t=this,n=ko(r[0]),a=0;a<r.length;a++)for(var i=n?null:r[a],o=n?r[a]:r[a].ele,l=o._private.rscratch,c=l.imgLayerCaches=l.imgLayerCaches||{},f=lo;f<=Ru;f++){var d=c[f];d&&(i&&t.getEleLevelForLayerLevel(d.level)!==i.level||e(d,o,i))}};hr.haveLayers=function(){for(var r=this,e=!1,t=lo;t<=Ru;t++){var n=r.layersByLevel[t];if(n&&n.length>0){e=!0;break}}return e};hr.invalidateElements=function(r){var e=this;r.length!==0&&(e.lastInvalidationTime=$n(),!(r.length===0||!e.haveLayers())&&e.updateElementsInLayers(r,function(n,a,i){e.invalidateLayer(n)}))};hr.invalidateLayer=function(r){if(this.lastInvalidationTime=$n(),!r.invalid){var e=r.level,t=r.eles,n=this.layersByLevel[e];xa(n,r),r.elesQueue=[],r.invalid=!0,r.replacement&&(r.replacement.invalid=!0);for(var a=0;a<t.length;a++){var i=t[a]._private.rscratch.imgLayerCaches;i&&(i[e]=null)}}};hr.refineElementTextures=function(r){var e=this;e.updateElementsInLayers(r,function(n,a,i){var o=n.replacement;if(o||(o=n.replacement=e.makeLayer(n.bb,n.level),o.replaces=n,o.eles=n.eles),!o.reqs)for(var l=0;l<o.eles.length;l++)e.queueLayer(o,o.eles[l])})};hr.enqueueElementRefinement=function(r){this.eleTxrDeqs.merge(r),this.scheduleElementRefinement()};hr.queueLayer=function(r,e){var t=this,n=t.layersQueue,a=r.elesQueue,i=a.hasId=a.hasId||{};if(!r.replacement){if(e){if(i[e.id()])return;a.push(e),i[e.id()]=!0}r.reqs?(r.reqs++,n.updateItem(r)):(r.reqs=1,n.push(r))}};hr.dequeue=function(r){for(var e=this,t=e.layersQueue,n=[],a=0;a<gP&&t.size()!==0;){var i=t.peek();if(i.replacement){t.pop();continue}if(i.replaces&&i!==i.replaces.replacement){t.pop();continue}if(i.invalid){t.pop();continue}var o=i.elesQueue.shift();o&&(e.drawEleInLayer(i,o,i.level,r),a++),n.length===0&&n.push(!0),i.elesQueue.length===0&&(t.pop(),i.reqs=0,i.replaces&&e.applyLayerReplacement(i),e.requestRedraw())}return n};hr.applyLayerReplacement=function(r){var e=this,t=e.layersByLevel[r.level],n=r.replaces,a=t.indexOf(n);if(!(a<0||n.invalid)){t[a]=r;for(var i=0;i<r.eles.length;i++){var o=r.eles[i]._private,l=o.imgLayerCaches=o.imgLayerCaches||{};l&&(l[r.level]=r)}e.requestRedraw()}};hr.requestRedraw=Ro(function(){var r=this.renderer;r.redrawHint("eles",!0),r.redrawHint("drag",!0),r.redraw()},100);hr.setupDequeueing=Mw.setupDequeueing({deqRedrawThreshold:cP,deqCost:dP,deqAvgCost:hP,deqNoDrawCost:vP,deqFastCost:pP,deq:function(e,t){return e.dequeue(t)},onDeqd:Jh,shouldRedraw:T1,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});var $w={},L0;function xP(r,e){for(var t=0;t<e.length;t++){var n=e[t];r.lineTo(n.x,n.y)}}function bP(r,e,t){for(var n,a=0;a<e.length;a++){var i=e[a];a===0&&(n=i),r.lineTo(i.x,i.y)}r.quadraticCurveTo(t.x,t.y,n.x,n.y)}function O0(r,e,t){r.beginPath&&r.beginPath();for(var n=e,a=0;a<n.length;a++){var i=n[a];r.lineTo(i.x,i.y)}var o=t,l=t[0];r.moveTo(l.x,l.y);for(var a=1;a<o.length;a++){var i=o[a];r.lineTo(i.x,i.y)}r.closePath&&r.closePath()}function EP(r,e,t,n,a){r.beginPath&&r.beginPath(),r.arc(t,n,a,0,Math.PI*2,!1);var i=e,o=i[0];r.moveTo(o.x,o.y);for(var l=0;l<i.length;l++){var c=i[l];r.lineTo(c.x,c.y)}r.closePath&&r.closePath()}function _P(r,e,t,n){r.arc(e,t,n,0,Math.PI*2,!1)}$w.arrowShapeImpl=function(r){return(L0||(L0={polygon:xP,"triangle-backcurve":bP,"triangle-tee":O0,"circle-triangle":EP,"triangle-cross":O0,circle:_P}))[r]};var Pn={};Pn.drawElement=function(r,e,t,n,a,i){var o=this;e.isNode()?o.drawNode(r,e,t,n,a,i):o.drawEdge(r,e,t,n,a,i)};Pn.drawElementOverlay=function(r,e){var t=this;e.isNode()?t.drawNodeOverlay(r,e):t.drawEdgeOverlay(r,e)};Pn.drawElementUnderlay=function(r,e){var t=this;e.isNode()?t.drawNodeUnderlay(r,e):t.drawEdgeUnderlay(r,e)};Pn.drawCachedElementPortion=function(r,e,t,n,a,i,o,l){var c=this,f=t.getBoundingBox(e);if(!(f.w===0||f.h===0)){var d=t.getElement(e,f,n,a,i);if(d!=null){var h=l(c,e);if(h===0)return;var p=o(c,e),g=f.x1,m=f.y1,w=f.w,x=f.h,b,E,_,C,B;if(p!==0){var L=t.getRotationPoint(e);_=L.x,C=L.y,r.translate(_,C),r.rotate(p),B=c.getImgSmoothing(r),B||c.setImgSmoothing(r,!0);var A=t.getRotationOffset(e);b=A.x,E=A.y}else b=g,E=m;var z;h!==1&&(z=r.globalAlpha,r.globalAlpha=z*h),r.drawImage(d.texture.canvas,d.x,0,d.width,d.height,b,E,w,x),h!==1&&(r.globalAlpha=z),p!==0&&(r.rotate(-p),r.translate(-_,-C),B||c.setImgSmoothing(r,!1))}else t.drawElement(r,e)}};var SP=function(){return 0},kP=function(e,t){return e.getTextAngle(t,null)},CP=function(e,t){return e.getTextAngle(t,"source")},TP=function(e,t){return e.getTextAngle(t,"target")},PP=function(e,t){return t.effectiveOpacity()},mh=function(e,t){return t.pstyle("text-opacity").pfValue*t.effectiveOpacity()};Pn.drawCachedElement=function(r,e,t,n,a,i){var o=this,l=o.data,c=l.eleTxrCache,f=l.lblTxrCache,d=l.slbTxrCache,h=l.tlbTxrCache,p=e.boundingBox(),g=i===!0?c.reasons.highQuality:null;if(!(p.w===0||p.h===0||!e.visible())&&(!n||nv(p,n))){var m=e.isEdge(),w=e.element()._private.rscratch.badLine;o.drawElementUnderlay(r,e),o.drawCachedElementPortion(r,e,c,t,a,g,SP,PP),(!m||!w)&&o.drawCachedElementPortion(r,e,f,t,a,g,kP,mh),m&&!w&&(o.drawCachedElementPortion(r,e,d,t,a,g,CP,mh),o.drawCachedElementPortion(r,e,h,t,a,g,TP,mh)),o.drawElementOverlay(r,e)}};Pn.drawElements=function(r,e){for(var t=this,n=0;n<e.length;n++){var a=e[n];t.drawElement(r,a)}};Pn.drawCachedElements=function(r,e,t,n){for(var a=this,i=0;i<e.length;i++){var o=e[i];a.drawCachedElement(r,o,t,n)}};Pn.drawCachedNodes=function(r,e,t,n){for(var a=this,i=0;i<e.length;i++){var o=e[i];o.isNode()&&a.drawCachedElement(r,o,t,n)}};Pn.drawLayeredElements=function(r,e,t,n){var a=this,i=a.data.lyrTxrCache.getLayers(e,t);if(i)for(var o=0;o<i.length;o++){var l=i[o],c=l.bb;c.w===0||c.h===0||r.drawImage(l.canvas,c.x1,c.y1,c.w,c.h)}else a.drawCachedElements(r,e,t,n)};var Vn={};Vn.drawEdge=function(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this,l=e._private.rscratch;if(!(i&&!e.visible())&&!(l.badLine||l.allpts==null||isNaN(l.allpts[0]))){var c;t&&(c=t,r.translate(-c.x1,-c.y1));var f=i?e.pstyle("opacity").value:1,d=i?e.pstyle("line-opacity").value:1,h=e.pstyle("curve-style").value,p=e.pstyle("line-style").value,g=e.pstyle("width").pfValue,m=e.pstyle("line-cap").value,w=e.pstyle("line-outline-width").value,x=e.pstyle("line-outline-color").value,b=f*d,E=f*d,_=function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:b;h==="straight-triangle"?(o.eleStrokeStyle(r,e,G),o.drawEdgeTrianglePath(e,r,l.allpts)):(r.lineWidth=g,r.lineCap=m,o.eleStrokeStyle(r,e,G),o.drawEdgePath(e,r,l.allpts,p),r.lineCap="butt")},C=function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:b;if(r.lineWidth=g+w,r.lineCap=m,w>0)o.colorStrokeStyle(r,x[0],x[1],x[2],G);else{r.lineCap="butt";return}h==="straight-triangle"?o.drawEdgeTrianglePath(e,r,l.allpts):(o.drawEdgePath(e,r,l.allpts,p),r.lineCap="butt")},B=function(){a&&o.drawEdgeOverlay(r,e)},L=function(){a&&o.drawEdgeUnderlay(r,e)},A=function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:E;o.drawArrowheads(r,e,G)},z=function(){o.drawElementText(r,e,null,n)};r.lineJoin="round";var M=e.pstyle("ghost").value==="yes";if(M){var U=e.pstyle("ghost-offset-x").pfValue,q=e.pstyle("ghost-offset-y").pfValue,D=e.pstyle("ghost-opacity").value,F=b*D;r.translate(U,q),_(F),A(F),r.translate(-U,-q)}else C();L(),_(),A(),B(),z(),t&&r.translate(c.x1,c.y1)}};var Uw=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(t,n){if(n.visible()){var a=n.pstyle("".concat(e,"-opacity")).value;if(a!==0){var i=this,o=i.usePaths(),l=n._private.rscratch,c=n.pstyle("".concat(e,"-padding")).pfValue,f=2*c,d=n.pstyle("".concat(e,"-color")).value;t.lineWidth=f,l.edgeType==="self"&&!o?t.lineCap="butt":t.lineCap="round",i.colorStrokeStyle(t,d[0],d[1],d[2],a),i.drawEdgePath(n,t,l.allpts,"solid")}}}};Vn.drawEdgeOverlay=Uw("overlay");Vn.drawEdgeUnderlay=Uw("underlay");Vn.drawEdgePath=function(r,e,t,n){var a=r._private.rscratch,i=e,o,l=!1,c=this.usePaths(),f=r.pstyle("line-dash-pattern").pfValue,d=r.pstyle("line-dash-offset").pfValue;if(c){var h=t.join("$"),p=a.pathCacheKey&&a.pathCacheKey===h;p?(o=e=a.pathCache,l=!0):(o=e=new Path2D,a.pathCacheKey=h,a.pathCache=o)}if(i.setLineDash)switch(n){case"dotted":i.setLineDash([1,1]);break;case"dashed":i.setLineDash(f),i.lineDashOffset=d;break;case"solid":i.setLineDash([]);break}if(!l&&!a.badLine)switch(e.beginPath&&e.beginPath(),e.moveTo(t[0],t[1]),a.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var g=2;g+3<t.length;g+=4)e.quadraticCurveTo(t[g],t[g+1],t[g+2],t[g+3]);break;case"straight":case"haystack":for(var m=2;m+1<t.length;m+=2)e.lineTo(t[m],t[m+1]);break;case"segments":if(a.isRound){var w=Fr(a.roundCorners),x;try{for(w.s();!(x=w.n()).done;){var b=x.value;Rw(e,b)}}catch(_){w.e(_)}finally{w.f()}e.lineTo(t[t.length-2],t[t.length-1])}else for(var E=2;E+1<t.length;E+=2)e.lineTo(t[E],t[E+1]);break}e=i,c?e.stroke(o):e.stroke(),e.setLineDash&&e.setLineDash([])};Vn.drawEdgeTrianglePath=function(r,e,t){e.fillStyle=e.strokeStyle;for(var n=r.pstyle("width").pfValue,a=0;a+1<t.length;a+=2){var i=[t[a+2]-t[a],t[a+3]-t[a+1]],o=Math.sqrt(i[0]*i[0]+i[1]*i[1]),l=[i[1]/o,-i[0]/o],c=[l[0]*n/2,l[1]*n/2];e.beginPath(),e.moveTo(t[a]-c[0],t[a+1]-c[1]),e.lineTo(t[a]+c[0],t[a+1]+c[1]),e.lineTo(t[a+2],t[a+3]),e.closePath(),e.fill()}};Vn.drawArrowheads=function(r,e,t){var n=e._private.rscratch,a=n.edgeType==="haystack";a||this.drawArrowhead(r,e,"source",n.arrowStartX,n.arrowStartY,n.srcArrowAngle,t),this.drawArrowhead(r,e,"mid-target",n.midX,n.midY,n.midtgtArrowAngle,t),this.drawArrowhead(r,e,"mid-source",n.midX,n.midY,n.midsrcArrowAngle,t),a||this.drawArrowhead(r,e,"target",n.arrowEndX,n.arrowEndY,n.tgtArrowAngle,t)};Vn.drawArrowhead=function(r,e,t,n,a,i,o){if(!(isNaN(n)||n==null||isNaN(a)||a==null||isNaN(i)||i==null)){var l=this,c=e.pstyle(t+"-arrow-shape").value;if(c!=="none"){var f=e.pstyle(t+"-arrow-fill").value==="hollow"?"both":"filled",d=e.pstyle(t+"-arrow-fill").value,h=e.pstyle("width").pfValue,p=e.pstyle(t+"-arrow-width"),g=p.value==="match-line"?h:p.pfValue;p.units==="%"&&(g*=h);var m=e.pstyle("opacity").value;o===void 0&&(o=m);var w=r.globalCompositeOperation;(o!==1||d==="hollow")&&(r.globalCompositeOperation="destination-out",l.colorFillStyle(r,255,255,255,1),l.colorStrokeStyle(r,255,255,255,1),l.drawArrowShape(e,r,f,h,c,g,n,a,i),r.globalCompositeOperation=w);var x=e.pstyle(t+"-arrow-color").value;l.colorFillStyle(r,x[0],x[1],x[2],o),l.colorStrokeStyle(r,x[0],x[1],x[2],o),l.drawArrowShape(e,r,d,h,c,g,n,a,i)}}};Vn.drawArrowShape=function(r,e,t,n,a,i,o,l,c){var f=this,d=this.usePaths()&&a!=="triangle-cross",h=!1,p,g=e,m={x:o,y:l},w=r.pstyle("arrow-scale").value,x=this.getArrowWidth(n,w),b=f.arrowShapes[a];if(d){var E=f.arrowPathCache=f.arrowPathCache||[],_=Qa(a),C=E[_];C!=null?(p=e=C,h=!0):(p=e=new Path2D,E[_]=p)}h||(e.beginPath&&e.beginPath(),d?b.draw(e,1,0,{x:0,y:0},1):b.draw(e,x,c,m,n),e.closePath&&e.closePath()),e=g,d&&(e.translate(o,l),e.rotate(c),e.scale(x,x)),(t==="filled"||t==="both")&&(d?e.fill(p):e.fill()),(t==="hollow"||t==="both")&&(e.lineWidth=i/(d?x:1),e.lineJoin="miter",d?e.stroke(p):e.stroke()),d&&(e.scale(1/x,1/x),e.rotate(-c),e.translate(-o,-l))};var mv={};mv.safeDrawImage=function(r,e,t,n,a,i,o,l,c,f){if(!(a<=0||i<=0||c<=0||f<=0))try{r.drawImage(e,t,n,a,i,o,l,c,f)}catch(d){gt(d)}};mv.drawInscribedImage=function(r,e,t,n,a){var i=this,o=t.position(),l=o.x,c=o.y,f=t.cy().style(),d=f.getIndexedStyle.bind(f),h=d(t,"background-fit","value",n),p=d(t,"background-repeat","value",n),g=t.width(),m=t.height(),w=t.padding()*2,x=g+(d(t,"background-width-relative-to","value",n)==="inner"?0:w),b=m+(d(t,"background-height-relative-to","value",n)==="inner"?0:w),E=t._private.rscratch,_=d(t,"background-clip","value",n),C=_==="node",B=d(t,"background-image-opacity","value",n)*a,L=d(t,"background-image-smoothing","value",n),A=t.pstyle("corner-radius").value;A!=="auto"&&(A=t.pstyle("corner-radius").pfValue);var z=e.width||e.cachedW,M=e.height||e.cachedH;(z==null||M==null)&&(document.body.appendChild(e),z=e.cachedW=e.width||e.offsetWidth,M=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var U=z,q=M;if(d(t,"background-width","value",n)!=="auto"&&(d(t,"background-width","units",n)==="%"?U=d(t,"background-width","pfValue",n)*x:U=d(t,"background-width","pfValue",n)),d(t,"background-height","value",n)!=="auto"&&(d(t,"background-height","units",n)==="%"?q=d(t,"background-height","pfValue",n)*b:q=d(t,"background-height","pfValue",n)),!(U===0||q===0)){if(h==="contain"){var D=Math.min(x/U,b/q);U*=D,q*=D}else if(h==="cover"){var D=Math.max(x/U,b/q);U*=D,q*=D}var F=l-x/2,T=d(t,"background-position-x","units",n),G=d(t,"background-position-x","pfValue",n);T==="%"?F+=(x-U)*G:F+=G;var Q=d(t,"background-offset-x","units",n),W=d(t,"background-offset-x","pfValue",n);Q==="%"?F+=(x-U)*W:F+=W;var X=c-b/2,Z=d(t,"background-position-y","units",n),te=d(t,"background-position-y","pfValue",n);Z==="%"?X+=(b-q)*te:X+=te;var N=d(t,"background-offset-y","units",n),$=d(t,"background-offset-y","pfValue",n);N==="%"?X+=(b-q)*$:X+=$,E.pathCache&&(F-=l,X-=c,l=0,c=0);var oe=r.globalAlpha;r.globalAlpha=B;var ie=i.getImgSmoothing(r),ne=!1;if(L==="no"&&ie?(i.setImgSmoothing(r,!1),ne=!0):L==="yes"&&!ie&&(i.setImgSmoothing(r,!0),ne=!0),p==="no-repeat")C&&(r.save(),E.pathCache?r.clip(E.pathCache):(i.nodeShapes[i.getNodeShape(t)].draw(r,l,c,x,b,A,E),r.clip())),i.safeDrawImage(r,e,0,0,z,M,F,X,U,q),C&&r.restore();else{var xe=r.createPattern(e,p);r.fillStyle=xe,i.nodeShapes[i.getNodeShape(t)].draw(r,l,c,x,b,A,E),r.translate(F,X),r.fill(),r.translate(-F,-X)}r.globalAlpha=oe,ne&&i.setImgSmoothing(r,ie)}};var ii={};ii.eleTextBiggerThanMin=function(r,e){if(!e){var t=r.cy().zoom(),n=this.getPixelRatio(),a=Math.ceil(tv(t*n));e=Math.pow(2,a)}var i=r.pstyle("font-size").pfValue*e,o=r.pstyle("min-zoomed-font-size").pfValue;return!(i<o)};ii.drawElementText=function(r,e,t,n,a){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this;if(n==null){if(i&&!o.eleTextBiggerThanMin(e))return}else if(n===!1)return;if(e.isNode()){var l=e.pstyle("label");if(!l||!l.value)return;var c=o.getLabelJustification(e);r.textAlign=c,r.textBaseline="bottom"}else{var f=e.element()._private.rscratch.badLine,d=e.pstyle("label"),h=e.pstyle("source-label"),p=e.pstyle("target-label");if(f||(!d||!d.value)&&(!h||!h.value)&&(!p||!p.value))return;r.textAlign="center",r.textBaseline="bottom"}var g=!t,m;t&&(m=t,r.translate(-m.x1,-m.y1)),a==null?(o.drawText(r,e,null,g,i),e.isEdge()&&(o.drawText(r,e,"source",g,i),o.drawText(r,e,"target",g,i))):o.drawText(r,e,a,g,i),t&&r.translate(m.x1,m.y1)};ii.getFontCache=function(r){var e;this.fontCaches=this.fontCaches||[];for(var t=0;t<this.fontCaches.length;t++)if(e=this.fontCaches[t],e.context===r)return e;return e={context:r},this.fontCaches.push(e),e};ii.setupTextStyle=function(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,n=e.pstyle("font-style").strValue,a=e.pstyle("font-size").pfValue+"px",i=e.pstyle("font-family").strValue,o=e.pstyle("font-weight").strValue,l=t?e.effectiveOpacity()*e.pstyle("text-opacity").value:1,c=e.pstyle("text-outline-opacity").value*l,f=e.pstyle("color").value,d=e.pstyle("text-outline-color").value;r.font=n+" "+o+" "+a+" "+i,r.lineJoin="round",this.colorFillStyle(r,f[0],f[1],f[2],l),this.colorStrokeStyle(r,d[0],d[1],d[2],c)};function RP(r,e,t,n,a){var i=Math.min(n,a),o=i/2,l=e+n/2,c=t+a/2;r.beginPath(),r.arc(l,c,o,0,Math.PI*2),r.closePath()}function M0(r,e,t,n,a){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:5,o=Math.min(i,n/2,a/2);r.beginPath(),r.moveTo(e+o,t),r.lineTo(e+n-o,t),r.quadraticCurveTo(e+n,t,e+n,t+o),r.lineTo(e+n,t+a-o),r.quadraticCurveTo(e+n,t+a,e+n-o,t+a),r.lineTo(e+o,t+a),r.quadraticCurveTo(e,t+a,e,t+a-o),r.lineTo(e,t+o),r.quadraticCurveTo(e,t,e+o,t),r.closePath()}ii.getTextAngle=function(r,e){var t,n=r._private,a=n.rscratch,i=e?e+"-":"",o=r.pstyle(i+"text-rotation");if(o.strValue==="autorotate"){var l=Mr(a,"labelAngle",e);t=r.isEdge()?l:0}else o.strValue==="none"?t=0:t=o.pfValue;return t};ii.drawText=function(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=e._private,o=i.rscratch,l=a?e.effectiveOpacity():1;if(!(a&&(l===0||e.pstyle("text-opacity").value===0))){t==="main"&&(t=null);var c=Mr(o,"labelX",t),f=Mr(o,"labelY",t),d,h,p=this.getLabelText(e,t);if(p!=null&&p!==""&&!isNaN(c)&&!isNaN(f)){this.setupTextStyle(r,e,a);var g=t?t+"-":"",m=Mr(o,"labelWidth",t),w=Mr(o,"labelHeight",t),x=e.pstyle(g+"text-margin-x").pfValue,b=e.pstyle(g+"text-margin-y").pfValue,E=e.isEdge(),_=e.pstyle("text-halign").value,C=e.pstyle("text-valign").value;E&&(_="center",C="center"),c+=x,f+=b;var B;switch(n?B=this.getTextAngle(e,t):B=0,B!==0&&(d=c,h=f,r.translate(d,h),r.rotate(B),c=0,f=0),C){case"top":break;case"center":f+=w/2;break;case"bottom":f+=w;break}var L=e.pstyle("text-background-opacity").value,A=e.pstyle("text-border-opacity").value,z=e.pstyle("text-border-width").pfValue,M=e.pstyle("text-background-padding").pfValue,U=e.pstyle("text-background-shape").strValue,q=U==="round-rectangle"||U==="roundrectangle",D=U==="circle",F=2;if(L>0||z>0&&A>0){var T=r.fillStyle,G=r.strokeStyle,Q=r.lineWidth,W=e.pstyle("text-background-color").value,X=e.pstyle("text-border-color").value,Z=e.pstyle("text-border-style").value,te=L>0,N=z>0&&A>0,$=c-M;switch(_){case"left":$-=m;break;case"center":$-=m/2;break}var oe=f-w-M,ie=m+2*M,ne=w+2*M;if(te&&(r.fillStyle="rgba(".concat(W[0],",").concat(W[1],",").concat(W[2],",").concat(L*l,")")),N&&(r.strokeStyle="rgba(".concat(X[0],",").concat(X[1],",").concat(X[2],",").concat(A*l,")"),r.lineWidth=z,r.setLineDash))switch(Z){case"dotted":r.setLineDash([1,1]);break;case"dashed":r.setLineDash([4,2]);break;case"double":r.lineWidth=z/4,r.setLineDash([]);break;case"solid":default:r.setLineDash([]);break}if(q?(r.beginPath(),M0(r,$,oe,ie,ne,F)):D?(r.beginPath(),RP(r,$,oe,ie,ne)):(r.beginPath(),r.rect($,oe,ie,ne)),te&&r.fill(),N&&r.stroke(),N&&Z==="double"){var xe=z/2;r.beginPath(),q?M0(r,$+xe,oe+xe,ie-2*xe,ne-2*xe,F):r.rect($+xe,oe+xe,ie-2*xe,ne-2*xe),r.stroke()}r.fillStyle=T,r.strokeStyle=G,r.lineWidth=Q,r.setLineDash&&r.setLineDash([])}var Pe=2*e.pstyle("text-outline-width").pfValue;if(Pe>0&&(r.lineWidth=Pe),e.pstyle("text-wrap").value==="wrap"){var Ce=Mr(o,"labelWrapCachedLines",t),me=Mr(o,"labelLineHeight",t),fe=m/2,he=this.getLabelJustification(e);switch(he==="auto"||(_==="left"?he==="left"?c+=-m:he==="center"&&(c+=-fe):_==="center"?he==="left"?c+=-fe:he==="right"&&(c+=fe):_==="right"&&(he==="center"?c+=fe:he==="right"&&(c+=m))),C){case"top":f-=(Ce.length-1)*me;break;case"center":case"bottom":f-=(Ce.length-1)*me;break}for(var Ee=0;Ee<Ce.length;Ee++)Pe>0&&r.strokeText(Ce[Ee],c,f),r.fillText(Ce[Ee],c,f),f+=me}else Pe>0&&r.strokeText(p,c,f),r.fillText(p,c,f);B!==0&&(r.rotate(-B),r.translate(-d,-h))}}};var Pa={};Pa.drawNode=function(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this,l,c,f=e._private,d=f.rscratch,h=e.position();if(!(!$e(h.x)||!$e(h.y))&&!(i&&!e.visible())){var p=i?e.effectiveOpacity():1,g=o.usePaths(),m,w=!1,x=e.padding();l=e.width()+2*x,c=e.height()+2*x;var b;t&&(b=t,r.translate(-b.x1,-b.y1));for(var E=e.pstyle("background-image"),_=E.value,C=new Array(_.length),B=new Array(_.length),L=0,A=0;A<_.length;A++){var z=_[A],M=C[A]=z!=null&&z!=="none";if(M){var U=e.cy().style().getIndexedStyle(e,"background-image-crossorigin","value",A);L++,B[A]=o.getCachedImage(z,U,function(){f.backgroundTimestamp=Date.now(),e.emitAndNotify("background")})}}var q=e.pstyle("background-blacken").value,D=e.pstyle("border-width").pfValue,F=e.pstyle("background-opacity").value*p,T=e.pstyle("border-color").value,G=e.pstyle("border-style").value,Q=e.pstyle("border-join").value,W=e.pstyle("border-cap").value,X=e.pstyle("border-position").value,Z=e.pstyle("border-dash-pattern").pfValue,te=e.pstyle("border-dash-offset").pfValue,N=e.pstyle("border-opacity").value*p,$=e.pstyle("outline-width").pfValue,oe=e.pstyle("outline-color").value,ie=e.pstyle("outline-style").value,ne=e.pstyle("outline-opacity").value*p,xe=e.pstyle("outline-offset").value,Pe=e.pstyle("corner-radius").value;Pe!=="auto"&&(Pe=e.pstyle("corner-radius").pfValue);var Ce=function(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:F;o.eleFillStyle(r,e,ee)},me=function(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:N;o.colorStrokeStyle(r,T[0],T[1],T[2],ee)},fe=function(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ne;o.colorStrokeStyle(r,oe[0],oe[1],oe[2],ee)},he=function(ee,J,O,ce){var _e=o.nodePathCache=o.nodePathCache||[],we=C1(O==="polygon"?O+","+ce.join(","):O,""+J,""+ee,""+Pe),ke=_e[we],Oe,De=!1;return ke!=null?(Oe=ke,De=!0,d.pathCache=Oe):(Oe=new Path2D,_e[we]=d.pathCache=Oe),{path:Oe,cacheHit:De}},Ee=e.pstyle("shape").strValue,Re=e.pstyle("shape-polygon-points").pfValue;if(g){r.translate(h.x,h.y);var I=he(l,c,Ee,Re);m=I.path,w=I.cacheHit}var pe=function(){if(!w){var ee=h;g&&(ee={x:0,y:0}),o.nodeShapes[o.getNodeShape(e)].draw(m||r,ee.x,ee.y,l,c,Pe,d)}g?r.fill(m):r.fill()},ge=function(){for(var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:p,J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,O=f.backgrounding,ce=0,_e=0;_e<B.length;_e++){var we=e.cy().style().getIndexedStyle(e,"background-image-containment","value",_e);if(J&&we==="over"||!J&&we==="inside"){ce++;continue}C[_e]&&B[_e].complete&&!B[_e].error&&(ce++,o.drawInscribedImage(r,B[_e],e,_e,ee))}f.backgrounding=ce!==L,O!==f.backgrounding&&e.updateStyle(!1)},Y=function(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p;o.hasPie(e)&&(o.drawPie(r,e,J),ee&&(g||o.nodeShapes[o.getNodeShape(e)].draw(r,h.x,h.y,l,c,Pe,d)))},K=function(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p;o.hasStripe(e)&&(r.save(),g?r.clip(d.pathCache):(o.nodeShapes[o.getNodeShape(e)].draw(r,h.x,h.y,l,c,Pe,d),r.clip()),o.drawStripe(r,e,J),r.restore(),ee&&(g||o.nodeShapes[o.getNodeShape(e)].draw(r,h.x,h.y,l,c,Pe,d)))},ae=function(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:p,J=(q>0?q:-q)*ee,O=q>0?0:255;q!==0&&(o.colorFillStyle(r,O,O,O,J),g?r.fill(m):r.fill())},ve=function(){if(D>0){if(r.lineWidth=D,r.lineCap=W,r.lineJoin=Q,r.setLineDash)switch(G){case"dotted":r.setLineDash([1,1]);break;case"dashed":r.setLineDash(Z),r.lineDashOffset=te;break;case"solid":case"double":r.setLineDash([]);break}if(X!=="center"){if(r.save(),r.lineWidth*=2,X==="inside")g?r.clip(m):r.clip();else{var ee=new Path2D;ee.rect(-l/2-D,-c/2-D,l+2*D,c+2*D),ee.addPath(m),r.clip(ee,"evenodd")}g?r.stroke(m):r.stroke(),r.restore()}else g?r.stroke(m):r.stroke();if(G==="double"){r.lineWidth=D/3;var J=r.globalCompositeOperation;r.globalCompositeOperation="destination-out",g?r.stroke(m):r.stroke(),r.globalCompositeOperation=J}r.setLineDash&&r.setLineDash([])}},ye=function(){if($>0){if(r.lineWidth=$,r.lineCap="butt",r.setLineDash)switch(ie){case"dotted":r.setLineDash([1,1]);break;case"dashed":r.setLineDash([4,2]);break;case"solid":case"double":r.setLineDash([]);break}var ee=h;g&&(ee={x:0,y:0});var J=o.getNodeShape(e),O=D;X==="inside"&&(O=0),X==="outside"&&(O*=2);var ce=(l+O+($+xe))/l,_e=(c+O+($+xe))/c,we=l*ce,ke=c*_e,Oe=o.nodeShapes[J].points,De;if(g){var We=he(we,ke,J,Oe);De=We.path}if(J==="ellipse")o.drawEllipsePath(De||r,ee.x,ee.y,we,ke);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(J)){var Ue=0,Ge=0,nt=0;J==="round-diamond"?Ue=(O+xe+$)*1.4:J==="round-heptagon"?(Ue=(O+xe+$)*1.075,nt=-(O/2+xe+$)/35):J==="round-hexagon"?Ue=(O+xe+$)*1.12:J==="round-pentagon"?(Ue=(O+xe+$)*1.13,nt=-(O/2+xe+$)/15):J==="round-tag"?(Ue=(O+xe+$)*1.12,Ge=(O/2+$+xe)*.07):J==="round-triangle"&&(Ue=(O+xe+$)*(Math.PI/2),nt=-(O+xe/2+$)/Math.PI),Ue!==0&&(ce=(l+Ue)/l,we=l*ce,["round-hexagon","round-tag"].includes(J)||(_e=(c+Ue)/c,ke=c*_e)),Pe=Pe==="auto"?O1(we,ke):Pe;for(var at=we/2,Xe=ke/2,st=Pe+(O+$+xe)/2,it=new Array(Oe.length/2),Dt=new Array(Oe.length/2),St=0;St<Oe.length/2;St++)it[St]={x:ee.x+Ge+at*Oe[St*2],y:ee.y+nt+Xe*Oe[St*2+1]};var jt,Rt,Bt,Vt,Nt=it.length;for(Rt=it[Nt-1],jt=0;jt<Nt;jt++)Bt=it[jt%Nt],Vt=it[(jt+1)%Nt],Dt[jt]=pv(Rt,Bt,Vt,st),Rt=Bt,Bt=Vt;o.drawRoundPolygonPath(De||r,ee.x+Ge,ee.y+nt,l*ce,c*_e,Oe,Dt)}else if(["roundrectangle","round-rectangle"].includes(J))Pe=Pe==="auto"?ba(we,ke):Pe,o.drawRoundRectanglePath(De||r,ee.x,ee.y,we,ke,Pe+(O+$+xe)/2);else if(["cutrectangle","cut-rectangle"].includes(J))Pe=Pe==="auto"?av():Pe,o.drawCutRectanglePath(De||r,ee.x,ee.y,we,ke,null,Pe+(O+$+xe)/4);else if(["bottomroundrectangle","bottom-round-rectangle"].includes(J))Pe=Pe==="auto"?ba(we,ke):Pe,o.drawBottomRoundRectanglePath(De||r,ee.x,ee.y,we,ke,Pe+(O+$+xe)/2);else if(J==="barrel")o.drawBarrelPath(De||r,ee.x,ee.y,we,ke);else if(J.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(J)){var $r=(O+$+xe)/l;Oe=Eu(_u(Oe,$r)),o.drawPolygonPath(De||r,ee.x,ee.y,l,c,Oe)}else{var kt=(O+$+xe)/l;Oe=Eu(_u(Oe,-kt)),o.drawPolygonPath(De||r,ee.x,ee.y,l,c,Oe)}if(g?r.stroke(De):r.stroke(),ie==="double"){r.lineWidth=O/3;var Ur=r.globalCompositeOperation;r.globalCompositeOperation="destination-out",g?r.stroke(De):r.stroke(),r.globalCompositeOperation=Ur}r.setLineDash&&r.setLineDash([])}},se=function(){a&&o.drawNodeOverlay(r,e,h,l,c)},Be=function(){a&&o.drawNodeUnderlay(r,e,h,l,c)},Ie=function(){o.drawElementText(r,e,null,n)},Ae=e.pstyle("ghost").value==="yes";if(Ae){var ze=e.pstyle("ghost-offset-x").pfValue,j=e.pstyle("ghost-offset-y").pfValue,k=e.pstyle("ghost-opacity").value,R=k*p;r.translate(ze,j),fe(),ye(),Ce(k*F),pe(),ge(R,!0),me(k*N),ve(),Y(q!==0||D!==0),K(q!==0||D!==0),ge(R,!1),ae(R),r.translate(-ze,-j)}g&&r.translate(-h.x,-h.y),Be(),g&&r.translate(h.x,h.y),fe(),ye(),Ce(),pe(),ge(p,!0),me(),ve(),Y(q!==0||D!==0),K(q!==0||D!==0),ge(p,!1),ae(),g&&r.translate(-h.x,-h.y),Ie(),se(),t&&r.translate(b.x1,b.y1)}};var jw=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(t,n,a,i,o){var l=this;if(n.visible()){var c=n.pstyle("".concat(e,"-padding")).pfValue,f=n.pstyle("".concat(e,"-opacity")).value,d=n.pstyle("".concat(e,"-color")).value,h=n.pstyle("".concat(e,"-shape")).value,p=n.pstyle("".concat(e,"-corner-radius")).value;if(f>0){if(a=a||n.position(),i==null||o==null){var g=n.padding();i=n.width()+2*g,o=n.height()+2*g}l.colorFillStyle(t,d[0],d[1],d[2],f),l.nodeShapes[h].draw(t,a.x,a.y,i+c*2,o+c*2,p),t.fill()}}}};Pa.drawNodeOverlay=jw("overlay");Pa.drawNodeUnderlay=jw("underlay");Pa.hasPie=function(r){return r=r[0],r._private.hasPie};Pa.hasStripe=function(r){return r=r[0],r._private.hasStripe};Pa.drawPie=function(r,e,t,n){e=e[0],n=n||e.position();var a=e.cy().style(),i=e.pstyle("pie-size"),o=e.pstyle("pie-hole"),l=e.pstyle("pie-start-angle").pfValue,c=n.x,f=n.y,d=e.width(),h=e.height(),p=Math.min(d,h)/2,g,m=0,w=this.usePaths();if(w&&(c=0,f=0),i.units==="%"?p=p*i.pfValue:i.pfValue!==void 0&&(p=i.pfValue/2),o.units==="%"?g=p*o.pfValue:o.pfValue!==void 0&&(g=o.pfValue/2),!(g>=p))for(var x=1;x<=a.pieBackgroundN;x++){var b=e.pstyle("pie-"+x+"-background-size").value,E=e.pstyle("pie-"+x+"-background-color").value,_=e.pstyle("pie-"+x+"-background-opacity").value*t,C=b/100;C+m>1&&(C=1-m);var B=1.5*Math.PI+2*Math.PI*m;B+=l;var L=2*Math.PI*C,A=B+L;b===0||m>=1||m+C>1||(g===0?(r.beginPath(),r.moveTo(c,f),r.arc(c,f,p,B,A),r.closePath()):(r.beginPath(),r.arc(c,f,p,B,A),r.arc(c,f,g,A,B,!0),r.closePath()),this.colorFillStyle(r,E[0],E[1],E[2],_),r.fill(),m+=C)}};Pa.drawStripe=function(r,e,t,n){e=e[0],n=n||e.position();var a=e.cy().style(),i=n.x,o=n.y,l=e.width(),c=e.height(),f=0,d=this.usePaths();r.save();var h=e.pstyle("stripe-direction").value,p=e.pstyle("stripe-size");switch(h){case"vertical":break;case"righward":r.rotate(-Math.PI/2);break}var g=l,m=c;p.units==="%"?(g=g*p.pfValue,m=m*p.pfValue):p.pfValue!==void 0&&(g=p.pfValue,m=p.pfValue),d&&(i=0,o=0),o-=g/2,i-=m/2;for(var w=1;w<=a.stripeBackgroundN;w++){var x=e.pstyle("stripe-"+w+"-background-size").value,b=e.pstyle("stripe-"+w+"-background-color").value,E=e.pstyle("stripe-"+w+"-background-opacity").value*t,_=x/100;_+f>1&&(_=1-f),!(x===0||f>=1||f+_>1)&&(r.beginPath(),r.rect(i,o+m*f,g,m*_),r.closePath(),this.colorFillStyle(r,b[0],b[1],b[2],E),r.fill(),f+=_)}r.restore()};var Br={},BP=100;Br.getPixelRatio=function(){var r=this.data.contexts[0];if(this.forcedPixelRatio!=null)return this.forcedPixelRatio;var e=this.cy.window(),t=r.backingStorePixelRatio||r.webkitBackingStorePixelRatio||r.mozBackingStorePixelRatio||r.msBackingStorePixelRatio||r.oBackingStorePixelRatio||r.backingStorePixelRatio||1;return(e.devicePixelRatio||1)/t};Br.paintCache=function(r){for(var e=this.paintCaches=this.paintCaches||[],t=!0,n,a=0;a<e.length;a++)if(n=e[a],n.context===r){t=!1;break}return t&&(n={context:r},e.push(n)),n};Br.createGradientStyleFor=function(r,e,t,n,a){var i,o=this.usePaths(),l=t.pstyle(e+"-gradient-stop-colors").value,c=t.pstyle(e+"-gradient-stop-positions").pfValue;if(n==="radial-gradient")if(t.isEdge()){var f=t.sourceEndpoint(),d=t.targetEndpoint(),h=t.midpoint(),p=Ja(f,h),g=Ja(d,h);i=r.createRadialGradient(h.x,h.y,0,h.x,h.y,Math.max(p,g))}else{var m=o?{x:0,y:0}:t.position(),w=t.paddedWidth(),x=t.paddedHeight();i=r.createRadialGradient(m.x,m.y,0,m.x,m.y,Math.max(w,x))}else if(t.isEdge()){var b=t.sourceEndpoint(),E=t.targetEndpoint();i=r.createLinearGradient(b.x,b.y,E.x,E.y)}else{var _=o?{x:0,y:0}:t.position(),C=t.paddedWidth(),B=t.paddedHeight(),L=C/2,A=B/2,z=t.pstyle("background-gradient-direction").value;switch(z){case"to-bottom":i=r.createLinearGradient(_.x,_.y-A,_.x,_.y+A);break;case"to-top":i=r.createLinearGradient(_.x,_.y+A,_.x,_.y-A);break;case"to-left":i=r.createLinearGradient(_.x+L,_.y,_.x-L,_.y);break;case"to-right":i=r.createLinearGradient(_.x-L,_.y,_.x+L,_.y);break;case"to-bottom-right":case"to-right-bottom":i=r.createLinearGradient(_.x-L,_.y-A,_.x+L,_.y+A);break;case"to-top-right":case"to-right-top":i=r.createLinearGradient(_.x-L,_.y+A,_.x+L,_.y-A);break;case"to-bottom-left":case"to-left-bottom":i=r.createLinearGradient(_.x+L,_.y-A,_.x-L,_.y+A);break;case"to-top-left":case"to-left-top":i=r.createLinearGradient(_.x+L,_.y+A,_.x-L,_.y-A);break}}if(!i)return null;for(var M=c.length===l.length,U=l.length,q=0;q<U;q++)i.addColorStop(M?c[q]:q/(U-1),"rgba("+l[q][0]+","+l[q][1]+","+l[q][2]+","+a+")");return i};Br.gradientFillStyle=function(r,e,t,n){var a=this.createGradientStyleFor(r,"background",e,t,n);if(!a)return null;r.fillStyle=a};Br.colorFillStyle=function(r,e,t,n,a){r.fillStyle="rgba("+e+","+t+","+n+","+a+")"};Br.eleFillStyle=function(r,e,t){var n=e.pstyle("background-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientFillStyle(r,e,n,t);else{var a=e.pstyle("background-color").value;this.colorFillStyle(r,a[0],a[1],a[2],t)}};Br.gradientStrokeStyle=function(r,e,t,n){var a=this.createGradientStyleFor(r,"line",e,t,n);if(!a)return null;r.strokeStyle=a};Br.colorStrokeStyle=function(r,e,t,n,a){r.strokeStyle="rgba("+e+","+t+","+n+","+a+")"};Br.eleStrokeStyle=function(r,e,t){var n=e.pstyle("line-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientStrokeStyle(r,e,n,t);else{var a=e.pstyle("line-color").value;this.colorStrokeStyle(r,a[0],a[1],a[2],t)}};Br.matchCanvasSize=function(r){var e=this,t=e.data,n=e.findContainerClientCoords(),a=n[2],i=n[3],o=e.getPixelRatio(),l=e.motionBlurPxRatio;(r===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]||r===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG])&&(o=l);var c=a*o,f=i*o,d;if(!(c===e.canvasWidth&&f===e.canvasHeight)){e.fontCaches=null;var h=t.canvasContainer;h.style.width=a+"px",h.style.height=i+"px";for(var p=0;p<e.CANVAS_LAYERS;p++)d=t.canvases[p],d.width=c,d.height=f,d.style.width=a+"px",d.style.height=i+"px";for(var p=0;p<e.BUFFER_COUNT;p++)d=t.bufferCanvases[p],d.width=c,d.height=f,d.style.width=a+"px",d.style.height=i+"px";e.textureMult=1,o<=1&&(d=t.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,d.width=c*e.textureMult,d.height=f*e.textureMult),e.canvasWidth=c,e.canvasHeight=f,e.pixelRatio=o}};Br.renderTo=function(r,e,t,n){this.render({forcedContext:r,forcedZoom:e,forcedPan:t,drawAllLayers:!0,forcedPxRatio:n})};Br.clearCanvas=function(){var r=this,e=r.data;function t(n){n.clearRect(0,0,r.canvasWidth,r.canvasHeight)}t(e.contexts[r.NODE]),t(e.contexts[r.DRAG])};Br.render=function(r){var e=this;r=r||B1();var t=e.cy,n=r.forcedContext,a=r.drawAllLayers,i=r.drawOnlyNodeLayer,o=r.forcedZoom,l=r.forcedPan,c=r.forcedPxRatio===void 0?this.getPixelRatio():r.forcedPxRatio,f=e.data,d=f.canvasNeedsRedraw,h=e.textureOnViewport&&!n&&(e.pinching||e.hoverData.dragging||e.swipePanning||e.data.wheelZooming),p=r.motionBlur!==void 0?r.motionBlur:e.motionBlur,g=e.motionBlurPxRatio,m=t.hasCompoundNodes(),w=e.hoverData.draggingEles,x=!!(e.hoverData.selecting||e.touchData.selecting);p=p&&!n&&e.motionBlurEnabled&&!x;var b=p;n||(e.prevPxRatio!==c&&(e.invalidateContainerClientCoordsCache(),e.matchCanvasSize(e.container),e.redrawHint("eles",!0),e.redrawHint("drag",!0)),e.prevPxRatio=c),!n&&e.motionBlurTimeout&&clearTimeout(e.motionBlurTimeout),p&&(e.mbFrames==null&&(e.mbFrames=0),e.mbFrames++,e.mbFrames<3&&(b=!1),e.mbFrames>e.minMbLowQualFrames&&(e.motionBlurPxRatio=e.mbPxRBlurry)),e.clearingMotionBlur&&(e.motionBlurPxRatio=1),e.textureDrawLastFrame&&!h&&(d[e.NODE]=!0,d[e.SELECT_BOX]=!0);var E=t.style(),_=t.zoom(),C=o!==void 0?o:_,B=t.pan(),L={x:B.x,y:B.y},A={zoom:_,pan:{x:B.x,y:B.y}},z=e.prevViewport,M=z===void 0||A.zoom!==z.zoom||A.pan.x!==z.pan.x||A.pan.y!==z.pan.y;!M&&!(w&&!m)&&(e.motionBlurPxRatio=1),l&&(L=l),C*=c,L.x*=c,L.y*=c;var U=e.getCachedZSortedEles();function q(me,fe,he,Ee,Re){var I=me.globalCompositeOperation;me.globalCompositeOperation="destination-out",e.colorFillStyle(me,255,255,255,e.motionBlurTransparency),me.fillRect(fe,he,Ee,Re),me.globalCompositeOperation=I}function D(me,fe){var he,Ee,Re,I;!e.clearingMotionBlur&&(me===f.bufferContexts[e.MOTIONBLUR_BUFFER_NODE]||me===f.bufferContexts[e.MOTIONBLUR_BUFFER_DRAG])?(he={x:B.x*g,y:B.y*g},Ee=_*g,Re=e.canvasWidth*g,I=e.canvasHeight*g):(he=L,Ee=C,Re=e.canvasWidth,I=e.canvasHeight),me.setTransform(1,0,0,1,0,0),fe==="motionBlur"?q(me,0,0,Re,I):!n&&(fe===void 0||fe)&&me.clearRect(0,0,Re,I),a||(me.translate(he.x,he.y),me.scale(Ee,Ee)),l&&me.translate(l.x,l.y),o&&me.scale(o,o)}if(h||(e.textureDrawLastFrame=!1),h){if(e.textureDrawLastFrame=!0,!e.textureCache){e.textureCache={},e.textureCache.bb=t.mutableElements().boundingBox(),e.textureCache.texture=e.data.bufferCanvases[e.TEXTURE_BUFFER];var F=e.data.bufferContexts[e.TEXTURE_BUFFER];F.setTransform(1,0,0,1,0,0),F.clearRect(0,0,e.canvasWidth*e.textureMult,e.canvasHeight*e.textureMult),e.render({forcedContext:F,drawOnlyNodeLayer:!0,forcedPxRatio:c*e.textureMult});var A=e.textureCache.viewport={zoom:t.zoom(),pan:t.pan(),width:e.canvasWidth,height:e.canvasHeight};A.mpan={x:(0-A.pan.x)/A.zoom,y:(0-A.pan.y)/A.zoom}}d[e.DRAG]=!1,d[e.NODE]=!1;var T=f.contexts[e.NODE],G=e.textureCache.texture,A=e.textureCache.viewport;T.setTransform(1,0,0,1,0,0),p?q(T,0,0,A.width,A.height):T.clearRect(0,0,A.width,A.height);var Q=E.core("outside-texture-bg-color").value,W=E.core("outside-texture-bg-opacity").value;e.colorFillStyle(T,Q[0],Q[1],Q[2],W),T.fillRect(0,0,A.width,A.height);var _=t.zoom();D(T,!1),T.clearRect(A.mpan.x,A.mpan.y,A.width/A.zoom/c,A.height/A.zoom/c),T.drawImage(G,A.mpan.x,A.mpan.y,A.width/A.zoom/c,A.height/A.zoom/c)}else e.textureOnViewport&&!n&&(e.textureCache=null);var X=t.extent(),Z=e.pinching||e.hoverData.dragging||e.swipePanning||e.data.wheelZooming||e.hoverData.draggingEles||e.cy.animated(),te=e.hideEdgesOnViewport&&Z,N=[];if(N[e.NODE]=!d[e.NODE]&&p&&!e.clearedForMotionBlur[e.NODE]||e.clearingMotionBlur,N[e.NODE]&&(e.clearedForMotionBlur[e.NODE]=!0),N[e.DRAG]=!d[e.DRAG]&&p&&!e.clearedForMotionBlur[e.DRAG]||e.clearingMotionBlur,N[e.DRAG]&&(e.clearedForMotionBlur[e.DRAG]=!0),d[e.NODE]||a||i||N[e.NODE]){var $=p&&!N[e.NODE]&&g!==1,T=n||($?e.data.bufferContexts[e.MOTIONBLUR_BUFFER_NODE]:f.contexts[e.NODE]),oe=p&&!$?"motionBlur":void 0;D(T,oe),te?e.drawCachedNodes(T,U.nondrag,c,X):e.drawLayeredElements(T,U.nondrag,c,X),e.debug&&e.drawDebugPoints(T,U.nondrag),!a&&!p&&(d[e.NODE]=!1)}if(!i&&(d[e.DRAG]||a||N[e.DRAG])){var $=p&&!N[e.DRAG]&&g!==1,T=n||($?e.data.bufferContexts[e.MOTIONBLUR_BUFFER_DRAG]:f.contexts[e.DRAG]);D(T,p&&!$?"motionBlur":void 0),te?e.drawCachedNodes(T,U.drag,c,X):e.drawCachedElements(T,U.drag,c,X),e.debug&&e.drawDebugPoints(T,U.drag),!a&&!p&&(d[e.DRAG]=!1)}if(this.drawSelectionRectangle(r,D),p&&g!==1){var ie=f.contexts[e.NODE],ne=e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE],xe=f.contexts[e.DRAG],Pe=e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG],Ce=function(fe,he,Ee){fe.setTransform(1,0,0,1,0,0),Ee||!b?fe.clearRect(0,0,e.canvasWidth,e.canvasHeight):q(fe,0,0,e.canvasWidth,e.canvasHeight);var Re=g;fe.drawImage(he,0,0,e.canvasWidth*Re,e.canvasHeight*Re,0,0,e.canvasWidth,e.canvasHeight)};(d[e.NODE]||N[e.NODE])&&(Ce(ie,ne,N[e.NODE]),d[e.NODE]=!1),(d[e.DRAG]||N[e.DRAG])&&(Ce(xe,Pe,N[e.DRAG]),d[e.DRAG]=!1)}e.prevViewport=A,e.clearingMotionBlur&&(e.clearingMotionBlur=!1,e.motionBlurCleared=!0,e.motionBlur=!0),p&&(e.motionBlurTimeout=setTimeout(function(){e.motionBlurTimeout=null,e.clearedForMotionBlur[e.NODE]=!1,e.clearedForMotionBlur[e.DRAG]=!1,e.motionBlur=!1,e.clearingMotionBlur=!h,e.mbFrames=0,d[e.NODE]=!0,d[e.DRAG]=!0,e.redraw()},BP)),n||t.emit("render")};var Js;Br.drawSelectionRectangle=function(r,e){var t=this,n=t.cy,a=t.data,i=n.style(),o=r.drawOnlyNodeLayer,l=r.drawAllLayers,c=a.canvasNeedsRedraw,f=r.forcedContext;if(t.showFps||!o&&c[t.SELECT_BOX]&&!l){var d=f||a.contexts[t.SELECT_BOX];if(e(d),t.selection[4]==1&&(t.hoverData.selecting||t.touchData.selecting)){var h=t.cy.zoom(),p=i.core("selection-box-border-width").value/h;d.lineWidth=p,d.fillStyle="rgba("+i.core("selection-box-color").value[0]+","+i.core("selection-box-color").value[1]+","+i.core("selection-box-color").value[2]+","+i.core("selection-box-opacity").value+")",d.fillRect(t.selection[0],t.selection[1],t.selection[2]-t.selection[0],t.selection[3]-t.selection[1]),p>0&&(d.strokeStyle="rgba("+i.core("selection-box-border-color").value[0]+","+i.core("selection-box-border-color").value[1]+","+i.core("selection-box-border-color").value[2]+","+i.core("selection-box-opacity").value+")",d.strokeRect(t.selection[0],t.selection[1],t.selection[2]-t.selection[0],t.selection[3]-t.selection[1]))}if(a.bgActivePosistion&&!t.hoverData.selecting){var h=t.cy.zoom(),g=a.bgActivePosistion;d.fillStyle="rgba("+i.core("active-bg-color").value[0]+","+i.core("active-bg-color").value[1]+","+i.core("active-bg-color").value[2]+","+i.core("active-bg-opacity").value+")",d.beginPath(),d.arc(g.x,g.y,i.core("active-bg-size").pfValue/h,0,2*Math.PI),d.fill()}var m=t.lastRedrawTime;if(t.showFps&&m){m=Math.round(m);var w=Math.round(1e3/m),x="1 frame = "+m+" ms = "+w+" fps";if(d.setTransform(1,0,0,1,0,0),d.fillStyle="rgba(255, 0, 0, 0.75)",d.strokeStyle="rgba(255, 0, 0, 0.75)",d.font="30px Arial",!Js){var b=d.measureText(x);Js=b.actualBoundingBoxAscent}d.fillText(x,0,Js);var E=60;d.strokeRect(0,Js+10,250,20),d.fillRect(0,Js+10,250*Math.min(w/E,1),20)}l||(c[t.SELECT_BOX]=!1)}};function z0(r,e,t){var n=r.createShader(e);if(r.shaderSource(n,t),r.compileShader(n),!r.getShaderParameter(n,r.COMPILE_STATUS))throw new Error(r.getShaderInfoLog(n));return n}function AP(r,e,t){var n=z0(r,r.VERTEX_SHADER,e),a=z0(r,r.FRAGMENT_SHADER,t),i=r.createProgram();if(r.attachShader(i,n),r.attachShader(i,a),r.linkProgram(i),!r.getProgramParameter(i,r.LINK_STATUS))throw new Error("Could not initialize shaders");return i}function IP(r,e,t){t===void 0&&(t=e);var n=r.makeOffscreenCanvas(e,t),a=n.context=n.getContext("2d");return n.clear=function(){return a.clearRect(0,0,n.width,n.height)},n.clear(),n}function yv(r){var e=r.pixelRatio,t=r.cy.zoom(),n=r.cy.pan();return{zoom:t*e,pan:{x:n.x*e,y:n.y*e}}}function DP(r){var e=r.pixelRatio,t=r.cy.zoom();return t*e}function NP(r,e,t,n,a){var i=n*t+e.x,o=a*t+e.y;return o=Math.round(r.canvasHeight-o),[i,o]}function LP(r){return r.pstyle("background-fill").value!=="solid"||r.pstyle("background-image").strValue!=="none"?!1:r.pstyle("border-width").value===0||r.pstyle("border-opacity").value===0?!0:r.pstyle("border-style").value==="solid"}function OP(r,e){if(r.length!==e.length)return!1;for(var t=0;t<r.length;t++)if(r[t]!==e[t])return!1;return!0}function Ga(r,e,t){var n=r[0]/255,a=r[1]/255,i=r[2]/255,o=e,l=t||new Array(4);return l[0]=n*o,l[1]=a*o,l[2]=i*o,l[3]=o,l}function zi(r,e){var t=e||new Array(4);return t[0]=(r>>0&255)/255,t[1]=(r>>8&255)/255,t[2]=(r>>16&255)/255,t[3]=(r>>24&255)/255,t}function MP(r){return r[0]+(r[1]<<8)+(r[2]<<16)+(r[3]<<24)}function zP(r,e){var t=r.createTexture();return t.buffer=function(n){r.bindTexture(r.TEXTURE_2D,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR_MIPMAP_NEAREST),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,n),r.generateMipmap(r.TEXTURE_2D),r.bindTexture(r.TEXTURE_2D,null)},t.deleteTexture=function(){r.deleteTexture(t)},t}function Vw(r,e){switch(e){case"float":return[1,r.FLOAT,4];case"vec2":return[2,r.FLOAT,4];case"vec3":return[3,r.FLOAT,4];case"vec4":return[4,r.FLOAT,4];case"int":return[1,r.INT,4];case"ivec2":return[2,r.INT,4]}}function qw(r,e,t){switch(e){case r.FLOAT:return new Float32Array(t);case r.INT:return new Int32Array(t)}}function FP(r,e,t,n,a,i){switch(e){case r.FLOAT:return new Float32Array(t.buffer,i*n,a);case r.INT:return new Int32Array(t.buffer,i*n,a)}}function $P(r,e,t,n){var a=Vw(r,e),i=Ht(a,2),o=i[0],l=i[1],c=qw(r,l,n),f=r.createBuffer();return r.bindBuffer(r.ARRAY_BUFFER,f),r.bufferData(r.ARRAY_BUFFER,c,r.STATIC_DRAW),l===r.FLOAT?r.vertexAttribPointer(t,o,l,!1,0,0):l===r.INT&&r.vertexAttribIPointer(t,o,l,0,0),r.enableVertexAttribArray(t),r.bindBuffer(r.ARRAY_BUFFER,null),f}function En(r,e,t,n){var a=Vw(r,t),i=Ht(a,3),o=i[0],l=i[1],c=i[2],f=qw(r,l,e*o),d=o*c,h=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,h),r.bufferData(r.ARRAY_BUFFER,e*d,r.DYNAMIC_DRAW),r.enableVertexAttribArray(n),l===r.FLOAT?r.vertexAttribPointer(n,o,l,!1,d,0):l===r.INT&&r.vertexAttribIPointer(n,o,l,d,0),r.vertexAttribDivisor(n,1),r.bindBuffer(r.ARRAY_BUFFER,null);for(var p=new Array(e),g=0;g<e;g++)p[g]=FP(r,l,f,d,o,g);return h.dataArray=f,h.stride=d,h.size=o,h.getView=function(m){return p[m]},h.setPoint=function(m,w,x){var b=p[m];b[0]=w,b[1]=x},h.bufferSubData=function(m){r.bindBuffer(r.ARRAY_BUFFER,h),m?r.bufferSubData(r.ARRAY_BUFFER,0,f,0,m*o):r.bufferSubData(r.ARRAY_BUFFER,0,f)},h}function UP(r,e,t){for(var n=9,a=new Float32Array(e*n),i=new Array(e),o=0;o<e;o++){var l=o*n*4;i[o]=new Float32Array(a.buffer,l,n)}var c=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,c),r.bufferData(r.ARRAY_BUFFER,a.byteLength,r.DYNAMIC_DRAW);for(var f=0;f<3;f++){var d=t+f;r.enableVertexAttribArray(d),r.vertexAttribPointer(d,3,r.FLOAT,!1,36,f*12),r.vertexAttribDivisor(d,1)}return r.bindBuffer(r.ARRAY_BUFFER,null),c.getMatrixView=function(h){return i[h]},c.setData=function(h,p){i[p].set(h,0)},c.bufferSubData=function(){r.bindBuffer(r.ARRAY_BUFFER,c),r.bufferSubData(r.ARRAY_BUFFER,0,a)},c}function jP(r){var e=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,e);var t=r.createTexture();return r.bindTexture(r.TEXTURE_2D,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,t,0),r.bindFramebuffer(r.FRAMEBUFFER,null),e.setFramebufferAttachmentSizes=function(n,a){r.bindTexture(r.TEXTURE_2D,t),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,n,a,0,r.RGBA,r.UNSIGNED_BYTE,null)},e}var F0=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var r=0,e=arguments.length;e--;)r+=arguments[e]*arguments[e];return Math.sqrt(r)});function yh(){var r=new F0(9);return F0!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r}function $0(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=1,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r}function VP(r,e,t){var n=e[0],a=e[1],i=e[2],o=e[3],l=e[4],c=e[5],f=e[6],d=e[7],h=e[8],p=t[0],g=t[1],m=t[2],w=t[3],x=t[4],b=t[5],E=t[6],_=t[7],C=t[8];return r[0]=p*n+g*o+m*f,r[1]=p*a+g*l+m*d,r[2]=p*i+g*c+m*h,r[3]=w*n+x*o+b*f,r[4]=w*a+x*l+b*d,r[5]=w*i+x*c+b*h,r[6]=E*n+_*o+C*f,r[7]=E*a+_*l+C*d,r[8]=E*i+_*c+C*h,r}function mu(r,e,t){var n=e[0],a=e[1],i=e[2],o=e[3],l=e[4],c=e[5],f=e[6],d=e[7],h=e[8],p=t[0],g=t[1];return r[0]=n,r[1]=a,r[2]=i,r[3]=o,r[4]=l,r[5]=c,r[6]=p*n+g*o+f,r[7]=p*a+g*l+d,r[8]=p*i+g*c+h,r}function U0(r,e,t){var n=e[0],a=e[1],i=e[2],o=e[3],l=e[4],c=e[5],f=e[6],d=e[7],h=e[8],p=Math.sin(t),g=Math.cos(t);return r[0]=g*n+p*o,r[1]=g*a+p*l,r[2]=g*i+p*c,r[3]=g*o-p*n,r[4]=g*l-p*a,r[5]=g*c-p*i,r[6]=f,r[7]=d,r[8]=h,r}function Uh(r,e,t){var n=t[0],a=t[1];return r[0]=n*e[0],r[1]=n*e[1],r[2]=n*e[2],r[3]=a*e[3],r[4]=a*e[4],r[5]=a*e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r}function qP(r,e,t){return r[0]=2/e,r[1]=0,r[2]=0,r[3]=0,r[4]=-2/t,r[5]=0,r[6]=-1,r[7]=1,r[8]=1,r}var WP=(function(){function r(e,t,n,a){ka(this,r),this.debugID=Math.floor(Math.random()*1e4),this.r=e,this.texSize=t,this.texRows=n,this.texHeight=Math.floor(t/n),this.enableWrapping=!0,this.locked=!1,this.texture=null,this.needsBuffer=!0,this.freePointer={x:0,row:0},this.keyToLocation=new Map,this.canvas=a(e,t,t),this.scratch=a(e,t,this.texHeight,"scratch")}return Ca(r,[{key:"lock",value:function(){this.locked=!0}},{key:"getKeys",value:function(){return new Set(this.keyToLocation.keys())}},{key:"getScale",value:function(t){var n=t.w,a=t.h,i=this.texHeight,o=this.texSize,l=i/a,c=n*l,f=a*l;return c>o&&(l=o/n,c=n*l,f=a*l),{scale:l,texW:c,texH:f}}},{key:"draw",value:function(t,n,a){var i=this;if(this.locked)throw new Error("can't draw, atlas is locked");var o=this.texSize,l=this.texRows,c=this.texHeight,f=this.getScale(n),d=f.scale,h=f.texW,p=f.texH,g=function(_,C){if(a&&C){var B=C.context,L=_.x,A=_.row,z=L,M=c*A;B.save(),B.translate(z,M),B.scale(d,d),a(B,n),B.restore()}},m=[null,null],w=function(){g(i.freePointer,i.canvas),m[0]={x:i.freePointer.x,y:i.freePointer.row*c,w:h,h:p},m[1]={x:i.freePointer.x+h,y:i.freePointer.row*c,w:0,h:p},i.freePointer.x+=h,i.freePointer.x==o&&(i.freePointer.x=0,i.freePointer.row++)},x=function(){var _=i.scratch,C=i.canvas;_.clear(),g({x:0,row:0},_);var B=o-i.freePointer.x,L=h-B,A=c;{var z=i.freePointer.x,M=i.freePointer.row*c,U=B;C.context.drawImage(_,0,0,U,A,z,M,U,A),m[0]={x:z,y:M,w:U,h:p}}{var q=B,D=(i.freePointer.row+1)*c,F=L;C&&C.context.drawImage(_,q,0,F,A,0,D,F,A),m[1]={x:0,y:D,w:F,h:p}}i.freePointer.x=L,i.freePointer.row++},b=function(){i.freePointer.x=0,i.freePointer.row++};if(this.freePointer.x+h<=o)w();else{if(this.freePointer.row>=l-1)return!1;this.freePointer.x===o?(b(),w()):this.enableWrapping?x():(b(),w())}return this.keyToLocation.set(t,m),this.needsBuffer=!0,m}},{key:"getOffsets",value:function(t){return this.keyToLocation.get(t)}},{key:"isEmpty",value:function(){return this.freePointer.x===0&&this.freePointer.row===0}},{key:"canFit",value:function(t){if(this.locked)return!1;var n=this.texSize,a=this.texRows,i=this.getScale(t),o=i.texW;return this.freePointer.x+o>n?this.freePointer.row<a-1:!0}},{key:"bufferIfNeeded",value:function(t){this.texture||(this.texture=zP(t,this.debugID)),this.needsBuffer&&(this.texture.buffer(this.canvas),this.needsBuffer=!1,this.locked&&(this.canvas=null,this.scratch=null))}},{key:"dispose",value:function(){this.texture&&(this.texture.deleteTexture(),this.texture=null),this.canvas=null,this.scratch=null,this.locked=!0}}])})(),GP=(function(){function r(e,t,n,a){ka(this,r),this.r=e,this.texSize=t,this.texRows=n,this.createTextureCanvas=a,this.atlases=[],this.styleKeyToAtlas=new Map,this.markedKeys=new Set}return Ca(r,[{key:"getKeys",value:function(){return new Set(this.styleKeyToAtlas.keys())}},{key:"_createAtlas",value:function(){var t=this.r,n=this.texSize,a=this.texRows,i=this.createTextureCanvas;return new WP(t,n,a,i)}},{key:"_getScratchCanvas",value:function(){if(!this.scratch){var t=this.r,n=this.texSize,a=this.texRows,i=this.createTextureCanvas,o=Math.floor(n/a);this.scratch=i(t,n,o,"scratch")}return this.scratch}},{key:"draw",value:function(t,n,a){var i=this.styleKeyToAtlas.get(t);return i||(i=this.atlases[this.atlases.length-1],(!i||!i.canFit(n))&&(i&&i.lock(),i=this._createAtlas(),this.atlases.push(i)),i.draw(t,n,a),this.styleKeyToAtlas.set(t,i)),i}},{key:"getAtlas",value:function(t){return this.styleKeyToAtlas.get(t)}},{key:"hasAtlas",value:function(t){return this.styleKeyToAtlas.has(t)}},{key:"markKeyForGC",value:function(t){this.markedKeys.add(t)}},{key:"gc",value:function(){var t=this,n=this.markedKeys;if(n.size===0){console.log("nothing to garbage collect");return}var a=[],i=new Map,o=null,l=Fr(this.atlases),c;try{var f=function(){var h=c.value,p=h.getKeys(),g=HP(n,p);if(g.size===0)return a.push(h),p.forEach(function(B){return i.set(B,h)}),1;o||(o=t._createAtlas(),a.push(o));var m=Fr(p),w;try{for(m.s();!(w=m.n()).done;){var x=w.value;if(!g.has(x)){var b=h.getOffsets(x),E=Ht(b,2),_=E[0],C=E[1];o.canFit({w:_.w+C.w,h:_.h})||(o.lock(),o=t._createAtlas(),a.push(o)),h.canvas&&(t._copyTextureToNewAtlas(x,h,o),i.set(x,o))}}}catch(B){m.e(B)}finally{m.f()}h.dispose()};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}this.atlases=a,this.styleKeyToAtlas=i,this.markedKeys=new Set}},{key:"_copyTextureToNewAtlas",value:function(t,n,a){var i=n.getOffsets(t),o=Ht(i,2),l=o[0],c=o[1];if(c.w===0)a.draw(t,l,function(p){p.drawImage(n.canvas,l.x,l.y,l.w,l.h,0,0,l.w,l.h)});else{var f=this._getScratchCanvas();f.clear(),f.context.drawImage(n.canvas,l.x,l.y,l.w,l.h,0,0,l.w,l.h),f.context.drawImage(n.canvas,c.x,c.y,c.w,c.h,l.w,0,c.w,c.h);var d=l.w+c.w,h=l.h;a.draw(t,{w:d,h},function(p){p.drawImage(f,0,0,d,h,0,0,d,h)})}}},{key:"getCounts",value:function(){return{keyCount:this.styleKeyToAtlas.size,atlasCount:new Set(this.styleKeyToAtlas.values()).size}}}])})();function HP(r,e){return r.intersection?r.intersection(e):new Set(yu(r).filter(function(t){return e.has(t)}))}var KP=(function(){function r(e,t){ka(this,r),this.r=e,this.globalOptions=t,this.atlasSize=t.webglTexSize,this.maxAtlasesPerBatch=t.webglTexPerBatch,this.renderTypes=new Map,this.collections=new Map,this.typeAndIdToKey=new Map}return Ca(r,[{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"addAtlasCollection",value:function(t,n){var a=this.globalOptions,i=a.webglTexSize,o=a.createTextureCanvas,l=n.texRows,c=this._cacheScratchCanvas(o),f=new GP(this.r,i,l,c);this.collections.set(t,f)}},{key:"addRenderType",value:function(t,n){var a=n.collection;if(!this.collections.has(a))throw new Error("invalid atlas collection name '".concat(a,"'"));var i=this.collections.get(a),o=tt({type:t,atlasCollection:i},n);this.renderTypes.set(t,o)}},{key:"getRenderTypeOpts",value:function(t){return this.renderTypes.get(t)}},{key:"getAtlasCollection",value:function(t){return this.collections.get(t)}},{key:"_cacheScratchCanvas",value:function(t){var n=-1,a=-1,i=null;return function(o,l,c,f){return f?((!i||l!=n||c!=a)&&(n=l,a=c,i=t(o,l,c)),i):t(o,l,c)}}},{key:"_key",value:function(t,n){return"".concat(t,"-").concat(n)}},{key:"invalidate",value:function(t){var n=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=a.forceRedraw,o=i===void 0?!1:i,l=a.filterEle,c=l===void 0?function(){return!0}:l,f=a.filterType,d=f===void 0?function(){return!0}:f,h=!1,p=!1,g=Fr(t),m;try{for(g.s();!(m=g.n()).done;){var w=m.value;if(c(w)){var x=Fr(this.renderTypes.values()),b;try{var E=function(){var C=b.value,B=C.type;if(d(B)){var L=n.collections.get(C.collection),A=C.getKey(w),z=Array.isArray(A)?A:[A];if(o)z.forEach(function(D){return L.markKeyForGC(D)}),p=!0;else{var M=C.getID?C.getID(w):w.id(),U=n._key(B,M),q=n.typeAndIdToKey.get(U);q!==void 0&&!OP(z,q)&&(h=!0,n.typeAndIdToKey.delete(U),q.forEach(function(D){return L.markKeyForGC(D)}))}}};for(x.s();!(b=x.n()).done;)E()}catch(_){x.e(_)}finally{x.f()}}}}catch(_){g.e(_)}finally{g.f()}return p&&(this.gc(),h=!1),h}},{key:"gc",value:function(){var t=Fr(this.collections.values()),n;try{for(t.s();!(n=t.n()).done;){var a=n.value;a.gc()}}catch(i){t.e(i)}finally{t.f()}}},{key:"getOrCreateAtlas",value:function(t,n,a,i){var o=this.renderTypes.get(n),l=this.collections.get(o.collection),c=!1,f=l.draw(i,a,function(p){o.drawClipped?(p.save(),p.beginPath(),p.rect(0,0,a.w,a.h),p.clip(),o.drawElement(p,t,a,!0,!0),p.restore()):o.drawElement(p,t,a,!0,!0),c=!0});if(c){var d=o.getID?o.getID(t):t.id(),h=this._key(n,d);this.typeAndIdToKey.has(h)?this.typeAndIdToKey.get(h).push(i):this.typeAndIdToKey.set(h,[i])}return f}},{key:"getAtlasInfo",value:function(t,n){var a=this,i=this.renderTypes.get(n),o=i.getKey(t),l=Array.isArray(o)?o:[o];return l.map(function(c){var f=i.getBoundingBox(t,c),d=a.getOrCreateAtlas(t,n,f,c),h=d.getOffsets(c),p=Ht(h,2),g=p[0],m=p[1];return{atlas:d,tex:g,tex1:g,tex2:m,bb:f}})}},{key:"getDebugInfo",value:function(){var t=[],n=Fr(this.collections),a;try{for(n.s();!(a=n.n()).done;){var i=Ht(a.value,2),o=i[0],l=i[1],c=l.getCounts(),f=c.keyCount,d=c.atlasCount;t.push({type:o,keyCount:f,atlasCount:d})}}catch(h){n.e(h)}finally{n.f()}return t}}])})(),XP=(function(){function r(e){ka(this,r),this.globalOptions=e,this.atlasSize=e.webglTexSize,this.maxAtlasesPerBatch=e.webglTexPerBatch,this.batchAtlases=[]}return Ca(r,[{key:"getMaxAtlasesPerBatch",value:function(){return this.maxAtlasesPerBatch}},{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"getIndexArray",value:function(){return Array.from({length:this.maxAtlasesPerBatch},function(t,n){return n})}},{key:"startBatch",value:function(){this.batchAtlases=[]}},{key:"getAtlasCount",value:function(){return this.batchAtlases.length}},{key:"getAtlases",value:function(){return this.batchAtlases}},{key:"canAddToCurrentBatch",value:function(t){return this.batchAtlases.length===this.maxAtlasesPerBatch?this.batchAtlases.includes(t):!0}},{key:"getAtlasIndexForBatch",value:function(t){var n=this.batchAtlases.indexOf(t);if(n<0){if(this.batchAtlases.length===this.maxAtlasesPerBatch)throw new Error("cannot add more atlases to batch");this.batchAtlases.push(t),n=this.batchAtlases.length-1}return n}}])})(),ZP=`
  float circleSD(vec2 p, float r) {
    return distance(vec2(0), p) - r; // signed distance
  }
`,YP=`
  float rectangleSD(vec2 p, vec2 b) {
    vec2 d = abs(p)-b;
    return distance(vec2(0),max(d,0.0)) + min(max(d.x,d.y),0.0);
  }
`,QP=`
  float roundRectangleSD(vec2 p, vec2 b, vec4 cr) {
    cr.xy = (p.x > 0.0) ? cr.xy : cr.zw;
    cr.x  = (p.y > 0.0) ? cr.x  : cr.y;
    vec2 q = abs(p) - b + cr.x;
    return min(max(q.x, q.y), 0.0) + distance(vec2(0), max(q, 0.0)) - cr.x;
  }
`,JP=`
  float ellipseSD(vec2 p, vec2 ab) {
    p = abs( p ); // symmetry

    // find root with Newton solver
    vec2 q = ab*(p-ab);
    float w = (q.x<q.y)? 1.570796327 : 0.0;
    for( int i=0; i<5; i++ ) {
      vec2 cs = vec2(cos(w),sin(w));
      vec2 u = ab*vec2( cs.x,cs.y);
      vec2 v = ab*vec2(-cs.y,cs.x);
      w = w + dot(p-u,v)/(dot(p-u,u)+dot(v,v));
    }
    
    // compute final point and distance
    float d = length(p-ab*vec2(cos(w),sin(w)));
    
    // return signed distance
    return (dot(p/ab,p/ab)>1.0) ? d : -d;
  }
`,uo={SCREEN:{name:"screen",screen:!0},PICKING:{name:"picking",picking:!0}},Bu={IGNORE:1,USE_BB:2},wh=0,j0=1,V0=2,xh=3,Fi=4,au=5,eo=6,to=7,eR=(function(){function r(e,t,n){ka(this,r),this.r=e,this.gl=t,this.maxInstances=n.webglBatchSize,this.atlasSize=n.webglTexSize,this.bgColor=n.bgColor,this.debug=n.webglDebug,this.batchDebugInfo=[],n.enableWrapping=!0,n.createTextureCanvas=IP,this.atlasManager=new KP(e,n),this.batchManager=new XP(n),this.simpleShapeOptions=new Map,this.program=this._createShaderProgram(uo.SCREEN),this.pickingProgram=this._createShaderProgram(uo.PICKING),this.vao=this._createVAO()}return Ca(r,[{key:"addAtlasCollection",value:function(t,n){this.atlasManager.addAtlasCollection(t,n)}},{key:"addTextureAtlasRenderType",value:function(t,n){this.atlasManager.addRenderType(t,n)}},{key:"addSimpleShapeRenderType",value:function(t,n){this.simpleShapeOptions.set(t,n)}},{key:"invalidate",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.type,i=this.atlasManager;return a?i.invalidate(t,{filterType:function(l){return l===a},forceRedraw:!0}):i.invalidate(t)}},{key:"gc",value:function(){this.atlasManager.gc()}},{key:"_createShaderProgram",value:function(t){var n=this.gl,a=`#version 300 es
      precision highp float;

      uniform mat3 uPanZoomMatrix;
      uniform int  uAtlasSize;
      
      // instanced
      in vec2 aPosition; // a vertex from the unit square
      
      in mat3 aTransform; // used to transform verticies, eg into a bounding box
      in int aVertType; // the type of thing we are rendering

      // the z-index that is output when using picking mode
      in vec4 aIndex;
      
      // For textures
      in int aAtlasId; // which shader unit/atlas to use
      in vec4 aTex; // x/y/w/h of texture in atlas

      // for edges
      in vec4 aPointAPointB;
      in vec4 aPointCPointD;
      in vec2 aLineWidth; // also used for node border width

      // simple shapes
      in vec4 aCornerRadius; // for round-rectangle [top-right, bottom-right, top-left, bottom-left]
      in vec4 aColor; // also used for edges
      in vec4 aBorderColor; // aLineWidth is used for border width

      // output values passed to the fragment shader
      out vec2 vTexCoord;
      out vec4 vColor;
      out vec2 vPosition;
      // flat values are not interpolated
      flat out int vAtlasId; 
      flat out int vVertType;
      flat out vec2 vTopRight;
      flat out vec2 vBotLeft;
      flat out vec4 vCornerRadius;
      flat out vec4 vBorderColor;
      flat out vec2 vBorderWidth;
      flat out vec4 vIndex;
      
      void main(void) {
        int vid = gl_VertexID;
        vec2 position = aPosition; // TODO make this a vec3, simplifies some code below

        if(aVertType == `.concat(wh,`) {
          float texX = aTex.x; // texture coordinates
          float texY = aTex.y;
          float texW = aTex.z;
          float texH = aTex.w;

          if(vid == 1 || vid == 2 || vid == 4) {
            texX += texW;
          }
          if(vid == 2 || vid == 4 || vid == 5) {
            texY += texH;
          }

          float d = float(uAtlasSize);
          vTexCoord = vec2(texX / d, texY / d); // tex coords must be between 0 and 1

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(Fi," || aVertType == ").concat(to,` 
             || aVertType == `).concat(au," || aVertType == ").concat(eo,`) { // simple shapes

          // the bounding box is needed by the fragment shader
          vBotLeft  = (aTransform * vec3(0, 0, 1)).xy; // flat
          vTopRight = (aTransform * vec3(1, 1, 1)).xy; // flat
          vPosition = (aTransform * vec3(position, 1)).xy; // will be interpolated

          // calculations are done in the fragment shader, just pass these along
          vColor = aColor;
          vCornerRadius = aCornerRadius;
          vBorderColor = aBorderColor;
          vBorderWidth = aLineWidth;

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(j0,`) {
          vec2 source = aPointAPointB.xy;
          vec2 target = aPointAPointB.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          // stretch the unit square into a long skinny rectangle
          vec2 xBasis = target - source;
          vec2 yBasis = normalize(vec2(-xBasis.y, xBasis.x));
          vec2 point = source + xBasis * position.x + yBasis * aLineWidth[0] * position.y;

          gl_Position = vec4(uPanZoomMatrix * vec3(point, 1.0), 1.0);
          vColor = aColor;
        } 
        else if(aVertType == `).concat(V0,`) {
          vec2 pointA = aPointAPointB.xy;
          vec2 pointB = aPointAPointB.zw;
          vec2 pointC = aPointCPointD.xy;
          vec2 pointD = aPointCPointD.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          vec2 p0, p1, p2, pos;
          if(position.x == 0.0) { // The left side of the unit square
            p0 = pointA;
            p1 = pointB;
            p2 = pointC;
            pos = position;
          } else { // The right side of the unit square, use same approach but flip the geometry upside down
            p0 = pointD;
            p1 = pointC;
            p2 = pointB;
            pos = vec2(0.0, -position.y);
          }

          vec2 p01 = p1 - p0;
          vec2 p12 = p2 - p1;
          vec2 p21 = p1 - p2;

          // Find the normal vector.
          vec2 tangent = normalize(normalize(p12) + normalize(p01));
          vec2 normal = vec2(-tangent.y, tangent.x);

          // Find the vector perpendicular to p0 -> p1.
          vec2 p01Norm = normalize(vec2(-p01.y, p01.x));

          // Determine the bend direction.
          float sigma = sign(dot(p01 + p21, normal));
          float width = aLineWidth[0];

          if(sign(pos.y) == -sigma) {
            // This is an intersecting vertex. Adjust the position so that there's no overlap.
            vec2 point = 0.5 * width * normal * -sigma / dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          } else {
            // This is a non-intersecting vertex. Treat it like a mitre join.
            vec2 point = 0.5 * width * normal * sigma * dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          }

          vColor = aColor;
        } 
        else if(aVertType == `).concat(xh,` && vid < 3) {
          // massage the first triangle into an edge arrow
          if(vid == 0)
            position = vec2(-0.15, -0.3);
          if(vid == 1)
            position = vec2(  0.0,  0.0);
          if(vid == 2)
            position = vec2( 0.15, -0.3);

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
          vColor = aColor;
        }
        else {
          gl_Position = vec4(2.0, 0.0, 0.0, 1.0); // discard vertex by putting it outside webgl clip space
        }

        vAtlasId = aAtlasId;
        vVertType = aVertType;
        vIndex = aIndex;
      }
    `),i=this.batchManager.getIndexArray(),o=`#version 300 es
      precision highp float;

      // declare texture unit for each texture atlas in the batch
      `.concat(i.map(function(f){return"uniform sampler2D uTexture".concat(f,";")}).join(`
	`),`

      uniform vec4 uBGColor;
      uniform float uZoom;

      in vec2 vTexCoord;
      in vec4 vColor;
      in vec2 vPosition; // model coordinates

      flat in int vAtlasId;
      flat in vec4 vIndex;
      flat in int vVertType;
      flat in vec2 vTopRight;
      flat in vec2 vBotLeft;
      flat in vec4 vCornerRadius;
      flat in vec4 vBorderColor;
      flat in vec2 vBorderWidth;

      out vec4 outColor;

      `).concat(ZP,`
      `).concat(YP,`
      `).concat(QP,`
      `).concat(JP,`

      vec4 blend(vec4 top, vec4 bot) { // blend colors with premultiplied alpha
        return vec4( 
          top.rgb + (bot.rgb * (1.0 - top.a)),
          top.a   + (bot.a   * (1.0 - top.a)) 
        );
      }

      vec4 distInterp(vec4 cA, vec4 cB, float d) { // interpolate color using Signed Distance
        // scale to the zoom level so that borders don't look blurry when zoomed in
        // note 1.5 is an aribitrary value chosen because it looks good
        return mix(cA, cB, 1.0 - smoothstep(0.0, 1.5 / uZoom, abs(d))); 
      }

      void main(void) {
        if(vVertType == `).concat(wh,`) {
          // look up the texel from the texture unit
          `).concat(i.map(function(f){return"if(vAtlasId == ".concat(f,") outColor = texture(uTexture").concat(f,", vTexCoord);")}).join(`
	else `),`
        } 
        else if(vVertType == `).concat(xh,`) {
          // mimics how canvas renderer uses context.globalCompositeOperation = 'destination-out';
          outColor = blend(vColor, uBGColor);
          outColor.a = 1.0; // make opaque, masks out line under arrow
        }
        else if(vVertType == `).concat(Fi,` && vBorderWidth == vec2(0.0)) { // simple rectangle with no border
          outColor = vColor; // unit square is already transformed to the rectangle, nothing else needs to be done
        }
        else if(vVertType == `).concat(Fi," || vVertType == ").concat(to,` 
          || vVertType == `).concat(au," || vVertType == ").concat(eo,`) { // use SDF

          float outerBorder = vBorderWidth[0];
          float innerBorder = vBorderWidth[1];
          float borderPadding = outerBorder * 2.0;
          float w = vTopRight.x - vBotLeft.x - borderPadding;
          float h = vTopRight.y - vBotLeft.y - borderPadding;
          vec2 b = vec2(w/2.0, h/2.0); // half width, half height
          vec2 p = vPosition - vec2(vTopRight.x - b[0] - outerBorder, vTopRight.y - b[1] - outerBorder); // translate to center

          float d; // signed distance
          if(vVertType == `).concat(Fi,`) {
            d = rectangleSD(p, b);
          } else if(vVertType == `).concat(to,` && w == h) {
            d = circleSD(p, b.x); // faster than ellipse
          } else if(vVertType == `).concat(to,`) {
            d = ellipseSD(p, b);
          } else {
            d = roundRectangleSD(p, b, vCornerRadius.wzyx);
          }

          // use the distance to interpolate a color to smooth the edges of the shape, doesn't need multisampling
          // we must smooth colors inwards, because we can't change pixels outside the shape's bounding box
          if(d > 0.0) {
            if(d > outerBorder) {
              discard;
            } else {
              outColor = distInterp(vBorderColor, vec4(0), d - outerBorder);
            }
          } else {
            if(d > innerBorder) {
              vec4 outerColor = outerBorder == 0.0 ? vec4(0) : vBorderColor;
              vec4 innerBorderColor = blend(vBorderColor, vColor);
              outColor = distInterp(innerBorderColor, outerColor, d);
            } 
            else {
              vec4 outerColor;
              if(innerBorder == 0.0 && outerBorder == 0.0) {
                outerColor = vec4(0);
              } else if(innerBorder == 0.0) {
                outerColor = vBorderColor;
              } else {
                outerColor = blend(vBorderColor, vColor);
              }
              outColor = distInterp(vColor, outerColor, d - innerBorder);
            }
          }
        }
        else {
          outColor = vColor;
        }

        `).concat(t.picking?`if(outColor.a == 0.0) discard;
             else outColor = vIndex;`:"",`
      }
    `),l=AP(n,a,o);l.aPosition=n.getAttribLocation(l,"aPosition"),l.aIndex=n.getAttribLocation(l,"aIndex"),l.aVertType=n.getAttribLocation(l,"aVertType"),l.aTransform=n.getAttribLocation(l,"aTransform"),l.aAtlasId=n.getAttribLocation(l,"aAtlasId"),l.aTex=n.getAttribLocation(l,"aTex"),l.aPointAPointB=n.getAttribLocation(l,"aPointAPointB"),l.aPointCPointD=n.getAttribLocation(l,"aPointCPointD"),l.aLineWidth=n.getAttribLocation(l,"aLineWidth"),l.aColor=n.getAttribLocation(l,"aColor"),l.aCornerRadius=n.getAttribLocation(l,"aCornerRadius"),l.aBorderColor=n.getAttribLocation(l,"aBorderColor"),l.uPanZoomMatrix=n.getUniformLocation(l,"uPanZoomMatrix"),l.uAtlasSize=n.getUniformLocation(l,"uAtlasSize"),l.uBGColor=n.getUniformLocation(l,"uBGColor"),l.uZoom=n.getUniformLocation(l,"uZoom"),l.uTextures=[];for(var c=0;c<this.batchManager.getMaxAtlasesPerBatch();c++)l.uTextures.push(n.getUniformLocation(l,"uTexture".concat(c)));return l}},{key:"_createVAO",value:function(){var t=[0,0,1,0,1,1,0,0,1,1,0,1];this.vertexCount=t.length/2;var n=this.maxInstances,a=this.gl,i=this.program,o=a.createVertexArray();return a.bindVertexArray(o),$P(a,"vec2",i.aPosition,t),this.transformBuffer=UP(a,n,i.aTransform),this.indexBuffer=En(a,n,"vec4",i.aIndex),this.vertTypeBuffer=En(a,n,"int",i.aVertType),this.atlasIdBuffer=En(a,n,"int",i.aAtlasId),this.texBuffer=En(a,n,"vec4",i.aTex),this.pointAPointBBuffer=En(a,n,"vec4",i.aPointAPointB),this.pointCPointDBuffer=En(a,n,"vec4",i.aPointCPointD),this.lineWidthBuffer=En(a,n,"vec2",i.aLineWidth),this.colorBuffer=En(a,n,"vec4",i.aColor),this.cornerRadiusBuffer=En(a,n,"vec4",i.aCornerRadius),this.borderColorBuffer=En(a,n,"vec4",i.aBorderColor),a.bindVertexArray(null),o}},{key:"buffers",get:function(){var t=this;return this._buffers||(this._buffers=Object.keys(this).filter(function(n){return va(n,"Buffer")}).map(function(n){return t[n]})),this._buffers}},{key:"startFrame",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:uo.SCREEN;this.panZoomMatrix=t,this.renderTarget=n,this.batchDebugInfo=[],this.wrappedCount=0,this.simpleCount=0,this.startBatch()}},{key:"startBatch",value:function(){this.instanceCount=0,this.batchManager.startBatch()}},{key:"endFrame",value:function(){this.endBatch()}},{key:"_isVisible",value:function(t,n){return t.visible()?n&&n.isVisible?n.isVisible(t):!0:!1}},{key:"drawTexture",value:function(t,n,a){var i=this.atlasManager,o=this.batchManager,l=i.getRenderTypeOpts(a);if(this._isVisible(t,l)&&!(t.isEdge()&&!this._isValidEdge(t))){if(this.renderTarget.picking&&l.getTexPickingMode){var c=l.getTexPickingMode(t);if(c===Bu.IGNORE)return;if(c==Bu.USE_BB){this.drawPickingRectangle(t,n,a);return}}var f=i.getAtlasInfo(t,a),d=Fr(f),h;try{for(d.s();!(h=d.n()).done;){var p=h.value,g=p.atlas,m=p.tex1,w=p.tex2;o.canAddToCurrentBatch(g)||this.endBatch();for(var x=o.getAtlasIndexForBatch(g),b=0,E=[[m,!0],[w,!1]];b<E.length;b++){var _=Ht(E[b],2),C=_[0],B=_[1];if(C.w!=0){var L=this.instanceCount;this.vertTypeBuffer.getView(L)[0]=wh;var A=this.indexBuffer.getView(L);zi(n,A);var z=this.atlasIdBuffer.getView(L);z[0]=x;var M=this.texBuffer.getView(L);M[0]=C.x,M[1]=C.y,M[2]=C.w,M[3]=C.h;var U=this.transformBuffer.getMatrixView(L);this.setTransformMatrix(t,U,l,p,B),this.instanceCount++,B||this.wrappedCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}catch(q){d.e(q)}finally{d.f()}}}},{key:"setTransformMatrix",value:function(t,n,a,i){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,l=0;if(a.shapeProps&&a.shapeProps.padding&&(l=t.pstyle(a.shapeProps.padding).pfValue),i){var c=i.bb,f=i.tex1,d=i.tex2,h=f.w/(f.w+d.w);o||(h=1-h);var p=this._getAdjustedBB(c,l,o,h);this._applyTransformMatrix(n,p,a,t)}else{var g=a.getBoundingBox(t),m=this._getAdjustedBB(g,l,!0,1);this._applyTransformMatrix(n,m,a,t)}}},{key:"_applyTransformMatrix",value:function(t,n,a,i){var o,l;$0(t);var c=a.getRotation?a.getRotation(i):0;if(c!==0){var f=a.getRotationPoint(i),d=f.x,h=f.y;mu(t,t,[d,h]),U0(t,t,c);var p=a.getRotationOffset(i);o=p.x+(n.xOffset||0),l=p.y+(n.yOffset||0)}else o=n.x1,l=n.y1;mu(t,t,[o,l]),Uh(t,t,[n.w,n.h])}},{key:"_getAdjustedBB",value:function(t,n,a,i){var o=t.x1,l=t.y1,c=t.w,f=t.h,d=t.yOffset;n&&(o-=n,l-=n,c+=2*n,f+=2*n);var h=0,p=c*i;return a&&i<1?c=p:!a&&i<1&&(h=c-p,o+=h,c=p),{x1:o,y1:l,w:c,h:f,xOffset:h,yOffset:d}}},{key:"drawPickingRectangle",value:function(t,n,a){var i=this.atlasManager.getRenderTypeOpts(a),o=this.instanceCount;this.vertTypeBuffer.getView(o)[0]=Fi;var l=this.indexBuffer.getView(o);zi(n,l);var c=this.colorBuffer.getView(o);Ga([0,0,0],1,c);var f=this.transformBuffer.getMatrixView(o);this.setTransformMatrix(t,f,i),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}},{key:"drawNode",value:function(t,n,a){var i=this.simpleShapeOptions.get(a);if(this._isVisible(t,i)){var o=i.shapeProps,l=this._getVertTypeForShape(t,o.shape);if(l===void 0||i.isSimple&&!i.isSimple(t)){this.drawTexture(t,n,a);return}var c=this.instanceCount;if(this.vertTypeBuffer.getView(c)[0]=l,l===au||l===eo){var f=i.getBoundingBox(t),d=this._getCornerRadius(t,o.radius,f),h=this.cornerRadiusBuffer.getView(c);h[0]=d,h[1]=d,h[2]=d,h[3]=d,l===eo&&(h[0]=0,h[2]=0)}var p=this.indexBuffer.getView(c);zi(n,p);var g=t.pstyle(o.color).value,m=t.pstyle(o.opacity).value,w=this.colorBuffer.getView(c);Ga(g,m,w);var x=this.lineWidthBuffer.getView(c);if(x[0]=0,x[1]=0,o.border){var b=t.pstyle("border-width").value;if(b>0){var E=t.pstyle("border-color").value,_=t.pstyle("border-opacity").value,C=this.borderColorBuffer.getView(c);Ga(E,_,C);var B=t.pstyle("border-position").value;if(B==="inside")x[0]=0,x[1]=-b;else if(B==="outside")x[0]=b,x[1]=0;else{var L=b/2;x[0]=L,x[1]=-L}}}var A=this.transformBuffer.getMatrixView(c);this.setTransformMatrix(t,A,i),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}},{key:"_getVertTypeForShape",value:function(t,n){var a=t.pstyle(n).value;switch(a){case"rectangle":return Fi;case"ellipse":return to;case"roundrectangle":case"round-rectangle":return au;case"bottom-round-rectangle":return eo;default:return}}},{key:"_getCornerRadius",value:function(t,n,a){var i=a.w,o=a.h;if(t.pstyle(n).value==="auto")return ba(i,o);var l=t.pstyle(n).pfValue,c=i/2,f=o/2;return Math.min(l,f,c)}},{key:"drawEdgeArrow",value:function(t,n,a){if(t.visible()){var i=t._private.rscratch,o,l,c;if(a==="source"?(o=i.arrowStartX,l=i.arrowStartY,c=i.srcArrowAngle):(o=i.arrowEndX,l=i.arrowEndY,c=i.tgtArrowAngle),!(isNaN(o)||o==null||isNaN(l)||l==null||isNaN(c)||c==null)){var f=t.pstyle(a+"-arrow-shape").value;if(f!=="none"){var d=t.pstyle(a+"-arrow-color").value,h=t.pstyle("opacity").value,p=t.pstyle("line-opacity").value,g=h*p,m=t.pstyle("width").pfValue,w=t.pstyle("arrow-scale").value,x=this.r.getArrowWidth(m,w),b=this.instanceCount,E=this.transformBuffer.getMatrixView(b);$0(E),mu(E,E,[o,l]),Uh(E,E,[x,x]),U0(E,E,c),this.vertTypeBuffer.getView(b)[0]=xh;var _=this.indexBuffer.getView(b);zi(n,_);var C=this.colorBuffer.getView(b);Ga(d,g,C),this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"drawEdgeLine",value:function(t,n){if(t.visible()){var a=this._getEdgePoints(t);if(a){var i=t.pstyle("opacity").value,o=t.pstyle("line-opacity").value,l=t.pstyle("width").pfValue,c=t.pstyle("line-color").value,f=i*o;if(a.length/2+this.instanceCount>this.maxInstances&&this.endBatch(),a.length==4){var d=this.instanceCount;this.vertTypeBuffer.getView(d)[0]=j0;var h=this.indexBuffer.getView(d);zi(n,h);var p=this.colorBuffer.getView(d);Ga(c,f,p);var g=this.lineWidthBuffer.getView(d);g[0]=l;var m=this.pointAPointBBuffer.getView(d);m[0]=a[0],m[1]=a[1],m[2]=a[2],m[3]=a[3],this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}else for(var w=0;w<a.length-2;w+=2){var x=this.instanceCount;this.vertTypeBuffer.getView(x)[0]=V0;var b=this.indexBuffer.getView(x);zi(n,b);var E=this.colorBuffer.getView(x);Ga(c,f,E);var _=this.lineWidthBuffer.getView(x);_[0]=l;var C=a[w-2],B=a[w-1],L=a[w],A=a[w+1],z=a[w+2],M=a[w+3],U=a[w+4],q=a[w+5];w==0&&(C=2*L-z+.001,B=2*A-M+.001),w==a.length-4&&(U=2*z-L+.001,q=2*M-A+.001);var D=this.pointAPointBBuffer.getView(x);D[0]=C,D[1]=B,D[2]=L,D[3]=A;var F=this.pointCPointDBuffer.getView(x);F[0]=z,F[1]=M,F[2]=U,F[3]=q,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"_isValidEdge",value:function(t){var n=t._private.rscratch;return!(n.badLine||n.allpts==null||isNaN(n.allpts[0]))}},{key:"_getEdgePoints",value:function(t){var n=t._private.rscratch;if(this._isValidEdge(t)){var a=n.allpts;if(a.length==4)return a;var i=this._getNumSegments(t);return this._getCurveSegmentPoints(a,i)}}},{key:"_getNumSegments",value:function(t){var n=15;return Math.min(Math.max(n,5),this.maxInstances)}},{key:"_getCurveSegmentPoints",value:function(t,n){if(t.length==4)return t;for(var a=Array((n+1)*2),i=0;i<=n;i++)if(i==0)a[0]=t[0],a[1]=t[1];else if(i==n)a[i*2]=t[t.length-2],a[i*2+1]=t[t.length-1];else{var o=i/n;this._setCurvePoint(t,o,a,i*2)}return a}},{key:"_setCurvePoint",value:function(t,n,a,i){if(t.length<=2)a[i]=t[0],a[i+1]=t[1];else{for(var o=Array(t.length-2),l=0;l<o.length;l+=2){var c=(1-n)*t[l]+n*t[l+2],f=(1-n)*t[l+1]+n*t[l+3];o[l]=c,o[l+1]=f}return this._setCurvePoint(o,n,a,i)}}},{key:"endBatch",value:function(){var t=this.gl,n=this.vao,a=this.vertexCount,i=this.instanceCount;if(i!==0){var o=this.renderTarget.picking?this.pickingProgram:this.program;t.useProgram(o),t.bindVertexArray(n);var l=Fr(this.buffers),c;try{for(l.s();!(c=l.n()).done;){var f=c.value;f.bufferSubData(i)}}catch(m){l.e(m)}finally{l.f()}for(var d=this.batchManager.getAtlases(),h=0;h<d.length;h++)d[h].bufferIfNeeded(t);for(var p=0;p<d.length;p++)t.activeTexture(t.TEXTURE0+p),t.bindTexture(t.TEXTURE_2D,d[p].texture),t.uniform1i(o.uTextures[p],p);t.uniform1f(o.uZoom,DP(this.r)),t.uniformMatrix3fv(o.uPanZoomMatrix,!1,this.panZoomMatrix),t.uniform1i(o.uAtlasSize,this.batchManager.getAtlasSize());var g=Ga(this.bgColor,1);t.uniform4fv(o.uBGColor,g),t.drawArraysInstanced(t.TRIANGLES,0,a,i),t.bindVertexArray(null),t.bindTexture(t.TEXTURE_2D,null),this.debug&&this.batchDebugInfo.push({count:i,atlasCount:d.length}),this.startBatch()}}},{key:"getDebugInfo",value:function(){var t=this.atlasManager.getDebugInfo(),n=t.reduce(function(o,l){return o+l.atlasCount},0),a=this.batchDebugInfo,i=a.reduce(function(o,l){return o+l.count},0);return{atlasInfo:t,totalAtlases:n,wrappedCount:this.wrappedCount,simpleCount:this.simpleCount,batchCount:a.length,batchInfo:a,totalInstances:i}}}])})(),Ww={};Ww.initWebgl=function(r,e){var t=this,n=t.data.contexts[t.WEBGL];r.bgColor=tR(t),r.webglTexSize=Math.min(r.webglTexSize,n.getParameter(n.MAX_TEXTURE_SIZE)),r.webglTexRows=Math.min(r.webglTexRows,54),r.webglTexRowsNodes=Math.min(r.webglTexRowsNodes,54),r.webglBatchSize=Math.min(r.webglBatchSize,16384),r.webglTexPerBatch=Math.min(r.webglTexPerBatch,n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)),t.webglDebug=r.webglDebug,t.webglDebugShowAtlases=r.webglDebugShowAtlases,t.pickingFrameBuffer=jP(n),t.pickingFrameBuffer.needsDraw=!0,t.drawing=new eR(t,n,r);var a=function(h){return function(p){return t.getTextAngle(p,h)}},i=function(h){return function(p){var g=p.pstyle(h);return g&&g.value}},o=function(h){return function(p){return p.pstyle("".concat(h,"-opacity")).value>0}},l=function(h){var p=h.pstyle("text-events").strValue==="yes";return p?Bu.USE_BB:Bu.IGNORE},c=function(h){var p=h.position(),g=p.x,m=p.y,w=h.outerWidth(),x=h.outerHeight();return{w,h:x,x1:g-w/2,y1:m-x/2}};t.drawing.addAtlasCollection("node",{texRows:r.webglTexRowsNodes}),t.drawing.addAtlasCollection("label",{texRows:r.webglTexRows}),t.drawing.addTextureAtlasRenderType("node-body",{collection:"node",getKey:e.getStyleKey,getBoundingBox:e.getElementBox,drawElement:e.drawElement}),t.drawing.addSimpleShapeRenderType("node-body",{getBoundingBox:c,isSimple:LP,shapeProps:{shape:"shape",color:"background-color",opacity:"background-opacity",radius:"corner-radius",border:!0}}),t.drawing.addSimpleShapeRenderType("node-overlay",{getBoundingBox:c,isVisible:o("overlay"),shapeProps:{shape:"overlay-shape",color:"overlay-color",opacity:"overlay-opacity",padding:"overlay-padding",radius:"overlay-corner-radius"}}),t.drawing.addSimpleShapeRenderType("node-underlay",{getBoundingBox:c,isVisible:o("underlay"),shapeProps:{shape:"underlay-shape",color:"underlay-color",opacity:"underlay-opacity",padding:"underlay-padding",radius:"underlay-corner-radius"}}),t.drawing.addTextureAtlasRenderType("label",{collection:"label",getTexPickingMode:l,getKey:bh(e.getLabelKey,null),getBoundingBox:Eh(e.getLabelBox,null),drawClipped:!0,drawElement:e.drawLabel,getRotation:a(null),getRotationPoint:e.getLabelRotationPoint,getRotationOffset:e.getLabelRotationOffset,isVisible:i("label")}),t.drawing.addTextureAtlasRenderType("edge-source-label",{collection:"label",getTexPickingMode:l,getKey:bh(e.getSourceLabelKey,"source"),getBoundingBox:Eh(e.getSourceLabelBox,"source"),drawClipped:!0,drawElement:e.drawSourceLabel,getRotation:a("source"),getRotationPoint:e.getSourceLabelRotationPoint,getRotationOffset:e.getSourceLabelRotationOffset,isVisible:i("source-label")}),t.drawing.addTextureAtlasRenderType("edge-target-label",{collection:"label",getTexPickingMode:l,getKey:bh(e.getTargetLabelKey,"target"),getBoundingBox:Eh(e.getTargetLabelBox,"target"),drawClipped:!0,drawElement:e.drawTargetLabel,getRotation:a("target"),getRotationPoint:e.getTargetLabelRotationPoint,getRotationOffset:e.getTargetLabelRotationOffset,isVisible:i("target-label")});var f=Ro(function(){console.log("garbage collect flag set"),t.data.gc=!0},1e4);t.onUpdateEleCalcs(function(d,h){var p=!1;h&&h.length>0&&(p|=t.drawing.invalidate(h)),p&&f()}),rR(t)};function tR(r){var e=r.cy.container(),t=e&&e.style&&e.style.backgroundColor||"white";return w1(t)}function Gw(r,e){var t=r._private.rscratch;return Mr(t,"labelWrapCachedLines",e)||[]}var bh=function(e,t){return function(n){var a=e(n),i=Gw(n,t);return i.length>1?i.map(function(o,l){return"".concat(a,"_").concat(l)}):a}},Eh=function(e,t){return function(n,a){var i=e(n);if(typeof a=="string"){var o=a.indexOf("_");if(o>0){var l=Number(a.substring(o+1)),c=Gw(n,t),f=i.h/c.length,d=f*l,h=i.y1+d;return{x1:i.x1,w:i.w,y1:h,h:f,yOffset:d}}}return i}};function rR(r){{var e=r.render;r.render=function(i){i=i||{};var o=r.cy;r.webgl&&(o.zoom()>zw?(nR(r),e.call(r,i)):(aR(r),Kw(r,i,uo.SCREEN)))}}{var t=r.matchCanvasSize;r.matchCanvasSize=function(i){t.call(r,i),r.pickingFrameBuffer.setFramebufferAttachmentSizes(r.canvasWidth,r.canvasHeight),r.pickingFrameBuffer.needsDraw=!0}}r.findNearestElements=function(i,o,l,c){return cR(r,i,o)};{var n=r.invalidateCachedZSortedEles;r.invalidateCachedZSortedEles=function(){n.call(r),r.pickingFrameBuffer.needsDraw=!0}}{var a=r.notify;r.notify=function(i,o){a.call(r,i,o),i==="viewport"||i==="bounds"?r.pickingFrameBuffer.needsDraw=!0:i==="background"&&r.drawing.invalidate(o,{type:"node-body"})}}}function nR(r){var e=r.data.contexts[r.WEBGL];e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)}function aR(r){var e=function(n){n.save(),n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,r.canvasWidth,r.canvasHeight),n.restore()};e(r.data.contexts[r.NODE]),e(r.data.contexts[r.DRAG])}function iR(r){var e=r.canvasWidth,t=r.canvasHeight,n=yv(r),a=n.pan,i=n.zoom,o=yh();mu(o,o,[a.x,a.y]),Uh(o,o,[i,i]);var l=yh();qP(l,e,t);var c=yh();return VP(c,l,o),c}function Hw(r,e){var t=r.canvasWidth,n=r.canvasHeight,a=yv(r),i=a.pan,o=a.zoom;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t,n),e.translate(i.x,i.y),e.scale(o,o)}function sR(r,e){r.drawSelectionRectangle(e,function(t){return Hw(r,t)})}function oR(r){var e=r.data.contexts[r.NODE];e.save(),Hw(r,e),e.strokeStyle="rgba(0, 0, 0, 0.3)",e.beginPath(),e.moveTo(-1e3,0),e.lineTo(1e3,0),e.stroke(),e.beginPath(),e.moveTo(0,-1e3),e.lineTo(0,1e3),e.stroke(),e.restore()}function lR(r){var e=function(a,i,o){for(var l=a.atlasManager.getAtlasCollection(i),c=r.data.contexts[r.NODE],f=l.atlases,d=0;d<f.length;d++){var h=f[d],p=h.canvas;if(p){var g=p.width,m=p.height,w=g*d,x=p.height*o,b=.4;c.save(),c.scale(b,b),c.drawImage(p,w,x),c.strokeStyle="black",c.rect(w,x,g,m),c.stroke(),c.restore()}}},t=0;e(r.drawing,"node",t++),e(r.drawing,"label",t++)}function uR(r,e,t,n,a){var i,o,l,c,f=yv(r),d=f.pan,h=f.zoom;{var p=NP(r,d,h,e,t),g=Ht(p,2),m=g[0],w=g[1],x=6;i=m-x/2,o=w-x/2,l=x,c=x}if(l===0||c===0)return[];var b=r.data.contexts[r.WEBGL];b.bindFramebuffer(b.FRAMEBUFFER,r.pickingFrameBuffer),r.pickingFrameBuffer.needsDraw&&(b.viewport(0,0,b.canvas.width,b.canvas.height),Kw(r,null,uo.PICKING),r.pickingFrameBuffer.needsDraw=!1);var E=l*c,_=new Uint8Array(E*4);b.readPixels(i,o,l,c,b.RGBA,b.UNSIGNED_BYTE,_),b.bindFramebuffer(b.FRAMEBUFFER,null);for(var C=new Set,B=0;B<E;B++){var L=_.slice(B*4,B*4+4),A=MP(L)-1;A>=0&&C.add(A)}return C}function cR(r,e,t){var n=uR(r,e,t),a=r.getCachedZSortedEles(),i,o,l=Fr(n),c;try{for(l.s();!(c=l.n()).done;){var f=c.value,d=a[f];if(!i&&d.isNode()&&(i=d),!o&&d.isEdge()&&(o=d),i&&o)break}}catch(h){l.e(h)}finally{l.f()}return[i,o].filter(Boolean)}function _h(r,e,t){var n=r.drawing;e+=1,t.isNode()?(n.drawNode(t,e,"node-underlay"),n.drawNode(t,e,"node-body"),n.drawTexture(t,e,"label"),n.drawNode(t,e,"node-overlay")):(n.drawEdgeLine(t,e),n.drawEdgeArrow(t,e,"source"),n.drawEdgeArrow(t,e,"target"),n.drawTexture(t,e,"label"),n.drawTexture(t,e,"edge-source-label"),n.drawTexture(t,e,"edge-target-label"))}function Kw(r,e,t){var n;r.webglDebug&&(n=performance.now());var a=r.drawing,i=0;if(t.screen&&r.data.canvasNeedsRedraw[r.SELECT_BOX]&&sR(r,e),r.data.canvasNeedsRedraw[r.NODE]||t.picking){var o=r.data.contexts[r.WEBGL];t.screen?(o.clearColor(0,0,0,0),o.enable(o.BLEND),o.blendFunc(o.ONE,o.ONE_MINUS_SRC_ALPHA)):o.disable(o.BLEND),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT),o.viewport(0,0,o.canvas.width,o.canvas.height);var l=iR(r),c=r.getCachedZSortedEles();if(i=c.length,a.startFrame(l,t),t.screen){for(var f=0;f<c.nondrag.length;f++)_h(r,f,c.nondrag[f]);for(var d=0;d<c.drag.length;d++)_h(r,d,c.drag[d])}else if(t.picking)for(var h=0;h<c.length;h++)_h(r,h,c[h]);a.endFrame(),t.screen&&r.webglDebugShowAtlases&&(oR(r),lR(r)),r.data.canvasNeedsRedraw[r.NODE]=!1,r.data.canvasNeedsRedraw[r.DRAG]=!1}if(r.webglDebug){var p=performance.now(),g=!1,m=Math.ceil(p-n),w=a.getDebugInfo(),x=["".concat(i," elements"),"".concat(w.totalInstances," instances"),"".concat(w.batchCount," batches"),"".concat(w.totalAtlases," atlases"),"".concat(w.wrappedCount," wrapped textures"),"".concat(w.simpleCount," simple shapes")].join(", ");if(g)console.log("WebGL (".concat(t.name,") - time ").concat(m,"ms, ").concat(x));else{console.log("WebGL (".concat(t.name,") - frame time ").concat(m,"ms")),console.log("Totals:"),console.log("  ".concat(x)),console.log("Texture Atlases Used:");var b=w.atlasInfo,E=Fr(b),_;try{for(E.s();!(_=E.n()).done;){var C=_.value;console.log("  ".concat(C.type,": ").concat(C.keyCount," keys, ").concat(C.atlasCount," atlases"))}}catch(B){E.e(B)}finally{E.f()}console.log("")}}r.data.gc&&(console.log("Garbage Collect!"),r.data.gc=!1,a.gc())}var Ra={};Ra.drawPolygonPath=function(r,e,t,n,a,i){var o=n/2,l=a/2;r.beginPath&&r.beginPath(),r.moveTo(e+o*i[0],t+l*i[1]);for(var c=1;c<i.length/2;c++)r.lineTo(e+o*i[c*2],t+l*i[c*2+1]);r.closePath()};Ra.drawRoundPolygonPath=function(r,e,t,n,a,i,o){o.forEach(function(l){return Rw(r,l)}),r.closePath()};Ra.drawRoundRectanglePath=function(r,e,t,n,a,i){var o=n/2,l=a/2,c=i==="auto"?ba(n,a):Math.min(i,l,o);r.beginPath&&r.beginPath(),r.moveTo(e,t-l),r.arcTo(e+o,t-l,e+o,t,c),r.arcTo(e+o,t+l,e,t+l,c),r.arcTo(e-o,t+l,e-o,t,c),r.arcTo(e-o,t-l,e,t-l,c),r.lineTo(e,t-l),r.closePath()};Ra.drawBottomRoundRectanglePath=function(r,e,t,n,a,i){var o=n/2,l=a/2,c=i==="auto"?ba(n,a):i;r.beginPath&&r.beginPath(),r.moveTo(e,t-l),r.lineTo(e+o,t-l),r.lineTo(e+o,t),r.arcTo(e+o,t+l,e,t+l,c),r.arcTo(e-o,t+l,e-o,t,c),r.lineTo(e-o,t-l),r.lineTo(e,t-l),r.closePath()};Ra.drawCutRectanglePath=function(r,e,t,n,a,i,o){var l=n/2,c=a/2,f=o==="auto"?av():o;r.beginPath&&r.beginPath(),r.moveTo(e-l+f,t-c),r.lineTo(e+l-f,t-c),r.lineTo(e+l,t-c+f),r.lineTo(e+l,t+c-f),r.lineTo(e+l-f,t+c),r.lineTo(e-l+f,t+c),r.lineTo(e-l,t+c-f),r.lineTo(e-l,t-c+f),r.closePath()};Ra.drawBarrelPath=function(r,e,t,n,a){var i=n/2,o=a/2,l=e-i,c=e+i,f=t-o,d=t+o,h=Th(n,a),p=h.widthOffset,g=h.heightOffset,m=h.ctrlPtOffsetPct*p;r.beginPath&&r.beginPath(),r.moveTo(l,f+g),r.lineTo(l,d-g),r.quadraticCurveTo(l+m,d,l+p,d),r.lineTo(c-p,d),r.quadraticCurveTo(c-m,d,c,d-g),r.lineTo(c,f+g),r.quadraticCurveTo(c-m,f,c-p,f),r.lineTo(l+p,f),r.quadraticCurveTo(l+m,f,l,f+g),r.closePath()};var q0=Math.sin(0),W0=Math.cos(0),jh={},Vh={},Xw=Math.PI/40;for(var $i=0*Math.PI;$i<2*Math.PI;$i+=Xw)jh[$i]=Math.sin($i),Vh[$i]=Math.cos($i);Ra.drawEllipsePath=function(r,e,t,n,a){if(r.beginPath&&r.beginPath(),r.ellipse)r.ellipse(e,t,n/2,a/2,0,0,2*Math.PI);else for(var i,o,l=n/2,c=a/2,f=0*Math.PI;f<2*Math.PI;f+=Xw)i=e-l*jh[f]*q0+l*Vh[f]*W0,o=t+c*Vh[f]*q0+c*jh[f]*W0,f===0?r.moveTo(i,o):r.lineTo(i,o);r.closePath()};var Lo={};Lo.createBuffer=function(r,e){var t=document.createElement("canvas");return t.width=r,t.height=e,[t,t.getContext("2d")]};Lo.bufferCanvasImage=function(r){var e=this.cy,t=e.mutableElements(),n=t.boundingBox(),a=this.findContainerClientCoords(),i=r.full?Math.ceil(n.w):a[2],o=r.full?Math.ceil(n.h):a[3],l=$e(r.maxWidth)||$e(r.maxHeight),c=this.getPixelRatio(),f=1;if(r.scale!==void 0)i*=r.scale,o*=r.scale,f=r.scale;else if(l){var d=1/0,h=1/0;$e(r.maxWidth)&&(d=f*r.maxWidth/i),$e(r.maxHeight)&&(h=f*r.maxHeight/o),f=Math.min(d,h),i*=f,o*=f}l||(i*=c,o*=c,f*=c);var p=document.createElement("canvas");p.width=i,p.height=o,p.style.width=i+"px",p.style.height=o+"px";var g=p.getContext("2d");if(i>0&&o>0){g.clearRect(0,0,i,o),g.globalCompositeOperation="source-over";var m=this.getCachedZSortedEles();if(r.full)g.translate(-n.x1*f,-n.y1*f),g.scale(f,f),this.drawElements(g,m),g.scale(1/f,1/f),g.translate(n.x1*f,n.y1*f);else{var w=e.pan(),x={x:w.x*f,y:w.y*f};f*=e.zoom(),g.translate(x.x,x.y),g.scale(f,f),this.drawElements(g,m),g.scale(1/f,1/f),g.translate(-x.x,-x.y)}r.bg&&(g.globalCompositeOperation="destination-over",g.fillStyle=r.bg,g.rect(0,0,i,o),g.fill())}return p};function fR(r,e){for(var t=atob(r),n=new ArrayBuffer(t.length),a=new Uint8Array(n),i=0;i<t.length;i++)a[i]=t.charCodeAt(i);return new Blob([n],{type:e})}function G0(r){var e=r.indexOf(",");return r.substr(e+1)}function Zw(r,e,t){var n=function(){return e.toDataURL(t,r.quality)};switch(r.output){case"blob-promise":return new es(function(a,i){try{e.toBlob(function(o){o!=null?a(o):i(new Error("`canvas.toBlob()` sent a null value in its callback"))},t,r.quality)}catch(o){i(o)}});case"blob":return fR(G0(n()),t);case"base64":return G0(n());case"base64uri":default:return n()}}Lo.png=function(r){return Zw(r,this.bufferCanvasImage(r),"image/png")};Lo.jpg=function(r){return Zw(r,this.bufferCanvasImage(r),"image/jpeg")};var Yw={};Yw.nodeShapeImpl=function(r,e,t,n,a,i,o,l){switch(r){case"ellipse":return this.drawEllipsePath(e,t,n,a,i);case"polygon":return this.drawPolygonPath(e,t,n,a,i,o);case"round-polygon":return this.drawRoundPolygonPath(e,t,n,a,i,o,l);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(e,t,n,a,i,l);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(e,t,n,a,i,o,l);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(e,t,n,a,i,l);case"barrel":return this.drawBarrelPath(e,t,n,a,i)}};var dR=Qw,lt=Qw.prototype;lt.CANVAS_LAYERS=3;lt.SELECT_BOX=0;lt.DRAG=1;lt.NODE=2;lt.WEBGL=3;lt.CANVAS_TYPES=["2d","2d","2d","webgl2"];lt.BUFFER_COUNT=3;lt.TEXTURE_BUFFER=0;lt.MOTIONBLUR_BUFFER_NODE=1;lt.MOTIONBLUR_BUFFER_DRAG=2;function Qw(r){var e=this,t=e.cy.window(),n=t.document;r.webgl&&(lt.CANVAS_LAYERS=e.CANVAS_LAYERS=4,console.log("webgl rendering enabled")),e.data={canvases:new Array(lt.CANVAS_LAYERS),contexts:new Array(lt.CANVAS_LAYERS),canvasNeedsRedraw:new Array(lt.CANVAS_LAYERS),bufferCanvases:new Array(lt.BUFFER_COUNT),bufferContexts:new Array(lt.CANVAS_LAYERS)};var a="-webkit-tap-highlight-color",i="rgba(0,0,0,0)";e.data.canvasContainer=n.createElement("div");var o=e.data.canvasContainer.style;e.data.canvasContainer.style[a]=i,o.position="relative",o.zIndex="0",o.overflow="hidden";var l=r.cy.container();l.appendChild(e.data.canvasContainer),l.style[a]=i;var c={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};s_()&&(c["-ms-touch-action"]="none",c["touch-action"]="none");for(var f=0;f<lt.CANVAS_LAYERS;f++){var d=e.data.canvases[f]=n.createElement("canvas"),h=lt.CANVAS_TYPES[f];e.data.contexts[f]=d.getContext(h),e.data.contexts[f]||It("Could not create canvas of type "+h),Object.keys(c).forEach(function(me){d.style[me]=c[me]}),d.style.position="absolute",d.setAttribute("data-id","layer"+f),d.style.zIndex=String(lt.CANVAS_LAYERS-f),e.data.canvasContainer.appendChild(d),e.data.canvasNeedsRedraw[f]=!1}e.data.topCanvas=e.data.canvases[0],e.data.canvases[lt.NODE].setAttribute("data-id","layer"+lt.NODE+"-node"),e.data.canvases[lt.SELECT_BOX].setAttribute("data-id","layer"+lt.SELECT_BOX+"-selectbox"),e.data.canvases[lt.DRAG].setAttribute("data-id","layer"+lt.DRAG+"-drag"),e.data.canvases[lt.WEBGL]&&e.data.canvases[lt.WEBGL].setAttribute("data-id","layer"+lt.WEBGL+"-webgl");for(var f=0;f<lt.BUFFER_COUNT;f++)e.data.bufferCanvases[f]=n.createElement("canvas"),e.data.bufferContexts[f]=e.data.bufferCanvases[f].getContext("2d"),e.data.bufferCanvases[f].style.position="absolute",e.data.bufferCanvases[f].setAttribute("data-id","buffer"+f),e.data.bufferCanvases[f].style.zIndex=String(-f-1),e.data.bufferCanvases[f].style.visibility="hidden";e.pathsEnabled=!0;var p=Rr(),g=function(fe){return{x:(fe.x1+fe.x2)/2,y:(fe.y1+fe.y2)/2}},m=function(fe){return{x:-fe.w/2,y:-fe.h/2}},w=function(fe){var he=fe[0]._private,Ee=he.oldBackgroundTimestamp===he.backgroundTimestamp;return!Ee},x=function(fe){return fe[0]._private.nodeKey},b=function(fe){return fe[0]._private.labelStyleKey},E=function(fe){return fe[0]._private.sourceLabelStyleKey},_=function(fe){return fe[0]._private.targetLabelStyleKey},C=function(fe,he,Ee,Re,I){return e.drawElement(fe,he,Ee,!1,!1,I)},B=function(fe,he,Ee,Re,I){return e.drawElementText(fe,he,Ee,Re,"main",I)},L=function(fe,he,Ee,Re,I){return e.drawElementText(fe,he,Ee,Re,"source",I)},A=function(fe,he,Ee,Re,I){return e.drawElementText(fe,he,Ee,Re,"target",I)},z=function(fe){return fe.boundingBox(),fe[0]._private.bodyBounds},M=function(fe){return fe.boundingBox(),fe[0]._private.labelBounds.main||p},U=function(fe){return fe.boundingBox(),fe[0]._private.labelBounds.source||p},q=function(fe){return fe.boundingBox(),fe[0]._private.labelBounds.target||p},D=function(fe,he){return he},F=function(fe){return g(z(fe))},T=function(fe,he,Ee){var Re=fe?fe+"-":"";return{x:he.x+Ee.pstyle(Re+"text-margin-x").pfValue,y:he.y+Ee.pstyle(Re+"text-margin-y").pfValue}},G=function(fe,he,Ee){var Re=fe[0]._private.rscratch;return{x:Re[he],y:Re[Ee]}},Q=function(fe){return T("",G(fe,"labelX","labelY"),fe)},W=function(fe){return T("source",G(fe,"sourceLabelX","sourceLabelY"),fe)},X=function(fe){return T("target",G(fe,"targetLabelX","targetLabelY"),fe)},Z=function(fe){return m(z(fe))},te=function(fe){return m(U(fe))},N=function(fe){return m(q(fe))},$=function(fe){var he=M(fe),Ee=m(M(fe));if(fe.isNode()){switch(fe.pstyle("text-halign").value){case"left":Ee.x=-he.w-(he.leftPad||0);break;case"right":Ee.x=-(he.rightPad||0);break}switch(fe.pstyle("text-valign").value){case"top":Ee.y=-he.h-(he.topPad||0);break;case"bottom":Ee.y=-(he.botPad||0);break}}return Ee},oe=e.data.eleTxrCache=new io(e,{getKey:x,doesEleInvalidateKey:w,drawElement:C,getBoundingBox:z,getRotationPoint:F,getRotationOffset:Z,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),ie=e.data.lblTxrCache=new io(e,{getKey:b,drawElement:B,getBoundingBox:M,getRotationPoint:Q,getRotationOffset:$,isVisible:D}),ne=e.data.slbTxrCache=new io(e,{getKey:E,drawElement:L,getBoundingBox:U,getRotationPoint:W,getRotationOffset:te,isVisible:D}),xe=e.data.tlbTxrCache=new io(e,{getKey:_,drawElement:A,getBoundingBox:q,getRotationPoint:X,getRotationOffset:N,isVisible:D}),Pe=e.data.lyrTxrCache=new Fw(e);e.onUpdateEleCalcs(function(fe,he){oe.invalidateElements(he),ie.invalidateElements(he),ne.invalidateElements(he),xe.invalidateElements(he),Pe.invalidateElements(he);for(var Ee=0;Ee<he.length;Ee++){var Re=he[Ee]._private;Re.oldBackgroundTimestamp=Re.backgroundTimestamp}});var Ce=function(fe){for(var he=0;he<fe.length;he++)Pe.enqueueElementRefinement(fe[he].ele)};oe.onDequeue(Ce),ie.onDequeue(Ce),ne.onDequeue(Ce),xe.onDequeue(Ce),r.webgl&&e.initWebgl(r,{getStyleKey:x,getLabelKey:b,getSourceLabelKey:E,getTargetLabelKey:_,drawElement:C,drawLabel:B,drawSourceLabel:L,drawTargetLabel:A,getElementBox:z,getLabelBox:M,getSourceLabelBox:U,getTargetLabelBox:q,getElementRotationPoint:F,getElementRotationOffset:Z,getLabelRotationPoint:Q,getSourceLabelRotationPoint:W,getTargetLabelRotationPoint:X,getLabelRotationOffset:$,getSourceLabelRotationOffset:te,getTargetLabelRotationOffset:N})}lt.redrawHint=function(r,e){var t=this;switch(r){case"eles":t.data.canvasNeedsRedraw[lt.NODE]=e;break;case"drag":t.data.canvasNeedsRedraw[lt.DRAG]=e;break;case"select":t.data.canvasNeedsRedraw[lt.SELECT_BOX]=e;break;case"gc":t.data.gc=!0;break}};var hR=typeof Path2D<"u";lt.path2dEnabled=function(r){if(r===void 0)return this.pathsEnabled;this.pathsEnabled=!!r};lt.usePaths=function(){return hR&&this.pathsEnabled};lt.setImgSmoothing=function(r,e){r.imageSmoothingEnabled!=null?r.imageSmoothingEnabled=e:(r.webkitImageSmoothingEnabled=e,r.mozImageSmoothingEnabled=e,r.msImageSmoothingEnabled=e)};lt.getImgSmoothing=function(r){return r.imageSmoothingEnabled!=null?r.imageSmoothingEnabled:r.webkitImageSmoothingEnabled||r.mozImageSmoothingEnabled||r.msImageSmoothingEnabled};lt.makeOffscreenCanvas=function(r,e){var t;if((typeof OffscreenCanvas>"u"?"undefined":Jt(OffscreenCanvas))!=="undefined")t=new OffscreenCanvas(r,e);else{var n=this.cy.window(),a=n.document;t=a.createElement("canvas"),t.width=r,t.height=e}return t};[$w,Pn,Vn,mv,ii,Pa,Br,Ww,Ra,Lo,Yw].forEach(function(r){tt(lt,r)});var vR=[{name:"null",impl:Cw},{name:"base",impl:Ow},{name:"canvas",impl:dR}],pR=[{type:"layout",extensions:$T},{type:"renderer",extensions:vR}],Jw={},ex={};function tx(r,e,t){var n=t,a=function(z){gt("Can not register `"+e+"` for `"+r+"` since `"+z+"` already exists in the prototype and can not be overridden")};if(r==="core"){if(wo.prototype[e])return a(e);wo.prototype[e]=t}else if(r==="collection"){if(fr.prototype[e])return a(e);fr.prototype[e]=t}else if(r==="layout"){for(var i=function(z){this.options=z,t.call(this,z),dt(this._private)||(this._private={}),this._private.cy=z.cy,this._private.listeners=[],this.createEmitter()},o=i.prototype=Object.create(t.prototype),l=[],c=0;c<l.length;c++){var f=l[c];o[f]=o[f]||function(){return this}}o.start&&!o.run?o.run=function(){return this.start(),this}:!o.start&&o.run&&(o.start=function(){return this.run(),this});var d=t.prototype.stop;o.stop=function(){var A=this.options;if(A&&A.animate){var z=this.animations;if(z)for(var M=0;M<z.length;M++)z[M].stop()}return d?d.call(this):this.emit("layoutstop"),this},o.destroy||(o.destroy=function(){return this}),o.cy=function(){return this._private.cy};var h=function(z){return z._private.cy},p={addEventFields:function(z,M){M.layout=z,M.cy=h(z),M.target=z},bubble:function(){return!0},parent:function(z){return h(z)}};tt(o,{createEmitter:function(){return this._private.emitter=new qu(p,this),this},emitter:function(){return this._private.emitter},on:function(z,M){return this.emitter().on(z,M),this},one:function(z,M){return this.emitter().one(z,M),this},once:function(z,M){return this.emitter().one(z,M),this},removeListener:function(z,M){return this.emitter().removeListener(z,M),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(z,M){return this.emitter().emit(z,M),this}}),pt.eventAliasesOn(o),n=i}else if(r==="renderer"&&e!=="null"&&e!=="base"){var g=rx("renderer","base"),m=g.prototype,w=t,x=t.prototype,b=function(){g.apply(this,arguments),w.apply(this,arguments)},E=b.prototype;for(var _ in m){var C=m[_],B=x[_]!=null;if(B)return a(_);E[_]=C}for(var L in x)E[L]=x[L];m.clientFunctions.forEach(function(A){E[A]=E[A]||function(){It("Renderer does not implement `renderer."+A+"()` on its prototype")}}),n=b}else if(r==="__proto__"||r==="constructor"||r==="prototype")return It(r+" is an illegal type to be registered, possibly lead to prototype pollutions");return x1({map:Jw,keys:[r,e],value:n})}function rx(r,e){return b1({map:Jw,keys:[r,e]})}function gR(r,e,t,n,a){return x1({map:ex,keys:[r,e,t,n],value:a})}function mR(r,e,t,n){return b1({map:ex,keys:[r,e,t,n]})}var qh=function(){if(arguments.length===2)return rx.apply(null,arguments);if(arguments.length===3)return tx.apply(null,arguments);if(arguments.length===4)return mR.apply(null,arguments);if(arguments.length===5)return gR.apply(null,arguments);It("Invalid extension access syntax")};wo.prototype.extension=qh;pR.forEach(function(r){r.extensions.forEach(function(e){tx(r.type,e.name,e.impl)})});var Au=function(){if(!(this instanceof Au))return new Au;this.length=0},ri=Au.prototype;ri.instanceString=function(){return"stylesheet"};ri.selector=function(r){var e=this.length++;return this[e]={selector:r,properties:[]},this};ri.css=function(r,e){var t=this.length-1;if(Qe(r))this[t].properties.push({name:r,value:e});else if(dt(r))for(var n=r,a=Object.keys(n),i=0;i<a.length;i++){var o=a[i],l=n[o];if(l!=null){var c=ir.properties[o]||ir.properties[Nu(o)];if(c!=null){var f=c.name,d=l;this[t].properties.push({name:f,value:d})}}}return this};ri.style=ri.css;ri.generateStyle=function(r){var e=new ir(r);return this.appendToStyle(e)};ri.appendToStyle=function(r){for(var e=0;e<this.length;e++){var t=this[e],n=t.selector,a=t.properties;r.selector(n);for(var i=0;i<a.length;i++){var o=a[i];r.css(o.name,o.value)}}return r};var yR="3.33.1",ni=function(e){if(e===void 0&&(e={}),dt(e))return new wo(e);if(Qe(e))return qh.apply(qh,arguments)};ni.use=function(r){var e=Array.prototype.slice.call(arguments,1);return e.unshift(ni),r.apply(null,e),this};ni.warnings=function(r){return P1(r)};ni.version=yR;ni.stylesheet=ni.Stylesheet=Au;async function wR(r){const e=await xR(3500);e!=null&&e.typesetPromise&&await e.typesetPromise([r])}async function xR(r){const e=Date.now();for(;Date.now()-e<r;){const t=window.MathJax;if(t!=null&&t.typesetPromise)return t;await new Promise(n=>setTimeout(n,80))}return window.MathJax}function iu({latex:r,mode:e="auto"}){const t=Et.useRef(null),[n,a]=Et.useState(null),i=Et.useMemo(()=>{const o=(r??"").trim();return o?e==="display"?/^\$\$[\s\S]*\$\$$/.test(o)||/^\\\[[\s\S]*\\\]$/.test(o)?o:`$$
${o}
$$`:o:""},[r,e]);return Et.useEffect(()=>{const o=t.current;o&&(a(null),o.textContent=i,(async()=>{try{await wR(o)}catch(l){a(String((l==null?void 0:l.message)??l))}})())},[i]),ue.jsxs("div",{children:[ue.jsx("div",{ref:t,style:{padding:10,borderRadius:10,border:"1px solid rgba(255,255,255,0.12)",background:"rgba(255,255,255,0.04)",overflowX:"auto"}}),n?ue.jsxs("div",{className:"muted",style:{marginTop:6,color:"rgba(255,107,107,0.95)"},children:["MathJax ",n]}):null]})}async function bR(r){const e=`${r.baseUrl.replace(/\/$/,"")}/responses`,t={model:r.model,input:r.prompt,temperature:r.temperature,top_p:r.topP,max_output_tokens:r.maxTokens,response_format:{type:"json_object"}},n=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r.apiKey}`},body:JSON.stringify(t),signal:r.signal});if(!n.ok)throw new Error(`OpenAI HTTP ${n.status}: ${await _R(n)}`);const a=await n.json(),i=ER(a);return JSON.parse(i)}function ER(r){var t,n,a,i;if(typeof(r==null?void 0:r.output_text)=="string")return r.output_text;const e=(i=(a=(n=(t=r==null?void 0:r.output)==null?void 0:t[0])==null?void 0:n.content)==null?void 0:a[0])==null?void 0:i.text;return typeof e=="string"?e:JSON.stringify(r)}async function _R(r){try{return await r.text()}catch{return""}}async function SR(r){var o;const e=`${r.baseUrl.replace(/\/$/,"")}/v1/messages`,t={model:r.model,max_tokens:r.maxTokens,temperature:r.temperature,top_p:r.topP,messages:[{role:"user",content:r.prompt}]},n=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":r.apiKey,"anthropic-version":"2023-06-01"},body:JSON.stringify(t),signal:r.signal});if(!n.ok)throw new Error(`Anthropic HTTP ${n.status}: ${await kR(n)}`);const a=await n.json(),i=a==null?void 0:a.content;if(Array.isArray(i)){const l=(o=i.find(c=>(c==null?void 0:c.type)==="text"))==null?void 0:o.text;if(typeof l=="string")return l}return typeof(a==null?void 0:a.text)=="string"?a.text:JSON.stringify(a)}async function kR(r){try{return await r.text()}catch{return""}}async function CR(r){var l,c,f,d,h;const e=r.model.startsWith("models/")?r.model:`models/${r.model}`,t=`${r.baseUrl.replace(/\/$/,"")}/v1beta/${e}:generateContent?key=${encodeURIComponent(r.apiKey)}`,n={contents:[{role:"user",parts:[{text:r.prompt}]}],generationConfig:{temperature:r.temperature,topP:r.topP,maxOutputTokens:r.maxTokens,responseMimeType:"application/json"}},a=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n),signal:r.signal});if(!a.ok)throw new Error(`Gemini HTTP ${a.status}: ${await TR(a)}`);const i=await a.json(),o=(h=(d=(f=(c=(l=i==null?void 0:i.candidates)==null?void 0:l[0])==null?void 0:c.content)==null?void 0:f.parts)==null?void 0:d[0])==null?void 0:h.text;return typeof o=="string"?o:JSON.stringify(i)}async function TR(r){try{return await r.text()}catch{return""}}async function PR(r){if(r.protocol==="openai")return await bR(r);const e=r.protocol==="anthropic"?await SR(r):await CR(r);return JSON.parse(e)}async function H0(r){const e=`
 MathJax v3 LaTeX  MathJax v3  LaTeX****


-  \\begin{aligned} 
- 
-  JSON{"content":"..."} markdown

 LaTeX
${r.original}
`.trim(),t=await PR({protocol:r.llm.protocol,baseUrl:r.llm.baseUrl,apiKey:r.llm.apiKey,model:r.llm.model,temperature:0,topP:1,maxTokens:Math.max(256,Math.floor(r.llm.maxTokens||2e3)),prompt:e,signal:r.signal}),n=typeof(t==null?void 0:t.content)=="string"?t.content:null;if(!n)throw new Error("LLM  {content:string}");return n}function RR({elements:r,apiRef:e}){var g,m,w,x,b,E;const t=Et.useRef(null),n=Et.useRef(null),[a,i]=Et.useState(null),[o,l]=Et.useState(!1),c=Ke(_=>_.assets),f=Ke(_=>_.graph),d=Ke(_=>_.llm),h=a!=null&&a.id?f.nodes.find(_=>_.id===a.id):null;a!=null&&a.source&&(a!=null&&a.target);const p=Et.useMemo(()=>[{selector:"node",style:{"background-color":"#70a4ff","border-color":"rgba(255,255,255,0.25)","border-width":1,color:"rgba(255,255,255,0.92)",label:"data(label)","font-size":10,"text-wrap":"wrap","text-max-width":180,"text-outline-width":2,"text-outline-color":"rgba(0,0,0,0.35)","text-valign":"center","text-halign":"center",width:"label",padding:"10px"}},{selector:'node[type="Definition"]',style:{"background-color":"#38d39f"}},{selector:'node[type="Theorem"]',style:{"background-color":"#ffb86b"}},{selector:'node[type="Lemma"]',style:{"background-color":"#ffd86b"}},{selector:'node[type="Formula"]',style:{"background-color":"#b970ff"}},{selector:'node[type="Example"]',style:{"background-color":"#70ffd1"}},{selector:'node[type="Exercise"]',style:{"background-color":"#ff70d1"}},{selector:"edge",style:{width:2,"line-color":"rgba(255,255,255,0.35)","target-arrow-color":"rgba(255,255,255,0.35)","target-arrow-shape":"triangle","curve-style":"bezier",label:"data(label)",color:"rgba(255,255,255,0.7)","font-size":9,"text-outline-width":2,"text-outline-color":"rgba(0,0,0,0.35)","text-rotation":"autorotate"}},{selector:":selected",style:{"border-width":3,"border-color":"rgba(255,255,255,0.7)","line-color":"#70a4ff","target-arrow-color":"#70a4ff"}}],[]);return Et.useEffect(()=>{if(!t.current||n.current)return;const _=ni({container:t.current,elements:r,style:p,layout:{name:"cose",animate:!1,fit:!0,padding:30},wheelSensitivity:.2});return _.on("select","node,edge",C=>{i(C.target.data())}),_.on("unselect","node,edge",()=>{i(null)}),n.current=_,e&&(e.current={fit:()=>_.fit(void 0,40),center:()=>_.center()}),()=>{_.destroy(),n.current=null}},[e,r,p]),Et.useEffect(()=>{const _=n.current;_&&(_.batch(()=>{_.elements().remove(),_.add(r)}),_.layout({name:"cose",animate:!1,fit:!0,padding:30}).run())},[r]),ue.jsxs("div",{style:{height:"100%",display:"grid",gridTemplateColumns:"1fr 360px"},children:[ue.jsx("div",{className:"graph",ref:t}),ue.jsxs("div",{style:{padding:12,borderLeft:"1px solid rgba(255,255,255,0.12)",overflow:"auto"},children:[ue.jsxs("div",{className:"card",style:{marginTop:0},children:[ue.jsx("div",{className:"h1",children:""}),a?ue.jsxs(ue.Fragment,{children:[ue.jsx("div",{className:"muted mono",style:{marginTop:6},children:a.id}),"type"in a?ue.jsxs("div",{className:"muted",style:{marginTop:6},children:[ue.jsx("b",{children:"type"}),": ",ue.jsx("span",{className:"mono",children:(h==null?void 0:h.type)??a.type})]}):null,"title"in a?ue.jsxs("div",{className:"muted",style:{marginTop:6},children:[ue.jsx("b",{children:"title"}),": ",(h==null?void 0:h.title)??a.title]}):null,h!=null&&h.content?ue.jsxs(ue.Fragment,{children:[ue.jsx("div",{className:"label",children:"MathJax "}),ue.jsx(iu,{latex:String(h.content),mode:h.type==="Formula"?"display":"auto"}),(h.type==="Example"||h.type==="Exercise")&&(typeof((g=h.meta)==null?void 0:g.problem)=="string"||typeof((m=h.meta)==null?void 0:m.solution)=="string"||typeof((w=h.meta)==null?void 0:w.answer)=="string")?ue.jsxs(ue.Fragment,{children:[ue.jsx("div",{className:"label",children:""}),typeof((x=h.meta)==null?void 0:x.problem)=="string"&&h.meta.problem.trim()?ue.jsxs(ue.Fragment,{children:[ue.jsx("div",{className:"muted",style:{marginTop:6},children:ue.jsx("b",{children:""})}),ue.jsx(iu,{latex:String(h.meta.problem),mode:"auto"})]}):null,typeof((b=h.meta)==null?void 0:b.solution)=="string"&&h.meta.solution.trim()?ue.jsxs(ue.Fragment,{children:[ue.jsx("div",{className:"muted",style:{marginTop:10},children:ue.jsx("b",{children:"/"})}),ue.jsx(iu,{latex:String(h.meta.solution),mode:"auto"})]}):null,typeof((E=h.meta)==null?void 0:E.answer)=="string"&&h.meta.answer.trim()?ue.jsxs(ue.Fragment,{children:[ue.jsx("div",{className:"muted",style:{marginTop:10},children:ue.jsx("b",{children:""})}),ue.jsx(iu,{latex:String(h.meta.answer),mode:"auto"})]}):null]}):null,ue.jsxs("div",{className:"row",style:{marginTop:10},children:[ue.jsx("button",{className:"btn ok",disabled:o||!d.enabled||!d.apiKey.trim(),onClick:async()=>{var C;const _=f.nodes.find(B=>B.id===a.id);if(_!=null&&_.content){l(!0);try{const B=_.content,L=await H0({llm:d,original:B});Ke.getState().updateNode(_.id,{content:L,meta:{..._.meta??{},originalContent:((C=_.meta)==null?void 0:C.originalContent)??B,mathjaxFixed:!0}}),Ke.getState().setInfo("MathJax ")}catch(B){Ke.getState().setError(String((B==null?void 0:B.message)??B))}finally{l(!1)}}},children:o?"...":"MathJax  / LLM"}),ue.jsx("button",{className:"btn",disabled:o,onClick:()=>{var B;const _=f.nodes.find(L=>L.id===a.id),C=(B=_==null?void 0:_.meta)==null?void 0:B.originalContent;_&&typeof C=="string"&&(Ke.getState().updateNode(_.id,{content:C,meta:{..._.meta??{},mathjaxFixed:!1}}),Ke.getState().setInfo(" LaTeX"))},children:""})]}),ue.jsx("div",{className:"label",children:" contentLaTeX"}),ue.jsx("textarea",{className:"input mono",value:h.content,readOnly:!0})]}):null,"evidence"in a&&a.evidence?ue.jsxs(ue.Fragment,{children:[ue.jsx("div",{className:"label",children:"evidence"}),ue.jsx("textarea",{className:"input mono",value:a.evidence,readOnly:!0})]}):null,"image"in a&&a.image&&typeof a.image=="string"&&c[a.image]?ue.jsxs(ue.Fragment,{children:[ue.jsx("div",{className:"label",children:"image"}),ue.jsx("img",{src:c[a.image],alt:a.image,style:{width:"100%",borderRadius:10,border:"1px solid rgba(255,255,255,0.12)"}})]}):null]}):ue.jsx("div",{className:"muted",style:{marginTop:6},children:"/"})]}),ue.jsxs("div",{className:"card",children:[ue.jsx("div",{className:"h1",children:"MathJax LLM"}),ue.jsx("div",{className:"muted",children:" LaTeX  LLM  content meta  originalContent"}),ue.jsx("div",{className:"row",style:{marginTop:10},children:ue.jsx("button",{className:"btn ok",disabled:o||!d.enabled||!d.apiKey.trim(),onClick:async()=>{l(!0);try{const _=Ke.getState().graph.nodes.filter(z=>typeof z.content=="string"&&z.content.trim().length>0),C=Math.max(1,Math.min(32,Math.floor(d.parallelism||1)));let B=0,L=0;const A=async()=>{var z;for(;B<_.length;){const M=B++,U=_[M],q=U.content??"";try{const D=await H0({llm:d,original:q});Ke.getState().updateNode(U.id,{content:D,meta:{...U.meta??{},originalContent:((z=U.meta)==null?void 0:z.originalContent)??q,mathjaxFixed:!0}})}catch{}finally{L++,L%5===0&&Ke.getState().setInfo(`MathJax ${L}/${_.length}`)}}};await Promise.all(Array.from({length:C},()=>A())),Ke.getState().setInfo(`MathJax ${_.length} `)}catch(_){Ke.getState().setError(String((_==null?void 0:_.message)??_))}finally{l(!1)}},children:o?"...":""})})]})]})]})}function BR(){const r=Ke(e=>e.view);return ue.jsxs("div",{className:"card",children:[ue.jsx("div",{className:"h1",children:""}),ue.jsx("div",{className:"muted",children:""}),ue.jsx("div",{className:"label",children:""}),ue.jsxs("div",{className:"row",children:[ue.jsxs("label",{className:"pill",style:{cursor:"pointer"},children:[ue.jsx("input",{type:"checkbox",checked:r.showExamples,onChange:e=>Ke.getState().setView({showExamples:e.target.checked}),style:{marginRight:6}}),"Example"]}),ue.jsxs("label",{className:"pill",style:{cursor:"pointer"},children:[ue.jsx("input",{type:"checkbox",checked:r.showExercises,onChange:e=>Ke.getState().setView({showExercises:e.target.checked}),style:{marginRight:6}}),"Exercise"]})]}),ue.jsx("div",{className:"label",children:"/"}),ue.jsx("div",{className:"row",children:ue.jsxs("label",{className:"pill",style:{cursor:"pointer"},children:[ue.jsx("input",{type:"checkbox",checked:r.showIsolated,onChange:e=>Ke.getState().setView({showIsolated:e.target.checked}),style:{marginRight:6}}),""]})})]})}function AR(){const[r,e]=Et.useState([]),[t,n]=Et.useState(null),a=()=>{try{n(null),e(r1())}catch(o){n(String((o==null?void 0:o.message)??o))}};Et.useEffect(()=>{a()},[]);const i=o=>new Date(o).toLocaleString();return ue.jsxs("div",{className:"card",children:[ue.jsx("div",{className:"h1",children:" 10  LLM "}),ue.jsx("div",{className:"muted",children:"localStorage/"}),ue.jsxs("div",{className:"row",style:{marginTop:10},children:[ue.jsx("button",{className:"btn",onClick:a,children:""}),ue.jsx("button",{className:"btn danger",onClick:()=>{window.confirm("")&&(sE(),a(),Ke.getState().setInfo(""))},children:""}),ue.jsx("button",{className:"btn danger",onClick:()=>{window.confirm("")&&(oE(),a(),Ke.getState().setInfo(""))},children:""})]}),t?ue.jsx("div",{className:"muted",style:{marginTop:8,color:"rgba(255,107,107,0.95)"},children:t}):null,ue.jsx("div",{className:"label",children:""}),r.length===0?ue.jsx("div",{className:"muted",children:" LLM  10 "}):ue.jsxs("div",{style:{display:"grid",gap:8},children:[r.slice(0,20).map(o=>ue.jsxs("div",{className:"card",style:{marginTop:0,padding:10,background:"rgba(255,255,255,0.04)"},children:[ue.jsxs("div",{className:"row",style:{justifyContent:"space-between",alignItems:"center"},children:[ue.jsxs("div",{className:"muted",children:[ue.jsx("span",{className:"mono",children:i(o.createdAt)}),"  nodes=",ue.jsx("span",{className:"mono",children:o.nodes}),"  edges=",ue.jsx("span",{className:"mono",children:o.edges})," ",o.note?` ${o.note}`:""]}),ue.jsx("button",{className:"btn ok",onClick:()=>{try{const l=aE(o.id);Ke.getState().setGraph(l.graph),Ke.getState().setSchema(l.schema),Ke.getState().setView(l.view),Ke.getState().setInfo(`${i(l.createdAt)}`)}catch(l){Ke.getState().setError(String((l==null?void 0:l.message)??l))}},children:""})]}),ue.jsxs("div",{className:"muted mono",style:{marginTop:6},children:["id=",o.id]})]},o.id)),r.length>20?ue.jsx("div",{className:"muted",children:" 20 "}):null]})]})}function IR(r){const e=r.nodes.map(n=>({data:{id:n.id,label:`${n.type}: ${n.title}`,type:n.type,title:n.title,content:n.content??"",...n.meta}})),t=r.edges.map((n,a)=>({data:{id:n.id??`${n.source}-${n.type}-${n.target}-${a}`,source:n.source,target:n.target,label:n.type,type:n.type,evidence:n.evidence??""}}));return[...e,...t]}function DR(r,e){let t=r.nodes,n=r.edges;const a=new Set;if(e.showExamples||a.add("Example"),e.showExercises||a.add("Exercise"),a.size){const i=new Set(t.filter(o=>!a.has(o.type)).map(o=>o.id));t=t.filter(o=>i.has(o.id)),n=n.filter(o=>i.has(o.source)&&i.has(o.target))}if(!e.showIsolated){const i=new Map;for(const l of t)i.set(l.id,0);for(const l of n)i.set(l.source,(i.get(l.source)??0)+1),i.set(l.target,(i.get(l.target)??0)+1);const o=new Set(t.filter(l=>(i.get(l.id)??0)>0).map(l=>l.id));t=t.filter(l=>o.has(l.id)),n=n.filter(l=>o.has(l.source)&&o.has(l.target))}return{nodes:t,edges:n}}function NR(){const r=Ke(c=>c.graph),e=Ke(c=>c.view),t=Ke(c=>c.processing),n=Ke(c=>c.lastError),a=Ke(c=>c.lastInfo),i=Et.useMemo(()=>DR(r,e),[r,e]),o=Et.useMemo(()=>IR(i),[i]),l=Et.useRef(null);return ue.jsxs("div",{className:"app",children:[ue.jsxs("aside",{className:"sidebar",children:[ue.jsxs("div",{className:"card",children:[ue.jsx("div",{className:"h1",children:"LaTeX   / Cloudflare Pages"}),ue.jsx("div",{className:"muted",children:" LaTeX/zip/ GPT-5  LLM  API"})]}),ue.jsx(dE,{}),ue.jsx(hE,{}),ue.jsx(BR,{}),ue.jsx(jE,{onAfterImport:()=>{var c;return(c=l.current)==null?void 0:c.fit()}}),ue.jsx(AR,{})]}),ue.jsxs("main",{className:"main",children:[ue.jsxs("div",{className:"topbar",children:[ue.jsxs("div",{className:"statusbar",children:[ue.jsxs("span",{className:`pill ${t.status==="idle"?"":"ok"}`,children:[": ",ue.jsx("span",{className:"mono",children:t.status})]}),ue.jsxs("span",{className:"pill",children:[": ",ue.jsx("span",{className:"mono",children:r.nodes.length})]}),ue.jsxs("span",{className:"pill",children:[": ",ue.jsx("span",{className:"mono",children:r.edges.length})]}),t.status!=="idle"?ue.jsxs("span",{className:"pill ok",children:[": ",ue.jsx("span",{className:"mono",children:t.doneChunks})," /"," ",ue.jsx("span",{className:"mono",children:t.totalChunks})]}):null,n?ue.jsxs("span",{className:"pill bad",children:[": ",ue.jsx("span",{className:"mono",children:n})]}):a?ue.jsxs("span",{className:"pill ok",children:[": ",ue.jsx("span",{className:"mono",children:a})]}):null]}),ue.jsxs("div",{className:"row",children:[ue.jsx("button",{className:"btn",onClick:()=>{var c;return(c=l.current)==null?void 0:c.fit()},children:"Fit"}),ue.jsx("button",{className:"btn",onClick:()=>{var c;return(c=l.current)==null?void 0:c.center()},children:"Center"}),ue.jsx("button",{className:"btn danger",onClick:()=>Ke.getState().resetAll(),children:""})]})]}),ue.jsx("div",{className:"graphWrap",children:ue.jsx(RR,{elements:o,apiRef:l})})]})]})}Hb.createRoot(document.getElementById("root")).render(ue.jsx(K0.StrictMode,{children:ue.jsx(NR,{})}));

(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=t(a);fetch(a.href,i)}})();var zu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Bl(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Ic={exports:{}},$s={},Lc={exports:{}},ut={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zg;function Bb(){if(zg)return ut;zg=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator;function p(L){return L===null||typeof L!="object"?null:(L=h&&L[h]||L["@@iterator"],typeof L=="function"?L:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,w={};function x(L,U,oe){this.props=L,this.context=U,this.refs=w,this.updater=oe||g}x.prototype.isReactComponent={},x.prototype.setState=function(L,U){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,U,"setState")},x.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function b(){}b.prototype=x.prototype;function _(L,U,oe){this.props=L,this.context=U,this.refs=w,this.updater=oe||g}var E=_.prototype=new b;E.constructor=_,m(E,x.prototype),E.isPureReactComponent=!0;var C=Array.isArray,B=Object.prototype.hasOwnProperty,N={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function z(L,U,oe){var ie,ne={},we=null,Te=null;if(U!=null)for(ie in U.ref!==void 0&&(Te=U.ref),U.key!==void 0&&(we=""+U.key),U)B.call(U,ie)&&!A.hasOwnProperty(ie)&&(ne[ie]=U[ie]);var ke=arguments.length-2;if(ke===1)ne.children=oe;else if(1<ke){for(var ge=Array(ke),fe=0;fe<ke;fe++)ge[fe]=arguments[fe+2];ne.children=ge}if(L&&L.defaultProps)for(ie in ke=L.defaultProps,ke)ne[ie]===void 0&&(ne[ie]=ke[ie]);return{$$typeof:r,type:L,key:we,ref:Te,props:ne,_owner:N.current}}function M(L,U){return{$$typeof:r,type:L.type,key:U,ref:L.ref,props:L.props,_owner:L._owner}}function V(L){return typeof L=="object"&&L!==null&&L.$$typeof===r}function q(L){var U={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(oe){return U[oe]})}var I=/\/+/g;function F(L,U){return typeof L=="object"&&L!==null&&L.key!=null?q(""+L.key):U.toString(36)}function T(L,U,oe,ie,ne){var we=typeof L;(we==="undefined"||we==="boolean")&&(L=null);var Te=!1;if(L===null)Te=!0;else switch(we){case"string":case"number":Te=!0;break;case"object":switch(L.$$typeof){case r:case e:Te=!0}}if(Te)return Te=L,ne=ne(Te),L=ie===""?"."+F(Te,0):ie,C(ne)?(oe="",L!=null&&(oe=L.replace(I,"$&/")+"/"),T(ne,U,oe,"",function(fe){return fe})):ne!=null&&(V(ne)&&(ne=M(ne,oe+(!ne.key||Te&&Te.key===ne.key?"":(""+ne.key).replace(I,"$&/")+"/")+L)),U.push(ne)),1;if(Te=0,ie=ie===""?".":ie+":",C(L))for(var ke=0;ke<L.length;ke++){we=L[ke];var ge=ie+F(we,ke);Te+=T(we,U,oe,ge,ne)}else if(ge=p(L),typeof ge=="function")for(L=ge.call(L),ke=0;!(we=L.next()).done;)we=we.value,ge=ie+F(we,ke++),Te+=T(we,U,oe,ge,ne);else if(we==="object")throw U=String(L),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.");return Te}function H(L,U,oe){if(L==null)return L;var ie=[],ne=0;return T(L,ie,"","",function(we){return U.call(oe,we,ne++)}),ie}function Q(L){if(L._status===-1){var U=L._result;U=U(),U.then(function(oe){(L._status===0||L._status===-1)&&(L._status=1,L._result=oe)},function(oe){(L._status===0||L._status===-1)&&(L._status=2,L._result=oe)}),L._status===-1&&(L._status=0,L._result=U)}if(L._status===1)return L._result.default;throw L._result}var W={current:null},Z={transition:null},X={ReactCurrentDispatcher:W,ReactCurrentBatchConfig:Z,ReactCurrentOwner:N};function te(){throw Error("act(...) is not supported in production builds of React.")}return ut.Children={map:H,forEach:function(L,U,oe){H(L,function(){U.apply(this,arguments)},oe)},count:function(L){var U=0;return H(L,function(){U++}),U},toArray:function(L){return H(L,function(U){return U})||[]},only:function(L){if(!V(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},ut.Component=x,ut.Fragment=t,ut.Profiler=a,ut.PureComponent=_,ut.StrictMode=n,ut.Suspense=f,ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=X,ut.act=te,ut.cloneElement=function(L,U,oe){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var ie=m({},L.props),ne=L.key,we=L.ref,Te=L._owner;if(U!=null){if(U.ref!==void 0&&(we=U.ref,Te=N.current),U.key!==void 0&&(ne=""+U.key),L.type&&L.type.defaultProps)var ke=L.type.defaultProps;for(ge in U)B.call(U,ge)&&!A.hasOwnProperty(ge)&&(ie[ge]=U[ge]===void 0&&ke!==void 0?ke[ge]:U[ge])}var ge=arguments.length-2;if(ge===1)ie.children=oe;else if(1<ge){ke=Array(ge);for(var fe=0;fe<ge;fe++)ke[fe]=arguments[fe+2];ie.children=ke}return{$$typeof:r,type:L.type,key:ne,ref:we,props:ie,_owner:Te}},ut.createContext=function(L){return L={$$typeof:o,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:i,_context:L},L.Consumer=L},ut.createElement=z,ut.createFactory=function(L){var U=z.bind(null,L);return U.type=L,U},ut.createRef=function(){return{current:null}},ut.forwardRef=function(L){return{$$typeof:u,render:L}},ut.isValidElement=V,ut.lazy=function(L){return{$$typeof:d,_payload:{_status:-1,_result:L},_init:Q}},ut.memo=function(L,U){return{$$typeof:c,type:L,compare:U===void 0?null:U}},ut.startTransition=function(L){var U=Z.transition;Z.transition={};try{L()}finally{Z.transition=U}},ut.unstable_act=te,ut.useCallback=function(L,U){return W.current.useCallback(L,U)},ut.useContext=function(L){return W.current.useContext(L)},ut.useDebugValue=function(){},ut.useDeferredValue=function(L){return W.current.useDeferredValue(L)},ut.useEffect=function(L,U){return W.current.useEffect(L,U)},ut.useId=function(){return W.current.useId()},ut.useImperativeHandle=function(L,U,oe){return W.current.useImperativeHandle(L,U,oe)},ut.useInsertionEffect=function(L,U){return W.current.useInsertionEffect(L,U)},ut.useLayoutEffect=function(L,U){return W.current.useLayoutEffect(L,U)},ut.useMemo=function(L,U){return W.current.useMemo(L,U)},ut.useReducer=function(L,U,oe){return W.current.useReducer(L,U,oe)},ut.useRef=function(L){return W.current.useRef(L)},ut.useState=function(L){return W.current.useState(L)},ut.useSyncExternalStore=function(L,U,oe){return W.current.useSyncExternalStore(L,U,oe)},ut.useTransition=function(){return W.current.useTransition()},ut.version="18.3.1",ut}var Fg;function bo(){return Fg||(Fg=1,Lc.exports=Bb()),Lc.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ug;function Ab(){if(Ug)return $s;Ug=1;var r=bo(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(u,f,c){var d,h={},p=null,g=null;c!==void 0&&(p=""+c),f.key!==void 0&&(p=""+f.key),f.ref!==void 0&&(g=f.ref);for(d in f)n.call(f,d)&&!i.hasOwnProperty(d)&&(h[d]=f[d]);if(u&&u.defaultProps)for(d in f=u.defaultProps,f)h[d]===void 0&&(h[d]=f[d]);return{$$typeof:e,type:u,key:p,ref:g,props:h,_owner:a.current}}return $s.Fragment=t,$s.jsx=o,$s.jsxs=o,$s}var $g;function Db(){return $g||($g=1,Ic.exports=Ab()),Ic.exports}var Ae=Db(),lr=bo();const $0=Bl(lr);var Fu={},Nc={exports:{}},Or={},Oc={exports:{}},Mc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vg;function Ib(){return Vg||(Vg=1,(function(r){function e(Z,X){var te=Z.length;Z.push(X);e:for(;0<te;){var L=te-1>>>1,U=Z[L];if(0<a(U,X))Z[L]=X,Z[te]=U,te=L;else break e}}function t(Z){return Z.length===0?null:Z[0]}function n(Z){if(Z.length===0)return null;var X=Z[0],te=Z.pop();if(te!==X){Z[0]=te;e:for(var L=0,U=Z.length,oe=U>>>1;L<oe;){var ie=2*(L+1)-1,ne=Z[ie],we=ie+1,Te=Z[we];if(0>a(ne,te))we<U&&0>a(Te,ne)?(Z[L]=Te,Z[we]=te,L=we):(Z[L]=ne,Z[ie]=te,L=ie);else if(we<U&&0>a(Te,te))Z[L]=Te,Z[we]=te,L=we;else break e}}return X}function a(Z,X){var te=Z.sortIndex-X.sortIndex;return te!==0?te:Z.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;r.unstable_now=function(){return i.now()}}else{var o=Date,u=o.now();r.unstable_now=function(){return o.now()-u}}var f=[],c=[],d=1,h=null,p=3,g=!1,m=!1,w=!1,x=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(Z){for(var X=t(c);X!==null;){if(X.callback===null)n(c);else if(X.startTime<=Z)n(c),X.sortIndex=X.expirationTime,e(f,X);else break;X=t(c)}}function C(Z){if(w=!1,E(Z),!m)if(t(f)!==null)m=!0,Q(B);else{var X=t(c);X!==null&&W(C,X.startTime-Z)}}function B(Z,X){m=!1,w&&(w=!1,b(z),z=-1),g=!0;var te=p;try{for(E(X),h=t(f);h!==null&&(!(h.expirationTime>X)||Z&&!q());){var L=h.callback;if(typeof L=="function"){h.callback=null,p=h.priorityLevel;var U=L(h.expirationTime<=X);X=r.unstable_now(),typeof U=="function"?h.callback=U:h===t(f)&&n(f),E(X)}else n(f);h=t(f)}if(h!==null)var oe=!0;else{var ie=t(c);ie!==null&&W(C,ie.startTime-X),oe=!1}return oe}finally{h=null,p=te,g=!1}}var N=!1,A=null,z=-1,M=5,V=-1;function q(){return!(r.unstable_now()-V<M)}function I(){if(A!==null){var Z=r.unstable_now();V=Z;var X=!0;try{X=A(!0,Z)}finally{X?F():(N=!1,A=null)}}else N=!1}var F;if(typeof _=="function")F=function(){_(I)};else if(typeof MessageChannel<"u"){var T=new MessageChannel,H=T.port2;T.port1.onmessage=I,F=function(){H.postMessage(null)}}else F=function(){x(I,0)};function Q(Z){A=Z,N||(N=!0,F())}function W(Z,X){z=x(function(){Z(r.unstable_now())},X)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Z){Z.callback=null},r.unstable_continueExecution=function(){m||g||(m=!0,Q(B))},r.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<Z?Math.floor(1e3/Z):5},r.unstable_getCurrentPriorityLevel=function(){return p},r.unstable_getFirstCallbackNode=function(){return t(f)},r.unstable_next=function(Z){switch(p){case 1:case 2:case 3:var X=3;break;default:X=p}var te=p;p=X;try{return Z()}finally{p=te}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(Z,X){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var te=p;p=Z;try{return X()}finally{p=te}},r.unstable_scheduleCallback=function(Z,X,te){var L=r.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?L+te:L):te=L,Z){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=te+U,Z={id:d++,callback:X,priorityLevel:Z,startTime:te,expirationTime:U,sortIndex:-1},te>L?(Z.sortIndex=te,e(c,Z),t(f)===null&&Z===t(c)&&(w?(b(z),z=-1):w=!0,W(C,te-L))):(Z.sortIndex=U,e(f,Z),m||g||(m=!0,Q(B))),Z},r.unstable_shouldYield=q,r.unstable_wrapCallback=function(Z){var X=p;return function(){var te=p;p=X;try{return Z.apply(this,arguments)}finally{p=te}}}})(Mc)),Mc}var jg;function Lb(){return jg||(jg=1,Oc.exports=Ib()),Oc.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qg;function Nb(){if(qg)return Or;qg=1;var r=bo(),e=Lb();function t(s){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+s,v=1;v<arguments.length;v++)l+="&args[]="+encodeURIComponent(arguments[v]);return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,a={};function i(s,l){o(s,l),o(s+"Capture",l)}function o(s,l){for(a[s]=l,s=0;s<l.length;s++)n.add(l[s])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,c=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},h={};function p(s){return f.call(h,s)?!0:f.call(d,s)?!1:c.test(s)?h[s]=!0:(d[s]=!0,!1)}function g(s,l,v,y){if(v!==null&&v.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return y?!1:v!==null?!v.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function m(s,l,v,y){if(l===null||typeof l>"u"||g(s,l,v,y))return!0;if(y)return!1;if(v!==null)switch(v.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function w(s,l,v,y,S,P,j){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=y,this.attributeNamespace=S,this.mustUseProperty=v,this.propertyName=s,this.type=l,this.sanitizeURL=P,this.removeEmptyString=j}var x={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){x[s]=new w(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var l=s[0];x[l]=new w(l,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){x[s]=new w(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){x[s]=new w(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){x[s]=new w(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){x[s]=new w(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){x[s]=new w(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){x[s]=new w(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){x[s]=new w(s,5,!1,s.toLowerCase(),null,!1,!1)});var b=/[\-:]([a-z])/g;function _(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var l=s.replace(b,_);x[l]=new w(l,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var l=s.replace(b,_);x[l]=new w(l,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var l=s.replace(b,_);x[l]=new w(l,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){x[s]=new w(s,1,!1,s.toLowerCase(),null,!1,!1)}),x.xlinkHref=new w("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){x[s]=new w(s,1,!1,s.toLowerCase(),null,!0,!0)});function E(s,l,v,y){var S=x.hasOwnProperty(l)?x[l]:null;(S!==null?S.type!==0:y||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(m(l,v,S,y)&&(v=null),y||S===null?p(l)&&(v===null?s.removeAttribute(l):s.setAttribute(l,""+v)):S.mustUseProperty?s[S.propertyName]=v===null?S.type===3?!1:"":v:(l=S.attributeName,y=S.attributeNamespace,v===null?s.removeAttribute(l):(S=S.type,v=S===3||S===4&&v===!0?"":""+v,y?s.setAttributeNS(y,l,v):s.setAttribute(l,v))))}var C=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,B=Symbol.for("react.element"),N=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),V=Symbol.for("react.provider"),q=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),Q=Symbol.for("react.lazy"),W=Symbol.for("react.offscreen"),Z=Symbol.iterator;function X(s){return s===null||typeof s!="object"?null:(s=Z&&s[Z]||s["@@iterator"],typeof s=="function"?s:null)}var te=Object.assign,L;function U(s){if(L===void 0)try{throw Error()}catch(v){var l=v.stack.trim().match(/\n( *(at )?)/);L=l&&l[1]||""}return`
`+L+s}var oe=!1;function ie(s,l){if(!s||oe)return"";oe=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(Ce){var y=Ce}Reflect.construct(s,[],l)}else{try{l.call()}catch(Ce){y=Ce}s.call(l.prototype)}else{try{throw Error()}catch(Ce){y=Ce}s()}}catch(Ce){if(Ce&&y&&typeof Ce.stack=="string"){for(var S=Ce.stack.split(`
`),P=y.stack.split(`
`),j=S.length-1,re=P.length-1;1<=j&&0<=re&&S[j]!==P[re];)re--;for(;1<=j&&0<=re;j--,re--)if(S[j]!==P[re]){if(j!==1||re!==1)do if(j--,re--,0>re||S[j]!==P[re]){var ue=`
`+S[j].replace(" at new "," at ");return s.displayName&&ue.includes("<anonymous>")&&(ue=ue.replace("<anonymous>",s.displayName)),ue}while(1<=j&&0<=re);break}}}finally{oe=!1,Error.prepareStackTrace=v}return(s=s?s.displayName||s.name:"")?U(s):""}function ne(s){switch(s.tag){case 5:return U(s.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return s=ie(s.type,!1),s;case 11:return s=ie(s.type.render,!1),s;case 1:return s=ie(s.type,!0),s;default:return""}}function we(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case A:return"Fragment";case N:return"Portal";case M:return"Profiler";case z:return"StrictMode";case F:return"Suspense";case T:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case q:return(s.displayName||"Context")+".Consumer";case V:return(s._context.displayName||"Context")+".Provider";case I:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case H:return l=s.displayName||null,l!==null?l:we(s.type)||"Memo";case Q:l=s._payload,s=s._init;try{return we(s(l))}catch{}}return null}function Te(s){var l=s.type;switch(s.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=l.render,s=s.displayName||s.name||"",l.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return we(l);case 8:return l===z?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function ke(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function ge(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function fe(s){var l=ge(s)?"checked":"value",v=Object.getOwnPropertyDescriptor(s.constructor.prototype,l),y=""+s[l];if(!s.hasOwnProperty(l)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var S=v.get,P=v.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return S.call(this)},set:function(j){y=""+j,P.call(this,j)}}),Object.defineProperty(s,l,{enumerable:v.enumerable}),{getValue:function(){return y},setValue:function(j){y=""+j},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function de(s){s._valueTracker||(s._valueTracker=fe(s))}function be(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var v=l.getValue(),y="";return s&&(y=ge(s)?s.checked?"true":"false":s.value),s=y,s!==v?(l.setValue(s),!0):!1}function Pe(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function D(s,l){var v=l.checked;return te({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:v??s._wrapperState.initialChecked})}function ve(s,l){var v=l.defaultValue==null?"":l.defaultValue,y=l.checked!=null?l.checked:l.defaultChecked;v=ke(l.value!=null?l.value:v),s._wrapperState={initialChecked:y,initialValue:v,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function pe(s,l){l=l.checked,l!=null&&E(s,"checked",l,!1)}function Y(s,l){pe(s,l);var v=ke(l.value),y=l.type;if(v!=null)y==="number"?(v===0&&s.value===""||s.value!=v)&&(s.value=""+v):s.value!==""+v&&(s.value=""+v);else if(y==="submit"||y==="reset"){s.removeAttribute("value");return}l.hasOwnProperty("value")?ae(s,l.type,v):l.hasOwnProperty("defaultValue")&&ae(s,l.type,ke(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(s.defaultChecked=!!l.defaultChecked)}function K(s,l,v){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var y=l.type;if(!(y!=="submit"&&y!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+s._wrapperState.initialValue,v||l===s.value||(s.value=l),s.defaultValue=l}v=s.name,v!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,v!==""&&(s.name=v)}function ae(s,l,v){(l!=="number"||Pe(s.ownerDocument)!==s)&&(v==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+v&&(s.defaultValue=""+v))}var he=Array.isArray;function me(s,l,v,y){if(s=s.options,l){l={};for(var S=0;S<v.length;S++)l["$"+v[S]]=!0;for(v=0;v<s.length;v++)S=l.hasOwnProperty("$"+s[v].value),s[v].selected!==S&&(s[v].selected=S),S&&y&&(s[v].defaultSelected=!0)}else{for(v=""+ke(v),l=null,S=0;S<s.length;S++){if(s[S].value===v){s[S].selected=!0,y&&(s[S].defaultSelected=!0);return}l!==null||s[S].disabled||(l=s[S])}l!==null&&(l.selected=!0)}}function se(s,l){if(l.dangerouslySetInnerHTML!=null)throw Error(t(91));return te({},l,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function Re(s,l){var v=l.value;if(v==null){if(v=l.children,l=l.defaultValue,v!=null){if(l!=null)throw Error(t(92));if(he(v)){if(1<v.length)throw Error(t(93));v=v[0]}l=v}l==null&&(l=""),v=l}s._wrapperState={initialValue:ke(v)}}function De(s,l){var v=ke(l.value),y=ke(l.defaultValue);v!=null&&(v=""+v,v!==s.value&&(s.value=v),l.defaultValue==null&&s.defaultValue!==v&&(s.defaultValue=v)),y!=null&&(s.defaultValue=""+y)}function Be(s){var l=s.textContent;l===s._wrapperState.initialValue&&l!==""&&l!==null&&(s.value=l)}function ze(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $(s,l){return s==null||s==="http://www.w3.org/1999/xhtml"?ze(l):s==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var k,R=(function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,v,y,S){MSApp.execUnsafeLocalFunction(function(){return s(l,v,y,S)})}:s})(function(s,l){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=l;else{for(k=k||document.createElement("div"),k.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=k.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;l.firstChild;)s.appendChild(l.firstChild)}});function G(s,l){if(l){var v=s.firstChild;if(v&&v===s.lastChild&&v.nodeType===3){v.nodeValue=l;return}}s.textContent=l}var ee={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},J=["Webkit","ms","Moz","O"];Object.keys(ee).forEach(function(s){J.forEach(function(l){l=l+s.charAt(0).toUpperCase()+s.substring(1),ee[l]=ee[s]})});function O(s,l,v){return l==null||typeof l=="boolean"||l===""?"":v||typeof l!="number"||l===0||ee.hasOwnProperty(s)&&ee[s]?(""+l).trim():l+"px"}function le(s,l){s=s.style;for(var v in l)if(l.hasOwnProperty(v)){var y=v.indexOf("--")===0,S=O(v,l[v],y);v==="float"&&(v="cssFloat"),y?s.setProperty(v,S):s[v]=S}}var _e=te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(s,l){if(l){if(_e[s]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(t(137,s));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(t(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(t(61))}if(l.style!=null&&typeof l.style!="object")throw Error(t(62))}}function Se(s,l){if(s.indexOf("-")===-1)return typeof l.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Oe=null;function Ie(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var We=null,$e=null,He=null;function rt(s){if(s=Cs(s)){if(typeof We!="function")throw Error(t(280));var l=s.stateNode;l&&(l=Jo(l),We(s.stateNode,s.type,l))}}function nt(s){$e?He?He.push(s):He=[s]:$e=s}function Ke(){if($e){var s=$e,l=He;if(He=$e=null,rt(s),l)for(s=0;s<l.length;s++)rt(l[s])}}function it(s,l){return s(l)}function at(){}var Dt=!1;function Et(s,l,v){if(Dt)return s(l,v);Dt=!0;try{return it(s,l,v)}finally{Dt=!1,($e!==null||He!==null)&&(at(),Ke())}}function $t(s,l){var v=s.stateNode;if(v===null)return null;var y=Jo(v);if(y===null)return null;v=y[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(s=s.type,y=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!y;break e;default:s=!1}if(s)return null;if(v&&typeof v!="function")throw Error(t(231,l,typeof v));return v}var Pt=!1;if(u)try{var Rt={};Object.defineProperty(Rt,"passive",{get:function(){Pt=!0}}),window.addEventListener("test",Rt,Rt),window.removeEventListener("test",Rt,Rt)}catch{Pt=!1}function Vt(s,l,v,y,S,P,j,re,ue){var Ce=Array.prototype.slice.call(arguments,3);try{l.apply(v,Ce)}catch(Ne){this.onError(Ne)}}var It=!1,Ur=null,St=!1,$r=null,an={onError:function(s){It=!0,Ur=s}};function qn(s,l,v,y,S,P,j,re,ue){It=!1,Ur=null,Vt.apply(an,arguments)}function si(s,l,v,y,S,P,j,re,ue){if(qn.apply(this,arguments),It){if(It){var Ce=Ur;It=!1,Ur=null}else throw Error(t(198));St||(St=!0,$r=Ce)}}function Er(s){var l=s,v=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(v=l.return),s=l.return;while(s)}return l.tag===3?v:null}function sr(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function Gt(s){if(Er(s)!==s)throw Error(t(188))}function vr(s){var l=s.alternate;if(!l){if(l=Er(s),l===null)throw Error(t(188));return l!==s?null:s}for(var v=s,y=l;;){var S=v.return;if(S===null)break;var P=S.alternate;if(P===null){if(y=S.return,y!==null){v=y;continue}break}if(S.child===P.child){for(P=S.child;P;){if(P===v)return Gt(S),s;if(P===y)return Gt(S),l;P=P.sibling}throw Error(t(188))}if(v.return!==y.return)v=S,y=P;else{for(var j=!1,re=S.child;re;){if(re===v){j=!0,v=S,y=P;break}if(re===y){j=!0,y=S,v=P;break}re=re.sibling}if(!j){for(re=P.child;re;){if(re===v){j=!0,v=P,y=S;break}if(re===y){j=!0,y=P,v=S;break}re=re.sibling}if(!j)throw Error(t(189))}}if(v.alternate!==y)throw Error(t(190))}if(v.tag!==3)throw Error(t(188));return v.stateNode.current===v?s:l}function Wn(s){return s=vr(s),s!==null?Sr(s):null}function Sr(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var l=Sr(s);if(l!==null)return l;s=s.sibling}return null}var is=e.unstable_scheduleCallback,No=e.unstable_cancelCallback,Zl=e.unstable_shouldYield,Xl=e.unstable_requestPaint,Lt=e.unstable_now,Yl=e.unstable_getCurrentPriorityLevel,ss=e.unstable_ImmediatePriority,Oo=e.unstable_UserBlockingPriority,gn=e.unstable_NormalPriority,os=e.unstable_LowPriority,Ba=e.unstable_IdlePriority,Aa=null,Vr=null;function Ql(s){if(Vr&&typeof Vr.onCommitFiberRoot=="function")try{Vr.onCommitFiberRoot(Aa,s,void 0,(s.current.flags&128)===128)}catch{}}var Nt=Math.clz32?Math.clz32:Da,us=Math.log,Mo=Math.LN2;function Da(s){return s>>>=0,s===0?32:31-(us(s)/Mo|0)|0}var pr=64,oi=4194304;function ui(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function li(s,l){var v=s.pendingLanes;if(v===0)return 0;var y=0,S=s.suspendedLanes,P=s.pingedLanes,j=v&268435455;if(j!==0){var re=j&~S;re!==0?y=ui(re):(P&=j,P!==0&&(y=ui(P)))}else j=v&~S,j!==0?y=ui(j):P!==0&&(y=ui(P));if(y===0)return 0;if(l!==0&&l!==y&&(l&S)===0&&(S=y&-y,P=l&-l,S>=P||S===16&&(P&4194240)!==0))return l;if((y&4)!==0&&(y|=v&16),l=s.entangledLanes,l!==0)for(s=s.entanglements,l&=y;0<l;)v=31-Nt(l),S=1<<v,y|=s[v],l&=~S;return y}function Zw(s,l){switch(s){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xw(s,l){for(var v=s.suspendedLanes,y=s.pingedLanes,S=s.expirationTimes,P=s.pendingLanes;0<P;){var j=31-Nt(P),re=1<<j,ue=S[j];ue===-1?((re&v)===0||(re&y)!==0)&&(S[j]=Zw(re,l)):ue<=l&&(s.expiredLanes|=re),P&=~re}}function Jl(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function pv(){var s=pr;return pr<<=1,(pr&4194240)===0&&(pr=64),s}function ef(s){for(var l=[],v=0;31>v;v++)l.push(s);return l}function ls(s,l,v){s.pendingLanes|=l,l!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,l=31-Nt(l),s[l]=v}function Yw(s,l){var v=s.pendingLanes&~l;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=l,s.mutableReadLanes&=l,s.entangledLanes&=l,l=s.entanglements;var y=s.eventTimes;for(s=s.expirationTimes;0<v;){var S=31-Nt(v),P=1<<S;l[S]=0,y[S]=-1,s[S]=-1,v&=~P}}function tf(s,l){var v=s.entangledLanes|=l;for(s=s.entanglements;v;){var y=31-Nt(v),S=1<<y;S&l|s[y]&l&&(s[y]|=l),v&=~S}}var mt=0;function gv(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var mv,rf,yv,wv,xv,nf=!1,zo=[],Hn=null,Gn=null,Kn=null,fs=new Map,cs=new Map,Zn=[],Qw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function bv(s,l){switch(s){case"focusin":case"focusout":Hn=null;break;case"dragenter":case"dragleave":Gn=null;break;case"mouseover":case"mouseout":Kn=null;break;case"pointerover":case"pointerout":fs.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":cs.delete(l.pointerId)}}function ds(s,l,v,y,S,P){return s===null||s.nativeEvent!==P?(s={blockedOn:l,domEventName:v,eventSystemFlags:y,nativeEvent:P,targetContainers:[S]},l!==null&&(l=Cs(l),l!==null&&rf(l)),s):(s.eventSystemFlags|=y,l=s.targetContainers,S!==null&&l.indexOf(S)===-1&&l.push(S),s)}function Jw(s,l,v,y,S){switch(l){case"focusin":return Hn=ds(Hn,s,l,v,y,S),!0;case"dragenter":return Gn=ds(Gn,s,l,v,y,S),!0;case"mouseover":return Kn=ds(Kn,s,l,v,y,S),!0;case"pointerover":var P=S.pointerId;return fs.set(P,ds(fs.get(P)||null,s,l,v,y,S)),!0;case"gotpointercapture":return P=S.pointerId,cs.set(P,ds(cs.get(P)||null,s,l,v,y,S)),!0}return!1}function _v(s){var l=Ia(s.target);if(l!==null){var v=Er(l);if(v!==null){if(l=v.tag,l===13){if(l=sr(v),l!==null){s.blockedOn=l,xv(s.priority,function(){yv(v)});return}}else if(l===3&&v.stateNode.current.memoizedState.isDehydrated){s.blockedOn=v.tag===3?v.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Fo(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var v=sf(s.domEventName,s.eventSystemFlags,l[0],s.nativeEvent);if(v===null){v=s.nativeEvent;var y=new v.constructor(v.type,v);Oe=y,v.target.dispatchEvent(y),Oe=null}else return l=Cs(v),l!==null&&rf(l),s.blockedOn=v,!1;l.shift()}return!0}function Ev(s,l,v){Fo(s)&&v.delete(l)}function ex(){nf=!1,Hn!==null&&Fo(Hn)&&(Hn=null),Gn!==null&&Fo(Gn)&&(Gn=null),Kn!==null&&Fo(Kn)&&(Kn=null),fs.forEach(Ev),cs.forEach(Ev)}function hs(s,l){s.blockedOn===l&&(s.blockedOn=null,nf||(nf=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ex)))}function vs(s){function l(S){return hs(S,s)}if(0<zo.length){hs(zo[0],s);for(var v=1;v<zo.length;v++){var y=zo[v];y.blockedOn===s&&(y.blockedOn=null)}}for(Hn!==null&&hs(Hn,s),Gn!==null&&hs(Gn,s),Kn!==null&&hs(Kn,s),fs.forEach(l),cs.forEach(l),v=0;v<Zn.length;v++)y=Zn[v],y.blockedOn===s&&(y.blockedOn=null);for(;0<Zn.length&&(v=Zn[0],v.blockedOn===null);)_v(v),v.blockedOn===null&&Zn.shift()}var fi=C.ReactCurrentBatchConfig,Uo=!0;function tx(s,l,v,y){var S=mt,P=fi.transition;fi.transition=null;try{mt=1,af(s,l,v,y)}finally{mt=S,fi.transition=P}}function rx(s,l,v,y){var S=mt,P=fi.transition;fi.transition=null;try{mt=4,af(s,l,v,y)}finally{mt=S,fi.transition=P}}function af(s,l,v,y){if(Uo){var S=sf(s,l,v,y);if(S===null)Ef(s,l,y,$o,v),bv(s,y);else if(Jw(S,s,l,v,y))y.stopPropagation();else if(bv(s,y),l&4&&-1<Qw.indexOf(s)){for(;S!==null;){var P=Cs(S);if(P!==null&&mv(P),P=sf(s,l,v,y),P===null&&Ef(s,l,y,$o,v),P===S)break;S=P}S!==null&&y.stopPropagation()}else Ef(s,l,y,null,v)}}var $o=null;function sf(s,l,v,y){if($o=null,s=Ie(y),s=Ia(s),s!==null)if(l=Er(s),l===null)s=null;else if(v=l.tag,v===13){if(s=sr(l),s!==null)return s;s=null}else if(v===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null);return $o=s,null}function Sv(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Yl()){case ss:return 1;case Oo:return 4;case gn:case os:return 16;case Ba:return 536870912;default:return 16}default:return 16}}var Xn=null,of=null,Vo=null;function kv(){if(Vo)return Vo;var s,l=of,v=l.length,y,S="value"in Xn?Xn.value:Xn.textContent,P=S.length;for(s=0;s<v&&l[s]===S[s];s++);var j=v-s;for(y=1;y<=j&&l[v-y]===S[P-y];y++);return Vo=S.slice(s,1<y?1-y:void 0)}function jo(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function qo(){return!0}function Cv(){return!1}function jr(s){function l(v,y,S,P,j){this._reactName=v,this._targetInst=S,this.type=y,this.nativeEvent=P,this.target=j,this.currentTarget=null;for(var re in s)s.hasOwnProperty(re)&&(v=s[re],this[re]=v?v(P):P[re]);return this.isDefaultPrevented=(P.defaultPrevented!=null?P.defaultPrevented:P.returnValue===!1)?qo:Cv,this.isPropagationStopped=Cv,this}return te(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var v=this.nativeEvent;v&&(v.preventDefault?v.preventDefault():typeof v.returnValue!="unknown"&&(v.returnValue=!1),this.isDefaultPrevented=qo)},stopPropagation:function(){var v=this.nativeEvent;v&&(v.stopPropagation?v.stopPropagation():typeof v.cancelBubble!="unknown"&&(v.cancelBubble=!0),this.isPropagationStopped=qo)},persist:function(){},isPersistent:qo}),l}var ci={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uf=jr(ci),ps=te({},ci,{view:0,detail:0}),nx=jr(ps),lf,ff,gs,Wo=te({},ps,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:df,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==gs&&(gs&&s.type==="mousemove"?(lf=s.screenX-gs.screenX,ff=s.screenY-gs.screenY):ff=lf=0,gs=s),lf)},movementY:function(s){return"movementY"in s?s.movementY:ff}}),Tv=jr(Wo),ax=te({},Wo,{dataTransfer:0}),ix=jr(ax),sx=te({},ps,{relatedTarget:0}),cf=jr(sx),ox=te({},ci,{animationName:0,elapsedTime:0,pseudoElement:0}),ux=jr(ox),lx=te({},ci,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),fx=jr(lx),cx=te({},ci,{data:0}),Pv=jr(cx),dx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function px(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=vx[s])?!!l[s]:!1}function df(){return px}var gx=te({},ps,{key:function(s){if(s.key){var l=dx[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=jo(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?hx[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:df,charCode:function(s){return s.type==="keypress"?jo(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?jo(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),mx=jr(gx),yx=te({},Wo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rv=jr(yx),wx=te({},ps,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:df}),xx=jr(wx),bx=te({},ci,{propertyName:0,elapsedTime:0,pseudoElement:0}),_x=jr(bx),Ex=te({},Wo,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Sx=jr(Ex),kx=[9,13,27,32],hf=u&&"CompositionEvent"in window,ms=null;u&&"documentMode"in document&&(ms=document.documentMode);var Cx=u&&"TextEvent"in window&&!ms,Bv=u&&(!hf||ms&&8<ms&&11>=ms),Av=" ",Dv=!1;function Iv(s,l){switch(s){case"keyup":return kx.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lv(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var di=!1;function Tx(s,l){switch(s){case"compositionend":return Lv(l);case"keypress":return l.which!==32?null:(Dv=!0,Av);case"textInput":return s=l.data,s===Av&&Dv?null:s;default:return null}}function Px(s,l){if(di)return s==="compositionend"||!hf&&Iv(s,l)?(s=kv(),Vo=of=Xn=null,di=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Bv&&l.locale!=="ko"?null:l.data;default:return null}}var Rx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nv(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!Rx[s.type]:l==="textarea"}function Ov(s,l,v,y){nt(y),l=Xo(l,"onChange"),0<l.length&&(v=new uf("onChange","change",null,v,y),s.push({event:v,listeners:l}))}var ys=null,ws=null;function Bx(s){ep(s,0)}function Ho(s){var l=mi(s);if(be(l))return s}function Ax(s,l){if(s==="change")return l}var Mv=!1;if(u){var vf;if(u){var pf="oninput"in document;if(!pf){var zv=document.createElement("div");zv.setAttribute("oninput","return;"),pf=typeof zv.oninput=="function"}vf=pf}else vf=!1;Mv=vf&&(!document.documentMode||9<document.documentMode)}function Fv(){ys&&(ys.detachEvent("onpropertychange",Uv),ws=ys=null)}function Uv(s){if(s.propertyName==="value"&&Ho(ws)){var l=[];Ov(l,ws,s,Ie(s)),Et(Bx,l)}}function Dx(s,l,v){s==="focusin"?(Fv(),ys=l,ws=v,ys.attachEvent("onpropertychange",Uv)):s==="focusout"&&Fv()}function Ix(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Ho(ws)}function Lx(s,l){if(s==="click")return Ho(l)}function Nx(s,l){if(s==="input"||s==="change")return Ho(l)}function Ox(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var sn=typeof Object.is=="function"?Object.is:Ox;function xs(s,l){if(sn(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var v=Object.keys(s),y=Object.keys(l);if(v.length!==y.length)return!1;for(y=0;y<v.length;y++){var S=v[y];if(!f.call(l,S)||!sn(s[S],l[S]))return!1}return!0}function $v(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Vv(s,l){var v=$v(s);s=0;for(var y;v;){if(v.nodeType===3){if(y=s+v.textContent.length,s<=l&&y>=l)return{node:v,offset:l-s};s=y}e:{for(;v;){if(v.nextSibling){v=v.nextSibling;break e}v=v.parentNode}v=void 0}v=$v(v)}}function jv(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?jv(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function qv(){for(var s=window,l=Pe();l instanceof s.HTMLIFrameElement;){try{var v=typeof l.contentWindow.location.href=="string"}catch{v=!1}if(v)s=l.contentWindow;else break;l=Pe(s.document)}return l}function gf(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}function Mx(s){var l=qv(),v=s.focusedElem,y=s.selectionRange;if(l!==v&&v&&v.ownerDocument&&jv(v.ownerDocument.documentElement,v)){if(y!==null&&gf(v)){if(l=y.start,s=y.end,s===void 0&&(s=l),"selectionStart"in v)v.selectionStart=l,v.selectionEnd=Math.min(s,v.value.length);else if(s=(l=v.ownerDocument||document)&&l.defaultView||window,s.getSelection){s=s.getSelection();var S=v.textContent.length,P=Math.min(y.start,S);y=y.end===void 0?P:Math.min(y.end,S),!s.extend&&P>y&&(S=y,y=P,P=S),S=Vv(v,P);var j=Vv(v,y);S&&j&&(s.rangeCount!==1||s.anchorNode!==S.node||s.anchorOffset!==S.offset||s.focusNode!==j.node||s.focusOffset!==j.offset)&&(l=l.createRange(),l.setStart(S.node,S.offset),s.removeAllRanges(),P>y?(s.addRange(l),s.extend(j.node,j.offset)):(l.setEnd(j.node,j.offset),s.addRange(l)))}}for(l=[],s=v;s=s.parentNode;)s.nodeType===1&&l.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<l.length;v++)s=l[v],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var zx=u&&"documentMode"in document&&11>=document.documentMode,hi=null,mf=null,bs=null,yf=!1;function Wv(s,l,v){var y=v.window===v?v.document:v.nodeType===9?v:v.ownerDocument;yf||hi==null||hi!==Pe(y)||(y=hi,"selectionStart"in y&&gf(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),bs&&xs(bs,y)||(bs=y,y=Xo(mf,"onSelect"),0<y.length&&(l=new uf("onSelect","select",null,l,v),s.push({event:l,listeners:y}),l.target=hi)))}function Go(s,l){var v={};return v[s.toLowerCase()]=l.toLowerCase(),v["Webkit"+s]="webkit"+l,v["Moz"+s]="moz"+l,v}var vi={animationend:Go("Animation","AnimationEnd"),animationiteration:Go("Animation","AnimationIteration"),animationstart:Go("Animation","AnimationStart"),transitionend:Go("Transition","TransitionEnd")},wf={},Hv={};u&&(Hv=document.createElement("div").style,"AnimationEvent"in window||(delete vi.animationend.animation,delete vi.animationiteration.animation,delete vi.animationstart.animation),"TransitionEvent"in window||delete vi.transitionend.transition);function Ko(s){if(wf[s])return wf[s];if(!vi[s])return s;var l=vi[s],v;for(v in l)if(l.hasOwnProperty(v)&&v in Hv)return wf[s]=l[v];return s}var Gv=Ko("animationend"),Kv=Ko("animationiteration"),Zv=Ko("animationstart"),Xv=Ko("transitionend"),Yv=new Map,Qv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Yn(s,l){Yv.set(s,l),i(l,[s])}for(var xf=0;xf<Qv.length;xf++){var bf=Qv[xf],Fx=bf.toLowerCase(),Ux=bf[0].toUpperCase()+bf.slice(1);Yn(Fx,"on"+Ux)}Yn(Gv,"onAnimationEnd"),Yn(Kv,"onAnimationIteration"),Yn(Zv,"onAnimationStart"),Yn("dblclick","onDoubleClick"),Yn("focusin","onFocus"),Yn("focusout","onBlur"),Yn(Xv,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _s="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$x=new Set("cancel close invalid load scroll toggle".split(" ").concat(_s));function Jv(s,l,v){var y=s.type||"unknown-event";s.currentTarget=v,si(y,l,void 0,s),s.currentTarget=null}function ep(s,l){l=(l&4)!==0;for(var v=0;v<s.length;v++){var y=s[v],S=y.event;y=y.listeners;e:{var P=void 0;if(l)for(var j=y.length-1;0<=j;j--){var re=y[j],ue=re.instance,Ce=re.currentTarget;if(re=re.listener,ue!==P&&S.isPropagationStopped())break e;Jv(S,re,Ce),P=ue}else for(j=0;j<y.length;j++){if(re=y[j],ue=re.instance,Ce=re.currentTarget,re=re.listener,ue!==P&&S.isPropagationStopped())break e;Jv(S,re,Ce),P=ue}}}if(St)throw s=$r,St=!1,$r=null,s}function kt(s,l){var v=l[Rf];v===void 0&&(v=l[Rf]=new Set);var y=s+"__bubble";v.has(y)||(tp(l,s,2,!1),v.add(y))}function _f(s,l,v){var y=0;l&&(y|=4),tp(v,s,y,l)}var Zo="_reactListening"+Math.random().toString(36).slice(2);function Es(s){if(!s[Zo]){s[Zo]=!0,n.forEach(function(v){v!=="selectionchange"&&($x.has(v)||_f(v,!1,s),_f(v,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[Zo]||(l[Zo]=!0,_f("selectionchange",!1,l))}}function tp(s,l,v,y){switch(Sv(l)){case 1:var S=tx;break;case 4:S=rx;break;default:S=af}v=S.bind(null,l,v,s),S=void 0,!Pt||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(S=!0),y?S!==void 0?s.addEventListener(l,v,{capture:!0,passive:S}):s.addEventListener(l,v,!0):S!==void 0?s.addEventListener(l,v,{passive:S}):s.addEventListener(l,v,!1)}function Ef(s,l,v,y,S){var P=y;if((l&1)===0&&(l&2)===0&&y!==null)e:for(;;){if(y===null)return;var j=y.tag;if(j===3||j===4){var re=y.stateNode.containerInfo;if(re===S||re.nodeType===8&&re.parentNode===S)break;if(j===4)for(j=y.return;j!==null;){var ue=j.tag;if((ue===3||ue===4)&&(ue=j.stateNode.containerInfo,ue===S||ue.nodeType===8&&ue.parentNode===S))return;j=j.return}for(;re!==null;){if(j=Ia(re),j===null)return;if(ue=j.tag,ue===5||ue===6){y=P=j;continue e}re=re.parentNode}}y=y.return}Et(function(){var Ce=P,Ne=Ie(v),Me=[];e:{var Le=Yv.get(s);if(Le!==void 0){var Ve=uf,Ge=s;switch(s){case"keypress":if(jo(v)===0)break e;case"keydown":case"keyup":Ve=mx;break;case"focusin":Ge="focus",Ve=cf;break;case"focusout":Ge="blur",Ve=cf;break;case"beforeblur":case"afterblur":Ve=cf;break;case"click":if(v.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ve=Tv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ve=ix;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ve=xx;break;case Gv:case Kv:case Zv:Ve=ux;break;case Xv:Ve=_x;break;case"scroll":Ve=nx;break;case"wheel":Ve=Sx;break;case"copy":case"cut":case"paste":Ve=fx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ve=Rv}var Ze=(l&4)!==0,jt=!Ze&&s==="scroll",xe=Ze?Le!==null?Le+"Capture":null:Le;Ze=[];for(var ce=Ce,Ee;ce!==null;){Ee=ce;var Fe=Ee.stateNode;if(Ee.tag===5&&Fe!==null&&(Ee=Fe,xe!==null&&(Fe=$t(ce,xe),Fe!=null&&Ze.push(Ss(ce,Fe,Ee)))),jt)break;ce=ce.return}0<Ze.length&&(Le=new Ve(Le,Ge,null,v,Ne),Me.push({event:Le,listeners:Ze}))}}if((l&7)===0){e:{if(Le=s==="mouseover"||s==="pointerover",Ve=s==="mouseout"||s==="pointerout",Le&&v!==Oe&&(Ge=v.relatedTarget||v.fromElement)&&(Ia(Ge)||Ge[Rn]))break e;if((Ve||Le)&&(Le=Ne.window===Ne?Ne:(Le=Ne.ownerDocument)?Le.defaultView||Le.parentWindow:window,Ve?(Ge=v.relatedTarget||v.toElement,Ve=Ce,Ge=Ge?Ia(Ge):null,Ge!==null&&(jt=Er(Ge),Ge!==jt||Ge.tag!==5&&Ge.tag!==6)&&(Ge=null)):(Ve=null,Ge=Ce),Ve!==Ge)){if(Ze=Tv,Fe="onMouseLeave",xe="onMouseEnter",ce="mouse",(s==="pointerout"||s==="pointerover")&&(Ze=Rv,Fe="onPointerLeave",xe="onPointerEnter",ce="pointer"),jt=Ve==null?Le:mi(Ve),Ee=Ge==null?Le:mi(Ge),Le=new Ze(Fe,ce+"leave",Ve,v,Ne),Le.target=jt,Le.relatedTarget=Ee,Fe=null,Ia(Ne)===Ce&&(Ze=new Ze(xe,ce+"enter",Ge,v,Ne),Ze.target=Ee,Ze.relatedTarget=jt,Fe=Ze),jt=Fe,Ve&&Ge)t:{for(Ze=Ve,xe=Ge,ce=0,Ee=Ze;Ee;Ee=pi(Ee))ce++;for(Ee=0,Fe=xe;Fe;Fe=pi(Fe))Ee++;for(;0<ce-Ee;)Ze=pi(Ze),ce--;for(;0<Ee-ce;)xe=pi(xe),Ee--;for(;ce--;){if(Ze===xe||xe!==null&&Ze===xe.alternate)break t;Ze=pi(Ze),xe=pi(xe)}Ze=null}else Ze=null;Ve!==null&&rp(Me,Le,Ve,Ze,!1),Ge!==null&&jt!==null&&rp(Me,jt,Ge,Ze,!0)}}e:{if(Le=Ce?mi(Ce):window,Ve=Le.nodeName&&Le.nodeName.toLowerCase(),Ve==="select"||Ve==="input"&&Le.type==="file")var Xe=Ax;else if(Nv(Le))if(Mv)Xe=Nx;else{Xe=Ix;var Qe=Dx}else(Ve=Le.nodeName)&&Ve.toLowerCase()==="input"&&(Le.type==="checkbox"||Le.type==="radio")&&(Xe=Lx);if(Xe&&(Xe=Xe(s,Ce))){Ov(Me,Xe,v,Ne);break e}Qe&&Qe(s,Le,Ce),s==="focusout"&&(Qe=Le._wrapperState)&&Qe.controlled&&Le.type==="number"&&ae(Le,"number",Le.value)}switch(Qe=Ce?mi(Ce):window,s){case"focusin":(Nv(Qe)||Qe.contentEditable==="true")&&(hi=Qe,mf=Ce,bs=null);break;case"focusout":bs=mf=hi=null;break;case"mousedown":yf=!0;break;case"contextmenu":case"mouseup":case"dragend":yf=!1,Wv(Me,v,Ne);break;case"selectionchange":if(zx)break;case"keydown":case"keyup":Wv(Me,v,Ne)}var Je;if(hf)e:{switch(s){case"compositionstart":var tt="onCompositionStart";break e;case"compositionend":tt="onCompositionEnd";break e;case"compositionupdate":tt="onCompositionUpdate";break e}tt=void 0}else di?Iv(s,v)&&(tt="onCompositionEnd"):s==="keydown"&&v.keyCode===229&&(tt="onCompositionStart");tt&&(Bv&&v.locale!=="ko"&&(di||tt!=="onCompositionStart"?tt==="onCompositionEnd"&&di&&(Je=kv()):(Xn=Ne,of="value"in Xn?Xn.value:Xn.textContent,di=!0)),Qe=Xo(Ce,tt),0<Qe.length&&(tt=new Pv(tt,s,null,v,Ne),Me.push({event:tt,listeners:Qe}),Je?tt.data=Je:(Je=Lv(v),Je!==null&&(tt.data=Je)))),(Je=Cx?Tx(s,v):Px(s,v))&&(Ce=Xo(Ce,"onBeforeInput"),0<Ce.length&&(Ne=new Pv("onBeforeInput","beforeinput",null,v,Ne),Me.push({event:Ne,listeners:Ce}),Ne.data=Je))}ep(Me,l)})}function Ss(s,l,v){return{instance:s,listener:l,currentTarget:v}}function Xo(s,l){for(var v=l+"Capture",y=[];s!==null;){var S=s,P=S.stateNode;S.tag===5&&P!==null&&(S=P,P=$t(s,v),P!=null&&y.unshift(Ss(s,P,S)),P=$t(s,l),P!=null&&y.push(Ss(s,P,S))),s=s.return}return y}function pi(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function rp(s,l,v,y,S){for(var P=l._reactName,j=[];v!==null&&v!==y;){var re=v,ue=re.alternate,Ce=re.stateNode;if(ue!==null&&ue===y)break;re.tag===5&&Ce!==null&&(re=Ce,S?(ue=$t(v,P),ue!=null&&j.unshift(Ss(v,ue,re))):S||(ue=$t(v,P),ue!=null&&j.push(Ss(v,ue,re)))),v=v.return}j.length!==0&&s.push({event:l,listeners:j})}var Vx=/\r\n?/g,jx=/\u0000|\uFFFD/g;function np(s){return(typeof s=="string"?s:""+s).replace(Vx,`
`).replace(jx,"")}function Yo(s,l,v){if(l=np(l),np(s)!==l&&v)throw Error(t(425))}function Qo(){}var Sf=null,kf=null;function Cf(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Tf=typeof setTimeout=="function"?setTimeout:void 0,qx=typeof clearTimeout=="function"?clearTimeout:void 0,ap=typeof Promise=="function"?Promise:void 0,Wx=typeof queueMicrotask=="function"?queueMicrotask:typeof ap<"u"?function(s){return ap.resolve(null).then(s).catch(Hx)}:Tf;function Hx(s){setTimeout(function(){throw s})}function Pf(s,l){var v=l,y=0;do{var S=v.nextSibling;if(s.removeChild(v),S&&S.nodeType===8)if(v=S.data,v==="/$"){if(y===0){s.removeChild(S),vs(l);return}y--}else v!=="$"&&v!=="$?"&&v!=="$!"||y++;v=S}while(v);vs(l)}function Qn(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return s}function ip(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var v=s.data;if(v==="$"||v==="$!"||v==="$?"){if(l===0)return s;l--}else v==="/$"&&l++}s=s.previousSibling}return null}var gi=Math.random().toString(36).slice(2),mn="__reactFiber$"+gi,ks="__reactProps$"+gi,Rn="__reactContainer$"+gi,Rf="__reactEvents$"+gi,Gx="__reactListeners$"+gi,Kx="__reactHandles$"+gi;function Ia(s){var l=s[mn];if(l)return l;for(var v=s.parentNode;v;){if(l=v[Rn]||v[mn]){if(v=l.alternate,l.child!==null||v!==null&&v.child!==null)for(s=ip(s);s!==null;){if(v=s[mn])return v;s=ip(s)}return l}s=v,v=s.parentNode}return null}function Cs(s){return s=s[mn]||s[Rn],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function mi(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(t(33))}function Jo(s){return s[ks]||null}var Bf=[],yi=-1;function Jn(s){return{current:s}}function Ct(s){0>yi||(s.current=Bf[yi],Bf[yi]=null,yi--)}function xt(s,l){yi++,Bf[yi]=s.current,s.current=l}var ea={},gr=Jn(ea),Ar=Jn(!1),La=ea;function wi(s,l){var v=s.type.contextTypes;if(!v)return ea;var y=s.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===l)return y.__reactInternalMemoizedMaskedChildContext;var S={},P;for(P in v)S[P]=l[P];return y&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=l,s.__reactInternalMemoizedMaskedChildContext=S),S}function Dr(s){return s=s.childContextTypes,s!=null}function eu(){Ct(Ar),Ct(gr)}function sp(s,l,v){if(gr.current!==ea)throw Error(t(168));xt(gr,l),xt(Ar,v)}function op(s,l,v){var y=s.stateNode;if(l=l.childContextTypes,typeof y.getChildContext!="function")return v;y=y.getChildContext();for(var S in y)if(!(S in l))throw Error(t(108,Te(s)||"Unknown",S));return te({},v,y)}function tu(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||ea,La=gr.current,xt(gr,s),xt(Ar,Ar.current),!0}function up(s,l,v){var y=s.stateNode;if(!y)throw Error(t(169));v?(s=op(s,l,La),y.__reactInternalMemoizedMergedChildContext=s,Ct(Ar),Ct(gr),xt(gr,s)):Ct(Ar),xt(Ar,v)}var Bn=null,ru=!1,Af=!1;function lp(s){Bn===null?Bn=[s]:Bn.push(s)}function Zx(s){ru=!0,lp(s)}function ta(){if(!Af&&Bn!==null){Af=!0;var s=0,l=mt;try{var v=Bn;for(mt=1;s<v.length;s++){var y=v[s];do y=y(!0);while(y!==null)}Bn=null,ru=!1}catch(S){throw Bn!==null&&(Bn=Bn.slice(s+1)),is(ss,ta),S}finally{mt=l,Af=!1}}return null}var xi=[],bi=0,nu=null,au=0,Kr=[],Zr=0,Na=null,An=1,Dn="";function Oa(s,l){xi[bi++]=au,xi[bi++]=nu,nu=s,au=l}function fp(s,l,v){Kr[Zr++]=An,Kr[Zr++]=Dn,Kr[Zr++]=Na,Na=s;var y=An;s=Dn;var S=32-Nt(y)-1;y&=~(1<<S),v+=1;var P=32-Nt(l)+S;if(30<P){var j=S-S%5;P=(y&(1<<j)-1).toString(32),y>>=j,S-=j,An=1<<32-Nt(l)+S|v<<S|y,Dn=P+s}else An=1<<P|v<<S|y,Dn=s}function Df(s){s.return!==null&&(Oa(s,1),fp(s,1,0))}function If(s){for(;s===nu;)nu=xi[--bi],xi[bi]=null,au=xi[--bi],xi[bi]=null;for(;s===Na;)Na=Kr[--Zr],Kr[Zr]=null,Dn=Kr[--Zr],Kr[Zr]=null,An=Kr[--Zr],Kr[Zr]=null}var qr=null,Wr=null,Bt=!1,on=null;function cp(s,l){var v=Jr(5,null,null,0);v.elementType="DELETED",v.stateNode=l,v.return=s,l=s.deletions,l===null?(s.deletions=[v],s.flags|=16):l.push(v)}function dp(s,l){switch(s.tag){case 5:var v=s.type;return l=l.nodeType!==1||v.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(s.stateNode=l,qr=s,Wr=Qn(l.firstChild),!0):!1;case 6:return l=s.pendingProps===""||l.nodeType!==3?null:l,l!==null?(s.stateNode=l,qr=s,Wr=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(v=Na!==null?{id:An,overflow:Dn}:null,s.memoizedState={dehydrated:l,treeContext:v,retryLane:1073741824},v=Jr(18,null,null,0),v.stateNode=l,v.return=s,s.child=v,qr=s,Wr=null,!0):!1;default:return!1}}function Lf(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Nf(s){if(Bt){var l=Wr;if(l){var v=l;if(!dp(s,l)){if(Lf(s))throw Error(t(418));l=Qn(v.nextSibling);var y=qr;l&&dp(s,l)?cp(y,v):(s.flags=s.flags&-4097|2,Bt=!1,qr=s)}}else{if(Lf(s))throw Error(t(418));s.flags=s.flags&-4097|2,Bt=!1,qr=s}}}function hp(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;qr=s}function iu(s){if(s!==qr)return!1;if(!Bt)return hp(s),Bt=!0,!1;var l;if((l=s.tag!==3)&&!(l=s.tag!==5)&&(l=s.type,l=l!=="head"&&l!=="body"&&!Cf(s.type,s.memoizedProps)),l&&(l=Wr)){if(Lf(s))throw vp(),Error(t(418));for(;l;)cp(s,l),l=Qn(l.nextSibling)}if(hp(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(t(317));e:{for(s=s.nextSibling,l=0;s;){if(s.nodeType===8){var v=s.data;if(v==="/$"){if(l===0){Wr=Qn(s.nextSibling);break e}l--}else v!=="$"&&v!=="$!"&&v!=="$?"||l++}s=s.nextSibling}Wr=null}}else Wr=qr?Qn(s.stateNode.nextSibling):null;return!0}function vp(){for(var s=Wr;s;)s=Qn(s.nextSibling)}function _i(){Wr=qr=null,Bt=!1}function Of(s){on===null?on=[s]:on.push(s)}var Xx=C.ReactCurrentBatchConfig;function Ts(s,l,v){if(s=v.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(v._owner){if(v=v._owner,v){if(v.tag!==1)throw Error(t(309));var y=v.stateNode}if(!y)throw Error(t(147,s));var S=y,P=""+s;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===P?l.ref:(l=function(j){var re=S.refs;j===null?delete re[P]:re[P]=j},l._stringRef=P,l)}if(typeof s!="string")throw Error(t(284));if(!v._owner)throw Error(t(290,s))}return s}function su(s,l){throw s=Object.prototype.toString.call(l),Error(t(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s))}function pp(s){var l=s._init;return l(s._payload)}function gp(s){function l(xe,ce){if(s){var Ee=xe.deletions;Ee===null?(xe.deletions=[ce],xe.flags|=16):Ee.push(ce)}}function v(xe,ce){if(!s)return null;for(;ce!==null;)l(xe,ce),ce=ce.sibling;return null}function y(xe,ce){for(xe=new Map;ce!==null;)ce.key!==null?xe.set(ce.key,ce):xe.set(ce.index,ce),ce=ce.sibling;return xe}function S(xe,ce){return xe=la(xe,ce),xe.index=0,xe.sibling=null,xe}function P(xe,ce,Ee){return xe.index=Ee,s?(Ee=xe.alternate,Ee!==null?(Ee=Ee.index,Ee<ce?(xe.flags|=2,ce):Ee):(xe.flags|=2,ce)):(xe.flags|=1048576,ce)}function j(xe){return s&&xe.alternate===null&&(xe.flags|=2),xe}function re(xe,ce,Ee,Fe){return ce===null||ce.tag!==6?(ce=Tc(Ee,xe.mode,Fe),ce.return=xe,ce):(ce=S(ce,Ee),ce.return=xe,ce)}function ue(xe,ce,Ee,Fe){var Xe=Ee.type;return Xe===A?Ne(xe,ce,Ee.props.children,Fe,Ee.key):ce!==null&&(ce.elementType===Xe||typeof Xe=="object"&&Xe!==null&&Xe.$$typeof===Q&&pp(Xe)===ce.type)?(Fe=S(ce,Ee.props),Fe.ref=Ts(xe,ce,Ee),Fe.return=xe,Fe):(Fe=Bu(Ee.type,Ee.key,Ee.props,null,xe.mode,Fe),Fe.ref=Ts(xe,ce,Ee),Fe.return=xe,Fe)}function Ce(xe,ce,Ee,Fe){return ce===null||ce.tag!==4||ce.stateNode.containerInfo!==Ee.containerInfo||ce.stateNode.implementation!==Ee.implementation?(ce=Pc(Ee,xe.mode,Fe),ce.return=xe,ce):(ce=S(ce,Ee.children||[]),ce.return=xe,ce)}function Ne(xe,ce,Ee,Fe,Xe){return ce===null||ce.tag!==7?(ce=qa(Ee,xe.mode,Fe,Xe),ce.return=xe,ce):(ce=S(ce,Ee),ce.return=xe,ce)}function Me(xe,ce,Ee){if(typeof ce=="string"&&ce!==""||typeof ce=="number")return ce=Tc(""+ce,xe.mode,Ee),ce.return=xe,ce;if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case B:return Ee=Bu(ce.type,ce.key,ce.props,null,xe.mode,Ee),Ee.ref=Ts(xe,null,ce),Ee.return=xe,Ee;case N:return ce=Pc(ce,xe.mode,Ee),ce.return=xe,ce;case Q:var Fe=ce._init;return Me(xe,Fe(ce._payload),Ee)}if(he(ce)||X(ce))return ce=qa(ce,xe.mode,Ee,null),ce.return=xe,ce;su(xe,ce)}return null}function Le(xe,ce,Ee,Fe){var Xe=ce!==null?ce.key:null;if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number")return Xe!==null?null:re(xe,ce,""+Ee,Fe);if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case B:return Ee.key===Xe?ue(xe,ce,Ee,Fe):null;case N:return Ee.key===Xe?Ce(xe,ce,Ee,Fe):null;case Q:return Xe=Ee._init,Le(xe,ce,Xe(Ee._payload),Fe)}if(he(Ee)||X(Ee))return Xe!==null?null:Ne(xe,ce,Ee,Fe,null);su(xe,Ee)}return null}function Ve(xe,ce,Ee,Fe,Xe){if(typeof Fe=="string"&&Fe!==""||typeof Fe=="number")return xe=xe.get(Ee)||null,re(ce,xe,""+Fe,Xe);if(typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case B:return xe=xe.get(Fe.key===null?Ee:Fe.key)||null,ue(ce,xe,Fe,Xe);case N:return xe=xe.get(Fe.key===null?Ee:Fe.key)||null,Ce(ce,xe,Fe,Xe);case Q:var Qe=Fe._init;return Ve(xe,ce,Ee,Qe(Fe._payload),Xe)}if(he(Fe)||X(Fe))return xe=xe.get(Ee)||null,Ne(ce,xe,Fe,Xe,null);su(ce,Fe)}return null}function Ge(xe,ce,Ee,Fe){for(var Xe=null,Qe=null,Je=ce,tt=ce=0,rr=null;Je!==null&&tt<Ee.length;tt++){Je.index>tt?(rr=Je,Je=null):rr=Je.sibling;var ht=Le(xe,Je,Ee[tt],Fe);if(ht===null){Je===null&&(Je=rr);break}s&&Je&&ht.alternate===null&&l(xe,Je),ce=P(ht,ce,tt),Qe===null?Xe=ht:Qe.sibling=ht,Qe=ht,Je=rr}if(tt===Ee.length)return v(xe,Je),Bt&&Oa(xe,tt),Xe;if(Je===null){for(;tt<Ee.length;tt++)Je=Me(xe,Ee[tt],Fe),Je!==null&&(ce=P(Je,ce,tt),Qe===null?Xe=Je:Qe.sibling=Je,Qe=Je);return Bt&&Oa(xe,tt),Xe}for(Je=y(xe,Je);tt<Ee.length;tt++)rr=Ve(Je,xe,tt,Ee[tt],Fe),rr!==null&&(s&&rr.alternate!==null&&Je.delete(rr.key===null?tt:rr.key),ce=P(rr,ce,tt),Qe===null?Xe=rr:Qe.sibling=rr,Qe=rr);return s&&Je.forEach(function(fa){return l(xe,fa)}),Bt&&Oa(xe,tt),Xe}function Ze(xe,ce,Ee,Fe){var Xe=X(Ee);if(typeof Xe!="function")throw Error(t(150));if(Ee=Xe.call(Ee),Ee==null)throw Error(t(151));for(var Qe=Xe=null,Je=ce,tt=ce=0,rr=null,ht=Ee.next();Je!==null&&!ht.done;tt++,ht=Ee.next()){Je.index>tt?(rr=Je,Je=null):rr=Je.sibling;var fa=Le(xe,Je,ht.value,Fe);if(fa===null){Je===null&&(Je=rr);break}s&&Je&&fa.alternate===null&&l(xe,Je),ce=P(fa,ce,tt),Qe===null?Xe=fa:Qe.sibling=fa,Qe=fa,Je=rr}if(ht.done)return v(xe,Je),Bt&&Oa(xe,tt),Xe;if(Je===null){for(;!ht.done;tt++,ht=Ee.next())ht=Me(xe,ht.value,Fe),ht!==null&&(ce=P(ht,ce,tt),Qe===null?Xe=ht:Qe.sibling=ht,Qe=ht);return Bt&&Oa(xe,tt),Xe}for(Je=y(xe,Je);!ht.done;tt++,ht=Ee.next())ht=Ve(Je,xe,tt,ht.value,Fe),ht!==null&&(s&&ht.alternate!==null&&Je.delete(ht.key===null?tt:ht.key),ce=P(ht,ce,tt),Qe===null?Xe=ht:Qe.sibling=ht,Qe=ht);return s&&Je.forEach(function(Rb){return l(xe,Rb)}),Bt&&Oa(xe,tt),Xe}function jt(xe,ce,Ee,Fe){if(typeof Ee=="object"&&Ee!==null&&Ee.type===A&&Ee.key===null&&(Ee=Ee.props.children),typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case B:e:{for(var Xe=Ee.key,Qe=ce;Qe!==null;){if(Qe.key===Xe){if(Xe=Ee.type,Xe===A){if(Qe.tag===7){v(xe,Qe.sibling),ce=S(Qe,Ee.props.children),ce.return=xe,xe=ce;break e}}else if(Qe.elementType===Xe||typeof Xe=="object"&&Xe!==null&&Xe.$$typeof===Q&&pp(Xe)===Qe.type){v(xe,Qe.sibling),ce=S(Qe,Ee.props),ce.ref=Ts(xe,Qe,Ee),ce.return=xe,xe=ce;break e}v(xe,Qe);break}else l(xe,Qe);Qe=Qe.sibling}Ee.type===A?(ce=qa(Ee.props.children,xe.mode,Fe,Ee.key),ce.return=xe,xe=ce):(Fe=Bu(Ee.type,Ee.key,Ee.props,null,xe.mode,Fe),Fe.ref=Ts(xe,ce,Ee),Fe.return=xe,xe=Fe)}return j(xe);case N:e:{for(Qe=Ee.key;ce!==null;){if(ce.key===Qe)if(ce.tag===4&&ce.stateNode.containerInfo===Ee.containerInfo&&ce.stateNode.implementation===Ee.implementation){v(xe,ce.sibling),ce=S(ce,Ee.children||[]),ce.return=xe,xe=ce;break e}else{v(xe,ce);break}else l(xe,ce);ce=ce.sibling}ce=Pc(Ee,xe.mode,Fe),ce.return=xe,xe=ce}return j(xe);case Q:return Qe=Ee._init,jt(xe,ce,Qe(Ee._payload),Fe)}if(he(Ee))return Ge(xe,ce,Ee,Fe);if(X(Ee))return Ze(xe,ce,Ee,Fe);su(xe,Ee)}return typeof Ee=="string"&&Ee!==""||typeof Ee=="number"?(Ee=""+Ee,ce!==null&&ce.tag===6?(v(xe,ce.sibling),ce=S(ce,Ee),ce.return=xe,xe=ce):(v(xe,ce),ce=Tc(Ee,xe.mode,Fe),ce.return=xe,xe=ce),j(xe)):v(xe,ce)}return jt}var Ei=gp(!0),mp=gp(!1),ou=Jn(null),uu=null,Si=null,Mf=null;function zf(){Mf=Si=uu=null}function Ff(s){var l=ou.current;Ct(ou),s._currentValue=l}function Uf(s,l,v){for(;s!==null;){var y=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,y!==null&&(y.childLanes|=l)):y!==null&&(y.childLanes&l)!==l&&(y.childLanes|=l),s===v)break;s=s.return}}function ki(s,l){uu=s,Mf=Si=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&l)!==0&&(Ir=!0),s.firstContext=null)}function Xr(s){var l=s._currentValue;if(Mf!==s)if(s={context:s,memoizedValue:l,next:null},Si===null){if(uu===null)throw Error(t(308));Si=s,uu.dependencies={lanes:0,firstContext:s}}else Si=Si.next=s;return l}var Ma=null;function $f(s){Ma===null?Ma=[s]:Ma.push(s)}function yp(s,l,v,y){var S=l.interleaved;return S===null?(v.next=v,$f(l)):(v.next=S.next,S.next=v),l.interleaved=v,In(s,y)}function In(s,l){s.lanes|=l;var v=s.alternate;for(v!==null&&(v.lanes|=l),v=s,s=s.return;s!==null;)s.childLanes|=l,v=s.alternate,v!==null&&(v.childLanes|=l),v=s,s=s.return;return v.tag===3?v.stateNode:null}var ra=!1;function Vf(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wp(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Ln(s,l){return{eventTime:s,lane:l,tag:0,payload:null,callback:null,next:null}}function na(s,l,v){var y=s.updateQueue;if(y===null)return null;if(y=y.shared,(ft&2)!==0){var S=y.pending;return S===null?l.next=l:(l.next=S.next,S.next=l),y.pending=l,In(s,v)}return S=y.interleaved,S===null?(l.next=l,$f(y)):(l.next=S.next,S.next=l),y.interleaved=l,In(s,v)}function lu(s,l,v){if(l=l.updateQueue,l!==null&&(l=l.shared,(v&4194240)!==0)){var y=l.lanes;y&=s.pendingLanes,v|=y,l.lanes=v,tf(s,v)}}function xp(s,l){var v=s.updateQueue,y=s.alternate;if(y!==null&&(y=y.updateQueue,v===y)){var S=null,P=null;if(v=v.firstBaseUpdate,v!==null){do{var j={eventTime:v.eventTime,lane:v.lane,tag:v.tag,payload:v.payload,callback:v.callback,next:null};P===null?S=P=j:P=P.next=j,v=v.next}while(v!==null);P===null?S=P=l:P=P.next=l}else S=P=l;v={baseState:y.baseState,firstBaseUpdate:S,lastBaseUpdate:P,shared:y.shared,effects:y.effects},s.updateQueue=v;return}s=v.lastBaseUpdate,s===null?v.firstBaseUpdate=l:s.next=l,v.lastBaseUpdate=l}function fu(s,l,v,y){var S=s.updateQueue;ra=!1;var P=S.firstBaseUpdate,j=S.lastBaseUpdate,re=S.shared.pending;if(re!==null){S.shared.pending=null;var ue=re,Ce=ue.next;ue.next=null,j===null?P=Ce:j.next=Ce,j=ue;var Ne=s.alternate;Ne!==null&&(Ne=Ne.updateQueue,re=Ne.lastBaseUpdate,re!==j&&(re===null?Ne.firstBaseUpdate=Ce:re.next=Ce,Ne.lastBaseUpdate=ue))}if(P!==null){var Me=S.baseState;j=0,Ne=Ce=ue=null,re=P;do{var Le=re.lane,Ve=re.eventTime;if((y&Le)===Le){Ne!==null&&(Ne=Ne.next={eventTime:Ve,lane:0,tag:re.tag,payload:re.payload,callback:re.callback,next:null});e:{var Ge=s,Ze=re;switch(Le=l,Ve=v,Ze.tag){case 1:if(Ge=Ze.payload,typeof Ge=="function"){Me=Ge.call(Ve,Me,Le);break e}Me=Ge;break e;case 3:Ge.flags=Ge.flags&-65537|128;case 0:if(Ge=Ze.payload,Le=typeof Ge=="function"?Ge.call(Ve,Me,Le):Ge,Le==null)break e;Me=te({},Me,Le);break e;case 2:ra=!0}}re.callback!==null&&re.lane!==0&&(s.flags|=64,Le=S.effects,Le===null?S.effects=[re]:Le.push(re))}else Ve={eventTime:Ve,lane:Le,tag:re.tag,payload:re.payload,callback:re.callback,next:null},Ne===null?(Ce=Ne=Ve,ue=Me):Ne=Ne.next=Ve,j|=Le;if(re=re.next,re===null){if(re=S.shared.pending,re===null)break;Le=re,re=Le.next,Le.next=null,S.lastBaseUpdate=Le,S.shared.pending=null}}while(!0);if(Ne===null&&(ue=Me),S.baseState=ue,S.firstBaseUpdate=Ce,S.lastBaseUpdate=Ne,l=S.shared.interleaved,l!==null){S=l;do j|=S.lane,S=S.next;while(S!==l)}else P===null&&(S.shared.lanes=0);Ua|=j,s.lanes=j,s.memoizedState=Me}}function bp(s,l,v){if(s=l.effects,l.effects=null,s!==null)for(l=0;l<s.length;l++){var y=s[l],S=y.callback;if(S!==null){if(y.callback=null,y=v,typeof S!="function")throw Error(t(191,S));S.call(y)}}}var Ps={},yn=Jn(Ps),Rs=Jn(Ps),Bs=Jn(Ps);function za(s){if(s===Ps)throw Error(t(174));return s}function jf(s,l){switch(xt(Bs,l),xt(Rs,s),xt(yn,Ps),s=l.nodeType,s){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:$(null,"");break;default:s=s===8?l.parentNode:l,l=s.namespaceURI||null,s=s.tagName,l=$(l,s)}Ct(yn),xt(yn,l)}function Ci(){Ct(yn),Ct(Rs),Ct(Bs)}function _p(s){za(Bs.current);var l=za(yn.current),v=$(l,s.type);l!==v&&(xt(Rs,s),xt(yn,v))}function qf(s){Rs.current===s&&(Ct(yn),Ct(Rs))}var Ot=Jn(0);function cu(s){for(var l=s;l!==null;){if(l.tag===13){var v=l.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||v.data==="$?"||v.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Wf=[];function Hf(){for(var s=0;s<Wf.length;s++)Wf[s]._workInProgressVersionPrimary=null;Wf.length=0}var du=C.ReactCurrentDispatcher,Gf=C.ReactCurrentBatchConfig,Fa=0,Mt=null,Kt=null,er=null,hu=!1,As=!1,Ds=0,Yx=0;function mr(){throw Error(t(321))}function Kf(s,l){if(l===null)return!1;for(var v=0;v<l.length&&v<s.length;v++)if(!sn(s[v],l[v]))return!1;return!0}function Zf(s,l,v,y,S,P){if(Fa=P,Mt=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,du.current=s===null||s.memoizedState===null?tb:rb,s=v(y,S),As){P=0;do{if(As=!1,Ds=0,25<=P)throw Error(t(301));P+=1,er=Kt=null,l.updateQueue=null,du.current=nb,s=v(y,S)}while(As)}if(du.current=gu,l=Kt!==null&&Kt.next!==null,Fa=0,er=Kt=Mt=null,hu=!1,l)throw Error(t(300));return s}function Xf(){var s=Ds!==0;return Ds=0,s}function wn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return er===null?Mt.memoizedState=er=s:er=er.next=s,er}function Yr(){if(Kt===null){var s=Mt.alternate;s=s!==null?s.memoizedState:null}else s=Kt.next;var l=er===null?Mt.memoizedState:er.next;if(l!==null)er=l,Kt=s;else{if(s===null)throw Error(t(310));Kt=s,s={memoizedState:Kt.memoizedState,baseState:Kt.baseState,baseQueue:Kt.baseQueue,queue:Kt.queue,next:null},er===null?Mt.memoizedState=er=s:er=er.next=s}return er}function Is(s,l){return typeof l=="function"?l(s):l}function Yf(s){var l=Yr(),v=l.queue;if(v===null)throw Error(t(311));v.lastRenderedReducer=s;var y=Kt,S=y.baseQueue,P=v.pending;if(P!==null){if(S!==null){var j=S.next;S.next=P.next,P.next=j}y.baseQueue=S=P,v.pending=null}if(S!==null){P=S.next,y=y.baseState;var re=j=null,ue=null,Ce=P;do{var Ne=Ce.lane;if((Fa&Ne)===Ne)ue!==null&&(ue=ue.next={lane:0,action:Ce.action,hasEagerState:Ce.hasEagerState,eagerState:Ce.eagerState,next:null}),y=Ce.hasEagerState?Ce.eagerState:s(y,Ce.action);else{var Me={lane:Ne,action:Ce.action,hasEagerState:Ce.hasEagerState,eagerState:Ce.eagerState,next:null};ue===null?(re=ue=Me,j=y):ue=ue.next=Me,Mt.lanes|=Ne,Ua|=Ne}Ce=Ce.next}while(Ce!==null&&Ce!==P);ue===null?j=y:ue.next=re,sn(y,l.memoizedState)||(Ir=!0),l.memoizedState=y,l.baseState=j,l.baseQueue=ue,v.lastRenderedState=y}if(s=v.interleaved,s!==null){S=s;do P=S.lane,Mt.lanes|=P,Ua|=P,S=S.next;while(S!==s)}else S===null&&(v.lanes=0);return[l.memoizedState,v.dispatch]}function Qf(s){var l=Yr(),v=l.queue;if(v===null)throw Error(t(311));v.lastRenderedReducer=s;var y=v.dispatch,S=v.pending,P=l.memoizedState;if(S!==null){v.pending=null;var j=S=S.next;do P=s(P,j.action),j=j.next;while(j!==S);sn(P,l.memoizedState)||(Ir=!0),l.memoizedState=P,l.baseQueue===null&&(l.baseState=P),v.lastRenderedState=P}return[P,y]}function Ep(){}function Sp(s,l){var v=Mt,y=Yr(),S=l(),P=!sn(y.memoizedState,S);if(P&&(y.memoizedState=S,Ir=!0),y=y.queue,Jf(Tp.bind(null,v,y,s),[s]),y.getSnapshot!==l||P||er!==null&&er.memoizedState.tag&1){if(v.flags|=2048,Ls(9,Cp.bind(null,v,y,S,l),void 0,null),tr===null)throw Error(t(349));(Fa&30)!==0||kp(v,l,S)}return S}function kp(s,l,v){s.flags|=16384,s={getSnapshot:l,value:v},l=Mt.updateQueue,l===null?(l={lastEffect:null,stores:null},Mt.updateQueue=l,l.stores=[s]):(v=l.stores,v===null?l.stores=[s]:v.push(s))}function Cp(s,l,v,y){l.value=v,l.getSnapshot=y,Pp(l)&&Rp(s)}function Tp(s,l,v){return v(function(){Pp(l)&&Rp(s)})}function Pp(s){var l=s.getSnapshot;s=s.value;try{var v=l();return!sn(s,v)}catch{return!0}}function Rp(s){var l=In(s,1);l!==null&&cn(l,s,1,-1)}function Bp(s){var l=wn();return typeof s=="function"&&(s=s()),l.memoizedState=l.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Is,lastRenderedState:s},l.queue=s,s=s.dispatch=eb.bind(null,Mt,s),[l.memoizedState,s]}function Ls(s,l,v,y){return s={tag:s,create:l,destroy:v,deps:y,next:null},l=Mt.updateQueue,l===null?(l={lastEffect:null,stores:null},Mt.updateQueue=l,l.lastEffect=s.next=s):(v=l.lastEffect,v===null?l.lastEffect=s.next=s:(y=v.next,v.next=s,s.next=y,l.lastEffect=s)),s}function Ap(){return Yr().memoizedState}function vu(s,l,v,y){var S=wn();Mt.flags|=s,S.memoizedState=Ls(1|l,v,void 0,y===void 0?null:y)}function pu(s,l,v,y){var S=Yr();y=y===void 0?null:y;var P=void 0;if(Kt!==null){var j=Kt.memoizedState;if(P=j.destroy,y!==null&&Kf(y,j.deps)){S.memoizedState=Ls(l,v,P,y);return}}Mt.flags|=s,S.memoizedState=Ls(1|l,v,P,y)}function Dp(s,l){return vu(8390656,8,s,l)}function Jf(s,l){return pu(2048,8,s,l)}function Ip(s,l){return pu(4,2,s,l)}function Lp(s,l){return pu(4,4,s,l)}function Np(s,l){if(typeof l=="function")return s=s(),l(s),function(){l(null)};if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function Op(s,l,v){return v=v!=null?v.concat([s]):null,pu(4,4,Np.bind(null,l,s),v)}function ec(){}function Mp(s,l){var v=Yr();l=l===void 0?null:l;var y=v.memoizedState;return y!==null&&l!==null&&Kf(l,y[1])?y[0]:(v.memoizedState=[s,l],s)}function zp(s,l){var v=Yr();l=l===void 0?null:l;var y=v.memoizedState;return y!==null&&l!==null&&Kf(l,y[1])?y[0]:(s=s(),v.memoizedState=[s,l],s)}function Fp(s,l,v){return(Fa&21)===0?(s.baseState&&(s.baseState=!1,Ir=!0),s.memoizedState=v):(sn(v,l)||(v=pv(),Mt.lanes|=v,Ua|=v,s.baseState=!0),l)}function Qx(s,l){var v=mt;mt=v!==0&&4>v?v:4,s(!0);var y=Gf.transition;Gf.transition={};try{s(!1),l()}finally{mt=v,Gf.transition=y}}function Up(){return Yr().memoizedState}function Jx(s,l,v){var y=oa(s);if(v={lane:y,action:v,hasEagerState:!1,eagerState:null,next:null},$p(s))Vp(l,v);else if(v=yp(s,l,v,y),v!==null){var S=Cr();cn(v,s,y,S),jp(v,l,y)}}function eb(s,l,v){var y=oa(s),S={lane:y,action:v,hasEagerState:!1,eagerState:null,next:null};if($p(s))Vp(l,S);else{var P=s.alternate;if(s.lanes===0&&(P===null||P.lanes===0)&&(P=l.lastRenderedReducer,P!==null))try{var j=l.lastRenderedState,re=P(j,v);if(S.hasEagerState=!0,S.eagerState=re,sn(re,j)){var ue=l.interleaved;ue===null?(S.next=S,$f(l)):(S.next=ue.next,ue.next=S),l.interleaved=S;return}}catch{}finally{}v=yp(s,l,S,y),v!==null&&(S=Cr(),cn(v,s,y,S),jp(v,l,y))}}function $p(s){var l=s.alternate;return s===Mt||l!==null&&l===Mt}function Vp(s,l){As=hu=!0;var v=s.pending;v===null?l.next=l:(l.next=v.next,v.next=l),s.pending=l}function jp(s,l,v){if((v&4194240)!==0){var y=l.lanes;y&=s.pendingLanes,v|=y,l.lanes=v,tf(s,v)}}var gu={readContext:Xr,useCallback:mr,useContext:mr,useEffect:mr,useImperativeHandle:mr,useInsertionEffect:mr,useLayoutEffect:mr,useMemo:mr,useReducer:mr,useRef:mr,useState:mr,useDebugValue:mr,useDeferredValue:mr,useTransition:mr,useMutableSource:mr,useSyncExternalStore:mr,useId:mr,unstable_isNewReconciler:!1},tb={readContext:Xr,useCallback:function(s,l){return wn().memoizedState=[s,l===void 0?null:l],s},useContext:Xr,useEffect:Dp,useImperativeHandle:function(s,l,v){return v=v!=null?v.concat([s]):null,vu(4194308,4,Np.bind(null,l,s),v)},useLayoutEffect:function(s,l){return vu(4194308,4,s,l)},useInsertionEffect:function(s,l){return vu(4,2,s,l)},useMemo:function(s,l){var v=wn();return l=l===void 0?null:l,s=s(),v.memoizedState=[s,l],s},useReducer:function(s,l,v){var y=wn();return l=v!==void 0?v(l):l,y.memoizedState=y.baseState=l,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:l},y.queue=s,s=s.dispatch=Jx.bind(null,Mt,s),[y.memoizedState,s]},useRef:function(s){var l=wn();return s={current:s},l.memoizedState=s},useState:Bp,useDebugValue:ec,useDeferredValue:function(s){return wn().memoizedState=s},useTransition:function(){var s=Bp(!1),l=s[0];return s=Qx.bind(null,s[1]),wn().memoizedState=s,[l,s]},useMutableSource:function(){},useSyncExternalStore:function(s,l,v){var y=Mt,S=wn();if(Bt){if(v===void 0)throw Error(t(407));v=v()}else{if(v=l(),tr===null)throw Error(t(349));(Fa&30)!==0||kp(y,l,v)}S.memoizedState=v;var P={value:v,getSnapshot:l};return S.queue=P,Dp(Tp.bind(null,y,P,s),[s]),y.flags|=2048,Ls(9,Cp.bind(null,y,P,v,l),void 0,null),v},useId:function(){var s=wn(),l=tr.identifierPrefix;if(Bt){var v=Dn,y=An;v=(y&~(1<<32-Nt(y)-1)).toString(32)+v,l=":"+l+"R"+v,v=Ds++,0<v&&(l+="H"+v.toString(32)),l+=":"}else v=Yx++,l=":"+l+"r"+v.toString(32)+":";return s.memoizedState=l},unstable_isNewReconciler:!1},rb={readContext:Xr,useCallback:Mp,useContext:Xr,useEffect:Jf,useImperativeHandle:Op,useInsertionEffect:Ip,useLayoutEffect:Lp,useMemo:zp,useReducer:Yf,useRef:Ap,useState:function(){return Yf(Is)},useDebugValue:ec,useDeferredValue:function(s){var l=Yr();return Fp(l,Kt.memoizedState,s)},useTransition:function(){var s=Yf(Is)[0],l=Yr().memoizedState;return[s,l]},useMutableSource:Ep,useSyncExternalStore:Sp,useId:Up,unstable_isNewReconciler:!1},nb={readContext:Xr,useCallback:Mp,useContext:Xr,useEffect:Jf,useImperativeHandle:Op,useInsertionEffect:Ip,useLayoutEffect:Lp,useMemo:zp,useReducer:Qf,useRef:Ap,useState:function(){return Qf(Is)},useDebugValue:ec,useDeferredValue:function(s){var l=Yr();return Kt===null?l.memoizedState=s:Fp(l,Kt.memoizedState,s)},useTransition:function(){var s=Qf(Is)[0],l=Yr().memoizedState;return[s,l]},useMutableSource:Ep,useSyncExternalStore:Sp,useId:Up,unstable_isNewReconciler:!1};function un(s,l){if(s&&s.defaultProps){l=te({},l),s=s.defaultProps;for(var v in s)l[v]===void 0&&(l[v]=s[v]);return l}return l}function tc(s,l,v,y){l=s.memoizedState,v=v(y,l),v=v==null?l:te({},l,v),s.memoizedState=v,s.lanes===0&&(s.updateQueue.baseState=v)}var mu={isMounted:function(s){return(s=s._reactInternals)?Er(s)===s:!1},enqueueSetState:function(s,l,v){s=s._reactInternals;var y=Cr(),S=oa(s),P=Ln(y,S);P.payload=l,v!=null&&(P.callback=v),l=na(s,P,S),l!==null&&(cn(l,s,S,y),lu(l,s,S))},enqueueReplaceState:function(s,l,v){s=s._reactInternals;var y=Cr(),S=oa(s),P=Ln(y,S);P.tag=1,P.payload=l,v!=null&&(P.callback=v),l=na(s,P,S),l!==null&&(cn(l,s,S,y),lu(l,s,S))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var v=Cr(),y=oa(s),S=Ln(v,y);S.tag=2,l!=null&&(S.callback=l),l=na(s,S,y),l!==null&&(cn(l,s,y,v),lu(l,s,y))}};function qp(s,l,v,y,S,P,j){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(y,P,j):l.prototype&&l.prototype.isPureReactComponent?!xs(v,y)||!xs(S,P):!0}function Wp(s,l,v){var y=!1,S=ea,P=l.contextType;return typeof P=="object"&&P!==null?P=Xr(P):(S=Dr(l)?La:gr.current,y=l.contextTypes,P=(y=y!=null)?wi(s,S):ea),l=new l(v,P),s.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=mu,s.stateNode=l,l._reactInternals=s,y&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=S,s.__reactInternalMemoizedMaskedChildContext=P),l}function Hp(s,l,v,y){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(v,y),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(v,y),l.state!==s&&mu.enqueueReplaceState(l,l.state,null)}function rc(s,l,v,y){var S=s.stateNode;S.props=v,S.state=s.memoizedState,S.refs={},Vf(s);var P=l.contextType;typeof P=="object"&&P!==null?S.context=Xr(P):(P=Dr(l)?La:gr.current,S.context=wi(s,P)),S.state=s.memoizedState,P=l.getDerivedStateFromProps,typeof P=="function"&&(tc(s,l,P,v),S.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(l=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),l!==S.state&&mu.enqueueReplaceState(S,S.state,null),fu(s,v,S,y),S.state=s.memoizedState),typeof S.componentDidMount=="function"&&(s.flags|=4194308)}function Ti(s,l){try{var v="",y=l;do v+=ne(y),y=y.return;while(y);var S=v}catch(P){S=`
Error generating stack: `+P.message+`
`+P.stack}return{value:s,source:l,stack:S,digest:null}}function nc(s,l,v){return{value:s,source:null,stack:v??null,digest:l??null}}function ac(s,l){try{console.error(l.value)}catch(v){setTimeout(function(){throw v})}}var ab=typeof WeakMap=="function"?WeakMap:Map;function Gp(s,l,v){v=Ln(-1,v),v.tag=3,v.payload={element:null};var y=l.value;return v.callback=function(){Su||(Su=!0,wc=y),ac(s,l)},v}function Kp(s,l,v){v=Ln(-1,v),v.tag=3;var y=s.type.getDerivedStateFromError;if(typeof y=="function"){var S=l.value;v.payload=function(){return y(S)},v.callback=function(){ac(s,l)}}var P=s.stateNode;return P!==null&&typeof P.componentDidCatch=="function"&&(v.callback=function(){ac(s,l),typeof y!="function"&&(ia===null?ia=new Set([this]):ia.add(this));var j=l.stack;this.componentDidCatch(l.value,{componentStack:j!==null?j:""})}),v}function Zp(s,l,v){var y=s.pingCache;if(y===null){y=s.pingCache=new ab;var S=new Set;y.set(l,S)}else S=y.get(l),S===void 0&&(S=new Set,y.set(l,S));S.has(v)||(S.add(v),s=yb.bind(null,s,l,v),l.then(s,s))}function Xp(s){do{var l;if((l=s.tag===13)&&(l=s.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return s;s=s.return}while(s!==null);return null}function Yp(s,l,v,y,S){return(s.mode&1)===0?(s===l?s.flags|=65536:(s.flags|=128,v.flags|=131072,v.flags&=-52805,v.tag===1&&(v.alternate===null?v.tag=17:(l=Ln(-1,1),l.tag=2,na(v,l,1))),v.lanes|=1),s):(s.flags|=65536,s.lanes=S,s)}var ib=C.ReactCurrentOwner,Ir=!1;function kr(s,l,v,y){l.child=s===null?mp(l,null,v,y):Ei(l,s.child,v,y)}function Qp(s,l,v,y,S){v=v.render;var P=l.ref;return ki(l,S),y=Zf(s,l,v,y,P,S),v=Xf(),s!==null&&!Ir?(l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~S,Nn(s,l,S)):(Bt&&v&&Df(l),l.flags|=1,kr(s,l,y,S),l.child)}function Jp(s,l,v,y,S){if(s===null){var P=v.type;return typeof P=="function"&&!Cc(P)&&P.defaultProps===void 0&&v.compare===null&&v.defaultProps===void 0?(l.tag=15,l.type=P,eg(s,l,P,y,S)):(s=Bu(v.type,null,y,l,l.mode,S),s.ref=l.ref,s.return=l,l.child=s)}if(P=s.child,(s.lanes&S)===0){var j=P.memoizedProps;if(v=v.compare,v=v!==null?v:xs,v(j,y)&&s.ref===l.ref)return Nn(s,l,S)}return l.flags|=1,s=la(P,y),s.ref=l.ref,s.return=l,l.child=s}function eg(s,l,v,y,S){if(s!==null){var P=s.memoizedProps;if(xs(P,y)&&s.ref===l.ref)if(Ir=!1,l.pendingProps=y=P,(s.lanes&S)!==0)(s.flags&131072)!==0&&(Ir=!0);else return l.lanes=s.lanes,Nn(s,l,S)}return ic(s,l,v,y,S)}function tg(s,l,v){var y=l.pendingProps,S=y.children,P=s!==null?s.memoizedState:null;if(y.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},xt(Ri,Hr),Hr|=v;else{if((v&1073741824)===0)return s=P!==null?P.baseLanes|v:v,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:s,cachePool:null,transitions:null},l.updateQueue=null,xt(Ri,Hr),Hr|=s,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=P!==null?P.baseLanes:v,xt(Ri,Hr),Hr|=y}else P!==null?(y=P.baseLanes|v,l.memoizedState=null):y=v,xt(Ri,Hr),Hr|=y;return kr(s,l,S,v),l.child}function rg(s,l){var v=l.ref;(s===null&&v!==null||s!==null&&s.ref!==v)&&(l.flags|=512,l.flags|=2097152)}function ic(s,l,v,y,S){var P=Dr(v)?La:gr.current;return P=wi(l,P),ki(l,S),v=Zf(s,l,v,y,P,S),y=Xf(),s!==null&&!Ir?(l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~S,Nn(s,l,S)):(Bt&&y&&Df(l),l.flags|=1,kr(s,l,v,S),l.child)}function ng(s,l,v,y,S){if(Dr(v)){var P=!0;tu(l)}else P=!1;if(ki(l,S),l.stateNode===null)wu(s,l),Wp(l,v,y),rc(l,v,y,S),y=!0;else if(s===null){var j=l.stateNode,re=l.memoizedProps;j.props=re;var ue=j.context,Ce=v.contextType;typeof Ce=="object"&&Ce!==null?Ce=Xr(Ce):(Ce=Dr(v)?La:gr.current,Ce=wi(l,Ce));var Ne=v.getDerivedStateFromProps,Me=typeof Ne=="function"||typeof j.getSnapshotBeforeUpdate=="function";Me||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(re!==y||ue!==Ce)&&Hp(l,j,y,Ce),ra=!1;var Le=l.memoizedState;j.state=Le,fu(l,y,j,S),ue=l.memoizedState,re!==y||Le!==ue||Ar.current||ra?(typeof Ne=="function"&&(tc(l,v,Ne,y),ue=l.memoizedState),(re=ra||qp(l,v,re,y,Le,ue,Ce))?(Me||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount()),typeof j.componentDidMount=="function"&&(l.flags|=4194308)):(typeof j.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=y,l.memoizedState=ue),j.props=y,j.state=ue,j.context=Ce,y=re):(typeof j.componentDidMount=="function"&&(l.flags|=4194308),y=!1)}else{j=l.stateNode,wp(s,l),re=l.memoizedProps,Ce=l.type===l.elementType?re:un(l.type,re),j.props=Ce,Me=l.pendingProps,Le=j.context,ue=v.contextType,typeof ue=="object"&&ue!==null?ue=Xr(ue):(ue=Dr(v)?La:gr.current,ue=wi(l,ue));var Ve=v.getDerivedStateFromProps;(Ne=typeof Ve=="function"||typeof j.getSnapshotBeforeUpdate=="function")||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(re!==Me||Le!==ue)&&Hp(l,j,y,ue),ra=!1,Le=l.memoizedState,j.state=Le,fu(l,y,j,S);var Ge=l.memoizedState;re!==Me||Le!==Ge||Ar.current||ra?(typeof Ve=="function"&&(tc(l,v,Ve,y),Ge=l.memoizedState),(Ce=ra||qp(l,v,Ce,y,Le,Ge,ue)||!1)?(Ne||typeof j.UNSAFE_componentWillUpdate!="function"&&typeof j.componentWillUpdate!="function"||(typeof j.componentWillUpdate=="function"&&j.componentWillUpdate(y,Ge,ue),typeof j.UNSAFE_componentWillUpdate=="function"&&j.UNSAFE_componentWillUpdate(y,Ge,ue)),typeof j.componentDidUpdate=="function"&&(l.flags|=4),typeof j.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof j.componentDidUpdate!="function"||re===s.memoizedProps&&Le===s.memoizedState||(l.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||re===s.memoizedProps&&Le===s.memoizedState||(l.flags|=1024),l.memoizedProps=y,l.memoizedState=Ge),j.props=y,j.state=Ge,j.context=ue,y=Ce):(typeof j.componentDidUpdate!="function"||re===s.memoizedProps&&Le===s.memoizedState||(l.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||re===s.memoizedProps&&Le===s.memoizedState||(l.flags|=1024),y=!1)}return sc(s,l,v,y,P,S)}function sc(s,l,v,y,S,P){rg(s,l);var j=(l.flags&128)!==0;if(!y&&!j)return S&&up(l,v,!1),Nn(s,l,P);y=l.stateNode,ib.current=l;var re=j&&typeof v.getDerivedStateFromError!="function"?null:y.render();return l.flags|=1,s!==null&&j?(l.child=Ei(l,s.child,null,P),l.child=Ei(l,null,re,P)):kr(s,l,re,P),l.memoizedState=y.state,S&&up(l,v,!0),l.child}function ag(s){var l=s.stateNode;l.pendingContext?sp(s,l.pendingContext,l.pendingContext!==l.context):l.context&&sp(s,l.context,!1),jf(s,l.containerInfo)}function ig(s,l,v,y,S){return _i(),Of(S),l.flags|=256,kr(s,l,v,y),l.child}var oc={dehydrated:null,treeContext:null,retryLane:0};function uc(s){return{baseLanes:s,cachePool:null,transitions:null}}function sg(s,l,v){var y=l.pendingProps,S=Ot.current,P=!1,j=(l.flags&128)!==0,re;if((re=j)||(re=s!==null&&s.memoizedState===null?!1:(S&2)!==0),re?(P=!0,l.flags&=-129):(s===null||s.memoizedState!==null)&&(S|=1),xt(Ot,S&1),s===null)return Nf(l),s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((l.mode&1)===0?l.lanes=1:s.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(j=y.children,s=y.fallback,P?(y=l.mode,P=l.child,j={mode:"hidden",children:j},(y&1)===0&&P!==null?(P.childLanes=0,P.pendingProps=j):P=Au(j,y,0,null),s=qa(s,y,v,null),P.return=l,s.return=l,P.sibling=s,l.child=P,l.child.memoizedState=uc(v),l.memoizedState=oc,s):lc(l,j));if(S=s.memoizedState,S!==null&&(re=S.dehydrated,re!==null))return sb(s,l,j,y,re,S,v);if(P){P=y.fallback,j=l.mode,S=s.child,re=S.sibling;var ue={mode:"hidden",children:y.children};return(j&1)===0&&l.child!==S?(y=l.child,y.childLanes=0,y.pendingProps=ue,l.deletions=null):(y=la(S,ue),y.subtreeFlags=S.subtreeFlags&14680064),re!==null?P=la(re,P):(P=qa(P,j,v,null),P.flags|=2),P.return=l,y.return=l,y.sibling=P,l.child=y,y=P,P=l.child,j=s.child.memoizedState,j=j===null?uc(v):{baseLanes:j.baseLanes|v,cachePool:null,transitions:j.transitions},P.memoizedState=j,P.childLanes=s.childLanes&~v,l.memoizedState=oc,y}return P=s.child,s=P.sibling,y=la(P,{mode:"visible",children:y.children}),(l.mode&1)===0&&(y.lanes=v),y.return=l,y.sibling=null,s!==null&&(v=l.deletions,v===null?(l.deletions=[s],l.flags|=16):v.push(s)),l.child=y,l.memoizedState=null,y}function lc(s,l){return l=Au({mode:"visible",children:l},s.mode,0,null),l.return=s,s.child=l}function yu(s,l,v,y){return y!==null&&Of(y),Ei(l,s.child,null,v),s=lc(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function sb(s,l,v,y,S,P,j){if(v)return l.flags&256?(l.flags&=-257,y=nc(Error(t(422))),yu(s,l,j,y)):l.memoizedState!==null?(l.child=s.child,l.flags|=128,null):(P=y.fallback,S=l.mode,y=Au({mode:"visible",children:y.children},S,0,null),P=qa(P,S,j,null),P.flags|=2,y.return=l,P.return=l,y.sibling=P,l.child=y,(l.mode&1)!==0&&Ei(l,s.child,null,j),l.child.memoizedState=uc(j),l.memoizedState=oc,P);if((l.mode&1)===0)return yu(s,l,j,null);if(S.data==="$!"){if(y=S.nextSibling&&S.nextSibling.dataset,y)var re=y.dgst;return y=re,P=Error(t(419)),y=nc(P,y,void 0),yu(s,l,j,y)}if(re=(j&s.childLanes)!==0,Ir||re){if(y=tr,y!==null){switch(j&-j){case 4:S=2;break;case 16:S=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:S=32;break;case 536870912:S=268435456;break;default:S=0}S=(S&(y.suspendedLanes|j))!==0?0:S,S!==0&&S!==P.retryLane&&(P.retryLane=S,In(s,S),cn(y,s,S,-1))}return kc(),y=nc(Error(t(421))),yu(s,l,j,y)}return S.data==="$?"?(l.flags|=128,l.child=s.child,l=wb.bind(null,s),S._reactRetry=l,null):(s=P.treeContext,Wr=Qn(S.nextSibling),qr=l,Bt=!0,on=null,s!==null&&(Kr[Zr++]=An,Kr[Zr++]=Dn,Kr[Zr++]=Na,An=s.id,Dn=s.overflow,Na=l),l=lc(l,y.children),l.flags|=4096,l)}function og(s,l,v){s.lanes|=l;var y=s.alternate;y!==null&&(y.lanes|=l),Uf(s.return,l,v)}function fc(s,l,v,y,S){var P=s.memoizedState;P===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:y,tail:v,tailMode:S}:(P.isBackwards=l,P.rendering=null,P.renderingStartTime=0,P.last=y,P.tail=v,P.tailMode=S)}function ug(s,l,v){var y=l.pendingProps,S=y.revealOrder,P=y.tail;if(kr(s,l,y.children,v),y=Ot.current,(y&2)!==0)y=y&1|2,l.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&og(s,v,l);else if(s.tag===19)og(s,v,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}y&=1}if(xt(Ot,y),(l.mode&1)===0)l.memoizedState=null;else switch(S){case"forwards":for(v=l.child,S=null;v!==null;)s=v.alternate,s!==null&&cu(s)===null&&(S=v),v=v.sibling;v=S,v===null?(S=l.child,l.child=null):(S=v.sibling,v.sibling=null),fc(l,!1,S,v,P);break;case"backwards":for(v=null,S=l.child,l.child=null;S!==null;){if(s=S.alternate,s!==null&&cu(s)===null){l.child=S;break}s=S.sibling,S.sibling=v,v=S,S=s}fc(l,!0,v,null,P);break;case"together":fc(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function wu(s,l){(l.mode&1)===0&&s!==null&&(s.alternate=null,l.alternate=null,l.flags|=2)}function Nn(s,l,v){if(s!==null&&(l.dependencies=s.dependencies),Ua|=l.lanes,(v&l.childLanes)===0)return null;if(s!==null&&l.child!==s.child)throw Error(t(153));if(l.child!==null){for(s=l.child,v=la(s,s.pendingProps),l.child=v,v.return=l;s.sibling!==null;)s=s.sibling,v=v.sibling=la(s,s.pendingProps),v.return=l;v.sibling=null}return l.child}function ob(s,l,v){switch(l.tag){case 3:ag(l),_i();break;case 5:_p(l);break;case 1:Dr(l.type)&&tu(l);break;case 4:jf(l,l.stateNode.containerInfo);break;case 10:var y=l.type._context,S=l.memoizedProps.value;xt(ou,y._currentValue),y._currentValue=S;break;case 13:if(y=l.memoizedState,y!==null)return y.dehydrated!==null?(xt(Ot,Ot.current&1),l.flags|=128,null):(v&l.child.childLanes)!==0?sg(s,l,v):(xt(Ot,Ot.current&1),s=Nn(s,l,v),s!==null?s.sibling:null);xt(Ot,Ot.current&1);break;case 19:if(y=(v&l.childLanes)!==0,(s.flags&128)!==0){if(y)return ug(s,l,v);l.flags|=128}if(S=l.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),xt(Ot,Ot.current),y)break;return null;case 22:case 23:return l.lanes=0,tg(s,l,v)}return Nn(s,l,v)}var lg,cc,fg,cg;lg=function(s,l){for(var v=l.child;v!==null;){if(v.tag===5||v.tag===6)s.appendChild(v.stateNode);else if(v.tag!==4&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===l)break;for(;v.sibling===null;){if(v.return===null||v.return===l)return;v=v.return}v.sibling.return=v.return,v=v.sibling}},cc=function(){},fg=function(s,l,v,y){var S=s.memoizedProps;if(S!==y){s=l.stateNode,za(yn.current);var P=null;switch(v){case"input":S=D(s,S),y=D(s,y),P=[];break;case"select":S=te({},S,{value:void 0}),y=te({},y,{value:void 0}),P=[];break;case"textarea":S=se(s,S),y=se(s,y),P=[];break;default:typeof S.onClick!="function"&&typeof y.onClick=="function"&&(s.onclick=Qo)}ye(v,y);var j;v=null;for(Ce in S)if(!y.hasOwnProperty(Ce)&&S.hasOwnProperty(Ce)&&S[Ce]!=null)if(Ce==="style"){var re=S[Ce];for(j in re)re.hasOwnProperty(j)&&(v||(v={}),v[j]="")}else Ce!=="dangerouslySetInnerHTML"&&Ce!=="children"&&Ce!=="suppressContentEditableWarning"&&Ce!=="suppressHydrationWarning"&&Ce!=="autoFocus"&&(a.hasOwnProperty(Ce)?P||(P=[]):(P=P||[]).push(Ce,null));for(Ce in y){var ue=y[Ce];if(re=S!=null?S[Ce]:void 0,y.hasOwnProperty(Ce)&&ue!==re&&(ue!=null||re!=null))if(Ce==="style")if(re){for(j in re)!re.hasOwnProperty(j)||ue&&ue.hasOwnProperty(j)||(v||(v={}),v[j]="");for(j in ue)ue.hasOwnProperty(j)&&re[j]!==ue[j]&&(v||(v={}),v[j]=ue[j])}else v||(P||(P=[]),P.push(Ce,v)),v=ue;else Ce==="dangerouslySetInnerHTML"?(ue=ue?ue.__html:void 0,re=re?re.__html:void 0,ue!=null&&re!==ue&&(P=P||[]).push(Ce,ue)):Ce==="children"?typeof ue!="string"&&typeof ue!="number"||(P=P||[]).push(Ce,""+ue):Ce!=="suppressContentEditableWarning"&&Ce!=="suppressHydrationWarning"&&(a.hasOwnProperty(Ce)?(ue!=null&&Ce==="onScroll"&&kt("scroll",s),P||re===ue||(P=[])):(P=P||[]).push(Ce,ue))}v&&(P=P||[]).push("style",v);var Ce=P;(l.updateQueue=Ce)&&(l.flags|=4)}},cg=function(s,l,v,y){v!==y&&(l.flags|=4)};function Ns(s,l){if(!Bt)switch(s.tailMode){case"hidden":l=s.tail;for(var v=null;l!==null;)l.alternate!==null&&(v=l),l=l.sibling;v===null?s.tail=null:v.sibling=null;break;case"collapsed":v=s.tail;for(var y=null;v!==null;)v.alternate!==null&&(y=v),v=v.sibling;y===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:y.sibling=null}}function yr(s){var l=s.alternate!==null&&s.alternate.child===s.child,v=0,y=0;if(l)for(var S=s.child;S!==null;)v|=S.lanes|S.childLanes,y|=S.subtreeFlags&14680064,y|=S.flags&14680064,S.return=s,S=S.sibling;else for(S=s.child;S!==null;)v|=S.lanes|S.childLanes,y|=S.subtreeFlags,y|=S.flags,S.return=s,S=S.sibling;return s.subtreeFlags|=y,s.childLanes=v,l}function ub(s,l,v){var y=l.pendingProps;switch(If(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yr(l),null;case 1:return Dr(l.type)&&eu(),yr(l),null;case 3:return y=l.stateNode,Ci(),Ct(Ar),Ct(gr),Hf(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(s===null||s.child===null)&&(iu(l)?l.flags|=4:s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,on!==null&&(_c(on),on=null))),cc(s,l),yr(l),null;case 5:qf(l);var S=za(Bs.current);if(v=l.type,s!==null&&l.stateNode!=null)fg(s,l,v,y,S),s.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!y){if(l.stateNode===null)throw Error(t(166));return yr(l),null}if(s=za(yn.current),iu(l)){y=l.stateNode,v=l.type;var P=l.memoizedProps;switch(y[mn]=l,y[ks]=P,s=(l.mode&1)!==0,v){case"dialog":kt("cancel",y),kt("close",y);break;case"iframe":case"object":case"embed":kt("load",y);break;case"video":case"audio":for(S=0;S<_s.length;S++)kt(_s[S],y);break;case"source":kt("error",y);break;case"img":case"image":case"link":kt("error",y),kt("load",y);break;case"details":kt("toggle",y);break;case"input":ve(y,P),kt("invalid",y);break;case"select":y._wrapperState={wasMultiple:!!P.multiple},kt("invalid",y);break;case"textarea":Re(y,P),kt("invalid",y)}ye(v,P),S=null;for(var j in P)if(P.hasOwnProperty(j)){var re=P[j];j==="children"?typeof re=="string"?y.textContent!==re&&(P.suppressHydrationWarning!==!0&&Yo(y.textContent,re,s),S=["children",re]):typeof re=="number"&&y.textContent!==""+re&&(P.suppressHydrationWarning!==!0&&Yo(y.textContent,re,s),S=["children",""+re]):a.hasOwnProperty(j)&&re!=null&&j==="onScroll"&&kt("scroll",y)}switch(v){case"input":de(y),K(y,P,!0);break;case"textarea":de(y),Be(y);break;case"select":case"option":break;default:typeof P.onClick=="function"&&(y.onclick=Qo)}y=S,l.updateQueue=y,y!==null&&(l.flags|=4)}else{j=S.nodeType===9?S:S.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=ze(v)),s==="http://www.w3.org/1999/xhtml"?v==="script"?(s=j.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof y.is=="string"?s=j.createElement(v,{is:y.is}):(s=j.createElement(v),v==="select"&&(j=s,y.multiple?j.multiple=!0:y.size&&(j.size=y.size))):s=j.createElementNS(s,v),s[mn]=l,s[ks]=y,lg(s,l,!1,!1),l.stateNode=s;e:{switch(j=Se(v,y),v){case"dialog":kt("cancel",s),kt("close",s),S=y;break;case"iframe":case"object":case"embed":kt("load",s),S=y;break;case"video":case"audio":for(S=0;S<_s.length;S++)kt(_s[S],s);S=y;break;case"source":kt("error",s),S=y;break;case"img":case"image":case"link":kt("error",s),kt("load",s),S=y;break;case"details":kt("toggle",s),S=y;break;case"input":ve(s,y),S=D(s,y),kt("invalid",s);break;case"option":S=y;break;case"select":s._wrapperState={wasMultiple:!!y.multiple},S=te({},y,{value:void 0}),kt("invalid",s);break;case"textarea":Re(s,y),S=se(s,y),kt("invalid",s);break;default:S=y}ye(v,S),re=S;for(P in re)if(re.hasOwnProperty(P)){var ue=re[P];P==="style"?le(s,ue):P==="dangerouslySetInnerHTML"?(ue=ue?ue.__html:void 0,ue!=null&&R(s,ue)):P==="children"?typeof ue=="string"?(v!=="textarea"||ue!=="")&&G(s,ue):typeof ue=="number"&&G(s,""+ue):P!=="suppressContentEditableWarning"&&P!=="suppressHydrationWarning"&&P!=="autoFocus"&&(a.hasOwnProperty(P)?ue!=null&&P==="onScroll"&&kt("scroll",s):ue!=null&&E(s,P,ue,j))}switch(v){case"input":de(s),K(s,y,!1);break;case"textarea":de(s),Be(s);break;case"option":y.value!=null&&s.setAttribute("value",""+ke(y.value));break;case"select":s.multiple=!!y.multiple,P=y.value,P!=null?me(s,!!y.multiple,P,!1):y.defaultValue!=null&&me(s,!!y.multiple,y.defaultValue,!0);break;default:typeof S.onClick=="function"&&(s.onclick=Qo)}switch(v){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}}y&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return yr(l),null;case 6:if(s&&l.stateNode!=null)cg(s,l,s.memoizedProps,y);else{if(typeof y!="string"&&l.stateNode===null)throw Error(t(166));if(v=za(Bs.current),za(yn.current),iu(l)){if(y=l.stateNode,v=l.memoizedProps,y[mn]=l,(P=y.nodeValue!==v)&&(s=qr,s!==null))switch(s.tag){case 3:Yo(y.nodeValue,v,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Yo(y.nodeValue,v,(s.mode&1)!==0)}P&&(l.flags|=4)}else y=(v.nodeType===9?v:v.ownerDocument).createTextNode(y),y[mn]=l,l.stateNode=y}return yr(l),null;case 13:if(Ct(Ot),y=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(Bt&&Wr!==null&&(l.mode&1)!==0&&(l.flags&128)===0)vp(),_i(),l.flags|=98560,P=!1;else if(P=iu(l),y!==null&&y.dehydrated!==null){if(s===null){if(!P)throw Error(t(318));if(P=l.memoizedState,P=P!==null?P.dehydrated:null,!P)throw Error(t(317));P[mn]=l}else _i(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;yr(l),P=!1}else on!==null&&(_c(on),on=null),P=!0;if(!P)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=v,l):(y=y!==null,y!==(s!==null&&s.memoizedState!==null)&&y&&(l.child.flags|=8192,(l.mode&1)!==0&&(s===null||(Ot.current&1)!==0?Zt===0&&(Zt=3):kc())),l.updateQueue!==null&&(l.flags|=4),yr(l),null);case 4:return Ci(),cc(s,l),s===null&&Es(l.stateNode.containerInfo),yr(l),null;case 10:return Ff(l.type._context),yr(l),null;case 17:return Dr(l.type)&&eu(),yr(l),null;case 19:if(Ct(Ot),P=l.memoizedState,P===null)return yr(l),null;if(y=(l.flags&128)!==0,j=P.rendering,j===null)if(y)Ns(P,!1);else{if(Zt!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(j=cu(s),j!==null){for(l.flags|=128,Ns(P,!1),y=j.updateQueue,y!==null&&(l.updateQueue=y,l.flags|=4),l.subtreeFlags=0,y=v,v=l.child;v!==null;)P=v,s=y,P.flags&=14680066,j=P.alternate,j===null?(P.childLanes=0,P.lanes=s,P.child=null,P.subtreeFlags=0,P.memoizedProps=null,P.memoizedState=null,P.updateQueue=null,P.dependencies=null,P.stateNode=null):(P.childLanes=j.childLanes,P.lanes=j.lanes,P.child=j.child,P.subtreeFlags=0,P.deletions=null,P.memoizedProps=j.memoizedProps,P.memoizedState=j.memoizedState,P.updateQueue=j.updateQueue,P.type=j.type,s=j.dependencies,P.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),v=v.sibling;return xt(Ot,Ot.current&1|2),l.child}s=s.sibling}P.tail!==null&&Lt()>Bi&&(l.flags|=128,y=!0,Ns(P,!1),l.lanes=4194304)}else{if(!y)if(s=cu(j),s!==null){if(l.flags|=128,y=!0,v=s.updateQueue,v!==null&&(l.updateQueue=v,l.flags|=4),Ns(P,!0),P.tail===null&&P.tailMode==="hidden"&&!j.alternate&&!Bt)return yr(l),null}else 2*Lt()-P.renderingStartTime>Bi&&v!==1073741824&&(l.flags|=128,y=!0,Ns(P,!1),l.lanes=4194304);P.isBackwards?(j.sibling=l.child,l.child=j):(v=P.last,v!==null?v.sibling=j:l.child=j,P.last=j)}return P.tail!==null?(l=P.tail,P.rendering=l,P.tail=l.sibling,P.renderingStartTime=Lt(),l.sibling=null,v=Ot.current,xt(Ot,y?v&1|2:v&1),l):(yr(l),null);case 22:case 23:return Sc(),y=l.memoizedState!==null,s!==null&&s.memoizedState!==null!==y&&(l.flags|=8192),y&&(l.mode&1)!==0?(Hr&1073741824)!==0&&(yr(l),l.subtreeFlags&6&&(l.flags|=8192)):yr(l),null;case 24:return null;case 25:return null}throw Error(t(156,l.tag))}function lb(s,l){switch(If(l),l.tag){case 1:return Dr(l.type)&&eu(),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return Ci(),Ct(Ar),Ct(gr),Hf(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 5:return qf(l),null;case 13:if(Ct(Ot),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(t(340));_i()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return Ct(Ot),null;case 4:return Ci(),null;case 10:return Ff(l.type._context),null;case 22:case 23:return Sc(),null;case 24:return null;default:return null}}var xu=!1,wr=!1,fb=typeof WeakSet=="function"?WeakSet:Set,je=null;function Pi(s,l){var v=s.ref;if(v!==null)if(typeof v=="function")try{v(null)}catch(y){Ft(s,l,y)}else v.current=null}function dc(s,l,v){try{v()}catch(y){Ft(s,l,y)}}var dg=!1;function cb(s,l){if(Sf=Uo,s=qv(),gf(s)){if("selectionStart"in s)var v={start:s.selectionStart,end:s.selectionEnd};else e:{v=(v=s.ownerDocument)&&v.defaultView||window;var y=v.getSelection&&v.getSelection();if(y&&y.rangeCount!==0){v=y.anchorNode;var S=y.anchorOffset,P=y.focusNode;y=y.focusOffset;try{v.nodeType,P.nodeType}catch{v=null;break e}var j=0,re=-1,ue=-1,Ce=0,Ne=0,Me=s,Le=null;t:for(;;){for(var Ve;Me!==v||S!==0&&Me.nodeType!==3||(re=j+S),Me!==P||y!==0&&Me.nodeType!==3||(ue=j+y),Me.nodeType===3&&(j+=Me.nodeValue.length),(Ve=Me.firstChild)!==null;)Le=Me,Me=Ve;for(;;){if(Me===s)break t;if(Le===v&&++Ce===S&&(re=j),Le===P&&++Ne===y&&(ue=j),(Ve=Me.nextSibling)!==null)break;Me=Le,Le=Me.parentNode}Me=Ve}v=re===-1||ue===-1?null:{start:re,end:ue}}else v=null}v=v||{start:0,end:0}}else v=null;for(kf={focusedElem:s,selectionRange:v},Uo=!1,je=l;je!==null;)if(l=je,s=l.child,(l.subtreeFlags&1028)!==0&&s!==null)s.return=l,je=s;else for(;je!==null;){l=je;try{var Ge=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(Ge!==null){var Ze=Ge.memoizedProps,jt=Ge.memoizedState,xe=l.stateNode,ce=xe.getSnapshotBeforeUpdate(l.elementType===l.type?Ze:un(l.type,Ze),jt);xe.__reactInternalSnapshotBeforeUpdate=ce}break;case 3:var Ee=l.stateNode.containerInfo;Ee.nodeType===1?Ee.textContent="":Ee.nodeType===9&&Ee.documentElement&&Ee.removeChild(Ee.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Fe){Ft(l,l.return,Fe)}if(s=l.sibling,s!==null){s.return=l.return,je=s;break}je=l.return}return Ge=dg,dg=!1,Ge}function Os(s,l,v){var y=l.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var S=y=y.next;do{if((S.tag&s)===s){var P=S.destroy;S.destroy=void 0,P!==void 0&&dc(l,v,P)}S=S.next}while(S!==y)}}function bu(s,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var v=l=l.next;do{if((v.tag&s)===s){var y=v.create;v.destroy=y()}v=v.next}while(v!==l)}}function hc(s){var l=s.ref;if(l!==null){var v=s.stateNode;switch(s.tag){case 5:s=v;break;default:s=v}typeof l=="function"?l(s):l.current=s}}function hg(s){var l=s.alternate;l!==null&&(s.alternate=null,hg(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&(delete l[mn],delete l[ks],delete l[Rf],delete l[Gx],delete l[Kx])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function vg(s){return s.tag===5||s.tag===3||s.tag===4}function pg(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||vg(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function vc(s,l,v){var y=s.tag;if(y===5||y===6)s=s.stateNode,l?v.nodeType===8?v.parentNode.insertBefore(s,l):v.insertBefore(s,l):(v.nodeType===8?(l=v.parentNode,l.insertBefore(s,v)):(l=v,l.appendChild(s)),v=v._reactRootContainer,v!=null||l.onclick!==null||(l.onclick=Qo));else if(y!==4&&(s=s.child,s!==null))for(vc(s,l,v),s=s.sibling;s!==null;)vc(s,l,v),s=s.sibling}function pc(s,l,v){var y=s.tag;if(y===5||y===6)s=s.stateNode,l?v.insertBefore(s,l):v.appendChild(s);else if(y!==4&&(s=s.child,s!==null))for(pc(s,l,v),s=s.sibling;s!==null;)pc(s,l,v),s=s.sibling}var or=null,ln=!1;function aa(s,l,v){for(v=v.child;v!==null;)gg(s,l,v),v=v.sibling}function gg(s,l,v){if(Vr&&typeof Vr.onCommitFiberUnmount=="function")try{Vr.onCommitFiberUnmount(Aa,v)}catch{}switch(v.tag){case 5:wr||Pi(v,l);case 6:var y=or,S=ln;or=null,aa(s,l,v),or=y,ln=S,or!==null&&(ln?(s=or,v=v.stateNode,s.nodeType===8?s.parentNode.removeChild(v):s.removeChild(v)):or.removeChild(v.stateNode));break;case 18:or!==null&&(ln?(s=or,v=v.stateNode,s.nodeType===8?Pf(s.parentNode,v):s.nodeType===1&&Pf(s,v),vs(s)):Pf(or,v.stateNode));break;case 4:y=or,S=ln,or=v.stateNode.containerInfo,ln=!0,aa(s,l,v),or=y,ln=S;break;case 0:case 11:case 14:case 15:if(!wr&&(y=v.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){S=y=y.next;do{var P=S,j=P.destroy;P=P.tag,j!==void 0&&((P&2)!==0||(P&4)!==0)&&dc(v,l,j),S=S.next}while(S!==y)}aa(s,l,v);break;case 1:if(!wr&&(Pi(v,l),y=v.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=v.memoizedProps,y.state=v.memoizedState,y.componentWillUnmount()}catch(re){Ft(v,l,re)}aa(s,l,v);break;case 21:aa(s,l,v);break;case 22:v.mode&1?(wr=(y=wr)||v.memoizedState!==null,aa(s,l,v),wr=y):aa(s,l,v);break;default:aa(s,l,v)}}function mg(s){var l=s.updateQueue;if(l!==null){s.updateQueue=null;var v=s.stateNode;v===null&&(v=s.stateNode=new fb),l.forEach(function(y){var S=xb.bind(null,s,y);v.has(y)||(v.add(y),y.then(S,S))})}}function fn(s,l){var v=l.deletions;if(v!==null)for(var y=0;y<v.length;y++){var S=v[y];try{var P=s,j=l,re=j;e:for(;re!==null;){switch(re.tag){case 5:or=re.stateNode,ln=!1;break e;case 3:or=re.stateNode.containerInfo,ln=!0;break e;case 4:or=re.stateNode.containerInfo,ln=!0;break e}re=re.return}if(or===null)throw Error(t(160));gg(P,j,S),or=null,ln=!1;var ue=S.alternate;ue!==null&&(ue.return=null),S.return=null}catch(Ce){Ft(S,l,Ce)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)yg(l,s),l=l.sibling}function yg(s,l){var v=s.alternate,y=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(fn(l,s),xn(s),y&4){try{Os(3,s,s.return),bu(3,s)}catch(Ze){Ft(s,s.return,Ze)}try{Os(5,s,s.return)}catch(Ze){Ft(s,s.return,Ze)}}break;case 1:fn(l,s),xn(s),y&512&&v!==null&&Pi(v,v.return);break;case 5:if(fn(l,s),xn(s),y&512&&v!==null&&Pi(v,v.return),s.flags&32){var S=s.stateNode;try{G(S,"")}catch(Ze){Ft(s,s.return,Ze)}}if(y&4&&(S=s.stateNode,S!=null)){var P=s.memoizedProps,j=v!==null?v.memoizedProps:P,re=s.type,ue=s.updateQueue;if(s.updateQueue=null,ue!==null)try{re==="input"&&P.type==="radio"&&P.name!=null&&pe(S,P),Se(re,j);var Ce=Se(re,P);for(j=0;j<ue.length;j+=2){var Ne=ue[j],Me=ue[j+1];Ne==="style"?le(S,Me):Ne==="dangerouslySetInnerHTML"?R(S,Me):Ne==="children"?G(S,Me):E(S,Ne,Me,Ce)}switch(re){case"input":Y(S,P);break;case"textarea":De(S,P);break;case"select":var Le=S._wrapperState.wasMultiple;S._wrapperState.wasMultiple=!!P.multiple;var Ve=P.value;Ve!=null?me(S,!!P.multiple,Ve,!1):Le!==!!P.multiple&&(P.defaultValue!=null?me(S,!!P.multiple,P.defaultValue,!0):me(S,!!P.multiple,P.multiple?[]:"",!1))}S[ks]=P}catch(Ze){Ft(s,s.return,Ze)}}break;case 6:if(fn(l,s),xn(s),y&4){if(s.stateNode===null)throw Error(t(162));S=s.stateNode,P=s.memoizedProps;try{S.nodeValue=P}catch(Ze){Ft(s,s.return,Ze)}}break;case 3:if(fn(l,s),xn(s),y&4&&v!==null&&v.memoizedState.isDehydrated)try{vs(l.containerInfo)}catch(Ze){Ft(s,s.return,Ze)}break;case 4:fn(l,s),xn(s);break;case 13:fn(l,s),xn(s),S=s.child,S.flags&8192&&(P=S.memoizedState!==null,S.stateNode.isHidden=P,!P||S.alternate!==null&&S.alternate.memoizedState!==null||(yc=Lt())),y&4&&mg(s);break;case 22:if(Ne=v!==null&&v.memoizedState!==null,s.mode&1?(wr=(Ce=wr)||Ne,fn(l,s),wr=Ce):fn(l,s),xn(s),y&8192){if(Ce=s.memoizedState!==null,(s.stateNode.isHidden=Ce)&&!Ne&&(s.mode&1)!==0)for(je=s,Ne=s.child;Ne!==null;){for(Me=je=Ne;je!==null;){switch(Le=je,Ve=Le.child,Le.tag){case 0:case 11:case 14:case 15:Os(4,Le,Le.return);break;case 1:Pi(Le,Le.return);var Ge=Le.stateNode;if(typeof Ge.componentWillUnmount=="function"){y=Le,v=Le.return;try{l=y,Ge.props=l.memoizedProps,Ge.state=l.memoizedState,Ge.componentWillUnmount()}catch(Ze){Ft(y,v,Ze)}}break;case 5:Pi(Le,Le.return);break;case 22:if(Le.memoizedState!==null){bg(Me);continue}}Ve!==null?(Ve.return=Le,je=Ve):bg(Me)}Ne=Ne.sibling}e:for(Ne=null,Me=s;;){if(Me.tag===5){if(Ne===null){Ne=Me;try{S=Me.stateNode,Ce?(P=S.style,typeof P.setProperty=="function"?P.setProperty("display","none","important"):P.display="none"):(re=Me.stateNode,ue=Me.memoizedProps.style,j=ue!=null&&ue.hasOwnProperty("display")?ue.display:null,re.style.display=O("display",j))}catch(Ze){Ft(s,s.return,Ze)}}}else if(Me.tag===6){if(Ne===null)try{Me.stateNode.nodeValue=Ce?"":Me.memoizedProps}catch(Ze){Ft(s,s.return,Ze)}}else if((Me.tag!==22&&Me.tag!==23||Me.memoizedState===null||Me===s)&&Me.child!==null){Me.child.return=Me,Me=Me.child;continue}if(Me===s)break e;for(;Me.sibling===null;){if(Me.return===null||Me.return===s)break e;Ne===Me&&(Ne=null),Me=Me.return}Ne===Me&&(Ne=null),Me.sibling.return=Me.return,Me=Me.sibling}}break;case 19:fn(l,s),xn(s),y&4&&mg(s);break;case 21:break;default:fn(l,s),xn(s)}}function xn(s){var l=s.flags;if(l&2){try{e:{for(var v=s.return;v!==null;){if(vg(v)){var y=v;break e}v=v.return}throw Error(t(160))}switch(y.tag){case 5:var S=y.stateNode;y.flags&32&&(G(S,""),y.flags&=-33);var P=pg(s);pc(s,P,S);break;case 3:case 4:var j=y.stateNode.containerInfo,re=pg(s);vc(s,re,j);break;default:throw Error(t(161))}}catch(ue){Ft(s,s.return,ue)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function db(s,l,v){je=s,wg(s)}function wg(s,l,v){for(var y=(s.mode&1)!==0;je!==null;){var S=je,P=S.child;if(S.tag===22&&y){var j=S.memoizedState!==null||xu;if(!j){var re=S.alternate,ue=re!==null&&re.memoizedState!==null||wr;re=xu;var Ce=wr;if(xu=j,(wr=ue)&&!Ce)for(je=S;je!==null;)j=je,ue=j.child,j.tag===22&&j.memoizedState!==null?_g(S):ue!==null?(ue.return=j,je=ue):_g(S);for(;P!==null;)je=P,wg(P),P=P.sibling;je=S,xu=re,wr=Ce}xg(s)}else(S.subtreeFlags&8772)!==0&&P!==null?(P.return=S,je=P):xg(s)}}function xg(s){for(;je!==null;){var l=je;if((l.flags&8772)!==0){var v=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:wr||bu(5,l);break;case 1:var y=l.stateNode;if(l.flags&4&&!wr)if(v===null)y.componentDidMount();else{var S=l.elementType===l.type?v.memoizedProps:un(l.type,v.memoizedProps);y.componentDidUpdate(S,v.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var P=l.updateQueue;P!==null&&bp(l,P,y);break;case 3:var j=l.updateQueue;if(j!==null){if(v=null,l.child!==null)switch(l.child.tag){case 5:v=l.child.stateNode;break;case 1:v=l.child.stateNode}bp(l,j,v)}break;case 5:var re=l.stateNode;if(v===null&&l.flags&4){v=re;var ue=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":ue.autoFocus&&v.focus();break;case"img":ue.src&&(v.src=ue.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var Ce=l.alternate;if(Ce!==null){var Ne=Ce.memoizedState;if(Ne!==null){var Me=Ne.dehydrated;Me!==null&&vs(Me)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}wr||l.flags&512&&hc(l)}catch(Le){Ft(l,l.return,Le)}}if(l===s){je=null;break}if(v=l.sibling,v!==null){v.return=l.return,je=v;break}je=l.return}}function bg(s){for(;je!==null;){var l=je;if(l===s){je=null;break}var v=l.sibling;if(v!==null){v.return=l.return,je=v;break}je=l.return}}function _g(s){for(;je!==null;){var l=je;try{switch(l.tag){case 0:case 11:case 15:var v=l.return;try{bu(4,l)}catch(ue){Ft(l,v,ue)}break;case 1:var y=l.stateNode;if(typeof y.componentDidMount=="function"){var S=l.return;try{y.componentDidMount()}catch(ue){Ft(l,S,ue)}}var P=l.return;try{hc(l)}catch(ue){Ft(l,P,ue)}break;case 5:var j=l.return;try{hc(l)}catch(ue){Ft(l,j,ue)}}}catch(ue){Ft(l,l.return,ue)}if(l===s){je=null;break}var re=l.sibling;if(re!==null){re.return=l.return,je=re;break}je=l.return}}var hb=Math.ceil,_u=C.ReactCurrentDispatcher,gc=C.ReactCurrentOwner,Qr=C.ReactCurrentBatchConfig,ft=0,tr=null,qt=null,ur=0,Hr=0,Ri=Jn(0),Zt=0,Ms=null,Ua=0,Eu=0,mc=0,zs=null,Lr=null,yc=0,Bi=1/0,On=null,Su=!1,wc=null,ia=null,ku=!1,sa=null,Cu=0,Fs=0,xc=null,Tu=-1,Pu=0;function Cr(){return(ft&6)!==0?Lt():Tu!==-1?Tu:Tu=Lt()}function oa(s){return(s.mode&1)===0?1:(ft&2)!==0&&ur!==0?ur&-ur:Xx.transition!==null?(Pu===0&&(Pu=pv()),Pu):(s=mt,s!==0||(s=window.event,s=s===void 0?16:Sv(s.type)),s)}function cn(s,l,v,y){if(50<Fs)throw Fs=0,xc=null,Error(t(185));ls(s,v,y),((ft&2)===0||s!==tr)&&(s===tr&&((ft&2)===0&&(Eu|=v),Zt===4&&ua(s,ur)),Nr(s,y),v===1&&ft===0&&(l.mode&1)===0&&(Bi=Lt()+500,ru&&ta()))}function Nr(s,l){var v=s.callbackNode;Xw(s,l);var y=li(s,s===tr?ur:0);if(y===0)v!==null&&No(v),s.callbackNode=null,s.callbackPriority=0;else if(l=y&-y,s.callbackPriority!==l){if(v!=null&&No(v),l===1)s.tag===0?Zx(Sg.bind(null,s)):lp(Sg.bind(null,s)),Wx(function(){(ft&6)===0&&ta()}),v=null;else{switch(gv(y)){case 1:v=ss;break;case 4:v=Oo;break;case 16:v=gn;break;case 536870912:v=Ba;break;default:v=gn}v=Dg(v,Eg.bind(null,s))}s.callbackPriority=l,s.callbackNode=v}}function Eg(s,l){if(Tu=-1,Pu=0,(ft&6)!==0)throw Error(t(327));var v=s.callbackNode;if(Ai()&&s.callbackNode!==v)return null;var y=li(s,s===tr?ur:0);if(y===0)return null;if((y&30)!==0||(y&s.expiredLanes)!==0||l)l=Ru(s,y);else{l=y;var S=ft;ft|=2;var P=Cg();(tr!==s||ur!==l)&&(On=null,Bi=Lt()+500,Va(s,l));do try{gb();break}catch(re){kg(s,re)}while(!0);zf(),_u.current=P,ft=S,qt!==null?l=0:(tr=null,ur=0,l=Zt)}if(l!==0){if(l===2&&(S=Jl(s),S!==0&&(y=S,l=bc(s,S))),l===1)throw v=Ms,Va(s,0),ua(s,y),Nr(s,Lt()),v;if(l===6)ua(s,y);else{if(S=s.current.alternate,(y&30)===0&&!vb(S)&&(l=Ru(s,y),l===2&&(P=Jl(s),P!==0&&(y=P,l=bc(s,P))),l===1))throw v=Ms,Va(s,0),ua(s,y),Nr(s,Lt()),v;switch(s.finishedWork=S,s.finishedLanes=y,l){case 0:case 1:throw Error(t(345));case 2:ja(s,Lr,On);break;case 3:if(ua(s,y),(y&130023424)===y&&(l=yc+500-Lt(),10<l)){if(li(s,0)!==0)break;if(S=s.suspendedLanes,(S&y)!==y){Cr(),s.pingedLanes|=s.suspendedLanes&S;break}s.timeoutHandle=Tf(ja.bind(null,s,Lr,On),l);break}ja(s,Lr,On);break;case 4:if(ua(s,y),(y&4194240)===y)break;for(l=s.eventTimes,S=-1;0<y;){var j=31-Nt(y);P=1<<j,j=l[j],j>S&&(S=j),y&=~P}if(y=S,y=Lt()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*hb(y/1960))-y,10<y){s.timeoutHandle=Tf(ja.bind(null,s,Lr,On),y);break}ja(s,Lr,On);break;case 5:ja(s,Lr,On);break;default:throw Error(t(329))}}}return Nr(s,Lt()),s.callbackNode===v?Eg.bind(null,s):null}function bc(s,l){var v=zs;return s.current.memoizedState.isDehydrated&&(Va(s,l).flags|=256),s=Ru(s,l),s!==2&&(l=Lr,Lr=v,l!==null&&_c(l)),s}function _c(s){Lr===null?Lr=s:Lr.push.apply(Lr,s)}function vb(s){for(var l=s;;){if(l.flags&16384){var v=l.updateQueue;if(v!==null&&(v=v.stores,v!==null))for(var y=0;y<v.length;y++){var S=v[y],P=S.getSnapshot;S=S.value;try{if(!sn(P(),S))return!1}catch{return!1}}}if(v=l.child,l.subtreeFlags&16384&&v!==null)v.return=l,l=v;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function ua(s,l){for(l&=~mc,l&=~Eu,s.suspendedLanes|=l,s.pingedLanes&=~l,s=s.expirationTimes;0<l;){var v=31-Nt(l),y=1<<v;s[v]=-1,l&=~y}}function Sg(s){if((ft&6)!==0)throw Error(t(327));Ai();var l=li(s,0);if((l&1)===0)return Nr(s,Lt()),null;var v=Ru(s,l);if(s.tag!==0&&v===2){var y=Jl(s);y!==0&&(l=y,v=bc(s,y))}if(v===1)throw v=Ms,Va(s,0),ua(s,l),Nr(s,Lt()),v;if(v===6)throw Error(t(345));return s.finishedWork=s.current.alternate,s.finishedLanes=l,ja(s,Lr,On),Nr(s,Lt()),null}function Ec(s,l){var v=ft;ft|=1;try{return s(l)}finally{ft=v,ft===0&&(Bi=Lt()+500,ru&&ta())}}function $a(s){sa!==null&&sa.tag===0&&(ft&6)===0&&Ai();var l=ft;ft|=1;var v=Qr.transition,y=mt;try{if(Qr.transition=null,mt=1,s)return s()}finally{mt=y,Qr.transition=v,ft=l,(ft&6)===0&&ta()}}function Sc(){Hr=Ri.current,Ct(Ri)}function Va(s,l){s.finishedWork=null,s.finishedLanes=0;var v=s.timeoutHandle;if(v!==-1&&(s.timeoutHandle=-1,qx(v)),qt!==null)for(v=qt.return;v!==null;){var y=v;switch(If(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&eu();break;case 3:Ci(),Ct(Ar),Ct(gr),Hf();break;case 5:qf(y);break;case 4:Ci();break;case 13:Ct(Ot);break;case 19:Ct(Ot);break;case 10:Ff(y.type._context);break;case 22:case 23:Sc()}v=v.return}if(tr=s,qt=s=la(s.current,null),ur=Hr=l,Zt=0,Ms=null,mc=Eu=Ua=0,Lr=zs=null,Ma!==null){for(l=0;l<Ma.length;l++)if(v=Ma[l],y=v.interleaved,y!==null){v.interleaved=null;var S=y.next,P=v.pending;if(P!==null){var j=P.next;P.next=S,y.next=j}v.pending=y}Ma=null}return s}function kg(s,l){do{var v=qt;try{if(zf(),du.current=gu,hu){for(var y=Mt.memoizedState;y!==null;){var S=y.queue;S!==null&&(S.pending=null),y=y.next}hu=!1}if(Fa=0,er=Kt=Mt=null,As=!1,Ds=0,gc.current=null,v===null||v.return===null){Zt=1,Ms=l,qt=null;break}e:{var P=s,j=v.return,re=v,ue=l;if(l=ur,re.flags|=32768,ue!==null&&typeof ue=="object"&&typeof ue.then=="function"){var Ce=ue,Ne=re,Me=Ne.tag;if((Ne.mode&1)===0&&(Me===0||Me===11||Me===15)){var Le=Ne.alternate;Le?(Ne.updateQueue=Le.updateQueue,Ne.memoizedState=Le.memoizedState,Ne.lanes=Le.lanes):(Ne.updateQueue=null,Ne.memoizedState=null)}var Ve=Xp(j);if(Ve!==null){Ve.flags&=-257,Yp(Ve,j,re,P,l),Ve.mode&1&&Zp(P,Ce,l),l=Ve,ue=Ce;var Ge=l.updateQueue;if(Ge===null){var Ze=new Set;Ze.add(ue),l.updateQueue=Ze}else Ge.add(ue);break e}else{if((l&1)===0){Zp(P,Ce,l),kc();break e}ue=Error(t(426))}}else if(Bt&&re.mode&1){var jt=Xp(j);if(jt!==null){(jt.flags&65536)===0&&(jt.flags|=256),Yp(jt,j,re,P,l),Of(Ti(ue,re));break e}}P=ue=Ti(ue,re),Zt!==4&&(Zt=2),zs===null?zs=[P]:zs.push(P),P=j;do{switch(P.tag){case 3:P.flags|=65536,l&=-l,P.lanes|=l;var xe=Gp(P,ue,l);xp(P,xe);break e;case 1:re=ue;var ce=P.type,Ee=P.stateNode;if((P.flags&128)===0&&(typeof ce.getDerivedStateFromError=="function"||Ee!==null&&typeof Ee.componentDidCatch=="function"&&(ia===null||!ia.has(Ee)))){P.flags|=65536,l&=-l,P.lanes|=l;var Fe=Kp(P,re,l);xp(P,Fe);break e}}P=P.return}while(P!==null)}Pg(v)}catch(Xe){l=Xe,qt===v&&v!==null&&(qt=v=v.return);continue}break}while(!0)}function Cg(){var s=_u.current;return _u.current=gu,s===null?gu:s}function kc(){(Zt===0||Zt===3||Zt===2)&&(Zt=4),tr===null||(Ua&268435455)===0&&(Eu&268435455)===0||ua(tr,ur)}function Ru(s,l){var v=ft;ft|=2;var y=Cg();(tr!==s||ur!==l)&&(On=null,Va(s,l));do try{pb();break}catch(S){kg(s,S)}while(!0);if(zf(),ft=v,_u.current=y,qt!==null)throw Error(t(261));return tr=null,ur=0,Zt}function pb(){for(;qt!==null;)Tg(qt)}function gb(){for(;qt!==null&&!Zl();)Tg(qt)}function Tg(s){var l=Ag(s.alternate,s,Hr);s.memoizedProps=s.pendingProps,l===null?Pg(s):qt=l,gc.current=null}function Pg(s){var l=s;do{var v=l.alternate;if(s=l.return,(l.flags&32768)===0){if(v=ub(v,l,Hr),v!==null){qt=v;return}}else{if(v=lb(v,l),v!==null){v.flags&=32767,qt=v;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Zt=6,qt=null;return}}if(l=l.sibling,l!==null){qt=l;return}qt=l=s}while(l!==null);Zt===0&&(Zt=5)}function ja(s,l,v){var y=mt,S=Qr.transition;try{Qr.transition=null,mt=1,mb(s,l,v,y)}finally{Qr.transition=S,mt=y}return null}function mb(s,l,v,y){do Ai();while(sa!==null);if((ft&6)!==0)throw Error(t(327));v=s.finishedWork;var S=s.finishedLanes;if(v===null)return null;if(s.finishedWork=null,s.finishedLanes=0,v===s.current)throw Error(t(177));s.callbackNode=null,s.callbackPriority=0;var P=v.lanes|v.childLanes;if(Yw(s,P),s===tr&&(qt=tr=null,ur=0),(v.subtreeFlags&2064)===0&&(v.flags&2064)===0||ku||(ku=!0,Dg(gn,function(){return Ai(),null})),P=(v.flags&15990)!==0,(v.subtreeFlags&15990)!==0||P){P=Qr.transition,Qr.transition=null;var j=mt;mt=1;var re=ft;ft|=4,gc.current=null,cb(s,v),yg(v,s),Mx(kf),Uo=!!Sf,kf=Sf=null,s.current=v,db(v),Xl(),ft=re,mt=j,Qr.transition=P}else s.current=v;if(ku&&(ku=!1,sa=s,Cu=S),P=s.pendingLanes,P===0&&(ia=null),Ql(v.stateNode),Nr(s,Lt()),l!==null)for(y=s.onRecoverableError,v=0;v<l.length;v++)S=l[v],y(S.value,{componentStack:S.stack,digest:S.digest});if(Su)throw Su=!1,s=wc,wc=null,s;return(Cu&1)!==0&&s.tag!==0&&Ai(),P=s.pendingLanes,(P&1)!==0?s===xc?Fs++:(Fs=0,xc=s):Fs=0,ta(),null}function Ai(){if(sa!==null){var s=gv(Cu),l=Qr.transition,v=mt;try{if(Qr.transition=null,mt=16>s?16:s,sa===null)var y=!1;else{if(s=sa,sa=null,Cu=0,(ft&6)!==0)throw Error(t(331));var S=ft;for(ft|=4,je=s.current;je!==null;){var P=je,j=P.child;if((je.flags&16)!==0){var re=P.deletions;if(re!==null){for(var ue=0;ue<re.length;ue++){var Ce=re[ue];for(je=Ce;je!==null;){var Ne=je;switch(Ne.tag){case 0:case 11:case 15:Os(8,Ne,P)}var Me=Ne.child;if(Me!==null)Me.return=Ne,je=Me;else for(;je!==null;){Ne=je;var Le=Ne.sibling,Ve=Ne.return;if(hg(Ne),Ne===Ce){je=null;break}if(Le!==null){Le.return=Ve,je=Le;break}je=Ve}}}var Ge=P.alternate;if(Ge!==null){var Ze=Ge.child;if(Ze!==null){Ge.child=null;do{var jt=Ze.sibling;Ze.sibling=null,Ze=jt}while(Ze!==null)}}je=P}}if((P.subtreeFlags&2064)!==0&&j!==null)j.return=P,je=j;else e:for(;je!==null;){if(P=je,(P.flags&2048)!==0)switch(P.tag){case 0:case 11:case 15:Os(9,P,P.return)}var xe=P.sibling;if(xe!==null){xe.return=P.return,je=xe;break e}je=P.return}}var ce=s.current;for(je=ce;je!==null;){j=je;var Ee=j.child;if((j.subtreeFlags&2064)!==0&&Ee!==null)Ee.return=j,je=Ee;else e:for(j=ce;je!==null;){if(re=je,(re.flags&2048)!==0)try{switch(re.tag){case 0:case 11:case 15:bu(9,re)}}catch(Xe){Ft(re,re.return,Xe)}if(re===j){je=null;break e}var Fe=re.sibling;if(Fe!==null){Fe.return=re.return,je=Fe;break e}je=re.return}}if(ft=S,ta(),Vr&&typeof Vr.onPostCommitFiberRoot=="function")try{Vr.onPostCommitFiberRoot(Aa,s)}catch{}y=!0}return y}finally{mt=v,Qr.transition=l}}return!1}function Rg(s,l,v){l=Ti(v,l),l=Gp(s,l,1),s=na(s,l,1),l=Cr(),s!==null&&(ls(s,1,l),Nr(s,l))}function Ft(s,l,v){if(s.tag===3)Rg(s,s,v);else for(;l!==null;){if(l.tag===3){Rg(l,s,v);break}else if(l.tag===1){var y=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(ia===null||!ia.has(y))){s=Ti(v,s),s=Kp(l,s,1),l=na(l,s,1),s=Cr(),l!==null&&(ls(l,1,s),Nr(l,s));break}}l=l.return}}function yb(s,l,v){var y=s.pingCache;y!==null&&y.delete(l),l=Cr(),s.pingedLanes|=s.suspendedLanes&v,tr===s&&(ur&v)===v&&(Zt===4||Zt===3&&(ur&130023424)===ur&&500>Lt()-yc?Va(s,0):mc|=v),Nr(s,l)}function Bg(s,l){l===0&&((s.mode&1)===0?l=1:(l=oi,oi<<=1,(oi&130023424)===0&&(oi=4194304)));var v=Cr();s=In(s,l),s!==null&&(ls(s,l,v),Nr(s,v))}function wb(s){var l=s.memoizedState,v=0;l!==null&&(v=l.retryLane),Bg(s,v)}function xb(s,l){var v=0;switch(s.tag){case 13:var y=s.stateNode,S=s.memoizedState;S!==null&&(v=S.retryLane);break;case 19:y=s.stateNode;break;default:throw Error(t(314))}y!==null&&y.delete(l),Bg(s,v)}var Ag;Ag=function(s,l,v){if(s!==null)if(s.memoizedProps!==l.pendingProps||Ar.current)Ir=!0;else{if((s.lanes&v)===0&&(l.flags&128)===0)return Ir=!1,ob(s,l,v);Ir=(s.flags&131072)!==0}else Ir=!1,Bt&&(l.flags&1048576)!==0&&fp(l,au,l.index);switch(l.lanes=0,l.tag){case 2:var y=l.type;wu(s,l),s=l.pendingProps;var S=wi(l,gr.current);ki(l,v),S=Zf(null,l,y,s,S,v);var P=Xf();return l.flags|=1,typeof S=="object"&&S!==null&&typeof S.render=="function"&&S.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,Dr(y)?(P=!0,tu(l)):P=!1,l.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,Vf(l),S.updater=mu,l.stateNode=S,S._reactInternals=l,rc(l,y,s,v),l=sc(null,l,y,!0,P,v)):(l.tag=0,Bt&&P&&Df(l),kr(null,l,S,v),l=l.child),l;case 16:y=l.elementType;e:{switch(wu(s,l),s=l.pendingProps,S=y._init,y=S(y._payload),l.type=y,S=l.tag=_b(y),s=un(y,s),S){case 0:l=ic(null,l,y,s,v);break e;case 1:l=ng(null,l,y,s,v);break e;case 11:l=Qp(null,l,y,s,v);break e;case 14:l=Jp(null,l,y,un(y.type,s),v);break e}throw Error(t(306,y,""))}return l;case 0:return y=l.type,S=l.pendingProps,S=l.elementType===y?S:un(y,S),ic(s,l,y,S,v);case 1:return y=l.type,S=l.pendingProps,S=l.elementType===y?S:un(y,S),ng(s,l,y,S,v);case 3:e:{if(ag(l),s===null)throw Error(t(387));y=l.pendingProps,P=l.memoizedState,S=P.element,wp(s,l),fu(l,y,null,v);var j=l.memoizedState;if(y=j.element,P.isDehydrated)if(P={element:y,isDehydrated:!1,cache:j.cache,pendingSuspenseBoundaries:j.pendingSuspenseBoundaries,transitions:j.transitions},l.updateQueue.baseState=P,l.memoizedState=P,l.flags&256){S=Ti(Error(t(423)),l),l=ig(s,l,y,v,S);break e}else if(y!==S){S=Ti(Error(t(424)),l),l=ig(s,l,y,v,S);break e}else for(Wr=Qn(l.stateNode.containerInfo.firstChild),qr=l,Bt=!0,on=null,v=mp(l,null,y,v),l.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling;else{if(_i(),y===S){l=Nn(s,l,v);break e}kr(s,l,y,v)}l=l.child}return l;case 5:return _p(l),s===null&&Nf(l),y=l.type,S=l.pendingProps,P=s!==null?s.memoizedProps:null,j=S.children,Cf(y,S)?j=null:P!==null&&Cf(y,P)&&(l.flags|=32),rg(s,l),kr(s,l,j,v),l.child;case 6:return s===null&&Nf(l),null;case 13:return sg(s,l,v);case 4:return jf(l,l.stateNode.containerInfo),y=l.pendingProps,s===null?l.child=Ei(l,null,y,v):kr(s,l,y,v),l.child;case 11:return y=l.type,S=l.pendingProps,S=l.elementType===y?S:un(y,S),Qp(s,l,y,S,v);case 7:return kr(s,l,l.pendingProps,v),l.child;case 8:return kr(s,l,l.pendingProps.children,v),l.child;case 12:return kr(s,l,l.pendingProps.children,v),l.child;case 10:e:{if(y=l.type._context,S=l.pendingProps,P=l.memoizedProps,j=S.value,xt(ou,y._currentValue),y._currentValue=j,P!==null)if(sn(P.value,j)){if(P.children===S.children&&!Ar.current){l=Nn(s,l,v);break e}}else for(P=l.child,P!==null&&(P.return=l);P!==null;){var re=P.dependencies;if(re!==null){j=P.child;for(var ue=re.firstContext;ue!==null;){if(ue.context===y){if(P.tag===1){ue=Ln(-1,v&-v),ue.tag=2;var Ce=P.updateQueue;if(Ce!==null){Ce=Ce.shared;var Ne=Ce.pending;Ne===null?ue.next=ue:(ue.next=Ne.next,Ne.next=ue),Ce.pending=ue}}P.lanes|=v,ue=P.alternate,ue!==null&&(ue.lanes|=v),Uf(P.return,v,l),re.lanes|=v;break}ue=ue.next}}else if(P.tag===10)j=P.type===l.type?null:P.child;else if(P.tag===18){if(j=P.return,j===null)throw Error(t(341));j.lanes|=v,re=j.alternate,re!==null&&(re.lanes|=v),Uf(j,v,l),j=P.sibling}else j=P.child;if(j!==null)j.return=P;else for(j=P;j!==null;){if(j===l){j=null;break}if(P=j.sibling,P!==null){P.return=j.return,j=P;break}j=j.return}P=j}kr(s,l,S.children,v),l=l.child}return l;case 9:return S=l.type,y=l.pendingProps.children,ki(l,v),S=Xr(S),y=y(S),l.flags|=1,kr(s,l,y,v),l.child;case 14:return y=l.type,S=un(y,l.pendingProps),S=un(y.type,S),Jp(s,l,y,S,v);case 15:return eg(s,l,l.type,l.pendingProps,v);case 17:return y=l.type,S=l.pendingProps,S=l.elementType===y?S:un(y,S),wu(s,l),l.tag=1,Dr(y)?(s=!0,tu(l)):s=!1,ki(l,v),Wp(l,y,S),rc(l,y,S,v),sc(null,l,y,!0,s,v);case 19:return ug(s,l,v);case 22:return tg(s,l,v)}throw Error(t(156,l.tag))};function Dg(s,l){return is(s,l)}function bb(s,l,v,y){this.tag=s,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jr(s,l,v,y){return new bb(s,l,v,y)}function Cc(s){return s=s.prototype,!(!s||!s.isReactComponent)}function _b(s){if(typeof s=="function")return Cc(s)?1:0;if(s!=null){if(s=s.$$typeof,s===I)return 11;if(s===H)return 14}return 2}function la(s,l){var v=s.alternate;return v===null?(v=Jr(s.tag,l,s.key,s.mode),v.elementType=s.elementType,v.type=s.type,v.stateNode=s.stateNode,v.alternate=s,s.alternate=v):(v.pendingProps=l,v.type=s.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=s.flags&14680064,v.childLanes=s.childLanes,v.lanes=s.lanes,v.child=s.child,v.memoizedProps=s.memoizedProps,v.memoizedState=s.memoizedState,v.updateQueue=s.updateQueue,l=s.dependencies,v.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},v.sibling=s.sibling,v.index=s.index,v.ref=s.ref,v}function Bu(s,l,v,y,S,P){var j=2;if(y=s,typeof s=="function")Cc(s)&&(j=1);else if(typeof s=="string")j=5;else e:switch(s){case A:return qa(v.children,S,P,l);case z:j=8,S|=8;break;case M:return s=Jr(12,v,l,S|2),s.elementType=M,s.lanes=P,s;case F:return s=Jr(13,v,l,S),s.elementType=F,s.lanes=P,s;case T:return s=Jr(19,v,l,S),s.elementType=T,s.lanes=P,s;case W:return Au(v,S,P,l);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case V:j=10;break e;case q:j=9;break e;case I:j=11;break e;case H:j=14;break e;case Q:j=16,y=null;break e}throw Error(t(130,s==null?s:typeof s,""))}return l=Jr(j,v,l,S),l.elementType=s,l.type=y,l.lanes=P,l}function qa(s,l,v,y){return s=Jr(7,s,y,l),s.lanes=v,s}function Au(s,l,v,y){return s=Jr(22,s,y,l),s.elementType=W,s.lanes=v,s.stateNode={isHidden:!1},s}function Tc(s,l,v){return s=Jr(6,s,null,l),s.lanes=v,s}function Pc(s,l,v){return l=Jr(4,s.children!==null?s.children:[],s.key,l),l.lanes=v,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}function Eb(s,l,v,y,S){this.tag=l,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ef(0),this.expirationTimes=ef(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ef(0),this.identifierPrefix=y,this.onRecoverableError=S,this.mutableSourceEagerHydrationData=null}function Rc(s,l,v,y,S,P,j,re,ue){return s=new Eb(s,l,v,re,ue),l===1?(l=1,P===!0&&(l|=8)):l=0,P=Jr(3,null,null,l),s.current=P,P.stateNode=s,P.memoizedState={element:y,isDehydrated:v,cache:null,transitions:null,pendingSuspenseBoundaries:null},Vf(P),s}function Sb(s,l,v){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:N,key:y==null?null:""+y,children:s,containerInfo:l,implementation:v}}function Ig(s){if(!s)return ea;s=s._reactInternals;e:{if(Er(s)!==s||s.tag!==1)throw Error(t(170));var l=s;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(Dr(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(t(171))}if(s.tag===1){var v=s.type;if(Dr(v))return op(s,v,l)}return l}function Lg(s,l,v,y,S,P,j,re,ue){return s=Rc(v,y,!0,s,S,P,j,re,ue),s.context=Ig(null),v=s.current,y=Cr(),S=oa(v),P=Ln(y,S),P.callback=l??null,na(v,P,S),s.current.lanes=S,ls(s,S,y),Nr(s,y),s}function Du(s,l,v,y){var S=l.current,P=Cr(),j=oa(S);return v=Ig(v),l.context===null?l.context=v:l.pendingContext=v,l=Ln(P,j),l.payload={element:s},y=y===void 0?null:y,y!==null&&(l.callback=y),s=na(S,l,j),s!==null&&(cn(s,S,j,P),lu(s,S,j)),j}function Iu(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function Ng(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var v=s.retryLane;s.retryLane=v!==0&&v<l?v:l}}function Bc(s,l){Ng(s,l),(s=s.alternate)&&Ng(s,l)}function kb(){return null}var Og=typeof reportError=="function"?reportError:function(s){console.error(s)};function Ac(s){this._internalRoot=s}Lu.prototype.render=Ac.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(t(409));Du(s,l,null,null)},Lu.prototype.unmount=Ac.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;$a(function(){Du(null,s,null,null)}),l[Rn]=null}};function Lu(s){this._internalRoot=s}Lu.prototype.unstable_scheduleHydration=function(s){if(s){var l=wv();s={blockedOn:null,target:s,priority:l};for(var v=0;v<Zn.length&&l!==0&&l<Zn[v].priority;v++);Zn.splice(v,0,s),v===0&&_v(s)}};function Dc(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function Nu(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function Mg(){}function Cb(s,l,v,y,S){if(S){if(typeof y=="function"){var P=y;y=function(){var Ce=Iu(j);P.call(Ce)}}var j=Lg(l,y,s,0,null,!1,!1,"",Mg);return s._reactRootContainer=j,s[Rn]=j.current,Es(s.nodeType===8?s.parentNode:s),$a(),j}for(;S=s.lastChild;)s.removeChild(S);if(typeof y=="function"){var re=y;y=function(){var Ce=Iu(ue);re.call(Ce)}}var ue=Rc(s,0,!1,null,null,!1,!1,"",Mg);return s._reactRootContainer=ue,s[Rn]=ue.current,Es(s.nodeType===8?s.parentNode:s),$a(function(){Du(l,ue,v,y)}),ue}function Ou(s,l,v,y,S){var P=v._reactRootContainer;if(P){var j=P;if(typeof S=="function"){var re=S;S=function(){var ue=Iu(j);re.call(ue)}}Du(l,j,s,S)}else j=Cb(v,l,s,S,y);return Iu(j)}mv=function(s){switch(s.tag){case 3:var l=s.stateNode;if(l.current.memoizedState.isDehydrated){var v=ui(l.pendingLanes);v!==0&&(tf(l,v|1),Nr(l,Lt()),(ft&6)===0&&(Bi=Lt()+500,ta()))}break;case 13:$a(function(){var y=In(s,1);if(y!==null){var S=Cr();cn(y,s,1,S)}}),Bc(s,1)}},rf=function(s){if(s.tag===13){var l=In(s,134217728);if(l!==null){var v=Cr();cn(l,s,134217728,v)}Bc(s,134217728)}},yv=function(s){if(s.tag===13){var l=oa(s),v=In(s,l);if(v!==null){var y=Cr();cn(v,s,l,y)}Bc(s,l)}},wv=function(){return mt},xv=function(s,l){var v=mt;try{return mt=s,l()}finally{mt=v}},We=function(s,l,v){switch(l){case"input":if(Y(s,v),l=v.name,v.type==="radio"&&l!=null){for(v=s;v.parentNode;)v=v.parentNode;for(v=v.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<v.length;l++){var y=v[l];if(y!==s&&y.form===s.form){var S=Jo(y);if(!S)throw Error(t(90));be(y),Y(y,S)}}}break;case"textarea":De(s,v);break;case"select":l=v.value,l!=null&&me(s,!!v.multiple,l,!1)}},it=Ec,at=$a;var Tb={usingClientEntryPoint:!1,Events:[Cs,mi,Jo,nt,Ke,Ec]},Us={findFiberByHostInstance:Ia,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Pb={bundleType:Us.bundleType,version:Us.version,rendererPackageName:Us.rendererPackageName,rendererConfig:Us.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:C.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=Wn(s),s===null?null:s.stateNode},findFiberByHostInstance:Us.findFiberByHostInstance||kb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mu.isDisabled&&Mu.supportsFiber)try{Aa=Mu.inject(Pb),Vr=Mu}catch{}}return Or.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Tb,Or.createPortal=function(s,l){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Dc(l))throw Error(t(200));return Sb(s,l,null,v)},Or.createRoot=function(s,l){if(!Dc(s))throw Error(t(299));var v=!1,y="",S=Og;return l!=null&&(l.unstable_strictMode===!0&&(v=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(S=l.onRecoverableError)),l=Rc(s,1,!1,null,null,v,!1,y,S),s[Rn]=l.current,Es(s.nodeType===8?s.parentNode:s),new Ac(l)},Or.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(t(188)):(s=Object.keys(s).join(","),Error(t(268,s)));return s=Wn(l),s=s===null?null:s.stateNode,s},Or.flushSync=function(s){return $a(s)},Or.hydrate=function(s,l,v){if(!Nu(l))throw Error(t(200));return Ou(null,s,l,!0,v)},Or.hydrateRoot=function(s,l,v){if(!Dc(s))throw Error(t(405));var y=v!=null&&v.hydratedSources||null,S=!1,P="",j=Og;if(v!=null&&(v.unstable_strictMode===!0&&(S=!0),v.identifierPrefix!==void 0&&(P=v.identifierPrefix),v.onRecoverableError!==void 0&&(j=v.onRecoverableError)),l=Lg(l,null,s,1,v??null,S,!1,P,j),s[Rn]=l.current,Es(s),y)for(s=0;s<y.length;s++)v=y[s],S=v._getVersion,S=S(v._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[v,S]:l.mutableSourceEagerHydrationData.push(v,S);return new Lu(l)},Or.render=function(s,l,v){if(!Nu(l))throw Error(t(200));return Ou(null,s,l,!1,v)},Or.unmountComponentAtNode=function(s){if(!Nu(s))throw Error(t(40));return s._reactRootContainer?($a(function(){Ou(null,null,s,!1,function(){s._reactRootContainer=null,s[Rn]=null})}),!0):!1},Or.unstable_batchedUpdates=Ec,Or.unstable_renderSubtreeIntoContainer=function(s,l,v,y){if(!Nu(v))throw Error(t(200));if(s==null||s._reactInternals===void 0)throw Error(t(38));return Ou(s,l,v,!1,y)},Or.version="18.3.1-next-f1338f8080-20240426",Or}var Wg;function Ob(){if(Wg)return Nc.exports;Wg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Nc.exports=Nb(),Nc.exports}var Hg;function Mb(){if(Hg)return Fu;Hg=1;var r=Ob();return Fu.createRoot=r.createRoot,Fu.hydrateRoot=r.hydrateRoot,Fu}var zb=Mb();const Fb=Bl(zb),Ub={},Gg=r=>{let e;const t=new Set,n=(d,h)=>{const p=typeof d=="function"?d(e):d;if(!Object.is(p,e)){const g=e;e=h??(typeof p!="object"||p===null)?p:Object.assign({},e,p),t.forEach(m=>m(e,g))}},a=()=>e,f={setState:n,getState:a,getInitialState:()=>c,subscribe:d=>(t.add(d),()=>t.delete(d)),destroy:()=>{(Ub?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},c=e=r(n,a,f);return f},$b=r=>r?Gg(r):Gg;var zc={exports:{}},Fc={},Uc={exports:{}},$c={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kg;function Vb(){if(Kg)return $c;Kg=1;var r=bo();function e(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var t=typeof Object.is=="function"?Object.is:e,n=r.useState,a=r.useEffect,i=r.useLayoutEffect,o=r.useDebugValue;function u(h,p){var g=p(),m=n({inst:{value:g,getSnapshot:p}}),w=m[0].inst,x=m[1];return i(function(){w.value=g,w.getSnapshot=p,f(w)&&x({inst:w})},[h,g,p]),a(function(){return f(w)&&x({inst:w}),h(function(){f(w)&&x({inst:w})})},[h]),o(g),g}function f(h){var p=h.getSnapshot;h=h.value;try{var g=p();return!t(h,g)}catch{return!0}}function c(h,p){return p()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:u;return $c.useSyncExternalStore=r.useSyncExternalStore!==void 0?r.useSyncExternalStore:d,$c}var Zg;function jb(){return Zg||(Zg=1,Uc.exports=Vb()),Uc.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xg;function qb(){if(Xg)return Fc;Xg=1;var r=bo(),e=jb();function t(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var n=typeof Object.is=="function"?Object.is:t,a=e.useSyncExternalStore,i=r.useRef,o=r.useEffect,u=r.useMemo,f=r.useDebugValue;return Fc.useSyncExternalStoreWithSelector=function(c,d,h,p,g){var m=i(null);if(m.current===null){var w={hasValue:!1,value:null};m.current=w}else w=m.current;m=u(function(){function b(N){if(!_){if(_=!0,E=N,N=p(N),g!==void 0&&w.hasValue){var A=w.value;if(g(A,N))return C=A}return C=N}if(A=C,n(E,N))return A;var z=p(N);return g!==void 0&&g(A,z)?(E=N,A):(E=N,C=z)}var _=!1,E,C,B=h===void 0?null:h;return[function(){return b(d())},B===null?void 0:function(){return b(B())}]},[d,h,p,g]);var x=a(c,m[0],m[1]);return o(function(){w.hasValue=!0,w.value=x},[x]),f(x),x},Fc}var Yg;function Wb(){return Yg||(Yg=1,zc.exports=qb()),zc.exports}var Hb=Wb();const Gb=Bl(Hb),V0={},{useDebugValue:Kb}=$0,{useSyncExternalStoreWithSelector:Zb}=Gb;let Qg=!1;const Xb=r=>r;function Yb(r,e=Xb,t){(V0?"production":void 0)!=="production"&&t&&!Qg&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Qg=!0);const n=Zb(r.subscribe,r.getState,r.getServerState||r.getInitialState,e,t);return Kb(n),n}const Jg=r=>{(V0?"production":void 0)!=="production"&&typeof r!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof r=="function"?$b(r):r,t=(n,a)=>Yb(e,n,a);return Object.assign(t,e),t},Qb=r=>r?Jg(r):Jg,j0=["Theorem","Lemma","Corollary","Definition","Formula","Axiom","Proposition","Conclusion"],q0=["Proves","DependsOn","DerivedFrom","Contains","EquivalentTo","AppliesTo","Uses","AssistsIn"],Jb=[...j0],e2=[...q0],em={nodes:[],edges:[]},lt=Qb((r,e)=>({graph:em,assets:{},latexFiles:[],schema:{entityTypes:Jb,relationTypes:e2,notes:""},llm:{enabled:!1,protocol:"openai",baseUrl:"https://api.openai.com/v1",model:"gpt-5",apiKey:"",temperature:.2,topP:.9},processing:{status:"idle",totalChunks:0,doneChunks:0},lastError:null,lastInfo:null,setInfo:t=>r({lastInfo:t}),setError:t=>r({lastError:t}),setSchema:t=>r({schema:{...e().schema,...t}}),setLlm:t=>r({llm:{...e().llm,...t}}),setLatexFiles:t=>r({latexFiles:t}),setAssets:t=>r({assets:t}),setGraph:t=>r({graph:t}),mergeGraph:t=>r(n=>({graph:{nodes:t.nodes?t2(n.graph.nodes,t.nodes):n.graph.nodes,edges:t.edges?r2(n.graph.edges,t.edges):n.graph.edges}})),setProcessing:t=>r({processing:{...e().processing,...t}}),stopProcessing:()=>{const t=e().processing.abortController;t&&t.abort(),r({processing:{...e().processing,status:"stopped",abortController:void 0}})},resetAll:()=>{const t=e().assets;for(const n of Object.values(t))URL.revokeObjectURL(n);r({graph:em,assets:{},latexFiles:[],processing:{status:"idle",totalChunks:0,doneChunks:0},lastError:null,lastInfo:null})}}));function t2(r,e){const t=new Map(r.map(n=>[n.id,n]));for(const n of e){const a=t.get(n.id);t.set(n.id,a?{...a,...n,meta:{...a.meta,...n.meta}}:n)}return[...t.values()]}function r2(r,e){const t=a=>{var i;return`${a.source}::${a.type}::${a.target}${(i=a.meta)!=null&&i.chunkId?`::${a.meta.chunkId}`:""}`},n=new Map(r.map(a=>[t(a),a]));for(const a of e){const i=t(a),o=n.get(i);n.set(i,o?{...o,...a,meta:{...o.meta,...a.meta}}:a)}return[...n.values()]}function Uu(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Vc={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var tm;function n2(){return tm||(tm=1,(function(r,e){(function(t){r.exports=t()})(function(){return(function t(n,a,i){function o(c,d){if(!a[c]){if(!n[c]){var h=typeof Uu=="function"&&Uu;if(!d&&h)return h(c,!0);if(u)return u(c,!0);var p=new Error("Cannot find module '"+c+"'");throw p.code="MODULE_NOT_FOUND",p}var g=a[c]={exports:{}};n[c][0].call(g.exports,function(m){var w=n[c][1][m];return o(w||m)},g,g.exports,t,n,a,i)}return a[c].exports}for(var u=typeof Uu=="function"&&Uu,f=0;f<i.length;f++)o(i[f]);return o})({1:[function(t,n,a){var i=t("./utils"),o=t("./support"),u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.encode=function(f){for(var c,d,h,p,g,m,w,x=[],b=0,_=f.length,E=_,C=i.getTypeOf(f)!=="string";b<f.length;)E=_-b,h=C?(c=f[b++],d=b<_?f[b++]:0,b<_?f[b++]:0):(c=f.charCodeAt(b++),d=b<_?f.charCodeAt(b++):0,b<_?f.charCodeAt(b++):0),p=c>>2,g=(3&c)<<4|d>>4,m=1<E?(15&d)<<2|h>>6:64,w=2<E?63&h:64,x.push(u.charAt(p)+u.charAt(g)+u.charAt(m)+u.charAt(w));return x.join("")},a.decode=function(f){var c,d,h,p,g,m,w=0,x=0,b="data:";if(f.substr(0,b.length)===b)throw new Error("Invalid base64 input, it looks like a data url.");var _,E=3*(f=f.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(f.charAt(f.length-1)===u.charAt(64)&&E--,f.charAt(f.length-2)===u.charAt(64)&&E--,E%1!=0)throw new Error("Invalid base64 input, bad content length.");for(_=o.uint8array?new Uint8Array(0|E):new Array(0|E);w<f.length;)c=u.indexOf(f.charAt(w++))<<2|(p=u.indexOf(f.charAt(w++)))>>4,d=(15&p)<<4|(g=u.indexOf(f.charAt(w++)))>>2,h=(3&g)<<6|(m=u.indexOf(f.charAt(w++))),_[x++]=c,g!==64&&(_[x++]=d),m!==64&&(_[x++]=h);return _}},{"./support":30,"./utils":32}],2:[function(t,n,a){var i=t("./external"),o=t("./stream/DataWorker"),u=t("./stream/Crc32Probe"),f=t("./stream/DataLengthProbe");function c(d,h,p,g,m){this.compressedSize=d,this.uncompressedSize=h,this.crc32=p,this.compression=g,this.compressedContent=m}c.prototype={getContentWorker:function(){var d=new o(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new f("data_length")),h=this;return d.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),d},getCompressedWorker:function(){return new o(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(d,h,p){return d.pipe(new u).pipe(new f("uncompressedSize")).pipe(h.compressWorker(p)).pipe(new f("compressedSize")).withStreamInfo("compression",h)},n.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,n,a){var i=t("./stream/GenericWorker");a.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},a.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,n,a){var i=t("./utils"),o=(function(){for(var u,f=[],c=0;c<256;c++){u=c;for(var d=0;d<8;d++)u=1&u?3988292384^u>>>1:u>>>1;f[c]=u}return f})();n.exports=function(u,f){return u!==void 0&&u.length?i.getTypeOf(u)!=="string"?(function(c,d,h,p){var g=o,m=p+h;c^=-1;for(var w=p;w<m;w++)c=c>>>8^g[255&(c^d[w])];return-1^c})(0|f,u,u.length,0):(function(c,d,h,p){var g=o,m=p+h;c^=-1;for(var w=p;w<m;w++)c=c>>>8^g[255&(c^d.charCodeAt(w))];return-1^c})(0|f,u,u.length,0):0}},{"./utils":32}],5:[function(t,n,a){a.base64=!1,a.binary=!1,a.dir=!1,a.createFolders=!0,a.date=null,a.compression=null,a.compressionOptions=null,a.comment=null,a.unixPermissions=null,a.dosPermissions=null},{}],6:[function(t,n,a){var i=null;i=typeof Promise<"u"?Promise:t("lie"),n.exports={Promise:i}},{lie:37}],7:[function(t,n,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=t("pako"),u=t("./utils"),f=t("./stream/GenericWorker"),c=i?"uint8array":"array";function d(h,p){f.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=p,this.meta={}}a.magic="\b\0",u.inherits(d,f),d.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(u.transformTo(c,h.data),!1)},d.prototype.flush=function(){f.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},d.prototype.cleanUp=function(){f.prototype.cleanUp.call(this),this._pako=null},d.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(p){h.push({data:p,meta:h.meta})}},a.compressWorker=function(h){return new d("Deflate",h)},a.uncompressWorker=function(){return new d("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,n,a){function i(g,m){var w,x="";for(w=0;w<m;w++)x+=String.fromCharCode(255&g),g>>>=8;return x}function o(g,m,w,x,b,_){var E,C,B=g.file,N=g.compression,A=_!==c.utf8encode,z=u.transformTo("string",_(B.name)),M=u.transformTo("string",c.utf8encode(B.name)),V=B.comment,q=u.transformTo("string",_(V)),I=u.transformTo("string",c.utf8encode(V)),F=M.length!==B.name.length,T=I.length!==V.length,H="",Q="",W="",Z=B.dir,X=B.date,te={crc32:0,compressedSize:0,uncompressedSize:0};m&&!w||(te.crc32=g.crc32,te.compressedSize=g.compressedSize,te.uncompressedSize=g.uncompressedSize);var L=0;m&&(L|=8),A||!F&&!T||(L|=2048);var U=0,oe=0;Z&&(U|=16),b==="UNIX"?(oe=798,U|=(function(ne,we){var Te=ne;return ne||(Te=we?16893:33204),(65535&Te)<<16})(B.unixPermissions,Z)):(oe=20,U|=(function(ne){return 63&(ne||0)})(B.dosPermissions)),E=X.getUTCHours(),E<<=6,E|=X.getUTCMinutes(),E<<=5,E|=X.getUTCSeconds()/2,C=X.getUTCFullYear()-1980,C<<=4,C|=X.getUTCMonth()+1,C<<=5,C|=X.getUTCDate(),F&&(Q=i(1,1)+i(d(z),4)+M,H+="up"+i(Q.length,2)+Q),T&&(W=i(1,1)+i(d(q),4)+I,H+="uc"+i(W.length,2)+W);var ie="";return ie+=`
\0`,ie+=i(L,2),ie+=N.magic,ie+=i(E,2),ie+=i(C,2),ie+=i(te.crc32,4),ie+=i(te.compressedSize,4),ie+=i(te.uncompressedSize,4),ie+=i(z.length,2),ie+=i(H.length,2),{fileRecord:h.LOCAL_FILE_HEADER+ie+z+H,dirRecord:h.CENTRAL_FILE_HEADER+i(oe,2)+ie+i(q.length,2)+"\0\0\0\0"+i(U,4)+i(x,4)+z+H+q}}var u=t("../utils"),f=t("../stream/GenericWorker"),c=t("../utf8"),d=t("../crc32"),h=t("../signature");function p(g,m,w,x){f.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=m,this.zipPlatform=w,this.encodeFileName=x,this.streamFiles=g,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}u.inherits(p,f),p.prototype.push=function(g){var m=g.meta.percent||0,w=this.entriesCount,x=this._sources.length;this.accumulate?this.contentBuffer.push(g):(this.bytesWritten+=g.data.length,f.prototype.push.call(this,{data:g.data,meta:{currentFile:this.currentFile,percent:w?(m+100*(w-x-1))/w:100}}))},p.prototype.openedSource=function(g){this.currentSourceOffset=this.bytesWritten,this.currentFile=g.file.name;var m=this.streamFiles&&!g.file.dir;if(m){var w=o(g,m,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:w.fileRecord,meta:{percent:0}})}else this.accumulate=!0},p.prototype.closedSource=function(g){this.accumulate=!1;var m=this.streamFiles&&!g.file.dir,w=o(g,m,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(w.dirRecord),m)this.push({data:(function(x){return h.DATA_DESCRIPTOR+i(x.crc32,4)+i(x.compressedSize,4)+i(x.uncompressedSize,4)})(g),meta:{percent:100}});else for(this.push({data:w.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},p.prototype.flush=function(){for(var g=this.bytesWritten,m=0;m<this.dirRecords.length;m++)this.push({data:this.dirRecords[m],meta:{percent:100}});var w=this.bytesWritten-g,x=(function(b,_,E,C,B){var N=u.transformTo("string",B(C));return h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(b,2)+i(b,2)+i(_,4)+i(E,4)+i(N.length,2)+N})(this.dirRecords.length,w,g,this.zipComment,this.encodeFileName);this.push({data:x,meta:{percent:100}})},p.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},p.prototype.registerPrevious=function(g){this._sources.push(g);var m=this;return g.on("data",function(w){m.processChunk(w)}),g.on("end",function(){m.closedSource(m.previous.streamInfo),m._sources.length?m.prepareNextSource():m.end()}),g.on("error",function(w){m.error(w)}),this},p.prototype.resume=function(){return!!f.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},p.prototype.error=function(g){var m=this._sources;if(!f.prototype.error.call(this,g))return!1;for(var w=0;w<m.length;w++)try{m[w].error(g)}catch{}return!0},p.prototype.lock=function(){f.prototype.lock.call(this);for(var g=this._sources,m=0;m<g.length;m++)g[m].lock()},n.exports=p},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,n,a){var i=t("../compressions"),o=t("./ZipFileWorker");a.generateWorker=function(u,f,c){var d=new o(f.streamFiles,c,f.platform,f.encodeFileName),h=0;try{u.forEach(function(p,g){h++;var m=(function(_,E){var C=_||E,B=i[C];if(!B)throw new Error(C+" is not a valid compression method !");return B})(g.options.compression,f.compression),w=g.options.compressionOptions||f.compressionOptions||{},x=g.dir,b=g.date;g._compressWorker(m,w).withStreamInfo("file",{name:p,dir:x,date:b,comment:g.comment||"",unixPermissions:g.unixPermissions,dosPermissions:g.dosPermissions}).pipe(d)}),d.entriesCount=h}catch(p){d.error(p)}return d}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,n,a){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new i;for(var u in this)typeof this[u]!="function"&&(o[u]=this[u]);return o}}(i.prototype=t("./object")).loadAsync=t("./load"),i.support=t("./support"),i.defaults=t("./defaults"),i.version="3.10.1",i.loadAsync=function(o,u){return new i().loadAsync(o,u)},i.external=t("./external"),n.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,n,a){var i=t("./utils"),o=t("./external"),u=t("./utf8"),f=t("./zipEntries"),c=t("./stream/Crc32Probe"),d=t("./nodejsUtils");function h(p){return new o.Promise(function(g,m){var w=p.decompressed.getContentWorker().pipe(new c);w.on("error",function(x){m(x)}).on("end",function(){w.streamInfo.crc32!==p.decompressed.crc32?m(new Error("Corrupted zip : CRC32 mismatch")):g()}).resume()})}n.exports=function(p,g){var m=this;return g=i.extend(g||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:u.utf8decode}),d.isNode&&d.isStream(p)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",p,!0,g.optimizedBinaryString,g.base64).then(function(w){var x=new f(g);return x.load(w),x}).then(function(w){var x=[o.Promise.resolve(w)],b=w.files;if(g.checkCRC32)for(var _=0;_<b.length;_++)x.push(h(b[_]));return o.Promise.all(x)}).then(function(w){for(var x=w.shift(),b=x.files,_=0;_<b.length;_++){var E=b[_],C=E.fileNameStr,B=i.resolve(E.fileNameStr);m.file(B,E.decompressed,{binary:!0,optimizedBinaryString:!0,date:E.date,dir:E.dir,comment:E.fileCommentStr.length?E.fileCommentStr:null,unixPermissions:E.unixPermissions,dosPermissions:E.dosPermissions,createFolders:g.createFolders}),E.dir||(m.file(B).unsafeOriginalName=C)}return x.zipComment.length&&(m.comment=x.zipComment),m})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,n,a){var i=t("../utils"),o=t("../stream/GenericWorker");function u(f,c){o.call(this,"Nodejs stream input adapter for "+f),this._upstreamEnded=!1,this._bindStream(c)}i.inherits(u,o),u.prototype._bindStream=function(f){var c=this;(this._stream=f).pause(),f.on("data",function(d){c.push({data:d,meta:{percent:0}})}).on("error",function(d){c.isPaused?this.generatedError=d:c.error(d)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},u.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},u.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=u},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,n,a){var i=t("readable-stream").Readable;function o(u,f,c){i.call(this,f),this._helper=u;var d=this;u.on("data",function(h,p){d.push(h)||d._helper.pause(),c&&c(p)}).on("error",function(h){d.emit("error",h)}).on("end",function(){d.push(null)})}t("../utils").inherits(o,i),o.prototype._read=function(){this._helper.resume()},n.exports=o},{"../utils":32,"readable-stream":16}],14:[function(t,n,a){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,o);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,o)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var o=new Buffer(i);return o.fill(0),o},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(t,n,a){function i(B,N,A){var z,M=u.getTypeOf(N),V=u.extend(A||{},d);V.date=V.date||new Date,V.compression!==null&&(V.compression=V.compression.toUpperCase()),typeof V.unixPermissions=="string"&&(V.unixPermissions=parseInt(V.unixPermissions,8)),V.unixPermissions&&16384&V.unixPermissions&&(V.dir=!0),V.dosPermissions&&16&V.dosPermissions&&(V.dir=!0),V.dir&&(B=b(B)),V.createFolders&&(z=x(B))&&_.call(this,z,!0);var q=M==="string"&&V.binary===!1&&V.base64===!1;A&&A.binary!==void 0||(V.binary=!q),(N instanceof h&&N.uncompressedSize===0||V.dir||!N||N.length===0)&&(V.base64=!1,V.binary=!0,N="",V.compression="STORE",M="string");var I=null;I=N instanceof h||N instanceof f?N:m.isNode&&m.isStream(N)?new w(B,N):u.prepareContent(B,N,V.binary,V.optimizedBinaryString,V.base64);var F=new p(B,I,V);this.files[B]=F}var o=t("./utf8"),u=t("./utils"),f=t("./stream/GenericWorker"),c=t("./stream/StreamHelper"),d=t("./defaults"),h=t("./compressedObject"),p=t("./zipObject"),g=t("./generate"),m=t("./nodejsUtils"),w=t("./nodejs/NodejsStreamInputAdapter"),x=function(B){B.slice(-1)==="/"&&(B=B.substring(0,B.length-1));var N=B.lastIndexOf("/");return 0<N?B.substring(0,N):""},b=function(B){return B.slice(-1)!=="/"&&(B+="/"),B},_=function(B,N){return N=N!==void 0?N:d.createFolders,B=b(B),this.files[B]||i.call(this,B,null,{dir:!0,createFolders:N}),this.files[B]};function E(B){return Object.prototype.toString.call(B)==="[object RegExp]"}var C={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(B){var N,A,z;for(N in this.files)z=this.files[N],(A=N.slice(this.root.length,N.length))&&N.slice(0,this.root.length)===this.root&&B(A,z)},filter:function(B){var N=[];return this.forEach(function(A,z){B(A,z)&&N.push(z)}),N},file:function(B,N,A){if(arguments.length!==1)return B=this.root+B,i.call(this,B,N,A),this;if(E(B)){var z=B;return this.filter(function(V,q){return!q.dir&&z.test(V)})}var M=this.files[this.root+B];return M&&!M.dir?M:null},folder:function(B){if(!B)return this;if(E(B))return this.filter(function(M,V){return V.dir&&B.test(M)});var N=this.root+B,A=_.call(this,N),z=this.clone();return z.root=A.name,z},remove:function(B){B=this.root+B;var N=this.files[B];if(N||(B.slice(-1)!=="/"&&(B+="/"),N=this.files[B]),N&&!N.dir)delete this.files[B];else for(var A=this.filter(function(M,V){return V.name.slice(0,B.length)===B}),z=0;z<A.length;z++)delete this.files[A[z].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(B){var N,A={};try{if((A=u.extend(B||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=A.type.toLowerCase(),A.compression=A.compression.toUpperCase(),A.type==="binarystring"&&(A.type="string"),!A.type)throw new Error("No output type specified.");u.checkSupport(A.type),A.platform!=="darwin"&&A.platform!=="freebsd"&&A.platform!=="linux"&&A.platform!=="sunos"||(A.platform="UNIX"),A.platform==="win32"&&(A.platform="DOS");var z=A.comment||this.comment||"";N=g.generateWorker(this,A,z)}catch(M){(N=new f("error")).error(M)}return new c(N,A.type||"string",A.mimeType)},generateAsync:function(B,N){return this.generateInternalStream(B).accumulate(N)},generateNodeStream:function(B,N){return(B=B||{}).type||(B.type="nodebuffer"),this.generateInternalStream(B).toNodejsStream(N)}};n.exports=C},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,n,a){n.exports=t("stream")},{stream:void 0}],17:[function(t,n,a){var i=t("./DataReader");function o(u){i.call(this,u);for(var f=0;f<this.data.length;f++)u[f]=255&u[f]}t("../utils").inherits(o,i),o.prototype.byteAt=function(u){return this.data[this.zero+u]},o.prototype.lastIndexOfSignature=function(u){for(var f=u.charCodeAt(0),c=u.charCodeAt(1),d=u.charCodeAt(2),h=u.charCodeAt(3),p=this.length-4;0<=p;--p)if(this.data[p]===f&&this.data[p+1]===c&&this.data[p+2]===d&&this.data[p+3]===h)return p-this.zero;return-1},o.prototype.readAndCheckSignature=function(u){var f=u.charCodeAt(0),c=u.charCodeAt(1),d=u.charCodeAt(2),h=u.charCodeAt(3),p=this.readData(4);return f===p[0]&&c===p[1]&&d===p[2]&&h===p[3]},o.prototype.readData=function(u){if(this.checkOffset(u),u===0)return[];var f=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,f},n.exports=o},{"../utils":32,"./DataReader":18}],18:[function(t,n,a){var i=t("../utils");function o(u){this.data=u,this.length=u.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(u){this.checkIndex(this.index+u)},checkIndex:function(u){if(this.length<this.zero+u||u<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+u+"). Corrupted zip ?")},setIndex:function(u){this.checkIndex(u),this.index=u},skip:function(u){this.setIndex(this.index+u)},byteAt:function(){},readInt:function(u){var f,c=0;for(this.checkOffset(u),f=this.index+u-1;f>=this.index;f--)c=(c<<8)+this.byteAt(f);return this.index+=u,c},readString:function(u){return i.transformTo("string",this.readData(u))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var u=this.readInt(4);return new Date(Date.UTC(1980+(u>>25&127),(u>>21&15)-1,u>>16&31,u>>11&31,u>>5&63,(31&u)<<1))}},n.exports=o},{"../utils":32}],19:[function(t,n,a){var i=t("./Uint8ArrayReader");function o(u){i.call(this,u)}t("../utils").inherits(o,i),o.prototype.readData=function(u){this.checkOffset(u);var f=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,f},n.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,n,a){var i=t("./DataReader");function o(u){i.call(this,u)}t("../utils").inherits(o,i),o.prototype.byteAt=function(u){return this.data.charCodeAt(this.zero+u)},o.prototype.lastIndexOfSignature=function(u){return this.data.lastIndexOf(u)-this.zero},o.prototype.readAndCheckSignature=function(u){return u===this.readData(4)},o.prototype.readData=function(u){this.checkOffset(u);var f=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,f},n.exports=o},{"../utils":32,"./DataReader":18}],21:[function(t,n,a){var i=t("./ArrayReader");function o(u){i.call(this,u)}t("../utils").inherits(o,i),o.prototype.readData=function(u){if(this.checkOffset(u),u===0)return new Uint8Array(0);var f=this.data.subarray(this.zero+this.index,this.zero+this.index+u);return this.index+=u,f},n.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(t,n,a){var i=t("../utils"),o=t("../support"),u=t("./ArrayReader"),f=t("./StringReader"),c=t("./NodeBufferReader"),d=t("./Uint8ArrayReader");n.exports=function(h){var p=i.getTypeOf(h);return i.checkSupport(p),p!=="string"||o.uint8array?p==="nodebuffer"?new c(h):o.uint8array?new d(i.transformTo("uint8array",h)):new u(i.transformTo("array",h)):new f(h)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,n,a){a.LOCAL_FILE_HEADER="PK",a.CENTRAL_FILE_HEADER="PK",a.CENTRAL_DIRECTORY_END="PK",a.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",a.ZIP64_CENTRAL_DIRECTORY_END="PK",a.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,n,a){var i=t("./GenericWorker"),o=t("../utils");function u(f){i.call(this,"ConvertWorker to "+f),this.destType=f}o.inherits(u,i),u.prototype.processChunk=function(f){this.push({data:o.transformTo(this.destType,f.data),meta:f.meta})},n.exports=u},{"../utils":32,"./GenericWorker":28}],25:[function(t,n,a){var i=t("./GenericWorker"),o=t("../crc32");function u(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(u,i),u.prototype.processChunk=function(f){this.streamInfo.crc32=o(f.data,this.streamInfo.crc32||0),this.push(f)},n.exports=u},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,n,a){var i=t("../utils"),o=t("./GenericWorker");function u(f){o.call(this,"DataLengthProbe for "+f),this.propName=f,this.withStreamInfo(f,0)}i.inherits(u,o),u.prototype.processChunk=function(f){if(f){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+f.data.length}o.prototype.processChunk.call(this,f)},n.exports=u},{"../utils":32,"./GenericWorker":28}],27:[function(t,n,a){var i=t("../utils"),o=t("./GenericWorker");function u(f){o.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,f.then(function(d){c.dataIsReady=!0,c.data=d,c.max=d&&d.length||0,c.type=i.getTypeOf(d),c.isPaused||c._tickAndRepeat()},function(d){c.error(d)})}i.inherits(u,o),u.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},u.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},u.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},u.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var f=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":f=this.data.substring(this.index,c);break;case"uint8array":f=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":f=this.data.slice(this.index,c)}return this.index=c,this.push({data:f,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=u},{"../utils":32,"./GenericWorker":28}],28:[function(t,n,a){function i(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,u){return this._listeners[o].push(u),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,u){if(this._listeners[o])for(var f=0;f<this._listeners[o].length;f++)this._listeners[o][f].call(this,u)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var u=this;return o.on("data",function(f){u.processChunk(f)}),o.on("end",function(){u.end()}),o.on("error",function(f){u.error(f)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,u){return this.extraStreamInfo[o]=u,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},n.exports=i},{}],29:[function(t,n,a){var i=t("../utils"),o=t("./ConvertWorker"),u=t("./GenericWorker"),f=t("../base64"),c=t("../support"),d=t("../external"),h=null;if(c.nodestream)try{h=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function p(m,w){return new d.Promise(function(x,b){var _=[],E=m._internalType,C=m._outputType,B=m._mimeType;m.on("data",function(N,A){_.push(N),w&&w(A)}).on("error",function(N){_=[],b(N)}).on("end",function(){try{var N=(function(A,z,M){switch(A){case"blob":return i.newBlob(i.transformTo("arraybuffer",z),M);case"base64":return f.encode(z);default:return i.transformTo(A,z)}})(C,(function(A,z){var M,V=0,q=null,I=0;for(M=0;M<z.length;M++)I+=z[M].length;switch(A){case"string":return z.join("");case"array":return Array.prototype.concat.apply([],z);case"uint8array":for(q=new Uint8Array(I),M=0;M<z.length;M++)q.set(z[M],V),V+=z[M].length;return q;case"nodebuffer":return Buffer.concat(z);default:throw new Error("concat : unsupported type '"+A+"'")}})(E,_),B);x(N)}catch(A){b(A)}_=[]}).resume()})}function g(m,w,x){var b=w;switch(w){case"blob":case"arraybuffer":b="uint8array";break;case"base64":b="string"}try{this._internalType=b,this._outputType=w,this._mimeType=x,i.checkSupport(b),this._worker=m.pipe(new o(b)),m.lock()}catch(_){this._worker=new u("error"),this._worker.error(_)}}g.prototype={accumulate:function(m){return p(this,m)},on:function(m,w){var x=this;return m==="data"?this._worker.on(m,function(b){w.call(x,b.data,b.meta)}):this._worker.on(m,function(){i.delay(w,arguments,x)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(m){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},m)}},n.exports=g},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,n,a){if(a.base64=!0,a.array=!0,a.string=!0,a.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",a.nodebuffer=typeof Buffer<"u",a.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")a.blob=!1;else{var i=new ArrayBuffer(0);try{a.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(i),a.blob=o.getBlob("application/zip").size===0}catch{a.blob=!1}}}try{a.nodestream=!!t("readable-stream").Readable}catch{a.nodestream=!1}},{"readable-stream":16}],31:[function(t,n,a){for(var i=t("./utils"),o=t("./support"),u=t("./nodejsUtils"),f=t("./stream/GenericWorker"),c=new Array(256),d=0;d<256;d++)c[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;c[254]=c[254]=1;function h(){f.call(this,"utf-8 decode"),this.leftOver=null}function p(){f.call(this,"utf-8 encode")}a.utf8encode=function(g){return o.nodebuffer?u.newBufferFrom(g,"utf-8"):(function(m){var w,x,b,_,E,C=m.length,B=0;for(_=0;_<C;_++)(64512&(x=m.charCodeAt(_)))==55296&&_+1<C&&(64512&(b=m.charCodeAt(_+1)))==56320&&(x=65536+(x-55296<<10)+(b-56320),_++),B+=x<128?1:x<2048?2:x<65536?3:4;for(w=o.uint8array?new Uint8Array(B):new Array(B),_=E=0;E<B;_++)(64512&(x=m.charCodeAt(_)))==55296&&_+1<C&&(64512&(b=m.charCodeAt(_+1)))==56320&&(x=65536+(x-55296<<10)+(b-56320),_++),x<128?w[E++]=x:(x<2048?w[E++]=192|x>>>6:(x<65536?w[E++]=224|x>>>12:(w[E++]=240|x>>>18,w[E++]=128|x>>>12&63),w[E++]=128|x>>>6&63),w[E++]=128|63&x);return w})(g)},a.utf8decode=function(g){return o.nodebuffer?i.transformTo("nodebuffer",g).toString("utf-8"):(function(m){var w,x,b,_,E=m.length,C=new Array(2*E);for(w=x=0;w<E;)if((b=m[w++])<128)C[x++]=b;else if(4<(_=c[b]))C[x++]=65533,w+=_-1;else{for(b&=_===2?31:_===3?15:7;1<_&&w<E;)b=b<<6|63&m[w++],_--;1<_?C[x++]=65533:b<65536?C[x++]=b:(b-=65536,C[x++]=55296|b>>10&1023,C[x++]=56320|1023&b)}return C.length!==x&&(C.subarray?C=C.subarray(0,x):C.length=x),i.applyFromCharCode(C)})(g=i.transformTo(o.uint8array?"uint8array":"array",g))},i.inherits(h,f),h.prototype.processChunk=function(g){var m=i.transformTo(o.uint8array?"uint8array":"array",g.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var w=m;(m=new Uint8Array(w.length+this.leftOver.length)).set(this.leftOver,0),m.set(w,this.leftOver.length)}else m=this.leftOver.concat(m);this.leftOver=null}var x=(function(_,E){var C;for((E=E||_.length)>_.length&&(E=_.length),C=E-1;0<=C&&(192&_[C])==128;)C--;return C<0||C===0?E:C+c[_[C]]>E?C:E})(m),b=m;x!==m.length&&(o.uint8array?(b=m.subarray(0,x),this.leftOver=m.subarray(x,m.length)):(b=m.slice(0,x),this.leftOver=m.slice(x,m.length))),this.push({data:a.utf8decode(b),meta:g.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:a.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},a.Utf8DecodeWorker=h,i.inherits(p,f),p.prototype.processChunk=function(g){this.push({data:a.utf8encode(g.data),meta:g.meta})},a.Utf8EncodeWorker=p},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,n,a){var i=t("./support"),o=t("./base64"),u=t("./nodejsUtils"),f=t("./external");function c(w){return w}function d(w,x){for(var b=0;b<w.length;++b)x[b]=255&w.charCodeAt(b);return x}t("setimmediate"),a.newBlob=function(w,x){a.checkSupport("blob");try{return new Blob([w],{type:x})}catch{try{var b=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return b.append(w),b.getBlob(x)}catch{throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(w,x,b){var _=[],E=0,C=w.length;if(C<=b)return String.fromCharCode.apply(null,w);for(;E<C;)x==="array"||x==="nodebuffer"?_.push(String.fromCharCode.apply(null,w.slice(E,Math.min(E+b,C)))):_.push(String.fromCharCode.apply(null,w.subarray(E,Math.min(E+b,C)))),E+=b;return _.join("")},stringifyByChar:function(w){for(var x="",b=0;b<w.length;b++)x+=String.fromCharCode(w[b]);return x},applyCanBeUsed:{uint8array:(function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,u.allocBuffer(1)).length===1}catch{return!1}})()}};function p(w){var x=65536,b=a.getTypeOf(w),_=!0;if(b==="uint8array"?_=h.applyCanBeUsed.uint8array:b==="nodebuffer"&&(_=h.applyCanBeUsed.nodebuffer),_)for(;1<x;)try{return h.stringifyByChunk(w,b,x)}catch{x=Math.floor(x/2)}return h.stringifyByChar(w)}function g(w,x){for(var b=0;b<w.length;b++)x[b]=w[b];return x}a.applyFromCharCode=p;var m={};m.string={string:c,array:function(w){return d(w,new Array(w.length))},arraybuffer:function(w){return m.string.uint8array(w).buffer},uint8array:function(w){return d(w,new Uint8Array(w.length))},nodebuffer:function(w){return d(w,u.allocBuffer(w.length))}},m.array={string:p,array:c,arraybuffer:function(w){return new Uint8Array(w).buffer},uint8array:function(w){return new Uint8Array(w)},nodebuffer:function(w){return u.newBufferFrom(w)}},m.arraybuffer={string:function(w){return p(new Uint8Array(w))},array:function(w){return g(new Uint8Array(w),new Array(w.byteLength))},arraybuffer:c,uint8array:function(w){return new Uint8Array(w)},nodebuffer:function(w){return u.newBufferFrom(new Uint8Array(w))}},m.uint8array={string:p,array:function(w){return g(w,new Array(w.length))},arraybuffer:function(w){return w.buffer},uint8array:c,nodebuffer:function(w){return u.newBufferFrom(w)}},m.nodebuffer={string:p,array:function(w){return g(w,new Array(w.length))},arraybuffer:function(w){return m.nodebuffer.uint8array(w).buffer},uint8array:function(w){return g(w,new Uint8Array(w.length))},nodebuffer:c},a.transformTo=function(w,x){if(x=x||"",!w)return x;a.checkSupport(w);var b=a.getTypeOf(x);return m[b][w](x)},a.resolve=function(w){for(var x=w.split("/"),b=[],_=0;_<x.length;_++){var E=x[_];E==="."||E===""&&_!==0&&_!==x.length-1||(E===".."?b.pop():b.push(E))}return b.join("/")},a.getTypeOf=function(w){return typeof w=="string"?"string":Object.prototype.toString.call(w)==="[object Array]"?"array":i.nodebuffer&&u.isBuffer(w)?"nodebuffer":i.uint8array&&w instanceof Uint8Array?"uint8array":i.arraybuffer&&w instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(w){if(!i[w.toLowerCase()])throw new Error(w+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(w){var x,b,_="";for(b=0;b<(w||"").length;b++)_+="\\x"+((x=w.charCodeAt(b))<16?"0":"")+x.toString(16).toUpperCase();return _},a.delay=function(w,x,b){setImmediate(function(){w.apply(b||null,x||[])})},a.inherits=function(w,x){function b(){}b.prototype=x.prototype,w.prototype=new b},a.extend=function(){var w,x,b={};for(w=0;w<arguments.length;w++)for(x in arguments[w])Object.prototype.hasOwnProperty.call(arguments[w],x)&&b[x]===void 0&&(b[x]=arguments[w][x]);return b},a.prepareContent=function(w,x,b,_,E){return f.Promise.resolve(x).then(function(C){return i.blob&&(C instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(C))!==-1)&&typeof FileReader<"u"?new f.Promise(function(B,N){var A=new FileReader;A.onload=function(z){B(z.target.result)},A.onerror=function(z){N(z.target.error)},A.readAsArrayBuffer(C)}):C}).then(function(C){var B=a.getTypeOf(C);return B?(B==="arraybuffer"?C=a.transformTo("uint8array",C):B==="string"&&(E?C=o.decode(C):b&&_!==!0&&(C=(function(N){return d(N,i.uint8array?new Uint8Array(N.length):new Array(N.length))})(C))),C):f.Promise.reject(new Error("Can't read the data of '"+w+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,n,a){var i=t("./reader/readerFor"),o=t("./utils"),u=t("./signature"),f=t("./zipEntry"),c=t("./support");function d(h){this.files=[],this.loadOptions=h}d.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var p=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(p)+", expected "+o.pretty(h)+")")}},isSignature:function(h,p){var g=this.reader.index;this.reader.setIndex(h);var m=this.reader.readString(4)===p;return this.reader.setIndex(g),m},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),p=c.uint8array?"uint8array":"array",g=o.transformTo(p,h);this.zipComment=this.loadOptions.decodeFileName(g)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h,p,g,m=this.zip64EndOfCentralSize-44;0<m;)h=this.reader.readInt(2),p=this.reader.readInt(4),g=this.reader.readData(p),this.zip64ExtensibleData[h]={id:h,length:p,value:g}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,p;for(h=0;h<this.files.length;h++)p=this.files[h],this.reader.setIndex(p.localHeaderOffset),this.checkSignature(u.LOCAL_FILE_HEADER),p.readLocalPart(this.reader),p.handleUTF8(),p.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(u.CENTRAL_FILE_HEADER);)(h=new f({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(u.CENTRAL_DIRECTORY_END);if(h<0)throw this.isSignature(0,u.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(h);var p=h;if(this.checkSignature(u.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(h=this.reader.lastIndexOfSignature(u.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(u.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,u.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(u.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(u.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var g=this.centralDirOffset+this.centralDirSize;this.zip64&&(g+=20,g+=12+this.zip64EndOfCentralSize);var m=p-g;if(0<m)this.isSignature(p,u.CENTRAL_FILE_HEADER)||(this.reader.zero=m);else if(m<0)throw new Error("Corrupted zip: missing "+Math.abs(m)+" bytes.")},prepareReader:function(h){this.reader=i(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=d},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,n,a){var i=t("./reader/readerFor"),o=t("./utils"),u=t("./compressedObject"),f=t("./crc32"),c=t("./utf8"),d=t("./compressions"),h=t("./support");function p(g,m){this.options=g,this.loadOptions=m}p.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(g){var m,w;if(g.skip(22),this.fileNameLength=g.readInt(2),w=g.readInt(2),this.fileName=g.readData(this.fileNameLength),g.skip(w),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((m=(function(x){for(var b in d)if(Object.prototype.hasOwnProperty.call(d,b)&&d[b].magic===x)return d[b];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new u(this.compressedSize,this.uncompressedSize,this.crc32,m,g.readData(this.compressedSize))},readCentralPart:function(g){this.versionMadeBy=g.readInt(2),g.skip(2),this.bitFlag=g.readInt(2),this.compressionMethod=g.readString(2),this.date=g.readDate(),this.crc32=g.readInt(4),this.compressedSize=g.readInt(4),this.uncompressedSize=g.readInt(4);var m=g.readInt(2);if(this.extraFieldsLength=g.readInt(2),this.fileCommentLength=g.readInt(2),this.diskNumberStart=g.readInt(2),this.internalFileAttributes=g.readInt(2),this.externalFileAttributes=g.readInt(4),this.localHeaderOffset=g.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");g.skip(m),this.readExtraFields(g),this.parseZIP64ExtraField(g),this.fileComment=g.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var g=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),g==0&&(this.dosPermissions=63&this.externalFileAttributes),g==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var g=i(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=g.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=g.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=g.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=g.readInt(4))}},readExtraFields:function(g){var m,w,x,b=g.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});g.index+4<b;)m=g.readInt(2),w=g.readInt(2),x=g.readData(w),this.extraFields[m]={id:m,length:w,value:x};g.setIndex(b)},handleUTF8:function(){var g=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var m=this.findExtraFieldUnicodePath();if(m!==null)this.fileNameStr=m;else{var w=o.transformTo(g,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(w)}var x=this.findExtraFieldUnicodeComment();if(x!==null)this.fileCommentStr=x;else{var b=o.transformTo(g,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(b)}}},findExtraFieldUnicodePath:function(){var g=this.extraFields[28789];if(g){var m=i(g.value);return m.readInt(1)!==1||f(this.fileName)!==m.readInt(4)?null:c.utf8decode(m.readData(g.length-5))}return null},findExtraFieldUnicodeComment:function(){var g=this.extraFields[25461];if(g){var m=i(g.value);return m.readInt(1)!==1||f(this.fileComment)!==m.readInt(4)?null:c.utf8decode(m.readData(g.length-5))}return null}},n.exports=p},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,n,a){function i(m,w,x){this.name=m,this.dir=x.dir,this.date=x.date,this.comment=x.comment,this.unixPermissions=x.unixPermissions,this.dosPermissions=x.dosPermissions,this._data=w,this._dataBinary=x.binary,this.options={compression:x.compression,compressionOptions:x.compressionOptions}}var o=t("./stream/StreamHelper"),u=t("./stream/DataWorker"),f=t("./utf8"),c=t("./compressedObject"),d=t("./stream/GenericWorker");i.prototype={internalStream:function(m){var w=null,x="string";try{if(!m)throw new Error("No output type specified.");var b=(x=m.toLowerCase())==="string"||x==="text";x!=="binarystring"&&x!=="text"||(x="string"),w=this._decompressWorker();var _=!this._dataBinary;_&&!b&&(w=w.pipe(new f.Utf8EncodeWorker)),!_&&b&&(w=w.pipe(new f.Utf8DecodeWorker))}catch(E){(w=new d("error")).error(E)}return new o(w,x,"")},async:function(m,w){return this.internalStream(m).accumulate(w)},nodeStream:function(m,w){return this.internalStream(m||"nodebuffer").toNodejsStream(w)},_compressWorker:function(m,w){if(this._data instanceof c&&this._data.compression.magic===m.magic)return this._data.getCompressedWorker();var x=this._decompressWorker();return this._dataBinary||(x=x.pipe(new f.Utf8EncodeWorker)),c.createWorkerFrom(x,m,w)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof d?this._data:new u(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],p=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},g=0;g<h.length;g++)i.prototype[h[g]]=p;n.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,n,a){(function(i){var o,u,f=i.MutationObserver||i.WebKitMutationObserver;if(f){var c=0,d=new f(m),h=i.document.createTextNode("");d.observe(h,{characterData:!0}),o=function(){h.data=c=++c%2}}else if(i.setImmediate||i.MessageChannel===void 0)o="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var w=i.document.createElement("script");w.onreadystatechange=function(){m(),w.onreadystatechange=null,w.parentNode.removeChild(w),w=null},i.document.documentElement.appendChild(w)}:function(){setTimeout(m,0)};else{var p=new i.MessageChannel;p.port1.onmessage=m,o=function(){p.port2.postMessage(0)}}var g=[];function m(){var w,x;u=!0;for(var b=g.length;b;){for(x=g,g=[],w=-1;++w<b;)x[w]();b=g.length}u=!1}n.exports=function(w){g.push(w)!==1||u||o()}}).call(this,typeof zu<"u"?zu:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,n,a){var i=t("immediate");function o(){}var u={},f=["REJECTED"],c=["FULFILLED"],d=["PENDING"];function h(b){if(typeof b!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,b!==o&&w(this,b)}function p(b,_,E){this.promise=b,typeof _=="function"&&(this.onFulfilled=_,this.callFulfilled=this.otherCallFulfilled),typeof E=="function"&&(this.onRejected=E,this.callRejected=this.otherCallRejected)}function g(b,_,E){i(function(){var C;try{C=_(E)}catch(B){return u.reject(b,B)}C===b?u.reject(b,new TypeError("Cannot resolve promise with itself")):u.resolve(b,C)})}function m(b){var _=b&&b.then;if(b&&(typeof b=="object"||typeof b=="function")&&typeof _=="function")return function(){_.apply(b,arguments)}}function w(b,_){var E=!1;function C(A){E||(E=!0,u.reject(b,A))}function B(A){E||(E=!0,u.resolve(b,A))}var N=x(function(){_(B,C)});N.status==="error"&&C(N.value)}function x(b,_){var E={};try{E.value=b(_),E.status="success"}catch(C){E.status="error",E.value=C}return E}(n.exports=h).prototype.finally=function(b){if(typeof b!="function")return this;var _=this.constructor;return this.then(function(E){return _.resolve(b()).then(function(){return E})},function(E){return _.resolve(b()).then(function(){throw E})})},h.prototype.catch=function(b){return this.then(null,b)},h.prototype.then=function(b,_){if(typeof b!="function"&&this.state===c||typeof _!="function"&&this.state===f)return this;var E=new this.constructor(o);return this.state!==d?g(E,this.state===c?b:_,this.outcome):this.queue.push(new p(E,b,_)),E},p.prototype.callFulfilled=function(b){u.resolve(this.promise,b)},p.prototype.otherCallFulfilled=function(b){g(this.promise,this.onFulfilled,b)},p.prototype.callRejected=function(b){u.reject(this.promise,b)},p.prototype.otherCallRejected=function(b){g(this.promise,this.onRejected,b)},u.resolve=function(b,_){var E=x(m,_);if(E.status==="error")return u.reject(b,E.value);var C=E.value;if(C)w(b,C);else{b.state=c,b.outcome=_;for(var B=-1,N=b.queue.length;++B<N;)b.queue[B].callFulfilled(_)}return b},u.reject=function(b,_){b.state=f,b.outcome=_;for(var E=-1,C=b.queue.length;++E<C;)b.queue[E].callRejected(_);return b},h.resolve=function(b){return b instanceof this?b:u.resolve(new this(o),b)},h.reject=function(b){var _=new this(o);return u.reject(_,b)},h.all=function(b){var _=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=b.length,C=!1;if(!E)return this.resolve([]);for(var B=new Array(E),N=0,A=-1,z=new this(o);++A<E;)M(b[A],A);return z;function M(V,q){_.resolve(V).then(function(I){B[q]=I,++N!==E||C||(C=!0,u.resolve(z,B))},function(I){C||(C=!0,u.reject(z,I))})}},h.race=function(b){var _=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=b.length,C=!1;if(!E)return this.resolve([]);for(var B=-1,N=new this(o);++B<E;)A=b[B],_.resolve(A).then(function(z){C||(C=!0,u.resolve(N,z))},function(z){C||(C=!0,u.reject(N,z))});var A;return N}},{immediate:36}],38:[function(t,n,a){var i={};(0,t("./lib/utils/common").assign)(i,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),n.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,n,a){var i=t("./zlib/deflate"),o=t("./utils/common"),u=t("./utils/strings"),f=t("./zlib/messages"),c=t("./zlib/zstream"),d=Object.prototype.toString,h=0,p=-1,g=0,m=8;function w(b){if(!(this instanceof w))return new w(b);this.options=o.assign({level:p,method:m,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},b||{});var _=this.options;_.raw&&0<_.windowBits?_.windowBits=-_.windowBits:_.gzip&&0<_.windowBits&&_.windowBits<16&&(_.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var E=i.deflateInit2(this.strm,_.level,_.method,_.windowBits,_.memLevel,_.strategy);if(E!==h)throw new Error(f[E]);if(_.header&&i.deflateSetHeader(this.strm,_.header),_.dictionary){var C;if(C=typeof _.dictionary=="string"?u.string2buf(_.dictionary):d.call(_.dictionary)==="[object ArrayBuffer]"?new Uint8Array(_.dictionary):_.dictionary,(E=i.deflateSetDictionary(this.strm,C))!==h)throw new Error(f[E]);this._dict_set=!0}}function x(b,_){var E=new w(_);if(E.push(b,!0),E.err)throw E.msg||f[E.err];return E.result}w.prototype.push=function(b,_){var E,C,B=this.strm,N=this.options.chunkSize;if(this.ended)return!1;C=_===~~_?_:_===!0?4:0,typeof b=="string"?B.input=u.string2buf(b):d.call(b)==="[object ArrayBuffer]"?B.input=new Uint8Array(b):B.input=b,B.next_in=0,B.avail_in=B.input.length;do{if(B.avail_out===0&&(B.output=new o.Buf8(N),B.next_out=0,B.avail_out=N),(E=i.deflate(B,C))!==1&&E!==h)return this.onEnd(E),!(this.ended=!0);B.avail_out!==0&&(B.avail_in!==0||C!==4&&C!==2)||(this.options.to==="string"?this.onData(u.buf2binstring(o.shrinkBuf(B.output,B.next_out))):this.onData(o.shrinkBuf(B.output,B.next_out)))}while((0<B.avail_in||B.avail_out===0)&&E!==1);return C===4?(E=i.deflateEnd(this.strm),this.onEnd(E),this.ended=!0,E===h):C!==2||(this.onEnd(h),!(B.avail_out=0))},w.prototype.onData=function(b){this.chunks.push(b)},w.prototype.onEnd=function(b){b===h&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg},a.Deflate=w,a.deflate=x,a.deflateRaw=function(b,_){return(_=_||{}).raw=!0,x(b,_)},a.gzip=function(b,_){return(_=_||{}).gzip=!0,x(b,_)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,n,a){var i=t("./zlib/inflate"),o=t("./utils/common"),u=t("./utils/strings"),f=t("./zlib/constants"),c=t("./zlib/messages"),d=t("./zlib/zstream"),h=t("./zlib/gzheader"),p=Object.prototype.toString;function g(w){if(!(this instanceof g))return new g(w);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},w||{});var x=this.options;x.raw&&0<=x.windowBits&&x.windowBits<16&&(x.windowBits=-x.windowBits,x.windowBits===0&&(x.windowBits=-15)),!(0<=x.windowBits&&x.windowBits<16)||w&&w.windowBits||(x.windowBits+=32),15<x.windowBits&&x.windowBits<48&&(15&x.windowBits)==0&&(x.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var b=i.inflateInit2(this.strm,x.windowBits);if(b!==f.Z_OK)throw new Error(c[b]);this.header=new h,i.inflateGetHeader(this.strm,this.header)}function m(w,x){var b=new g(x);if(b.push(w,!0),b.err)throw b.msg||c[b.err];return b.result}g.prototype.push=function(w,x){var b,_,E,C,B,N,A=this.strm,z=this.options.chunkSize,M=this.options.dictionary,V=!1;if(this.ended)return!1;_=x===~~x?x:x===!0?f.Z_FINISH:f.Z_NO_FLUSH,typeof w=="string"?A.input=u.binstring2buf(w):p.call(w)==="[object ArrayBuffer]"?A.input=new Uint8Array(w):A.input=w,A.next_in=0,A.avail_in=A.input.length;do{if(A.avail_out===0&&(A.output=new o.Buf8(z),A.next_out=0,A.avail_out=z),(b=i.inflate(A,f.Z_NO_FLUSH))===f.Z_NEED_DICT&&M&&(N=typeof M=="string"?u.string2buf(M):p.call(M)==="[object ArrayBuffer]"?new Uint8Array(M):M,b=i.inflateSetDictionary(this.strm,N)),b===f.Z_BUF_ERROR&&V===!0&&(b=f.Z_OK,V=!1),b!==f.Z_STREAM_END&&b!==f.Z_OK)return this.onEnd(b),!(this.ended=!0);A.next_out&&(A.avail_out!==0&&b!==f.Z_STREAM_END&&(A.avail_in!==0||_!==f.Z_FINISH&&_!==f.Z_SYNC_FLUSH)||(this.options.to==="string"?(E=u.utf8border(A.output,A.next_out),C=A.next_out-E,B=u.buf2string(A.output,E),A.next_out=C,A.avail_out=z-C,C&&o.arraySet(A.output,A.output,E,C,0),this.onData(B)):this.onData(o.shrinkBuf(A.output,A.next_out)))),A.avail_in===0&&A.avail_out===0&&(V=!0)}while((0<A.avail_in||A.avail_out===0)&&b!==f.Z_STREAM_END);return b===f.Z_STREAM_END&&(_=f.Z_FINISH),_===f.Z_FINISH?(b=i.inflateEnd(this.strm),this.onEnd(b),this.ended=!0,b===f.Z_OK):_!==f.Z_SYNC_FLUSH||(this.onEnd(f.Z_OK),!(A.avail_out=0))},g.prototype.onData=function(w){this.chunks.push(w)},g.prototype.onEnd=function(w){w===f.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=w,this.msg=this.strm.msg},a.Inflate=g,a.inflate=m,a.inflateRaw=function(w,x){return(x=x||{}).raw=!0,m(w,x)},a.ungzip=m},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,n,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";a.assign=function(f){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var d=c.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var h in d)d.hasOwnProperty(h)&&(f[h]=d[h])}}return f},a.shrinkBuf=function(f,c){return f.length===c?f:f.subarray?f.subarray(0,c):(f.length=c,f)};var o={arraySet:function(f,c,d,h,p){if(c.subarray&&f.subarray)f.set(c.subarray(d,d+h),p);else for(var g=0;g<h;g++)f[p+g]=c[d+g]},flattenChunks:function(f){var c,d,h,p,g,m;for(c=h=0,d=f.length;c<d;c++)h+=f[c].length;for(m=new Uint8Array(h),c=p=0,d=f.length;c<d;c++)g=f[c],m.set(g,p),p+=g.length;return m}},u={arraySet:function(f,c,d,h,p){for(var g=0;g<h;g++)f[p+g]=c[d+g]},flattenChunks:function(f){return[].concat.apply([],f)}};a.setTyped=function(f){f?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,o)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,u))},a.setTyped(i)},{}],42:[function(t,n,a){var i=t("./common"),o=!0,u=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{u=!1}for(var f=new i.Buf8(256),c=0;c<256;c++)f[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function d(h,p){if(p<65537&&(h.subarray&&u||!h.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(h,p));for(var g="",m=0;m<p;m++)g+=String.fromCharCode(h[m]);return g}f[254]=f[254]=1,a.string2buf=function(h){var p,g,m,w,x,b=h.length,_=0;for(w=0;w<b;w++)(64512&(g=h.charCodeAt(w)))==55296&&w+1<b&&(64512&(m=h.charCodeAt(w+1)))==56320&&(g=65536+(g-55296<<10)+(m-56320),w++),_+=g<128?1:g<2048?2:g<65536?3:4;for(p=new i.Buf8(_),w=x=0;x<_;w++)(64512&(g=h.charCodeAt(w)))==55296&&w+1<b&&(64512&(m=h.charCodeAt(w+1)))==56320&&(g=65536+(g-55296<<10)+(m-56320),w++),g<128?p[x++]=g:(g<2048?p[x++]=192|g>>>6:(g<65536?p[x++]=224|g>>>12:(p[x++]=240|g>>>18,p[x++]=128|g>>>12&63),p[x++]=128|g>>>6&63),p[x++]=128|63&g);return p},a.buf2binstring=function(h){return d(h,h.length)},a.binstring2buf=function(h){for(var p=new i.Buf8(h.length),g=0,m=p.length;g<m;g++)p[g]=h.charCodeAt(g);return p},a.buf2string=function(h,p){var g,m,w,x,b=p||h.length,_=new Array(2*b);for(g=m=0;g<b;)if((w=h[g++])<128)_[m++]=w;else if(4<(x=f[w]))_[m++]=65533,g+=x-1;else{for(w&=x===2?31:x===3?15:7;1<x&&g<b;)w=w<<6|63&h[g++],x--;1<x?_[m++]=65533:w<65536?_[m++]=w:(w-=65536,_[m++]=55296|w>>10&1023,_[m++]=56320|1023&w)}return d(_,m)},a.utf8border=function(h,p){var g;for((p=p||h.length)>h.length&&(p=h.length),g=p-1;0<=g&&(192&h[g])==128;)g--;return g<0||g===0?p:g+f[h[g]]>p?g:p}},{"./common":41}],43:[function(t,n,a){n.exports=function(i,o,u,f){for(var c=65535&i|0,d=i>>>16&65535|0,h=0;u!==0;){for(u-=h=2e3<u?2e3:u;d=d+(c=c+o[f++]|0)|0,--h;);c%=65521,d%=65521}return c|d<<16|0}},{}],44:[function(t,n,a){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,n,a){var i=(function(){for(var o,u=[],f=0;f<256;f++){o=f;for(var c=0;c<8;c++)o=1&o?3988292384^o>>>1:o>>>1;u[f]=o}return u})();n.exports=function(o,u,f,c){var d=i,h=c+f;o^=-1;for(var p=c;p<h;p++)o=o>>>8^d[255&(o^u[p])];return-1^o}},{}],46:[function(t,n,a){var i,o=t("../utils/common"),u=t("./trees"),f=t("./adler32"),c=t("./crc32"),d=t("./messages"),h=0,p=4,g=0,m=-2,w=-1,x=4,b=2,_=8,E=9,C=286,B=30,N=19,A=2*C+1,z=15,M=3,V=258,q=V+M+1,I=42,F=113,T=1,H=2,Q=3,W=4;function Z(D,ve){return D.msg=d[ve],ve}function X(D){return(D<<1)-(4<D?9:0)}function te(D){for(var ve=D.length;0<=--ve;)D[ve]=0}function L(D){var ve=D.state,pe=ve.pending;pe>D.avail_out&&(pe=D.avail_out),pe!==0&&(o.arraySet(D.output,ve.pending_buf,ve.pending_out,pe,D.next_out),D.next_out+=pe,ve.pending_out+=pe,D.total_out+=pe,D.avail_out-=pe,ve.pending-=pe,ve.pending===0&&(ve.pending_out=0))}function U(D,ve){u._tr_flush_block(D,0<=D.block_start?D.block_start:-1,D.strstart-D.block_start,ve),D.block_start=D.strstart,L(D.strm)}function oe(D,ve){D.pending_buf[D.pending++]=ve}function ie(D,ve){D.pending_buf[D.pending++]=ve>>>8&255,D.pending_buf[D.pending++]=255&ve}function ne(D,ve){var pe,Y,K=D.max_chain_length,ae=D.strstart,he=D.prev_length,me=D.nice_match,se=D.strstart>D.w_size-q?D.strstart-(D.w_size-q):0,Re=D.window,De=D.w_mask,Be=D.prev,ze=D.strstart+V,$=Re[ae+he-1],k=Re[ae+he];D.prev_length>=D.good_match&&(K>>=2),me>D.lookahead&&(me=D.lookahead);do if(Re[(pe=ve)+he]===k&&Re[pe+he-1]===$&&Re[pe]===Re[ae]&&Re[++pe]===Re[ae+1]){ae+=2,pe++;do;while(Re[++ae]===Re[++pe]&&Re[++ae]===Re[++pe]&&Re[++ae]===Re[++pe]&&Re[++ae]===Re[++pe]&&Re[++ae]===Re[++pe]&&Re[++ae]===Re[++pe]&&Re[++ae]===Re[++pe]&&Re[++ae]===Re[++pe]&&ae<ze);if(Y=V-(ze-ae),ae=ze-V,he<Y){if(D.match_start=ve,me<=(he=Y))break;$=Re[ae+he-1],k=Re[ae+he]}}while((ve=Be[ve&De])>se&&--K!=0);return he<=D.lookahead?he:D.lookahead}function we(D){var ve,pe,Y,K,ae,he,me,se,Re,De,Be=D.w_size;do{if(K=D.window_size-D.lookahead-D.strstart,D.strstart>=Be+(Be-q)){for(o.arraySet(D.window,D.window,Be,Be,0),D.match_start-=Be,D.strstart-=Be,D.block_start-=Be,ve=pe=D.hash_size;Y=D.head[--ve],D.head[ve]=Be<=Y?Y-Be:0,--pe;);for(ve=pe=Be;Y=D.prev[--ve],D.prev[ve]=Be<=Y?Y-Be:0,--pe;);K+=Be}if(D.strm.avail_in===0)break;if(he=D.strm,me=D.window,se=D.strstart+D.lookahead,Re=K,De=void 0,De=he.avail_in,Re<De&&(De=Re),pe=De===0?0:(he.avail_in-=De,o.arraySet(me,he.input,he.next_in,De,se),he.state.wrap===1?he.adler=f(he.adler,me,De,se):he.state.wrap===2&&(he.adler=c(he.adler,me,De,se)),he.next_in+=De,he.total_in+=De,De),D.lookahead+=pe,D.lookahead+D.insert>=M)for(ae=D.strstart-D.insert,D.ins_h=D.window[ae],D.ins_h=(D.ins_h<<D.hash_shift^D.window[ae+1])&D.hash_mask;D.insert&&(D.ins_h=(D.ins_h<<D.hash_shift^D.window[ae+M-1])&D.hash_mask,D.prev[ae&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=ae,ae++,D.insert--,!(D.lookahead+D.insert<M)););}while(D.lookahead<q&&D.strm.avail_in!==0)}function Te(D,ve){for(var pe,Y;;){if(D.lookahead<q){if(we(D),D.lookahead<q&&ve===h)return T;if(D.lookahead===0)break}if(pe=0,D.lookahead>=M&&(D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+M-1])&D.hash_mask,pe=D.prev[D.strstart&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=D.strstart),pe!==0&&D.strstart-pe<=D.w_size-q&&(D.match_length=ne(D,pe)),D.match_length>=M)if(Y=u._tr_tally(D,D.strstart-D.match_start,D.match_length-M),D.lookahead-=D.match_length,D.match_length<=D.max_lazy_match&&D.lookahead>=M){for(D.match_length--;D.strstart++,D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+M-1])&D.hash_mask,pe=D.prev[D.strstart&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=D.strstart,--D.match_length!=0;);D.strstart++}else D.strstart+=D.match_length,D.match_length=0,D.ins_h=D.window[D.strstart],D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+1])&D.hash_mask;else Y=u._tr_tally(D,0,D.window[D.strstart]),D.lookahead--,D.strstart++;if(Y&&(U(D,!1),D.strm.avail_out===0))return T}return D.insert=D.strstart<M-1?D.strstart:M-1,ve===p?(U(D,!0),D.strm.avail_out===0?Q:W):D.last_lit&&(U(D,!1),D.strm.avail_out===0)?T:H}function ke(D,ve){for(var pe,Y,K;;){if(D.lookahead<q){if(we(D),D.lookahead<q&&ve===h)return T;if(D.lookahead===0)break}if(pe=0,D.lookahead>=M&&(D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+M-1])&D.hash_mask,pe=D.prev[D.strstart&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=D.strstart),D.prev_length=D.match_length,D.prev_match=D.match_start,D.match_length=M-1,pe!==0&&D.prev_length<D.max_lazy_match&&D.strstart-pe<=D.w_size-q&&(D.match_length=ne(D,pe),D.match_length<=5&&(D.strategy===1||D.match_length===M&&4096<D.strstart-D.match_start)&&(D.match_length=M-1)),D.prev_length>=M&&D.match_length<=D.prev_length){for(K=D.strstart+D.lookahead-M,Y=u._tr_tally(D,D.strstart-1-D.prev_match,D.prev_length-M),D.lookahead-=D.prev_length-1,D.prev_length-=2;++D.strstart<=K&&(D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+M-1])&D.hash_mask,pe=D.prev[D.strstart&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=D.strstart),--D.prev_length!=0;);if(D.match_available=0,D.match_length=M-1,D.strstart++,Y&&(U(D,!1),D.strm.avail_out===0))return T}else if(D.match_available){if((Y=u._tr_tally(D,0,D.window[D.strstart-1]))&&U(D,!1),D.strstart++,D.lookahead--,D.strm.avail_out===0)return T}else D.match_available=1,D.strstart++,D.lookahead--}return D.match_available&&(Y=u._tr_tally(D,0,D.window[D.strstart-1]),D.match_available=0),D.insert=D.strstart<M-1?D.strstart:M-1,ve===p?(U(D,!0),D.strm.avail_out===0?Q:W):D.last_lit&&(U(D,!1),D.strm.avail_out===0)?T:H}function ge(D,ve,pe,Y,K){this.good_length=D,this.max_lazy=ve,this.nice_length=pe,this.max_chain=Y,this.func=K}function fe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=_,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*A),this.dyn_dtree=new o.Buf16(2*(2*B+1)),this.bl_tree=new o.Buf16(2*(2*N+1)),te(this.dyn_ltree),te(this.dyn_dtree),te(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(z+1),this.heap=new o.Buf16(2*C+1),te(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*C+1),te(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function de(D){var ve;return D&&D.state?(D.total_in=D.total_out=0,D.data_type=b,(ve=D.state).pending=0,ve.pending_out=0,ve.wrap<0&&(ve.wrap=-ve.wrap),ve.status=ve.wrap?I:F,D.adler=ve.wrap===2?0:1,ve.last_flush=h,u._tr_init(ve),g):Z(D,m)}function be(D){var ve=de(D);return ve===g&&(function(pe){pe.window_size=2*pe.w_size,te(pe.head),pe.max_lazy_match=i[pe.level].max_lazy,pe.good_match=i[pe.level].good_length,pe.nice_match=i[pe.level].nice_length,pe.max_chain_length=i[pe.level].max_chain,pe.strstart=0,pe.block_start=0,pe.lookahead=0,pe.insert=0,pe.match_length=pe.prev_length=M-1,pe.match_available=0,pe.ins_h=0})(D.state),ve}function Pe(D,ve,pe,Y,K,ae){if(!D)return m;var he=1;if(ve===w&&(ve=6),Y<0?(he=0,Y=-Y):15<Y&&(he=2,Y-=16),K<1||E<K||pe!==_||Y<8||15<Y||ve<0||9<ve||ae<0||x<ae)return Z(D,m);Y===8&&(Y=9);var me=new fe;return(D.state=me).strm=D,me.wrap=he,me.gzhead=null,me.w_bits=Y,me.w_size=1<<me.w_bits,me.w_mask=me.w_size-1,me.hash_bits=K+7,me.hash_size=1<<me.hash_bits,me.hash_mask=me.hash_size-1,me.hash_shift=~~((me.hash_bits+M-1)/M),me.window=new o.Buf8(2*me.w_size),me.head=new o.Buf16(me.hash_size),me.prev=new o.Buf16(me.w_size),me.lit_bufsize=1<<K+6,me.pending_buf_size=4*me.lit_bufsize,me.pending_buf=new o.Buf8(me.pending_buf_size),me.d_buf=1*me.lit_bufsize,me.l_buf=3*me.lit_bufsize,me.level=ve,me.strategy=ae,me.method=pe,be(D)}i=[new ge(0,0,0,0,function(D,ve){var pe=65535;for(pe>D.pending_buf_size-5&&(pe=D.pending_buf_size-5);;){if(D.lookahead<=1){if(we(D),D.lookahead===0&&ve===h)return T;if(D.lookahead===0)break}D.strstart+=D.lookahead,D.lookahead=0;var Y=D.block_start+pe;if((D.strstart===0||D.strstart>=Y)&&(D.lookahead=D.strstart-Y,D.strstart=Y,U(D,!1),D.strm.avail_out===0)||D.strstart-D.block_start>=D.w_size-q&&(U(D,!1),D.strm.avail_out===0))return T}return D.insert=0,ve===p?(U(D,!0),D.strm.avail_out===0?Q:W):(D.strstart>D.block_start&&(U(D,!1),D.strm.avail_out),T)}),new ge(4,4,8,4,Te),new ge(4,5,16,8,Te),new ge(4,6,32,32,Te),new ge(4,4,16,16,ke),new ge(8,16,32,32,ke),new ge(8,16,128,128,ke),new ge(8,32,128,256,ke),new ge(32,128,258,1024,ke),new ge(32,258,258,4096,ke)],a.deflateInit=function(D,ve){return Pe(D,ve,_,15,8,0)},a.deflateInit2=Pe,a.deflateReset=be,a.deflateResetKeep=de,a.deflateSetHeader=function(D,ve){return D&&D.state?D.state.wrap!==2?m:(D.state.gzhead=ve,g):m},a.deflate=function(D,ve){var pe,Y,K,ae;if(!D||!D.state||5<ve||ve<0)return D?Z(D,m):m;if(Y=D.state,!D.output||!D.input&&D.avail_in!==0||Y.status===666&&ve!==p)return Z(D,D.avail_out===0?-5:m);if(Y.strm=D,pe=Y.last_flush,Y.last_flush=ve,Y.status===I)if(Y.wrap===2)D.adler=0,oe(Y,31),oe(Y,139),oe(Y,8),Y.gzhead?(oe(Y,(Y.gzhead.text?1:0)+(Y.gzhead.hcrc?2:0)+(Y.gzhead.extra?4:0)+(Y.gzhead.name?8:0)+(Y.gzhead.comment?16:0)),oe(Y,255&Y.gzhead.time),oe(Y,Y.gzhead.time>>8&255),oe(Y,Y.gzhead.time>>16&255),oe(Y,Y.gzhead.time>>24&255),oe(Y,Y.level===9?2:2<=Y.strategy||Y.level<2?4:0),oe(Y,255&Y.gzhead.os),Y.gzhead.extra&&Y.gzhead.extra.length&&(oe(Y,255&Y.gzhead.extra.length),oe(Y,Y.gzhead.extra.length>>8&255)),Y.gzhead.hcrc&&(D.adler=c(D.adler,Y.pending_buf,Y.pending,0)),Y.gzindex=0,Y.status=69):(oe(Y,0),oe(Y,0),oe(Y,0),oe(Y,0),oe(Y,0),oe(Y,Y.level===9?2:2<=Y.strategy||Y.level<2?4:0),oe(Y,3),Y.status=F);else{var he=_+(Y.w_bits-8<<4)<<8;he|=(2<=Y.strategy||Y.level<2?0:Y.level<6?1:Y.level===6?2:3)<<6,Y.strstart!==0&&(he|=32),he+=31-he%31,Y.status=F,ie(Y,he),Y.strstart!==0&&(ie(Y,D.adler>>>16),ie(Y,65535&D.adler)),D.adler=1}if(Y.status===69)if(Y.gzhead.extra){for(K=Y.pending;Y.gzindex<(65535&Y.gzhead.extra.length)&&(Y.pending!==Y.pending_buf_size||(Y.gzhead.hcrc&&Y.pending>K&&(D.adler=c(D.adler,Y.pending_buf,Y.pending-K,K)),L(D),K=Y.pending,Y.pending!==Y.pending_buf_size));)oe(Y,255&Y.gzhead.extra[Y.gzindex]),Y.gzindex++;Y.gzhead.hcrc&&Y.pending>K&&(D.adler=c(D.adler,Y.pending_buf,Y.pending-K,K)),Y.gzindex===Y.gzhead.extra.length&&(Y.gzindex=0,Y.status=73)}else Y.status=73;if(Y.status===73)if(Y.gzhead.name){K=Y.pending;do{if(Y.pending===Y.pending_buf_size&&(Y.gzhead.hcrc&&Y.pending>K&&(D.adler=c(D.adler,Y.pending_buf,Y.pending-K,K)),L(D),K=Y.pending,Y.pending===Y.pending_buf_size)){ae=1;break}ae=Y.gzindex<Y.gzhead.name.length?255&Y.gzhead.name.charCodeAt(Y.gzindex++):0,oe(Y,ae)}while(ae!==0);Y.gzhead.hcrc&&Y.pending>K&&(D.adler=c(D.adler,Y.pending_buf,Y.pending-K,K)),ae===0&&(Y.gzindex=0,Y.status=91)}else Y.status=91;if(Y.status===91)if(Y.gzhead.comment){K=Y.pending;do{if(Y.pending===Y.pending_buf_size&&(Y.gzhead.hcrc&&Y.pending>K&&(D.adler=c(D.adler,Y.pending_buf,Y.pending-K,K)),L(D),K=Y.pending,Y.pending===Y.pending_buf_size)){ae=1;break}ae=Y.gzindex<Y.gzhead.comment.length?255&Y.gzhead.comment.charCodeAt(Y.gzindex++):0,oe(Y,ae)}while(ae!==0);Y.gzhead.hcrc&&Y.pending>K&&(D.adler=c(D.adler,Y.pending_buf,Y.pending-K,K)),ae===0&&(Y.status=103)}else Y.status=103;if(Y.status===103&&(Y.gzhead.hcrc?(Y.pending+2>Y.pending_buf_size&&L(D),Y.pending+2<=Y.pending_buf_size&&(oe(Y,255&D.adler),oe(Y,D.adler>>8&255),D.adler=0,Y.status=F)):Y.status=F),Y.pending!==0){if(L(D),D.avail_out===0)return Y.last_flush=-1,g}else if(D.avail_in===0&&X(ve)<=X(pe)&&ve!==p)return Z(D,-5);if(Y.status===666&&D.avail_in!==0)return Z(D,-5);if(D.avail_in!==0||Y.lookahead!==0||ve!==h&&Y.status!==666){var me=Y.strategy===2?(function(se,Re){for(var De;;){if(se.lookahead===0&&(we(se),se.lookahead===0)){if(Re===h)return T;break}if(se.match_length=0,De=u._tr_tally(se,0,se.window[se.strstart]),se.lookahead--,se.strstart++,De&&(U(se,!1),se.strm.avail_out===0))return T}return se.insert=0,Re===p?(U(se,!0),se.strm.avail_out===0?Q:W):se.last_lit&&(U(se,!1),se.strm.avail_out===0)?T:H})(Y,ve):Y.strategy===3?(function(se,Re){for(var De,Be,ze,$,k=se.window;;){if(se.lookahead<=V){if(we(se),se.lookahead<=V&&Re===h)return T;if(se.lookahead===0)break}if(se.match_length=0,se.lookahead>=M&&0<se.strstart&&(Be=k[ze=se.strstart-1])===k[++ze]&&Be===k[++ze]&&Be===k[++ze]){$=se.strstart+V;do;while(Be===k[++ze]&&Be===k[++ze]&&Be===k[++ze]&&Be===k[++ze]&&Be===k[++ze]&&Be===k[++ze]&&Be===k[++ze]&&Be===k[++ze]&&ze<$);se.match_length=V-($-ze),se.match_length>se.lookahead&&(se.match_length=se.lookahead)}if(se.match_length>=M?(De=u._tr_tally(se,1,se.match_length-M),se.lookahead-=se.match_length,se.strstart+=se.match_length,se.match_length=0):(De=u._tr_tally(se,0,se.window[se.strstart]),se.lookahead--,se.strstart++),De&&(U(se,!1),se.strm.avail_out===0))return T}return se.insert=0,Re===p?(U(se,!0),se.strm.avail_out===0?Q:W):se.last_lit&&(U(se,!1),se.strm.avail_out===0)?T:H})(Y,ve):i[Y.level].func(Y,ve);if(me!==Q&&me!==W||(Y.status=666),me===T||me===Q)return D.avail_out===0&&(Y.last_flush=-1),g;if(me===H&&(ve===1?u._tr_align(Y):ve!==5&&(u._tr_stored_block(Y,0,0,!1),ve===3&&(te(Y.head),Y.lookahead===0&&(Y.strstart=0,Y.block_start=0,Y.insert=0))),L(D),D.avail_out===0))return Y.last_flush=-1,g}return ve!==p?g:Y.wrap<=0?1:(Y.wrap===2?(oe(Y,255&D.adler),oe(Y,D.adler>>8&255),oe(Y,D.adler>>16&255),oe(Y,D.adler>>24&255),oe(Y,255&D.total_in),oe(Y,D.total_in>>8&255),oe(Y,D.total_in>>16&255),oe(Y,D.total_in>>24&255)):(ie(Y,D.adler>>>16),ie(Y,65535&D.adler)),L(D),0<Y.wrap&&(Y.wrap=-Y.wrap),Y.pending!==0?g:1)},a.deflateEnd=function(D){var ve;return D&&D.state?(ve=D.state.status)!==I&&ve!==69&&ve!==73&&ve!==91&&ve!==103&&ve!==F&&ve!==666?Z(D,m):(D.state=null,ve===F?Z(D,-3):g):m},a.deflateSetDictionary=function(D,ve){var pe,Y,K,ae,he,me,se,Re,De=ve.length;if(!D||!D.state||(ae=(pe=D.state).wrap)===2||ae===1&&pe.status!==I||pe.lookahead)return m;for(ae===1&&(D.adler=f(D.adler,ve,De,0)),pe.wrap=0,De>=pe.w_size&&(ae===0&&(te(pe.head),pe.strstart=0,pe.block_start=0,pe.insert=0),Re=new o.Buf8(pe.w_size),o.arraySet(Re,ve,De-pe.w_size,pe.w_size,0),ve=Re,De=pe.w_size),he=D.avail_in,me=D.next_in,se=D.input,D.avail_in=De,D.next_in=0,D.input=ve,we(pe);pe.lookahead>=M;){for(Y=pe.strstart,K=pe.lookahead-(M-1);pe.ins_h=(pe.ins_h<<pe.hash_shift^pe.window[Y+M-1])&pe.hash_mask,pe.prev[Y&pe.w_mask]=pe.head[pe.ins_h],pe.head[pe.ins_h]=Y,Y++,--K;);pe.strstart=Y,pe.lookahead=M-1,we(pe)}return pe.strstart+=pe.lookahead,pe.block_start=pe.strstart,pe.insert=pe.lookahead,pe.lookahead=0,pe.match_length=pe.prev_length=M-1,pe.match_available=0,D.next_in=me,D.input=se,D.avail_in=he,pe.wrap=ae,g},a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,n,a){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,n,a){n.exports=function(i,o){var u,f,c,d,h,p,g,m,w,x,b,_,E,C,B,N,A,z,M,V,q,I,F,T,H;u=i.state,f=i.next_in,T=i.input,c=f+(i.avail_in-5),d=i.next_out,H=i.output,h=d-(o-i.avail_out),p=d+(i.avail_out-257),g=u.dmax,m=u.wsize,w=u.whave,x=u.wnext,b=u.window,_=u.hold,E=u.bits,C=u.lencode,B=u.distcode,N=(1<<u.lenbits)-1,A=(1<<u.distbits)-1;e:do{E<15&&(_+=T[f++]<<E,E+=8,_+=T[f++]<<E,E+=8),z=C[_&N];t:for(;;){if(_>>>=M=z>>>24,E-=M,(M=z>>>16&255)===0)H[d++]=65535&z;else{if(!(16&M)){if((64&M)==0){z=C[(65535&z)+(_&(1<<M)-1)];continue t}if(32&M){u.mode=12;break e}i.msg="invalid literal/length code",u.mode=30;break e}V=65535&z,(M&=15)&&(E<M&&(_+=T[f++]<<E,E+=8),V+=_&(1<<M)-1,_>>>=M,E-=M),E<15&&(_+=T[f++]<<E,E+=8,_+=T[f++]<<E,E+=8),z=B[_&A];r:for(;;){if(_>>>=M=z>>>24,E-=M,!(16&(M=z>>>16&255))){if((64&M)==0){z=B[(65535&z)+(_&(1<<M)-1)];continue r}i.msg="invalid distance code",u.mode=30;break e}if(q=65535&z,E<(M&=15)&&(_+=T[f++]<<E,(E+=8)<M&&(_+=T[f++]<<E,E+=8)),g<(q+=_&(1<<M)-1)){i.msg="invalid distance too far back",u.mode=30;break e}if(_>>>=M,E-=M,(M=d-h)<q){if(w<(M=q-M)&&u.sane){i.msg="invalid distance too far back",u.mode=30;break e}if(F=b,(I=0)===x){if(I+=m-M,M<V){for(V-=M;H[d++]=b[I++],--M;);I=d-q,F=H}}else if(x<M){if(I+=m+x-M,(M-=x)<V){for(V-=M;H[d++]=b[I++],--M;);if(I=0,x<V){for(V-=M=x;H[d++]=b[I++],--M;);I=d-q,F=H}}}else if(I+=x-M,M<V){for(V-=M;H[d++]=b[I++],--M;);I=d-q,F=H}for(;2<V;)H[d++]=F[I++],H[d++]=F[I++],H[d++]=F[I++],V-=3;V&&(H[d++]=F[I++],1<V&&(H[d++]=F[I++]))}else{for(I=d-q;H[d++]=H[I++],H[d++]=H[I++],H[d++]=H[I++],2<(V-=3););V&&(H[d++]=H[I++],1<V&&(H[d++]=H[I++]))}break}}break}}while(f<c&&d<p);f-=V=E>>3,_&=(1<<(E-=V<<3))-1,i.next_in=f,i.next_out=d,i.avail_in=f<c?c-f+5:5-(f-c),i.avail_out=d<p?p-d+257:257-(d-p),u.hold=_,u.bits=E}},{}],49:[function(t,n,a){var i=t("../utils/common"),o=t("./adler32"),u=t("./crc32"),f=t("./inffast"),c=t("./inftrees"),d=1,h=2,p=0,g=-2,m=1,w=852,x=592;function b(I){return(I>>>24&255)+(I>>>8&65280)+((65280&I)<<8)+((255&I)<<24)}function _(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function E(I){var F;return I&&I.state?(F=I.state,I.total_in=I.total_out=F.total=0,I.msg="",F.wrap&&(I.adler=1&F.wrap),F.mode=m,F.last=0,F.havedict=0,F.dmax=32768,F.head=null,F.hold=0,F.bits=0,F.lencode=F.lendyn=new i.Buf32(w),F.distcode=F.distdyn=new i.Buf32(x),F.sane=1,F.back=-1,p):g}function C(I){var F;return I&&I.state?((F=I.state).wsize=0,F.whave=0,F.wnext=0,E(I)):g}function B(I,F){var T,H;return I&&I.state?(H=I.state,F<0?(T=0,F=-F):(T=1+(F>>4),F<48&&(F&=15)),F&&(F<8||15<F)?g:(H.window!==null&&H.wbits!==F&&(H.window=null),H.wrap=T,H.wbits=F,C(I))):g}function N(I,F){var T,H;return I?(H=new _,(I.state=H).window=null,(T=B(I,F))!==p&&(I.state=null),T):g}var A,z,M=!0;function V(I){if(M){var F;for(A=new i.Buf32(512),z=new i.Buf32(32),F=0;F<144;)I.lens[F++]=8;for(;F<256;)I.lens[F++]=9;for(;F<280;)I.lens[F++]=7;for(;F<288;)I.lens[F++]=8;for(c(d,I.lens,0,288,A,0,I.work,{bits:9}),F=0;F<32;)I.lens[F++]=5;c(h,I.lens,0,32,z,0,I.work,{bits:5}),M=!1}I.lencode=A,I.lenbits=9,I.distcode=z,I.distbits=5}function q(I,F,T,H){var Q,W=I.state;return W.window===null&&(W.wsize=1<<W.wbits,W.wnext=0,W.whave=0,W.window=new i.Buf8(W.wsize)),H>=W.wsize?(i.arraySet(W.window,F,T-W.wsize,W.wsize,0),W.wnext=0,W.whave=W.wsize):(H<(Q=W.wsize-W.wnext)&&(Q=H),i.arraySet(W.window,F,T-H,Q,W.wnext),(H-=Q)?(i.arraySet(W.window,F,T-H,H,0),W.wnext=H,W.whave=W.wsize):(W.wnext+=Q,W.wnext===W.wsize&&(W.wnext=0),W.whave<W.wsize&&(W.whave+=Q))),0}a.inflateReset=C,a.inflateReset2=B,a.inflateResetKeep=E,a.inflateInit=function(I){return N(I,15)},a.inflateInit2=N,a.inflate=function(I,F){var T,H,Q,W,Z,X,te,L,U,oe,ie,ne,we,Te,ke,ge,fe,de,be,Pe,D,ve,pe,Y,K=0,ae=new i.Buf8(4),he=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!I||!I.state||!I.output||!I.input&&I.avail_in!==0)return g;(T=I.state).mode===12&&(T.mode=13),Z=I.next_out,Q=I.output,te=I.avail_out,W=I.next_in,H=I.input,X=I.avail_in,L=T.hold,U=T.bits,oe=X,ie=te,ve=p;e:for(;;)switch(T.mode){case m:if(T.wrap===0){T.mode=13;break}for(;U<16;){if(X===0)break e;X--,L+=H[W++]<<U,U+=8}if(2&T.wrap&&L===35615){ae[T.check=0]=255&L,ae[1]=L>>>8&255,T.check=u(T.check,ae,2,0),U=L=0,T.mode=2;break}if(T.flags=0,T.head&&(T.head.done=!1),!(1&T.wrap)||(((255&L)<<8)+(L>>8))%31){I.msg="incorrect header check",T.mode=30;break}if((15&L)!=8){I.msg="unknown compression method",T.mode=30;break}if(U-=4,D=8+(15&(L>>>=4)),T.wbits===0)T.wbits=D;else if(D>T.wbits){I.msg="invalid window size",T.mode=30;break}T.dmax=1<<D,I.adler=T.check=1,T.mode=512&L?10:12,U=L=0;break;case 2:for(;U<16;){if(X===0)break e;X--,L+=H[W++]<<U,U+=8}if(T.flags=L,(255&T.flags)!=8){I.msg="unknown compression method",T.mode=30;break}if(57344&T.flags){I.msg="unknown header flags set",T.mode=30;break}T.head&&(T.head.text=L>>8&1),512&T.flags&&(ae[0]=255&L,ae[1]=L>>>8&255,T.check=u(T.check,ae,2,0)),U=L=0,T.mode=3;case 3:for(;U<32;){if(X===0)break e;X--,L+=H[W++]<<U,U+=8}T.head&&(T.head.time=L),512&T.flags&&(ae[0]=255&L,ae[1]=L>>>8&255,ae[2]=L>>>16&255,ae[3]=L>>>24&255,T.check=u(T.check,ae,4,0)),U=L=0,T.mode=4;case 4:for(;U<16;){if(X===0)break e;X--,L+=H[W++]<<U,U+=8}T.head&&(T.head.xflags=255&L,T.head.os=L>>8),512&T.flags&&(ae[0]=255&L,ae[1]=L>>>8&255,T.check=u(T.check,ae,2,0)),U=L=0,T.mode=5;case 5:if(1024&T.flags){for(;U<16;){if(X===0)break e;X--,L+=H[W++]<<U,U+=8}T.length=L,T.head&&(T.head.extra_len=L),512&T.flags&&(ae[0]=255&L,ae[1]=L>>>8&255,T.check=u(T.check,ae,2,0)),U=L=0}else T.head&&(T.head.extra=null);T.mode=6;case 6:if(1024&T.flags&&(X<(ne=T.length)&&(ne=X),ne&&(T.head&&(D=T.head.extra_len-T.length,T.head.extra||(T.head.extra=new Array(T.head.extra_len)),i.arraySet(T.head.extra,H,W,ne,D)),512&T.flags&&(T.check=u(T.check,H,ne,W)),X-=ne,W+=ne,T.length-=ne),T.length))break e;T.length=0,T.mode=7;case 7:if(2048&T.flags){if(X===0)break e;for(ne=0;D=H[W+ne++],T.head&&D&&T.length<65536&&(T.head.name+=String.fromCharCode(D)),D&&ne<X;);if(512&T.flags&&(T.check=u(T.check,H,ne,W)),X-=ne,W+=ne,D)break e}else T.head&&(T.head.name=null);T.length=0,T.mode=8;case 8:if(4096&T.flags){if(X===0)break e;for(ne=0;D=H[W+ne++],T.head&&D&&T.length<65536&&(T.head.comment+=String.fromCharCode(D)),D&&ne<X;);if(512&T.flags&&(T.check=u(T.check,H,ne,W)),X-=ne,W+=ne,D)break e}else T.head&&(T.head.comment=null);T.mode=9;case 9:if(512&T.flags){for(;U<16;){if(X===0)break e;X--,L+=H[W++]<<U,U+=8}if(L!==(65535&T.check)){I.msg="header crc mismatch",T.mode=30;break}U=L=0}T.head&&(T.head.hcrc=T.flags>>9&1,T.head.done=!0),I.adler=T.check=0,T.mode=12;break;case 10:for(;U<32;){if(X===0)break e;X--,L+=H[W++]<<U,U+=8}I.adler=T.check=b(L),U=L=0,T.mode=11;case 11:if(T.havedict===0)return I.next_out=Z,I.avail_out=te,I.next_in=W,I.avail_in=X,T.hold=L,T.bits=U,2;I.adler=T.check=1,T.mode=12;case 12:if(F===5||F===6)break e;case 13:if(T.last){L>>>=7&U,U-=7&U,T.mode=27;break}for(;U<3;){if(X===0)break e;X--,L+=H[W++]<<U,U+=8}switch(T.last=1&L,U-=1,3&(L>>>=1)){case 0:T.mode=14;break;case 1:if(V(T),T.mode=20,F!==6)break;L>>>=2,U-=2;break e;case 2:T.mode=17;break;case 3:I.msg="invalid block type",T.mode=30}L>>>=2,U-=2;break;case 14:for(L>>>=7&U,U-=7&U;U<32;){if(X===0)break e;X--,L+=H[W++]<<U,U+=8}if((65535&L)!=(L>>>16^65535)){I.msg="invalid stored block lengths",T.mode=30;break}if(T.length=65535&L,U=L=0,T.mode=15,F===6)break e;case 15:T.mode=16;case 16:if(ne=T.length){if(X<ne&&(ne=X),te<ne&&(ne=te),ne===0)break e;i.arraySet(Q,H,W,ne,Z),X-=ne,W+=ne,te-=ne,Z+=ne,T.length-=ne;break}T.mode=12;break;case 17:for(;U<14;){if(X===0)break e;X--,L+=H[W++]<<U,U+=8}if(T.nlen=257+(31&L),L>>>=5,U-=5,T.ndist=1+(31&L),L>>>=5,U-=5,T.ncode=4+(15&L),L>>>=4,U-=4,286<T.nlen||30<T.ndist){I.msg="too many length or distance symbols",T.mode=30;break}T.have=0,T.mode=18;case 18:for(;T.have<T.ncode;){for(;U<3;){if(X===0)break e;X--,L+=H[W++]<<U,U+=8}T.lens[he[T.have++]]=7&L,L>>>=3,U-=3}for(;T.have<19;)T.lens[he[T.have++]]=0;if(T.lencode=T.lendyn,T.lenbits=7,pe={bits:T.lenbits},ve=c(0,T.lens,0,19,T.lencode,0,T.work,pe),T.lenbits=pe.bits,ve){I.msg="invalid code lengths set",T.mode=30;break}T.have=0,T.mode=19;case 19:for(;T.have<T.nlen+T.ndist;){for(;ge=(K=T.lencode[L&(1<<T.lenbits)-1])>>>16&255,fe=65535&K,!((ke=K>>>24)<=U);){if(X===0)break e;X--,L+=H[W++]<<U,U+=8}if(fe<16)L>>>=ke,U-=ke,T.lens[T.have++]=fe;else{if(fe===16){for(Y=ke+2;U<Y;){if(X===0)break e;X--,L+=H[W++]<<U,U+=8}if(L>>>=ke,U-=ke,T.have===0){I.msg="invalid bit length repeat",T.mode=30;break}D=T.lens[T.have-1],ne=3+(3&L),L>>>=2,U-=2}else if(fe===17){for(Y=ke+3;U<Y;){if(X===0)break e;X--,L+=H[W++]<<U,U+=8}U-=ke,D=0,ne=3+(7&(L>>>=ke)),L>>>=3,U-=3}else{for(Y=ke+7;U<Y;){if(X===0)break e;X--,L+=H[W++]<<U,U+=8}U-=ke,D=0,ne=11+(127&(L>>>=ke)),L>>>=7,U-=7}if(T.have+ne>T.nlen+T.ndist){I.msg="invalid bit length repeat",T.mode=30;break}for(;ne--;)T.lens[T.have++]=D}}if(T.mode===30)break;if(T.lens[256]===0){I.msg="invalid code -- missing end-of-block",T.mode=30;break}if(T.lenbits=9,pe={bits:T.lenbits},ve=c(d,T.lens,0,T.nlen,T.lencode,0,T.work,pe),T.lenbits=pe.bits,ve){I.msg="invalid literal/lengths set",T.mode=30;break}if(T.distbits=6,T.distcode=T.distdyn,pe={bits:T.distbits},ve=c(h,T.lens,T.nlen,T.ndist,T.distcode,0,T.work,pe),T.distbits=pe.bits,ve){I.msg="invalid distances set",T.mode=30;break}if(T.mode=20,F===6)break e;case 20:T.mode=21;case 21:if(6<=X&&258<=te){I.next_out=Z,I.avail_out=te,I.next_in=W,I.avail_in=X,T.hold=L,T.bits=U,f(I,ie),Z=I.next_out,Q=I.output,te=I.avail_out,W=I.next_in,H=I.input,X=I.avail_in,L=T.hold,U=T.bits,T.mode===12&&(T.back=-1);break}for(T.back=0;ge=(K=T.lencode[L&(1<<T.lenbits)-1])>>>16&255,fe=65535&K,!((ke=K>>>24)<=U);){if(X===0)break e;X--,L+=H[W++]<<U,U+=8}if(ge&&(240&ge)==0){for(de=ke,be=ge,Pe=fe;ge=(K=T.lencode[Pe+((L&(1<<de+be)-1)>>de)])>>>16&255,fe=65535&K,!(de+(ke=K>>>24)<=U);){if(X===0)break e;X--,L+=H[W++]<<U,U+=8}L>>>=de,U-=de,T.back+=de}if(L>>>=ke,U-=ke,T.back+=ke,T.length=fe,ge===0){T.mode=26;break}if(32&ge){T.back=-1,T.mode=12;break}if(64&ge){I.msg="invalid literal/length code",T.mode=30;break}T.extra=15&ge,T.mode=22;case 22:if(T.extra){for(Y=T.extra;U<Y;){if(X===0)break e;X--,L+=H[W++]<<U,U+=8}T.length+=L&(1<<T.extra)-1,L>>>=T.extra,U-=T.extra,T.back+=T.extra}T.was=T.length,T.mode=23;case 23:for(;ge=(K=T.distcode[L&(1<<T.distbits)-1])>>>16&255,fe=65535&K,!((ke=K>>>24)<=U);){if(X===0)break e;X--,L+=H[W++]<<U,U+=8}if((240&ge)==0){for(de=ke,be=ge,Pe=fe;ge=(K=T.distcode[Pe+((L&(1<<de+be)-1)>>de)])>>>16&255,fe=65535&K,!(de+(ke=K>>>24)<=U);){if(X===0)break e;X--,L+=H[W++]<<U,U+=8}L>>>=de,U-=de,T.back+=de}if(L>>>=ke,U-=ke,T.back+=ke,64&ge){I.msg="invalid distance code",T.mode=30;break}T.offset=fe,T.extra=15&ge,T.mode=24;case 24:if(T.extra){for(Y=T.extra;U<Y;){if(X===0)break e;X--,L+=H[W++]<<U,U+=8}T.offset+=L&(1<<T.extra)-1,L>>>=T.extra,U-=T.extra,T.back+=T.extra}if(T.offset>T.dmax){I.msg="invalid distance too far back",T.mode=30;break}T.mode=25;case 25:if(te===0)break e;if(ne=ie-te,T.offset>ne){if((ne=T.offset-ne)>T.whave&&T.sane){I.msg="invalid distance too far back",T.mode=30;break}we=ne>T.wnext?(ne-=T.wnext,T.wsize-ne):T.wnext-ne,ne>T.length&&(ne=T.length),Te=T.window}else Te=Q,we=Z-T.offset,ne=T.length;for(te<ne&&(ne=te),te-=ne,T.length-=ne;Q[Z++]=Te[we++],--ne;);T.length===0&&(T.mode=21);break;case 26:if(te===0)break e;Q[Z++]=T.length,te--,T.mode=21;break;case 27:if(T.wrap){for(;U<32;){if(X===0)break e;X--,L|=H[W++]<<U,U+=8}if(ie-=te,I.total_out+=ie,T.total+=ie,ie&&(I.adler=T.check=T.flags?u(T.check,Q,ie,Z-ie):o(T.check,Q,ie,Z-ie)),ie=te,(T.flags?L:b(L))!==T.check){I.msg="incorrect data check",T.mode=30;break}U=L=0}T.mode=28;case 28:if(T.wrap&&T.flags){for(;U<32;){if(X===0)break e;X--,L+=H[W++]<<U,U+=8}if(L!==(4294967295&T.total)){I.msg="incorrect length check",T.mode=30;break}U=L=0}T.mode=29;case 29:ve=1;break e;case 30:ve=-3;break e;case 31:return-4;case 32:default:return g}return I.next_out=Z,I.avail_out=te,I.next_in=W,I.avail_in=X,T.hold=L,T.bits=U,(T.wsize||ie!==I.avail_out&&T.mode<30&&(T.mode<27||F!==4))&&q(I,I.output,I.next_out,ie-I.avail_out)?(T.mode=31,-4):(oe-=I.avail_in,ie-=I.avail_out,I.total_in+=oe,I.total_out+=ie,T.total+=ie,T.wrap&&ie&&(I.adler=T.check=T.flags?u(T.check,Q,ie,I.next_out-ie):o(T.check,Q,ie,I.next_out-ie)),I.data_type=T.bits+(T.last?64:0)+(T.mode===12?128:0)+(T.mode===20||T.mode===15?256:0),(oe==0&&ie===0||F===4)&&ve===p&&(ve=-5),ve)},a.inflateEnd=function(I){if(!I||!I.state)return g;var F=I.state;return F.window&&(F.window=null),I.state=null,p},a.inflateGetHeader=function(I,F){var T;return I&&I.state?(2&(T=I.state).wrap)==0?g:((T.head=F).done=!1,p):g},a.inflateSetDictionary=function(I,F){var T,H=F.length;return I&&I.state?(T=I.state).wrap!==0&&T.mode!==11?g:T.mode===11&&o(1,F,H,0)!==T.check?-3:q(I,F,H,H)?(T.mode=31,-4):(T.havedict=1,p):g},a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,n,a){var i=t("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],u=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],f=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(d,h,p,g,m,w,x,b){var _,E,C,B,N,A,z,M,V,q=b.bits,I=0,F=0,T=0,H=0,Q=0,W=0,Z=0,X=0,te=0,L=0,U=null,oe=0,ie=new i.Buf16(16),ne=new i.Buf16(16),we=null,Te=0;for(I=0;I<=15;I++)ie[I]=0;for(F=0;F<g;F++)ie[h[p+F]]++;for(Q=q,H=15;1<=H&&ie[H]===0;H--);if(H<Q&&(Q=H),H===0)return m[w++]=20971520,m[w++]=20971520,b.bits=1,0;for(T=1;T<H&&ie[T]===0;T++);for(Q<T&&(Q=T),I=X=1;I<=15;I++)if(X<<=1,(X-=ie[I])<0)return-1;if(0<X&&(d===0||H!==1))return-1;for(ne[1]=0,I=1;I<15;I++)ne[I+1]=ne[I]+ie[I];for(F=0;F<g;F++)h[p+F]!==0&&(x[ne[h[p+F]]++]=F);if(A=d===0?(U=we=x,19):d===1?(U=o,oe-=257,we=u,Te-=257,256):(U=f,we=c,-1),I=T,N=w,Z=F=L=0,C=-1,B=(te=1<<(W=Q))-1,d===1&&852<te||d===2&&592<te)return 1;for(;;){for(z=I-Z,V=x[F]<A?(M=0,x[F]):x[F]>A?(M=we[Te+x[F]],U[oe+x[F]]):(M=96,0),_=1<<I-Z,T=E=1<<W;m[N+(L>>Z)+(E-=_)]=z<<24|M<<16|V|0,E!==0;);for(_=1<<I-1;L&_;)_>>=1;if(_!==0?(L&=_-1,L+=_):L=0,F++,--ie[I]==0){if(I===H)break;I=h[p+x[F]]}if(Q<I&&(L&B)!==C){for(Z===0&&(Z=Q),N+=T,X=1<<(W=I-Z);W+Z<H&&!((X-=ie[W+Z])<=0);)W++,X<<=1;if(te+=1<<W,d===1&&852<te||d===2&&592<te)return 1;m[C=L&B]=Q<<24|W<<16|N-w|0}}return L!==0&&(m[N+L]=I-Z<<24|64<<16|0),b.bits=Q,0}},{"../utils/common":41}],51:[function(t,n,a){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,n,a){var i=t("../utils/common"),o=0,u=1;function f(K){for(var ae=K.length;0<=--ae;)K[ae]=0}var c=0,d=29,h=256,p=h+1+d,g=30,m=19,w=2*p+1,x=15,b=16,_=7,E=256,C=16,B=17,N=18,A=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],z=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],M=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],V=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],q=new Array(2*(p+2));f(q);var I=new Array(2*g);f(I);var F=new Array(512);f(F);var T=new Array(256);f(T);var H=new Array(d);f(H);var Q,W,Z,X=new Array(g);function te(K,ae,he,me,se){this.static_tree=K,this.extra_bits=ae,this.extra_base=he,this.elems=me,this.max_length=se,this.has_stree=K&&K.length}function L(K,ae){this.dyn_tree=K,this.max_code=0,this.stat_desc=ae}function U(K){return K<256?F[K]:F[256+(K>>>7)]}function oe(K,ae){K.pending_buf[K.pending++]=255&ae,K.pending_buf[K.pending++]=ae>>>8&255}function ie(K,ae,he){K.bi_valid>b-he?(K.bi_buf|=ae<<K.bi_valid&65535,oe(K,K.bi_buf),K.bi_buf=ae>>b-K.bi_valid,K.bi_valid+=he-b):(K.bi_buf|=ae<<K.bi_valid&65535,K.bi_valid+=he)}function ne(K,ae,he){ie(K,he[2*ae],he[2*ae+1])}function we(K,ae){for(var he=0;he|=1&K,K>>>=1,he<<=1,0<--ae;);return he>>>1}function Te(K,ae,he){var me,se,Re=new Array(x+1),De=0;for(me=1;me<=x;me++)Re[me]=De=De+he[me-1]<<1;for(se=0;se<=ae;se++){var Be=K[2*se+1];Be!==0&&(K[2*se]=we(Re[Be]++,Be))}}function ke(K){var ae;for(ae=0;ae<p;ae++)K.dyn_ltree[2*ae]=0;for(ae=0;ae<g;ae++)K.dyn_dtree[2*ae]=0;for(ae=0;ae<m;ae++)K.bl_tree[2*ae]=0;K.dyn_ltree[2*E]=1,K.opt_len=K.static_len=0,K.last_lit=K.matches=0}function ge(K){8<K.bi_valid?oe(K,K.bi_buf):0<K.bi_valid&&(K.pending_buf[K.pending++]=K.bi_buf),K.bi_buf=0,K.bi_valid=0}function fe(K,ae,he,me){var se=2*ae,Re=2*he;return K[se]<K[Re]||K[se]===K[Re]&&me[ae]<=me[he]}function de(K,ae,he){for(var me=K.heap[he],se=he<<1;se<=K.heap_len&&(se<K.heap_len&&fe(ae,K.heap[se+1],K.heap[se],K.depth)&&se++,!fe(ae,me,K.heap[se],K.depth));)K.heap[he]=K.heap[se],he=se,se<<=1;K.heap[he]=me}function be(K,ae,he){var me,se,Re,De,Be=0;if(K.last_lit!==0)for(;me=K.pending_buf[K.d_buf+2*Be]<<8|K.pending_buf[K.d_buf+2*Be+1],se=K.pending_buf[K.l_buf+Be],Be++,me===0?ne(K,se,ae):(ne(K,(Re=T[se])+h+1,ae),(De=A[Re])!==0&&ie(K,se-=H[Re],De),ne(K,Re=U(--me),he),(De=z[Re])!==0&&ie(K,me-=X[Re],De)),Be<K.last_lit;);ne(K,E,ae)}function Pe(K,ae){var he,me,se,Re=ae.dyn_tree,De=ae.stat_desc.static_tree,Be=ae.stat_desc.has_stree,ze=ae.stat_desc.elems,$=-1;for(K.heap_len=0,K.heap_max=w,he=0;he<ze;he++)Re[2*he]!==0?(K.heap[++K.heap_len]=$=he,K.depth[he]=0):Re[2*he+1]=0;for(;K.heap_len<2;)Re[2*(se=K.heap[++K.heap_len]=$<2?++$:0)]=1,K.depth[se]=0,K.opt_len--,Be&&(K.static_len-=De[2*se+1]);for(ae.max_code=$,he=K.heap_len>>1;1<=he;he--)de(K,Re,he);for(se=ze;he=K.heap[1],K.heap[1]=K.heap[K.heap_len--],de(K,Re,1),me=K.heap[1],K.heap[--K.heap_max]=he,K.heap[--K.heap_max]=me,Re[2*se]=Re[2*he]+Re[2*me],K.depth[se]=(K.depth[he]>=K.depth[me]?K.depth[he]:K.depth[me])+1,Re[2*he+1]=Re[2*me+1]=se,K.heap[1]=se++,de(K,Re,1),2<=K.heap_len;);K.heap[--K.heap_max]=K.heap[1],(function(k,R){var G,ee,J,O,le,_e,ye=R.dyn_tree,Se=R.max_code,Oe=R.stat_desc.static_tree,Ie=R.stat_desc.has_stree,We=R.stat_desc.extra_bits,$e=R.stat_desc.extra_base,He=R.stat_desc.max_length,rt=0;for(O=0;O<=x;O++)k.bl_count[O]=0;for(ye[2*k.heap[k.heap_max]+1]=0,G=k.heap_max+1;G<w;G++)He<(O=ye[2*ye[2*(ee=k.heap[G])+1]+1]+1)&&(O=He,rt++),ye[2*ee+1]=O,Se<ee||(k.bl_count[O]++,le=0,$e<=ee&&(le=We[ee-$e]),_e=ye[2*ee],k.opt_len+=_e*(O+le),Ie&&(k.static_len+=_e*(Oe[2*ee+1]+le)));if(rt!==0){do{for(O=He-1;k.bl_count[O]===0;)O--;k.bl_count[O]--,k.bl_count[O+1]+=2,k.bl_count[He]--,rt-=2}while(0<rt);for(O=He;O!==0;O--)for(ee=k.bl_count[O];ee!==0;)Se<(J=k.heap[--G])||(ye[2*J+1]!==O&&(k.opt_len+=(O-ye[2*J+1])*ye[2*J],ye[2*J+1]=O),ee--)}})(K,ae),Te(Re,$,K.bl_count)}function D(K,ae,he){var me,se,Re=-1,De=ae[1],Be=0,ze=7,$=4;for(De===0&&(ze=138,$=3),ae[2*(he+1)+1]=65535,me=0;me<=he;me++)se=De,De=ae[2*(me+1)+1],++Be<ze&&se===De||(Be<$?K.bl_tree[2*se]+=Be:se!==0?(se!==Re&&K.bl_tree[2*se]++,K.bl_tree[2*C]++):Be<=10?K.bl_tree[2*B]++:K.bl_tree[2*N]++,Re=se,$=(Be=0)===De?(ze=138,3):se===De?(ze=6,3):(ze=7,4))}function ve(K,ae,he){var me,se,Re=-1,De=ae[1],Be=0,ze=7,$=4;for(De===0&&(ze=138,$=3),me=0;me<=he;me++)if(se=De,De=ae[2*(me+1)+1],!(++Be<ze&&se===De)){if(Be<$)for(;ne(K,se,K.bl_tree),--Be!=0;);else se!==0?(se!==Re&&(ne(K,se,K.bl_tree),Be--),ne(K,C,K.bl_tree),ie(K,Be-3,2)):Be<=10?(ne(K,B,K.bl_tree),ie(K,Be-3,3)):(ne(K,N,K.bl_tree),ie(K,Be-11,7));Re=se,$=(Be=0)===De?(ze=138,3):se===De?(ze=6,3):(ze=7,4)}}f(X);var pe=!1;function Y(K,ae,he,me){ie(K,(c<<1)+(me?1:0),3),(function(se,Re,De,Be){ge(se),oe(se,De),oe(se,~De),i.arraySet(se.pending_buf,se.window,Re,De,se.pending),se.pending+=De})(K,ae,he)}a._tr_init=function(K){pe||((function(){var ae,he,me,se,Re,De=new Array(x+1);for(se=me=0;se<d-1;se++)for(H[se]=me,ae=0;ae<1<<A[se];ae++)T[me++]=se;for(T[me-1]=se,se=Re=0;se<16;se++)for(X[se]=Re,ae=0;ae<1<<z[se];ae++)F[Re++]=se;for(Re>>=7;se<g;se++)for(X[se]=Re<<7,ae=0;ae<1<<z[se]-7;ae++)F[256+Re++]=se;for(he=0;he<=x;he++)De[he]=0;for(ae=0;ae<=143;)q[2*ae+1]=8,ae++,De[8]++;for(;ae<=255;)q[2*ae+1]=9,ae++,De[9]++;for(;ae<=279;)q[2*ae+1]=7,ae++,De[7]++;for(;ae<=287;)q[2*ae+1]=8,ae++,De[8]++;for(Te(q,p+1,De),ae=0;ae<g;ae++)I[2*ae+1]=5,I[2*ae]=we(ae,5);Q=new te(q,A,h+1,p,x),W=new te(I,z,0,g,x),Z=new te(new Array(0),M,0,m,_)})(),pe=!0),K.l_desc=new L(K.dyn_ltree,Q),K.d_desc=new L(K.dyn_dtree,W),K.bl_desc=new L(K.bl_tree,Z),K.bi_buf=0,K.bi_valid=0,ke(K)},a._tr_stored_block=Y,a._tr_flush_block=function(K,ae,he,me){var se,Re,De=0;0<K.level?(K.strm.data_type===2&&(K.strm.data_type=(function(Be){var ze,$=4093624447;for(ze=0;ze<=31;ze++,$>>>=1)if(1&$&&Be.dyn_ltree[2*ze]!==0)return o;if(Be.dyn_ltree[18]!==0||Be.dyn_ltree[20]!==0||Be.dyn_ltree[26]!==0)return u;for(ze=32;ze<h;ze++)if(Be.dyn_ltree[2*ze]!==0)return u;return o})(K)),Pe(K,K.l_desc),Pe(K,K.d_desc),De=(function(Be){var ze;for(D(Be,Be.dyn_ltree,Be.l_desc.max_code),D(Be,Be.dyn_dtree,Be.d_desc.max_code),Pe(Be,Be.bl_desc),ze=m-1;3<=ze&&Be.bl_tree[2*V[ze]+1]===0;ze--);return Be.opt_len+=3*(ze+1)+5+5+4,ze})(K),se=K.opt_len+3+7>>>3,(Re=K.static_len+3+7>>>3)<=se&&(se=Re)):se=Re=he+5,he+4<=se&&ae!==-1?Y(K,ae,he,me):K.strategy===4||Re===se?(ie(K,2+(me?1:0),3),be(K,q,I)):(ie(K,4+(me?1:0),3),(function(Be,ze,$,k){var R;for(ie(Be,ze-257,5),ie(Be,$-1,5),ie(Be,k-4,4),R=0;R<k;R++)ie(Be,Be.bl_tree[2*V[R]+1],3);ve(Be,Be.dyn_ltree,ze-1),ve(Be,Be.dyn_dtree,$-1)})(K,K.l_desc.max_code+1,K.d_desc.max_code+1,De+1),be(K,K.dyn_ltree,K.dyn_dtree)),ke(K),me&&ge(K)},a._tr_tally=function(K,ae,he){return K.pending_buf[K.d_buf+2*K.last_lit]=ae>>>8&255,K.pending_buf[K.d_buf+2*K.last_lit+1]=255&ae,K.pending_buf[K.l_buf+K.last_lit]=255&he,K.last_lit++,ae===0?K.dyn_ltree[2*he]++:(K.matches++,ae--,K.dyn_ltree[2*(T[he]+h+1)]++,K.dyn_dtree[2*U(ae)]++),K.last_lit===K.lit_bufsize-1},a._tr_align=function(K){ie(K,2,3),ne(K,E,q),(function(ae){ae.bi_valid===16?(oe(ae,ae.bi_buf),ae.bi_buf=0,ae.bi_valid=0):8<=ae.bi_valid&&(ae.pending_buf[ae.pending++]=255&ae.bi_buf,ae.bi_buf>>=8,ae.bi_valid-=8)})(K)}},{"../utils/common":41}],53:[function(t,n,a){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,n,a){(function(i){(function(o,u){if(!o.setImmediate){var f,c,d,h,p=1,g={},m=!1,w=o.document,x=Object.getPrototypeOf&&Object.getPrototypeOf(o);x=x&&x.setTimeout?x:o,f={}.toString.call(o.process)==="[object process]"?function(C){process.nextTick(function(){_(C)})}:(function(){if(o.postMessage&&!o.importScripts){var C=!0,B=o.onmessage;return o.onmessage=function(){C=!1},o.postMessage("","*"),o.onmessage=B,C}})()?(h="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",E,!1):o.attachEvent("onmessage",E),function(C){o.postMessage(h+C,"*")}):o.MessageChannel?((d=new MessageChannel).port1.onmessage=function(C){_(C.data)},function(C){d.port2.postMessage(C)}):w&&"onreadystatechange"in w.createElement("script")?(c=w.documentElement,function(C){var B=w.createElement("script");B.onreadystatechange=function(){_(C),B.onreadystatechange=null,c.removeChild(B),B=null},c.appendChild(B)}):function(C){setTimeout(_,0,C)},x.setImmediate=function(C){typeof C!="function"&&(C=new Function(""+C));for(var B=new Array(arguments.length-1),N=0;N<B.length;N++)B[N]=arguments[N+1];var A={callback:C,args:B};return g[p]=A,f(p),p++},x.clearImmediate=b}function b(C){delete g[C]}function _(C){if(m)setTimeout(_,0,C);else{var B=g[C];if(B){m=!0;try{(function(N){var A=N.callback,z=N.args;switch(z.length){case 0:A();break;case 1:A(z[0]);break;case 2:A(z[0],z[1]);break;case 3:A(z[0],z[1],z[2]);break;default:A.apply(u,z)}})(B)}finally{b(C),m=!1}}}}function E(C){C.source===o&&typeof C.data=="string"&&C.data.indexOf(h)===0&&_(+C.data.slice(h.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof zu<"u"?zu:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Vc)),Vc.exports}var a2=n2();const i2=Bl(a2),rm=new Set(["png","jpg","jpeg","gif","webp","svg"]);async function s2(r){const e=[],t=[],n={};for(const a of r.files){const i=a.name,o=a.webkitRelativePath?a.webkitRelativePath:i,u=i.toLowerCase(),f=u.includes(".")?u.split(".").pop():"";if(f==="zip"){const c=await i2.loadAsync(await a.arrayBuffer()),d=Object.values(c.files);for(const h of d){if(h.dir)continue;const p=h.name,g=p.toLowerCase(),m=g.includes(".")?g.split(".").pop():"";if(m==="tex"){const w=await h.async("string");t.push({path:p,content:w})}else if(rm.has(m)){const w=await h.async("blob");n[p]=URL.createObjectURL(w)}}continue}if(f==="tex"){const c=await a.text();t.push({path:o,content:c});continue}if(rm.has(f)){n[o]=URL.createObjectURL(a);continue}e.push(`: ${o}`)}return t.length===0&&e.push(" .tex "),{latexFiles:t,assets:n,warnings:e}}function o2(r){return r.split(`
`).map(e=>{let t="",n=!1;for(let a=0;a<e.length;a++){const i=e[a];if(n){t+=i,n=!1;continue}if(i==="\\"){t+=i,n=!0;continue}if(i==="%")break;t+=i}return t}).join(`
`)}const u2=/^\\(section|subsection|subsubsection)\*?\{(.+?)\}\s*$/m;function l2(r,e={}){const t=e.maxChars??6e3,n=[],a=[...r].sort((i,o)=>i.path.localeCompare(o.path));for(const i of a){const u=o2(i.content).split(`
`);let f=[`${i.path}`],c=[],d=i.path;const h=()=>{const p=c.join(`
`).trim();if(!p)return;const g=f2(i.path,n.length);n.push({id:g,file:i.path,title:d,sectionPath:[...f],text:p}),c=[]};for(let p=0;p<u.length;p++){const g=u[p],m=g.match(u2);if(m){h();const w=m[1],x=c2(m[2]);f=d2(f,w,x,i.path),d=f.slice(-1)[0]??x,c.push(g);continue}c.push(g),c.join(`
`).length>t&&h()}h()}return h2(n,t)}function f2(r,e){return`chunk:${r}:${e}`}function c2(r){return r.replace(/\s+/g," ").trim()}function d2(r,e,t,n){const a=r.length?[r[0]]:[n],i=r.slice(1),o=e==="section"?1:e==="subsection"?2:3,u=i.slice(0,o-1);return u.push(t),[...a,...u]}function h2(r,e){const t=[];for(const n of r){if(n.text.length<=e){t.push(n);continue}const a=n.text.split(/\n\s*\n+/);let i="",o=0;for(const u of a){const f=(i?`${i}

${u}`:u).trim();f.length>e&&i?(t.push({...n,id:`${n.id}:p${o++}`,text:i.trim()}),i=u):i=f}i.trim()&&t.push({...n,id:`${n.id}:p${o++}`,text:i.trim()})}return t}const v2={theorem:"Theorem",lemma:"Lemma",corollary:"Corollary",definition:"Definition",axiom:"Axiom",proposition:"Proposition",conclusion:"Conclusion"};function p2(r){const{chunk:e,selectedEntities:t,selectedRelations:n,knownLabelToNodeId:a}=r,i=[],o=[],u=`sec:${e.sectionPath.join(" / ")}`;t.includes("Conclusion")&&i.push({id:u,type:"Conclusion",title:e.sectionPath.slice(1).join(" / ")||e.title,content:"",source:{file:e.file,sectionPath:e.sectionPath}});const f=g2(e,t,a);if(i.push(...f),t.includes("Formula")){const c=m2(e,a);i.push(...c)}if(n.includes("Contains"))for(const c of i)c.id!==u&&u.startsWith("sec:")&&i.find(d=>d.id===u)&&o.push({type:"Contains",source:u,target:c.id,meta:{chunkId:e.id}});if(n.includes("DependsOn")){const c=w2(e.text),d=i.filter(h=>h.id!==u);for(const h of d)for(const p of c){const g=a.get(p);g&&g!==h.id&&o.push({type:"DependsOn",source:h.id,target:g,evidence:`reference: ${p}`,meta:{chunkId:e.id}})}}if(n.includes("DerivedFrom")){const c=/derived\s+from\s+(\\ref\{([^}]+)\})/gi,d=[...e.text.matchAll(c)];if(d.length){const h=i.filter(p=>p.id!==u);for(const p of h)for(const g of d){const m=g[2],w=a.get(m);w&&w!==p.id&&o.push({type:"DerivedFrom",source:p.id,target:w,evidence:g[0],meta:{chunkId:e.id}})}}}return{nodes:x2(i),edges:b2(o)}}function g2(r,e,t){const n=[],a=/\\begin\{(theorem|lemma|corollary|definition|axiom|proposition|conclusion)\}([\s\S]*?)\\end\{\1\}/gi;let i=0;for(const o of r.text.matchAll(a)){const u=(o[1]??"").toLowerCase(),f=v2[u];if(!f||!e.includes(f))continue;const c=(o[2]??"").trim(),d=W0(c),h=y2(o[0])??`${f} ${i+1}`,p=d?`tex:${d}`:`${r.id}:${u}:${i}`;i++;const g={id:p,type:f,title:h,content:c,source:{file:r.file,latexLabel:d??void 0,sectionPath:r.sectionPath}};n.push(g),d&&t.set(d,p)}return n}function m2(r,e){const t=[],n=[/\\begin\{equation\}([\s\S]*?)\\end\{equation\}/gi,/\\begin\{align\}([\s\S]*?)\\end\{align\}/gi,/\$\$([\s\S]*?)\$\$/g,/\\\[([\s\S]*?)\\\]/g];let a=0;for(const i of n)for(const o of r.text.matchAll(i)){const u=(o[1]??"").trim();if(!u)continue;const f=W0(u),c=f?`tex:${f}`:`${r.id}:formula:${a++}`,d=f?`Formula (${f})`:`Formula ${a}`;t.push({id:c,type:"Formula",title:d,content:u,source:{file:r.file,latexLabel:f??void 0,sectionPath:r.sectionPath}}),f&&e.set(f,c)}return t}function W0(r){const e=r.match(/\\label\{([^}]+)\}/);return e?e[1].trim():null}function y2(r){const e=r.match(/\\begin\{[a-zA-Z*]+\}\s*\[([^\]]+)\]/);return e?e[1].trim():null}function w2(r){const e=new Set;for(const t of r.matchAll(/\\(eqref|ref|autoref|cref)\{([^}]+)\}/g))e.add(t[2].trim());return[...e.values()]}function x2(r){const e=new Map;for(const t of r){const n=e.get(t.id);e.set(t.id,n?{...n,...t,meta:{...n.meta,...t.meta}}:t)}return[...e.values()]}function b2(r){const e=n=>{var a;return`${n.source}::${n.type}::${n.target}::${String(((a=n.meta)==null?void 0:a.chunkId)??"")}`},t=new Map;for(const n of r)t.set(e(n),n);return[...t.values()]}function _2(r){const{chunk:e,selectedEntities:t,selectedRelations:n,graphSummary:a,userNotes:i}=r;return`
LaTeX  LaTeX  JSON markdown

## 
${t.map(o=>`- ${o}`).join(`
`)}

## 
${n.map(o=>`- ${o}`).join(`
`)}

## 
- ///////label
- 
-  \\label / \\ref / \\eqref 

## 
${a}

${i!=null&&i.trim()?`## 
${i.trim()}
`:""}

## 
- chunk_id: ${e.id}
- file: ${e.file}
- section_path: ${e.sectionPath.join(" / ")}
- title: ${e.title}

## LaTeX 
${e.text}

##  JSON 
 nodes  edges
{
  "nodes": [
    {
      "id": "string ( tex:<label> label  chunk:<chunkId>:<type>:<idx>)",
      "type": "EntityType",
      "title": "//",
      "content": " LaTeX ",
      "source": { "file": "string", "latexLabel": "string|null", "sectionPath": ["..."] },
      "meta": { "chunkId": "string", "confidence": 0.0 }
    }
  ],
  "edges": [
    {
      "type": "RelationType",
      "source": "node.id",
      "target": "node.id",
      "evidence": "",
      "meta": { "chunkId": "string", "confidence": 0.0 }
    }
  ]
}


-  JSON markdown
- nodes[].type edges[].type 
- edges  source/target  nodes  id id id  title/content/source
`.trim()}function E2(r,e=120){const t=r.nodes.slice(0,e),n=t.map(i=>{var u;const o=typeof((u=i.source)==null?void 0:u.latexLabel)=="string"?` label=${i.source.latexLabel}`:"";return`- ${i.id} | ${i.type} | ${S2(i.title,80)}${o}`}),a=r.edges.slice(0,80).map(i=>`- (${i.type}) ${i.source} -> ${i.target}`);return[`nodes(${r.nodes.length}) showing ${t.length}:`,...n,"",`edges(${r.edges.length}) showing ${a.length}:`,...a].join(`
`).trim()}function S2(r,e){return r.length<=e?r:r.slice(0,e-1)+""}async function k2(r){try{const e=await fetch(`${r.baseUrl.replace(/\/$/,"")}/models`,{method:"GET",headers:{Authorization:`Bearer ${r.apiKey}`},signal:r.signal});return e.ok?{ok:!0,message:" models "}:{ok:!1,message:`HTTP ${e.status}`,detail:await H0(e)}}catch(e){return{ok:!1,message:" CORS / Key / ",detail:String((e==null?void 0:e.message)??e)}}}async function C2(r){const e=`${r.baseUrl.replace(/\/$/,"")}/responses`,t={model:r.model,input:r.prompt,temperature:r.temperature,top_p:r.topP,response_format:{type:"json_object"}},n=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r.apiKey}`},body:JSON.stringify(t),signal:r.signal});if(!n.ok)throw new Error(`OpenAI HTTP ${n.status}: ${await H0(n)}`);const a=await n.json(),i=T2(a);return{...JSON.parse(i),rawText:i}}function T2(r){var t,n,a,i;if(typeof(r==null?void 0:r.output_text)=="string")return r.output_text;const e=(i=(a=(n=(t=r==null?void 0:r.output)==null?void 0:t[0])==null?void 0:n.content)==null?void 0:a[0])==null?void 0:i.text;return typeof e=="string"?e:JSON.stringify(r)}async function H0(r){try{return await r.text()}catch{return""}}async function P2(r){try{const e=await fetch(`${r.baseUrl.replace(/\/$/,"")}/v1/models`,{method:"GET",headers:{"x-api-key":r.apiKey,"anthropic-version":"2023-06-01"},signal:r.signal});return e.ok?{ok:!0,message:" models "}:{ok:!1,message:`HTTP ${e.status}`,detail:await G0(e)}}catch(e){return{ok:!1,message:" CORS / Key / ",detail:String((e==null?void 0:e.message)??e)}}}async function R2(r){const e=`${r.baseUrl.replace(/\/$/,"")}/v1/messages`,t={model:r.model,max_tokens:2e3,temperature:r.temperature,top_p:r.topP,messages:[{role:"user",content:r.prompt}]},n=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":r.apiKey,"anthropic-version":"2023-06-01"},body:JSON.stringify(t),signal:r.signal});if(!n.ok)throw new Error(`Anthropic HTTP ${n.status}: ${await G0(n)}`);const a=await n.json(),i=B2(a);return{...JSON.parse(i),rawText:i}}function B2(r){var t;const e=r==null?void 0:r.content;if(Array.isArray(e)){const n=(t=e.find(a=>(a==null?void 0:a.type)==="text"))==null?void 0:t.text;if(typeof n=="string")return n}return typeof(r==null?void 0:r.text)=="string"?r.text:JSON.stringify(r)}async function G0(r){try{return await r.text()}catch{return""}}async function A2(r){try{const e=`${r.baseUrl.replace(/\/$/,"")}/v1beta/models?key=${encodeURIComponent(r.apiKey)}`,t=await fetch(e,{method:"GET",signal:r.signal});return t.ok?{ok:!0,message:" models "}:{ok:!1,message:`HTTP ${t.status}`,detail:await K0(t)}}catch(e){return{ok:!1,message:" CORS / Key / ",detail:String((e==null?void 0:e.message)??e)}}}async function D2(r){const e=r.model.startsWith("models/")?r.model:`models/${r.model}`,t=`${r.baseUrl.replace(/\/$/,"")}/v1beta/${e}:generateContent?key=${encodeURIComponent(r.apiKey)}`,n={contents:[{role:"user",parts:[{text:r.prompt}]}],generationConfig:{temperature:r.temperature,topP:r.topP,responseMimeType:"application/json"}},a=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n),signal:r.signal});if(!a.ok)throw new Error(`Gemini HTTP ${a.status}: ${await K0(a)}`);const i=await a.json(),o=I2(i);return{...JSON.parse(o),rawText:o}}function I2(r){var t,n,a,i,o;const e=(o=(i=(a=(n=(t=r==null?void 0:r.candidates)==null?void 0:t[0])==null?void 0:n.content)==null?void 0:a.parts)==null?void 0:i[0])==null?void 0:o.text;return typeof e=="string"?e:JSON.stringify(r)}async function K0(r){try{return await r.text()}catch{return""}}async function L2(r){const e=E2(r.graph,160),t=_2({chunk:r.chunk,selectedEntities:r.selectedEntities,selectedRelations:r.selectedRelations,graphSummary:e,userNotes:r.userNotes}),n={baseUrl:r.baseUrl,apiKey:r.apiKey,model:r.model,prompt:t,temperature:r.temperature,topP:r.topP,signal:r.signal},a=r.protocol==="openai"?await C2(n):r.protocol==="anthropic"?await R2(n):await D2(n);return N2(a)}function N2(r){const e=Array.isArray(r==null?void 0:r.nodes)?r.nodes:[],t=Array.isArray(r==null?void 0:r.edges)?r.edges:[];return{nodes:e.filter(n=>n&&typeof n.id=="string"&&typeof n.type=="string"&&typeof n.title=="string").map(n=>({id:n.id,type:n.type,title:n.title,content:typeof n.content=="string"?n.content:void 0,source:typeof n.source=="object"?n.source:void 0,meta:typeof n.meta=="object"?n.meta:void 0})),edges:t.filter(n=>n&&typeof n.type=="string"&&typeof n.source=="string"&&typeof n.target=="string"&&n.source!==n.target).map(n=>({type:n.type,source:n.source,target:n.target,evidence:typeof n.evidence=="string"?n.evidence:void 0,meta:typeof n.meta=="object"?n.meta:void 0}))}}async function O2(r){var a,i;const e=lt.getState();e.setError(null),e.setInfo(null),e.setProcessing({status:"extracting",totalChunks:r.chunks.length,doneChunks:0});const t=new AbortController;e.setProcessing({abortController:t});const n=new Map;for(const o of e.graph.nodes){const u=typeof((a=o.source)==null?void 0:a.latexLabel)=="string"?o.source.latexLabel:null;u&&n.set(u,o.id)}try{for(let o=0;o<r.chunks.length;o++){if(t.signal.aborted){lt.getState().setProcessing({status:"stopped",abortController:void 0});return}const u=r.chunks[o];e.setProcessing({currentChunkTitle:u.title});let f;r.llm.enabled&&r.llm.apiKey.trim()?f=await L2({protocol:r.llm.protocol,baseUrl:r.llm.baseUrl,apiKey:r.llm.apiKey,model:r.llm.model,temperature:r.llm.temperature,topP:r.llm.topP,chunk:u,selectedEntities:r.schema.entityTypes,selectedRelations:r.schema.relationTypes,graph:lt.getState().graph,userNotes:r.schema.notes??"",signal:t.signal}):f=p2({chunk:u,selectedEntities:r.schema.entityTypes,selectedRelations:r.schema.relationTypes,knownLabelToNodeId:n});for(const c of f.nodes){const d=typeof((i=c==null?void 0:c.source)==null?void 0:i.latexLabel)=="string"?c.source.latexLabel:null;d&&typeof(c==null?void 0:c.id)=="string"&&n.set(d,c.id)}e.mergeGraph({nodes:f.nodes,edges:f.edges}),e.setProcessing({doneChunks:o+1})}e.setProcessing({status:"done",abortController:void 0}),e.setInfo("")}catch(o){if(t.signal.aborted){e.setProcessing({status:"stopped",abortController:void 0});return}e.setProcessing({status:"error",abortController:void 0}),e.setError(String((o==null?void 0:o.message)??o))}}function M2(){const r=lt(d=>d.latexFiles),e=lt(d=>d.processing);lt(d=>d.schema),lt(d=>d.llm);const[t,n]=lr.useState([]),[a,i]=lr.useState(6e3),o=e.status!=="idle"&&e.status!=="done"&&e.status!=="stopped"&&e.status!=="error",u=lr.useMemo(()=>` .tex: ${r.length}`,[r.length]);async function f(d){if(!d)return;lt.getState().setError(null),lt.getState().setInfo(null);const h=Array.from(d),{latexFiles:p,assets:g,warnings:m}=await s2({files:h});n(m),lt.getState().setLatexFiles(p),lt.getState().setAssets(g),lt.getState().setInfo(` ${p.length}  .tex  ${Object.keys(g).length} `)}async function c(){const d=lt.getState();if(!d.latexFiles.length){d.setError(" .tex  zip/");return}d.setProcessing({status:"chunking",totalChunks:0,doneChunks:0});const h=l2(d.latexFiles,{maxChars:a});d.setInfo(`${h.length} maxChars=${a}`),await O2({chunks:h,schema:d.schema,llm:d.llm})}return Ae.jsxs("div",{className:"card",children:[Ae.jsx("div",{className:"h1",children:" LaTeX / zip / "}),Ae.jsx("div",{className:"muted",children:" 1 zip .tex   2  3"}),Ae.jsx("div",{className:"label",children:"zip / "}),Ae.jsx("input",{className:"input",type:"file",multiple:!0,onChange:d=>f(d.target.files),disabled:o}),Ae.jsx("div",{className:"label",children:""}),Ae.jsx("input",{className:"input",type:"file",multiple:!0,webkitdirectory:"true",directory:"true",onChange:d=>f(d.target.files),disabled:o}),Ae.jsx("div",{className:"label",children:""}),Ae.jsx("input",{className:"input mono",type:"number",min:1500,step:500,value:a,onChange:d=>i(Number(d.target.value)),disabled:o}),Ae.jsx("div",{className:"muted",style:{marginTop:8},children:u}),t.length?Ae.jsxs("div",{className:"muted",style:{marginTop:8},children:[Ae.jsx("b",{children:""}),"",Ae.jsxs("ul",{style:{margin:"6px 0 0 18px"},children:[t.slice(0,6).map((d,h)=>Ae.jsx("li",{children:d},h)),t.length>6?Ae.jsxs("li",{children:["...  ",t.length-6," "]}):null]})]}):null,Ae.jsxs("div",{className:"row",style:{marginTop:12},children:[Ae.jsx("button",{className:"btn primary",onClick:c,disabled:o,children:""}),Ae.jsx("button",{className:"btn danger",onClick:()=>lt.getState().stopProcessing(),disabled:e.status==="idle",children:""})]}),Ae.jsxs("div",{className:"muted",style:{marginTop:8},children:["",Ae.jsx("span",{className:"mono",children:e.currentChunkTitle??"-"})]})]})}function z2(){const r=lt(h=>h.schema),e=lt(h=>h.llm),t=lt(h=>h.processing),[n,a]=lr.useState(!1),[i,o]=lr.useState(null),u=t.status!=="idle"&&t.status!=="done"&&t.status!=="stopped"&&t.status!=="error",f=lr.useMemo(()=>new Set(r.entityTypes),[r.entityTypes]),c=lr.useMemo(()=>new Set(r.relationTypes),[r.relationTypes]);async function d(){a(!0),o(null);const h=new AbortController;try{const p=e.baseUrl.trim(),g=e.apiKey.trim();if(!p||!g){o(" Base URL  API Key");return}const m=e.protocol==="openai"?await k2({baseUrl:p,apiKey:g,model:e.model,signal:h.signal}):e.protocol==="anthropic"?await P2({baseUrl:p,apiKey:g,model:e.model,signal:h.signal}):await A2({baseUrl:p,apiKey:g,model:e.model,signal:h.signal});o(m.ok?`OK: ${m.message}`:`FAIL: ${m.message}${m.detail?`
${m.detail}`:""}`)}finally{a(!1)}}return Ae.jsxs("div",{className:"card",children:[Ae.jsx("div",{className:"h1",children:"/ + LLM "}),Ae.jsxs("div",{className:"muted",children:["/LLM  LLM ",Ae.jsx("br",{})," LLM  CORS/Key  Key"]}),Ae.jsx("div",{className:"label",children:"Entities"}),Ae.jsx("div",{className:"row",children:j0.map(h=>Ae.jsxs("label",{className:"pill",style:{cursor:"pointer"},children:[Ae.jsx("input",{type:"checkbox",checked:f.has(h),onChange:p=>{const g=new Set(r.entityTypes);p.target.checked?g.add(h):g.delete(h),lt.getState().setSchema({entityTypes:[...g.values()]})},disabled:u,style:{marginRight:6}}),h]},h))}),Ae.jsx("div",{className:"label",children:"Relations"}),Ae.jsx("div",{className:"row",children:q0.map(h=>Ae.jsxs("label",{className:"pill",style:{cursor:"pointer"},children:[Ae.jsx("input",{type:"checkbox",checked:c.has(h),onChange:p=>{const g=new Set(r.relationTypes);p.target.checked?g.add(h):g.delete(h),lt.getState().setSchema({relationTypes:[...g.values()]})},disabled:u,style:{marginRight:6}}),h]},h))}),Ae.jsx("div",{className:"label",children:" LLM "}),Ae.jsx("textarea",{className:"input",value:r.notes??"",onChange:h=>lt.getState().setSchema({notes:h.target.value}),disabled:u,placeholder:"DerivedFrom..."}),Ae.jsx("div",{className:"label",children:" LLM"}),Ae.jsxs("label",{className:"pill",style:{cursor:"pointer"},children:[Ae.jsx("input",{type:"checkbox",checked:e.enabled,onChange:h=>lt.getState().setLlm({enabled:h.target.checked}),disabled:u,style:{marginRight:6}})," LLM "]}),e.enabled?Ae.jsxs(Ae.Fragment,{children:[Ae.jsx("div",{className:"label",children:"openai / claude / gemini"}),Ae.jsxs("select",{className:"input",value:e.protocol,onChange:h=>{const p=h.target.value,g=p==="openai"?{baseUrl:"https://api.openai.com/v1",model:"gpt-5"}:p==="anthropic"?{baseUrl:"https://api.anthropic.com",model:"claude-3-5-sonnet-latest"}:{baseUrl:"https://generativelanguage.googleapis.com",model:"gemini-1.5-pro"};lt.getState().setLlm({protocol:p,...g})},disabled:u,children:[Ae.jsx("option",{value:"openai",children:"openai"}),Ae.jsx("option",{value:"anthropic",children:"claude (anthropic)"}),Ae.jsx("option",{value:"gemini",children:"gemini"})]}),Ae.jsx("div",{className:"label",children:"Base URL"}),Ae.jsx("input",{className:"input mono",value:e.baseUrl,onChange:h=>lt.getState().setLlm({baseUrl:h.target.value}),disabled:u,placeholder:" https://api.openai.com/v1"}),Ae.jsx("div",{className:"label",children:"Model"}),Ae.jsx("input",{className:"input mono",value:e.model,onChange:h=>lt.getState().setLlm({model:h.target.value}),disabled:u,placeholder:" gpt-5 / claude-... / gemini-..."}),Ae.jsx("div",{className:"label",children:"API Key"}),Ae.jsx("input",{className:"input mono",value:e.apiKey,onChange:h=>lt.getState().setLlm({apiKey:h.target.value}),disabled:u,placeholder:""}),Ae.jsxs("div",{className:"row",style:{marginTop:10},children:[Ae.jsxs("div",{style:{flex:1,minWidth:160},children:[Ae.jsx("div",{className:"label",children:"temperature"}),Ae.jsx("input",{className:"input mono",type:"number",step:.05,min:0,max:2,value:e.temperature,onChange:h=>lt.getState().setLlm({temperature:Number(h.target.value)}),disabled:u})]}),Ae.jsxs("div",{style:{flex:1,minWidth:160},children:[Ae.jsx("div",{className:"label",children:"top_p"}),Ae.jsx("input",{className:"input mono",type:"number",step:.05,min:0,max:1,value:e.topP,onChange:h=>lt.getState().setLlm({topP:Number(h.target.value)}),disabled:u})]})]}),Ae.jsx("div",{className:"row",style:{marginTop:12},children:Ae.jsx("button",{className:"btn ok",onClick:d,disabled:n||u,children:n?"...":""})}),i?Ae.jsxs(Ae.Fragment,{children:[Ae.jsx("div",{className:"label",children:""}),Ae.jsx("textarea",{className:"input mono",value:i,readOnly:!0})]}):null]}):null]})}var jc={},Vs={},nm;function F2(){if(nm)return Vs;nm=1,Vs.byteLength=u,Vs.toByteArray=c,Vs.fromByteArray=p;for(var r=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,i=n.length;a<i;++a)r[a]=n[a],e[n.charCodeAt(a)]=a;e[45]=62,e[95]=63;function o(g){var m=g.length;if(m%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var w=g.indexOf("=");w===-1&&(w=m);var x=w===m?0:4-w%4;return[w,x]}function u(g){var m=o(g),w=m[0],x=m[1];return(w+x)*3/4-x}function f(g,m,w){return(m+w)*3/4-w}function c(g){var m,w=o(g),x=w[0],b=w[1],_=new t(f(g,x,b)),E=0,C=b>0?x-4:x,B;for(B=0;B<C;B+=4)m=e[g.charCodeAt(B)]<<18|e[g.charCodeAt(B+1)]<<12|e[g.charCodeAt(B+2)]<<6|e[g.charCodeAt(B+3)],_[E++]=m>>16&255,_[E++]=m>>8&255,_[E++]=m&255;return b===2&&(m=e[g.charCodeAt(B)]<<2|e[g.charCodeAt(B+1)]>>4,_[E++]=m&255),b===1&&(m=e[g.charCodeAt(B)]<<10|e[g.charCodeAt(B+1)]<<4|e[g.charCodeAt(B+2)]>>2,_[E++]=m>>8&255,_[E++]=m&255),_}function d(g){return r[g>>18&63]+r[g>>12&63]+r[g>>6&63]+r[g&63]}function h(g,m,w){for(var x,b=[],_=m;_<w;_+=3)x=(g[_]<<16&16711680)+(g[_+1]<<8&65280)+(g[_+2]&255),b.push(d(x));return b.join("")}function p(g){for(var m,w=g.length,x=w%3,b=[],_=16383,E=0,C=w-x;E<C;E+=_)b.push(h(g,E,E+_>C?C:E+_));return x===1?(m=g[w-1],b.push(r[m>>2]+r[m<<4&63]+"==")):x===2&&(m=(g[w-2]<<8)+g[w-1],b.push(r[m>>10]+r[m>>4&63]+r[m<<2&63]+"=")),b.join("")}return Vs}var $u={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var am;function U2(){return am||(am=1,$u.read=function(r,e,t,n,a){var i,o,u=a*8-n-1,f=(1<<u)-1,c=f>>1,d=-7,h=t?a-1:0,p=t?-1:1,g=r[e+h];for(h+=p,i=g&(1<<-d)-1,g>>=-d,d+=u;d>0;i=i*256+r[e+h],h+=p,d-=8);for(o=i&(1<<-d)-1,i>>=-d,d+=n;d>0;o=o*256+r[e+h],h+=p,d-=8);if(i===0)i=1-c;else{if(i===f)return o?NaN:(g?-1:1)*(1/0);o=o+Math.pow(2,n),i=i-c}return(g?-1:1)*o*Math.pow(2,i-n)},$u.write=function(r,e,t,n,a,i){var o,u,f,c=i*8-a-1,d=(1<<c)-1,h=d>>1,p=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=n?0:i-1,m=n?1:-1,w=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,o=d):(o=Math.floor(Math.log(e)/Math.LN2),e*(f=Math.pow(2,-o))<1&&(o--,f*=2),o+h>=1?e+=p/f:e+=p*Math.pow(2,1-h),e*f>=2&&(o++,f/=2),o+h>=d?(u=0,o=d):o+h>=1?(u=(e*f-1)*Math.pow(2,a),o=o+h):(u=e*Math.pow(2,h-1)*Math.pow(2,a),o=0));a>=8;r[t+g]=u&255,g+=m,u/=256,a-=8);for(o=o<<a|u,c+=a;c>0;r[t+g]=o&255,g+=m,o/=256,c-=8);r[t+g-m]|=w*128}),$u}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var im;function $2(){return im||(im=1,(function(r){const e=F2(),t=U2(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=u,r.SlowBuffer=_,r.INSPECT_MAX_BYTES=50;const a=2147483647;r.kMaxLength=a,u.TYPED_ARRAY_SUPPORT=i(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const $=new Uint8Array(1),k={foo:function(){return 42}};return Object.setPrototypeOf(k,Uint8Array.prototype),Object.setPrototypeOf($,k),$.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function o($){if($>a)throw new RangeError('The value "'+$+'" is invalid for option "size"');const k=new Uint8Array($);return Object.setPrototypeOf(k,u.prototype),k}function u($,k,R){if(typeof $=="number"){if(typeof k=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return h($)}return f($,k,R)}u.poolSize=8192;function f($,k,R){if(typeof $=="string")return p($,k);if(ArrayBuffer.isView($))return m($);if($==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof $);if(se($,ArrayBuffer)||$&&se($.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(se($,SharedArrayBuffer)||$&&se($.buffer,SharedArrayBuffer)))return w($,k,R);if(typeof $=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const G=$.valueOf&&$.valueOf();if(G!=null&&G!==$)return u.from(G,k,R);const ee=x($);if(ee)return ee;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof $[Symbol.toPrimitive]=="function")return u.from($[Symbol.toPrimitive]("string"),k,R);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof $)}u.from=function($,k,R){return f($,k,R)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function c($){if(typeof $!="number")throw new TypeError('"size" argument must be of type number');if($<0)throw new RangeError('The value "'+$+'" is invalid for option "size"')}function d($,k,R){return c($),$<=0?o($):k!==void 0?typeof R=="string"?o($).fill(k,R):o($).fill(k):o($)}u.alloc=function($,k,R){return d($,k,R)};function h($){return c($),o($<0?0:b($)|0)}u.allocUnsafe=function($){return h($)},u.allocUnsafeSlow=function($){return h($)};function p($,k){if((typeof k!="string"||k==="")&&(k="utf8"),!u.isEncoding(k))throw new TypeError("Unknown encoding: "+k);const R=E($,k)|0;let G=o(R);const ee=G.write($,k);return ee!==R&&(G=G.slice(0,ee)),G}function g($){const k=$.length<0?0:b($.length)|0,R=o(k);for(let G=0;G<k;G+=1)R[G]=$[G]&255;return R}function m($){if(se($,Uint8Array)){const k=new Uint8Array($);return w(k.buffer,k.byteOffset,k.byteLength)}return g($)}function w($,k,R){if(k<0||$.byteLength<k)throw new RangeError('"offset" is outside of buffer bounds');if($.byteLength<k+(R||0))throw new RangeError('"length" is outside of buffer bounds');let G;return k===void 0&&R===void 0?G=new Uint8Array($):R===void 0?G=new Uint8Array($,k):G=new Uint8Array($,k,R),Object.setPrototypeOf(G,u.prototype),G}function x($){if(u.isBuffer($)){const k=b($.length)|0,R=o(k);return R.length===0||$.copy(R,0,0,k),R}if($.length!==void 0)return typeof $.length!="number"||Re($.length)?o(0):g($);if($.type==="Buffer"&&Array.isArray($.data))return g($.data)}function b($){if($>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return $|0}function _($){return+$!=$&&($=0),u.alloc(+$)}u.isBuffer=function(k){return k!=null&&k._isBuffer===!0&&k!==u.prototype},u.compare=function(k,R){if(se(k,Uint8Array)&&(k=u.from(k,k.offset,k.byteLength)),se(R,Uint8Array)&&(R=u.from(R,R.offset,R.byteLength)),!u.isBuffer(k)||!u.isBuffer(R))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(k===R)return 0;let G=k.length,ee=R.length;for(let J=0,O=Math.min(G,ee);J<O;++J)if(k[J]!==R[J]){G=k[J],ee=R[J];break}return G<ee?-1:ee<G?1:0},u.isEncoding=function(k){switch(String(k).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(k,R){if(!Array.isArray(k))throw new TypeError('"list" argument must be an Array of Buffers');if(k.length===0)return u.alloc(0);let G;if(R===void 0)for(R=0,G=0;G<k.length;++G)R+=k[G].length;const ee=u.allocUnsafe(R);let J=0;for(G=0;G<k.length;++G){let O=k[G];if(se(O,Uint8Array))J+O.length>ee.length?(u.isBuffer(O)||(O=u.from(O)),O.copy(ee,J)):Uint8Array.prototype.set.call(ee,O,J);else if(u.isBuffer(O))O.copy(ee,J);else throw new TypeError('"list" argument must be an Array of Buffers');J+=O.length}return ee};function E($,k){if(u.isBuffer($))return $.length;if(ArrayBuffer.isView($)||se($,ArrayBuffer))return $.byteLength;if(typeof $!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof $);const R=$.length,G=arguments.length>2&&arguments[2]===!0;if(!G&&R===0)return 0;let ee=!1;for(;;)switch(k){case"ascii":case"latin1":case"binary":return R;case"utf8":case"utf-8":return Y($).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R*2;case"hex":return R>>>1;case"base64":return he($).length;default:if(ee)return G?-1:Y($).length;k=(""+k).toLowerCase(),ee=!0}}u.byteLength=E;function C($,k,R){let G=!1;if((k===void 0||k<0)&&(k=0),k>this.length||((R===void 0||R>this.length)&&(R=this.length),R<=0)||(R>>>=0,k>>>=0,R<=k))return"";for($||($="utf8");;)switch($){case"hex":return X(this,k,R);case"utf8":case"utf-8":return T(this,k,R);case"ascii":return W(this,k,R);case"latin1":case"binary":return Z(this,k,R);case"base64":return F(this,k,R);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return te(this,k,R);default:if(G)throw new TypeError("Unknown encoding: "+$);$=($+"").toLowerCase(),G=!0}}u.prototype._isBuffer=!0;function B($,k,R){const G=$[k];$[k]=$[R],$[R]=G}u.prototype.swap16=function(){const k=this.length;if(k%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let R=0;R<k;R+=2)B(this,R,R+1);return this},u.prototype.swap32=function(){const k=this.length;if(k%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let R=0;R<k;R+=4)B(this,R,R+3),B(this,R+1,R+2);return this},u.prototype.swap64=function(){const k=this.length;if(k%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let R=0;R<k;R+=8)B(this,R,R+7),B(this,R+1,R+6),B(this,R+2,R+5),B(this,R+3,R+4);return this},u.prototype.toString=function(){const k=this.length;return k===0?"":arguments.length===0?T(this,0,k):C.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(k){if(!u.isBuffer(k))throw new TypeError("Argument must be a Buffer");return this===k?!0:u.compare(this,k)===0},u.prototype.inspect=function(){let k="";const R=r.INSPECT_MAX_BYTES;return k=this.toString("hex",0,R).replace(/(.{2})/g,"$1 ").trim(),this.length>R&&(k+=" ... "),"<Buffer "+k+">"},n&&(u.prototype[n]=u.prototype.inspect),u.prototype.compare=function(k,R,G,ee,J){if(se(k,Uint8Array)&&(k=u.from(k,k.offset,k.byteLength)),!u.isBuffer(k))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof k);if(R===void 0&&(R=0),G===void 0&&(G=k?k.length:0),ee===void 0&&(ee=0),J===void 0&&(J=this.length),R<0||G>k.length||ee<0||J>this.length)throw new RangeError("out of range index");if(ee>=J&&R>=G)return 0;if(ee>=J)return-1;if(R>=G)return 1;if(R>>>=0,G>>>=0,ee>>>=0,J>>>=0,this===k)return 0;let O=J-ee,le=G-R;const _e=Math.min(O,le),ye=this.slice(ee,J),Se=k.slice(R,G);for(let Oe=0;Oe<_e;++Oe)if(ye[Oe]!==Se[Oe]){O=ye[Oe],le=Se[Oe];break}return O<le?-1:le<O?1:0};function N($,k,R,G,ee){if($.length===0)return-1;if(typeof R=="string"?(G=R,R=0):R>2147483647?R=2147483647:R<-2147483648&&(R=-2147483648),R=+R,Re(R)&&(R=ee?0:$.length-1),R<0&&(R=$.length+R),R>=$.length){if(ee)return-1;R=$.length-1}else if(R<0)if(ee)R=0;else return-1;if(typeof k=="string"&&(k=u.from(k,G)),u.isBuffer(k))return k.length===0?-1:A($,k,R,G,ee);if(typeof k=="number")return k=k&255,typeof Uint8Array.prototype.indexOf=="function"?ee?Uint8Array.prototype.indexOf.call($,k,R):Uint8Array.prototype.lastIndexOf.call($,k,R):A($,[k],R,G,ee);throw new TypeError("val must be string, number or Buffer")}function A($,k,R,G,ee){let J=1,O=$.length,le=k.length;if(G!==void 0&&(G=String(G).toLowerCase(),G==="ucs2"||G==="ucs-2"||G==="utf16le"||G==="utf-16le")){if($.length<2||k.length<2)return-1;J=2,O/=2,le/=2,R/=2}function _e(Se,Oe){return J===1?Se[Oe]:Se.readUInt16BE(Oe*J)}let ye;if(ee){let Se=-1;for(ye=R;ye<O;ye++)if(_e($,ye)===_e(k,Se===-1?0:ye-Se)){if(Se===-1&&(Se=ye),ye-Se+1===le)return Se*J}else Se!==-1&&(ye-=ye-Se),Se=-1}else for(R+le>O&&(R=O-le),ye=R;ye>=0;ye--){let Se=!0;for(let Oe=0;Oe<le;Oe++)if(_e($,ye+Oe)!==_e(k,Oe)){Se=!1;break}if(Se)return ye}return-1}u.prototype.includes=function(k,R,G){return this.indexOf(k,R,G)!==-1},u.prototype.indexOf=function(k,R,G){return N(this,k,R,G,!0)},u.prototype.lastIndexOf=function(k,R,G){return N(this,k,R,G,!1)};function z($,k,R,G){R=Number(R)||0;const ee=$.length-R;G?(G=Number(G),G>ee&&(G=ee)):G=ee;const J=k.length;G>J/2&&(G=J/2);let O;for(O=0;O<G;++O){const le=parseInt(k.substr(O*2,2),16);if(Re(le))return O;$[R+O]=le}return O}function M($,k,R,G){return me(Y(k,$.length-R),$,R,G)}function V($,k,R,G){return me(K(k),$,R,G)}function q($,k,R,G){return me(he(k),$,R,G)}function I($,k,R,G){return me(ae(k,$.length-R),$,R,G)}u.prototype.write=function(k,R,G,ee){if(R===void 0)ee="utf8",G=this.length,R=0;else if(G===void 0&&typeof R=="string")ee=R,G=this.length,R=0;else if(isFinite(R))R=R>>>0,isFinite(G)?(G=G>>>0,ee===void 0&&(ee="utf8")):(ee=G,G=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const J=this.length-R;if((G===void 0||G>J)&&(G=J),k.length>0&&(G<0||R<0)||R>this.length)throw new RangeError("Attempt to write outside buffer bounds");ee||(ee="utf8");let O=!1;for(;;)switch(ee){case"hex":return z(this,k,R,G);case"utf8":case"utf-8":return M(this,k,R,G);case"ascii":case"latin1":case"binary":return V(this,k,R,G);case"base64":return q(this,k,R,G);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,k,R,G);default:if(O)throw new TypeError("Unknown encoding: "+ee);ee=(""+ee).toLowerCase(),O=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function F($,k,R){return k===0&&R===$.length?e.fromByteArray($):e.fromByteArray($.slice(k,R))}function T($,k,R){R=Math.min($.length,R);const G=[];let ee=k;for(;ee<R;){const J=$[ee];let O=null,le=J>239?4:J>223?3:J>191?2:1;if(ee+le<=R){let _e,ye,Se,Oe;switch(le){case 1:J<128&&(O=J);break;case 2:_e=$[ee+1],(_e&192)===128&&(Oe=(J&31)<<6|_e&63,Oe>127&&(O=Oe));break;case 3:_e=$[ee+1],ye=$[ee+2],(_e&192)===128&&(ye&192)===128&&(Oe=(J&15)<<12|(_e&63)<<6|ye&63,Oe>2047&&(Oe<55296||Oe>57343)&&(O=Oe));break;case 4:_e=$[ee+1],ye=$[ee+2],Se=$[ee+3],(_e&192)===128&&(ye&192)===128&&(Se&192)===128&&(Oe=(J&15)<<18|(_e&63)<<12|(ye&63)<<6|Se&63,Oe>65535&&Oe<1114112&&(O=Oe))}}O===null?(O=65533,le=1):O>65535&&(O-=65536,G.push(O>>>10&1023|55296),O=56320|O&1023),G.push(O),ee+=le}return Q(G)}const H=4096;function Q($){const k=$.length;if(k<=H)return String.fromCharCode.apply(String,$);let R="",G=0;for(;G<k;)R+=String.fromCharCode.apply(String,$.slice(G,G+=H));return R}function W($,k,R){let G="";R=Math.min($.length,R);for(let ee=k;ee<R;++ee)G+=String.fromCharCode($[ee]&127);return G}function Z($,k,R){let G="";R=Math.min($.length,R);for(let ee=k;ee<R;++ee)G+=String.fromCharCode($[ee]);return G}function X($,k,R){const G=$.length;(!k||k<0)&&(k=0),(!R||R<0||R>G)&&(R=G);let ee="";for(let J=k;J<R;++J)ee+=De[$[J]];return ee}function te($,k,R){const G=$.slice(k,R);let ee="";for(let J=0;J<G.length-1;J+=2)ee+=String.fromCharCode(G[J]+G[J+1]*256);return ee}u.prototype.slice=function(k,R){const G=this.length;k=~~k,R=R===void 0?G:~~R,k<0?(k+=G,k<0&&(k=0)):k>G&&(k=G),R<0?(R+=G,R<0&&(R=0)):R>G&&(R=G),R<k&&(R=k);const ee=this.subarray(k,R);return Object.setPrototypeOf(ee,u.prototype),ee};function L($,k,R){if($%1!==0||$<0)throw new RangeError("offset is not uint");if($+k>R)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(k,R,G){k=k>>>0,R=R>>>0,G||L(k,R,this.length);let ee=this[k],J=1,O=0;for(;++O<R&&(J*=256);)ee+=this[k+O]*J;return ee},u.prototype.readUintBE=u.prototype.readUIntBE=function(k,R,G){k=k>>>0,R=R>>>0,G||L(k,R,this.length);let ee=this[k+--R],J=1;for(;R>0&&(J*=256);)ee+=this[k+--R]*J;return ee},u.prototype.readUint8=u.prototype.readUInt8=function(k,R){return k=k>>>0,R||L(k,1,this.length),this[k]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(k,R){return k=k>>>0,R||L(k,2,this.length),this[k]|this[k+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(k,R){return k=k>>>0,R||L(k,2,this.length),this[k]<<8|this[k+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(k,R){return k=k>>>0,R||L(k,4,this.length),(this[k]|this[k+1]<<8|this[k+2]<<16)+this[k+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(k,R){return k=k>>>0,R||L(k,4,this.length),this[k]*16777216+(this[k+1]<<16|this[k+2]<<8|this[k+3])},u.prototype.readBigUInt64LE=Be(function(k){k=k>>>0,Pe(k,"offset");const R=this[k],G=this[k+7];(R===void 0||G===void 0)&&D(k,this.length-8);const ee=R+this[++k]*2**8+this[++k]*2**16+this[++k]*2**24,J=this[++k]+this[++k]*2**8+this[++k]*2**16+G*2**24;return BigInt(ee)+(BigInt(J)<<BigInt(32))}),u.prototype.readBigUInt64BE=Be(function(k){k=k>>>0,Pe(k,"offset");const R=this[k],G=this[k+7];(R===void 0||G===void 0)&&D(k,this.length-8);const ee=R*2**24+this[++k]*2**16+this[++k]*2**8+this[++k],J=this[++k]*2**24+this[++k]*2**16+this[++k]*2**8+G;return(BigInt(ee)<<BigInt(32))+BigInt(J)}),u.prototype.readIntLE=function(k,R,G){k=k>>>0,R=R>>>0,G||L(k,R,this.length);let ee=this[k],J=1,O=0;for(;++O<R&&(J*=256);)ee+=this[k+O]*J;return J*=128,ee>=J&&(ee-=Math.pow(2,8*R)),ee},u.prototype.readIntBE=function(k,R,G){k=k>>>0,R=R>>>0,G||L(k,R,this.length);let ee=R,J=1,O=this[k+--ee];for(;ee>0&&(J*=256);)O+=this[k+--ee]*J;return J*=128,O>=J&&(O-=Math.pow(2,8*R)),O},u.prototype.readInt8=function(k,R){return k=k>>>0,R||L(k,1,this.length),this[k]&128?(255-this[k]+1)*-1:this[k]},u.prototype.readInt16LE=function(k,R){k=k>>>0,R||L(k,2,this.length);const G=this[k]|this[k+1]<<8;return G&32768?G|4294901760:G},u.prototype.readInt16BE=function(k,R){k=k>>>0,R||L(k,2,this.length);const G=this[k+1]|this[k]<<8;return G&32768?G|4294901760:G},u.prototype.readInt32LE=function(k,R){return k=k>>>0,R||L(k,4,this.length),this[k]|this[k+1]<<8|this[k+2]<<16|this[k+3]<<24},u.prototype.readInt32BE=function(k,R){return k=k>>>0,R||L(k,4,this.length),this[k]<<24|this[k+1]<<16|this[k+2]<<8|this[k+3]},u.prototype.readBigInt64LE=Be(function(k){k=k>>>0,Pe(k,"offset");const R=this[k],G=this[k+7];(R===void 0||G===void 0)&&D(k,this.length-8);const ee=this[k+4]+this[k+5]*2**8+this[k+6]*2**16+(G<<24);return(BigInt(ee)<<BigInt(32))+BigInt(R+this[++k]*2**8+this[++k]*2**16+this[++k]*2**24)}),u.prototype.readBigInt64BE=Be(function(k){k=k>>>0,Pe(k,"offset");const R=this[k],G=this[k+7];(R===void 0||G===void 0)&&D(k,this.length-8);const ee=(R<<24)+this[++k]*2**16+this[++k]*2**8+this[++k];return(BigInt(ee)<<BigInt(32))+BigInt(this[++k]*2**24+this[++k]*2**16+this[++k]*2**8+G)}),u.prototype.readFloatLE=function(k,R){return k=k>>>0,R||L(k,4,this.length),t.read(this,k,!0,23,4)},u.prototype.readFloatBE=function(k,R){return k=k>>>0,R||L(k,4,this.length),t.read(this,k,!1,23,4)},u.prototype.readDoubleLE=function(k,R){return k=k>>>0,R||L(k,8,this.length),t.read(this,k,!0,52,8)},u.prototype.readDoubleBE=function(k,R){return k=k>>>0,R||L(k,8,this.length),t.read(this,k,!1,52,8)};function U($,k,R,G,ee,J){if(!u.isBuffer($))throw new TypeError('"buffer" argument must be a Buffer instance');if(k>ee||k<J)throw new RangeError('"value" argument is out of bounds');if(R+G>$.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(k,R,G,ee){if(k=+k,R=R>>>0,G=G>>>0,!ee){const le=Math.pow(2,8*G)-1;U(this,k,R,G,le,0)}let J=1,O=0;for(this[R]=k&255;++O<G&&(J*=256);)this[R+O]=k/J&255;return R+G},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(k,R,G,ee){if(k=+k,R=R>>>0,G=G>>>0,!ee){const le=Math.pow(2,8*G)-1;U(this,k,R,G,le,0)}let J=G-1,O=1;for(this[R+J]=k&255;--J>=0&&(O*=256);)this[R+J]=k/O&255;return R+G},u.prototype.writeUint8=u.prototype.writeUInt8=function(k,R,G){return k=+k,R=R>>>0,G||U(this,k,R,1,255,0),this[R]=k&255,R+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(k,R,G){return k=+k,R=R>>>0,G||U(this,k,R,2,65535,0),this[R]=k&255,this[R+1]=k>>>8,R+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(k,R,G){return k=+k,R=R>>>0,G||U(this,k,R,2,65535,0),this[R]=k>>>8,this[R+1]=k&255,R+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(k,R,G){return k=+k,R=R>>>0,G||U(this,k,R,4,4294967295,0),this[R+3]=k>>>24,this[R+2]=k>>>16,this[R+1]=k>>>8,this[R]=k&255,R+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(k,R,G){return k=+k,R=R>>>0,G||U(this,k,R,4,4294967295,0),this[R]=k>>>24,this[R+1]=k>>>16,this[R+2]=k>>>8,this[R+3]=k&255,R+4};function oe($,k,R,G,ee){be(k,G,ee,$,R,7);let J=Number(k&BigInt(4294967295));$[R++]=J,J=J>>8,$[R++]=J,J=J>>8,$[R++]=J,J=J>>8,$[R++]=J;let O=Number(k>>BigInt(32)&BigInt(4294967295));return $[R++]=O,O=O>>8,$[R++]=O,O=O>>8,$[R++]=O,O=O>>8,$[R++]=O,R}function ie($,k,R,G,ee){be(k,G,ee,$,R,7);let J=Number(k&BigInt(4294967295));$[R+7]=J,J=J>>8,$[R+6]=J,J=J>>8,$[R+5]=J,J=J>>8,$[R+4]=J;let O=Number(k>>BigInt(32)&BigInt(4294967295));return $[R+3]=O,O=O>>8,$[R+2]=O,O=O>>8,$[R+1]=O,O=O>>8,$[R]=O,R+8}u.prototype.writeBigUInt64LE=Be(function(k,R=0){return oe(this,k,R,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=Be(function(k,R=0){return ie(this,k,R,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(k,R,G,ee){if(k=+k,R=R>>>0,!ee){const _e=Math.pow(2,8*G-1);U(this,k,R,G,_e-1,-_e)}let J=0,O=1,le=0;for(this[R]=k&255;++J<G&&(O*=256);)k<0&&le===0&&this[R+J-1]!==0&&(le=1),this[R+J]=(k/O>>0)-le&255;return R+G},u.prototype.writeIntBE=function(k,R,G,ee){if(k=+k,R=R>>>0,!ee){const _e=Math.pow(2,8*G-1);U(this,k,R,G,_e-1,-_e)}let J=G-1,O=1,le=0;for(this[R+J]=k&255;--J>=0&&(O*=256);)k<0&&le===0&&this[R+J+1]!==0&&(le=1),this[R+J]=(k/O>>0)-le&255;return R+G},u.prototype.writeInt8=function(k,R,G){return k=+k,R=R>>>0,G||U(this,k,R,1,127,-128),k<0&&(k=255+k+1),this[R]=k&255,R+1},u.prototype.writeInt16LE=function(k,R,G){return k=+k,R=R>>>0,G||U(this,k,R,2,32767,-32768),this[R]=k&255,this[R+1]=k>>>8,R+2},u.prototype.writeInt16BE=function(k,R,G){return k=+k,R=R>>>0,G||U(this,k,R,2,32767,-32768),this[R]=k>>>8,this[R+1]=k&255,R+2},u.prototype.writeInt32LE=function(k,R,G){return k=+k,R=R>>>0,G||U(this,k,R,4,2147483647,-2147483648),this[R]=k&255,this[R+1]=k>>>8,this[R+2]=k>>>16,this[R+3]=k>>>24,R+4},u.prototype.writeInt32BE=function(k,R,G){return k=+k,R=R>>>0,G||U(this,k,R,4,2147483647,-2147483648),k<0&&(k=4294967295+k+1),this[R]=k>>>24,this[R+1]=k>>>16,this[R+2]=k>>>8,this[R+3]=k&255,R+4},u.prototype.writeBigInt64LE=Be(function(k,R=0){return oe(this,k,R,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=Be(function(k,R=0){return ie(this,k,R,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ne($,k,R,G,ee,J){if(R+G>$.length)throw new RangeError("Index out of range");if(R<0)throw new RangeError("Index out of range")}function we($,k,R,G,ee){return k=+k,R=R>>>0,ee||ne($,k,R,4),t.write($,k,R,G,23,4),R+4}u.prototype.writeFloatLE=function(k,R,G){return we(this,k,R,!0,G)},u.prototype.writeFloatBE=function(k,R,G){return we(this,k,R,!1,G)};function Te($,k,R,G,ee){return k=+k,R=R>>>0,ee||ne($,k,R,8),t.write($,k,R,G,52,8),R+8}u.prototype.writeDoubleLE=function(k,R,G){return Te(this,k,R,!0,G)},u.prototype.writeDoubleBE=function(k,R,G){return Te(this,k,R,!1,G)},u.prototype.copy=function(k,R,G,ee){if(!u.isBuffer(k))throw new TypeError("argument should be a Buffer");if(G||(G=0),!ee&&ee!==0&&(ee=this.length),R>=k.length&&(R=k.length),R||(R=0),ee>0&&ee<G&&(ee=G),ee===G||k.length===0||this.length===0)return 0;if(R<0)throw new RangeError("targetStart out of bounds");if(G<0||G>=this.length)throw new RangeError("Index out of range");if(ee<0)throw new RangeError("sourceEnd out of bounds");ee>this.length&&(ee=this.length),k.length-R<ee-G&&(ee=k.length-R+G);const J=ee-G;return this===k&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(R,G,ee):Uint8Array.prototype.set.call(k,this.subarray(G,ee),R),J},u.prototype.fill=function(k,R,G,ee){if(typeof k=="string"){if(typeof R=="string"?(ee=R,R=0,G=this.length):typeof G=="string"&&(ee=G,G=this.length),ee!==void 0&&typeof ee!="string")throw new TypeError("encoding must be a string");if(typeof ee=="string"&&!u.isEncoding(ee))throw new TypeError("Unknown encoding: "+ee);if(k.length===1){const O=k.charCodeAt(0);(ee==="utf8"&&O<128||ee==="latin1")&&(k=O)}}else typeof k=="number"?k=k&255:typeof k=="boolean"&&(k=Number(k));if(R<0||this.length<R||this.length<G)throw new RangeError("Out of range index");if(G<=R)return this;R=R>>>0,G=G===void 0?this.length:G>>>0,k||(k=0);let J;if(typeof k=="number")for(J=R;J<G;++J)this[J]=k;else{const O=u.isBuffer(k)?k:u.from(k,ee),le=O.length;if(le===0)throw new TypeError('The value "'+k+'" is invalid for argument "value"');for(J=0;J<G-R;++J)this[J+R]=O[J%le]}return this};const ke={};function ge($,k,R){ke[$]=class extends R{constructor(){super(),Object.defineProperty(this,"message",{value:k.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${$}]`,this.stack,delete this.name}get code(){return $}set code(ee){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ee,writable:!0})}toString(){return`${this.name} [${$}]: ${this.message}`}}}ge("ERR_BUFFER_OUT_OF_BOUNDS",function($){return $?`${$} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ge("ERR_INVALID_ARG_TYPE",function($,k){return`The "${$}" argument must be of type number. Received type ${typeof k}`},TypeError),ge("ERR_OUT_OF_RANGE",function($,k,R){let G=`The value of "${$}" is out of range.`,ee=R;return Number.isInteger(R)&&Math.abs(R)>2**32?ee=fe(String(R)):typeof R=="bigint"&&(ee=String(R),(R>BigInt(2)**BigInt(32)||R<-(BigInt(2)**BigInt(32)))&&(ee=fe(ee)),ee+="n"),G+=` It must be ${k}. Received ${ee}`,G},RangeError);function fe($){let k="",R=$.length;const G=$[0]==="-"?1:0;for(;R>=G+4;R-=3)k=`_${$.slice(R-3,R)}${k}`;return`${$.slice(0,R)}${k}`}function de($,k,R){Pe(k,"offset"),($[k]===void 0||$[k+R]===void 0)&&D(k,$.length-(R+1))}function be($,k,R,G,ee,J){if($>R||$<k){const O=typeof k=="bigint"?"n":"";let le;throw k===0||k===BigInt(0)?le=`>= 0${O} and < 2${O} ** ${(J+1)*8}${O}`:le=`>= -(2${O} ** ${(J+1)*8-1}${O}) and < 2 ** ${(J+1)*8-1}${O}`,new ke.ERR_OUT_OF_RANGE("value",le,$)}de(G,ee,J)}function Pe($,k){if(typeof $!="number")throw new ke.ERR_INVALID_ARG_TYPE(k,"number",$)}function D($,k,R){throw Math.floor($)!==$?(Pe($,R),new ke.ERR_OUT_OF_RANGE("offset","an integer",$)):k<0?new ke.ERR_BUFFER_OUT_OF_BOUNDS:new ke.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${k}`,$)}const ve=/[^+/0-9A-Za-z-_]/g;function pe($){if($=$.split("=")[0],$=$.trim().replace(ve,""),$.length<2)return"";for(;$.length%4!==0;)$=$+"=";return $}function Y($,k){k=k||1/0;let R;const G=$.length;let ee=null;const J=[];for(let O=0;O<G;++O){if(R=$.charCodeAt(O),R>55295&&R<57344){if(!ee){if(R>56319){(k-=3)>-1&&J.push(239,191,189);continue}else if(O+1===G){(k-=3)>-1&&J.push(239,191,189);continue}ee=R;continue}if(R<56320){(k-=3)>-1&&J.push(239,191,189),ee=R;continue}R=(ee-55296<<10|R-56320)+65536}else ee&&(k-=3)>-1&&J.push(239,191,189);if(ee=null,R<128){if((k-=1)<0)break;J.push(R)}else if(R<2048){if((k-=2)<0)break;J.push(R>>6|192,R&63|128)}else if(R<65536){if((k-=3)<0)break;J.push(R>>12|224,R>>6&63|128,R&63|128)}else if(R<1114112){if((k-=4)<0)break;J.push(R>>18|240,R>>12&63|128,R>>6&63|128,R&63|128)}else throw new Error("Invalid code point")}return J}function K($){const k=[];for(let R=0;R<$.length;++R)k.push($.charCodeAt(R)&255);return k}function ae($,k){let R,G,ee;const J=[];for(let O=0;O<$.length&&!((k-=2)<0);++O)R=$.charCodeAt(O),G=R>>8,ee=R%256,J.push(ee),J.push(G);return J}function he($){return e.toByteArray(pe($))}function me($,k,R,G){let ee;for(ee=0;ee<G&&!(ee+R>=k.length||ee>=$.length);++ee)k[ee+R]=$[ee];return ee}function se($,k){return $ instanceof k||$!=null&&$.constructor!=null&&$.constructor.name!=null&&$.constructor.name===k.name}function Re($){return $!==$}const De=(function(){const $="0123456789abcdef",k=new Array(256);for(let R=0;R<16;++R){const G=R*16;for(let ee=0;ee<16;++ee)k[G+ee]=$[R]+$[ee]}return k})();function Be($){return typeof BigInt>"u"?ze:$}function ze(){throw new Error("BigInt not supported")}})(jc)),jc}var V2=$2();const js="http://www.w3.org/1999/02/22-rdf-syntax-ns#",qs="http://www.w3.org/2001/XMLSchema#",Vu="http://www.w3.org/2000/10/swap/",tn={xsd:{decimal:`${qs}decimal`,boolean:`${qs}boolean`,double:`${qs}double`,integer:`${qs}integer`,string:`${qs}string`},rdf:{type:`${js}type`,nil:`${js}nil`,first:`${js}first`,rest:`${js}rest`,langString:`${js}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${Vu}reify#forSome`,forAll:`${Vu}reify#forAll`},log:{implies:`${Vu}log#implies`,isImpliedBy:`${Vu}log#isImpliedBy`}},{xsd:ju}=tn,j2=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,sm={"\\":"\\","'":"'",'"':'"',n:`
`,r:"\r",t:"	",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},q2=/[\x00-\x20<>\\"\{\}\|\^\`]/,W2={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},H2=/$0^/;class G2{constructor(e){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,e=e||{},this._isImpliedBy=e.isImpliedBy,this._lineMode=!!e.lineMode){this._n3Mode=!1;for(const t in this)!(t in W2)&&this[t]instanceof RegExp&&(this[t]=H2)}else this._n3Mode=e.n3!==!1;this.comments=!!e.comments,this._literalClosingPos=0}_tokenizeToEnd(e,t){let n=this._input,a=n.length;for(;;){let u,f;for(;u=this._newline.exec(n);)this.comments&&(f=this._comment.exec(u[0]))&&i("comment",f[1],"",this._line,u[0].length),n=n.substr(u[0].length,n.length),a=n.length,this._line++;if(!u&&(u=this._whitespace.exec(n))&&(n=n.substr(u[0].length,n.length)),this._endOfFile.test(n))return t&&(this.comments&&(f=this._comment.exec(n))&&i("comment",f[1],"",this._line,n.length),n=null,i("eof","","",this._line,0)),this._input=n;const c=this._line,d=n[0];let h="",p="",g="",m=null,w=0,x=!1;switch(d){case"^":if(n.length<3)break;if(n[1]==="^"){if(this._previousMarker="^^",n=n.substr(2),n[0]!=="<"){x=!0;break}}else{this._n3Mode&&(w=1,h="^");break}case"<":if(m=this._unescapedIri.exec(n))h="IRI",p=m[1];else if(m=this._iri.exec(n)){if(p=this._unescape(m[1]),p===null||q2.test(p))return o(this);h="IRI"}else n.length>1&&n[1]==="<"?(h="<<",w=2):this._n3Mode&&n.length>1&&n[1]==="="&&(w=2,this._isImpliedBy?(h="abbreviation",p="<"):(h="inverse",p=">"));break;case">":n.length>1&&n[1]===">"&&(h=">>",w=2);break;case"_":((m=this._blank.exec(n))||t&&(m=this._blank.exec(`${n} `)))&&(h="blank",g="_",p=m[1]);break;case'"':if(m=this._simpleQuotedString.exec(n))p=m[1];else if({value:p,matchLength:w}=this._parseLiteral(n),p===null)return o(this);(m!==null||w!==0)&&(h="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(m=this._simpleApostropheString.exec(n))p=m[1];else if({value:p,matchLength:w}=this._parseLiteral(n),p===null)return o(this);(m!==null||w!==0)&&(h="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(m=this._variable.exec(n))&&(h="var",p=m[0]);break;case"@":this._previousMarker==="literal"&&(m=this._langcode.exec(n))?(h="langcode",p=m[1]):(m=this._keyword.exec(n))&&(h=m[0]);break;case".":if(n.length===1?t:n[1]<"0"||n[1]>"9"){h=".",w=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(m=this._number.exec(n)||t&&(m=this._number.exec(`${n} `)))&&(h="literal",p=m[0],g=typeof m[1]=="string"?ju.double:typeof m[2]=="string"?ju.decimal:ju.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(m=this._sparqlKeyword.exec(n))?h=m[0].toUpperCase():x=!0;break;case"f":case"t":(m=this._boolean.exec(n))?(h="literal",p=m[0],g=ju.boolean):x=!0;break;case"a":(m=this._shortPredicates.exec(n))?(h="abbreviation",p="a"):x=!0;break;case"=":this._n3Mode&&n.length>1&&(h="abbreviation",n[1]!==">"?(w=1,p="="):(w=2,p=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"}":this._lineMode||(w=1,h=d);break;case"{":!this._lineMode&&n.length>=2&&(n[1]==="|"?(h="{|",w=2):(h=d,w=1));break;case"|":n.length>=2&&n[1]==="}"&&(h="|}",w=2);break;default:x=!0}if(x&&((this._previousMarker==="@prefix"||this._previousMarker==="PREFIX")&&(m=this._prefix.exec(n))?(h="prefix",p=m[1]||""):((m=this._prefixed.exec(n))||t&&(m=this._prefixed.exec(`${n} `)))&&(h="prefixed",g=m[1]||"",p=this._unescape(m[2]))),this._previousMarker==="^^")switch(h){case"prefixed":h="type";break;case"IRI":h="typeIRI";break;default:h=""}if(!h)return t||!/^'''|^"""/.test(n)&&/\n|\r/.test(n)?o(this):this._input=n;const b=w||m[0].length,_=i(h,p,g,c,b);this.previousToken=_,this._previousMarker=h,n=n.substr(b,n.length)}function i(u,f,c,d,h){const p=n?a-n.length:a,g=p+h,m={type:u,value:f,prefix:c,line:d,start:p,end:g};return e(null,m),m}function o(u){e(u._syntaxError(/^\S*/.exec(n)[0]))}}_unescape(e){let t=!1;const n=e.replace(j2,(a,i,o,u)=>{if(typeof i=="string")return String.fromCharCode(Number.parseInt(i,16));if(typeof o=="string"){let f=Number.parseInt(o,16);return f<=65535?String.fromCharCode(Number.parseInt(o,16)):String.fromCharCode(55296+((f-=65536)>>10),56320+(f&1023))}return u in sm?sm[u]:(t=!0,"")});return t?null:n}_parseLiteral(e){if(e.length>=3){const t=e.match(/^(?:"""|"|'''|'|)/)[0],n=t.length;let a=Math.max(this._literalClosingPos,n);for(;(a=e.indexOf(t,a))>0;){let i=0;for(;e[a-i-1]==="\\";)i++;if(i%2===0){const o=e.substring(n,a),u=o.split(/\r\n|\r|\n/).length-1,f=a+n;if(n===1&&u!==0||n===3&&this._lineMode)break;return this._line+=u,{value:this._unescape(o),matchLength:f}}a++}this._literalClosingPos=e.length-n+1}return{value:"",matchLength:0}}_syntaxError(e){this._input=null;const t=new Error(`Unexpected "${e}" on line ${this._line}.`);return t.context={token:void 0,line:this._line,previousToken:this.previousToken},t}_readStartingBom(e){return e.startsWith("\uFEFF")?e.substr(1):e}tokenize(e,t){if(this._line=1,typeof e=="string")if(this._input=this._readStartingBom(e),typeof t=="function")queueMicrotask(()=>this._tokenizeToEnd(t,!0));else{const n=[];let a;if(this._tokenizeToEnd((i,o)=>i?a=i:n.push(o),!0),a)throw a;return n}else this._pendingBuffer=null,typeof e.setEncoding=="function"&&e.setEncoding("utf8"),e.on("data",n=>{this._input!==null&&n.length!==0&&(this._pendingBuffer&&(n=V2.Buffer.concat([this._pendingBuffer,n]),this._pendingBuffer=null),n[n.length-1]&128?this._pendingBuffer=n:(typeof this._input>"u"?this._input=this._readStartingBom(typeof n=="string"?n:n.toString()):this._input+=n,this._tokenizeToEnd(t,!1)))}),e.on("end",()=>{typeof this._input=="string"&&this._tokenizeToEnd(t,!0)}),e.on("error",t)}}const{rdf:K2,xsd:$i}=tn;let _o,Z2=0;const Vh={namedNode:Y0,blankNode:Q0,variable:e1,literal:J0,defaultGraph:J2,quad:bh,triple:bh,fromTerm:ro,fromQuad:t1};class Cn{constructor(e){this.id=e}get value(){return this.id}equals(e){return e instanceof Cn?this.id===e.id:!!e&&this.termType===e.termType&&this.value===e.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}class Z0 extends Cn{get termType(){return"NamedNode"}}class so extends Cn{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const e=this.id;let t=e.lastIndexOf('"')+1;return t<e.length&&e[t++]==="@"?e.substr(t).toLowerCase():""}get datatype(){return new Z0(this.datatypeString)}get datatypeString(){const e=this.id,t=e.lastIndexOf('"')+1,n=t<e.length?e[t]:"";return n==="^"?e.substr(t+2):n!=="@"?$i.string:K2.langString}equals(e){return e instanceof so?this.id===e.id:!!e&&!!e.datatype&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&this.datatype.value===e.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}}class X2 extends Cn{constructor(e){super(`_:${e}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}}class Y2 extends Cn{constructor(e){super(`?${e}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}}class Q2 extends Cn{constructor(){return super(""),_o||this}get termType(){return"DefaultGraph"}equals(e){return this===e||!!e&&this.termType===e.termType}}_o=new Q2;class X0 extends Cn{constructor(e,t,n,a){super(""),this._subject=e,this._predicate=t,this._object=n,this._graph=a||_o}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(e){return!!e&&this._subject.equals(e.subject)&&this._predicate.equals(e.predicate)&&this._object.equals(e.object)&&this._graph.equals(e.graph)}}function Y0(r){return new Z0(r)}function Q0(r){return new X2(r||`n3-${Z2++}`)}function J0(r,e){if(typeof e=="string")return new so(`"${r}"@${e.toLowerCase()}`);let t=e?e.value:"";return t===""&&(typeof r=="boolean"?t=$i.boolean:typeof r=="number"&&(Number.isFinite(r)?t=Number.isInteger(r)?$i.integer:$i.double:(t=$i.double,Number.isNaN(r)||(r=r>0?"INF":"-INF")))),t===""||t===$i.string?new so(`"${r}"`):new so(`"${r}"^^${t}`)}function e1(r){return new Y2(r)}function J2(){return _o}function bh(r,e,t,n){return new X0(r,e,t,n)}function ro(r){if(r instanceof Cn)return r;switch(r.termType){case"NamedNode":return Y0(r.value);case"BlankNode":return Q0(r.value);case"Variable":return e1(r.value);case"DefaultGraph":return _o;case"Literal":return J0(r.value,r.language||r.datatype);case"Quad":return t1(r);default:throw new Error(`Unexpected termType: ${r.termType}`)}}function t1(r){if(r instanceof X0)return r;if(r.termType!=="Quad")throw new Error(`Unexpected termType: ${r.termType}`);return bh(ro(r.subject),ro(r.predicate),ro(r.object),ro(r.graph))}let om=0;class r1{constructor(e){this._contextStack=[],this._graph=null,e=e||{},this._setBase(e.baseIRI),e.factory&&n1(this,e.factory);const t=typeof e.format=="string"?e.format.match(/\w*$/)[0].toLowerCase():"",n=/turtle/.test(t),a=/trig/.test(t),i=/triple/.test(t),o=/quad/.test(t),u=this._n3Mode=/n3/.test(t),f=i||o;(this._supportsNamedGraphs=!(n||u))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(n||a||i||u),this._isImpliedBy=e.isImpliedBy,this._supportsRDFStar=t===""||/star|\*$/.test(t),f&&(this._resolveRelativeIRI=c=>null),this._blankNodePrefix=typeof e.blankNodePrefix!="string"?"":e.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=e.lexer||new G2({lineMode:f,n3:u,isImpliedBy:this._isImpliedBy}),this._explicitQuantifiers=!!e.explicitQuantifiers}static _resetBlankNodePrefix(){om=0}_setBase(e){if(!e)this._base="",this._basePath="";else{const t=e.indexOf("#");t>=0&&(e=e.substr(0,t)),this._base=e,this._basePath=e.indexOf("/")<0?e:e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1]}}_saveContext(e,t,n,a,i){const o=this._n3Mode;this._contextStack.push({type:e,subject:n,predicate:a,object:i,graph:t,inverse:o?this._inversePredicate:!1,blankPrefix:o?this._prefixes._:"",quantified:o?this._quantified:null}),o&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(e,t){const n=this._contextStack.pop();if(!n||n.type!==e)return this._error(`Unexpected ${t.type}`,t);this._subject=n.subject,this._predicate=n.predicate,this._object=n.object,this._graph=n.graph,this._n3Mode&&(this._inversePredicate=n.inverse,this._prefixes._=n.blankPrefix,this._quantified=n.quantified)}_readInTopContext(e){switch(e.type){case"eof":return this._graph!==null?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}}_readEntity(e,t){let n;switch(e.type){case"IRI":case"typeIRI":const a=this._resolveIRI(e.value);if(a===null)return this._error("Invalid IRI",e);n=this._factory.namedNode(a);break;case"type":case"prefixed":const i=this._prefixes[e.prefix];if(i===void 0)return this._error(`Undefined prefix "${e.prefix}:"`,e);n=this._factory.namedNode(i+e.value);break;case"blank":n=this._factory.blankNode(this._prefixes[e.prefix]+e.value);break;case"var":n=this._factory.variable(e.value.substr(1));break;default:return this._error(`Expected entity but got ${e.type}`,e)}return!t&&this._n3Mode&&n.id in this._quantified&&(n=this._quantified[n.id]),n}_readSubject(e){switch(this._predicate=null,e.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._factory.blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._factory.blankNode(),null,null),this._readSubject):this._error("Unexpected graph",e);case"}":return this._readPunctuation(e);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier="blankNode",this._readQuantifierList):this._error('Unexpected "@forSome"',e);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier="variable",this._readQuantifierList):this._error('Unexpected "@forAll"',e);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",e);if(e.prefix.length===0)return this._literalValue=e.value,this._completeSubjectLiteral;this._subject=this._factory.literal(e.value,this._factory.namedNode(e.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",e);default:if((this._subject=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(e){const t=e.type;switch(t){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[e.value];break;case".":case"]":case"}":return this._predicate===null?this._error(`Unexpected ${t}`,e):(this._subject=null,t==="]"?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return this._predicate!==null?this._readPredicate:this._error("Expected predicate but got ;",e);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._factory.blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",e);default:if((this._predicate=this._readEntity(e))===void 0)return}return this._readObject}_readObject(e){switch(e.type){case"literal":if(e.prefix.length===0)return this._literalValue=e.value,this._readDataTypeOrLang;this._object=this._factory.literal(e.value,this._factory.namedNode(e.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._factory.blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",e);default:if((this._object=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(e){return e.type==="{"?this._readGraph(e):this._readPredicate(e)}_readGraph(e){return e.type!=="{"?this._error(`Expected graph but got ${e.type}`,e):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(e){return e.type==="]"?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))}_readBlankNodeTail(e){if(e.type!=="]")return this._readBlankNodePunctuation(e);this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph);const t=this._predicate===null;return this._restoreContext("blank",e),this._object!==null?this._getContextEndReader():this._predicate!==null?this._readObject:t?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(e){switch(e.type){case".":case"}":return this._subject=null,this._readPunctuation(e);default:return this._readPredicate(e)}}_readListItem(e){let t=null,n=null,a=this._readListItem;const i=this._subject,o=this._contextStack,u=o[o.length-1];switch(e.type){case"[":this._saveContext("blank",this._graph,n=this._factory.blankNode(),this.RDF_FIRST,this._subject=t=this._factory.blankNode()),a=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,n=this._factory.blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",e),o.length!==0&&o[o.length-1].type==="list"&&this._emit(this._subject,this._predicate,this._object,this._graph),this._predicate===null){if(a=this._readPredicate,this._subject===this.RDF_NIL)return a}else if(a=this._getContextEndReader(),this._object===this.RDF_NIL)return a;n=this.RDF_NIL;break;case"literal":e.prefix.length===0?(this._literalValue=e.value,a=this._readListItemDataTypeOrLang):(t=this._factory.literal(e.value,this._factory.namedNode(e.prefix)),a=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",e);default:if((t=this._readEntity(e))===void 0)return}if(n===null&&(this._subject=n=this._factory.blankNode()),i===null?u.predicate===null?u.subject=n:u.object=n:this._emit(i,this.RDF_REST,n,this._graph),t!==null){if(this._n3Mode&&(e.type==="IRI"||e.type==="prefixed"))return this._saveContext("item",this._graph,n,this.RDF_FIRST,t),this._subject=t,this._predicate=null,this._getPathReader(this._readListItem);this._emit(n,this.RDF_FIRST,t,this._graph)}return a}_readDataTypeOrLang(e){return this._completeObjectLiteral(e,!1)}_readListItemDataTypeOrLang(e){return this._completeObjectLiteral(e,!0)}_completeLiteral(e){let t=this._factory.literal(this._literalValue);switch(e.type){case"type":case"typeIRI":const n=this._readEntity(e);if(n===void 0)return;t=this._factory.literal(this._literalValue,n),e=null;break;case"langcode":t=this._factory.literal(this._literalValue,e.value),e=null;break}return{token:e,literal:t}}_completeSubjectLiteral(e){return this._subject=this._completeLiteral(e).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(e,t){const n=this._completeLiteral(e);if(n)return this._object=n.literal,t&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),n.token===null?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(n.token))}_readFormulaTail(e){return e.type!=="}"?this._readPunctuation(e):(this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",e),this._object===null?this._readPredicate:this._getContextEndReader())}_readPunctuation(e){let t,n=this._graph;const a=this._subject,i=this._inversePredicate;switch(e.type){case"}":if(this._graph===null)return this._error("Unexpected graph closing",e);if(this._n3Mode)return this._readFormulaTail(e);this._graph=null;case".":this._subject=null,t=this._contextStack.length?this._readSubject:this._readInTopContext,i&&(this._inversePredicate=!1);break;case";":t=this._readPredicate;break;case",":t=this._readObject;break;case"{|":if(!this._supportsRDFStar)return this._error("Unexpected RDF-star syntax",e);const o=this._predicate,u=this._object;this._subject=this._factory.quad(a,o,u,this.DEFAULTGRAPH),t=this._readPredicate;break;case"|}":if(this._subject.termType!=="Quad")return this._error("Unexpected asserted triple closing",e);this._subject=null,t=this._readPunctuation;break;default:if(this._supportsQuads&&this._graph===null&&(n=this._readEntity(e))!==void 0){t=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}if(a!==null){const o=this._predicate,u=this._object;i?this._emit(u,o,a,n):this._emit(a,o,u,n)}return t}_readBlankNodePunctuation(e){let t;switch(e.type){case";":t=this._readPredicate;break;case",":t=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}return this._emit(this._subject,this._predicate,this._object,this._graph),t}_readQuadPunctuation(e){return e.type!=="."?this._error("Expected dot to follow quad",e):this._readInTopContext}_readPrefix(e){return e.type!=="prefix"?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)}_readPrefixIRI(e){if(e.type!=="IRI")return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,e);const t=this._readEntity(e);return this._prefixes[this._prefix]=t.value,this._prefixCallback(this._prefix,t),this._readDeclarationPunctuation}_readBaseIRI(e){const t=e.type==="IRI"&&this._resolveIRI(e.value);return t?(this._setBase(t),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",e)}_readNamedGraphLabel(e){switch(e.type){case"IRI":case"blank":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}}_readNamedGraphBlankLabel(e){return e.type!=="]"?this._error("Invalid graph label",e):(this._subject=this._factory.blankNode(),this._readGraph)}_readDeclarationPunctuation(e){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(e)):e.type!=="."?this._error("Expected declaration to end with a dot",e):this._readInTopContext}_readQuantifierList(e){let t;switch(e.type){case"IRI":case"prefixed":if((t=this._readEntity(e,!0))!==void 0)break;default:return this._error(`Unexpected ${e.type}`,e)}return this._explicitQuantifiers?(this._subject===null?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,t,this.QUANTIFIERS_GRAPH)):this._quantified[t.id]=this._factory[this._quantifier](this._factory.blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(e){return e.type===","?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(e))}_getPathReader(e){return this._afterPath=e,this._readPath}_readPath(e){switch(e.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const t=this._contextStack,n=t.length&&t[t.length-1];if(n&&n.type==="item"){const a=this._subject;this._restoreContext("item",e),this._emit(this._subject,this.RDF_FIRST,a,this._graph)}return this._afterPath(e)}}_readForwardPath(e){let t,n;const a=this._factory.blankNode();if((n=this._readEntity(e))!==void 0)return this._predicate===null?(t=this._subject,this._subject=a):(t=this._object,this._object=a),this._emit(t,n,a,this._graph),this._readPath}_readBackwardPath(e){const t=this._factory.blankNode();let n,a;if((n=this._readEntity(e))!==void 0)return this._predicate===null?(a=this._subject,this._subject=t):(a=this._object,this._object=t),this._emit(t,n,a,this._graph),this._readPath}_readRDFStarTailOrGraph(e){return e.type!==">>"?this._supportsQuads&&this._graph===null&&(this._graph=this._readEntity(e))!==void 0?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,e):this._readRDFStarTail(e)}_readRDFStarTail(e){if(e.type!==">>")return this._error(`Expected >> but got ${e.type}`,e);const t=this._factory.quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",e),this._subject===null?(this._subject=t,this._readPredicate):(this._object=t,this._getContextEndReader())}_getContextEndReader(){const e=this._contextStack;if(!e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(e,t,n,a){this._callback(null,this._factory.quad(e,t,n,a||this.DEFAULTGRAPH))}_error(e,t){const n=new Error(`${e} on line ${t.line}.`);n.context={token:t,line:t.line,previousToken:this._lexer.previousToken},this._callback(n),this._callback=qu}_resolveIRI(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)?e:this._resolveRelativeIRI(e)}_resolveRelativeIRI(e){if(!e.length)return this._base;switch(e[0]){case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return(e[1]==="/"?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return/^[^/:]*:/.test(e)?null:this._removeDotSegments(this._basePath+e)}}_removeDotSegments(e){if(!/(^|\/)\.\.?($|[/#?])/.test(e))return e;const t=e.length;let n="",a=-1,i=-1,o=0,u="/";for(;a<t;){switch(u){case":":if(i<0&&e[++a]==="/"&&e[++a]==="/")for(;(i=a+1)<t&&e[i]!=="/";)a=i;break;case"?":case"#":a=t;break;case"/":if(e[a+1]===".")switch(u=e[++a+1],u){case"/":n+=e.substring(o,a-1),o=a+1;break;case void 0:case"?":case"#":return n+e.substring(o,a)+e.substr(a+1);case".":if(u=e[++a+1],u===void 0||u==="/"||u==="?"||u==="#"){if(n+=e.substring(o,a-2),(o=n.lastIndexOf("/"))>=i&&(n=n.substr(0,o)),u!=="/")return`${n}/${e.substr(a+1)}`;o=a+1}}}u=e[++a]}return n+e.substring(o)}parse(e,t,n){let a,i,o;if(t&&(t.onQuad||t.onPrefix||t.onComment)?(a=t.onQuad,i=t.onPrefix,o=t.onComment):(a=t,i=n),this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${om++}_`,this._prefixCallback=i||qu,this._inversePredicate=!1,this._quantified=Object.create(null),!a){const f=[];let c;if(this._callback=(d,h)=>{d?c=d:h&&f.push(h)},this._lexer.tokenize(e).every(d=>this._readCallback=this._readCallback(d)),c)throw c;return f}let u=(f,c)=>{f!==null?(this._callback(f),this._callback=qu):this._readCallback&&(this._readCallback=this._readCallback(c))};o&&(this._lexer.comments=!0,u=(f,c)=>{f!==null?(this._callback(f),this._callback=qu):this._readCallback&&(c.type==="comment"?o(c.value):this._readCallback=this._readCallback(c))}),this._callback=a,this._lexer.tokenize(e,u)}}function qu(){}function n1(r,e){r._factory=e,r.DEFAULTGRAPH=e.defaultGraph(),r.RDF_FIRST=e.namedNode(tn.rdf.first),r.RDF_REST=e.namedNode(tn.rdf.rest),r.RDF_NIL=e.namedNode(tn.rdf.nil),r.N3_FORALL=e.namedNode(tn.r.forAll),r.N3_FORSOME=e.namedNode(tn.r.forSome),r.ABBREVIATIONS={a:e.namedNode(tn.rdf.type),"=":e.namedNode(tn.owl.sameAs),">":e.namedNode(tn.log.implies),"<":e.namedNode(tn.log.isImpliedBy)},r.QUANTIFIERS_GRAPH=e.namedNode("urn:n3:quantifiers")}n1(r1.prototype,Vh);function e_(r){return!!r&&r.termType==="DefaultGraph"}function al(r){return r.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&")}const t_=/^:?[^:?#]*(?:[?#]|$)|^file:|^[^:]*:\/*[^?#]+?\/(?:\.\.?(?:\/|$)|\/)/i,r_=/^(?:(?:[^/?#]{3,}|\.?[^/?#.]\.?)(?:\/[^/?#]{3,}|\.?[^/?#.]\.?)*\/?)?(?:[?#]|$)/,um="./",n_="../",qc="?",lm="#";class jh{constructor(e){this.base=e,this._baseLength=0,this._baseMatcher=null,this._pathReplacements=new Array(e.length+1)}static supports(e){return!t_.test(e)}_getBaseMatcher(){if(this._baseMatcher)return this._baseMatcher;if(!jh.supports(this.base))return this._baseMatcher=/.^/;const e=/^[^:]*:\/*/.exec(this.base)[0],t=["^",al(e)],n=[],a=[],i=/[^/?#]*([/?#])/y;let o,u=0,f=0,c=i.lastIndex=e.length;for(;!u&&!f&&(o=i.exec(this.base));)o[1]===lm?f=i.lastIndex-1:(t.push(al(o[0]),"(?:"),n.push(")?"),o[1]!==qc?a.push(c=i.lastIndex):(u=c=i.lastIndex,f=this.base.indexOf(lm,u),this._pathReplacements[u]=qc));for(let d=0;d<a.length;d++)this._pathReplacements[a[d]]=n_.repeat(a.length-d-1);return this._pathReplacements[a[a.length-1]]=um,this._baseLength=f>0?f:this.base.length,t.push(al(this.base.substring(c,this._baseLength)),u?"(?:#|$)":"(?:[?#]|$)"),this._baseMatcher=new RegExp([...t,...n].join(""))}toRelative(e){const t=this._getBaseMatcher().exec(e);if(!t)return e;const n=t[0].length;if(n===this._baseLength&&n===e.length)return"";const a=this._pathReplacements[n];if(a){const i=e.substring(n);return a!==qc&&!r_.test(i)?e:a===um&&/^[^?#]/.test(i)?i:a+i}return e.substring(n-1)}}const Ws=Vh.defaultGraph(),{rdf:a_,xsd:Di}=tn,fm=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,cm=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,i_={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};class Hs extends Cn{equals(e){return e===this}}class s_{constructor(e,t){if(this._prefixRegex=/$0^/,e&&typeof e.write!="function"&&(t=e,e=null),t=t||{},this._lists=t.lists,e)this._outputStream=e,this._endStream=t.end===void 0?!0:!!t.end;else{let n="";this._outputStream={write(a,i,o){n+=a,o&&o()},end:a=>{a&&a(null,n)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(t.format)?(this._lineMode=!0,this._writeQuad=this._writeQuadLine):(this._lineMode=!1,this._graph=Ws,this._prefixIRIs=Object.create(null),t.prefixes&&this.addPrefixes(t.prefixes),t.baseIRI&&(this._baseIri=new jh(t.baseIRI)))}get _inDefaultGraph(){return Ws.equals(this._graph)}_write(e,t){this._outputStream.write(e,"utf8",t)}_writeQuad(e,t,n,a,i){try{a.equals(this._graph)||(this._write((this._subject===null?"":this._inDefaultGraph?`.
`:`
}
`)+(Ws.equals(a)?"":`${this._encodeIriOrBlank(a)} {
`)),this._graph=a,this._subject=null),e.equals(this._subject)?t.equals(this._predicate)?this._write(`, ${this._encodeObject(n)}`,i):this._write(`;
    ${this._encodePredicate(this._predicate=t)} ${this._encodeObject(n)}`,i):this._write(`${(this._subject===null?"":`.
`)+this._encodeSubject(this._subject=e)} ${this._encodePredicate(this._predicate=t)} ${this._encodeObject(n)}`,i)}catch(o){i&&i(o)}}_writeQuadLine(e,t,n,a,i){delete this._prefixMatch,this._write(this.quadToString(e,t,n,a),i)}quadToString(e,t,n,a){return`${this._encodeSubject(e)} ${this._encodeIriOrBlank(t)} ${this._encodeObject(n)}${a&&a.value?` ${this._encodeIriOrBlank(a)} .
`:` .
`}`}quadsToString(e){let t="";for(const n of e)t+=this.quadToString(n.subject,n.predicate,n.object,n.graph);return t}_encodeSubject(e){return e.termType==="Quad"?this._encodeQuad(e):this._encodeIriOrBlank(e)}_encodeIriOrBlank(e){if(e.termType!=="NamedNode")return this._lists&&e.value in this._lists&&(e=this.list(this._lists[e.value])),"id"in e?e.id:`_:${e.value}`;let t=e.value;this._baseIri&&(t=this._baseIri.toRelative(t)),fm.test(t)&&(t=t.replace(cm,dm));const n=this._prefixRegex.exec(t);return n?n[1]?this._prefixIRIs[n[1]]+n[2]:t:`<${t}>`}_encodeLiteral(e){let t=e.value;if(fm.test(t)&&(t=t.replace(cm,dm)),e.language)return`"${t}"@${e.language}`;if(this._lineMode){if(e.datatype.value===Di.string)return`"${t}"`}else switch(e.datatype.value){case Di.string:return`"${t}"`;case Di.boolean:if(t==="true"||t==="false")return t;break;case Di.integer:if(/^[+-]?\d+$/.test(t))return t;break;case Di.decimal:if(/^[+-]?\d*\.\d+$/.test(t))return t;break;case Di.double:if(/^[+-]?(?:\d+\.\d*|\.?\d+)[eE][+-]?\d+$/.test(t))return t;break}return`"${t}"^^${this._encodeIriOrBlank(e.datatype)}`}_encodePredicate(e){return e.value===a_.type?"a":this._encodeIriOrBlank(e)}_encodeObject(e){switch(e.termType){case"Quad":return this._encodeQuad(e);case"Literal":return this._encodeLiteral(e);default:return this._encodeIriOrBlank(e)}}_encodeQuad({subject:e,predicate:t,object:n,graph:a}){return`<<${this._encodeSubject(e)} ${this._encodePredicate(t)} ${this._encodeObject(n)}${e_(a)?"":` ${this._encodeIriOrBlank(a)}`}>>`}_blockedWrite(){throw new Error("Cannot write because the writer has been closed.")}addQuad(e,t,n,a,i){n===void 0?this._writeQuad(e.subject,e.predicate,e.object,e.graph,t):typeof a=="function"?this._writeQuad(e,t,n,Ws,a):this._writeQuad(e,t,n,a||Ws,i)}addQuads(e){for(let t=0;t<e.length;t++)this.addQuad(e[t])}addPrefix(e,t,n){const a={};a[e]=t,this.addPrefixes(a,n)}addPrefixes(e,t){if(!this._prefixIRIs)return t&&t();let n=!1;for(let a in e){let i=e[a];typeof i!="string"&&(i=i.value),n=!0,this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null,this._graph=""),this._prefixIRIs[i]=a+=":",this._write(`@prefix ${a} <${i}>.
`)}if(n){let a="",i="";for(const o in this._prefixIRIs)a+=a?`|${o}`:o,i+=(i?"|":"")+this._prefixIRIs[o];a=al(a),this._prefixRegex=new RegExp(`^(?:${i})[^/]*$|^(${a})([_a-zA-Z0-9][\\-_a-zA-Z0-9]*)$`)}this._write(n?`
`:"",t)}blank(e,t){let n=e,a,i;switch(e===void 0?n=[]:e.termType?n=[{predicate:e,object:t}]:"length"in e||(n=[e]),i=n.length){case 0:return new Hs("[]");case 1:if(a=n[0],!(a.object instanceof Hs))return new Hs(`[ ${this._encodePredicate(a.predicate)} ${this._encodeObject(a.object)} ]`);default:let o="[";for(let u=0;u<i;u++)a=n[u],a.predicate.equals(e)?o+=`, ${this._encodeObject(a.object)}`:(o+=`${(u?`;
  `:`
  `)+this._encodePredicate(a.predicate)} ${this._encodeObject(a.object)}`,e=a.predicate);return new Hs(`${o}
]`)}}list(e){const t=e&&e.length||0,n=new Array(t);for(let a=0;a<t;a++)n[a]=this._encodeObject(e[a]);return new Hs(`(${n.join(" ")})`)}end(e){this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null),this._write=this._blockedWrite;let t=e&&((n,a)=>{t=null,e(n,a)});if(this._endStream)try{return this._outputStream.end(t)}catch{}t&&t()}}function dm(r){let e=i_[r];return e===void 0&&(r.length===1?(e=r.charCodeAt(0).toString(16),e="\\u0000".substr(0,6-e.length)+e):(e=((r.charCodeAt(0)-55296)*1024+r.charCodeAt(1)+9216).toString(16),e="\\U00000000".substr(0,10-e.length)+e)),e}const{namedNode:Tr,literal:Gs,quad:dn}=Vh,st={base:"https://example.org/latexkg#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",owl:"http://www.w3.org/2002/07/owl#"};function o_(r){return JSON.stringify({version:1,graph:r},null,2)}async function u_(r){var t,n;const e=new s_({prefixes:{latexkg:st.base,rdf:st.rdf,rdfs:st.rdfs,owl:st.owl}});for(const a of r.nodes){const i=Ks(a.id);e.addQuad(dn(i,Tr(`${st.rdf}type`),Tr(`${st.base}${a.type}`))),e.addQuad(dn(i,Tr(`${st.rdfs}label`),Gs(a.title))),a.content&&e.addQuad(dn(i,Tr(`${st.base}content`),Gs(a.content))),(t=a.source)!=null&&t.file&&e.addQuad(dn(i,Tr(`${st.base}sourceFile`),Gs(a.source.file))),(n=a.source)!=null&&n.latexLabel&&e.addQuad(dn(i,Tr(`${st.base}latexLabel`),Gs(a.source.latexLabel)))}for(const a of r.edges){const i=f_(a.type);if(e.addQuad(dn(Ks(a.source),i,Ks(a.target))),a.evidence){const o=Tr(`${st.base}stmt:${encodeURIComponent(`${a.source}|${a.type}|${a.target}`)}`);e.addQuad(dn(o,Tr(`${st.rdf}type`),Tr(`${st.rdf}Statement`))),e.addQuad(dn(o,Tr(`${st.rdf}subject`),Ks(a.source))),e.addQuad(dn(o,Tr(`${st.rdf}predicate`),i)),e.addQuad(dn(o,Tr(`${st.rdf}object`),Ks(a.target))),e.addQuad(dn(o,Tr(`${st.base}evidence`),Gs(a.evidence)))}}return await new Promise((a,i)=>{e.end((o,u)=>{o?i(o):a(u)})})}function l_(r){const e=f=>f.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"),t=new Set(r.nodes.map(f=>f.type)),n=new Set(r.edges.map(f=>f.type)),a=[...t].map(f=>`  <owl:Class rdf:about="${st.base}${f}"/>`).join(`
`),i=[...n].map(f=>`  <owl:ObjectProperty rdf:about="${st.base}${f}"/>`).join(`
`),o=r.nodes.map(f=>{const c=`${st.base}node:${encodeURIComponent(f.id)}`,d=e(f.title),h=f.content?`
    <latexkg:content>${e(f.content)}</latexkg:content>`:"";return`  <owl:NamedIndividual rdf:about="${c}">
    <rdf:type rdf:resource="${st.base}${f.type}"/>
    <rdfs:label>${d}</rdfs:label>${h}
  </owl:NamedIndividual>`}).join(`
`),u=r.edges.map(f=>{const c=`${st.base}node:${encodeURIComponent(f.source)}`,d=`${st.base}node:${encodeURIComponent(f.target)}`;return`  <rdf:Description rdf:about="${c}">
    <latexkg:${f.type} rdf:resource="${d}"/>
  </rdf:Description>`}).join(`
`);return`<?xml version="1.0" encoding="UTF-8"?>
<rdf:RDF
  xmlns:rdf="${st.rdf}"
  xmlns:rdfs="${st.rdfs}"
  xmlns:owl="${st.owl}"
  xmlns:latexkg="${st.base}">
  <owl:Ontology rdf:about="${st.base}"/>
${a?`
`+a:""}${i?`
`+i:""}${o?`
`+o:""}${u?`
`+u:""}
</rdf:RDF>
`}function Ks(r){return Tr(`${st.base}node:${encodeURIComponent(r)}`)}function f_(r){return Tr(`${st.base}${r}`)}function c_(r){var t,n;const e=JSON.parse(r);if((t=e==null?void 0:e.graph)!=null&&t.nodes&&((n=e==null?void 0:e.graph)!=null&&n.edges))return e.graph;if(e!=null&&e.nodes&&(e!=null&&e.edges))return e;throw new Error("JSON  {graph:{nodes,edges}}  {nodes,edges}")}async function d_(r){const t=new r1().parse(r),n=new Map,a=[],i=f=>{const c=`${st.base}node:`;return f.startsWith(c)?decodeURIComponent(f.slice(c.length)):null},o=f=>f.startsWith(st.base);for(const f of t){const c=f.subject.value,d=f.predicate.value,h=f.object,p=i(c);if(!p)continue;const g=n.get(p)??{id:p};if(n.set(p,g),d===`${st.rdf}type`&&h.termType==="NamedNode"&&h.value.startsWith(st.base)){const m=h.value.slice(st.base.length);g.type=m}else if(d===`${st.rdfs}label`&&h.termType==="Literal")g.title=h.value;else if(d===`${st.base}content`&&h.termType==="Literal")g.content=h.value;else if(d===`${st.base}sourceFile`&&h.termType==="Literal")g.source={...g.source,file:h.value};else if(d===`${st.base}latexLabel`&&h.termType==="Literal")g.source={...g.source,latexLabel:h.value};else if(o(d)&&h.termType==="NamedNode"){const m=d.slice(st.base.length),w=i(h.value);w&&a.push({type:m,source:p,target:w})}}const u=[];for(const[f,c]of n.entries())!c.type||!c.title?u.push({id:f,type:c.type??"Conclusion",title:c.title??f,content:c.content,source:c.source}):u.push(c);return{nodes:u,edges:a}}function h_({onAfterImport:r}){const e=lt(o=>o.graph),[t,n]=lr.useState(null);function a(o,u,f="application/octet-stream"){const c=new Blob([u],{type:f}),d=URL.createObjectURL(c),h=document.createElement("a");h.href=d,h.download=o,h.click(),setTimeout(()=>URL.revokeObjectURL(d),5e3)}async function i(o){n(null);try{const u=await o.text();let f=null;if(o.name.toLowerCase().endsWith(".json"))f=c_(u);else if(o.name.toLowerCase().endsWith(".ttl")||o.name.toLowerCase().endsWith(".turtle"))f=await d_(u);else throw new Error(" .json  .ttl(turtle)");lt.getState().setGraph(f),lt.getState().setInfo(`nodes=${f.nodes.length}, edges=${f.edges.length}`),n(""),r==null||r()}catch(u){const f=String((u==null?void 0:u.message)??u);n(`${f}`),lt.getState().setError(f)}}return Ae.jsxs("div",{className:"card",children:[Ae.jsx("div",{className:"h1",children:" /  "}),Ae.jsx("div",{className:"muted",children:" JSON / RDF(Turtle) / OWL(RDF/XML) JSON / Turtle"}),Ae.jsxs("div",{className:"row",style:{marginTop:10},children:[Ae.jsx("button",{className:"btn",onClick:()=>a("graph.json",o_(e),"application/json"),children:" JSON"}),Ae.jsx("button",{className:"btn",onClick:async()=>a("graph.ttl",await u_(e),"text/turtle"),children:" RDF(TTL)"}),Ae.jsx("button",{className:"btn",onClick:()=>a("graph.owl.xml",l_(e),"application/rdf+xml"),children:" OWL"})]}),Ae.jsx("div",{className:"label",children:".json / .ttl"}),Ae.jsx("input",{className:"input",type:"file",accept:".json,.ttl,.turtle,application/json,text/turtle",onChange:o=>{var f;const u=(f=o.target.files)==null?void 0:f[0];u&&i(u)}}),t?Ae.jsx("div",{className:"muted",style:{marginTop:8},children:t}):null]})}function _h(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function v_(r){if(Array.isArray(r))return r}function p_(r){if(Array.isArray(r))return _h(r)}function ka(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function g_(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,i1(n.key),n)}}function Ca(r,e,t){return e&&g_(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function Fr(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=qh(r))||e){t&&(r=t);var n=0,a=function(){};return{s:a,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i,o=!0,u=!1;return{s:function(){t=t.call(r)},n:function(){var f=t.next();return o=f.done,f},e:function(f){u=!0,i=f},f:function(){try{o||t.return==null||t.return()}finally{if(u)throw i}}}}function a1(r,e,t){return(e=i1(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function m_(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function y_(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,a,i,o,u=[],f=!0,c=!1;try{if(i=(t=t.call(r)).next,e===0){if(Object(t)!==t)return;f=!1}else for(;!(f=(n=i.call(t)).done)&&(u.push(n.value),u.length!==e);f=!0);}catch(d){c=!0,a=d}finally{try{if(!f&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw a}}return u}}function w_(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function x_(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ht(r,e){return v_(r)||y_(r,e)||qh(r,e)||w_()}function gl(r){return p_(r)||m_(r)||qh(r)||x_()}function b_(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}function i1(r){var e=b_(r,"string");return typeof e=="symbol"?e:e+""}function Qt(r){"@babel/helpers - typeof";return Qt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qt(r)}function qh(r,e){if(r){if(typeof r=="string")return _h(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_h(r,e):void 0}}var Xt=typeof window>"u"?null:window,hm=Xt?Xt.navigator:null;Xt&&Xt.document;var __=Qt(""),s1=Qt({}),E_=Qt(function(){}),S_=typeof HTMLElement>"u"?"undefined":Qt(HTMLElement),Eo=function(e){return e&&e.instanceString&&zt(e.instanceString)?e.instanceString():null},Ye=function(e){return e!=null&&Qt(e)==__},zt=function(e){return e!=null&&Qt(e)===E_},wt=function(e){return!Gr(e)&&(Array.isArray?Array.isArray(e):e!=null&&e instanceof Array)},dt=function(e){return e!=null&&Qt(e)===s1&&!wt(e)&&e.constructor===Object},k_=function(e){return e!=null&&Qt(e)===s1},Ue=function(e){return e!=null&&Qt(e)===Qt(1)&&!isNaN(e)},C_=function(e){return Ue(e)&&Math.floor(e)===e},ml=function(e){if(S_!=="undefined")return e!=null&&e instanceof HTMLElement},Gr=function(e){return So(e)||o1(e)},So=function(e){return Eo(e)==="collection"&&e._private.single},o1=function(e){return Eo(e)==="collection"&&!e._private.single},Wh=function(e){return Eo(e)==="core"},u1=function(e){return Eo(e)==="stylesheet"},T_=function(e){return Eo(e)==="event"},wa=function(e){return e==null?!0:!!(e===""||e.match(/^\s+$/))},P_=function(e){return typeof HTMLElement>"u"?!1:e instanceof HTMLElement},R_=function(e){return dt(e)&&Ue(e.x1)&&Ue(e.x2)&&Ue(e.y1)&&Ue(e.y2)},B_=function(e){return k_(e)&&zt(e.then)},A_=function(){return hm&&hm.userAgent.match(/msie|trident|edge/i)},Xi=function(e,t){t||(t=function(){if(arguments.length===1)return arguments[0];if(arguments.length===0)return"undefined";for(var i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);return i.join("$")});var n=function(){var i=this,o=arguments,u,f=t.apply(i,o),c=n.cache;return(u=c[f])||(u=c[f]=e.apply(i,o)),u};return n.cache={},n},Hh=Xi(function(r){return r.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}),Al=Xi(function(r){return r.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}),l1=Xi(function(r,e){return r+e[0].toUpperCase()+e.substring(1)},function(r,e){return r+"$"+e}),vm=function(e){return wa(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},va=function(e,t){return e.slice(-1*t.length)===t},Yt="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",D_="rgb[a]?\\(("+Yt+"[%]?)\\s*,\\s*("+Yt+"[%]?)\\s*,\\s*("+Yt+"[%]?)(?:\\s*,\\s*("+Yt+"))?\\)",I_="rgb[a]?\\((?:"+Yt+"[%]?)\\s*,\\s*(?:"+Yt+"[%]?)\\s*,\\s*(?:"+Yt+"[%]?)(?:\\s*,\\s*(?:"+Yt+"))?\\)",L_="hsl[a]?\\(("+Yt+")\\s*,\\s*("+Yt+"[%])\\s*,\\s*("+Yt+"[%])(?:\\s*,\\s*("+Yt+"))?\\)",N_="hsl[a]?\\((?:"+Yt+")\\s*,\\s*(?:"+Yt+"[%])\\s*,\\s*(?:"+Yt+"[%])(?:\\s*,\\s*(?:"+Yt+"))?\\)",O_="\\#[0-9a-fA-F]{3}",M_="\\#[0-9a-fA-F]{6}",f1=function(e,t){return e<t?-1:e>t?1:0},z_=function(e,t){return-1*f1(e,t)},et=Object.assign!=null?Object.assign.bind(Object):function(r){for(var e=arguments,t=1;t<e.length;t++){var n=e[t];if(n!=null)for(var a=Object.keys(n),i=0;i<a.length;i++){var o=a[i];r[o]=n[o]}}return r},F_=function(e){if(!(!(e.length===4||e.length===7)||e[0]!=="#")){var t=e.length===4,n,a,i,o=16;return t?(n=parseInt(e[1]+e[1],o),a=parseInt(e[2]+e[2],o),i=parseInt(e[3]+e[3],o)):(n=parseInt(e[1]+e[2],o),a=parseInt(e[3]+e[4],o),i=parseInt(e[5]+e[6],o)),[n,a,i]}},U_=function(e){var t,n,a,i,o,u,f,c;function d(m,w,x){return x<0&&(x+=1),x>1&&(x-=1),x<1/6?m+(w-m)*6*x:x<1/2?w:x<2/3?m+(w-m)*(2/3-x)*6:m}var h=new RegExp("^"+L_+"$").exec(e);if(h){if(n=parseInt(h[1]),n<0?n=(360- -1*n%360)%360:n>360&&(n=n%360),n/=360,a=parseFloat(h[2]),a<0||a>100||(a=a/100,i=parseFloat(h[3]),i<0||i>100)||(i=i/100,o=h[4],o!==void 0&&(o=parseFloat(o),o<0||o>1)))return;if(a===0)u=f=c=Math.round(i*255);else{var p=i<.5?i*(1+a):i+a-i*a,g=2*i-p;u=Math.round(255*d(g,p,n+1/3)),f=Math.round(255*d(g,p,n)),c=Math.round(255*d(g,p,n-1/3))}t=[u,f,c,o]}return t},$_=function(e){var t,n=new RegExp("^"+D_+"$").exec(e);if(n){t=[];for(var a=[],i=1;i<=3;i++){var o=n[i];if(o[o.length-1]==="%"&&(a[i]=!0),o=parseFloat(o),a[i]&&(o=o/100*255),o<0||o>255)return;t.push(Math.floor(o))}var u=a[1]||a[2]||a[3],f=a[1]&&a[2]&&a[3];if(u&&!f)return;var c=n[4];if(c!==void 0){if(c=parseFloat(c),c<0||c>1)return;t.push(c)}}return t},V_=function(e){return j_[e.toLowerCase()]},c1=function(e){return(wt(e)?e:null)||V_(e)||F_(e)||$_(e)||U_(e)},j_={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},d1=function(e){for(var t=e.map,n=e.keys,a=n.length,i=0;i<a;i++){var o=n[i];if(dt(o))throw Error("Tried to set map with object key");i<n.length-1?(t[o]==null&&(t[o]={}),t=t[o]):t[o]=e.value}},h1=function(e){for(var t=e.map,n=e.keys,a=n.length,i=0;i<a;i++){var o=n[i];if(dt(o))throw Error("Tried to get map with object key");if(t=t[o],t==null)return t}return t},Wu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ko(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Wc,pm;function Co(){if(pm)return Wc;pm=1;function r(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return Wc=r,Wc}var Hc,gm;function q_(){if(gm)return Hc;gm=1;var r=typeof Wu=="object"&&Wu&&Wu.Object===Object&&Wu;return Hc=r,Hc}var Gc,mm;function Dl(){if(mm)return Gc;mm=1;var r=q_(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=r||e||Function("return this")();return Gc=t,Gc}var Kc,ym;function W_(){if(ym)return Kc;ym=1;var r=Dl(),e=function(){return r.Date.now()};return Kc=e,Kc}var Zc,wm;function H_(){if(wm)return Zc;wm=1;var r=/\s/;function e(t){for(var n=t.length;n--&&r.test(t.charAt(n)););return n}return Zc=e,Zc}var Xc,xm;function G_(){if(xm)return Xc;xm=1;var r=H_(),e=/^\s+/;function t(n){return n&&n.slice(0,r(n)+1).replace(e,"")}return Xc=t,Xc}var Yc,bm;function Gh(){if(bm)return Yc;bm=1;var r=Dl(),e=r.Symbol;return Yc=e,Yc}var Qc,_m;function K_(){if(_m)return Qc;_m=1;var r=Gh(),e=Object.prototype,t=e.hasOwnProperty,n=e.toString,a=r?r.toStringTag:void 0;function i(o){var u=t.call(o,a),f=o[a];try{o[a]=void 0;var c=!0}catch{}var d=n.call(o);return c&&(u?o[a]=f:delete o[a]),d}return Qc=i,Qc}var Jc,Em;function Z_(){if(Em)return Jc;Em=1;var r=Object.prototype,e=r.toString;function t(n){return e.call(n)}return Jc=t,Jc}var ed,Sm;function v1(){if(Sm)return ed;Sm=1;var r=Gh(),e=K_(),t=Z_(),n="[object Null]",a="[object Undefined]",i=r?r.toStringTag:void 0;function o(u){return u==null?u===void 0?a:n:i&&i in Object(u)?e(u):t(u)}return ed=o,ed}var td,km;function X_(){if(km)return td;km=1;function r(e){return e!=null&&typeof e=="object"}return td=r,td}var rd,Cm;function To(){if(Cm)return rd;Cm=1;var r=v1(),e=X_(),t="[object Symbol]";function n(a){return typeof a=="symbol"||e(a)&&r(a)==t}return rd=n,rd}var nd,Tm;function Y_(){if(Tm)return nd;Tm=1;var r=G_(),e=Co(),t=To(),n=NaN,a=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,u=parseInt;function f(c){if(typeof c=="number")return c;if(t(c))return n;if(e(c)){var d=typeof c.valueOf=="function"?c.valueOf():c;c=e(d)?d+"":d}if(typeof c!="string")return c===0?c:+c;c=r(c);var h=i.test(c);return h||o.test(c)?u(c.slice(2),h?2:8):a.test(c)?n:+c}return nd=f,nd}var ad,Pm;function Q_(){if(Pm)return ad;Pm=1;var r=Co(),e=W_(),t=Y_(),n="Expected a function",a=Math.max,i=Math.min;function o(u,f,c){var d,h,p,g,m,w,x=0,b=!1,_=!1,E=!0;if(typeof u!="function")throw new TypeError(n);f=t(f)||0,r(c)&&(b=!!c.leading,_="maxWait"in c,p=_?a(t(c.maxWait)||0,f):p,E="trailing"in c?!!c.trailing:E);function C(F){var T=d,H=h;return d=h=void 0,x=F,g=u.apply(H,T),g}function B(F){return x=F,m=setTimeout(z,f),b?C(F):g}function N(F){var T=F-w,H=F-x,Q=f-T;return _?i(Q,p-H):Q}function A(F){var T=F-w,H=F-x;return w===void 0||T>=f||T<0||_&&H>=p}function z(){var F=e();if(A(F))return M(F);m=setTimeout(z,N(F))}function M(F){return m=void 0,E&&d?C(F):(d=h=void 0,g)}function V(){m!==void 0&&clearTimeout(m),x=0,d=w=h=m=void 0}function q(){return m===void 0?g:M(e())}function I(){var F=e(),T=A(F);if(d=arguments,h=this,w=F,T){if(m===void 0)return B(w);if(_)return clearTimeout(m),m=setTimeout(z,f),C(w)}return m===void 0&&(m=setTimeout(z,f)),g}return I.cancel=V,I.flush=q,I}return ad=o,ad}var J_=Q_(),Po=ko(J_),id=Xt?Xt.performance:null,p1=id&&id.now?function(){return id.now()}:function(){return Date.now()},eE=(function(){if(Xt){if(Xt.requestAnimationFrame)return function(r){Xt.requestAnimationFrame(r)};if(Xt.mozRequestAnimationFrame)return function(r){Xt.mozRequestAnimationFrame(r)};if(Xt.webkitRequestAnimationFrame)return function(r){Xt.webkitRequestAnimationFrame(r)};if(Xt.msRequestAnimationFrame)return function(r){Xt.msRequestAnimationFrame(r)}}return function(r){r&&setTimeout(function(){r(p1())},1e3/60)}})(),yl=function(e){return eE(e)},Un=p1,Za=9261,g1=65599,Vi=5381,m1=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Za,n=t,a;a=e.next(),!a.done;)n=n*g1+a.value|0;return n},fo=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Za;return t*g1+e|0},co=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Vi;return(t<<5)+t+e|0},tE=function(e,t){return e*2097152+t},ca=function(e){return e[0]*2097152+e[1]},Hu=function(e,t){return[fo(e[0],t[0]),co(e[1],t[1])]},Rm=function(e,t){var n={value:0,done:!1},a=0,i=e.length,o={next:function(){return a<i?n.value=e[a++]:n.done=!0,n}};return m1(o,t)},Qa=function(e,t){var n={value:0,done:!1},a=0,i=e.length,o={next:function(){return a<i?n.value=e.charCodeAt(a++):n.done=!0,n}};return m1(o,t)},y1=function(){return rE(arguments)},rE=function(e){for(var t,n=0;n<e.length;n++){var a=e[n];n===0?t=Qa(a):t=Qa(a,t)}return t};function nE(r,e,t,n,a){var i=a*Math.PI/180,o=Math.cos(i)*(r-t)-Math.sin(i)*(e-n)+t,u=Math.sin(i)*(r-t)+Math.cos(i)*(e-n)+n;return{x:o,y:u}}var aE=function(e,t,n,a,i,o){return{x:(e-n)*i+n,y:(t-a)*o+a}};function iE(r,e,t){if(t===0)return r;var n=(e.x1+e.x2)/2,a=(e.y1+e.y2)/2,i=e.w/e.h,o=1/i,u=nE(r.x,r.y,n,a,t),f=aE(u.x,u.y,n,a,i,o);return{x:f.x,y:f.y}}var Bm=!0,sE=console.warn!=null,oE=console.trace!=null,Kh=Number.MAX_SAFE_INTEGER||9007199254740991,w1=function(){return!0},wl=function(){return!1},Am=function(){return 0},Zh=function(){},At=function(e){throw new Error(e)},x1=function(e){if(e!==void 0)Bm=!!e;else return Bm},gt=function(e){x1()&&(sE?console.warn(e):(console.log(e),oE&&console.trace()))},uE=function(e){return et({},e)},Sn=function(e){return e==null?e:wt(e)?e.slice():dt(e)?uE(e):e},lE=function(e){return e.slice()},b1=function(e,t){for(t=e="";e++<36;t+=e*51&52?(e^15?8^Math.random()*(e^20?16:4):4).toString(16):"-");return t},fE={},_1=function(){return fE},dr=function(e){var t=Object.keys(e);return function(n){for(var a={},i=0;i<t.length;i++){var o=t[i],u=n==null?void 0:n[o];a[o]=u===void 0?e[o]:u}return a}},xa=function(e,t,n){for(var a=e.length-1;a>=0;a--)e[a]===t&&e.splice(a,1)},Xh=function(e){e.splice(0,e.length)},cE=function(e,t){for(var n=0;n<t.length;n++){var a=t[n];e.push(a)}},Mr=function(e,t,n){return n&&(t=l1(n,t)),e[t]},zn=function(e,t,n,a){n&&(t=l1(n,t)),e[t]=a},dE=(function(){function r(){ka(this,r),this._obj={}}return Ca(r,[{key:"set",value:function(t,n){return this._obj[t]=n,this}},{key:"delete",value:function(t){return this._obj[t]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(t){return this._obj[t]!==void 0}},{key:"get",value:function(t){return this._obj[t]}}])})(),Fn=typeof Map<"u"?Map:dE,hE="undefined",vE=(function(){function r(e){if(ka(this,r),this._obj=Object.create(null),this.size=0,e!=null){var t;e.instanceString!=null&&e.instanceString()===this.instanceString()?t=e.toArray():t=e;for(var n=0;n<t.length;n++)this.add(t[n])}}return Ca(r,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(t){var n=this._obj;n[t]!==1&&(n[t]=1,this.size++)}},{key:"delete",value:function(t){var n=this._obj;n[t]===1&&(n[t]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(t){return this._obj[t]===1}},{key:"toArray",value:function(){var t=this;return Object.keys(this._obj).filter(function(n){return t.has(n)})}},{key:"forEach",value:function(t,n){return this.toArray().forEach(t,n)}}])})(),Ji=(typeof Set>"u"?"undefined":Qt(Set))!==hE?Set:vE,Il=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0||t===void 0||!Wh(e)){At("An element must have a core reference and parameters set");return}var a=t.group;if(a==null&&(t.data&&t.data.source!=null&&t.data.target!=null?a="edges":a="nodes"),a!=="nodes"&&a!=="edges"){At("An element must be of type `nodes` or `edges`; you specified `"+a+"`");return}this.length=1,this[0]=this;var i=this._private={cy:e,single:!0,data:t.data||{},position:t.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:a,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!t.selected,selectable:t.selectable===void 0?!0:!!t.selectable,locked:!!t.locked,grabbed:!1,grabbable:t.grabbable===void 0?!0:!!t.grabbable,pannable:t.pannable===void 0?a==="edges":!!t.pannable,active:!1,classes:new Ji,animation:{current:[],queue:[]},rscratch:{},scratch:t.scratch||{},edges:[],children:[],parent:t.parent&&t.parent.isNode()?t.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(i.position.x==null&&(i.position.x=0),i.position.y==null&&(i.position.y=0),t.renderedPosition){var o=t.renderedPosition,u=e.pan(),f=e.zoom();i.position={x:(o.x-u.x)/f,y:(o.y-u.y)/f}}var c=[];wt(t.classes)?c=t.classes:Ye(t.classes)&&(c=t.classes.split(/\s+/));for(var d=0,h=c.length;d<h;d++){var p=c[d];!p||p===""||i.classes.add(p)}this.createEmitter(),(n===void 0||n)&&this.restore();var g=t.style||t.css;g&&(gt("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(g))},Dm=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(n,a,i){var o;dt(n)&&!Gr(n)&&(o=n,n=o.roots||o.root,a=o.visit,i=o.directed),i=arguments.length===2&&!zt(a)?a:i,a=zt(a)?a:function(){};for(var u=this._private.cy,f=n=Ye(n)?this.filter(n):n,c=[],d=[],h={},p={},g={},m=0,w,x=this.byGroup(),b=x.nodes,_=x.edges,E=0;E<f.length;E++){var C=f[E],B=C.id();C.isNode()&&(c.unshift(C),e.bfs&&(g[B]=!0,d.push(C)),p[B]=0)}for(var N=function(){var F=e.bfs?c.shift():c.pop(),T=F.id();if(e.dfs){if(g[T])return 0;g[T]=!0,d.push(F)}var H=p[T],Q=h[T],W=Q!=null?Q.source():null,Z=Q!=null?Q.target():null,X=Q==null?void 0:F.same(W)?Z[0]:W[0],te;if(te=a(F,Q,X,m++,H),te===!0)return w=F,1;if(te===!1)return 1;for(var L=F.connectedEdges().filter(function(we){return(!i||we.source().same(F))&&_.has(we)}),U=0;U<L.length;U++){var oe=L[U],ie=oe.connectedNodes().filter(function(we){return!we.same(F)&&b.has(we)}),ne=ie.id();ie.length!==0&&!g[ne]&&(ie=ie[0],c.push(ie),e.bfs&&(g[ne]=!0,d.push(ie)),h[ne]=oe,p[ne]=p[T]+1)}},A;c.length!==0&&(A=N(),!(A!==0&&A===1)););for(var z=u.collection(),M=0;M<d.length;M++){var V=d[M],q=h[V.id()];q!=null&&z.push(q),z.push(V)}return{path:u.collection(z),found:u.collection(w)}}},ho={breadthFirstSearch:Dm({bfs:!0}),depthFirstSearch:Dm({dfs:!0})};ho.bfs=ho.breadthFirstSearch;ho.dfs=ho.depthFirstSearch;var il={exports:{}},pE=il.exports,Im;function gE(){return Im||(Im=1,(function(r,e){(function(){var t,n,a,i,o,u,f,c,d,h,p,g,m,w,x;a=Math.floor,h=Math.min,n=function(b,_){return b<_?-1:b>_?1:0},d=function(b,_,E,C,B){var N;if(E==null&&(E=0),B==null&&(B=n),E<0)throw new Error("lo must be non-negative");for(C==null&&(C=b.length);E<C;)N=a((E+C)/2),B(_,b[N])<0?C=N:E=N+1;return[].splice.apply(b,[E,E-E].concat(_)),_},u=function(b,_,E){return E==null&&(E=n),b.push(_),w(b,0,b.length-1,E)},o=function(b,_){var E,C;return _==null&&(_=n),E=b.pop(),b.length?(C=b[0],b[0]=E,x(b,0,_)):C=E,C},c=function(b,_,E){var C;return E==null&&(E=n),C=b[0],b[0]=_,x(b,0,E),C},f=function(b,_,E){var C;return E==null&&(E=n),b.length&&E(b[0],_)<0&&(C=[b[0],_],_=C[0],b[0]=C[1],x(b,0,E)),_},i=function(b,_){var E,C,B,N,A,z;for(_==null&&(_=n),N=(function(){z=[];for(var M=0,V=a(b.length/2);0<=V?M<V:M>V;0<=V?M++:M--)z.push(M);return z}).apply(this).reverse(),A=[],C=0,B=N.length;C<B;C++)E=N[C],A.push(x(b,E,_));return A},m=function(b,_,E){var C;if(E==null&&(E=n),C=b.indexOf(_),C!==-1)return w(b,0,C,E),x(b,C,E)},p=function(b,_,E){var C,B,N,A,z;if(E==null&&(E=n),B=b.slice(0,_),!B.length)return B;for(i(B,E),z=b.slice(_),N=0,A=z.length;N<A;N++)C=z[N],f(B,C,E);return B.sort(E).reverse()},g=function(b,_,E){var C,B,N,A,z,M,V,q,I;if(E==null&&(E=n),_*10<=b.length){if(N=b.slice(0,_).sort(E),!N.length)return N;for(B=N[N.length-1],V=b.slice(_),A=0,M=V.length;A<M;A++)C=V[A],E(C,B)<0&&(d(N,C,0,null,E),N.pop(),B=N[N.length-1]);return N}for(i(b,E),I=[],z=0,q=h(_,b.length);0<=q?z<q:z>q;0<=q?++z:--z)I.push(o(b,E));return I},w=function(b,_,E,C){var B,N,A;for(C==null&&(C=n),B=b[E];E>_;){if(A=E-1>>1,N=b[A],C(B,N)<0){b[E]=N,E=A;continue}break}return b[E]=B},x=function(b,_,E){var C,B,N,A,z;for(E==null&&(E=n),B=b.length,z=_,N=b[_],C=2*_+1;C<B;)A=C+1,A<B&&!(E(b[C],b[A])<0)&&(C=A),b[_]=b[C],_=C,C=2*_+1;return b[_]=N,w(b,z,_,E)},t=(function(){b.push=u,b.pop=o,b.replace=c,b.pushpop=f,b.heapify=i,b.updateItem=m,b.nlargest=p,b.nsmallest=g;function b(_){this.cmp=_??n,this.nodes=[]}return b.prototype.push=function(_){return u(this.nodes,_,this.cmp)},b.prototype.pop=function(){return o(this.nodes,this.cmp)},b.prototype.peek=function(){return this.nodes[0]},b.prototype.contains=function(_){return this.nodes.indexOf(_)!==-1},b.prototype.replace=function(_){return c(this.nodes,_,this.cmp)},b.prototype.pushpop=function(_){return f(this.nodes,_,this.cmp)},b.prototype.heapify=function(){return i(this.nodes,this.cmp)},b.prototype.updateItem=function(_){return m(this.nodes,_,this.cmp)},b.prototype.clear=function(){return this.nodes=[]},b.prototype.empty=function(){return this.nodes.length===0},b.prototype.size=function(){return this.nodes.length},b.prototype.clone=function(){var _;return _=new b,_.nodes=this.nodes.slice(0),_},b.prototype.toArray=function(){return this.nodes.slice(0)},b.prototype.insert=b.prototype.push,b.prototype.top=b.prototype.peek,b.prototype.front=b.prototype.peek,b.prototype.has=b.prototype.contains,b.prototype.copy=b.prototype.clone,b})(),(function(b,_){return r.exports=_()})(this,function(){return t})}).call(pE)})(il)),il.exports}var sd,Lm;function mE(){return Lm||(Lm=1,sd=gE()),sd}var yE=mE(),Ro=ko(yE),wE=dr({root:null,weight:function(e){return 1},directed:!1}),xE={dijkstra:function(e){if(!dt(e)){var t=arguments;e={root:t[0],weight:t[1],directed:t[2]}}var n=wE(e),a=n.root,i=n.weight,o=n.directed,u=this,f=i,c=Ye(a)?this.filter(a)[0]:a[0],d={},h={},p={},g=this.byGroup(),m=g.nodes,w=g.edges;w.unmergeBy(function(H){return H.isLoop()});for(var x=function(Q){return d[Q.id()]},b=function(Q,W){d[Q.id()]=W,_.updateItem(Q)},_=new Ro(function(H,Q){return x(H)-x(Q)}),E=0;E<m.length;E++){var C=m[E];d[C.id()]=C.same(c)?0:1/0,_.push(C)}for(var B=function(Q,W){for(var Z=(o?Q.edgesTo(W):Q.edgesWith(W)).intersect(w),X=1/0,te,L=0;L<Z.length;L++){var U=Z[L],oe=f(U);(oe<X||!te)&&(X=oe,te=U)}return{edge:te,dist:X}};_.size()>0;){var N=_.pop(),A=x(N),z=N.id();if(p[z]=A,A!==1/0)for(var M=N.neighborhood().intersect(m),V=0;V<M.length;V++){var q=M[V],I=q.id(),F=B(N,q),T=A+F.dist;T<x(q)&&(b(q,T),h[I]={node:N,edge:F.edge})}}return{distanceTo:function(Q){var W=Ye(Q)?m.filter(Q)[0]:Q[0];return p[W.id()]},pathTo:function(Q){var W=Ye(Q)?m.filter(Q)[0]:Q[0],Z=[],X=W,te=X.id();if(W.length>0)for(Z.unshift(W);h[te];){var L=h[te];Z.unshift(L.edge),Z.unshift(L.node),X=L.node,te=X.id()}return u.spawn(Z)}}}},bE={kruskal:function(e){e=e||function(E){return 1};for(var t=this.byGroup(),n=t.nodes,a=t.edges,i=n.length,o=new Array(i),u=n,f=function(C){for(var B=0;B<o.length;B++){var N=o[B];if(N.has(C))return B}},c=0;c<i;c++)o[c]=this.spawn(n[c]);for(var d=a.sort(function(E,C){return e(E)-e(C)}),h=0;h<d.length;h++){var p=d[h],g=p.source()[0],m=p.target()[0],w=f(g),x=f(m),b=o[w],_=o[x];w!==x&&(u.merge(p),b.merge(_),o.splice(x,1))}return u}},_E=dr({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),EE={aStar:function(e){var t=this.cy(),n=_E(e),a=n.root,i=n.goal,o=n.heuristic,u=n.directed,f=n.weight;a=t.collection(a)[0],i=t.collection(i)[0];var c=a.id(),d=i.id(),h={},p={},g={},m=new Ro(function(te,L){return p[te.id()]-p[L.id()]}),w=new Ji,x={},b={},_=function(L,U){m.push(L),w.add(U)},E,C,B=function(){E=m.pop(),C=E.id(),w.delete(C)},N=function(L){return w.has(L)};_(a,c),h[c]=0,p[c]=o(a);for(var A=0;m.size()>0;){if(B(),A++,C===d){for(var z=[],M=i,V=d,q=b[V];z.unshift(M),q!=null&&z.unshift(q),M=x[V],M!=null;)V=M.id(),q=b[V];return{found:!0,distance:h[C],path:this.spawn(z),steps:A}}g[C]=!0;for(var I=E._private.edges,F=0;F<I.length;F++){var T=I[F];if(this.hasElementWithId(T.id())&&!(u&&T.data("source")!==C)){var H=T.source(),Q=T.target(),W=H.id()!==C?H:Q,Z=W.id();if(this.hasElementWithId(Z)&&!g[Z]){var X=h[C]+f(T);if(!N(Z)){h[Z]=X,p[Z]=X+o(W),_(W,Z),x[Z]=E,b[Z]=T;continue}X<h[Z]&&(h[Z]=X,p[Z]=X+o(W),x[Z]=E,b[Z]=T)}}}}return{found:!1,distance:void 0,path:void 0,steps:A}}},SE=dr({weight:function(e){return 1},directed:!1}),kE={floydWarshall:function(e){for(var t=this.cy(),n=SE(e),a=n.weight,i=n.directed,o=a,u=this.byGroup(),f=u.nodes,c=u.edges,d=f.length,h=d*d,p=function(oe){return f.indexOf(oe)},g=function(oe){return f[oe]},m=new Array(h),w=0;w<h;w++){var x=w%d,b=(w-x)/d;b===x?m[w]=0:m[w]=1/0}for(var _=new Array(h),E=new Array(h),C=0;C<c.length;C++){var B=c[C],N=B.source()[0],A=B.target()[0];if(N!==A){var z=p(N),M=p(A),V=z*d+M,q=o(B);if(m[V]>q&&(m[V]=q,_[V]=M,E[V]=B),!i){var I=M*d+z;!i&&m[I]>q&&(m[I]=q,_[I]=z,E[I]=B)}}}for(var F=0;F<d;F++)for(var T=0;T<d;T++)for(var H=T*d+F,Q=0;Q<d;Q++){var W=T*d+Q,Z=F*d+Q;m[H]+m[Z]<m[W]&&(m[W]=m[H]+m[Z],_[W]=_[H])}var X=function(oe){return(Ye(oe)?t.filter(oe):oe)[0]},te=function(oe){return p(X(oe))},L={distance:function(oe,ie){var ne=te(oe),we=te(ie);return m[ne*d+we]},path:function(oe,ie){var ne=te(oe),we=te(ie),Te=g(ne);if(ne===we)return Te.collection();if(_[ne*d+we]==null)return t.collection();var ke=t.collection(),ge=ne,fe;for(ke.merge(Te);ne!==we;)ge=ne,ne=_[ne*d+we],fe=E[ge*d+ne],ke.merge(fe),ke.merge(g(ne));return ke}};return L}},CE=dr({weight:function(e){return 1},directed:!1,root:null}),TE={bellmanFord:function(e){var t=this,n=CE(e),a=n.weight,i=n.directed,o=n.root,u=a,f=this,c=this.cy(),d=this.byGroup(),h=d.edges,p=d.nodes,g=p.length,m=new Fn,w=!1,x=[];o=c.collection(o)[0],h.unmergeBy(function(Y){return Y.isLoop()});for(var b=h.length,_=function(K){var ae=m.get(K.id());return ae||(ae={},m.set(K.id(),ae)),ae},E=function(K){return(Ye(K)?c.$(K):K)[0]},C=function(K){return _(E(K)).dist},B=function(K){for(var ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o,he=E(K),me=[],se=he;;){if(se==null)return t.spawn();var Re=_(se),De=Re.edge,Be=Re.pred;if(me.unshift(se[0]),se.same(ae)&&me.length>0)break;De!=null&&me.unshift(De),se=Be}return f.spawn(me)},N=0;N<g;N++){var A=p[N],z=_(A);A.same(o)?z.dist=0:z.dist=1/0,z.pred=null,z.edge=null}for(var M=!1,V=function(K,ae,he,me,se,Re){var De=me.dist+Re;De<se.dist&&!he.same(me.edge)&&(se.dist=De,se.pred=K,se.edge=he,M=!0)},q=1;q<g;q++){M=!1;for(var I=0;I<b;I++){var F=h[I],T=F.source(),H=F.target(),Q=u(F),W=_(T),Z=_(H);V(T,H,F,W,Z,Q),i||V(H,T,F,Z,W,Q)}if(!M)break}if(M)for(var X=[],te=0;te<b;te++){var L=h[te],U=L.source(),oe=L.target(),ie=u(L),ne=_(U).dist,we=_(oe).dist;if(ne+ie<we||!i&&we+ie<ne)if(w||(gt("Graph contains a negative weight cycle for Bellman-Ford"),w=!0),e.findNegativeWeightCycles!==!1){var Te=[];ne+ie<we&&Te.push(U),!i&&we+ie<ne&&Te.push(oe);for(var ke=Te.length,ge=0;ge<ke;ge++){var fe=Te[ge],de=[fe];de.push(_(fe).edge);for(var be=_(fe).pred;de.indexOf(be)===-1;)de.push(be),de.push(_(be).edge),be=_(be).pred;de=de.slice(de.indexOf(be));for(var Pe=de[0].id(),D=0,ve=2;ve<de.length;ve+=2)de[ve].id()<Pe&&(Pe=de[ve].id(),D=ve);de=de.slice(D).concat(de.slice(0,D)),de.push(de[0]);var pe=de.map(function(Y){return Y.id()}).join(",");X.indexOf(pe)===-1&&(x.push(f.spawn(de)),X.push(pe))}}else break}return{distanceTo:C,pathTo:B,hasNegativeWeightCycle:w,negativeWeightCycles:x}}},PE=Math.sqrt(2),RE=function(e,t,n){n.length===0&&At("Karger-Stein must be run on a connected (sub)graph");for(var a=n[e],i=a[1],o=a[2],u=t[i],f=t[o],c=n,d=c.length-1;d>=0;d--){var h=c[d],p=h[1],g=h[2];(t[p]===u&&t[g]===f||t[p]===f&&t[g]===u)&&c.splice(d,1)}for(var m=0;m<c.length;m++){var w=c[m];w[1]===f?(c[m]=w.slice(),c[m][1]=u):w[2]===f&&(c[m]=w.slice(),c[m][2]=u)}for(var x=0;x<t.length;x++)t[x]===f&&(t[x]=u);return c},od=function(e,t,n,a){for(;n>a;){var i=Math.floor(Math.random()*t.length);t=RE(i,e,t),n--}return t},BE={kargerStein:function(){var e=this,t=this.byGroup(),n=t.nodes,a=t.edges;a.unmergeBy(function(Z){return Z.isLoop()});var i=n.length,o=a.length,u=Math.ceil(Math.pow(Math.log(i)/Math.LN2,2)),f=Math.floor(i/PE);if(i<2){At("At least 2 nodes are required for Karger-Stein algorithm");return}for(var c=[],d=0;d<o;d++){var h=a[d];c.push([d,n.indexOf(h.source()),n.indexOf(h.target())])}for(var p=1/0,g=[],m=new Array(i),w=new Array(i),x=new Array(i),b=function(X,te){for(var L=0;L<i;L++)te[L]=X[L]},_=0;_<=u;_++){for(var E=0;E<i;E++)w[E]=E;var C=od(w,c.slice(),i,f),B=C.slice();b(w,x);var N=od(w,C,f,2),A=od(x,B,f,2);N.length<=A.length&&N.length<p?(p=N.length,g=N,b(w,m)):A.length<=N.length&&A.length<p&&(p=A.length,g=A,b(x,m))}for(var z=this.spawn(g.map(function(Z){return a[Z[0]]})),M=this.spawn(),V=this.spawn(),q=m[0],I=0;I<m.length;I++){var F=m[I],T=n[I];F===q?M.merge(T):V.merge(T)}var H=function(X){var te=e.spawn();return X.forEach(function(L){te.merge(L),L.connectedEdges().forEach(function(U){e.contains(U)&&!z.contains(U)&&te.merge(U)})}),te},Q=[H(M),H(V)],W={cut:z,components:Q,partition1:M,partition2:V};return W}},ud,AE=function(e){return{x:e.x,y:e.y}},Ll=function(e,t,n){return{x:e.x*t+n.x,y:e.y*t+n.y}},E1=function(e,t,n){return{x:(e.x-n.x)/t,y:(e.y-n.y)/t}},ji=function(e){return{x:e[0],y:e[1]}},DE=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=1/0,i=t;i<n;i++){var o=e[i];isFinite(o)&&(a=Math.min(o,a))}return a},IE=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=-1/0,i=t;i<n;i++){var o=e[i];isFinite(o)&&(a=Math.max(o,a))}return a},LE=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=0,i=0,o=t;o<n;o++){var u=e[o];isFinite(u)&&(a+=u,i++)}return a/i},NE=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;a?e=e.slice(t,n):(n<e.length&&e.splice(n,e.length-n),t>0&&e.splice(0,t));for(var u=0,f=e.length-1;f>=0;f--){var c=e[f];o?isFinite(c)||(e[f]=-1/0,u++):e.splice(f,1)}i&&e.sort(function(p,g){return p-g});var d=e.length,h=Math.floor(d/2);return d%2!==0?e[h+1+u]:(e[h-1+u]+e[h+u])/2},OE=function(e){return Math.PI*e/180},Gu=function(e,t){return Math.atan2(t,e)-Math.PI/2},Yh=Math.log2||function(r){return Math.log(r)/Math.log(2)},Qh=function(e){return e>0?1:e<0?-1:0},Ja=function(e,t){return Math.sqrt(Ga(e,t))},Ga=function(e,t){var n=t.x-e.x,a=t.y-e.y;return n*n+a*a},ME=function(e){for(var t=e.length,n=0,a=0;a<t;a++)n+=e[a];for(var i=0;i<t;i++)e[i]=e[i]/n;return e},nr=function(e,t,n,a){return(1-a)*(1-a)*e+2*(1-a)*a*t+a*a*n},Hi=function(e,t,n,a){return{x:nr(e.x,t.x,n.x,a),y:nr(e.y,t.y,n.y,a)}},zE=function(e,t,n,a){var i={x:t.x-e.x,y:t.y-e.y},o=Ja(e,t),u={x:i.x/o,y:i.y/o};return n=n??0,a=a??n*o,{x:e.x+u.x*a,y:e.y+u.y*a}},vo=function(e,t,n){return Math.max(e,Math.min(n,t))},Rr=function(e){if(e==null)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(e.x1!=null&&e.y1!=null){if(e.x2!=null&&e.y2!=null&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(e.w!=null&&e.h!=null&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},FE=function(e){return{x1:e.x1,x2:e.x2,w:e.w,y1:e.y1,y2:e.y2,h:e.h}},UE=function(e){e.x1=1/0,e.y1=1/0,e.x2=-1/0,e.y2=-1/0,e.w=0,e.h=0},$E=function(e,t){e.x1=Math.min(e.x1,t.x1),e.x2=Math.max(e.x2,t.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,t.y1),e.y2=Math.max(e.y2,t.y2),e.h=e.y2-e.y1},S1=function(e,t,n){e.x1=Math.min(e.x1,t),e.x2=Math.max(e.x2,t),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,n),e.y2=Math.max(e.y2,n),e.h=e.y2-e.y1},sl=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.x1-=t,e.x2+=t,e.y1-=t,e.y2+=t,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},ol=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0],n,a,i,o;if(t.length===1)n=a=i=o=t[0];else if(t.length===2)n=i=t[0],o=a=t[1];else if(t.length===4){var u=Ht(t,4);n=u[0],a=u[1],i=u[2],o=u[3]}return e.x1-=o,e.x2+=a,e.y1-=n,e.y2+=i,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},Nm=function(e,t){e.x1=t.x1,e.y1=t.y1,e.x2=t.x2,e.y2=t.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},Jh=function(e,t){return!(e.x1>t.x2||t.x1>e.x2||e.x2<t.x1||t.x2<e.x1||e.y2<t.y1||t.y2<e.y1||e.y1>t.y2||t.y1>e.y2)},pa=function(e,t,n){return e.x1<=t&&t<=e.x2&&e.y1<=n&&n<=e.y2},Om=function(e,t){return pa(e,t.x,t.y)},k1=function(e,t){return pa(e,t.x1,t.y1)&&pa(e,t.x2,t.y2)},VE=(ud=Math.hypot)!==null&&ud!==void 0?ud:function(r,e){return Math.sqrt(r*r+e*e)};function jE(r,e){if(r.length<3)throw new Error("Need at least 3 vertices");var t=function(z,M){return{x:z.x+M.x,y:z.y+M.y}},n=function(z,M){return{x:z.x-M.x,y:z.y-M.y}},a=function(z,M){return{x:z.x*M,y:z.y*M}},i=function(z,M){return z.x*M.y-z.y*M.x},o=function(z){var M=VE(z.x,z.y);return M===0?{x:0,y:0}:{x:z.x/M,y:z.y/M}},u=function(z){for(var M=0,V=0;V<z.length;V++){var q=z[V],I=z[(V+1)%z.length];M+=q.x*I.y-I.x*q.y}return M/2},f=function(z,M,V,q){var I=n(M,z),F=n(q,V),T=i(I,F);if(Math.abs(T)<1e-9)return t(z,a(I,.5));var H=i(n(V,z),F)/T;return t(z,a(I,H))},c=r.map(function(A){return{x:A.x,y:A.y}});u(c)<0&&c.reverse();for(var d=c.length,h=[],p=0;p<d;p++){var g=c[p],m=c[(p+1)%d],w=n(m,g),x=o({x:w.y,y:-w.x});h.push(x)}for(var b=h.map(function(A,z){var M=t(c[z],a(A,e)),V=t(c[(z+1)%d],a(A,e));return{p1:M,p2:V}}),_=[],E=0;E<d;E++){var C=b[(E-1+d)%d],B=b[E],N=f(C.p1,C.p2,B.p1,B.p2);_.push(N)}return _}function qE(r,e,t,n,a,i){var o=JE(r,e,t,n,a),u=jE(o,i),f=Rr();return u.forEach(function(c){return S1(f,c.x,c.y)}),f}var C1=function(e,t,n,a,i,o,u){var f=arguments.length>7&&arguments[7]!==void 0?arguments[7]:"auto",c=f==="auto"?ba(i,o):f,d=i/2,h=o/2;c=Math.min(c,d,h);var p=c!==d,g=c!==h,m;if(p){var w=n-d+c-u,x=a-h-u,b=n+d-c+u,_=x;if(m=ga(e,t,n,a,w,x,b,_,!1),m.length>0)return m}if(g){var E=n+d+u,C=a-h+c-u,B=E,N=a+h-c+u;if(m=ga(e,t,n,a,E,C,B,N,!1),m.length>0)return m}if(p){var A=n-d+c-u,z=a+h+u,M=n+d-c+u,V=z;if(m=ga(e,t,n,a,A,z,M,V,!1),m.length>0)return m}if(g){var q=n-d-u,I=a-h+c-u,F=q,T=a+h-c+u;if(m=ga(e,t,n,a,q,I,F,T,!1),m.length>0)return m}var H;{var Q=n-d+c,W=a-h+c;if(H=no(e,t,n,a,Q,W,c+u),H.length>0&&H[0]<=Q&&H[1]<=W)return[H[0],H[1]]}{var Z=n+d-c,X=a-h+c;if(H=no(e,t,n,a,Z,X,c+u),H.length>0&&H[0]>=Z&&H[1]<=X)return[H[0],H[1]]}{var te=n+d-c,L=a+h-c;if(H=no(e,t,n,a,te,L,c+u),H.length>0&&H[0]>=te&&H[1]>=L)return[H[0],H[1]]}{var U=n-d+c,oe=a+h-c;if(H=no(e,t,n,a,U,oe,c+u),H.length>0&&H[0]<=U&&H[1]>=oe)return[H[0],H[1]]}return[]},WE=function(e,t,n,a,i,o,u){var f=u,c=Math.min(n,i),d=Math.max(n,i),h=Math.min(a,o),p=Math.max(a,o);return c-f<=e&&e<=d+f&&h-f<=t&&t<=p+f},HE=function(e,t,n,a,i,o,u,f,c){var d={x1:Math.min(n,u,i)-c,x2:Math.max(n,u,i)+c,y1:Math.min(a,f,o)-c,y2:Math.max(a,f,o)+c};return!(e<d.x1||e>d.x2||t<d.y1||t>d.y2)},GE=function(e,t,n,a){n-=a;var i=t*t-4*e*n;if(i<0)return[];var o=Math.sqrt(i),u=2*e,f=(-t+o)/u,c=(-t-o)/u;return[f,c]},KE=function(e,t,n,a,i){var o=1e-5;e===0&&(e=o),t/=e,n/=e,a/=e;var u,f,c,d,h,p,g,m;if(f=(3*n-t*t)/9,c=-(27*a)+t*(9*n-2*(t*t)),c/=54,u=f*f*f+c*c,i[1]=0,g=t/3,u>0){h=c+Math.sqrt(u),h=h<0?-Math.pow(-h,1/3):Math.pow(h,1/3),p=c-Math.sqrt(u),p=p<0?-Math.pow(-p,1/3):Math.pow(p,1/3),i[0]=-g+h+p,g+=(h+p)/2,i[4]=i[2]=-g,g=Math.sqrt(3)*(-p+h)/2,i[3]=g,i[5]=-g;return}if(i[5]=i[3]=0,u===0){m=c<0?-Math.pow(-c,1/3):Math.pow(c,1/3),i[0]=-g+2*m,i[4]=i[2]=-(m+g);return}f=-f,d=f*f*f,d=Math.acos(c/Math.sqrt(d)),m=2*Math.sqrt(f),i[0]=-g+m*Math.cos(d/3),i[2]=-g+m*Math.cos((d+2*Math.PI)/3),i[4]=-g+m*Math.cos((d+4*Math.PI)/3)},ZE=function(e,t,n,a,i,o,u,f){var c=1*n*n-4*n*i+2*n*u+4*i*i-4*i*u+u*u+a*a-4*a*o+2*a*f+4*o*o-4*o*f+f*f,d=9*n*i-3*n*n-3*n*u-6*i*i+3*i*u+9*a*o-3*a*a-3*a*f-6*o*o+3*o*f,h=3*n*n-6*n*i+n*u-n*e+2*i*i+2*i*e-u*e+3*a*a-6*a*o+a*f-a*t+2*o*o+2*o*t-f*t,p=1*n*i-n*n+n*e-i*e+a*o-a*a+a*t-o*t,g=[];KE(c,d,h,p,g);for(var m=1e-7,w=[],x=0;x<6;x+=2)Math.abs(g[x+1])<m&&g[x]>=0&&g[x]<=1&&w.push(g[x]);w.push(1),w.push(0);for(var b=-1,_,E,C,B=0;B<w.length;B++)_=Math.pow(1-w[B],2)*n+2*(1-w[B])*w[B]*i+w[B]*w[B]*u,E=Math.pow(1-w[B],2)*a+2*(1-w[B])*w[B]*o+w[B]*w[B]*f,C=Math.pow(_-e,2)+Math.pow(E-t,2),b>=0?C<b&&(b=C):b=C;return b},XE=function(e,t,n,a,i,o){var u=[e-n,t-a],f=[i-n,o-a],c=f[0]*f[0]+f[1]*f[1],d=u[0]*u[0]+u[1]*u[1],h=u[0]*f[0]+u[1]*f[1],p=h*h/c;return h<0?d:p>c?(e-i)*(e-i)+(t-o)*(t-o):d-p},zr=function(e,t,n){for(var a,i,o,u,f,c=0,d=0;d<n.length/2;d++)if(a=n[d*2],i=n[d*2+1],d+1<n.length/2?(o=n[(d+1)*2],u=n[(d+1)*2+1]):(o=n[(d+1-n.length/2)*2],u=n[(d+1-n.length/2)*2+1]),!(a==e&&o==e))if(a>=e&&e>=o||a<=e&&e<=o)f=(e-a)/(o-a)*(u-i)+i,f>t&&c++;else continue;return c%2!==0},$n=function(e,t,n,a,i,o,u,f,c){var d=new Array(n.length),h;f[0]!=null?(h=Math.atan(f[1]/f[0]),f[0]<0?h=h+Math.PI/2:h=-h-Math.PI/2):h=f;for(var p=Math.cos(-h),g=Math.sin(-h),m=0;m<d.length/2;m++)d[m*2]=o/2*(n[m*2]*p-n[m*2+1]*g),d[m*2+1]=u/2*(n[m*2+1]*p+n[m*2]*g),d[m*2]+=a,d[m*2+1]+=i;var w;if(c>0){var x=bl(d,-c);w=xl(x)}else w=d;return zr(e,t,w)},YE=function(e,t,n,a,i,o,u,f){for(var c=new Array(n.length*2),d=0;d<f.length;d++){var h=f[d];c[d*4+0]=h.startX,c[d*4+1]=h.startY,c[d*4+2]=h.stopX,c[d*4+3]=h.stopY;var p=Math.pow(h.cx-e,2)+Math.pow(h.cy-t,2);if(p<=Math.pow(h.radius,2))return!0}return zr(e,t,c)},xl=function(e){for(var t=new Array(e.length/2),n,a,i,o,u,f,c,d,h=0;h<e.length/4;h++){n=e[h*4],a=e[h*4+1],i=e[h*4+2],o=e[h*4+3],h<e.length/4-1?(u=e[(h+1)*4],f=e[(h+1)*4+1],c=e[(h+1)*4+2],d=e[(h+1)*4+3]):(u=e[0],f=e[1],c=e[2],d=e[3]);var p=ga(n,a,i,o,u,f,c,d,!0);t[h*2]=p[0],t[h*2+1]=p[1]}return t},bl=function(e,t){for(var n=new Array(e.length*2),a,i,o,u,f=0;f<e.length/2;f++){a=e[f*2],i=e[f*2+1],f<e.length/2-1?(o=e[(f+1)*2],u=e[(f+1)*2+1]):(o=e[0],u=e[1]);var c=u-i,d=-(o-a),h=Math.sqrt(c*c+d*d),p=c/h,g=d/h;n[f*4]=a+p*t,n[f*4+1]=i+g*t,n[f*4+2]=o+p*t,n[f*4+3]=u+g*t}return n},QE=function(e,t,n,a,i,o){var u=n-e,f=a-t;u/=i,f/=o;var c=Math.sqrt(u*u+f*f),d=c-1;if(d<0)return[];var h=d/c;return[(n-e)*h+e,(a-t)*h+t]},Ya=function(e,t,n,a,i,o,u){return e-=i,t-=o,e/=n/2+u,t/=a/2+u,e*e+t*t<=1},no=function(e,t,n,a,i,o,u){var f=[n-e,a-t],c=[e-i,t-o],d=f[0]*f[0]+f[1]*f[1],h=2*(c[0]*f[0]+c[1]*f[1]),p=c[0]*c[0]+c[1]*c[1]-u*u,g=h*h-4*d*p;if(g<0)return[];var m=(-h+Math.sqrt(g))/(2*d),w=(-h-Math.sqrt(g))/(2*d),x=Math.min(m,w),b=Math.max(m,w),_=[];if(x>=0&&x<=1&&_.push(x),b>=0&&b<=1&&_.push(b),_.length===0)return[];var E=_[0]*f[0]+e,C=_[0]*f[1]+t;if(_.length>1){if(_[0]==_[1])return[E,C];var B=_[1]*f[0]+e,N=_[1]*f[1]+t;return[E,C,B,N]}else return[E,C]},ld=function(e,t,n){return t<=e&&e<=n||n<=e&&e<=t?e:e<=t&&t<=n||n<=t&&t<=e?t:n},ga=function(e,t,n,a,i,o,u,f,c){var d=e-i,h=n-e,p=u-i,g=t-o,m=a-t,w=f-o,x=p*g-w*d,b=h*g-m*d,_=w*h-p*m;if(_!==0){var E=x/_,C=b/_,B=.001,N=0-B,A=1+B;return N<=E&&E<=A&&N<=C&&C<=A?[e+E*h,t+E*m]:c?[e+E*h,t+E*m]:[]}else return x===0||b===0?ld(e,n,u)===u?[u,f]:ld(e,n,i)===i?[i,o]:ld(i,u,n)===n?[n,a]:[]:[]},JE=function(e,t,n,a,i){var o=[],u=a/2,f=i/2,c=t,d=n;o.push({x:c+u*e[0],y:d+f*e[1]});for(var h=1;h<e.length/2;h++)o.push({x:c+u*e[h*2],y:d+f*e[h*2+1]});return o},po=function(e,t,n,a,i,o,u,f){var c=[],d,h=new Array(n.length),p=!0;o==null&&(p=!1);var g;if(p){for(var m=0;m<h.length/2;m++)h[m*2]=n[m*2]*o+a,h[m*2+1]=n[m*2+1]*u+i;if(f>0){var w=bl(h,-f);g=xl(w)}else g=h}else g=n;for(var x,b,_,E,C=0;C<g.length/2;C++)x=g[C*2],b=g[C*2+1],C<g.length/2-1?(_=g[(C+1)*2],E=g[(C+1)*2+1]):(_=g[0],E=g[1]),d=ga(e,t,a,i,x,b,_,E),d.length!==0&&c.push(d[0],d[1]);return c},eS=function(e,t,n,a,i,o,u,f,c){var d=[],h,p=new Array(n.length*2);c.forEach(function(_,E){E===0?(p[p.length-2]=_.startX,p[p.length-1]=_.startY):(p[E*4-2]=_.startX,p[E*4-1]=_.startY),p[E*4]=_.stopX,p[E*4+1]=_.stopY,h=no(e,t,a,i,_.cx,_.cy,_.radius),h.length!==0&&d.push(h[0],h[1])});for(var g=0;g<p.length/4;g++)h=ga(e,t,a,i,p[g*4],p[g*4+1],p[g*4+2],p[g*4+3],!1),h.length!==0&&d.push(h[0],h[1]);if(d.length>2){for(var m=[d[0],d[1]],w=Math.pow(m[0]-e,2)+Math.pow(m[1]-t,2),x=1;x<d.length/2;x++){var b=Math.pow(d[x*2]-e,2)+Math.pow(d[x*2+1]-t,2);b<=w&&(m[0]=d[x*2],m[1]=d[x*2+1],w=b)}return m}return d},Ku=function(e,t,n){var a=[e[0]-t[0],e[1]-t[1]],i=Math.sqrt(a[0]*a[0]+a[1]*a[1]),o=(i-n)/i;return o<0&&(o=1e-5),[t[0]+o*a[0],t[1]+o*a[1]]},Pr=function(e,t){var n=Eh(e,t);return n=T1(n),n},T1=function(e){for(var t,n,a=e.length/2,i=1/0,o=1/0,u=-1/0,f=-1/0,c=0;c<a;c++)t=e[2*c],n=e[2*c+1],i=Math.min(i,t),u=Math.max(u,t),o=Math.min(o,n),f=Math.max(f,n);for(var d=2/(u-i),h=2/(f-o),p=0;p<a;p++)t=e[2*p]=e[2*p]*d,n=e[2*p+1]=e[2*p+1]*h,i=Math.min(i,t),u=Math.max(u,t),o=Math.min(o,n),f=Math.max(f,n);if(o<-1)for(var g=0;g<a;g++)n=e[2*g+1]=e[2*g+1]+(-1-o);return e},Eh=function(e,t){var n=1/e*2*Math.PI,a=e%2===0?Math.PI/2+n/2:Math.PI/2;a+=t;for(var i=new Array(e*2),o,u=0;u<e;u++)o=u*n+a,i[2*u]=Math.cos(o),i[2*u+1]=Math.sin(-o);return i},ba=function(e,t){return Math.min(e/4,t/4,8)},P1=function(e,t){return Math.min(e/10,t/10,8)},ev=function(){return 8},tS=function(e,t,n){return[e-2*t+n,2*(t-e),e]},Sh=function(e,t){return{heightOffset:Math.min(15,.05*t),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}};function fd(r,e){function t(h){for(var p=[],g=0;g<h.length;g++){var m=h[g],w=h[(g+1)%h.length],x={x:w.x-m.x,y:w.y-m.y},b={x:-x.y,y:x.x},_=Math.sqrt(b.x*b.x+b.y*b.y);p.push({x:b.x/_,y:b.y/_})}return p}function n(h,p){var g=1/0,m=-1/0,w=Fr(h),x;try{for(w.s();!(x=w.n()).done;){var b=x.value,_=b.x*p.x+b.y*p.y;g=Math.min(g,_),m=Math.max(m,_)}}catch(E){w.e(E)}finally{w.f()}return{min:g,max:m}}function a(h,p){return!(h.max<p.min||p.max<h.min)}var i=[].concat(gl(t(r)),gl(t(e))),o=Fr(i),u;try{for(o.s();!(u=o.n()).done;){var f=u.value,c=n(r,f),d=n(e,f);if(!a(c,d))return!1}}catch(h){o.e(h)}finally{o.f()}return!0}var rS=dr({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),nS={pageRank:function(e){for(var t=rS(e),n=t.dampingFactor,a=t.precision,i=t.iterations,o=t.weight,u=this._private.cy,f=this.byGroup(),c=f.nodes,d=f.edges,h=c.length,p=h*h,g=d.length,m=new Array(p),w=new Array(h),x=(1-n)/h,b=0;b<h;b++){for(var _=0;_<h;_++){var E=b*h+_;m[E]=0}w[b]=0}for(var C=0;C<g;C++){var B=d[C],N=B.data("source"),A=B.data("target");if(N!==A){var z=c.indexOfId(N),M=c.indexOfId(A),V=o(B),q=M*h+z;m[q]+=V,w[z]+=V}}for(var I=1/h+x,F=0;F<h;F++)if(w[F]===0)for(var T=0;T<h;T++){var H=T*h+F;m[H]=I}else for(var Q=0;Q<h;Q++){var W=Q*h+F;m[W]=m[W]/w[F]+x}for(var Z=new Array(h),X=new Array(h),te,L=0;L<h;L++)Z[L]=1;for(var U=0;U<i;U++){for(var oe=0;oe<h;oe++)X[oe]=0;for(var ie=0;ie<h;ie++)for(var ne=0;ne<h;ne++){var we=ie*h+ne;X[ie]+=m[we]*Z[ne]}ME(X),te=Z,Z=X,X=te;for(var Te=0,ke=0;ke<h;ke++){var ge=te[ke]-Z[ke];Te+=ge*ge}if(Te<a)break}var fe={rank:function(be){return be=u.collection(be)[0],Z[c.indexOf(be)]}};return fe}},Mm=dr({root:null,weight:function(e){return 1},directed:!1,alpha:0}),Gi={degreeCentralityNormalized:function(e){e=Mm(e);var t=this.cy(),n=this.nodes(),a=n.length;if(e.directed){for(var d={},h={},p=0,g=0,m=0;m<a;m++){var w=n[m],x=w.id();e.root=w;var b=this.degreeCentrality(e);p<b.indegree&&(p=b.indegree),g<b.outdegree&&(g=b.outdegree),d[x]=b.indegree,h[x]=b.outdegree}return{indegree:function(E){return p==0?0:(Ye(E)&&(E=t.filter(E)),d[E.id()]/p)},outdegree:function(E){return g===0?0:(Ye(E)&&(E=t.filter(E)),h[E.id()]/g)}}}else{for(var i={},o=0,u=0;u<a;u++){var f=n[u];e.root=f;var c=this.degreeCentrality(e);o<c.degree&&(o=c.degree),i[f.id()]=c.degree}return{degree:function(E){return o===0?0:(Ye(E)&&(E=t.filter(E)),i[E.id()]/o)}}}},degreeCentrality:function(e){e=Mm(e);var t=this.cy(),n=this,a=e,i=a.root,o=a.weight,u=a.directed,f=a.alpha;if(i=t.collection(i)[0],u){for(var g=i.connectedEdges(),m=g.filter(function(N){return N.target().same(i)&&n.has(N)}),w=g.filter(function(N){return N.source().same(i)&&n.has(N)}),x=m.length,b=w.length,_=0,E=0,C=0;C<m.length;C++)_+=o(m[C]);for(var B=0;B<w.length;B++)E+=o(w[B]);return{indegree:Math.pow(x,1-f)*Math.pow(_,f),outdegree:Math.pow(b,1-f)*Math.pow(E,f)}}else{for(var c=i.connectedEdges().intersection(n),d=c.length,h=0,p=0;p<c.length;p++)h+=o(c[p]);return{degree:Math.pow(d,1-f)*Math.pow(h,f)}}}};Gi.dc=Gi.degreeCentrality;Gi.dcn=Gi.degreeCentralityNormalised=Gi.degreeCentralityNormalized;var zm=dr({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),Ki={closenessCentralityNormalized:function(e){for(var t=zm(e),n=t.harmonic,a=t.weight,i=t.directed,o=this.cy(),u={},f=0,c=this.nodes(),d=this.floydWarshall({weight:a,directed:i}),h=0;h<c.length;h++){for(var p=0,g=c[h],m=0;m<c.length;m++)if(h!==m){var w=d.distance(g,c[m]);n?p+=1/w:p+=w}n||(p=1/p),f<p&&(f=p),u[g.id()]=p}return{closeness:function(b){return f==0?0:(Ye(b)?b=o.filter(b)[0].id():b=b.id(),u[b]/f)}}},closenessCentrality:function(e){var t=zm(e),n=t.root,a=t.weight,i=t.directed,o=t.harmonic;n=this.filter(n)[0];for(var u=this.dijkstra({root:n,weight:a,directed:i}),f=0,c=this.nodes(),d=0;d<c.length;d++){var h=c[d];if(!h.same(n)){var p=u.distanceTo(h);o?f+=1/p:f+=p}}return o?f:1/f}};Ki.cc=Ki.closenessCentrality;Ki.ccn=Ki.closenessCentralityNormalised=Ki.closenessCentralityNormalized;var aS=dr({weight:null,directed:!1}),kh={betweennessCentrality:function(e){for(var t=aS(e),n=t.directed,a=t.weight,i=a!=null,o=this.cy(),u=this.nodes(),f={},c={},d=0,h={set:function(E,C){c[E]=C,C>d&&(d=C)},get:function(E){return c[E]}},p=0;p<u.length;p++){var g=u[p],m=g.id();n?f[m]=g.outgoers().nodes():f[m]=g.openNeighborhood().nodes(),h.set(m,0)}for(var w=function(){for(var E=u[x].id(),C=[],B={},N={},A={},z=new Ro(function(ie,ne){return A[ie]-A[ne]}),M=0;M<u.length;M++){var V=u[M].id();B[V]=[],N[V]=0,A[V]=1/0}for(N[E]=1,A[E]=0,z.push(E);!z.empty();){var q=z.pop();if(C.push(q),i)for(var I=0;I<f[q].length;I++){var F=f[q][I],T=o.getElementById(q),H=void 0;T.edgesTo(F).length>0?H=T.edgesTo(F)[0]:H=F.edgesTo(T)[0];var Q=a(H);F=F.id(),A[F]>A[q]+Q&&(A[F]=A[q]+Q,z.nodes.indexOf(F)<0?z.push(F):z.updateItem(F),N[F]=0,B[F]=[]),A[F]==A[q]+Q&&(N[F]=N[F]+N[q],B[F].push(q))}else for(var W=0;W<f[q].length;W++){var Z=f[q][W].id();A[Z]==1/0&&(z.push(Z),A[Z]=A[q]+1),A[Z]==A[q]+1&&(N[Z]=N[Z]+N[q],B[Z].push(q))}}for(var X={},te=0;te<u.length;te++)X[u[te].id()]=0;for(;C.length>0;){for(var L=C.pop(),U=0;U<B[L].length;U++){var oe=B[L][U];X[oe]=X[oe]+N[oe]/N[L]*(1+X[L])}L!=u[x].id()&&h.set(L,h.get(L)+X[L])}},x=0;x<u.length;x++)w();var b={betweenness:function(E){var C=o.collection(E).id();return h.get(C)},betweennessNormalized:function(E){if(d==0)return 0;var C=o.collection(E).id();return h.get(C)/d}};return b.betweennessNormalised=b.betweennessNormalized,b}};kh.bc=kh.betweennessCentrality;var iS=dr({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(r){return 1}]}),sS=function(e){return iS(e)},oS=function(e,t){for(var n=0,a=0;a<t.length;a++)n+=t[a](e);return n},uS=function(e,t,n){for(var a=0;a<t;a++)e[a*t+a]=n},R1=function(e,t){for(var n,a=0;a<t;a++){n=0;for(var i=0;i<t;i++)n+=e[i*t+a];for(var o=0;o<t;o++)e[o*t+a]=e[o*t+a]/n}},lS=function(e,t,n){for(var a=new Array(n*n),i=0;i<n;i++){for(var o=0;o<n;o++)a[i*n+o]=0;for(var u=0;u<n;u++)for(var f=0;f<n;f++)a[i*n+f]+=e[i*n+u]*t[u*n+f]}return a},fS=function(e,t,n){for(var a=e.slice(0),i=1;i<n;i++)e=lS(e,a,t);return e},cS=function(e,t,n){for(var a=new Array(t*t),i=0;i<t*t;i++)a[i]=Math.pow(e[i],n);return R1(a,t),a},dS=function(e,t,n,a){for(var i=0;i<n;i++){var o=Math.round(e[i]*Math.pow(10,a))/Math.pow(10,a),u=Math.round(t[i]*Math.pow(10,a))/Math.pow(10,a);if(o!==u)return!1}return!0},hS=function(e,t,n,a){for(var i=[],o=0;o<t;o++){for(var u=[],f=0;f<t;f++)Math.round(e[o*t+f]*1e3)/1e3>0&&u.push(n[f]);u.length!==0&&i.push(a.collection(u))}return i},vS=function(e,t){for(var n=0;n<e.length;n++)if(!t[n]||e[n].id()!==t[n].id())return!1;return!0},pS=function(e){for(var t=0;t<e.length;t++)for(var n=0;n<e.length;n++)t!=n&&vS(e[t],e[n])&&e.splice(n,1);return e},Fm=function(e){for(var t=this.nodes(),n=this.edges(),a=this.cy(),i=sS(e),o={},u=0;u<t.length;u++)o[t[u].id()]=u;for(var f=t.length,c=f*f,d=new Array(c),h,p=0;p<c;p++)d[p]=0;for(var g=0;g<n.length;g++){var m=n[g],w=o[m.source().id()],x=o[m.target().id()],b=oS(m,i.attributes);d[w*f+x]+=b,d[x*f+w]+=b}uS(d,f,i.multFactor),R1(d,f);for(var _=!0,E=0;_&&E<i.maxIterations;)_=!1,h=fS(d,f,i.expandFactor),d=cS(h,f,i.inflateFactor),dS(d,h,c,4)||(_=!0),E++;var C=hS(d,f,t,a);return C=pS(C),C},gS={markovClustering:Fm,mcl:Fm},mS=function(e){return e},B1=function(e,t){return Math.abs(t-e)},Um=function(e,t,n){return e+B1(t,n)},$m=function(e,t,n){return e+Math.pow(n-t,2)},yS=function(e){return Math.sqrt(e)},wS=function(e,t,n){return Math.max(e,B1(t,n))},Zs=function(e,t,n,a,i){for(var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:mS,u=a,f,c,d=0;d<e;d++)f=t(d),c=n(d),u=i(u,f,c);return o(u)},Yi={euclidean:function(e,t,n){return e>=2?Zs(e,t,n,0,$m,yS):Zs(e,t,n,0,Um)},squaredEuclidean:function(e,t,n){return Zs(e,t,n,0,$m)},manhattan:function(e,t,n){return Zs(e,t,n,0,Um)},max:function(e,t,n){return Zs(e,t,n,-1/0,wS)}};Yi["squared-euclidean"]=Yi.squaredEuclidean;Yi.squaredeuclidean=Yi.squaredEuclidean;function Nl(r,e,t,n,a,i){var o;return zt(r)?o=r:o=Yi[r]||Yi.euclidean,e===0&&zt(r)?o(a,i):o(e,t,n,a,i)}var xS=dr({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),tv=function(e){return xS(e)},_l=function(e,t,n,a,i){var o=i!=="kMedoids",u=o?function(h){return n[h]}:function(h){return a[h](n)},f=function(p){return a[p](t)},c=n,d=t;return Nl(e,a.length,u,f,c,d)},cd=function(e,t,n){for(var a=n.length,i=new Array(a),o=new Array(a),u=new Array(t),f=null,c=0;c<a;c++)i[c]=e.min(n[c]).value,o[c]=e.max(n[c]).value;for(var d=0;d<t;d++){f=[];for(var h=0;h<a;h++)f[h]=Math.random()*(o[h]-i[h])+i[h];u[d]=f}return u},A1=function(e,t,n,a,i){for(var o=1/0,u=0,f=0;f<t.length;f++){var c=_l(n,e,t[f],a,i);c<o&&(o=c,u=f)}return u},D1=function(e,t,n){for(var a=[],i=null,o=0;o<t.length;o++)i=t[o],n[i.id()]===e&&a.push(i);return a},bS=function(e,t,n){return Math.abs(t-e)<=n},_S=function(e,t,n){for(var a=0;a<e.length;a++)for(var i=0;i<e[a].length;i++){var o=Math.abs(e[a][i]-t[a][i]);if(o>n)return!1}return!0},ES=function(e,t,n){for(var a=0;a<n;a++)if(e===t[a])return!0;return!1},Vm=function(e,t){var n=new Array(t);if(e.length<50)for(var a=0;a<t;a++){for(var i=e[Math.floor(Math.random()*e.length)];ES(i,n,a);)i=e[Math.floor(Math.random()*e.length)];n[a]=i}else for(var o=0;o<t;o++)n[o]=e[Math.floor(Math.random()*e.length)];return n},jm=function(e,t,n){for(var a=0,i=0;i<t.length;i++)a+=_l("manhattan",t[i],e,n,"kMedoids");return a},SS=function(e){var t=this.cy(),n=this.nodes(),a=null,i=tv(e),o=new Array(i.k),u={},f;i.testMode?typeof i.testCentroids=="number"?(i.testCentroids,f=cd(n,i.k,i.attributes)):Qt(i.testCentroids)==="object"?f=i.testCentroids:f=cd(n,i.k,i.attributes):f=cd(n,i.k,i.attributes);for(var c=!0,d=0;c&&d<i.maxIterations;){for(var h=0;h<n.length;h++)a=n[h],u[a.id()]=A1(a,f,i.distance,i.attributes,"kMeans");c=!1;for(var p=0;p<i.k;p++){var g=D1(p,n,u);if(g.length!==0){for(var m=i.attributes.length,w=f[p],x=new Array(m),b=new Array(m),_=0;_<m;_++){b[_]=0;for(var E=0;E<g.length;E++)a=g[E],b[_]+=i.attributes[_](a);x[_]=b[_]/g.length,bS(x[_],w[_],i.sensitivityThreshold)||(c=!0)}f[p]=x,o[p]=t.collection(g)}}d++}return o},kS=function(e){var t=this.cy(),n=this.nodes(),a=null,i=tv(e),o=new Array(i.k),u,f={},c,d=new Array(i.k);i.testMode?typeof i.testCentroids=="number"||(Qt(i.testCentroids)==="object"?u=i.testCentroids:u=Vm(n,i.k)):u=Vm(n,i.k);for(var h=!0,p=0;h&&p<i.maxIterations;){for(var g=0;g<n.length;g++)a=n[g],f[a.id()]=A1(a,u,i.distance,i.attributes,"kMedoids");h=!1;for(var m=0;m<u.length;m++){var w=D1(m,n,f);if(w.length!==0){d[m]=jm(u[m],w,i.attributes);for(var x=0;x<w.length;x++)c=jm(w[x],w,i.attributes),c<d[m]&&(d[m]=c,u[m]=w[x],h=!0);o[m]=t.collection(w)}}p++}return o},CS=function(e,t,n,a,i){for(var o,u,f=0;f<t.length;f++)for(var c=0;c<e.length;c++)a[f][c]=Math.pow(n[f][c],i.m);for(var d=0;d<e.length;d++)for(var h=0;h<i.attributes.length;h++){o=0,u=0;for(var p=0;p<t.length;p++)o+=a[p][d]*i.attributes[h](t[p]),u+=a[p][d];e[d][h]=o/u}},TS=function(e,t,n,a,i){for(var o=0;o<e.length;o++)t[o]=e[o].slice();for(var u,f,c,d=2/(i.m-1),h=0;h<n.length;h++)for(var p=0;p<a.length;p++){u=0;for(var g=0;g<n.length;g++)f=_l(i.distance,a[p],n[h],i.attributes,"cmeans"),c=_l(i.distance,a[p],n[g],i.attributes,"cmeans"),u+=Math.pow(f/c,d);e[p][h]=1/u}},PS=function(e,t,n,a){for(var i=new Array(n.k),o=0;o<i.length;o++)i[o]=[];for(var u,f,c=0;c<t.length;c++){u=-1/0,f=-1;for(var d=0;d<t[0].length;d++)t[c][d]>u&&(u=t[c][d],f=d);i[f].push(e[c])}for(var h=0;h<i.length;h++)i[h]=a.collection(i[h]);return i},qm=function(e){var t=this.cy(),n=this.nodes(),a=tv(e),i,o,u,f,c;f=new Array(n.length);for(var d=0;d<n.length;d++)f[d]=new Array(a.k);u=new Array(n.length);for(var h=0;h<n.length;h++)u[h]=new Array(a.k);for(var p=0;p<n.length;p++){for(var g=0,m=0;m<a.k;m++)u[p][m]=Math.random(),g+=u[p][m];for(var w=0;w<a.k;w++)u[p][w]=u[p][w]/g}o=new Array(a.k);for(var x=0;x<a.k;x++)o[x]=new Array(a.attributes.length);c=new Array(n.length);for(var b=0;b<n.length;b++)c[b]=new Array(a.k);for(var _=!0,E=0;_&&E<a.maxIterations;)_=!1,CS(o,n,u,c,a),TS(u,f,o,n,a),_S(u,f,a.sensitivityThreshold)||(_=!0),E++;return i=PS(n,u,a,t),{clusters:i,degreeOfMembership:u}},RS={kMeans:SS,kMedoids:kS,fuzzyCMeans:qm,fcm:qm},BS=dr({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),AS={single:"min",complete:"max"},DS=function(e){var t=BS(e),n=AS[t.linkage];return n!=null&&(t.linkage=n),t},Wm=function(e,t,n,a,i){for(var o=0,u=1/0,f,c=i.attributes,d=function(M,V){return Nl(i.distance,c.length,function(q){return c[q](M)},function(q){return c[q](V)},M,V)},h=0;h<e.length;h++){var p=e[h].key,g=n[p][a[p]];g<u&&(o=p,u=g)}if(i.mode==="threshold"&&u>=i.threshold||i.mode==="dendrogram"&&e.length===1)return!1;var m=t[o],w=t[a[o]],x;i.mode==="dendrogram"?x={left:m,right:w,key:m.key}:x={value:m.value.concat(w.value),key:m.key},e[m.index]=x,e.splice(w.index,1),t[m.key]=x;for(var b=0;b<e.length;b++){var _=e[b];m.key===_.key?f=1/0:i.linkage==="min"?(f=n[m.key][_.key],n[m.key][_.key]>n[w.key][_.key]&&(f=n[w.key][_.key])):i.linkage==="max"?(f=n[m.key][_.key],n[m.key][_.key]<n[w.key][_.key]&&(f=n[w.key][_.key])):i.linkage==="mean"?f=(n[m.key][_.key]*m.size+n[w.key][_.key]*w.size)/(m.size+w.size):i.mode==="dendrogram"?f=d(_.value,m.value):f=d(_.value[0],m.value[0]),n[m.key][_.key]=n[_.key][m.key]=f}for(var E=0;E<e.length;E++){var C=e[E].key;if(a[C]===m.key||a[C]===w.key){for(var B=C,N=0;N<e.length;N++){var A=e[N].key;n[C][A]<n[C][B]&&(B=A)}a[C]=B}e[E].index=E}return m.key=w.key=m.index=w.index=null,!0},qi=function(e,t,n){e&&(e.value?t.push(e.value):(e.left&&qi(e.left,t),e.right&&qi(e.right,t)))},Ch=function(e,t){if(!e)return"";if(e.left&&e.right){var n=Ch(e.left,t),a=Ch(e.right,t),i=t.add({group:"nodes",data:{id:n+","+a}});return t.add({group:"edges",data:{source:n,target:i.id()}}),t.add({group:"edges",data:{source:a,target:i.id()}}),i.id()}else if(e.value)return e.value.id()},Th=function(e,t,n){if(!e)return[];var a=[],i=[],o=[];return t===0?(e.left&&qi(e.left,a),e.right&&qi(e.right,i),o=a.concat(i),[n.collection(o)]):t===1?e.value?[n.collection(e.value)]:(e.left&&qi(e.left,a),e.right&&qi(e.right,i),[n.collection(a),n.collection(i)]):e.value?[n.collection(e.value)]:(e.left&&(a=Th(e.left,t-1,n)),e.right&&(i=Th(e.right,t-1,n)),a.concat(i))},Hm=function(e){for(var t=this.cy(),n=this.nodes(),a=DS(e),i=a.attributes,o=function(E,C){return Nl(a.distance,i.length,function(B){return i[B](E)},function(B){return i[B](C)},E,C)},u=[],f=[],c=[],d=[],h=0;h<n.length;h++){var p={value:a.mode==="dendrogram"?n[h]:[n[h]],key:h,index:h};u[h]=p,d[h]=p,f[h]=[],c[h]=0}for(var g=0;g<u.length;g++)for(var m=0;m<=g;m++){var w=void 0;a.mode==="dendrogram"?w=g===m?1/0:o(u[g].value,u[m].value):w=g===m?1/0:o(u[g].value[0],u[m].value[0]),f[g][m]=w,f[m][g]=w,w<f[g][c[g]]&&(c[g]=m)}for(var x=Wm(u,d,f,c,a);x;)x=Wm(u,d,f,c,a);var b;return a.mode==="dendrogram"?(b=Th(u[0],a.dendrogramDepth,t),a.addDendrogram&&Ch(u[0],t)):(b=new Array(u.length),u.forEach(function(_,E){_.key=_.index=null,b[E]=t.collection(_.value)})),b},IS={hierarchicalClustering:Hm,hca:Hm},LS=dr({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),NS=function(e){var t=e.damping,n=e.preference;.5<=t&&t<1||At("Damping must range on [0.5, 1).  Got: ".concat(t));var a=["median","mean","min","max"];return a.some(function(i){return i===n})||Ue(n)||At("Preference must be one of [".concat(a.map(function(i){return"'".concat(i,"'")}).join(", "),"] or a number.  Got: ").concat(n)),LS(e)},OS=function(e,t,n,a){var i=function(u,f){return a[f](u)};return-Nl(e,a.length,function(o){return i(t,o)},function(o){return i(n,o)},t,n)},MS=function(e,t){var n=null;return t==="median"?n=NE(e):t==="mean"?n=LE(e):t==="min"?n=DE(e):t==="max"?n=IE(e):n=t,n},zS=function(e,t,n){for(var a=[],i=0;i<e;i++)t[i*e+i]+n[i*e+i]>0&&a.push(i);return a},Gm=function(e,t,n){for(var a=[],i=0;i<e;i++){for(var o=-1,u=-1/0,f=0;f<n.length;f++){var c=n[f];t[i*e+c]>u&&(o=c,u=t[i*e+c])}o>0&&a.push(o)}for(var d=0;d<n.length;d++)a[n[d]]=n[d];return a},FS=function(e,t,n){for(var a=Gm(e,t,n),i=0;i<n.length;i++){for(var o=[],u=0;u<a.length;u++)a[u]===n[i]&&o.push(u);for(var f=-1,c=-1/0,d=0;d<o.length;d++){for(var h=0,p=0;p<o.length;p++)h+=t[o[p]*e+o[d]];h>c&&(f=d,c=h)}n[i]=o[f]}return a=Gm(e,t,n),a},Km=function(e){for(var t=this.cy(),n=this.nodes(),a=NS(e),i={},o=0;o<n.length;o++)i[n[o].id()]=o;var u,f,c,d,h,p;u=n.length,f=u*u,c=new Array(f);for(var g=0;g<f;g++)c[g]=-1/0;for(var m=0;m<u;m++)for(var w=0;w<u;w++)m!==w&&(c[m*u+w]=OS(a.distance,n[m],n[w],a.attributes));d=MS(c,a.preference);for(var x=0;x<u;x++)c[x*u+x]=d;h=new Array(f);for(var b=0;b<f;b++)h[b]=0;p=new Array(f);for(var _=0;_<f;_++)p[_]=0;for(var E=new Array(u),C=new Array(u),B=new Array(u),N=0;N<u;N++)E[N]=0,C[N]=0,B[N]=0;for(var A=new Array(u*a.minIterations),z=0;z<A.length;z++)A[z]=0;var M;for(M=0;M<a.maxIterations;M++){for(var V=0;V<u;V++){for(var q=-1/0,I=-1/0,F=-1,T=0,H=0;H<u;H++)E[H]=h[V*u+H],T=p[V*u+H]+c[V*u+H],T>=q?(I=q,q=T,F=H):T>I&&(I=T);for(var Q=0;Q<u;Q++)h[V*u+Q]=(1-a.damping)*(c[V*u+Q]-q)+a.damping*E[Q];h[V*u+F]=(1-a.damping)*(c[V*u+F]-I)+a.damping*E[F]}for(var W=0;W<u;W++){for(var Z=0,X=0;X<u;X++)E[X]=p[X*u+W],C[X]=Math.max(0,h[X*u+W]),Z+=C[X];Z-=C[W],C[W]=h[W*u+W],Z+=C[W];for(var te=0;te<u;te++)p[te*u+W]=(1-a.damping)*Math.min(0,Z-C[te])+a.damping*E[te];p[W*u+W]=(1-a.damping)*(Z-C[W])+a.damping*E[W]}for(var L=0,U=0;U<u;U++){var oe=p[U*u+U]+h[U*u+U]>0?1:0;A[M%a.minIterations*u+U]=oe,L+=oe}if(L>0&&(M>=a.minIterations-1||M==a.maxIterations-1)){for(var ie=0,ne=0;ne<u;ne++){B[ne]=0;for(var we=0;we<a.minIterations;we++)B[ne]+=A[we*u+ne];(B[ne]===0||B[ne]===a.minIterations)&&ie++}if(ie===u)break}}for(var Te=zS(u,h,p),ke=FS(u,c,Te),ge={},fe=0;fe<Te.length;fe++)ge[Te[fe]]=[];for(var de=0;de<n.length;de++){var be=i[n[de].id()],Pe=ke[be];Pe!=null&&ge[Pe].push(n[de])}for(var D=new Array(Te.length),ve=0;ve<Te.length;ve++)D[ve]=t.collection(ge[Te[ve]]);return D},US={affinityPropagation:Km,ap:Km},$S=dr({root:void 0,directed:!1}),VS={hierholzer:function(e){if(!dt(e)){var t=arguments;e={root:t[0],directed:t[1]}}var n=$S(e),a=n.root,i=n.directed,o=this,u=!1,f,c,d;a&&(d=Ye(a)?this.filter(a)[0].id():a[0].id());var h={},p={};i?o.forEach(function(_){var E=_.id();if(_.isNode()){var C=_.indegree(!0),B=_.outdegree(!0),N=C-B,A=B-C;N==1?f?u=!0:f=E:A==1?c?u=!0:c=E:(A>1||N>1)&&(u=!0),h[E]=[],_.outgoers().forEach(function(z){z.isEdge()&&h[E].push(z.id())})}else p[E]=[void 0,_.target().id()]}):o.forEach(function(_){var E=_.id();if(_.isNode()){var C=_.degree(!0);C%2&&(f?c?u=!0:c=E:f=E),h[E]=[],_.connectedEdges().forEach(function(B){return h[E].push(B.id())})}else p[E]=[_.source().id(),_.target().id()]});var g={found:!1,trail:void 0};if(u)return g;if(c&&f)if(i){if(d&&c!=d)return g;d=c}else{if(d&&c!=d&&f!=d)return g;d||(d=c)}else d||(d=o[0].id());var m=function(E){for(var C=E,B=[E],N,A,z;h[C].length;)N=h[C].shift(),A=p[N][0],z=p[N][1],C!=z?(h[z]=h[z].filter(function(M){return M!=N}),C=z):!i&&C!=A&&(h[A]=h[A].filter(function(M){return M!=N}),C=A),B.unshift(N),B.unshift(C);return B},w=[],x=[];for(x=m(d);x.length!=1;)h[x[0]].length==0?(w.unshift(o.getElementById(x.shift())),w.unshift(o.getElementById(x.shift()))):x=m(x.shift()).concat(x);w.unshift(o.getElementById(x.shift()));for(var b in h)if(h[b].length)return g;return g.found=!0,g.trail=this.spawn(w,!0),g}},Zu=function(){var e=this,t={},n=0,a=0,i=[],o=[],u={},f=function(p,g){for(var m=o.length-1,w=[],x=e.spawn();o[m].x!=p||o[m].y!=g;)w.push(o.pop().edge),m--;w.push(o.pop().edge),w.forEach(function(b){var _=b.connectedNodes().intersection(e);x.merge(b),_.forEach(function(E){var C=E.id(),B=E.connectedEdges().intersection(e);x.merge(E),t[C].cutVertex?x.merge(B.filter(function(N){return N.isLoop()})):x.merge(B)})}),i.push(x)},c=function(p,g,m){p===m&&(a+=1),t[g]={id:n,low:n++,cutVertex:!1};var w=e.getElementById(g).connectedEdges().intersection(e);if(w.size()===0)i.push(e.spawn(e.getElementById(g)));else{var x,b,_,E;w.forEach(function(C){x=C.source().id(),b=C.target().id(),_=x===g?b:x,_!==m&&(E=C.id(),u[E]||(u[E]=!0,o.push({x:g,y:_,edge:C})),_ in t?t[g].low=Math.min(t[g].low,t[_].id):(c(p,_,g),t[g].low=Math.min(t[g].low,t[_].low),t[g].id<=t[_].low&&(t[g].cutVertex=!0,f(g,_))))})}};e.forEach(function(h){if(h.isNode()){var p=h.id();p in t||(a=0,c(p,p),t[p].cutVertex=a>1)}});var d=Object.keys(t).filter(function(h){return t[h].cutVertex}).map(function(h){return e.getElementById(h)});return{cut:e.spawn(d),components:i}},jS={hopcroftTarjanBiconnected:Zu,htbc:Zu,htb:Zu,hopcroftTarjanBiconnectedComponents:Zu},Xu=function(){var e=this,t={},n=0,a=[],i=[],o=e.spawn(e),u=function(c){i.push(c),t[c]={index:n,low:n++,explored:!1};var d=e.getElementById(c).connectedEdges().intersection(e);if(d.forEach(function(w){var x=w.target().id();x!==c&&(x in t||u(x),t[x].explored||(t[c].low=Math.min(t[c].low,t[x].low)))}),t[c].index===t[c].low){for(var h=e.spawn();;){var p=i.pop();if(h.merge(e.getElementById(p)),t[p].low=t[c].index,t[p].explored=!0,p===c)break}var g=h.edgesWith(h),m=h.merge(g);a.push(m),o=o.difference(m)}};return e.forEach(function(f){if(f.isNode()){var c=f.id();c in t||u(c)}}),{cut:o,components:a}},qS={tarjanStronglyConnected:Xu,tsc:Xu,tscc:Xu,tarjanStronglyConnectedComponents:Xu},I1={};[ho,xE,bE,EE,kE,TE,BE,nS,Gi,Ki,kh,gS,RS,IS,US,VS,jS,qS].forEach(function(r){et(I1,r)});/*!
Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
Licensed under The MIT License (http://opensource.org/licenses/MIT)
*/var L1=0,N1=1,O1=2,pn=function(e){if(!(this instanceof pn))return new pn(e);this.id="Thenable/1.0.7",this.state=L1,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},typeof e=="function"&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};pn.prototype={fulfill:function(e){return Zm(this,N1,"fulfillValue",e)},reject:function(e){return Zm(this,O1,"rejectReason",e)},then:function(e,t){var n=this,a=new pn;return n.onFulfilled.push(Ym(e,a,"fulfill")),n.onRejected.push(Ym(t,a,"reject")),M1(n),a.proxy}};var Zm=function(e,t,n,a){return e.state===L1&&(e.state=t,e[n]=a,M1(e)),e},M1=function(e){e.state===N1?Xm(e,"onFulfilled",e.fulfillValue):e.state===O1&&Xm(e,"onRejected",e.rejectReason)},Xm=function(e,t,n){if(e[t].length!==0){var a=e[t];e[t]=[];var i=function(){for(var u=0;u<a.length;u++)a[u](n)};typeof setImmediate=="function"?setImmediate(i):setTimeout(i,0)}},Ym=function(e,t,n){return function(a){if(typeof e!="function")t[n].call(t,a);else{var i;try{i=e(a)}catch(o){t.reject(o);return}z1(t,i)}}},z1=function(e,t){if(e===t||e.proxy===t){e.reject(new TypeError("cannot resolve promise with itself"));return}var n;if(Qt(t)==="object"&&t!==null||typeof t=="function")try{n=t.then}catch(i){e.reject(i);return}if(typeof n=="function"){var a=!1;try{n.call(t,function(i){a||(a=!0,i===t?e.reject(new TypeError("circular thenable chain")):z1(e,i))},function(i){a||(a=!0,e.reject(i))})}catch(i){a||e.reject(i)}return}e.fulfill(t)};pn.all=function(r){return new pn(function(e,t){for(var n=new Array(r.length),a=0,i=function(f,c){n[f]=c,a++,a===r.length&&e(n)},o=0;o<r.length;o++)(function(u){var f=r[u],c=f!=null&&f.then!=null;if(c)f.then(function(h){i(u,h)},function(h){t(h)});else{var d=f;i(u,d)}})(o)})};pn.resolve=function(r){return new pn(function(e,t){e(r)})};pn.reject=function(r){return new pn(function(e,t){t(r)})};var es=typeof Promise<"u"?Promise:pn,Ph=function(e,t,n){var a=Wh(e),i=!a,o=this._private=et({duration:1e3},t,n);if(o.target=e,o.style=o.style||o.css,o.started=!1,o.playing=!1,o.hooked=!1,o.applying=!1,o.progress=0,o.completes=[],o.frames=[],o.complete&&zt(o.complete)&&o.completes.push(o.complete),i){var u=e.position();o.startPosition=o.startPosition||{x:u.x,y:u.y},o.startStyle=o.startStyle||e.cy().style().getAnimationStartStyle(e,o.style)}if(a){var f=e.pan();o.startPan={x:f.x,y:f.y},o.startZoom=e.zoom()}this.length=1,this[0]=this},ei=Ph.prototype;et(ei,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var t,n=e.target._private.animation;e.queue?t=n.queue:t=n.current,t.push(this),Gr(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return e.progress===1&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var t=this._private;return e===void 0?t.progress*t.duration:this.progress(e/t.duration)},progress:function(e){var t=this._private,n=t.playing;return e===void 0?t.progress:(n&&this.pause(),t.progress=e,t.started=!1,n&&this.play(),this)},completed:function(){return this._private.progress===1},reverse:function(){var e=this._private,t=e.playing;t&&this.pause(),e.progress=1-e.progress,e.started=!1;var n=function(c,d){var h=e[c];h!=null&&(e[c]=e[d],e[d]=h)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),e.style)for(var a=0;a<e.style.length;a++){var i=e.style[a],o=i.name,u=e.startStyle[o];e.startStyle[o]=i,e.style[a]=u}return t&&this.play(),this},promise:function(e){var t=this._private,n;switch(e){case"frame":n=t.frames;break;default:case"complete":case"completed":n=t.completes}return new es(function(a,i){n.push(function(){a()})})}});ei.complete=ei.completed;ei.run=ei.play;ei.running=ei.playing;var WS={animated:function(){return function(){var t=this,n=t.length!==void 0,a=n?t:[t],i=this._private.cy||this;if(!i.styleEnabled())return!1;var o=a[0];if(o)return o._private.animation.current.length>0}},clearQueue:function(){return function(){var t=this,n=t.length!==void 0,a=n?t:[t],i=this._private.cy||this;if(!i.styleEnabled())return this;for(var o=0;o<a.length;o++){var u=a[o];u._private.animation.queue=[]}return this}},delay:function(){return function(t,n){var a=this._private.cy||this;return a.styleEnabled()?this.animate({delay:t,duration:t,complete:n}):this}},delayAnimation:function(){return function(t,n){var a=this._private.cy||this;return a.styleEnabled()?this.animation({delay:t,duration:t,complete:n}):this}},animation:function(){return function(t,n){var a=this,i=a.length!==void 0,o=i?a:[a],u=this._private.cy||this,f=!i,c=!f;if(!u.styleEnabled())return this;var d=u.style();t=et({},t,n);var h=Object.keys(t).length===0;if(h)return new Ph(o[0],t);switch(t.duration===void 0&&(t.duration=400),t.duration){case"slow":t.duration=600;break;case"fast":t.duration=200;break}if(c&&(t.style=d.getPropsList(t.style||t.css),t.css=void 0),c&&t.renderedPosition!=null){var p=t.renderedPosition,g=u.pan(),m=u.zoom();t.position=E1(p,m,g)}if(f&&t.panBy!=null){var w=t.panBy,x=u.pan();t.pan={x:x.x+w.x,y:x.y+w.y}}var b=t.center||t.centre;if(f&&b!=null){var _=u.getCenterPan(b.eles,t.zoom);_!=null&&(t.pan=_)}if(f&&t.fit!=null){var E=t.fit,C=u.getFitViewport(E.eles||E.boundingBox,E.padding);C!=null&&(t.pan=C.pan,t.zoom=C.zoom)}if(f&&dt(t.zoom)){var B=u.getZoomedViewport(t.zoom);B!=null?(B.zoomed&&(t.zoom=B.zoom),B.panned&&(t.pan=B.pan)):t.zoom=null}return new Ph(o[0],t)}},animate:function(){return function(t,n){var a=this,i=a.length!==void 0,o=i?a:[a],u=this._private.cy||this;if(!u.styleEnabled())return this;n&&(t=et({},t,n));for(var f=0;f<o.length;f++){var c=o[f],d=c.animated()&&(t.queue===void 0||t.queue),h=c.animation(t,d?{queue:!0}:void 0);h.play()}return this}},stop:function(){return function(t,n){var a=this,i=a.length!==void 0,o=i?a:[a],u=this._private.cy||this;if(!u.styleEnabled())return this;for(var f=0;f<o.length;f++){for(var c=o[f],d=c._private,h=d.animation.current,p=0;p<h.length;p++){var g=h[p],m=g._private;n&&(m.duration=0)}t&&(d.animation.queue=[]),n||(d.animation.current=[])}return u.notify("draw"),this}}},dd,Qm;function Ol(){if(Qm)return dd;Qm=1;var r=Array.isArray;return dd=r,dd}var hd,Jm;function HS(){if(Jm)return hd;Jm=1;var r=Ol(),e=To(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(i,o){if(r(i))return!1;var u=typeof i;return u=="number"||u=="symbol"||u=="boolean"||i==null||e(i)?!0:n.test(i)||!t.test(i)||o!=null&&i in Object(o)}return hd=a,hd}var vd,ey;function GS(){if(ey)return vd;ey=1;var r=v1(),e=Co(),t="[object AsyncFunction]",n="[object Function]",a="[object GeneratorFunction]",i="[object Proxy]";function o(u){if(!e(u))return!1;var f=r(u);return f==n||f==a||f==t||f==i}return vd=o,vd}var pd,ty;function KS(){if(ty)return pd;ty=1;var r=Dl(),e=r["__core-js_shared__"];return pd=e,pd}var gd,ry;function ZS(){if(ry)return gd;ry=1;var r=KS(),e=(function(){var n=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function t(n){return!!e&&e in n}return gd=t,gd}var md,ny;function XS(){if(ny)return md;ny=1;var r=Function.prototype,e=r.toString;function t(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return md=t,md}var yd,ay;function YS(){if(ay)return yd;ay=1;var r=GS(),e=ZS(),t=Co(),n=XS(),a=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,o=Function.prototype,u=Object.prototype,f=o.toString,c=u.hasOwnProperty,d=RegExp("^"+f.call(c).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function h(p){if(!t(p)||e(p))return!1;var g=r(p)?d:i;return g.test(n(p))}return yd=h,yd}var wd,iy;function QS(){if(iy)return wd;iy=1;function r(e,t){return e==null?void 0:e[t]}return wd=r,wd}var xd,sy;function rv(){if(sy)return xd;sy=1;var r=YS(),e=QS();function t(n,a){var i=e(n,a);return r(i)?i:void 0}return xd=t,xd}var bd,oy;function Ml(){if(oy)return bd;oy=1;var r=rv(),e=r(Object,"create");return bd=e,bd}var _d,uy;function JS(){if(uy)return _d;uy=1;var r=Ml();function e(){this.__data__=r?r(null):{},this.size=0}return _d=e,_d}var Ed,ly;function ek(){if(ly)return Ed;ly=1;function r(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return Ed=r,Ed}var Sd,fy;function tk(){if(fy)return Sd;fy=1;var r=Ml(),e="__lodash_hash_undefined__",t=Object.prototype,n=t.hasOwnProperty;function a(i){var o=this.__data__;if(r){var u=o[i];return u===e?void 0:u}return n.call(o,i)?o[i]:void 0}return Sd=a,Sd}var kd,cy;function rk(){if(cy)return kd;cy=1;var r=Ml(),e=Object.prototype,t=e.hasOwnProperty;function n(a){var i=this.__data__;return r?i[a]!==void 0:t.call(i,a)}return kd=n,kd}var Cd,dy;function nk(){if(dy)return Cd;dy=1;var r=Ml(),e="__lodash_hash_undefined__";function t(n,a){var i=this.__data__;return this.size+=this.has(n)?0:1,i[n]=r&&a===void 0?e:a,this}return Cd=t,Cd}var Td,hy;function ak(){if(hy)return Td;hy=1;var r=JS(),e=ek(),t=tk(),n=rk(),a=nk();function i(o){var u=-1,f=o==null?0:o.length;for(this.clear();++u<f;){var c=o[u];this.set(c[0],c[1])}}return i.prototype.clear=r,i.prototype.delete=e,i.prototype.get=t,i.prototype.has=n,i.prototype.set=a,Td=i,Td}var Pd,vy;function ik(){if(vy)return Pd;vy=1;function r(){this.__data__=[],this.size=0}return Pd=r,Pd}var Rd,py;function F1(){if(py)return Rd;py=1;function r(e,t){return e===t||e!==e&&t!==t}return Rd=r,Rd}var Bd,gy;function zl(){if(gy)return Bd;gy=1;var r=F1();function e(t,n){for(var a=t.length;a--;)if(r(t[a][0],n))return a;return-1}return Bd=e,Bd}var Ad,my;function sk(){if(my)return Ad;my=1;var r=zl(),e=Array.prototype,t=e.splice;function n(a){var i=this.__data__,o=r(i,a);if(o<0)return!1;var u=i.length-1;return o==u?i.pop():t.call(i,o,1),--this.size,!0}return Ad=n,Ad}var Dd,yy;function ok(){if(yy)return Dd;yy=1;var r=zl();function e(t){var n=this.__data__,a=r(n,t);return a<0?void 0:n[a][1]}return Dd=e,Dd}var Id,wy;function uk(){if(wy)return Id;wy=1;var r=zl();function e(t){return r(this.__data__,t)>-1}return Id=e,Id}var Ld,xy;function lk(){if(xy)return Ld;xy=1;var r=zl();function e(t,n){var a=this.__data__,i=r(a,t);return i<0?(++this.size,a.push([t,n])):a[i][1]=n,this}return Ld=e,Ld}var Nd,by;function fk(){if(by)return Nd;by=1;var r=ik(),e=sk(),t=ok(),n=uk(),a=lk();function i(o){var u=-1,f=o==null?0:o.length;for(this.clear();++u<f;){var c=o[u];this.set(c[0],c[1])}}return i.prototype.clear=r,i.prototype.delete=e,i.prototype.get=t,i.prototype.has=n,i.prototype.set=a,Nd=i,Nd}var Od,_y;function ck(){if(_y)return Od;_y=1;var r=rv(),e=Dl(),t=r(e,"Map");return Od=t,Od}var Md,Ey;function dk(){if(Ey)return Md;Ey=1;var r=ak(),e=fk(),t=ck();function n(){this.size=0,this.__data__={hash:new r,map:new(t||e),string:new r}}return Md=n,Md}var zd,Sy;function hk(){if(Sy)return zd;Sy=1;function r(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return zd=r,zd}var Fd,ky;function Fl(){if(ky)return Fd;ky=1;var r=hk();function e(t,n){var a=t.__data__;return r(n)?a[typeof n=="string"?"string":"hash"]:a.map}return Fd=e,Fd}var Ud,Cy;function vk(){if(Cy)return Ud;Cy=1;var r=Fl();function e(t){var n=r(this,t).delete(t);return this.size-=n?1:0,n}return Ud=e,Ud}var $d,Ty;function pk(){if(Ty)return $d;Ty=1;var r=Fl();function e(t){return r(this,t).get(t)}return $d=e,$d}var Vd,Py;function gk(){if(Py)return Vd;Py=1;var r=Fl();function e(t){return r(this,t).has(t)}return Vd=e,Vd}var jd,Ry;function mk(){if(Ry)return jd;Ry=1;var r=Fl();function e(t,n){var a=r(this,t),i=a.size;return a.set(t,n),this.size+=a.size==i?0:1,this}return jd=e,jd}var qd,By;function yk(){if(By)return qd;By=1;var r=dk(),e=vk(),t=pk(),n=gk(),a=mk();function i(o){var u=-1,f=o==null?0:o.length;for(this.clear();++u<f;){var c=o[u];this.set(c[0],c[1])}}return i.prototype.clear=r,i.prototype.delete=e,i.prototype.get=t,i.prototype.has=n,i.prototype.set=a,qd=i,qd}var Wd,Ay;function wk(){if(Ay)return Wd;Ay=1;var r=yk(),e="Expected a function";function t(n,a){if(typeof n!="function"||a!=null&&typeof a!="function")throw new TypeError(e);var i=function(){var o=arguments,u=a?a.apply(this,o):o[0],f=i.cache;if(f.has(u))return f.get(u);var c=n.apply(this,o);return i.cache=f.set(u,c)||f,c};return i.cache=new(t.Cache||r),i}return t.Cache=r,Wd=t,Wd}var Hd,Dy;function xk(){if(Dy)return Hd;Dy=1;var r=wk(),e=500;function t(n){var a=r(n,function(o){return i.size===e&&i.clear(),o}),i=a.cache;return a}return Hd=t,Hd}var Gd,Iy;function U1(){if(Iy)return Gd;Iy=1;var r=xk(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,n=r(function(a){var i=[];return a.charCodeAt(0)===46&&i.push(""),a.replace(e,function(o,u,f,c){i.push(f?c.replace(t,"$1"):u||o)}),i});return Gd=n,Gd}var Kd,Ly;function $1(){if(Ly)return Kd;Ly=1;function r(e,t){for(var n=-1,a=e==null?0:e.length,i=Array(a);++n<a;)i[n]=t(e[n],n,e);return i}return Kd=r,Kd}var Zd,Ny;function bk(){if(Ny)return Zd;Ny=1;var r=Gh(),e=$1(),t=Ol(),n=To(),a=r?r.prototype:void 0,i=a?a.toString:void 0;function o(u){if(typeof u=="string")return u;if(t(u))return e(u,o)+"";if(n(u))return i?i.call(u):"";var f=u+"";return f=="0"&&1/u==-1/0?"-0":f}return Zd=o,Zd}var Xd,Oy;function V1(){if(Oy)return Xd;Oy=1;var r=bk();function e(t){return t==null?"":r(t)}return Xd=e,Xd}var Yd,My;function j1(){if(My)return Yd;My=1;var r=Ol(),e=HS(),t=U1(),n=V1();function a(i,o){return r(i)?i:e(i,o)?[i]:t(n(i))}return Yd=a,Yd}var Qd,zy;function nv(){if(zy)return Qd;zy=1;var r=To();function e(t){if(typeof t=="string"||r(t))return t;var n=t+"";return n=="0"&&1/t==-1/0?"-0":n}return Qd=e,Qd}var Jd,Fy;function _k(){if(Fy)return Jd;Fy=1;var r=j1(),e=nv();function t(n,a){a=r(a,n);for(var i=0,o=a.length;n!=null&&i<o;)n=n[e(a[i++])];return i&&i==o?n:void 0}return Jd=t,Jd}var eh,Uy;function Ek(){if(Uy)return eh;Uy=1;var r=_k();function e(t,n,a){var i=t==null?void 0:r(t,n);return i===void 0?a:i}return eh=e,eh}var Sk=Ek(),kk=ko(Sk),th,$y;function Ck(){if($y)return th;$y=1;var r=rv(),e=(function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch{}})();return th=e,th}var rh,Vy;function Tk(){if(Vy)return rh;Vy=1;var r=Ck();function e(t,n,a){n=="__proto__"&&r?r(t,n,{configurable:!0,enumerable:!0,value:a,writable:!0}):t[n]=a}return rh=e,rh}var nh,jy;function Pk(){if(jy)return nh;jy=1;var r=Tk(),e=F1(),t=Object.prototype,n=t.hasOwnProperty;function a(i,o,u){var f=i[o];(!(n.call(i,o)&&e(f,u))||u===void 0&&!(o in i))&&r(i,o,u)}return nh=a,nh}var ah,qy;function Rk(){if(qy)return ah;qy=1;var r=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(n,a){var i=typeof n;return a=a??r,!!a&&(i=="number"||i!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<a}return ah=t,ah}var ih,Wy;function Bk(){if(Wy)return ih;Wy=1;var r=Pk(),e=j1(),t=Rk(),n=Co(),a=nv();function i(o,u,f,c){if(!n(o))return o;u=e(u,o);for(var d=-1,h=u.length,p=h-1,g=o;g!=null&&++d<h;){var m=a(u[d]),w=f;if(m==="__proto__"||m==="constructor"||m==="prototype")return o;if(d!=p){var x=g[m];w=c?c(x,m,g):void 0,w===void 0&&(w=n(x)?x:t(u[d+1])?[]:{})}r(g,m,w),g=g[m]}return o}return ih=i,ih}var sh,Hy;function Ak(){if(Hy)return sh;Hy=1;var r=Bk();function e(t,n,a){return t==null?t:r(t,n,a)}return sh=e,sh}var Dk=Ak(),Ik=ko(Dk),oh,Gy;function Lk(){if(Gy)return oh;Gy=1;function r(e,t){var n=-1,a=e.length;for(t||(t=Array(a));++n<a;)t[n]=e[n];return t}return oh=r,oh}var uh,Ky;function Nk(){if(Ky)return uh;Ky=1;var r=$1(),e=Lk(),t=Ol(),n=To(),a=U1(),i=nv(),o=V1();function u(f){return t(f)?r(f,i):n(f)?[f]:e(a(o(f)))}return uh=u,uh}var Ok=Nk(),Mk=ko(Ok),zk={data:function(e){var t={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(a){},beforeSet:function(a,i){},onSet:function(a){},canSet:function(a){return!0}};return e=et({},t,e),function(a,i){var o=e,u=this,f=u.length!==void 0,c=f?u:[u],d=f?u[0]:u;if(Ye(a)){var h=a.indexOf(".")!==-1,p=h&&Mk(a);if(o.allowGetting&&i===void 0){var g;return d&&(o.beforeGet(d),p&&d._private[o.field][a]===void 0?g=kk(d._private[o.field],p):g=d._private[o.field][a]),g}else if(o.allowSetting&&i!==void 0){var m=!o.immutableKeys[a];if(m){var w=a1({},a,i);o.beforeSet(u,w);for(var x=0,b=c.length;x<b;x++){var _=c[x];o.canSet(_)&&(p&&d._private[o.field][a]===void 0?Ik(_._private[o.field],p,i):_._private[o.field][a]=i)}o.updateStyle&&u.updateStyle(),o.onSet(u),o.settingTriggersEvent&&u[o.triggerFnName](o.settingEvent)}}}else if(o.allowSetting&&dt(a)){var E=a,C,B,N=Object.keys(E);o.beforeSet(u,E);for(var A=0;A<N.length;A++){C=N[A],B=E[C];var z=!o.immutableKeys[C];if(z)for(var M=0;M<c.length;M++){var V=c[M];o.canSet(V)&&(V._private[o.field][C]=B)}}o.updateStyle&&u.updateStyle(),o.onSet(u),o.settingTriggersEvent&&u[o.triggerFnName](o.settingEvent)}else if(o.allowBinding&&zt(a)){var q=a;u.on(o.bindingEvent,q)}else if(o.allowGetting&&a===void 0){var I;return d&&(o.beforeGet(d),I=d._private[o.field]),I}return u}},removeData:function(e){var t={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return e=et({},t,e),function(a){var i=e,o=this,u=o.length!==void 0,f=u?o:[o];if(Ye(a)){for(var c=a.split(/\s+/),d=c.length,h=0;h<d;h++){var p=c[h];if(!wa(p)){var g=!i.immutableKeys[p];if(g)for(var m=0,w=f.length;m<w;m++)f[m]._private[i.field][p]=void 0}}i.triggerEvent&&o[i.triggerFnName](i.event)}else if(a===void 0){for(var x=0,b=f.length;x<b;x++)for(var _=f[x]._private[i.field],E=Object.keys(_),C=0;C<E.length;C++){var B=E[C],N=!i.immutableKeys[B];N&&(_[B]=void 0)}i.triggerEvent&&o[i.triggerFnName](i.event)}return o}}},Fk={eventAliasesOn:function(e){var t=e;t.addListener=t.listen=t.bind=t.on,t.unlisten=t.unbind=t.off=t.removeListener,t.trigger=t.emit,t.pon=t.promiseOn=function(n,a){var i=this,o=Array.prototype.slice.call(arguments,0);return new es(function(u,f){var c=function(g){i.off.apply(i,h),u(g)},d=o.concat([c]),h=d.concat([]);i.on.apply(i,d)})}}},pt={};[WS,zk,Fk].forEach(function(r){et(pt,r)});var Uk={animate:pt.animate(),animation:pt.animation(),animated:pt.animated(),clearQueue:pt.clearQueue(),delay:pt.delay(),delayAnimation:pt.delayAnimation(),stop:pt.stop()},ul={classes:function(e){var t=this;if(e===void 0){var n=[];return t[0]._private.classes.forEach(function(m){return n.push(m)}),n}else wt(e)||(e=(e||"").match(/\S+/g)||[]);for(var a=[],i=new Ji(e),o=0;o<t.length;o++){for(var u=t[o],f=u._private,c=f.classes,d=!1,h=0;h<e.length;h++){var p=e[h],g=c.has(p);if(!g){d=!0;break}}d||(d=c.size!==e.length),d&&(f.classes=i,a.push(u))}return a.length>0&&this.spawn(a).updateStyle().emit("class"),t},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var t=this[0];return t!=null&&t._private.classes.has(e)},toggleClass:function(e,t){wt(e)||(e=e.match(/\S+/g)||[]);for(var n=this,a=t===void 0,i=[],o=0,u=n.length;o<u;o++)for(var f=n[o],c=f._private.classes,d=!1,h=0;h<e.length;h++){var p=e[h],g=c.has(p),m=!1;t||a&&!g?(c.add(p),m=!0):(!t||a&&g)&&(c.delete(p),m=!0),!d&&m&&(i.push(f),d=!0)}return i.length>0&&this.spawn(i).updateStyle().emit("class"),n},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,t){var n=this;if(t==null)t=250;else if(t===0)return n;return n.addClass(e),setTimeout(function(){n.removeClass(e)},t),n}};ul.className=ul.classNames=ul.classes;var ct={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:`"(?:\\\\"|[^"])*"|'(?:\\\\'|[^'])*'`,number:Yt,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};ct.variable="(?:[\\w-.]|(?:\\\\"+ct.metaChar+"))+";ct.className="(?:[\\w-]|(?:\\\\"+ct.metaChar+"))+";ct.value=ct.string+"|"+ct.number;ct.id=ct.variable;(function(){var r,e,t;for(r=ct.comparatorOp.split("|"),t=0;t<r.length;t++)e=r[t],ct.comparatorOp+="|@"+e;for(r=ct.comparatorOp.split("|"),t=0;t<r.length;t++)e=r[t],!(e.indexOf("!")>=0)&&e!=="="&&(ct.comparatorOp+="|\\!"+e)})();var yt=function(){return{checks:[]}},qe={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},Rh=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort(function(r,e){return z_(r.selector,e.selector)}),$k=(function(){for(var r={},e,t=0;t<Rh.length;t++)e=Rh[t],r[e.selector]=e.matches;return r})(),Vk=function(e,t){return $k[e](t)},jk="("+Rh.map(function(r){return r.selector}).join("|")+")",Ii=function(e){return e.replace(new RegExp("\\\\("+ct.metaChar+")","g"),function(t,n){return n})},da=function(e,t,n){e[e.length-1]=n},Bh=[{name:"group",query:!0,regex:"("+ct.group+")",populate:function(e,t,n){var a=Ht(n,1),i=a[0];t.checks.push({type:qe.GROUP,value:i==="*"?i:i+"s"})}},{name:"state",query:!0,regex:jk,populate:function(e,t,n){var a=Ht(n,1),i=a[0];t.checks.push({type:qe.STATE,value:i})}},{name:"id",query:!0,regex:"\\#("+ct.id+")",populate:function(e,t,n){var a=Ht(n,1),i=a[0];t.checks.push({type:qe.ID,value:Ii(i)})}},{name:"className",query:!0,regex:"\\.("+ct.className+")",populate:function(e,t,n){var a=Ht(n,1),i=a[0];t.checks.push({type:qe.CLASS,value:Ii(i)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+ct.variable+")\\s*\\]",populate:function(e,t,n){var a=Ht(n,1),i=a[0];t.checks.push({type:qe.DATA_EXIST,field:Ii(i)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+ct.variable+")\\s*("+ct.comparatorOp+")\\s*("+ct.value+")\\s*\\]",populate:function(e,t,n){var a=Ht(n,3),i=a[0],o=a[1],u=a[2],f=new RegExp("^"+ct.string+"$").exec(u)!=null;f?u=u.substring(1,u.length-1):u=parseFloat(u),t.checks.push({type:qe.DATA_COMPARE,field:Ii(i),operator:o,value:u})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+ct.boolOp+")\\s*("+ct.variable+")\\s*\\]",populate:function(e,t,n){var a=Ht(n,2),i=a[0],o=a[1];t.checks.push({type:qe.DATA_BOOL,field:Ii(o),operator:i})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+ct.meta+")\\s*("+ct.comparatorOp+")\\s*("+ct.number+")\\s*\\]\\]",populate:function(e,t,n){var a=Ht(n,3),i=a[0],o=a[1],u=a[2];t.checks.push({type:qe.META_COMPARE,field:Ii(i),operator:o,value:parseFloat(u)})}},{name:"nextQuery",separator:!0,regex:ct.separator,populate:function(e,t){var n=e.currentSubject,a=e.edgeCount,i=e.compoundCount,o=e[e.length-1];n!=null&&(o.subject=n,e.currentSubject=null),o.edgeCount=a,o.compoundCount=i,e.edgeCount=0,e.compoundCount=0;var u=e[e.length++]=yt();return u}},{name:"directedEdge",separator:!0,regex:ct.directedEdge,populate:function(e,t){if(e.currentSubject==null){var n=yt(),a=t,i=yt();return n.checks.push({type:qe.DIRECTED_EDGE,source:a,target:i}),da(e,t,n),e.edgeCount++,i}else{var o=yt(),u=t,f=yt();return o.checks.push({type:qe.NODE_SOURCE,source:u,target:f}),da(e,t,o),e.edgeCount++,f}}},{name:"undirectedEdge",separator:!0,regex:ct.undirectedEdge,populate:function(e,t){if(e.currentSubject==null){var n=yt(),a=t,i=yt();return n.checks.push({type:qe.UNDIRECTED_EDGE,nodes:[a,i]}),da(e,t,n),e.edgeCount++,i}else{var o=yt(),u=t,f=yt();return o.checks.push({type:qe.NODE_NEIGHBOR,node:u,neighbor:f}),da(e,t,o),f}}},{name:"child",separator:!0,regex:ct.child,populate:function(e,t){if(e.currentSubject==null){var n=yt(),a=yt(),i=e[e.length-1];return n.checks.push({type:qe.CHILD,parent:i,child:a}),da(e,t,n),e.compoundCount++,a}else if(e.currentSubject===t){var o=yt(),u=e[e.length-1],f=yt(),c=yt(),d=yt(),h=yt();return o.checks.push({type:qe.COMPOUND_SPLIT,left:u,right:f,subject:c}),c.checks=t.checks,t.checks=[{type:qe.TRUE}],h.checks.push({type:qe.TRUE}),f.checks.push({type:qe.PARENT,parent:h,child:d}),da(e,u,o),e.currentSubject=c,e.compoundCount++,d}else{var p=yt(),g=yt(),m=[{type:qe.PARENT,parent:p,child:g}];return p.checks=t.checks,t.checks=m,e.compoundCount++,g}}},{name:"descendant",separator:!0,regex:ct.descendant,populate:function(e,t){if(e.currentSubject==null){var n=yt(),a=yt(),i=e[e.length-1];return n.checks.push({type:qe.DESCENDANT,ancestor:i,descendant:a}),da(e,t,n),e.compoundCount++,a}else if(e.currentSubject===t){var o=yt(),u=e[e.length-1],f=yt(),c=yt(),d=yt(),h=yt();return o.checks.push({type:qe.COMPOUND_SPLIT,left:u,right:f,subject:c}),c.checks=t.checks,t.checks=[{type:qe.TRUE}],h.checks.push({type:qe.TRUE}),f.checks.push({type:qe.ANCESTOR,ancestor:h,descendant:d}),da(e,u,o),e.currentSubject=c,e.compoundCount++,d}else{var p=yt(),g=yt(),m=[{type:qe.ANCESTOR,ancestor:p,descendant:g}];return p.checks=t.checks,t.checks=m,e.compoundCount++,g}}},{name:"subject",modifier:!0,regex:ct.subject,populate:function(e,t){if(e.currentSubject!=null&&e.currentSubject!==t)return gt("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=t;var n=e[e.length-1],a=n.checks[0],i=a==null?null:a.type;i===qe.DIRECTED_EDGE?a.type=qe.NODE_TARGET:i===qe.UNDIRECTED_EDGE&&(a.type=qe.NODE_NEIGHBOR,a.node=a.nodes[1],a.neighbor=a.nodes[0],a.nodes=null)}}];Bh.forEach(function(r){return r.regexObj=new RegExp("^"+r.regex)});var qk=function(e){for(var t,n,a,i=0;i<Bh.length;i++){var o=Bh[i],u=o.name,f=e.match(o.regexObj);if(f!=null){n=f,t=o,a=u;var c=f[0];e=e.substring(c.length);break}}return{expr:t,match:n,name:a,remaining:e}},Wk=function(e){var t=e.match(/^\s+/);if(t){var n=t[0];e=e.substring(n.length)}return e},Hk=function(e){var t=this,n=t.inputText=e,a=t[0]=yt();for(t.length=1,n=Wk(n);;){var i=qk(n);if(i.expr==null)return gt("The selector `"+e+"`is invalid"),!1;var o=i.match.slice(1),u=i.expr.populate(t,a,o);if(u===!1)return!1;if(u!=null&&(a=u),n=i.remaining,n.match(/^\s*$/))break}var f=t[t.length-1];t.currentSubject!=null&&(f.subject=t.currentSubject),f.edgeCount=t.edgeCount,f.compoundCount=t.compoundCount;for(var c=0;c<t.length;c++){var d=t[c];if(d.compoundCount>0&&d.edgeCount>0)return gt("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(d.edgeCount>1)return gt("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;d.edgeCount===1&&gt("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},Gk=function(){if(this.toStringCache!=null)return this.toStringCache;for(var e=function(d){return d??""},t=function(d){return Ye(d)?'"'+d+'"':e(d)},n=function(d){return" "+d+" "},a=function(d,h){var p=d.type,g=d.value;switch(p){case qe.GROUP:{var m=e(g);return m.substring(0,m.length-1)}case qe.DATA_COMPARE:{var w=d.field,x=d.operator;return"["+w+n(e(x))+t(g)+"]"}case qe.DATA_BOOL:{var b=d.operator,_=d.field;return"["+e(b)+_+"]"}case qe.DATA_EXIST:{var E=d.field;return"["+E+"]"}case qe.META_COMPARE:{var C=d.operator,B=d.field;return"[["+B+n(e(C))+t(g)+"]]"}case qe.STATE:return g;case qe.ID:return"#"+g;case qe.CLASS:return"."+g;case qe.PARENT:case qe.CHILD:return i(d.parent,h)+n(">")+i(d.child,h);case qe.ANCESTOR:case qe.DESCENDANT:return i(d.ancestor,h)+" "+i(d.descendant,h);case qe.COMPOUND_SPLIT:{var N=i(d.left,h),A=i(d.subject,h),z=i(d.right,h);return N+(N.length>0?" ":"")+A+z}case qe.TRUE:return""}},i=function(d,h){return d.checks.reduce(function(p,g,m){return p+(h===d&&m===0?"$":"")+a(g,h)},"")},o="",u=0;u<this.length;u++){var f=this[u];o+=i(f,f.subject),this.length>1&&u<this.length-1&&(o+=", ")}return this.toStringCache=o,o},Kk={parse:Hk,toString:Gk},q1=function(e,t,n){var a,i=Ye(e),o=Ue(e),u=Ye(n),f,c,d=!1,h=!1,p=!1;switch(t.indexOf("!")>=0&&(t=t.replace("!",""),h=!0),t.indexOf("@")>=0&&(t=t.replace("@",""),d=!0),(i||u||d)&&(f=!i&&!o?"":""+e,c=""+n),d&&(e=f=f.toLowerCase(),n=c=c.toLowerCase()),t){case"*=":a=f.indexOf(c)>=0;break;case"$=":a=f.indexOf(c,f.length-c.length)>=0;break;case"^=":a=f.indexOf(c)===0;break;case"=":a=e===n;break;case">":p=!0,a=e>n;break;case">=":p=!0,a=e>=n;break;case"<":p=!0,a=e<n;break;case"<=":p=!0,a=e<=n;break;default:a=!1;break}return h&&(e!=null||!p)&&(a=!a),a},Zk=function(e,t){switch(t){case"?":return!!e;case"!":return!e;case"^":return e===void 0}},Xk=function(e){return e!==void 0},av=function(e,t){return e.data(t)},Yk=function(e,t){return e[t]()},Ut=[],Tt=function(e,t){return e.checks.every(function(n){return Ut[n.type](n,t)})};Ut[qe.GROUP]=function(r,e){var t=r.value;return t==="*"||t===e.group()};Ut[qe.STATE]=function(r,e){var t=r.value;return Vk(t,e)};Ut[qe.ID]=function(r,e){var t=r.value;return e.id()===t};Ut[qe.CLASS]=function(r,e){var t=r.value;return e.hasClass(t)};Ut[qe.META_COMPARE]=function(r,e){var t=r.field,n=r.operator,a=r.value;return q1(Yk(e,t),n,a)};Ut[qe.DATA_COMPARE]=function(r,e){var t=r.field,n=r.operator,a=r.value;return q1(av(e,t),n,a)};Ut[qe.DATA_BOOL]=function(r,e){var t=r.field,n=r.operator;return Zk(av(e,t),n)};Ut[qe.DATA_EXIST]=function(r,e){var t=r.field;return r.operator,Xk(av(e,t))};Ut[qe.UNDIRECTED_EDGE]=function(r,e){var t=r.nodes[0],n=r.nodes[1],a=e.source(),i=e.target();return Tt(t,a)&&Tt(n,i)||Tt(n,a)&&Tt(t,i)};Ut[qe.NODE_NEIGHBOR]=function(r,e){return Tt(r.node,e)&&e.neighborhood().some(function(t){return t.isNode()&&Tt(r.neighbor,t)})};Ut[qe.DIRECTED_EDGE]=function(r,e){return Tt(r.source,e.source())&&Tt(r.target,e.target())};Ut[qe.NODE_SOURCE]=function(r,e){return Tt(r.source,e)&&e.outgoers().some(function(t){return t.isNode()&&Tt(r.target,t)})};Ut[qe.NODE_TARGET]=function(r,e){return Tt(r.target,e)&&e.incomers().some(function(t){return t.isNode()&&Tt(r.source,t)})};Ut[qe.CHILD]=function(r,e){return Tt(r.child,e)&&Tt(r.parent,e.parent())};Ut[qe.PARENT]=function(r,e){return Tt(r.parent,e)&&e.children().some(function(t){return Tt(r.child,t)})};Ut[qe.DESCENDANT]=function(r,e){return Tt(r.descendant,e)&&e.ancestors().some(function(t){return Tt(r.ancestor,t)})};Ut[qe.ANCESTOR]=function(r,e){return Tt(r.ancestor,e)&&e.descendants().some(function(t){return Tt(r.descendant,t)})};Ut[qe.COMPOUND_SPLIT]=function(r,e){return Tt(r.subject,e)&&Tt(r.left,e)&&Tt(r.right,e)};Ut[qe.TRUE]=function(){return!0};Ut[qe.COLLECTION]=function(r,e){var t=r.value;return t.has(e)};Ut[qe.FILTER]=function(r,e){var t=r.value;return t(e)};var Qk=function(e){var t=this;if(t.length===1&&t[0].checks.length===1&&t[0].checks[0].type===qe.ID)return e.getElementById(t[0].checks[0].value).collection();var n=function(i){for(var o=0;o<t.length;o++){var u=t[o];if(Tt(u,i))return!0}return!1};return t.text()==null&&(n=function(){return!0}),e.filter(n)},Jk=function(e){for(var t=this,n=0;n<t.length;n++){var a=t[n];if(Tt(a,e))return!0}return!1},eC={matches:Jk,filter:Qk},_a=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,e==null||Ye(e)&&e.match(/^\s*$/)||(Gr(e)?this.addQuery({checks:[{type:qe.COLLECTION,value:e.collection()}]}):zt(e)?this.addQuery({checks:[{type:qe.FILTER,value:e}]}):Ye(e)?this.parse(e)||(this.invalid=!0):At("A selector must be created from a string; found "))},Ea=_a.prototype;[Kk,eC].forEach(function(r){return et(Ea,r)});Ea.text=function(){return this.inputText};Ea.size=function(){return this.length};Ea.eq=function(r){return this[r]};Ea.sameText=function(r){return!this.invalid&&!r.invalid&&this.text()===r.text()};Ea.addQuery=function(r){this[this.length++]=r};Ea.selector=Ea.toString;var ma={allAre:function(e){var t=new _a(e);return this.every(function(n){return t.matches(n)})},is:function(e){var t=new _a(e);return this.some(function(n){return t.matches(n)})},some:function(e,t){for(var n=0;n<this.length;n++){var a=t?e.apply(t,[this[n],n,this]):e(this[n],n,this);if(a)return!0}return!1},every:function(e,t){for(var n=0;n<this.length;n++){var a=t?e.apply(t,[this[n],n,this]):e(this[n],n,this);if(!a)return!1}return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var t=this.length,n=e.length;return t!==n?!1:t===1?this[0]===e[0]:this.every(function(a){return e.hasElementWithId(a.id())})},anySame:function(e){return e=this.cy().collection(e),this.some(function(t){return e.hasElementWithId(t.id())})},allAreNeighbors:function(e){e=this.cy().collection(e);var t=this.neighborhood();return e.every(function(n){return t.hasElementWithId(n.id())})},contains:function(e){e=this.cy().collection(e);var t=this;return e.every(function(n){return t.hasElementWithId(n.id())})}};ma.allAreNeighbours=ma.allAreNeighbors;ma.has=ma.contains;ma.equal=ma.equals=ma.same;var nn=function(e,t){return function(a,i,o,u){var f=a,c=this,d;if(f==null?d="":Gr(f)&&f.length===1&&(d=f.id()),c.length===1&&d){var h=c[0]._private,p=h.traversalCache=h.traversalCache||{},g=p[t]=p[t]||[],m=Qa(d),w=g[m];return w||(g[m]=e.call(c,a,i,o,u))}else return e.call(c,a,i,o,u)}},Qi={parent:function(e){var t=[];if(this.length===1){var n=this[0]._private.parent;if(n)return n}for(var a=0;a<this.length;a++){var i=this[a],o=i._private.parent;o&&t.push(o)}return this.spawn(t,!0).filter(e)},parents:function(e){for(var t=[],n=this.parent();n.nonempty();){for(var a=0;a<n.length;a++){var i=n[a];t.push(i)}n=n.parent()}return this.spawn(t,!0).filter(e)},commonAncestors:function(e){for(var t,n=0;n<this.length;n++){var a=this[n],i=a.parents();t=t||i,t=t.intersect(i)}return t.filter(e)},orphans:function(e){return this.stdFilter(function(t){return t.isOrphan()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(t){return t.isChild()}).filter(e)},children:nn(function(r){for(var e=[],t=0;t<this.length;t++)for(var n=this[t],a=n._private.children,i=0;i<a.length;i++)e.push(a[i]);return this.spawn(e,!0).filter(r)},"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length!==0},isChildless:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length===0},isChild:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent!=null},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent==null},descendants:function(e){var t=[];function n(a){for(var i=0;i<a.length;i++){var o=a[i];t.push(o),o.children().nonempty()&&n(o.children())}}return n(this.children()),this.spawn(t,!0).filter(e)}};function iv(r,e,t,n){for(var a=[],i=new Ji,o=r.cy(),u=o.hasCompoundNodes(),f=0;f<r.length;f++){var c=r[f];t?a.push(c):u&&n(a,i,c)}for(;a.length>0;){var d=a.shift();e(d),i.add(d.id()),u&&n(a,i,d)}return r}function W1(r,e,t){if(t.isParent())for(var n=t._private.children,a=0;a<n.length;a++){var i=n[a];e.has(i.id())||r.push(i)}}Qi.forEachDown=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return iv(this,r,e,W1)};function H1(r,e,t){if(t.isChild()){var n=t._private.parent;e.has(n.id())||r.push(n)}}Qi.forEachUp=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return iv(this,r,e,H1)};function tC(r,e,t){H1(r,e,t),W1(r,e,t)}Qi.forEachUpAndDown=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return iv(this,r,e,tC)};Qi.ancestors=Qi.parents;var go,G1;go=G1={data:pt.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:pt.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:pt.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:pt.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:pt.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:pt.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}};go.attr=go.data;go.removeAttr=go.removeData;var rC=G1,Ul={};function lh(r){return function(e){var t=this;if(e===void 0&&(e=!0),t.length!==0)if(t.isNode()&&!t.removed()){for(var n=0,a=t[0],i=a._private.edges,o=0;o<i.length;o++){var u=i[o];!e&&u.isLoop()||(n+=r(a,u))}return n}else return}}et(Ul,{degree:lh(function(r,e){return e.source().same(e.target())?2:1}),indegree:lh(function(r,e){return e.target().same(r)?1:0}),outdegree:lh(function(r,e){return e.source().same(r)?1:0})});function Li(r,e){return function(t){for(var n,a=this.nodes(),i=0;i<a.length;i++){var o=a[i],u=o[r](t);u!==void 0&&(n===void 0||e(u,n))&&(n=u)}return n}}et(Ul,{minDegree:Li("degree",function(r,e){return r<e}),maxDegree:Li("degree",function(r,e){return r>e}),minIndegree:Li("indegree",function(r,e){return r<e}),maxIndegree:Li("indegree",function(r,e){return r>e}),minOutdegree:Li("outdegree",function(r,e){return r<e}),maxOutdegree:Li("outdegree",function(r,e){return r>e})});et(Ul,{totalDegree:function(e){for(var t=0,n=this.nodes(),a=0;a<n.length;a++)t+=n[a].degree(e);return t}});var vn,K1,Z1=function(e,t,n){for(var a=0;a<e.length;a++){var i=e[a];if(!i.locked()){var o=i._private.position,u={x:t.x!=null?t.x-o.x:0,y:t.y!=null?t.y-o.y:0};i.isParent()&&!(u.x===0&&u.y===0)&&i.children().shift(u,n),i.dirtyBoundingBoxCache()}}},Zy={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,t){Z1(e,t,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}};vn=K1={position:pt.data(Zy),silentPosition:pt.data(et({},Zy,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,t){Z1(e,t,!0)},onSet:function(e){e.dirtyCompoundBoundsCache()}})),positions:function(e,t){if(dt(e))t?this.silentPosition(e):this.position(e);else if(zt(e)){var n=e,a=this.cy();a.startBatch();for(var i=0;i<this.length;i++){var o=this[i],u=void 0;(u=n(o,i))&&(t?o.silentPosition(u):o.position(u))}a.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,t,n){var a;if(dt(e)?(a={x:Ue(e.x)?e.x:0,y:Ue(e.y)?e.y:0},n=t):Ye(e)&&Ue(t)&&(a={x:0,y:0},a[e]=t),a!=null){var i=this.cy();i.startBatch();for(var o=0;o<this.length;o++){var u=this[o];if(!(i.hasCompoundNodes()&&u.isChild()&&u.ancestors().anySame(this))){var f=u.position(),c={x:f.x+a.x,y:f.y+a.y};n?u.silentPosition(c):u.position(c)}}i.endBatch()}return this},silentShift:function(e,t){return dt(e)?this.shift(e,!0):Ye(e)&&Ue(t)&&this.shift(e,t,!0),this},renderedPosition:function(e,t){var n=this[0],a=this.cy(),i=a.zoom(),o=a.pan(),u=dt(e)?e:void 0,f=u!==void 0||t!==void 0&&Ye(e);if(n&&n.isNode())if(f)for(var c=0;c<this.length;c++){var d=this[c];t!==void 0?d.position(e,(t-o[e])/i):u!==void 0&&d.position(E1(u,i,o))}else{var h=n.position();return u=Ll(h,i,o),e===void 0?u:u[e]}else if(!f)return;return this},relativePosition:function(e,t){var n=this[0],a=this.cy(),i=dt(e)?e:void 0,o=i!==void 0||t!==void 0&&Ye(e),u=a.hasCompoundNodes();if(n&&n.isNode())if(o)for(var f=0;f<this.length;f++){var c=this[f],d=u?c.parent():null,h=d&&d.length>0,p=h;h&&(d=d[0]);var g=p?d.position():{x:0,y:0};t!==void 0?c.position(e,t+g[e]):i!==void 0&&c.position({x:i.x+g.x,y:i.y+g.y})}else{var m=n.position(),w=u?n.parent():null,x=w&&w.length>0,b=x;x&&(w=w[0]);var _=b?w.position():{x:0,y:0};return i={x:m.x-_.x,y:m.y-_.y},e===void 0?i:i[e]}else if(!o)return;return this}};vn.modelPosition=vn.point=vn.position;vn.modelPositions=vn.points=vn.positions;vn.renderedPoint=vn.renderedPosition;vn.relativePoint=vn.relativePosition;var nC=K1,Zi,Ta;Zi=Ta={};Ta.renderedBoundingBox=function(r){var e=this.boundingBox(r),t=this.cy(),n=t.zoom(),a=t.pan(),i=e.x1*n+a.x,o=e.x2*n+a.x,u=e.y1*n+a.y,f=e.y2*n+a.y;return{x1:i,x2:o,y1:u,y2:f,w:o-i,h:f-u}};Ta.dirtyCompoundBoundsCache=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();return!e.styleEnabled()||!e.hasCompoundNodes()?this:(this.forEachUp(function(t){if(t.isParent()){var n=t._private;n.compoundBoundsClean=!1,n.bbCache=null,r||t.emitAndNotify("bounds")}}),this)};Ta.updateCompoundBounds=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();if(!e.styleEnabled()||!e.hasCompoundNodes())return this;if(!r&&e.batching())return this;function t(o){if(!o.isParent())return;var u=o._private,f=o.children(),c=o.pstyle("compound-sizing-wrt-labels").value==="include",d={width:{val:o.pstyle("min-width").pfValue,left:o.pstyle("min-width-bias-left"),right:o.pstyle("min-width-bias-right")},height:{val:o.pstyle("min-height").pfValue,top:o.pstyle("min-height-bias-top"),bottom:o.pstyle("min-height-bias-bottom")}},h=f.boundingBox({includeLabels:c,includeOverlays:!1,useCache:!1}),p=u.position;(h.w===0||h.h===0)&&(h={w:o.pstyle("width").pfValue,h:o.pstyle("height").pfValue},h.x1=p.x-h.w/2,h.x2=p.x+h.w/2,h.y1=p.y-h.h/2,h.y2=p.y+h.h/2);function g(M,V,q){var I=0,F=0,T=V+q;return M>0&&T>0&&(I=V/T*M,F=q/T*M),{biasDiff:I,biasComplementDiff:F}}function m(M,V,q,I){if(q.units==="%")switch(I){case"width":return M>0?q.pfValue*M:0;case"height":return V>0?q.pfValue*V:0;case"average":return M>0&&V>0?q.pfValue*(M+V)/2:0;case"min":return M>0&&V>0?M>V?q.pfValue*V:q.pfValue*M:0;case"max":return M>0&&V>0?M>V?q.pfValue*M:q.pfValue*V:0;default:return 0}else return q.units==="px"?q.pfValue:0}var w=d.width.left.value;d.width.left.units==="px"&&d.width.val>0&&(w=w*100/d.width.val);var x=d.width.right.value;d.width.right.units==="px"&&d.width.val>0&&(x=x*100/d.width.val);var b=d.height.top.value;d.height.top.units==="px"&&d.height.val>0&&(b=b*100/d.height.val);var _=d.height.bottom.value;d.height.bottom.units==="px"&&d.height.val>0&&(_=_*100/d.height.val);var E=g(d.width.val-h.w,w,x),C=E.biasDiff,B=E.biasComplementDiff,N=g(d.height.val-h.h,b,_),A=N.biasDiff,z=N.biasComplementDiff;u.autoPadding=m(h.w,h.h,o.pstyle("padding"),o.pstyle("padding-relative-to").value),u.autoWidth=Math.max(h.w,d.width.val),p.x=(-C+h.x1+h.x2+B)/2,u.autoHeight=Math.max(h.h,d.height.val),p.y=(-A+h.y1+h.y2+z)/2}for(var n=0;n<this.length;n++){var a=this[n],i=a._private;(!i.compoundBoundsClean||r)&&(t(a),e.batching()||(i.compoundBoundsClean=!0))}return this};var rn=function(e){return e===1/0||e===-1/0?0:e},hn=function(e,t,n,a,i){a-t===0||i-n===0||t==null||n==null||a==null||i==null||(e.x1=t<e.x1?t:e.x1,e.x2=a>e.x2?a:e.x2,e.y1=n<e.y1?n:e.y1,e.y2=i>e.y2?i:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},ha=function(e,t){return t==null?e:hn(e,t.x1,t.y1,t.x2,t.y2)},Xs=function(e,t,n){return Mr(e,t,n)},Yu=function(e,t,n){if(!t.cy().headless()){var a=t._private,i=a.rstyle,o=i.arrowWidth/2,u=t.pstyle(n+"-arrow-shape").value,f,c;if(u!=="none"){n==="source"?(f=i.srcX,c=i.srcY):n==="target"?(f=i.tgtX,c=i.tgtY):(f=i.midX,c=i.midY);var d=a.arrowBounds=a.arrowBounds||{},h=d[n]=d[n]||{};h.x1=f-o,h.y1=c-o,h.x2=f+o,h.y2=c+o,h.w=h.x2-h.x1,h.h=h.y2-h.y1,sl(h,1),hn(e,h.x1,h.y1,h.x2,h.y2)}}},fh=function(e,t,n){if(!t.cy().headless()){var a;n?a=n+"-":a="";var i=t._private,o=i.rstyle,u=t.pstyle(a+"label").strValue;if(u){var f=t.pstyle("text-halign"),c=t.pstyle("text-valign"),d=Xs(o,"labelWidth",n),h=Xs(o,"labelHeight",n),p=Xs(o,"labelX",n),g=Xs(o,"labelY",n),m=t.pstyle(a+"text-margin-x").pfValue,w=t.pstyle(a+"text-margin-y").pfValue,x=t.isEdge(),b=t.pstyle(a+"text-rotation"),_=t.pstyle("text-outline-width").pfValue,E=t.pstyle("text-border-width").pfValue,C=E/2,B=t.pstyle("text-background-padding").pfValue,N=2,A=h,z=d,M=z/2,V=A/2,q,I,F,T;if(x)q=p-M,I=p+M,F=g-V,T=g+V;else{switch(f.value){case"left":q=p-z,I=p;break;case"center":q=p-M,I=p+M;break;case"right":q=p,I=p+z;break}switch(c.value){case"top":F=g-A,T=g;break;case"center":F=g-V,T=g+V;break;case"bottom":F=g,T=g+A;break}}var H=m-Math.max(_,C)-B-N,Q=m+Math.max(_,C)+B+N,W=w-Math.max(_,C)-B-N,Z=w+Math.max(_,C)+B+N;q+=H,I+=Q,F+=W,T+=Z;var X=n||"main",te=i.labelBounds,L=te[X]=te[X]||{};L.x1=q,L.y1=F,L.x2=I,L.y2=T,L.w=I-q,L.h=T-F,L.leftPad=H,L.rightPad=Q,L.topPad=W,L.botPad=Z;var U=x&&b.strValue==="autorotate",oe=b.pfValue!=null&&b.pfValue!==0;if(U||oe){var ie=U?Xs(i.rstyle,"labelAngle",n):b.pfValue,ne=Math.cos(ie),we=Math.sin(ie),Te=(q+I)/2,ke=(F+T)/2;if(!x){switch(f.value){case"left":Te=I;break;case"right":Te=q;break}switch(c.value){case"top":ke=T;break;case"bottom":ke=F;break}}var ge=function(Y,K){return Y=Y-Te,K=K-ke,{x:Y*ne-K*we+Te,y:Y*we+K*ne+ke}},fe=ge(q,F),de=ge(q,T),be=ge(I,F),Pe=ge(I,T);q=Math.min(fe.x,de.x,be.x,Pe.x),I=Math.max(fe.x,de.x,be.x,Pe.x),F=Math.min(fe.y,de.y,be.y,Pe.y),T=Math.max(fe.y,de.y,be.y,Pe.y)}var D=X+"Rot",ve=te[D]=te[D]||{};ve.x1=q,ve.y1=F,ve.x2=I,ve.y2=T,ve.w=I-q,ve.h=T-F,hn(e,q,F,I,T),hn(i.labelBounds.all,q,F,I,T)}return e}},Xy=function(e,t){if(!t.cy().headless()){var n=t.pstyle("outline-opacity").value,a=t.pstyle("outline-width").value,i=t.pstyle("outline-offset").value,o=a+i;X1(e,t,n,o,"outside",o/2)}},X1=function(e,t,n,a,i,o){if(!(n===0||a<=0||i==="inside")){var u=t.cy(),f=t.pstyle("shape").value,c=u.renderer().nodeShapes[f],d=t.position(),h=d.x,p=d.y,g=t.width(),m=t.height();if(c.hasMiterBounds){i==="center"&&(a/=2);var w=c.miterBounds(h,p,g,m,a);ha(e,w)}else o!=null&&o>0&&ol(e,[o,o,o,o])}},aC=function(e,t){if(!t.cy().headless()){var n=t.pstyle("border-opacity").value,a=t.pstyle("border-width").pfValue,i=t.pstyle("border-position").value;X1(e,t,n,a,i)}},iC=function(e,t){var n=e._private.cy,a=n.styleEnabled(),i=n.headless(),o=Rr(),u=e._private,f=e.isNode(),c=e.isEdge(),d,h,p,g,m,w,x=u.rstyle,b=f&&a?e.pstyle("bounds-expansion").pfValue:[0],_=function(pe){return pe.pstyle("display").value!=="none"},E=!a||_(e)&&(!c||_(e.source())&&_(e.target()));if(E){var C=0,B=0;a&&t.includeOverlays&&(C=e.pstyle("overlay-opacity").value,C!==0&&(B=e.pstyle("overlay-padding").value));var N=0,A=0;a&&t.includeUnderlays&&(N=e.pstyle("underlay-opacity").value,N!==0&&(A=e.pstyle("underlay-padding").value));var z=Math.max(B,A),M=0,V=0;if(a&&(M=e.pstyle("width").pfValue,V=M/2),f&&t.includeNodes){var q=e.position();m=q.x,w=q.y;var I=e.outerWidth(),F=I/2,T=e.outerHeight(),H=T/2;d=m-F,h=m+F,p=w-H,g=w+H,hn(o,d,p,h,g),a&&Xy(o,e),a&&t.includeOutlines&&!i&&Xy(o,e),a&&aC(o,e)}else if(c&&t.includeEdges)if(a&&!i){var Q=e.pstyle("curve-style").strValue;if(d=Math.min(x.srcX,x.midX,x.tgtX),h=Math.max(x.srcX,x.midX,x.tgtX),p=Math.min(x.srcY,x.midY,x.tgtY),g=Math.max(x.srcY,x.midY,x.tgtY),d-=V,h+=V,p-=V,g+=V,hn(o,d,p,h,g),Q==="haystack"){var W=x.haystackPts;if(W&&W.length===2){if(d=W[0].x,p=W[0].y,h=W[1].x,g=W[1].y,d>h){var Z=d;d=h,h=Z}if(p>g){var X=p;p=g,g=X}hn(o,d-V,p-V,h+V,g+V)}}else if(Q==="bezier"||Q==="unbundled-bezier"||va(Q,"segments")||va(Q,"taxi")){var te;switch(Q){case"bezier":case"unbundled-bezier":te=x.bezierPts;break;case"segments":case"taxi":case"round-segments":case"round-taxi":te=x.linePts;break}if(te!=null)for(var L=0;L<te.length;L++){var U=te[L];d=U.x-V,h=U.x+V,p=U.y-V,g=U.y+V,hn(o,d,p,h,g)}}}else{var oe=e.source(),ie=oe.position(),ne=e.target(),we=ne.position();if(d=ie.x,h=we.x,p=ie.y,g=we.y,d>h){var Te=d;d=h,h=Te}if(p>g){var ke=p;p=g,g=ke}d-=V,h+=V,p-=V,g+=V,hn(o,d,p,h,g)}if(a&&t.includeEdges&&c&&(Yu(o,e,"mid-source"),Yu(o,e,"mid-target"),Yu(o,e,"source"),Yu(o,e,"target")),a){var ge=e.pstyle("ghost").value==="yes";if(ge){var fe=e.pstyle("ghost-offset-x").pfValue,de=e.pstyle("ghost-offset-y").pfValue;hn(o,o.x1+fe,o.y1+de,o.x2+fe,o.y2+de)}}var be=u.bodyBounds=u.bodyBounds||{};Nm(be,o),ol(be,b),sl(be,1),a&&(d=o.x1,h=o.x2,p=o.y1,g=o.y2,hn(o,d-z,p-z,h+z,g+z));var Pe=u.overlayBounds=u.overlayBounds||{};Nm(Pe,o),ol(Pe,b),sl(Pe,1);var D=u.labelBounds=u.labelBounds||{};D.all!=null?UE(D.all):D.all=Rr(),a&&t.includeLabels&&(t.includeMainLabels&&fh(o,e,null),c&&(t.includeSourceLabels&&fh(o,e,"source"),t.includeTargetLabels&&fh(o,e,"target")))}return o.x1=rn(o.x1),o.y1=rn(o.y1),o.x2=rn(o.x2),o.y2=rn(o.y2),o.w=rn(o.x2-o.x1),o.h=rn(o.y2-o.y1),o.w>0&&o.h>0&&E&&(ol(o,b),sl(o,1)),o},Y1=function(e){var t=0,n=function(o){return(o?1:0)<<t++},a=0;return a+=n(e.incudeNodes),a+=n(e.includeEdges),a+=n(e.includeLabels),a+=n(e.includeMainLabels),a+=n(e.includeSourceLabels),a+=n(e.includeTargetLabels),a+=n(e.includeOverlays),a+=n(e.includeOutlines),a},Q1=function(e){var t=function(u){return Math.round(u)};if(e.isEdge()){var n=e.source().position(),a=e.target().position();return Rm([t(n.x),t(n.y),t(a.x),t(a.y)])}else{var i=e.position();return Rm([t(i.x),t(i.y)])}},Yy=function(e,t){var n=e._private,a,i=e.isEdge(),o=t==null?Qy:Y1(t),u=o===Qy;if(n.bbCache==null?(a=iC(e,mo),n.bbCache=a,n.bbCachePosKey=Q1(e)):a=n.bbCache,!u){var f=e.isNode();a=Rr(),(t.includeNodes&&f||t.includeEdges&&!f)&&(t.includeOverlays?ha(a,n.overlayBounds):ha(a,n.bodyBounds)),t.includeLabels&&(t.includeMainLabels&&(!i||t.includeSourceLabels&&t.includeTargetLabels)?ha(a,n.labelBounds.all):(t.includeMainLabels&&ha(a,n.labelBounds.mainRot),t.includeSourceLabels&&ha(a,n.labelBounds.sourceRot),t.includeTargetLabels&&ha(a,n.labelBounds.targetRot))),a.w=a.x2-a.x1,a.h=a.y2-a.y1}return a},mo={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},Qy=Y1(mo),Jy=dr(mo);Ta.boundingBox=function(r){var e,t=r===void 0||r.useCache===void 0||r.useCache===!0,n=Xi(function(d){var h=d._private;return h.bbCache==null||h.styleDirty||h.bbCachePosKey!==Q1(d)},function(d){return d.id()});if(t&&this.length===1&&!n(this[0]))r===void 0?r=mo:r=Jy(r),e=Yy(this[0],r);else{e=Rr(),r=r||mo;var a=Jy(r),i=this,o=i.cy(),u=o.styleEnabled();this.edges().forEach(n),this.nodes().forEach(n),u&&this.recalculateRenderedStyle(t),this.updateCompoundBounds(!t);for(var f=0;f<i.length;f++){var c=i[f];n(c)&&c.dirtyBoundingBoxCache(),ha(e,Yy(c,a))}}return e.x1=rn(e.x1),e.y1=rn(e.y1),e.x2=rn(e.x2),e.y2=rn(e.y2),e.w=rn(e.x2-e.x1),e.h=rn(e.y2-e.y1),e};Ta.dirtyBoundingBoxCache=function(){for(var r=0;r<this.length;r++){var e=this[r]._private;e.bbCache=null,e.bbCachePosKey=null,e.bodyBounds=null,e.overlayBounds=null,e.labelBounds.all=null,e.labelBounds.source=null,e.labelBounds.target=null,e.labelBounds.main=null,e.labelBounds.sourceRot=null,e.labelBounds.targetRot=null,e.labelBounds.mainRot=null,e.arrowBounds.source=null,e.arrowBounds.target=null,e.arrowBounds["mid-source"]=null,e.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this};Ta.boundingBoxAt=function(r){var e=this.nodes(),t=this.cy(),n=t.hasCompoundNodes(),a=t.collection();if(n&&(a=e.filter(function(c){return c.isParent()}),e=e.not(a)),dt(r)){var i=r;r=function(){return i}}var o=function(d,h){return d._private.bbAtOldPos=r(d,h)},u=function(d){return d._private.bbAtOldPos};t.startBatch(),e.forEach(o).silentPositions(r),n&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0));var f=FE(this.boundingBox({useCache:!1}));return e.silentPositions(u),n&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0)),t.endBatch(),f};Zi.boundingbox=Zi.bb=Zi.boundingBox;Zi.renderedBoundingbox=Zi.renderedBoundingBox;var sC=Ta,ao,Bo;ao=Bo={};var J1=function(e){e.uppercaseName=vm(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=vm(e.outerName),ao[e.name]=function(){var n=this[0],a=n._private,i=a.cy,o=i._private.styleEnabled;if(n)if(o){if(n.isParent())return n.updateCompoundBounds(),a[e.autoName]||0;var u=n.pstyle(e.name);switch(u.strValue){case"label":return n.recalculateRenderedStyle(),a.rstyle[e.labelName]||0;default:return u.pfValue}}else return 1},ao["outer"+e.uppercaseName]=function(){var n=this[0],a=n._private,i=a.cy,o=i._private.styleEnabled;if(n)if(o){var u=n[e.name](),f=n.pstyle("border-position").value,c;f==="center"?c=n.pstyle("border-width").pfValue:f==="outside"?c=2*n.pstyle("border-width").pfValue:c=0;var d=2*n.padding();return u+c+d}else return 1},ao["rendered"+e.uppercaseName]=function(){var n=this[0];if(n){var a=n[e.name]();return a*this.cy().zoom()}},ao["rendered"+e.uppercaseOuterName]=function(){var n=this[0];if(n){var a=n[e.outerName]();return a*this.cy().zoom()}}};J1({name:"width"});J1({name:"height"});Bo.padding=function(){var r=this[0],e=r._private;return r.isParent()?(r.updateCompoundBounds(),e.autoPadding!==void 0?e.autoPadding:r.pstyle("padding").pfValue):r.pstyle("padding").pfValue};Bo.paddedHeight=function(){var r=this[0];return r.height()+2*r.padding()};Bo.paddedWidth=function(){var r=this[0];return r.width()+2*r.padding()};var oC=Bo,uC=function(e,t){if(e.isEdge()&&e.takesUpSpace())return t(e)},lC=function(e,t){if(e.isEdge()&&e.takesUpSpace()){var n=e.cy();return Ll(t(e),n.zoom(),n.pan())}},fC=function(e,t){if(e.isEdge()&&e.takesUpSpace()){var n=e.cy(),a=n.pan(),i=n.zoom();return t(e).map(function(o){return Ll(o,i,a)})}},cC=function(e){return e.renderer().getControlPoints(e)},dC=function(e){return e.renderer().getSegmentPoints(e)},hC=function(e){return e.renderer().getSourceEndpoint(e)},vC=function(e){return e.renderer().getTargetEndpoint(e)},pC=function(e){return e.renderer().getEdgeMidpoint(e)},e0={controlPoints:{get:cC,mult:!0},segmentPoints:{get:dC,mult:!0},sourceEndpoint:{get:hC},targetEndpoint:{get:vC},midpoint:{get:pC}},gC=function(e){return"rendered"+e[0].toUpperCase()+e.substr(1)},mC=Object.keys(e0).reduce(function(r,e){var t=e0[e],n=gC(e);return r[e]=function(){return uC(this,t.get)},t.mult?r[n]=function(){return fC(this,t.get)}:r[n]=function(){return lC(this,t.get)},r},{}),yC=et({},nC,sC,oC,mC);/*!
Event object based on jQuery events, MIT license

https://jquery.org/license/
https://tldrlegal.com/license/mit-license
https://github.com/jquery/jquery/blob/master/src/event.js
*/var ew=function(e,t){this.recycle(e,t)};function Ys(){return!1}function Qu(){return!0}ew.prototype={instanceString:function(){return"event"},recycle:function(e,t){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=Ys,e!=null&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?Qu:Ys):e!=null&&e.type?t=e:this.type=e,t!=null&&(this.originalEvent=t.originalEvent,this.type=t.type!=null?t.type:this.type,this.cy=t.cy,this.target=t.target,this.position=t.position,this.renderedPosition=t.renderedPosition,this.namespace=t.namespace,this.layout=t.layout),this.cy!=null&&this.position!=null&&this.renderedPosition==null){var n=this.position,a=this.cy.zoom(),i=this.cy.pan();this.renderedPosition={x:n.x*a+i.x,y:n.y*a+i.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=Qu;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=Qu;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=Qu,this.stopPropagation()},isDefaultPrevented:Ys,isPropagationStopped:Ys,isImmediatePropagationStopped:Ys};var tw=/^([^.]+)(\.(?:[^.]+))?$/,wC=".*",rw={qualifierCompare:function(e,t){return e===t},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},t0=Object.keys(rw),xC={};function $l(){for(var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:xC,e=arguments.length>1?arguments[1]:void 0,t=0;t<t0.length;t++){var n=t0[t];this[n]=r[n]||rw[n]}this.context=e||this.context,this.listeners=[],this.emitting=0}var Sa=$l.prototype,nw=function(e,t,n,a,i,o,u){zt(a)&&(i=a,a=null),u&&(o==null?o=u:o=et({},o,u));for(var f=wt(n)?n:n.split(/\s+/),c=0;c<f.length;c++){var d=f[c];if(!wa(d)){var h=d.match(tw);if(h){var p=h[1],g=h[2]?h[2]:null,m=t(e,d,p,g,a,i,o);if(m===!1)break}}}},r0=function(e,t){return e.addEventFields(e.context,t),new ew(t.type,t)},bC=function(e,t,n){if(T_(n)){t(e,n);return}else if(dt(n)){t(e,r0(e,n));return}for(var a=wt(n)?n:n.split(/\s+/),i=0;i<a.length;i++){var o=a[i];if(!wa(o)){var u=o.match(tw);if(u){var f=u[1],c=u[2]?u[2]:null,d=r0(e,{type:f,namespace:c,target:e.context});t(e,d)}}}};Sa.on=Sa.addListener=function(r,e,t,n,a){return nw(this,function(i,o,u,f,c,d,h){zt(d)&&i.listeners.push({event:o,callback:d,type:u,namespace:f,qualifier:c,conf:h})},r,e,t,n,a),this};Sa.one=function(r,e,t,n){return this.on(r,e,t,n,{one:!0})};Sa.removeListener=Sa.off=function(r,e,t,n){var a=this;this.emitting!==0&&(this.listeners=lE(this.listeners));for(var i=this.listeners,o=function(c){var d=i[c];nw(a,function(h,p,g,m,w,x){if((d.type===g||r==="*")&&(!m&&d.namespace!==".*"||d.namespace===m)&&(!w||h.qualifierCompare(d.qualifier,w))&&(!x||d.callback===x))return i.splice(c,1),!1},r,e,t,n)},u=i.length-1;u>=0;u--)o(u);return this};Sa.removeAllListeners=function(){return this.removeListener("*")};Sa.emit=Sa.trigger=function(r,e,t){var n=this.listeners,a=n.length;return this.emitting++,wt(e)||(e=[e]),bC(this,function(i,o){t!=null&&(n=[{event:o.event,type:o.type,namespace:o.namespace,callback:t}],a=n.length);for(var u=function(){var d=n[f];if(d.type===o.type&&(!d.namespace||d.namespace===o.namespace||d.namespace===wC)&&i.eventMatches(i.context,d,o)){var h=[o];e!=null&&cE(h,e),i.beforeEmit(i.context,d,o),d.conf&&d.conf.one&&(i.listeners=i.listeners.filter(function(m){return m!==d}));var p=i.callbackContext(i.context,d,o),g=d.callback.apply(p,h);i.afterEmit(i.context,d,o),g===!1&&(o.stopPropagation(),o.preventDefault())}},f=0;f<a;f++)u();i.bubble(i.context)&&!o.isPropagationStopped()&&i.parent(i.context).emit(o,e)},r),this.emitting--,this};var _C={qualifierCompare:function(e,t){return e==null||t==null?e==null&&t==null:e.sameText(t)},eventMatches:function(e,t,n){var a=t.qualifier;return a!=null?e!==n.target&&So(n.target)&&a.matches(n.target):!0},addEventFields:function(e,t){t.cy=e.cy(),t.target=e},callbackContext:function(e,t,n){return t.qualifier!=null?n.target:e},beforeEmit:function(e,t){t.conf&&t.conf.once&&t.conf.onceCollection.removeListener(t.event,t.qualifier,t.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},Ju=function(e){return Ye(e)?new _a(e):e},aw={createEmitter:function(){for(var e=0;e<this.length;e++){var t=this[e],n=t._private;n.emitter||(n.emitter=new $l(_C,t))}return this},emitter:function(){return this._private.emitter},on:function(e,t,n){for(var a=Ju(t),i=0;i<this.length;i++){var o=this[i];o.emitter().on(e,a,n)}return this},removeListener:function(e,t,n){for(var a=Ju(t),i=0;i<this.length;i++){var o=this[i];o.emitter().removeListener(e,a,n)}return this},removeAllListeners:function(){for(var e=0;e<this.length;e++){var t=this[e];t.emitter().removeAllListeners()}return this},one:function(e,t,n){for(var a=Ju(t),i=0;i<this.length;i++){var o=this[i];o.emitter().one(e,a,n)}return this},once:function(e,t,n){for(var a=Ju(t),i=0;i<this.length;i++){var o=this[i];o.emitter().on(e,a,n,{once:!0,onceCollection:this})}},emit:function(e,t){for(var n=0;n<this.length;n++){var a=this[n];a.emitter().emit(e,t)}return this},emitAndNotify:function(e,t){if(this.length!==0)return this.cy().notify(e,this),this.emit(e,t),this}};pt.eventAliasesOn(aw);var iw={nodes:function(e){return this.filter(function(t){return t.isNode()}).filter(e)},edges:function(e){return this.filter(function(t){return t.isEdge()}).filter(e)},byGroup:function(){for(var e=this.spawn(),t=this.spawn(),n=0;n<this.length;n++){var a=this[n];a.isNode()?e.push(a):t.push(a)}return{nodes:e,edges:t}},filter:function(e,t){if(e===void 0)return this;if(Ye(e)||Gr(e))return new _a(e).filter(this);if(zt(e)){for(var n=this.spawn(),a=this,i=0;i<a.length;i++){var o=a[i],u=t?e.apply(t,[o,i,a]):e(o,i,a);u&&n.push(o)}return n}return this.spawn()},not:function(e){if(e){Ye(e)&&(e=this.filter(e));for(var t=this.spawn(),n=0;n<this.length;n++){var a=this[n],i=e.has(a);i||t.push(a)}return t}else return this},absoluteComplement:function(){var e=this.cy();return e.mutableElements().not(this)},intersect:function(e){if(Ye(e)){var t=e;return this.filter(t)}for(var n=this.spawn(),a=this,i=e,o=this.length<e.length,u=o?a:i,f=o?i:a,c=0;c<u.length;c++){var d=u[c];f.has(d)&&n.push(d)}return n},xor:function(e){var t=this._private.cy;Ye(e)&&(e=t.$(e));var n=this.spawn(),a=this,i=e,o=function(f,c){for(var d=0;d<f.length;d++){var h=f[d],p=h._private.data.id,g=c.hasElementWithId(p);g||n.push(h)}};return o(a,i),o(i,a),n},diff:function(e){var t=this._private.cy;Ye(e)&&(e=t.$(e));var n=this.spawn(),a=this.spawn(),i=this.spawn(),o=this,u=e,f=function(d,h,p){for(var g=0;g<d.length;g++){var m=d[g],w=m._private.data.id,x=h.hasElementWithId(w);x?i.merge(m):p.push(m)}};return f(o,u,n),f(u,o,a),{left:n,right:a,both:i}},add:function(e){var t=this._private.cy;if(!e)return this;if(Ye(e)){var n=e;e=t.mutableElements().filter(n)}for(var a=this.spawnSelf(),i=0;i<e.length;i++){var o=e[i],u=!this.has(o);u&&a.push(o)}return a},merge:function(e){var t=this._private,n=t.cy;if(!e)return this;if(e&&Ye(e)){var a=e;e=n.mutableElements().filter(a)}for(var i=t.map,o=0;o<e.length;o++){var u=e[o],f=u._private.data.id,c=!i.has(f);if(c){var d=this.length++;this[d]=u,i.set(f,{ele:u,index:d})}}return this},unmergeAt:function(e){var t=this[e],n=t.id(),a=this._private,i=a.map;this[e]=void 0,i.delete(n);var o=e===this.length-1;if(this.length>1&&!o){var u=this.length-1,f=this[u],c=f._private.data.id;this[u]=void 0,this[e]=f,i.set(c,{ele:f,index:e})}return this.length--,this},unmergeOne:function(e){e=e[0];var t=this._private,n=e._private.data.id,a=t.map,i=a.get(n);if(!i)return this;var o=i.index;return this.unmergeAt(o),this},unmerge:function(e){var t=this._private.cy;if(!e)return this;if(e&&Ye(e)){var n=e;e=t.mutableElements().filter(n)}for(var a=0;a<e.length;a++)this.unmergeOne(e[a]);return this},unmergeBy:function(e){for(var t=this.length-1;t>=0;t--){var n=this[t];e(n)&&this.unmergeAt(t)}return this},map:function(e,t){for(var n=[],a=this,i=0;i<a.length;i++){var o=a[i],u=t?e.apply(t,[o,i,a]):e(o,i,a);n.push(u)}return n},reduce:function(e,t){for(var n=t,a=this,i=0;i<a.length;i++)n=e(n,a[i],i,a);return n},max:function(e,t){for(var n=-1/0,a,i=this,o=0;o<i.length;o++){var u=i[o],f=t?e.apply(t,[u,o,i]):e(u,o,i);f>n&&(n=f,a=u)}return{value:n,ele:a}},min:function(e,t){for(var n=1/0,a,i=this,o=0;o<i.length;o++){var u=i[o],f=t?e.apply(t,[u,o,i]):e(u,o,i);f<n&&(n=f,a=u)}return{value:n,ele:a}}},vt=iw;vt.u=vt["|"]=vt["+"]=vt.union=vt.or=vt.add;vt["\\"]=vt["!"]=vt["-"]=vt.difference=vt.relativeComplement=vt.subtract=vt.not;vt.n=vt["&"]=vt["."]=vt.and=vt.intersection=vt.intersect;vt["^"]=vt["(+)"]=vt["(-)"]=vt.symmetricDifference=vt.symdiff=vt.xor;vt.fnFilter=vt.filterFn=vt.stdFilter=vt.filter;vt.complement=vt.abscomp=vt.absoluteComplement;var EC={isNode:function(){return this.group()==="nodes"},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},sw=function(e,t){var n=e.cy(),a=n.hasCompoundNodes();function i(d){var h=d.pstyle("z-compound-depth");return h.value==="auto"?a?d.zDepth():0:h.value==="bottom"?-1:h.value==="top"?Kh:0}var o=i(e)-i(t);if(o!==0)return o;function u(d){var h=d.pstyle("z-index-compare");return h.value==="auto"&&d.isNode()?1:0}var f=u(e)-u(t);if(f!==0)return f;var c=e.pstyle("z-index").value-t.pstyle("z-index").value;return c!==0?c:e.poolIndex()-t.poolIndex()},El={forEach:function(e,t){if(zt(e))for(var n=this.length,a=0;a<n;a++){var i=this[a],o=t?e.apply(t,[i,a,this]):e(i,a,this);if(o===!1)break}return this},toArray:function(){for(var e=[],t=0;t<this.length;t++)e.push(this[t]);return e},slice:function(e,t){var n=[],a=this.length;t==null&&(t=a),e==null&&(e=0),e<0&&(e=a+e),t<0&&(t=a+t);for(var i=e;i>=0&&i<t&&i<a;i++)n.push(this[i]);return this.spawn(n)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return this.length===0},nonempty:function(){return!this.empty()},sort:function(e){if(!zt(e))return this;var t=this.toArray().sort(e);return this.spawn(t)},sortByZIndex:function(){return this.sort(sw)},zDepth:function(){var e=this[0];if(e){var t=e._private,n=t.group;if(n==="nodes"){var a=t.data.parent?e.parents().size():0;return e.isParent()?a:Kh-1}else{var i=t.source,o=t.target,u=i.zDepth(),f=o.zDepth();return Math.max(u,f,0)}}}};El.each=El.forEach;var SC=function(){var e="undefined",t=(typeof Symbol>"u"?"undefined":Qt(Symbol))!=e&&Qt(Symbol.iterator)!=e;t&&(El[Symbol.iterator]=function(){var n=this,a={value:void 0,done:!1},i=0,o=this.length;return a1({next:function(){return i<o?a.value=n[i++]:(a.value=void 0,a.done=!0),a}},Symbol.iterator,function(){return this})})};SC();var kC=dr({nodeDimensionsIncludeLabels:!1}),ll={layoutDimensions:function(e){e=kC(e);var t;if(!this.takesUpSpace())t={w:0,h:0};else if(e.nodeDimensionsIncludeLabels){var n=this.boundingBox();t={w:n.w,h:n.h}}else t={w:this.outerWidth(),h:this.outerHeight()};return(t.w===0||t.h===0)&&(t.w=t.h=1),t},layoutPositions:function(e,t,n){var a=this.nodes().filter(function(B){return!B.isParent()}),i=this.cy(),o=t.eles,u=function(N){return N.id()},f=Xi(n,u);e.emit({type:"layoutstart",layout:e}),e.animations=[];var c=function(N,A,z){var M={x:A.x1+A.w/2,y:A.y1+A.h/2},V={x:(z.x-M.x)*N,y:(z.y-M.y)*N};return{x:M.x+V.x,y:M.y+V.y}},d=t.spacingFactor&&t.spacingFactor!==1,h=function(){if(!d)return null;for(var N=Rr(),A=0;A<a.length;A++){var z=a[A],M=f(z,A);S1(N,M.x,M.y)}return N},p=h(),g=Xi(function(B,N){var A=f(B,N);if(d){var z=Math.abs(t.spacingFactor);A=c(z,p,A)}return t.transform!=null&&(A=t.transform(B,A)),A},u);if(t.animate){for(var m=0;m<a.length;m++){var w=a[m],x=g(w,m),b=t.animateFilter==null||t.animateFilter(w,m);if(b){var _=w.animation({position:x,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(_)}else w.position(x)}if(t.fit){var E=i.animation({fit:{boundingBox:o.boundingBoxAt(g),padding:t.padding},duration:t.animationDuration,easing:t.animationEasing});e.animations.push(E)}else if(t.zoom!==void 0&&t.pan!==void 0){var C=i.animation({zoom:t.zoom,pan:t.pan,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(C)}e.animations.forEach(function(B){return B.play()}),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),es.all(e.animations.map(function(B){return B.promise()})).then(function(){e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e})})}else a.positions(g),t.fit&&i.fit(t.eles,t.padding),t.zoom!=null&&i.zoom(t.zoom),t.pan&&i.pan(t.pan),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){var t=this.cy();return t.makeLayout(et({},e,{eles:this}))}};ll.createLayout=ll.makeLayout=ll.layout;function ow(r,e,t){var n=t._private,a=n.styleCache=n.styleCache||[],i;return(i=a[r])!=null||(i=a[r]=e(t)),i}function Vl(r,e){return r=Qa(r),function(n){return ow(r,e,n)}}function jl(r,e){r=Qa(r);var t=function(a){return e.call(a)};return function(){var a=this[0];if(a)return ow(r,t,a)}}var fr={recalculateRenderedStyle:function(e){var t=this.cy(),n=t.renderer(),a=t.styleEnabled();return n&&a&&n.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e=this.cy(),t=function(i){return i._private.styleCache=null};if(e.hasCompoundNodes()){var n;n=this.spawnSelf().merge(this.descendants()).merge(this.parents()),n.merge(n.connectedEdges()),n.forEach(t)}else this.forEach(function(a){t(a),a.connectedEdges().forEach(t)});return this},updateStyle:function(e){var t=this._private.cy;if(!t.styleEnabled())return this;if(t.batching()){var n=t._private.batchStyleEles;return n.merge(this),this}var a=t.hasCompoundNodes(),i=this;e=!!(e||e===void 0),a&&(i=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var o=i;return e?o.emitAndNotify("style"):o.emit("style"),i.forEach(function(u){return u._private.styleDirty=!0}),this},cleanStyle:function(){var e=this.cy();if(e.styleEnabled())for(var t=0;t<this.length;t++){var n=this[t];n._private.styleDirty&&(n._private.styleDirty=!1,e.style().apply(n))}},parsedStyle:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this[0],a=n.cy();if(a.styleEnabled()&&n){n._private.styleDirty&&(n._private.styleDirty=!1,a.style().apply(n));var i=n._private.style[e];return i??(t?a.style().getDefaultProperty(e):null)}},numericStyle:function(e){var t=this[0];if(t.cy().styleEnabled()&&t){var n=t.pstyle(e);return n.pfValue!==void 0?n.pfValue:n.value}},numericStyleUnits:function(e){var t=this[0];if(t.cy().styleEnabled()&&t)return t.pstyle(e).units},renderedStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=this[0];if(n)return t.style().getRenderedStyle(n,e)},style:function(e,t){var n=this.cy();if(!n.styleEnabled())return this;var a=!1,i=n.style();if(dt(e)){var o=e;i.applyBypass(this,o,a),this.emitAndNotify("style")}else if(Ye(e))if(t===void 0){var u=this[0];return u?i.getStylePropertyValue(u,e):void 0}else i.applyBypass(this,e,t,a),this.emitAndNotify("style");else if(e===void 0){var f=this[0];return f?i.getRawStyle(f):void 0}return this},removeStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=!1,a=t.style(),i=this;if(e===void 0)for(var o=0;o<i.length;o++){var u=i[o];a.removeAllBypasses(u,n)}else{e=e.split(/\s+/);for(var f=0;f<i.length;f++){var c=i[f];a.removeBypasses(c,e,n)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var t=e.hasCompoundNodes(),n=this[0];if(n){var a=n._private,i=n.pstyle("opacity").value;if(!t)return i;var o=a.data.parent?n.parents():null;if(o)for(var u=0;u<o.length;u++){var f=o[u],c=f.pstyle("opacity").value;i=c*i}return i}},transparent:function(){var e=this.cy();if(!e.styleEnabled())return!1;var t=this[0],n=t.cy().hasCompoundNodes();if(t)return n?t.effectiveOpacity()===0:t.pstyle("opacity").value===0},backgrounding:function(){var e=this.cy();if(!e.styleEnabled())return!1;var t=this[0];return!!t._private.backgrounding}};function ch(r,e){var t=r._private,n=t.data.parent?r.parents():null;if(n)for(var a=0;a<n.length;a++){var i=n[a];if(!e(i))return!1}return!0}function sv(r){var e=r.ok,t=r.edgeOkViaNode||r.ok,n=r.parentOk||r.ok;return function(){var a=this.cy();if(!a.styleEnabled())return!0;var i=this[0],o=a.hasCompoundNodes();if(i){var u=i._private;if(!e(i))return!1;if(i.isNode())return!o||ch(i,n);var f=u.source,c=u.target;return t(f)&&(!o||ch(f,t))&&(f===c||t(c)&&(!o||ch(c,t)))}}}var ts=Vl("eleTakesUpSpace",function(r){return r.pstyle("display").value==="element"&&r.width()!==0&&(r.isNode()?r.height()!==0:!0)});fr.takesUpSpace=jl("takesUpSpace",sv({ok:ts}));var CC=Vl("eleInteractive",function(r){return r.pstyle("events").value==="yes"&&r.pstyle("visibility").value==="visible"&&ts(r)}),TC=Vl("parentInteractive",function(r){return r.pstyle("visibility").value==="visible"&&ts(r)});fr.interactive=jl("interactive",sv({ok:CC,parentOk:TC,edgeOkViaNode:ts}));fr.noninteractive=function(){var r=this[0];if(r)return!r.interactive()};var PC=Vl("eleVisible",function(r){return r.pstyle("visibility").value==="visible"&&r.pstyle("opacity").pfValue!==0&&ts(r)}),RC=ts;fr.visible=jl("visible",sv({ok:PC,edgeOkViaNode:RC}));fr.hidden=function(){var r=this[0];if(r)return!r.visible()};fr.isBundledBezier=jl("isBundledBezier",function(){return this.cy().styleEnabled()?!this.removed()&&this.pstyle("curve-style").value==="bezier"&&this.takesUpSpace():!1});fr.bypass=fr.css=fr.style;fr.renderedCss=fr.renderedStyle;fr.removeBypass=fr.removeCss=fr.removeStyle;fr.pstyle=fr.parsedStyle;var ya={};function n0(r){return function(){var e=arguments,t=[];if(e.length===2){var n=e[0],a=e[1];this.on(r.event,n,a)}else if(e.length===1&&zt(e[0])){var i=e[0];this.on(r.event,i)}else if(e.length===0||e.length===1&&wt(e[0])){for(var o=e.length===1?e[0]:null,u=0;u<this.length;u++){var f=this[u],c=!r.ableField||f._private[r.ableField],d=f._private[r.field]!=r.value;if(r.overrideAble){var h=r.overrideAble(f);if(h!==void 0&&(c=h,!h))return this}c&&(f._private[r.field]=r.value,d&&t.push(f))}var p=this.spawn(t);p.updateStyle(),p.emit(r.event),o&&p.emit(o)}return this}}function rs(r){ya[r.field]=function(){var e=this[0];if(e){if(r.overrideField){var t=r.overrideField(e);if(t!==void 0)return t}return e._private[r.field]}},ya[r.on]=n0({event:r.on,field:r.field,ableField:r.ableField,overrideAble:r.overrideAble,value:!0}),ya[r.off]=n0({event:r.off,field:r.field,ableField:r.ableField,overrideAble:r.overrideAble,value:!1})}rs({field:"locked",overrideField:function(e){return e.cy().autolock()?!0:void 0},on:"lock",off:"unlock"});rs({field:"grabbable",overrideField:function(e){return e.cy().autoungrabify()||e.pannable()?!1:void 0},on:"grabify",off:"ungrabify"});rs({field:"selected",ableField:"selectable",overrideAble:function(e){return e.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"});rs({field:"selectable",overrideField:function(e){return e.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"});ya.deselect=ya.unselect;ya.grabbed=function(){var r=this[0];if(r)return r._private.grabbed};rs({field:"active",on:"activate",off:"unactivate"});rs({field:"pannable",on:"panify",off:"unpanify"});ya.inactive=function(){var r=this[0];if(r)return!r._private.active};var xr={},a0=function(e){return function(n){for(var a=this,i=[],o=0;o<a.length;o++){var u=a[o];if(u.isNode()){for(var f=!1,c=u.connectedEdges(),d=0;d<c.length;d++){var h=c[d],p=h.source(),g=h.target();if(e.noIncomingEdges&&g===u&&p!==u||e.noOutgoingEdges&&p===u&&g!==u){f=!0;break}}f||i.push(u)}}return this.spawn(i,!0).filter(n)}},i0=function(e){return function(t){for(var n=this,a=[],i=0;i<n.length;i++){var o=n[i];if(o.isNode())for(var u=o.connectedEdges(),f=0;f<u.length;f++){var c=u[f],d=c.source(),h=c.target();e.outgoing&&d===o?(a.push(c),a.push(h)):e.incoming&&h===o&&(a.push(c),a.push(d))}}return this.spawn(a,!0).filter(t)}},s0=function(e){return function(t){for(var n=this,a=[],i={};;){var o=e.outgoing?n.outgoers():n.incomers();if(o.length===0)break;for(var u=!1,f=0;f<o.length;f++){var c=o[f],d=c.id();i[d]||(i[d]=!0,a.push(c),u=!0)}if(!u)break;n=o}return this.spawn(a,!0).filter(t)}};xr.clearTraversalCache=function(){for(var r=0;r<this.length;r++)this[r]._private.traversalCache=null};et(xr,{roots:a0({noIncomingEdges:!0}),leaves:a0({noOutgoingEdges:!0}),outgoers:nn(i0({outgoing:!0}),"outgoers"),successors:s0({outgoing:!0}),incomers:nn(i0({incoming:!0}),"incomers"),predecessors:s0({})});et(xr,{neighborhood:nn(function(r){for(var e=[],t=this.nodes(),n=0;n<t.length;n++)for(var a=t[n],i=a.connectedEdges(),o=0;o<i.length;o++){var u=i[o],f=u.source(),c=u.target(),d=a===f?c:f;d.length>0&&e.push(d[0]),e.push(u[0])}return this.spawn(e,!0).filter(r)},"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}});xr.neighbourhood=xr.neighborhood;xr.closedNeighbourhood=xr.closedNeighborhood;xr.openNeighbourhood=xr.openNeighborhood;et(xr,{source:nn(function(e){var t=this[0],n;return t&&(n=t._private.source||t.cy().collection()),n&&e?n.filter(e):n},"source"),target:nn(function(e){var t=this[0],n;return t&&(n=t._private.target||t.cy().collection()),n&&e?n.filter(e):n},"target"),sources:o0({attr:"source"}),targets:o0({attr:"target"})});function o0(r){return function(t){for(var n=[],a=0;a<this.length;a++){var i=this[a],o=i._private[r.attr];o&&n.push(o)}return this.spawn(n,!0).filter(t)}}et(xr,{edgesWith:nn(u0(),"edgesWith"),edgesTo:nn(u0({thisIsSrc:!0}),"edgesTo")});function u0(r){return function(t){var n=[],a=this._private.cy,i=r||{};Ye(t)&&(t=a.$(t));for(var o=0;o<t.length;o++)for(var u=t[o]._private.edges,f=0;f<u.length;f++){var c=u[f],d=c._private.data,h=this.hasElementWithId(d.source)&&t.hasElementWithId(d.target),p=t.hasElementWithId(d.source)&&this.hasElementWithId(d.target),g=h||p;g&&((i.thisIsSrc||i.thisIsTgt)&&(i.thisIsSrc&&!h||i.thisIsTgt&&!p)||n.push(c))}return this.spawn(n,!0)}}et(xr,{connectedEdges:nn(function(r){for(var e=[],t=this,n=0;n<t.length;n++){var a=t[n];if(a.isNode())for(var i=a._private.edges,o=0;o<i.length;o++){var u=i[o];e.push(u)}}return this.spawn(e,!0).filter(r)},"connectedEdges"),connectedNodes:nn(function(r){for(var e=[],t=this,n=0;n<t.length;n++){var a=t[n];a.isEdge()&&(e.push(a.source()[0]),e.push(a.target()[0]))}return this.spawn(e,!0).filter(r)},"connectedNodes"),parallelEdges:nn(l0(),"parallelEdges"),codirectedEdges:nn(l0({codirected:!0}),"codirectedEdges")});function l0(r){var e={codirected:!1};return r=et({},e,r),function(n){for(var a=[],i=this.edges(),o=r,u=0;u<i.length;u++)for(var f=i[u],c=f._private,d=c.source,h=d._private.data.id,p=c.data.target,g=d._private.edges,m=0;m<g.length;m++){var w=g[m],x=w._private.data,b=x.target,_=x.source,E=b===p&&_===h,C=h===b&&p===_;(o.codirected&&E||!o.codirected&&(E||C))&&a.push(w)}return this.spawn(a,!0).filter(n)}}et(xr,{components:function(e){var t=this,n=t.cy(),a=n.collection(),i=e==null?t.nodes():e.nodes(),o=[];e!=null&&i.empty()&&(i=e.sources());var u=function(d,h){a.merge(d),i.unmerge(d),h.merge(d)};if(i.empty())return t.spawn();var f=function(){var d=n.collection();o.push(d);var h=i[0];u(h,d),t.bfs({directed:!1,roots:h,visit:function(g){return u(g,d)}}),d.forEach(function(p){p.connectedEdges().forEach(function(g){t.has(g)&&d.has(g.source())&&d.has(g.target())&&d.merge(g)})})};do f();while(i.length>0);return o},component:function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}});xr.componentsOf=xr.components;var cr=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e===void 0){At("A collection must have a reference to the core");return}var i=new Fn,o=!1;if(!t)t=[];else if(t.length>0&&dt(t[0])&&!So(t[0])){o=!0;for(var u=[],f=new Ji,c=0,d=t.length;c<d;c++){var h=t[c];h.data==null&&(h.data={});var p=h.data;if(p.id==null)p.id=b1();else if(e.hasElementWithId(p.id)||f.has(p.id))continue;var g=new Il(e,h,!1);u.push(g),f.add(p.id)}t=u}this.length=0;for(var m=0,w=t.length;m<w;m++){var x=t[m][0];if(x!=null){var b=x._private.data.id;(!n||!i.has(b))&&(n&&i.set(b,{index:this.length,ele:x}),this[this.length]=x,this.length++)}}this._private={eles:this,cy:e,get map(){return this.lazyMap==null&&this.rebuildMap(),this.lazyMap},set map(_){this.lazyMap=_},rebuildMap:function(){for(var E=this.lazyMap=new Fn,C=this.eles,B=0;B<C.length;B++){var N=C[B];E.set(N.id(),{index:B,ele:N})}}},n&&(this._private.map=i),o&&!a&&this.restore()},_t=Il.prototype=cr.prototype=Object.create(Array.prototype);_t.instanceString=function(){return"collection"};_t.spawn=function(r,e){return new cr(this.cy(),r,e)};_t.spawnSelf=function(){return this.spawn(this)};_t.cy=function(){return this._private.cy};_t.renderer=function(){return this._private.cy.renderer()};_t.element=function(){return this[0]};_t.collection=function(){return o1(this)?this:new cr(this._private.cy,[this])};_t.unique=function(){return new cr(this._private.cy,this,!0)};_t.hasElementWithId=function(r){return r=""+r,this._private.map.has(r)};_t.getElementById=function(r){r=""+r;var e=this._private.cy,t=this._private.map.get(r);return t?t.ele:new cr(e)};_t.$id=_t.getElementById;_t.poolIndex=function(){var r=this._private.cy,e=r._private.elements,t=this[0]._private.data.id;return e._private.map.get(t).index};_t.indexOf=function(r){var e=r[0]._private.data.id;return this._private.map.get(e).index};_t.indexOfId=function(r){return r=""+r,this._private.map.get(r).index};_t.json=function(r){var e=this.element(),t=this.cy();if(e==null&&r)return this;if(e!=null){var n=e._private;if(dt(r)){if(t.startBatch(),r.data){e.data(r.data);var a=n.data;if(e.isEdge()){var i=!1,o={},u=r.data.source,f=r.data.target;u!=null&&u!=a.source&&(o.source=""+u,i=!0),f!=null&&f!=a.target&&(o.target=""+f,i=!0),i&&(e=e.move(o))}else{var c="parent"in r.data,d=r.data.parent;c&&(d!=null||a.parent!=null)&&d!=a.parent&&(d===void 0&&(d=null),d!=null&&(d=""+d),e=e.move({parent:d}))}}r.position&&e.position(r.position);var h=function(w,x,b){var _=r[w];_!=null&&_!==n[w]&&(_?e[x]():e[b]())};return h("removed","remove","restore"),h("selected","select","unselect"),h("selectable","selectify","unselectify"),h("locked","lock","unlock"),h("grabbable","grabify","ungrabify"),h("pannable","panify","unpanify"),r.classes!=null&&e.classes(r.classes),t.endBatch(),this}else if(r===void 0){var p={data:Sn(n.data),position:Sn(n.position),group:n.group,removed:n.removed,selected:n.selected,selectable:n.selectable,locked:n.locked,grabbable:n.grabbable,pannable:n.pannable,classes:null};p.classes="";var g=0;return n.classes.forEach(function(m){return p.classes+=g++===0?m:" "+m}),p}}};_t.jsons=function(){for(var r=[],e=0;e<this.length;e++){var t=this[e],n=t.json();r.push(n)}return r};_t.clone=function(){for(var r=this.cy(),e=[],t=0;t<this.length;t++){var n=this[t],a=n.json(),i=new Il(r,a,!1);e.push(i)}return new cr(r,e)};_t.copy=_t.clone;_t.restore=function(){for(var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=this,n=t.cy(),a=n._private,i=[],o=[],u,f=0,c=t.length;f<c;f++){var d=t[f];e&&!d.removed()||(d.isNode()?i.push(d):o.push(d))}u=i.concat(o);var h,p=function(){u.splice(h,1),h--};for(h=0;h<u.length;h++){var g=u[h],m=g._private,w=m.data;if(g.clearTraversalCache(),!(!e&&!m.removed)){if(w.id===void 0)w.id=b1();else if(Ue(w.id))w.id=""+w.id;else if(wa(w.id)||!Ye(w.id)){At("Can not create element with invalid string ID `"+w.id+"`"),p();continue}else if(n.hasElementWithId(w.id)){At("Can not create second element with ID `"+w.id+"`"),p();continue}}var x=w.id;if(g.isNode()){var b=m.position;b.x==null&&(b.x=0),b.y==null&&(b.y=0)}if(g.isEdge()){for(var _=g,E=["source","target"],C=E.length,B=!1,N=0;N<C;N++){var A=E[N],z=w[A];Ue(z)&&(z=w[A]=""+w[A]),z==null||z===""?(At("Can not create edge `"+x+"` with unspecified "+A),B=!0):n.hasElementWithId(z)||(At("Can not create edge `"+x+"` with nonexistant "+A+" `"+z+"`"),B=!0)}if(B){p();continue}var M=n.getElementById(w.source),V=n.getElementById(w.target);M.same(V)?M._private.edges.push(_):(M._private.edges.push(_),V._private.edges.push(_)),_._private.source=M,_._private.target=V}m.map=new Fn,m.map.set(x,{ele:g,index:0}),m.removed=!1,e&&n.addToPool(g)}for(var q=0;q<i.length;q++){var I=i[q],F=I._private.data;Ue(F.parent)&&(F.parent=""+F.parent);var T=F.parent,H=T!=null;if(H||I._private.parent){var Q=I._private.parent?n.collection().merge(I._private.parent):n.getElementById(T);if(Q.empty())F.parent=void 0;else if(Q[0].removed())gt("Node added with missing parent, reference to parent removed"),F.parent=void 0,I._private.parent=null;else{for(var W=!1,Z=Q;!Z.empty();){if(I.same(Z)){W=!0,F.parent=void 0;break}Z=Z.parent()}W||(Q[0]._private.children.push(I),I._private.parent=Q[0],a.hasCompoundNodes=!0)}}}if(u.length>0){for(var X=u.length===t.length?t:new cr(n,u),te=0;te<X.length;te++){var L=X[te];L.isNode()||(L.parallelEdges().clearTraversalCache(),L.source().clearTraversalCache(),L.target().clearTraversalCache())}var U;a.hasCompoundNodes?U=n.collection().merge(X).merge(X.connectedNodes()).merge(X.parent()):U=X,U.dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(r),r?X.emitAndNotify("add"):e&&X.emit("add")}return t};_t.removed=function(){var r=this[0];return r&&r._private.removed};_t.inside=function(){var r=this[0];return r&&!r._private.removed};_t.remove=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=this,n=[],a={},i=t._private.cy;function o(T){for(var H=T._private.edges,Q=0;Q<H.length;Q++)f(H[Q])}function u(T){for(var H=T._private.children,Q=0;Q<H.length;Q++)f(H[Q])}function f(T){var H=a[T.id()];e&&T.removed()||H||(a[T.id()]=!0,T.isNode()?(n.push(T),o(T),u(T)):n.unshift(T))}for(var c=0,d=t.length;c<d;c++){var h=t[c];f(h)}function p(T,H){var Q=T._private.edges;xa(Q,H),T.clearTraversalCache()}function g(T){T.clearTraversalCache()}var m=[];m.ids={};function w(T,H){H=H[0],T=T[0];var Q=T._private.children,W=T.id();xa(Q,H),H._private.parent=null,m.ids[W]||(m.ids[W]=!0,m.push(T))}t.dirtyCompoundBoundsCache(),e&&i.removeFromPool(n);for(var x=0;x<n.length;x++){var b=n[x];if(b.isEdge()){var _=b.source()[0],E=b.target()[0];p(_,b),p(E,b);for(var C=b.parallelEdges(),B=0;B<C.length;B++){var N=C[B];g(N),N.isBundledBezier()&&N.dirtyBoundingBoxCache()}}else{var A=b.parent();A.length!==0&&w(A,b)}e&&(b._private.removed=!0)}var z=i._private.elements;i._private.hasCompoundNodes=!1;for(var M=0;M<z.length;M++){var V=z[M];if(V.isParent()){i._private.hasCompoundNodes=!0;break}}var q=new cr(this.cy(),n);q.size()>0&&(r?q.emitAndNotify("remove"):e&&q.emit("remove"));for(var I=0;I<m.length;I++){var F=m[I];(!e||!F.removed())&&F.updateStyle()}return q};_t.move=function(r){var e=this._private.cy,t=this,n=!1,a=!1,i=function(m){return m==null?m:""+m};if(r.source!==void 0||r.target!==void 0){var o=i(r.source),u=i(r.target),f=o!=null&&e.hasElementWithId(o),c=u!=null&&e.hasElementWithId(u);(f||c)&&(e.batch(function(){t.remove(n,a),t.emitAndNotify("moveout");for(var g=0;g<t.length;g++){var m=t[g],w=m._private.data;m.isEdge()&&(f&&(w.source=o),c&&(w.target=u))}t.restore(n,a)}),t.emitAndNotify("move"))}else if(r.parent!==void 0){var d=i(r.parent),h=d===null||e.hasElementWithId(d);if(h){var p=d===null?void 0:d;e.batch(function(){var g=t.remove(n,a);g.emitAndNotify("moveout");for(var m=0;m<t.length;m++){var w=t[m],x=w._private.data;w.isNode()&&(x.parent=p)}g.restore(n,a)}),t.emitAndNotify("move")}}return this};[I1,Uk,ul,ma,Qi,rC,Ul,yC,aw,iw,EC,El,ll,fr,ya,xr].forEach(function(r){et(_t,r)});var BC={add:function(e){var t,n=this;if(Gr(e)){var a=e;if(a._private.cy===n)t=a.restore();else{for(var i=[],o=0;o<a.length;o++){var u=a[o];i.push(u.json())}t=new cr(n,i)}}else if(wt(e)){var f=e;t=new cr(n,f)}else if(dt(e)&&(wt(e.nodes)||wt(e.edges))){for(var c=e,d=[],h=["nodes","edges"],p=0,g=h.length;p<g;p++){var m=h[p],w=c[m];if(wt(w))for(var x=0,b=w.length;x<b;x++){var _=et({group:m},w[x]);d.push(_)}}t=new cr(n,d)}else{var E=e;t=new Il(n,E).collection()}return t},remove:function(e){if(!Gr(e)){if(Ye(e)){var t=e;e=this.$(t)}}return e.remove()}};/*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License */function AC(r,e,t,n){var a=4,i=.001,o=1e-7,u=10,f=11,c=1/(f-1),d=typeof Float32Array<"u";if(arguments.length!==4)return!1;for(var h=0;h<4;++h)if(typeof arguments[h]!="number"||isNaN(arguments[h])||!isFinite(arguments[h]))return!1;r=Math.min(r,1),t=Math.min(t,1),r=Math.max(r,0),t=Math.max(t,0);var p=d?new Float32Array(f):new Array(f);function g(V,q){return 1-3*q+3*V}function m(V,q){return 3*q-6*V}function w(V){return 3*V}function x(V,q,I){return((g(q,I)*V+m(q,I))*V+w(q))*V}function b(V,q,I){return 3*g(q,I)*V*V+2*m(q,I)*V+w(q)}function _(V,q){for(var I=0;I<a;++I){var F=b(q,r,t);if(F===0)return q;var T=x(q,r,t)-V;q-=T/F}return q}function E(){for(var V=0;V<f;++V)p[V]=x(V*c,r,t)}function C(V,q,I){var F,T,H=0;do T=q+(I-q)/2,F=x(T,r,t)-V,F>0?I=T:q=T;while(Math.abs(F)>o&&++H<u);return T}function B(V){for(var q=0,I=1,F=f-1;I!==F&&p[I]<=V;++I)q+=c;--I;var T=(V-p[I])/(p[I+1]-p[I]),H=q+T*c,Q=b(H,r,t);return Q>=i?_(V,H):Q===0?H:C(V,q,q+c)}var N=!1;function A(){N=!0,(r!==e||t!==n)&&E()}var z=function(q){return N||A(),r===e&&t===n?q:q===0?0:q===1?1:x(B(q),e,n)};z.getControlPoints=function(){return[{x:r,y:e},{x:t,y:n}]};var M="generateBezier("+[r,e,t,n]+")";return z.toString=function(){return M},z}/*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License */var DC=(function(){function r(n){return-n.tension*n.x-n.friction*n.v}function e(n,a,i){var o={x:n.x+i.dx*a,v:n.v+i.dv*a,tension:n.tension,friction:n.friction};return{dx:o.v,dv:r(o)}}function t(n,a){var i={dx:n.v,dv:r(n)},o=e(n,a*.5,i),u=e(n,a*.5,o),f=e(n,a,u),c=1/6*(i.dx+2*(o.dx+u.dx)+f.dx),d=1/6*(i.dv+2*(o.dv+u.dv)+f.dv);return n.x=n.x+c*a,n.v=n.v+d*a,n}return function n(a,i,o){var u={x:-1,v:0,tension:null,friction:null},f=[0],c=0,d=1/1e4,h=16/1e3,p,g,m;for(a=parseFloat(a)||500,i=parseFloat(i)||20,o=o||null,u.tension=a,u.friction=i,p=o!==null,p?(c=n(a,i),g=c/o*h):g=h;m=t(m||u,g),f.push(1+m.x),c+=16,Math.abs(m.x)>d&&Math.abs(m.v)>d;);return p?function(w){return f[w*(f.length-1)|0]}:c}})(),bt=function(e,t,n,a){var i=AC(e,t,n,a);return function(o,u,f){return o+(u-o)*i(f)}},fl={linear:function(e,t,n){return e+(t-e)*n},ease:bt(.25,.1,.25,1),"ease-in":bt(.42,0,1,1),"ease-out":bt(0,0,.58,1),"ease-in-out":bt(.42,0,.58,1),"ease-in-sine":bt(.47,0,.745,.715),"ease-out-sine":bt(.39,.575,.565,1),"ease-in-out-sine":bt(.445,.05,.55,.95),"ease-in-quad":bt(.55,.085,.68,.53),"ease-out-quad":bt(.25,.46,.45,.94),"ease-in-out-quad":bt(.455,.03,.515,.955),"ease-in-cubic":bt(.55,.055,.675,.19),"ease-out-cubic":bt(.215,.61,.355,1),"ease-in-out-cubic":bt(.645,.045,.355,1),"ease-in-quart":bt(.895,.03,.685,.22),"ease-out-quart":bt(.165,.84,.44,1),"ease-in-out-quart":bt(.77,0,.175,1),"ease-in-quint":bt(.755,.05,.855,.06),"ease-out-quint":bt(.23,1,.32,1),"ease-in-out-quint":bt(.86,0,.07,1),"ease-in-expo":bt(.95,.05,.795,.035),"ease-out-expo":bt(.19,1,.22,1),"ease-in-out-expo":bt(1,0,0,1),"ease-in-circ":bt(.6,.04,.98,.335),"ease-out-circ":bt(.075,.82,.165,1),"ease-in-out-circ":bt(.785,.135,.15,.86),spring:function(e,t,n){if(n===0)return fl.linear;var a=DC(e,t,n);return function(i,o,u){return i+(o-i)*a(u)}},"cubic-bezier":bt};function f0(r,e,t,n,a){if(n===1||e===t)return t;var i=a(e,t,n);return r==null||((r.roundValue||r.color)&&(i=Math.round(i)),r.min!==void 0&&(i=Math.max(i,r.min)),r.max!==void 0&&(i=Math.min(i,r.max))),i}function c0(r,e){return r.pfValue!=null||r.value!=null?r.pfValue!=null&&(e==null||e.type.units!=="%")?r.pfValue:r.value:r}function Ni(r,e,t,n,a){var i=a!=null?a.type:null;t<0?t=0:t>1&&(t=1);var o=c0(r,a),u=c0(e,a);if(Ue(o)&&Ue(u))return f0(i,o,u,t,n);if(wt(o)&&wt(u)){for(var f=[],c=0;c<u.length;c++){var d=o[c],h=u[c];if(d!=null&&h!=null){var p=f0(i,d,h,t,n);f.push(p)}else f.push(h)}return f}}function IC(r,e,t,n){var a=!n,i=r._private,o=e._private,u=o.easing,f=o.startTime,c=n?r:r.cy(),d=c.style();if(!o.easingImpl)if(u==null)o.easingImpl=fl.linear;else{var h;if(Ye(u)){var p=d.parse("transition-timing-function",u);h=p.value}else h=u;var g,m;Ye(h)?(g=h,m=[]):(g=h[1],m=h.slice(2).map(function(X){return+X})),m.length>0?(g==="spring"&&m.push(o.duration),o.easingImpl=fl[g].apply(null,m)):o.easingImpl=fl[g]}var w=o.easingImpl,x;if(o.duration===0?x=1:x=(t-f)/o.duration,o.applying&&(x=o.progress),x<0?x=0:x>1&&(x=1),o.delay==null){var b=o.startPosition,_=o.position;if(_&&a&&!r.locked()){var E={};Qs(b.x,_.x)&&(E.x=Ni(b.x,_.x,x,w)),Qs(b.y,_.y)&&(E.y=Ni(b.y,_.y,x,w)),r.position(E)}var C=o.startPan,B=o.pan,N=i.pan,A=B!=null&&n;A&&(Qs(C.x,B.x)&&(N.x=Ni(C.x,B.x,x,w)),Qs(C.y,B.y)&&(N.y=Ni(C.y,B.y,x,w)),r.emit("pan"));var z=o.startZoom,M=o.zoom,V=M!=null&&n;V&&(Qs(z,M)&&(i.zoom=vo(i.minZoom,Ni(z,M,x,w),i.maxZoom)),r.emit("zoom")),(A||V)&&r.emit("viewport");var q=o.style;if(q&&q.length>0&&a){for(var I=0;I<q.length;I++){var F=q[I],T=F.name,H=F,Q=o.startStyle[T],W=d.properties[Q.name],Z=Ni(Q,H,x,w,W);d.overrideBypass(r,T,Z)}r.emit("style")}}return o.progress=x,x}function Qs(r,e){return r==null||e==null?!1:Ue(r)&&Ue(e)?!0:!!(r&&e)}function LC(r,e,t,n){var a=e._private;a.started=!0,a.startTime=t-a.progress*a.duration}function d0(r,e){var t=e._private.aniEles,n=[];function a(d,h){var p=d._private,g=p.animation.current,m=p.animation.queue,w=!1;if(g.length===0){var x=m.shift();x&&g.push(x)}for(var b=function(N){for(var A=N.length-1;A>=0;A--){var z=N[A];z()}N.splice(0,N.length)},_=g.length-1;_>=0;_--){var E=g[_],C=E._private;if(C.stopped){g.splice(_,1),C.hooked=!1,C.playing=!1,C.started=!1,b(C.frames);continue}!C.playing&&!C.applying||(C.playing&&C.applying&&(C.applying=!1),C.started||LC(d,E,r),IC(d,E,r,h),C.applying&&(C.applying=!1),b(C.frames),C.step!=null&&C.step(r),E.completed()&&(g.splice(_,1),C.hooked=!1,C.playing=!1,C.started=!1,b(C.completes)),w=!0)}return!h&&g.length===0&&m.length===0&&n.push(d),w}for(var i=!1,o=0;o<t.length;o++){var u=t[o],f=a(u);i=i||f}var c=a(e,!0);(i||c)&&(t.length>0?e.notify("draw",t):e.notify("draw")),t.unmerge(n),e.emit("step")}var NC={animate:pt.animate(),animation:pt.animation(),animated:pt.animated(),clearQueue:pt.clearQueue(),delay:pt.delay(),delayAnimation:pt.delayAnimation(),stop:pt.stop(),addToAnimationPool:function(e){var t=this;t.styleEnabled()&&t._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,!e.styleEnabled())return;function t(){e._private.animationsRunning&&yl(function(i){d0(i,e),t()})}var n=e.renderer();n&&n.beforeRender?n.beforeRender(function(i,o){d0(o,e)},n.beforeRenderPriorities.animations):t()}},OC={qualifierCompare:function(e,t){return e==null||t==null?e==null&&t==null:e.sameText(t)},eventMatches:function(e,t,n){var a=t.qualifier;return a!=null?e!==n.target&&So(n.target)&&a.matches(n.target):!0},addEventFields:function(e,t){t.cy=e,t.target=e},callbackContext:function(e,t,n){return t.qualifier!=null?n.target:e}},el=function(e){return Ye(e)?new _a(e):e},uw={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new $l(OC,this)),this},emitter:function(){return this._private.emitter},on:function(e,t,n){return this.emitter().on(e,el(t),n),this},removeListener:function(e,t,n){return this.emitter().removeListener(e,el(t),n),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(e,t,n){return this.emitter().one(e,el(t),n),this},once:function(e,t,n){return this.emitter().one(e,el(t),n),this},emit:function(e,t){return this.emitter().emit(e,t),this},emitAndNotify:function(e,t){return this.emit(e),this.notify(e,t),this}};pt.eventAliasesOn(uw);var Ah={png:function(e){var t=this._private.renderer;return e=e||{},t.png(e)},jpg:function(e){var t=this._private.renderer;return e=e||{},e.bg=e.bg||"#fff",t.jpg(e)}};Ah.jpeg=Ah.jpg;var cl={layout:function(e){var t=this;if(e==null){At("Layout options must be specified to make a layout");return}if(e.name==null){At("A `name` must be specified to make a layout");return}var n=e.name,a=t.extension("layout",n);if(a==null){At("No such layout `"+n+"` found.  Did you forget to import it and `cytoscape.use()` it?");return}var i;Ye(e.eles)?i=t.$(e.eles):i=e.eles!=null?e.eles:t.$();var o=new a(et({},e,{cy:t,eles:i}));return o}};cl.createLayout=cl.makeLayout=cl.layout;var MC={notify:function(e,t){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var a=n.batchNotifications[e]=n.batchNotifications[e]||this.collection();t!=null&&a.merge(t);return}if(n.notificationsEnabled){var i=this.renderer();this.destroyed()||!i||i.notify(e,t)}},notifications:function(e){var t=this._private;return e===void 0?t.notificationsEnabled:(t.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return e.batchCount==null&&(e.batchCount=0),e.batchCount===0&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(e.batchCount===0)return this;if(e.batchCount--,e.batchCount===0){e.batchStyleEles.updateStyle();var t=this.renderer();Object.keys(e.batchNotifications).forEach(function(n){var a=e.batchNotifications[n];a.empty()?t.notify(n):t.notify(n,a)})}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var t=this;return this.batch(function(){for(var n=Object.keys(e),a=0;a<n.length;a++){var i=n[a],o=e[i],u=t.getElementById(i);u.data(o)}})}},zC=dr({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1,webgl:!1,webglDebug:!1,webglDebugShowAtlases:!1,webglTexSize:2048,webglTexRows:36,webglTexRowsNodes:18,webglBatchSize:2048,webglTexPerBatch:14,webglBgColor:[255,255,255]}),Dh={renderTo:function(e,t,n,a){var i=this._private.renderer;return i.renderTo(e,t,n,a),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var t=this,n=t.extension("renderer",e.name);if(n==null){At("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));return}e.wheelSensitivity!==void 0&&gt("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var a=zC(e);a.cy=t,t._private.renderer=new n(a),this.notify("init")},destroyRenderer:function(){var e=this;e.notify("destroy");var t=e.container();if(t)for(t._cyreg=null;t.childNodes.length>0;)t.removeChild(t.childNodes[0]);e._private.renderer=null,e.mutableElements().forEach(function(n){var a=n._private;a.rscratch={},a.rstyle={},a.animation.current=[],a.animation.queue=[]})},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};Dh.invalidateDimensions=Dh.resize;var dl={collection:function(e,t){return Ye(e)?this.$(e):Gr(e)?e.collection():wt(e)?(t||(t={}),new cr(this,e,t.unique,t.removed)):new cr(this)},nodes:function(e){var t=this.$(function(n){return n.isNode()});return e?t.filter(e):t},edges:function(e){var t=this.$(function(n){return n.isEdge()});return e?t.filter(e):t},$:function(e){var t=this._private.elements;return e?t.filter(e):t.spawnSelf()},mutableElements:function(){return this._private.elements}};dl.elements=dl.filter=dl.$;var ir={},oo="t",FC="f";ir.apply=function(r){for(var e=this,t=e._private,n=t.cy,a=n.collection(),i=0;i<r.length;i++){var o=r[i],u=e.getContextMeta(o);if(!u.empty){var f=e.getContextStyle(u),c=e.applyContextStyle(u,f,o);o._private.appliedInitStyle?e.updateTransitions(o,c.diffProps):o._private.appliedInitStyle=!0;var d=e.updateStyleHints(o);d&&a.push(o)}}return a};ir.getPropertiesDiff=function(r,e){var t=this,n=t._private.propDiffs=t._private.propDiffs||{},a=r+"-"+e,i=n[a];if(i)return i;for(var o=[],u={},f=0;f<t.length;f++){var c=t[f],d=r[f]===oo,h=e[f]===oo,p=d!==h,g=c.mappedProperties.length>0;if(p||h&&g){var m=void 0;p&&g||p?m=c.properties:g&&(m=c.mappedProperties);for(var w=0;w<m.length;w++){for(var x=m[w],b=x.name,_=!1,E=f+1;E<t.length;E++){var C=t[E],B=e[E]===oo;if(B&&(_=C.properties[x.name]!=null,_))break}!u[b]&&!_&&(u[b]=!0,o.push(b))}}}return n[a]=o,o};ir.getContextMeta=function(r){for(var e=this,t="",n,a=r._private.styleCxtKey||"",i=0;i<e.length;i++){var o=e[i],u=o.selector&&o.selector.matches(r);u?t+=oo:t+=FC}return n=e.getPropertiesDiff(a,t),r._private.styleCxtKey=t,{key:t,diffPropNames:n,empty:n.length===0}};ir.getContextStyle=function(r){var e=r.key,t=this,n=this._private.contextStyles=this._private.contextStyles||{};if(n[e])return n[e];for(var a={_private:{key:e}},i=0;i<t.length;i++){var o=t[i],u=e[i]===oo;if(u)for(var f=0;f<o.properties.length;f++){var c=o.properties[f];a[c.name]=c}}return n[e]=a,a};ir.applyContextStyle=function(r,e,t){for(var n=this,a=r.diffPropNames,i={},o=n.types,u=0;u<a.length;u++){var f=a[u],c=e[f],d=t.pstyle(f);if(!c)if(d)d.bypass?c={name:f,deleteBypassed:!0}:c={name:f,delete:!0};else continue;if(d!==c){if(c.mapped===o.fn&&d!=null&&d.mapping!=null&&d.mapping.value===c.value){var h=d.mapping,p=h.fnValue=c.value(t);if(p===h.prevFnValue)continue}var g=i[f]={prev:d};n.applyParsedProperty(t,c),g.next=t.pstyle(f),g.next&&g.next.bypass&&(g.next=g.next.bypassed)}}return{diffProps:i}};ir.updateStyleHints=function(r){var e=r._private,t=this,n=t.propertyGroupNames,a=t.propertyGroupKeys,i=function(be,Pe,D){return t.getPropertiesHash(be,Pe,D)},o=e.styleKey;if(r.removed())return!1;var u=e.group==="nodes",f=r._private.style;n=Object.keys(f);for(var c=0;c<a.length;c++){var d=a[c];e.styleKeys[d]=[Za,Vi]}for(var h=function(be,Pe){return e.styleKeys[Pe][0]=fo(be,e.styleKeys[Pe][0])},p=function(be,Pe){return e.styleKeys[Pe][1]=co(be,e.styleKeys[Pe][1])},g=function(be,Pe){h(be,Pe),p(be,Pe)},m=function(be,Pe){for(var D=0;D<be.length;D++){var ve=be.charCodeAt(D);h(ve,Pe),p(ve,Pe)}},w=2e9,x=function(be){return-128<be&&be<128&&Math.floor(be)!==be?w-(be*1024|0):be},b=0;b<n.length;b++){var _=n[b],E=f[_];if(E!=null){var C=this.properties[_],B=C.type,N=C.groupKey,A=void 0;C.hashOverride!=null?A=C.hashOverride(r,E):E.pfValue!=null&&(A=E.pfValue);var z=C.enums==null?E.value:null,M=A!=null,V=z!=null,q=M||V,I=E.units;if(B.number&&q&&!B.multiple){var F=M?A:z;g(x(F),N),!M&&I!=null&&m(I,N)}else m(E.strValue,N)}}for(var T=[Za,Vi],H=0;H<a.length;H++){var Q=a[H],W=e.styleKeys[Q];T[0]=fo(W[0],T[0]),T[1]=co(W[1],T[1])}e.styleKey=tE(T[0],T[1]);var Z=e.styleKeys;e.labelDimsKey=ca(Z.labelDimensions);var X=i(r,["label"],Z.labelDimensions);if(e.labelKey=ca(X),e.labelStyleKey=ca(Hu(Z.commonLabel,X)),!u){var te=i(r,["source-label"],Z.labelDimensions);e.sourceLabelKey=ca(te),e.sourceLabelStyleKey=ca(Hu(Z.commonLabel,te));var L=i(r,["target-label"],Z.labelDimensions);e.targetLabelKey=ca(L),e.targetLabelStyleKey=ca(Hu(Z.commonLabel,L))}if(u){var U=e.styleKeys,oe=U.nodeBody,ie=U.nodeBorder,ne=U.nodeOutline,we=U.backgroundImage,Te=U.compound,ke=U.pie,ge=U.stripe,fe=[oe,ie,ne,we,Te,ke,ge].filter(function(de){return de!=null}).reduce(Hu,[Za,Vi]);e.nodeKey=ca(fe),e.hasPie=ke!=null&&ke[0]!==Za&&ke[1]!==Vi,e.hasStripe=ge!=null&&ge[0]!==Za&&ge[1]!==Vi}return o!==e.styleKey};ir.clearStyleHints=function(r){var e=r._private;e.styleCxtKey="",e.styleKeys={},e.styleKey=null,e.labelKey=null,e.labelStyleKey=null,e.sourceLabelKey=null,e.sourceLabelStyleKey=null,e.targetLabelKey=null,e.targetLabelStyleKey=null,e.nodeKey=null,e.hasPie=null,e.hasStripe=null};ir.applyParsedProperty=function(r,e){var t=this,n=e,a=r._private.style,i,o=t.types,u=t.properties[n.name].type,f=n.bypass,c=a[n.name],d=c&&c.bypass,h=r._private,p="mapping",g=function(oe){return oe==null?null:oe.pfValue!=null?oe.pfValue:oe.value},m=function(){var oe=g(c),ie=g(n);t.checkTriggers(r,n.name,oe,ie)};if(e.name==="curve-style"&&r.isEdge()&&(e.value!=="bezier"&&r.isLoop()||e.value==="haystack"&&(r.source().isParent()||r.target().isParent()))&&(n=e=this.parse(e.name,"bezier",f)),n.delete)return a[n.name]=void 0,m(),!0;if(n.deleteBypassed)return c?c.bypass?(c.bypassed=void 0,m(),!0):!1:(m(),!0);if(n.deleteBypass)return c?c.bypass?(a[n.name]=c.bypassed,m(),!0):!1:(m(),!0);var w=function(){gt("Do not assign mappings to elements without corresponding data (i.e. ele `"+r.id()+"` has no mapping for property `"+n.name+"` with data field `"+n.field+"`); try a `["+n.field+"]` selector to limit scope to elements with `"+n.field+"` defined")};switch(n.mapped){case o.mapData:{for(var x=n.field.split("."),b=h.data,_=0;_<x.length&&b;_++){var E=x[_];b=b[E]}if(b==null)return w(),!1;var C;if(Ue(b)){var B=n.fieldMax-n.fieldMin;B===0?C=0:C=(b-n.fieldMin)/B}else return gt("Do not use continuous mappers without specifying numeric data (i.e. `"+n.field+": "+b+"` for `"+r.id()+"` is non-numeric)"),!1;if(C<0?C=0:C>1&&(C=1),u.color){var N=n.valueMin[0],A=n.valueMax[0],z=n.valueMin[1],M=n.valueMax[1],V=n.valueMin[2],q=n.valueMax[2],I=n.valueMin[3]==null?1:n.valueMin[3],F=n.valueMax[3]==null?1:n.valueMax[3],T=[Math.round(N+(A-N)*C),Math.round(z+(M-z)*C),Math.round(V+(q-V)*C),Math.round(I+(F-I)*C)];i={bypass:n.bypass,name:n.name,value:T,strValue:"rgb("+T[0]+", "+T[1]+", "+T[2]+")"}}else if(u.number){var H=n.valueMin+(n.valueMax-n.valueMin)*C;i=this.parse(n.name,H,n.bypass,p)}else return!1;if(!i)return w(),!1;i.mapping=n,n=i;break}case o.data:{for(var Q=n.field.split("."),W=h.data,Z=0;Z<Q.length&&W;Z++){var X=Q[Z];W=W[X]}if(W!=null&&(i=this.parse(n.name,W,n.bypass,p)),!i)return w(),!1;i.mapping=n,n=i;break}case o.fn:{var te=n.value,L=n.fnValue!=null?n.fnValue:te(r);if(n.prevFnValue=L,L==null)return gt("Custom function mappers may not return null (i.e. `"+n.name+"` for ele `"+r.id()+"` is null)"),!1;if(i=this.parse(n.name,L,n.bypass,p),!i)return gt("Custom function mappers may not return invalid values for the property type (i.e. `"+n.name+"` for ele `"+r.id()+"` is invalid)"),!1;i.mapping=Sn(n),n=i;break}case void 0:break;default:return!1}return f?(d?n.bypassed=c.bypassed:n.bypassed=c,a[n.name]=n):d?c.bypassed=n:a[n.name]=n,m(),!0};ir.cleanElements=function(r,e){for(var t=0;t<r.length;t++){var n=r[t];if(this.clearStyleHints(n),n.dirtyCompoundBoundsCache(),n.dirtyBoundingBoxCache(),!e)n._private.style={};else for(var a=n._private.style,i=Object.keys(a),o=0;o<i.length;o++){var u=i[o],f=a[u];f!=null&&(f.bypass?f.bypassed=null:a[u]=null)}}};ir.update=function(){var r=this._private.cy,e=r.mutableElements();e.updateStyle()};ir.updateTransitions=function(r,e){var t=this,n=r._private,a=r.pstyle("transition-property").value,i=r.pstyle("transition-duration").pfValue,o=r.pstyle("transition-delay").pfValue;if(a.length>0&&i>0){for(var u={},f=!1,c=0;c<a.length;c++){var d=a[c],h=r.pstyle(d),p=e[d];if(p){var g=p.prev,m=g,w=p.next!=null?p.next:h,x=!1,b=void 0,_=1e-6;m&&(Ue(m.pfValue)&&Ue(w.pfValue)?(x=w.pfValue-m.pfValue,b=m.pfValue+_*x):Ue(m.value)&&Ue(w.value)?(x=w.value-m.value,b=m.value+_*x):wt(m.value)&&wt(w.value)&&(x=m.value[0]!==w.value[0]||m.value[1]!==w.value[1]||m.value[2]!==w.value[2],b=m.strValue),x&&(u[d]=w.strValue,this.applyBypass(r,d,b),f=!0))}}if(!f)return;n.transitioning=!0,new es(function(E){o>0?r.delayAnimation(o).play().promise().then(E):E()}).then(function(){return r.animation({style:u,duration:i,easing:r.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){t.removeBypasses(r,a),r.emitAndNotify("style"),n.transitioning=!1})}else n.transitioning&&(this.removeBypasses(r,a),r.emitAndNotify("style"),n.transitioning=!1)};ir.checkTrigger=function(r,e,t,n,a,i){var o=this.properties[e],u=a(o);r.removed()||u!=null&&u(t,n,r)&&i(o)};ir.checkZOrderTrigger=function(r,e,t,n){var a=this;this.checkTrigger(r,e,t,n,function(i){return i.triggersZOrder},function(){a._private.cy.notify("zorder",r)})};ir.checkBoundsTrigger=function(r,e,t,n){this.checkTrigger(r,e,t,n,function(a){return a.triggersBounds},function(a){r.dirtyCompoundBoundsCache(),r.dirtyBoundingBoxCache()})};ir.checkConnectedEdgesBoundsTrigger=function(r,e,t,n){this.checkTrigger(r,e,t,n,function(a){return a.triggersBoundsOfConnectedEdges},function(a){r.connectedEdges().forEach(function(i){i.dirtyBoundingBoxCache()})})};ir.checkParallelEdgesBoundsTrigger=function(r,e,t,n){this.checkTrigger(r,e,t,n,function(a){return a.triggersBoundsOfParallelEdges},function(a){r.parallelEdges().forEach(function(i){i.dirtyBoundingBoxCache()})})};ir.checkTriggers=function(r,e,t,n){r.dirtyStyleCache(),this.checkZOrderTrigger(r,e,t,n),this.checkBoundsTrigger(r,e,t,n),this.checkConnectedEdgesBoundsTrigger(r,e,t,n),this.checkParallelEdgesBoundsTrigger(r,e,t,n)};var Ao={};Ao.applyBypass=function(r,e,t,n){var a=this,i=[],o=!0;if(e==="*"||e==="**"){if(t!==void 0)for(var u=0;u<a.properties.length;u++){var f=a.properties[u],c=f.name,d=this.parse(c,t,!0);d&&i.push(d)}}else if(Ye(e)){var h=this.parse(e,t,!0);h&&i.push(h)}else if(dt(e)){var p=e;n=t;for(var g=Object.keys(p),m=0;m<g.length;m++){var w=g[m],x=p[w];if(x===void 0&&(x=p[Al(w)]),x!==void 0){var b=this.parse(w,x,!0);b&&i.push(b)}}}else return!1;if(i.length===0)return!1;for(var _=!1,E=0;E<r.length;E++){for(var C=r[E],B={},N=void 0,A=0;A<i.length;A++){var z=i[A];if(n){var M=C.pstyle(z.name);N=B[z.name]={prev:M}}_=this.applyParsedProperty(C,Sn(z))||_,n&&(N.next=C.pstyle(z.name))}_&&this.updateStyleHints(C),n&&this.updateTransitions(C,B,o)}return _};Ao.overrideBypass=function(r,e,t){e=Hh(e);for(var n=0;n<r.length;n++){var a=r[n],i=a._private.style[e],o=this.properties[e].type,u=o.color,f=o.mutiple,c=i?i.pfValue!=null?i.pfValue:i.value:null;!i||!i.bypass?this.applyBypass(a,e,t):(i.value=t,i.pfValue!=null&&(i.pfValue=t),u?i.strValue="rgb("+t.join(",")+")":f?i.strValue=t.join(" "):i.strValue=""+t,this.updateStyleHints(a)),this.checkTriggers(a,e,c,t)}};Ao.removeAllBypasses=function(r,e){return this.removeBypasses(r,this.propertyNames,e)};Ao.removeBypasses=function(r,e,t){for(var n=!0,a=0;a<r.length;a++){for(var i=r[a],o={},u=0;u<e.length;u++){var f=e[u],c=this.properties[f],d=i.pstyle(c.name);if(!(!d||!d.bypass)){var h="",p=this.parse(f,h,!0),g=o[c.name]={prev:d};this.applyParsedProperty(i,p),g.next=i.pstyle(c.name)}}this.updateStyleHints(i),t&&this.updateTransitions(i,o,n)}};var ov={};ov.getEmSizeInPixels=function(){var r=this.containerCss("font-size");return r!=null?parseFloat(r):1};ov.containerCss=function(r){var e=this._private.cy,t=e.container(),n=e.window();if(n&&t&&n.getComputedStyle)return n.getComputedStyle(t).getPropertyValue(r)};var kn={};kn.getRenderedStyle=function(r,e){return e?this.getStylePropertyValue(r,e,!0):this.getRawStyle(r,!0)};kn.getRawStyle=function(r,e){var t=this;if(r=r[0],r){for(var n={},a=0;a<t.properties.length;a++){var i=t.properties[a],o=t.getStylePropertyValue(r,i.name,e);o!=null&&(n[i.name]=o,n[Al(i.name)]=o)}return n}};kn.getIndexedStyle=function(r,e,t,n){var a=r.pstyle(e)[t][n];return a??r.cy().style().getDefaultProperty(e)[t][0]};kn.getStylePropertyValue=function(r,e,t){var n=this;if(r=r[0],r){var a=n.properties[e];a.alias&&(a=a.pointsTo);var i=a.type,o=r.pstyle(a.name);if(o){var u=o.value,f=o.units,c=o.strValue;if(t&&i.number&&u!=null&&Ue(u)){var d=r.cy().zoom(),h=function(x){return x*d},p=function(x,b){return h(x)+b},g=wt(u),m=g?f.every(function(w){return w!=null}):f!=null;return m?g?u.map(function(w,x){return p(w,f[x])}).join(" "):p(u,f):g?u.map(function(w){return Ye(w)?w:""+h(w)}).join(" "):""+h(u)}else if(c!=null)return c}return null}};kn.getAnimationStartStyle=function(r,e){for(var t={},n=0;n<e.length;n++){var a=e[n],i=a.name,o=r.pstyle(i);o!==void 0&&(dt(o)?o=this.parse(i,o.strValue):o=this.parse(i,o)),o&&(t[i]=o)}return t};kn.getPropsList=function(r){var e=this,t=[],n=r,a=e.properties;if(n)for(var i=Object.keys(n),o=0;o<i.length;o++){var u=i[o],f=n[u],c=a[u]||a[Hh(u)],d=this.parse(c.name,f);d&&t.push(d)}return t};kn.getNonDefaultPropertiesHash=function(r,e,t){var n=t.slice(),a,i,o,u,f,c;for(f=0;f<e.length;f++)if(a=e[f],i=r.pstyle(a,!1),i!=null)if(i.pfValue!=null)n[0]=fo(u,n[0]),n[1]=co(u,n[1]);else for(o=i.strValue,c=0;c<o.length;c++)u=o.charCodeAt(c),n[0]=fo(u,n[0]),n[1]=co(u,n[1]);return n};kn.getPropertiesHash=kn.getNonDefaultPropertiesHash;var ql={};ql.appendFromJson=function(r){for(var e=this,t=0;t<r.length;t++){var n=r[t],a=n.selector,i=n.style||n.css,o=Object.keys(i);e.selector(a);for(var u=0;u<o.length;u++){var f=o[u],c=i[f];e.css(f,c)}}return e};ql.fromJson=function(r){var e=this;return e.resetToDefault(),e.appendFromJson(r),e};ql.json=function(){for(var r=[],e=this.defaultLength;e<this.length;e++){for(var t=this[e],n=t.selector,a=t.properties,i={},o=0;o<a.length;o++){var u=a[o];i[u.name]=u.strValue}r.push({selector:n?n.toString():"core",style:i})}return r};var uv={};uv.appendFromString=function(r){var e=this,t=this,n=""+r,a,i,o;n=n.replace(/[/][*](\s|.)+?[*][/]/g,"");function u(){n.length>a.length?n=n.substr(a.length):n=""}function f(){i.length>o.length?i=i.substr(o.length):i=""}for(;;){var c=n.match(/^\s*$/);if(c)break;var d=n.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!d){gt("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+n);break}a=d[0];var h=d[1];if(h!=="core"){var p=new _a(h);if(p.invalid){gt("Skipping parsing of block: Invalid selector found in string stylesheet: "+h),u();continue}}var g=d[2],m=!1;i=g;for(var w=[];;){var x=i.match(/^\s*$/);if(x)break;var b=i.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!b){gt("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+g),m=!0;break}o=b[0];var _=b[1],E=b[2],C=e.properties[_];if(!C){gt("Skipping property: Invalid property name in: "+o),f();continue}var B=t.parse(_,E);if(!B){gt("Skipping property: Invalid property definition in: "+o),f();continue}w.push({name:_,val:E}),f()}if(m){u();break}t.selector(h);for(var N=0;N<w.length;N++){var A=w[N];t.css(A.name,A.val)}u()}return t};uv.fromString=function(r){var e=this;return e.resetToDefault(),e.appendFromString(r),e};var Wt={};(function(){var r=Yt,e=I_,t=N_,n=O_,a=M_,i=function(de){return"^"+de+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},o=function(de){var be=r+"|\\w+|"+e+"|"+t+"|"+n+"|"+a;return"^"+de+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+r+")\\s*\\,\\s*("+r+")\\s*,\\s*("+be+")\\s*\\,\\s*("+be+")\\)$"},u=[`^url\\s*\\(\\s*['"]?(.+?)['"]?\\s*\\)$`,"^(none)$","^(.+)$"];Wt.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},axisDirectionExplicit:{enums:["leftward","rightward","upward","downward"]},axisDirectionPrimary:{enums:["horizontal","vertical"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},boxSelection:{enums:["contain","overlap","none"]},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},linePosition:{enums:["center","inside","outside"]},lineJoin:{enums:["round","bevel","miter"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi","round-segments","round-taxi"]},radiusType:{enums:["arc-radius","influence-radius"],multiple:!0},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle","circle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},cornerRadius:{number:!0,min:0,units:"px|em",implicitUnits:"px",enums:["auto"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:i("data")},layoutData:{mapping:!0,regex:i("layoutData")},scratch:{mapping:!0,regex:i("scratch")},mapData:{mapping:!0,regex:o("mapData")},mapLayoutData:{mapping:!0,regex:o("mapLayoutData")},mapScratch:{mapping:!0,regex:o("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:u,singleRegexMatchValue:!0},urls:{regexes:u,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(de,be){switch(de.length){case 2:return be[0]!=="deg"&&be[0]!=="rad"&&be[1]!=="deg"&&be[1]!=="rad";case 1:return Ye(de[0])||be[0]==="deg"||be[0]==="rad";default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+r+")\\s*,\\s*("+r+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+r+")\\s*,\\s*("+r+")\\s*,\\s*("+r+")\\s*,\\s*("+r+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(de){var be=de.length;return be===1||be===2||be===4}}};var f={zeroNonZero:function(de,be){return(de==null||be==null)&&de!==be||de==0&&be!=0?!0:de!=0&&be==0},any:function(de,be){return de!=be},emptyNonEmpty:function(de,be){var Pe=wa(de),D=wa(be);return Pe&&!D||!Pe&&D}},c=Wt.types,d=[{name:"label",type:c.text,triggersBounds:f.any,triggersZOrder:f.emptyNonEmpty},{name:"text-rotation",type:c.textRotation,triggersBounds:f.any},{name:"text-margin-x",type:c.bidirectionalSize,triggersBounds:f.any},{name:"text-margin-y",type:c.bidirectionalSize,triggersBounds:f.any}],h=[{name:"source-label",type:c.text,triggersBounds:f.any},{name:"source-text-rotation",type:c.textRotation,triggersBounds:f.any},{name:"source-text-margin-x",type:c.bidirectionalSize,triggersBounds:f.any},{name:"source-text-margin-y",type:c.bidirectionalSize,triggersBounds:f.any},{name:"source-text-offset",type:c.size,triggersBounds:f.any}],p=[{name:"target-label",type:c.text,triggersBounds:f.any},{name:"target-text-rotation",type:c.textRotation,triggersBounds:f.any},{name:"target-text-margin-x",type:c.bidirectionalSize,triggersBounds:f.any},{name:"target-text-margin-y",type:c.bidirectionalSize,triggersBounds:f.any},{name:"target-text-offset",type:c.size,triggersBounds:f.any}],g=[{name:"font-family",type:c.fontFamily,triggersBounds:f.any},{name:"font-style",type:c.fontStyle,triggersBounds:f.any},{name:"font-weight",type:c.fontWeight,triggersBounds:f.any},{name:"font-size",type:c.size,triggersBounds:f.any},{name:"text-transform",type:c.textTransform,triggersBounds:f.any},{name:"text-wrap",type:c.textWrap,triggersBounds:f.any},{name:"text-overflow-wrap",type:c.textOverflowWrap,triggersBounds:f.any},{name:"text-max-width",type:c.size,triggersBounds:f.any},{name:"text-outline-width",type:c.size,triggersBounds:f.any},{name:"line-height",type:c.positiveNumber,triggersBounds:f.any}],m=[{name:"text-valign",type:c.valign,triggersBounds:f.any},{name:"text-halign",type:c.halign,triggersBounds:f.any},{name:"color",type:c.color},{name:"text-outline-color",type:c.color},{name:"text-outline-opacity",type:c.zeroOneNumber},{name:"text-background-color",type:c.color},{name:"text-background-opacity",type:c.zeroOneNumber},{name:"text-background-padding",type:c.size,triggersBounds:f.any},{name:"text-border-opacity",type:c.zeroOneNumber},{name:"text-border-color",type:c.color},{name:"text-border-width",type:c.size,triggersBounds:f.any},{name:"text-border-style",type:c.borderStyle,triggersBounds:f.any},{name:"text-background-shape",type:c.textBackgroundShape,triggersBounds:f.any},{name:"text-justification",type:c.justification},{name:"box-select-labels",type:c.bool,triggersBounds:f.any}],w=[{name:"events",type:c.bool,triggersZOrder:f.any},{name:"text-events",type:c.bool,triggersZOrder:f.any},{name:"box-selection",type:c.boxSelection,triggersZOrder:f.any}],x=[{name:"display",type:c.display,triggersZOrder:f.any,triggersBounds:f.any,triggersBoundsOfConnectedEdges:f.any,triggersBoundsOfParallelEdges:function(de,be,Pe){return de===be?!1:Pe.pstyle("curve-style").value==="bezier"}},{name:"visibility",type:c.visibility,triggersZOrder:f.any},{name:"opacity",type:c.zeroOneNumber,triggersZOrder:f.zeroNonZero},{name:"text-opacity",type:c.zeroOneNumber},{name:"min-zoomed-font-size",type:c.size},{name:"z-compound-depth",type:c.zCompoundDepth,triggersZOrder:f.any},{name:"z-index-compare",type:c.zIndexCompare,triggersZOrder:f.any},{name:"z-index",type:c.number,triggersZOrder:f.any}],b=[{name:"overlay-padding",type:c.size,triggersBounds:f.any},{name:"overlay-color",type:c.color},{name:"overlay-opacity",type:c.zeroOneNumber,triggersBounds:f.zeroNonZero},{name:"overlay-shape",type:c.overlayShape,triggersBounds:f.any},{name:"overlay-corner-radius",type:c.cornerRadius}],_=[{name:"underlay-padding",type:c.size,triggersBounds:f.any},{name:"underlay-color",type:c.color},{name:"underlay-opacity",type:c.zeroOneNumber,triggersBounds:f.zeroNonZero},{name:"underlay-shape",type:c.overlayShape,triggersBounds:f.any},{name:"underlay-corner-radius",type:c.cornerRadius}],E=[{name:"transition-property",type:c.propList},{name:"transition-duration",type:c.time},{name:"transition-delay",type:c.time},{name:"transition-timing-function",type:c.easing}],C=function(de,be){return be.value==="label"?-de.poolIndex():be.pfValue},B=[{name:"height",type:c.nodeSize,triggersBounds:f.any,hashOverride:C},{name:"width",type:c.nodeSize,triggersBounds:f.any,hashOverride:C},{name:"shape",type:c.nodeShape,triggersBounds:f.any},{name:"shape-polygon-points",type:c.polygonPointList,triggersBounds:f.any},{name:"corner-radius",type:c.cornerRadius},{name:"background-color",type:c.color},{name:"background-fill",type:c.fill},{name:"background-opacity",type:c.zeroOneNumber},{name:"background-blacken",type:c.nOneOneNumber},{name:"background-gradient-stop-colors",type:c.colors},{name:"background-gradient-stop-positions",type:c.percentages},{name:"background-gradient-direction",type:c.gradientDirection},{name:"padding",type:c.sizeMaybePercent,triggersBounds:f.any},{name:"padding-relative-to",type:c.paddingRelativeTo,triggersBounds:f.any},{name:"bounds-expansion",type:c.boundsExpansion,triggersBounds:f.any}],N=[{name:"border-color",type:c.color},{name:"border-opacity",type:c.zeroOneNumber},{name:"border-width",type:c.size,triggersBounds:f.any},{name:"border-style",type:c.borderStyle},{name:"border-cap",type:c.lineCap},{name:"border-join",type:c.lineJoin},{name:"border-dash-pattern",type:c.numbers},{name:"border-dash-offset",type:c.number},{name:"border-position",type:c.linePosition}],A=[{name:"outline-color",type:c.color},{name:"outline-opacity",type:c.zeroOneNumber},{name:"outline-width",type:c.size,triggersBounds:f.any},{name:"outline-style",type:c.borderStyle},{name:"outline-offset",type:c.size,triggersBounds:f.any}],z=[{name:"background-image",type:c.urls},{name:"background-image-crossorigin",type:c.bgCrossOrigin},{name:"background-image-opacity",type:c.zeroOneNumbers},{name:"background-image-containment",type:c.bgContainment},{name:"background-image-smoothing",type:c.bools},{name:"background-position-x",type:c.bgPos},{name:"background-position-y",type:c.bgPos},{name:"background-width-relative-to",type:c.bgRelativeTo},{name:"background-height-relative-to",type:c.bgRelativeTo},{name:"background-repeat",type:c.bgRepeat},{name:"background-fit",type:c.bgFit},{name:"background-clip",type:c.bgClip},{name:"background-width",type:c.bgWH},{name:"background-height",type:c.bgWH},{name:"background-offset-x",type:c.bgPos},{name:"background-offset-y",type:c.bgPos}],M=[{name:"position",type:c.position,triggersBounds:f.any},{name:"compound-sizing-wrt-labels",type:c.compoundIncludeLabels,triggersBounds:f.any},{name:"min-width",type:c.size,triggersBounds:f.any},{name:"min-width-bias-left",type:c.sizeMaybePercent,triggersBounds:f.any},{name:"min-width-bias-right",type:c.sizeMaybePercent,triggersBounds:f.any},{name:"min-height",type:c.size,triggersBounds:f.any},{name:"min-height-bias-top",type:c.sizeMaybePercent,triggersBounds:f.any},{name:"min-height-bias-bottom",type:c.sizeMaybePercent,triggersBounds:f.any}],V=[{name:"line-style",type:c.lineStyle},{name:"line-color",type:c.color},{name:"line-fill",type:c.fill},{name:"line-cap",type:c.lineCap},{name:"line-opacity",type:c.zeroOneNumber},{name:"line-dash-pattern",type:c.numbers},{name:"line-dash-offset",type:c.number},{name:"line-outline-width",type:c.size},{name:"line-outline-color",type:c.color},{name:"line-gradient-stop-colors",type:c.colors},{name:"line-gradient-stop-positions",type:c.percentages},{name:"curve-style",type:c.curveStyle,triggersBounds:f.any,triggersBoundsOfParallelEdges:function(de,be){return de===be?!1:de==="bezier"||be==="bezier"}},{name:"haystack-radius",type:c.zeroOneNumber,triggersBounds:f.any},{name:"source-endpoint",type:c.edgeEndpoint,triggersBounds:f.any},{name:"target-endpoint",type:c.edgeEndpoint,triggersBounds:f.any},{name:"control-point-step-size",type:c.size,triggersBounds:f.any},{name:"control-point-distances",type:c.bidirectionalSizes,triggersBounds:f.any},{name:"control-point-weights",type:c.numbers,triggersBounds:f.any},{name:"segment-distances",type:c.bidirectionalSizes,triggersBounds:f.any},{name:"segment-weights",type:c.numbers,triggersBounds:f.any},{name:"segment-radii",type:c.numbers,triggersBounds:f.any},{name:"radius-type",type:c.radiusType,triggersBounds:f.any},{name:"taxi-turn",type:c.bidirectionalSizeMaybePercent,triggersBounds:f.any},{name:"taxi-turn-min-distance",type:c.size,triggersBounds:f.any},{name:"taxi-direction",type:c.axisDirection,triggersBounds:f.any},{name:"taxi-radius",type:c.number,triggersBounds:f.any},{name:"edge-distances",type:c.edgeDistances,triggersBounds:f.any},{name:"arrow-scale",type:c.positiveNumber,triggersBounds:f.any},{name:"loop-direction",type:c.angle,triggersBounds:f.any},{name:"loop-sweep",type:c.angle,triggersBounds:f.any},{name:"source-distance-from-node",type:c.size,triggersBounds:f.any},{name:"target-distance-from-node",type:c.size,triggersBounds:f.any}],q=[{name:"ghost",type:c.bool,triggersBounds:f.any},{name:"ghost-offset-x",type:c.bidirectionalSize,triggersBounds:f.any},{name:"ghost-offset-y",type:c.bidirectionalSize,triggersBounds:f.any},{name:"ghost-opacity",type:c.zeroOneNumber}],I=[{name:"selection-box-color",type:c.color},{name:"selection-box-opacity",type:c.zeroOneNumber},{name:"selection-box-border-color",type:c.color},{name:"selection-box-border-width",type:c.size},{name:"active-bg-color",type:c.color},{name:"active-bg-opacity",type:c.zeroOneNumber},{name:"active-bg-size",type:c.size},{name:"outside-texture-bg-color",type:c.color},{name:"outside-texture-bg-opacity",type:c.zeroOneNumber}],F=[];Wt.pieBackgroundN=16,F.push({name:"pie-size",type:c.sizeMaybePercent}),F.push({name:"pie-hole",type:c.sizeMaybePercent}),F.push({name:"pie-start-angle",type:c.angle});for(var T=1;T<=Wt.pieBackgroundN;T++)F.push({name:"pie-"+T+"-background-color",type:c.color}),F.push({name:"pie-"+T+"-background-size",type:c.percent}),F.push({name:"pie-"+T+"-background-opacity",type:c.zeroOneNumber});var H=[];Wt.stripeBackgroundN=16,H.push({name:"stripe-size",type:c.sizeMaybePercent}),H.push({name:"stripe-direction",type:c.axisDirectionPrimary});for(var Q=1;Q<=Wt.stripeBackgroundN;Q++)H.push({name:"stripe-"+Q+"-background-color",type:c.color}),H.push({name:"stripe-"+Q+"-background-size",type:c.percent}),H.push({name:"stripe-"+Q+"-background-opacity",type:c.zeroOneNumber});var W=[],Z=Wt.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:c.arrowShape,triggersBounds:f.any},{name:"arrow-color",type:c.color},{name:"arrow-fill",type:c.arrowFill},{name:"arrow-width",type:c.arrowWidth}].forEach(function(fe){Z.forEach(function(de){var be=de+"-"+fe.name,Pe=fe.type,D=fe.triggersBounds;W.push({name:be,type:Pe,triggersBounds:D})})},{});var X=Wt.properties=[].concat(w,E,x,b,_,q,m,g,d,h,p,B,N,A,z,F,H,M,V,W,I),te=Wt.propertyGroups={behavior:w,transition:E,visibility:x,overlay:b,underlay:_,ghost:q,commonLabel:m,labelDimensions:g,mainLabel:d,sourceLabel:h,targetLabel:p,nodeBody:B,nodeBorder:N,nodeOutline:A,backgroundImage:z,pie:F,stripe:H,compound:M,edgeLine:V,edgeArrow:W,core:I},L=Wt.propertyGroupNames={},U=Wt.propertyGroupKeys=Object.keys(te);U.forEach(function(fe){L[fe]=te[fe].map(function(de){return de.name}),te[fe].forEach(function(de){return de.groupKey=fe})});var oe=Wt.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"segment-distance",pointsTo:"segment-distances"},{name:"segment-weight",pointsTo:"segment-weights"},{name:"segment-radius",pointsTo:"segment-radii"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];Wt.propertyNames=X.map(function(fe){return fe.name});for(var ie=0;ie<X.length;ie++){var ne=X[ie];X[ne.name]=ne}for(var we=0;we<oe.length;we++){var Te=oe[we],ke=X[Te.pointsTo],ge={name:Te.name,alias:!0,pointsTo:ke};X.push(ge),X[Te.name]=ge}})();Wt.getDefaultProperty=function(r){return this.getDefaultProperties()[r]};Wt.getDefaultProperties=function(){var r=this._private;if(r.defaultProperties!=null)return r.defaultProperties;for(var e=et({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","box-selection":"contain","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","overlay-corner-radius":"auto","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","underlay-corner-radius":"auto","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","box-select-labels":"no","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","border-dash-pattern":[4,2],"border-dash-offset":0,"border-cap":"butt","border-join":"miter","border-position":"center","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","corner-radius":"auto","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%","pie-hole":0,"pie-start-angle":"0deg"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(f,c){for(var d=1;d<=Wt.pieBackgroundN;d++){var h=c.name.replace("{{i}}",d),p=c.value;f[h]=p}return f},{}),{"stripe-size":"100%","stripe-direction":"horizontal"},[{name:"stripe-{{i}}-background-color",value:"black"},{name:"stripe-{{i}}-background-size",value:"0%"},{name:"stripe-{{i}}-background-opacity",value:1}].reduce(function(f,c){for(var d=1;d<=Wt.stripeBackgroundN;d++){var h=c.name.replace("{{i}}",d),p=c.value;f[h]=p}return f},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-outline-width":0,"line-outline-color":"#000","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"segment-radii":15,"radius-type":"arc-radius","taxi-turn":"50%","taxi-radius":15,"taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce(function(f,c){return Wt.arrowPrefixes.forEach(function(d){var h=d+"-"+c.name,p=c.value;f[h]=p}),f},{})),t={},n=0;n<this.properties.length;n++){var a=this.properties[n];if(!a.pointsTo){var i=a.name,o=e[i],u=this.parse(i,o);t[i]=u}}return r.defaultProperties=t,r.defaultProperties};Wt.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var Wl={};Wl.parse=function(r,e,t,n){var a=this;if(zt(e))return a.parseImplWarn(r,e,t,n);var i=n==="mapping"||n===!0||n===!1||n==null?"dontcare":n,o=t?"t":"f",u=""+e,f=y1(r,u,o,i),c=a.propCache=a.propCache||[],d;return(d=c[f])||(d=c[f]=a.parseImplWarn(r,e,t,n)),(t||n==="mapping")&&(d=Sn(d),d&&(d.value=Sn(d.value))),d};Wl.parseImplWarn=function(r,e,t,n){var a=this.parseImpl(r,e,t,n);return!a&&e!=null&&gt("The style property `".concat(r,": ").concat(e,"` is invalid")),a&&(a.name==="width"||a.name==="height")&&e==="label"&&gt("The style value of `label` is deprecated for `"+a.name+"`"),a};Wl.parseImpl=function(r,e,t,n){var a=this;r=Hh(r);var i=a.properties[r],o=e,u=a.types;if(!i||e===void 0)return null;i.alias&&(i=i.pointsTo,r=i.name);var f=Ye(e);f&&(e=e.trim());var c=i.type;if(!c)return null;if(t&&(e===""||e===null))return{name:r,value:e,bypass:!0,deleteBypass:!0};if(zt(e))return{name:r,value:e,strValue:"fn",mapped:u.fn,bypass:t};var d,h;if(!(!f||n||e.length<7||e[1]!=="a")){if(e.length>=7&&e[0]==="d"&&(d=new RegExp(u.data.regex).exec(e))){if(t)return!1;var p=u.data;return{name:r,value:d,strValue:""+e,mapped:p,field:d[1],bypass:t}}else if(e.length>=10&&e[0]==="m"&&(h=new RegExp(u.mapData.regex).exec(e))){if(t||c.multiple)return!1;var g=u.mapData;if(!(c.color||c.number))return!1;var m=this.parse(r,h[4]);if(!m||m.mapped)return!1;var w=this.parse(r,h[5]);if(!w||w.mapped)return!1;if(m.pfValue===w.pfValue||m.strValue===w.strValue)return gt("`"+r+": "+e+"` is not a valid mapper because the output range is zero; converting to `"+r+": "+m.strValue+"`"),this.parse(r,m.strValue);if(c.color){var x=m.value,b=w.value,_=x[0]===b[0]&&x[1]===b[1]&&x[2]===b[2]&&(x[3]===b[3]||(x[3]==null||x[3]===1)&&(b[3]==null||b[3]===1));if(_)return!1}return{name:r,value:h,strValue:""+e,mapped:g,field:h[1],fieldMin:parseFloat(h[2]),fieldMax:parseFloat(h[3]),valueMin:m.value,valueMax:w.value,bypass:t}}}if(c.multiple&&n!=="multiple"){var E;if(f?E=e.split(/\s+/):wt(e)?E=e:E=[e],c.evenMultiple&&E.length%2!==0)return null;for(var C=[],B=[],N=[],A="",z=!1,M=0;M<E.length;M++){var V=a.parse(r,E[M],t,"multiple");z=z||Ye(V.value),C.push(V.value),N.push(V.pfValue!=null?V.pfValue:V.value),B.push(V.units),A+=(M>0?" ":"")+V.strValue}return c.validate&&!c.validate(C,B)?null:c.singleEnum&&z?C.length===1&&Ye(C[0])?{name:r,value:C[0],strValue:C[0],bypass:t}:null:{name:r,value:C,pfValue:N,strValue:A,bypass:t,units:B}}var q=function(){for(var ge=0;ge<c.enums.length;ge++){var fe=c.enums[ge];if(fe===e)return{name:r,value:e,strValue:""+e,bypass:t}}return null};if(c.number){var I,F="px";if(c.units&&(I=c.units),c.implicitUnits&&(F=c.implicitUnits),!c.unitless)if(f){var T="px|em"+(c.allowPercent?"|\\%":"");I&&(T=I);var H=e.match("^("+Yt+")("+T+")?$");H&&(e=H[1],I=H[2]||F)}else(!I||c.implicitUnits)&&(I=F);if(e=parseFloat(e),isNaN(e)&&c.enums===void 0)return null;if(isNaN(e)&&c.enums!==void 0)return e=o,q();if(c.integer&&!C_(e)||c.min!==void 0&&(e<c.min||c.strictMin&&e===c.min)||c.max!==void 0&&(e>c.max||c.strictMax&&e===c.max))return null;var Q={name:r,value:e,strValue:""+e+(I||""),units:I,bypass:t};return c.unitless||I!=="px"&&I!=="em"?Q.pfValue=e:Q.pfValue=I==="px"||!I?e:this.getEmSizeInPixels()*e,(I==="ms"||I==="s")&&(Q.pfValue=I==="ms"?e:1e3*e),(I==="deg"||I==="rad")&&(Q.pfValue=I==="rad"?e:OE(e)),I==="%"&&(Q.pfValue=e/100),Q}else if(c.propList){var W=[],Z=""+e;if(Z!=="none"){for(var X=Z.split(/\s*,\s*|\s+/),te=0;te<X.length;te++){var L=X[te].trim();a.properties[L]?W.push(L):gt("`"+L+"` is not a valid property name")}if(W.length===0)return null}return{name:r,value:W,strValue:W.length===0?"none":W.join(" "),bypass:t}}else if(c.color){var U=c1(e);return U?{name:r,value:U,pfValue:U,strValue:"rgb("+U[0]+","+U[1]+","+U[2]+")",bypass:t}:null}else if(c.regex||c.regexes){if(c.enums){var oe=q();if(oe)return oe}for(var ie=c.regexes?c.regexes:[c.regex],ne=0;ne<ie.length;ne++){var we=new RegExp(ie[ne]),Te=we.exec(e);if(Te)return{name:r,value:c.singleRegexMatchValue?Te[1]:Te,strValue:""+e,bypass:t}}return null}else return c.string?{name:r,value:""+e,strValue:""+e,bypass:t}:c.enums?q():null};var ar=function(e){if(!(this instanceof ar))return new ar(e);if(!Wh(e)){At("A style must have a core reference");return}this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()},br=ar.prototype;br.instanceString=function(){return"style"};br.clear=function(){for(var r=this._private,e=r.cy,t=e.elements(),n=0;n<this.length;n++)this[n]=void 0;return this.length=0,r.contextStyles={},r.propDiffs={},this.cleanElements(t,!0),t.forEach(function(a){var i=a[0]._private;i.styleDirty=!0,i.appliedInitStyle=!1}),this};br.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this};br.core=function(r){return this._private.coreStyle[r]||this.getDefaultProperty(r)};br.selector=function(r){var e=r==="core"?null:new _a(r),t=this.length++;return this[t]={selector:e,properties:[],mappedProperties:[],index:t},this};br.css=function(){var r=this,e=arguments;if(e.length===1)for(var t=e[0],n=0;n<r.properties.length;n++){var a=r.properties[n],i=t[a.name];i===void 0&&(i=t[Al(a.name)]),i!==void 0&&this.cssRule(a.name,i)}else e.length===2&&this.cssRule(e[0],e[1]);return this};br.style=br.css;br.cssRule=function(r,e){var t=this.parse(r,e);if(t){var n=this.length-1;this[n].properties.push(t),this[n].properties[t.name]=t,t.name.match(/pie-(\d+)-background-size/)&&t.value&&(this._private.hasPie=!0),t.name.match(/stripe-(\d+)-background-size/)&&t.value&&(this._private.hasStripe=!0),t.mapped&&this[n].mappedProperties.push(t);var a=!this[n].selector;a&&(this._private.coreStyle[t.name]=t)}return this};br.append=function(r){return u1(r)?r.appendToStyle(this):wt(r)?this.appendFromJson(r):Ye(r)&&this.appendFromString(r),this};ar.fromJson=function(r,e){var t=new ar(r);return t.fromJson(e),t};ar.fromString=function(r,e){return new ar(r).fromString(e)};[ir,Ao,ov,kn,ql,uv,Wt,Wl].forEach(function(r){et(br,r)});ar.types=br.types;ar.properties=br.properties;ar.propertyGroups=br.propertyGroups;ar.propertyGroupNames=br.propertyGroupNames;ar.propertyGroupKeys=br.propertyGroupKeys;var UC={style:function(e){if(e){var t=this.setStyle(e);t.update()}return this._private.style},setStyle:function(e){var t=this._private;return u1(e)?t.style=e.generateStyle(this):wt(e)?t.style=ar.fromJson(this,e):Ye(e)?t.style=ar.fromString(this,e):t.style=ar(this),t.style},updateStyle:function(){this.mutableElements().updateStyle()}},$C="single",ti={autolock:function(e){if(e!==void 0)this._private.autolock=!!e;else return this._private.autolock;return this},autoungrabify:function(e){if(e!==void 0)this._private.autoungrabify=!!e;else return this._private.autoungrabify;return this},autounselectify:function(e){if(e!==void 0)this._private.autounselectify=!!e;else return this._private.autounselectify;return this},selectionType:function(e){var t=this._private;if(t.selectionType==null&&(t.selectionType=$C),e!==void 0)(e==="additive"||e==="single")&&(t.selectionType=e);else return t.selectionType;return this},panningEnabled:function(e){if(e!==void 0)this._private.panningEnabled=!!e;else return this._private.panningEnabled;return this},userPanningEnabled:function(e){if(e!==void 0)this._private.userPanningEnabled=!!e;else return this._private.userPanningEnabled;return this},zoomingEnabled:function(e){if(e!==void 0)this._private.zoomingEnabled=!!e;else return this._private.zoomingEnabled;return this},userZoomingEnabled:function(e){if(e!==void 0)this._private.userZoomingEnabled=!!e;else return this._private.userZoomingEnabled;return this},boxSelectionEnabled:function(e){if(e!==void 0)this._private.boxSelectionEnabled=!!e;else return this._private.boxSelectionEnabled;return this},pan:function(){var e=arguments,t=this._private.pan,n,a,i,o,u;switch(e.length){case 0:return t;case 1:if(Ye(e[0]))return n=e[0],t[n];if(dt(e[0])){if(!this._private.panningEnabled)return this;i=e[0],o=i.x,u=i.y,Ue(o)&&(t.x=o),Ue(u)&&(t.y=u),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;n=e[0],a=e[1],(n==="x"||n==="y")&&Ue(a)&&(t[n]=a),this.emit("pan viewport");break}return this.notify("viewport"),this},panBy:function(e,t){var n=arguments,a=this._private.pan,i,o,u,f,c;if(!this._private.panningEnabled)return this;switch(n.length){case 1:dt(e)&&(u=n[0],f=u.x,c=u.y,Ue(f)&&(a.x+=f),Ue(c)&&(a.y+=c),this.emit("pan viewport"));break;case 2:i=e,o=t,(i==="x"||i==="y")&&Ue(o)&&(a[i]+=o),this.emit("pan viewport");break}return this.notify("viewport"),this},gc:function(){this.notify("gc")},fit:function(e,t){var n=this.getFitViewport(e,t);if(n){var a=this._private;a.zoom=n.zoom,a.pan=n.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,t){if(Ue(e)&&t===void 0&&(t=e,e=void 0),!(!this._private.panningEnabled||!this._private.zoomingEnabled)){var n;if(Ye(e)){var a=e;e=this.$(a)}else if(R_(e)){var i=e;n={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2},n.w=n.x2-n.x1,n.h=n.y2-n.y1}else Gr(e)||(e=this.mutableElements());if(!(Gr(e)&&e.empty())){n=n||e.boundingBox();var o=this.width(),u=this.height(),f;if(t=Ue(t)?t:0,!isNaN(o)&&!isNaN(u)&&o>0&&u>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0){f=Math.min((o-2*t)/n.w,(u-2*t)/n.h),f=f>this._private.maxZoom?this._private.maxZoom:f,f=f<this._private.minZoom?this._private.minZoom:f;var c={x:(o-f*(n.x1+n.x2))/2,y:(u-f*(n.y1+n.y2))/2};return{zoom:f,pan:c}}}}},zoomRange:function(e,t){var n=this._private;if(t==null){var a=e;e=a.min,t=a.max}return Ue(e)&&Ue(t)&&e<=t?(n.minZoom=e,n.maxZoom=t):Ue(e)&&t===void 0&&e<=n.maxZoom?n.minZoom=e:Ue(t)&&e===void 0&&t>=n.minZoom&&(n.maxZoom=t),this},minZoom:function(e){return e===void 0?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return e===void 0?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var t=this._private,n=t.pan,a=t.zoom,i,o,u=!1;if(t.zoomingEnabled||(u=!0),Ue(e)?o=e:dt(e)&&(o=e.level,e.position!=null?i=Ll(e.position,a,n):e.renderedPosition!=null&&(i=e.renderedPosition),i!=null&&!t.panningEnabled&&(u=!0)),o=o>t.maxZoom?t.maxZoom:o,o=o<t.minZoom?t.minZoom:o,u||!Ue(o)||o===a||i!=null&&(!Ue(i.x)||!Ue(i.y)))return null;if(i!=null){var f=n,c=a,d=o,h={x:-d/c*(i.x-f.x)+i.x,y:-d/c*(i.y-f.y)+i.y};return{zoomed:!0,panned:!0,zoom:d,pan:h}}else return{zoomed:!0,panned:!1,zoom:o,pan:n}},zoom:function(e){if(e===void 0)return this._private.zoom;var t=this.getZoomedViewport(e),n=this._private;return t==null||!t.zoomed?this:(n.zoom=t.zoom,t.panned&&(n.pan.x=t.pan.x,n.pan.y=t.pan.y),this.emit("zoom"+(t.panned?" pan":"")+" viewport"),this.notify("viewport"),this)},viewport:function(e){var t=this._private,n=!0,a=!0,i=[],o=!1,u=!1;if(!e)return this;if(Ue(e.zoom)||(n=!1),dt(e.pan)||(a=!1),!n&&!a)return this;if(n){var f=e.zoom;f<t.minZoom||f>t.maxZoom||!t.zoomingEnabled?o=!0:(t.zoom=f,i.push("zoom"))}if(a&&(!o||!e.cancelOnFailedZoom)&&t.panningEnabled){var c=e.pan;Ue(c.x)&&(t.pan.x=c.x,u=!1),Ue(c.y)&&(t.pan.y=c.y,u=!1),u||i.push("pan")}return i.length>0&&(i.push("viewport"),this.emit(i.join(" ")),this.notify("viewport")),this},center:function(e){var t=this.getCenterPan(e);return t&&(this._private.pan=t,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,t){if(this._private.panningEnabled){if(Ye(e)){var n=e;e=this.mutableElements().filter(n)}else Gr(e)||(e=this.mutableElements());if(e.length!==0){var a=e.boundingBox(),i=this.width(),o=this.height();t=t===void 0?this._private.zoom:t;var u={x:(i-t*(a.x1+a.x2))/2,y:(o-t*(a.y1+a.y2))/2};return u}}},reset:function(){return!this._private.panningEnabled||!this._private.zoomingEnabled?this:(this.viewport({pan:{x:0,y:0},zoom:1}),this)},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e=this._private,t=e.container,n=this;return e.sizeCache=e.sizeCache||(t?(function(){var a=n.window().getComputedStyle(t),i=function(u){return parseFloat(a.getPropertyValue(u))};return{width:t.clientWidth-i("padding-left")-i("padding-right"),height:t.clientHeight-i("padding-top")-i("padding-bottom")}})():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,t=this._private.zoom,n=this.renderedExtent(),a={x1:(n.x1-e.x)/t,x2:(n.x2-e.x)/t,y1:(n.y1-e.y)/t,y2:(n.y2-e.y)/t};return a.w=a.x2-a.x1,a.h=a.y2-a.y1,a},renderedExtent:function(){var e=this.width(),t=this.height();return{x1:0,y1:0,x2:e,y2:t,w:e,h:t}},multiClickDebounceTime:function(e){if(e)this._private.multiClickDebounceTime=e;else return this._private.multiClickDebounceTime;return this}};ti.centre=ti.center;ti.autolockNodes=ti.autolock;ti.autoungrabifyNodes=ti.autoungrabify;var yo={data:pt.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:pt.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:pt.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:pt.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};yo.attr=yo.data;yo.removeAttr=yo.removeData;var wo=function(e){var t=this;e=et({},e);var n=e.container;n&&!ml(n)&&ml(n[0])&&(n=n[0]);var a=n?n._cyreg:null;a=a||{},a&&a.cy&&(a.cy.destroy(),a={});var i=a.readies=a.readies||[];n&&(n._cyreg=a),a.cy=t;var o=Xt!==void 0&&n!==void 0&&!e.headless,u=e;u.layout=et({name:o?"grid":"null"},u.layout),u.renderer=et({name:o?"canvas":"null"},u.renderer);var f=function(m,w,x){return w!==void 0?w:x!==void 0?x:m},c=this._private={container:n,ready:!1,options:u,elements:new cr(this),listeners:[],aniEles:new cr(this),data:u.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:f(!0,u.zoomingEnabled),userZoomingEnabled:f(!0,u.userZoomingEnabled),panningEnabled:f(!0,u.panningEnabled),userPanningEnabled:f(!0,u.userPanningEnabled),boxSelectionEnabled:f(!0,u.boxSelectionEnabled),autolock:f(!1,u.autolock,u.autolockNodes),autoungrabify:f(!1,u.autoungrabify,u.autoungrabifyNodes),autounselectify:f(!1,u.autounselectify),styleEnabled:u.styleEnabled===void 0?o:u.styleEnabled,zoom:Ue(u.zoom)?u.zoom:1,pan:{x:dt(u.pan)&&Ue(u.pan.x)?u.pan.x:0,y:dt(u.pan)&&Ue(u.pan.y)?u.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:f(250,u.multiClickDebounceTime)};this.createEmitter(),this.selectionType(u.selectionType),this.zoomRange({min:u.minZoom,max:u.maxZoom});var d=function(m,w){var x=m.some(B_);if(x)return es.all(m).then(w);w(m)};c.styleEnabled&&t.setStyle([]);var h=et({},u,u.renderer);t.initRenderer(h);var p=function(m,w,x){t.notifications(!1);var b=t.mutableElements();b.length>0&&b.remove(),m!=null&&(dt(m)||wt(m))&&t.add(m),t.one("layoutready",function(E){t.notifications(!0),t.emit(E),t.one("load",w),t.emitAndNotify("load")}).one("layoutstop",function(){t.one("done",x),t.emit("done")});var _=et({},t._private.options.layout);_.eles=t.elements(),t.layout(_).run()};d([u.style,u.elements],function(g){var m=g[0],w=g[1];c.styleEnabled&&t.style().append(m),p(w,function(){t.startAnimationLoop(),c.ready=!0,zt(u.ready)&&t.on("ready",u.ready);for(var x=0;x<i.length;x++){var b=i[x];t.on("ready",b)}a&&(a.readies=[]),t.emit("ready")},u.done)})},Sl=wo.prototype;et(Sl,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},window:function(){var e=this._private.container;if(e==null)return Xt;var t=this._private.container.ownerDocument;return t===void 0||t==null?Xt:t.defaultView||Xt},mount:function(e){if(e!=null){var t=this,n=t._private,a=n.options;return!ml(e)&&ml(e[0])&&(e=e[0]),t.stopAnimationLoop(),t.destroyRenderer(),n.container=e,n.styleEnabled=!0,t.invalidateSize(),t.initRenderer(et({},a,a.renderer,{name:a.renderer.name==="null"?"canvas":a.renderer.name})),t.startAnimationLoop(),t.style(a.style),t.emit("mount"),t}},unmount:function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},options:function(){return Sn(this._private.options)},json:function(e){var t=this,n=t._private,a=t.mutableElements(),i=function(C){return t.getElementById(C.id())};if(dt(e)){if(t.startBatch(),e.elements){var o={},u=function(C,B){for(var N=[],A=[],z=0;z<C.length;z++){var M=C[z];if(!M.data.id){gt("cy.json() cannot handle elements without an ID attribute");continue}var V=""+M.data.id,q=t.getElementById(V);o[V]=!0,q.length!==0?A.push({ele:q,json:M}):(B&&(M.group=B),N.push(M))}t.add(N);for(var I=0;I<A.length;I++){var F=A[I],T=F.ele,H=F.json;T.json(H)}};if(wt(e.elements))u(e.elements);else for(var f=["nodes","edges"],c=0;c<f.length;c++){var d=f[c],h=e.elements[d];wt(h)&&u(h,d)}var p=t.collection();a.filter(function(E){return!o[E.id()]}).forEach(function(E){E.isParent()?p.merge(E):E.remove()}),p.forEach(function(E){return E.children().move({parent:null})}),p.forEach(function(E){return i(E).remove()})}e.style&&t.style(e.style),e.zoom!=null&&e.zoom!==n.zoom&&t.zoom(e.zoom),e.pan&&(e.pan.x!==n.pan.x||e.pan.y!==n.pan.y)&&t.pan(e.pan),e.data&&t.data(e.data);for(var g=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],m=0;m<g.length;m++){var w=g[m];e[w]!=null&&t[w](e[w])}return t.endBatch(),this}else{var x=!!e,b={};x?b.elements=this.elements().map(function(E){return E.json()}):(b.elements={},a.forEach(function(E){var C=E.group();b.elements[C]||(b.elements[C]=[]),b.elements[C].push(E.json())})),this._private.styleEnabled&&(b.style=t.style().json()),b.data=Sn(t.data());var _=n.options;return b.zoomingEnabled=n.zoomingEnabled,b.userZoomingEnabled=n.userZoomingEnabled,b.zoom=n.zoom,b.minZoom=n.minZoom,b.maxZoom=n.maxZoom,b.panningEnabled=n.panningEnabled,b.userPanningEnabled=n.userPanningEnabled,b.pan=Sn(n.pan),b.boxSelectionEnabled=n.boxSelectionEnabled,b.renderer=Sn(_.renderer),b.hideEdgesOnViewport=_.hideEdgesOnViewport,b.textureOnViewport=_.textureOnViewport,b.wheelSensitivity=_.wheelSensitivity,b.motionBlur=_.motionBlur,b.multiClickDebounceTime=_.multiClickDebounceTime,b}}});Sl.$id=Sl.getElementById;[BC,NC,uw,Ah,cl,MC,Dh,dl,UC,ti,yo].forEach(function(r){et(Sl,r)});var VC={fit:!0,directed:!1,direction:"downward",padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}},jC={maximal:!1,acyclic:!1},Oi=function(e){return e.scratch("breadthfirst")},h0=function(e,t){return e.scratch("breadthfirst",t)};function lw(r){this.options=et({},VC,jC,r)}lw.prototype.run=function(){var r=this.options,e=r.cy,t=r.eles,n=t.nodes().filter(function(ae){return ae.isChildless()}),a=t,i=r.directed,o=r.acyclic||r.maximal||r.maximalAdjustments>0,u=!!r.boundingBox,f=Rr(u?r.boundingBox:structuredClone(e.extent())),c;if(Gr(r.roots))c=r.roots;else if(wt(r.roots)){for(var d=[],h=0;h<r.roots.length;h++){var p=r.roots[h],g=e.getElementById(p);d.push(g)}c=e.collection(d)}else if(Ye(r.roots))c=e.$(r.roots);else if(i)c=n.roots();else{var m=t.components();c=e.collection();for(var w=function(){var he=m[x],me=he.maxDegree(!1),se=he.filter(function(Re){return Re.degree(!1)===me});c=c.add(se)},x=0;x<m.length;x++)w()}var b=[],_={},E=function(he,me){b[me]==null&&(b[me]=[]);var se=b[me].length;b[me].push(he),h0(he,{index:se,depth:me})},C=function(he,me){var se=Oi(he),Re=se.depth,De=se.index;b[Re][De]=null,he.isChildless()&&E(he,me)};a.bfs({roots:c,directed:r.directed,visit:function(he,me,se,Re,De){var Be=he[0],ze=Be.id();Be.isChildless()&&E(Be,De),_[ze]=!0}});for(var B=[],N=0;N<n.length;N++){var A=n[N];_[A.id()]||B.push(A)}var z=function(he){for(var me=b[he],se=0;se<me.length;se++){var Re=me[se];if(Re==null){me.splice(se,1),se--;continue}h0(Re,{depth:he,index:se})}},M=function(he,me){for(var se=Oi(he),Re=he.incomers().filter(function(G){return G.isNode()&&t.has(G)}),De=-1,Be=he.id(),ze=0;ze<Re.length;ze++){var $=Re[ze],k=Oi($);De=Math.max(De,k.depth)}if(se.depth<=De){if(!r.acyclic&&me[Be])return null;var R=De+1;return C(he,R),me[Be]=R,!0}return!1};if(i&&o){var V=[],q={},I=function(he){return V.push(he)},F=function(){return V.shift()};for(n.forEach(function(ae){return V.push(ae)});V.length>0;){var T=F(),H=M(T,q);if(H)T.outgoers().filter(function(ae){return ae.isNode()&&t.has(ae)}).forEach(I);else if(H===null){gt("Detected double maximal shift for node `"+T.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}var Q=0;if(r.avoidOverlap)for(var W=0;W<n.length;W++){var Z=n[W],X=Z.layoutDimensions(r),te=X.w,L=X.h;Q=Math.max(Q,te,L)}var U={},oe=function(he){if(U[he.id()])return U[he.id()];for(var me=Oi(he).depth,se=he.neighborhood(),Re=0,De=0,Be=0;Be<se.length;Be++){var ze=se[Be];if(!(ze.isEdge()||ze.isParent()||!n.has(ze))){var $=Oi(ze);if($!=null){var k=$.index,R=$.depth;if(!(k==null||R==null)){var G=b[R].length;R<me&&(Re+=k/G,De++)}}}}return De=Math.max(1,De),Re=Re/De,De===0&&(Re=0),U[he.id()]=Re,Re},ie=function(he,me){var se=oe(he),Re=oe(me),De=se-Re;return De===0?f1(he.id(),me.id()):De};r.depthSort!==void 0&&(ie=r.depthSort);for(var ne=b.length,we=0;we<ne;we++)b[we].sort(ie),z(we);for(var Te=[],ke=0;ke<B.length;ke++)Te.push(B[ke]);var ge=function(){for(var he=0;he<ne;he++)z(he)};Te.length&&(b.unshift(Te),ne=b.length,ge());for(var fe=0,de=0;de<ne;de++)fe=Math.max(b[de].length,fe);var be={x:f.x1+f.w/2,y:f.y1+f.h/2},Pe=n.reduce(function(ae,he){return(function(me){return{w:ae.w===-1?me.w:(ae.w+me.w)/2,h:ae.h===-1?me.h:(ae.h+me.h)/2}})(he.boundingBox({includeLabels:r.nodeDimensionsIncludeLabels}))},{w:-1,h:-1}),D=Math.max(ne===1?0:u?(f.h-r.padding*2-Pe.h)/(ne-1):(f.h-r.padding*2-Pe.h)/(ne+1),Q),ve=b.reduce(function(ae,he){return Math.max(ae,he.length)},0),pe=function(he){var me=Oi(he),se=me.depth,Re=me.index;if(r.circle){var De=Math.min(f.w/2/ne,f.h/2/ne);De=Math.max(De,Q);var Be=De*se+De-(ne>0&&b[0].length<=3?De/2:0),ze=2*Math.PI/b[se].length*Re;return se===0&&b[0].length===1&&(Be=1),{x:be.x+Be*Math.cos(ze),y:be.y+Be*Math.sin(ze)}}else{var $=b[se].length,k=Math.max($===1?0:u?(f.w-r.padding*2-Pe.w)/((r.grid?ve:$)-1):(f.w-r.padding*2-Pe.w)/((r.grid?ve:$)+1),Q),R={x:be.x+(Re+1-($+1)/2)*k,y:be.y+(se+1-(ne+1)/2)*D};return R}},Y={downward:0,leftward:90,upward:180,rightward:-90};Object.keys(Y).indexOf(r.direction)===-1&&At("Invalid direction '".concat(r.direction,"' specified for breadthfirst layout. Valid values are: ").concat(Object.keys(Y).join(", ")));var K=function(he){return iE(pe(he),f,Y[r.direction])};return t.nodes().layoutPositions(this,r,K),this};var qC={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function fw(r){this.options=et({},qC,r)}fw.prototype.run=function(){var r=this.options,e=r,t=r.cy,n=e.eles,a=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,i=n.nodes().not(":parent");e.sort&&(i=i.sort(e.sort));for(var o=Rr(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()}),u={x:o.x1+o.w/2,y:o.y1+o.h/2},f=e.sweep===void 0?2*Math.PI-2*Math.PI/i.length:e.sweep,c=f/Math.max(1,i.length-1),d,h=0,p=0;p<i.length;p++){var g=i[p],m=g.layoutDimensions(e),w=m.w,x=m.h;h=Math.max(h,w,x)}if(Ue(e.radius)?d=e.radius:i.length<=1?d=0:d=Math.min(o.h,o.w)/2-h,i.length>1&&e.avoidOverlap){h*=1.75;var b=Math.cos(c)-Math.cos(0),_=Math.sin(c)-Math.sin(0),E=Math.sqrt(h*h/(b*b+_*_));d=Math.max(E,d)}var C=function(N,A){var z=e.startAngle+A*c*(a?1:-1),M=d*Math.cos(z),V=d*Math.sin(z),q={x:u.x+M,y:u.y+V};return q};return n.nodes().layoutPositions(this,e,C),this};var WC={fit:!0,padding:30,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function cw(r){this.options=et({},WC,r)}cw.prototype.run=function(){for(var r=this.options,e=r,t=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,n=r.cy,a=e.eles,i=a.nodes().not(":parent"),o=Rr(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),u={x:o.x1+o.w/2,y:o.y1+o.h/2},f=[],c=0,d=0;d<i.length;d++){var h=i[d],p=void 0;p=e.concentric(h),f.push({value:p,node:h}),h._private.scratch.concentric=p}i.updateStyle();for(var g=0;g<i.length;g++){var m=i[g],w=m.layoutDimensions(e);c=Math.max(c,w.w,w.h)}f.sort(function(D,ve){return ve.value-D.value});for(var x=e.levelWidth(i),b=[[]],_=b[0],E=0;E<f.length;E++){var C=f[E];if(_.length>0){var B=Math.abs(_[0].value-C.value);B>=x&&(_=[],b.push(_))}_.push(C)}var N=c+e.minNodeSpacing;if(!e.avoidOverlap){var A=b.length>0&&b[0].length>1,z=Math.min(o.w,o.h)/2-N,M=z/(b.length+A?1:0);N=Math.min(N,M)}for(var V=0,q=0;q<b.length;q++){var I=b[q],F=e.sweep===void 0?2*Math.PI-2*Math.PI/I.length:e.sweep,T=I.dTheta=F/Math.max(1,I.length-1);if(I.length>1&&e.avoidOverlap){var H=Math.cos(T)-Math.cos(0),Q=Math.sin(T)-Math.sin(0),W=Math.sqrt(N*N/(H*H+Q*Q));V=Math.max(W,V)}I.r=V,V+=N}if(e.equidistant){for(var Z=0,X=0,te=0;te<b.length;te++){var L=b[te],U=L.r-X;Z=Math.max(Z,U)}X=0;for(var oe=0;oe<b.length;oe++){var ie=b[oe];oe===0&&(X=ie.r),ie.r=X,X+=Z}}for(var ne={},we=0;we<b.length;we++)for(var Te=b[we],ke=Te.dTheta,ge=Te.r,fe=0;fe<Te.length;fe++){var de=Te[fe],be=e.startAngle+(t?1:-1)*ke*fe,Pe={x:u.x+ge*Math.cos(be),y:u.y+ge*Math.sin(be)};ne[de.node.id()]=Pe}return a.nodes().layoutPositions(this,e,function(D){var ve=D.id();return ne[ve]}),this};var dh,HC={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,t){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function Hl(r){this.options=et({},HC,r),this.options.layout=this;var e=this.options.eles.nodes(),t=this.options.eles.edges(),n=t.filter(function(a){var i=a.source().data("id"),o=a.target().data("id"),u=e.some(function(c){return c.data("id")===i}),f=e.some(function(c){return c.data("id")===o});return!u||!f});this.options.eles=this.options.eles.not(n)}Hl.prototype.run=function(){var r=this.options,e=r.cy,t=this;t.stopped=!1,(r.animate===!0||r.animate===!1)&&t.emit({type:"layoutstart",layout:t}),r.debug===!0?dh=!0:dh=!1;var n=GC(e,t,r);dh&&ZC(n),r.randomize&&XC(n);var a=Un(),i=function(){YC(n,e,r),r.fit===!0&&e.fit(r.padding)},o=function(p){return!(t.stopped||p>=r.numIter||(QC(n,r),n.temperature=n.temperature*r.coolingFactor,n.temperature<r.minTemp))},u=function(){if(r.animate===!0||r.animate===!1)i(),t.one("layoutstop",r.stop),t.emit({type:"layoutstop",layout:t});else{var p=r.eles.nodes(),g=hw(n,r,p);p.layoutPositions(t,r,g)}},f=0,c=!0;if(r.animate===!0){var d=function(){for(var p=0;c&&p<r.refresh;)c=o(f),f++,p++;if(!c)p0(n,r),u();else{var g=Un();g-a>=r.animationThreshold&&i(),yl(d)}};d()}else{for(;c;)c=o(f),f++;p0(n,r),u()}return this};Hl.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this};Hl.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var GC=function(e,t,n){for(var a=n.eles.edges(),i=n.eles.nodes(),o=Rr(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),u={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:i.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:a.size(),temperature:n.initialTemp,clientWidth:o.w,clientHeight:o.h,boundingBox:o},f=n.eles.components(),c={},d=0;d<f.length;d++)for(var h=f[d],p=0;p<h.length;p++){var g=h[p];c[g.id()]=d}for(var d=0;d<u.nodeSize;d++){var m=i[d],w=m.layoutDimensions(n),x={};x.isLocked=m.locked(),x.id=m.data("id"),x.parentId=m.data("parent"),x.cmptId=c[m.id()],x.children=[],x.positionX=m.position("x"),x.positionY=m.position("y"),x.offsetX=0,x.offsetY=0,x.height=w.w,x.width=w.h,x.maxX=x.positionX+x.width/2,x.minX=x.positionX-x.width/2,x.maxY=x.positionY+x.height/2,x.minY=x.positionY-x.height/2,x.padLeft=parseFloat(m.style("padding")),x.padRight=parseFloat(m.style("padding")),x.padTop=parseFloat(m.style("padding")),x.padBottom=parseFloat(m.style("padding")),x.nodeRepulsion=zt(n.nodeRepulsion)?n.nodeRepulsion(m):n.nodeRepulsion,u.layoutNodes.push(x),u.idToIndex[x.id]=d}for(var b=[],_=0,E=-1,C=[],d=0;d<u.nodeSize;d++){var m=u.layoutNodes[d],B=m.parentId;B!=null?u.layoutNodes[u.idToIndex[B]].children.push(m.id):(b[++E]=m.id,C.push(m.id))}for(u.graphSet.push(C);_<=E;){var N=b[_++],A=u.idToIndex[N],g=u.layoutNodes[A],z=g.children;if(z.length>0){u.graphSet.push(z);for(var d=0;d<z.length;d++)b[++E]=z[d]}}for(var d=0;d<u.graphSet.length;d++)for(var M=u.graphSet[d],p=0;p<M.length;p++){var V=u.idToIndex[M[p]];u.indexToGraph[V]=d}for(var d=0;d<u.edgeSize;d++){var q=a[d],I={};I.id=q.data("id"),I.sourceId=q.data("source"),I.targetId=q.data("target");var F=zt(n.idealEdgeLength)?n.idealEdgeLength(q):n.idealEdgeLength,T=zt(n.edgeElasticity)?n.edgeElasticity(q):n.edgeElasticity,H=u.idToIndex[I.sourceId],Q=u.idToIndex[I.targetId],W=u.indexToGraph[H],Z=u.indexToGraph[Q];if(W!=Z){for(var X=KC(I.sourceId,I.targetId,u),te=u.graphSet[X],L=0,x=u.layoutNodes[H];te.indexOf(x.id)===-1;)x=u.layoutNodes[u.idToIndex[x.parentId]],L++;for(x=u.layoutNodes[Q];te.indexOf(x.id)===-1;)x=u.layoutNodes[u.idToIndex[x.parentId]],L++;F*=L*n.nestingFactor}I.idealLength=F,I.elasticity=T,u.layoutEdges.push(I)}return u},KC=function(e,t,n){var a=dw(e,t,0,n);return 2>a.count?0:a.graph},dw=function(e,t,n,a){var i=a.graphSet[n];if(-1<i.indexOf(e)&&-1<i.indexOf(t))return{count:2,graph:n};for(var o=0,u=0;u<i.length;u++){var f=i[u],c=a.idToIndex[f],d=a.layoutNodes[c].children;if(d.length!==0){var h=a.indexToGraph[a.idToIndex[d[0]]],p=dw(e,t,h,a);if(p.count!==0)if(p.count===1){if(o++,o===2)break}else return p}}return{count:o,graph:n}},ZC,XC=function(e,t){for(var n=e.clientWidth,a=e.clientHeight,i=0;i<e.nodeSize;i++){var o=e.layoutNodes[i];o.children.length===0&&!o.isLocked&&(o.positionX=Math.random()*n,o.positionY=Math.random()*a)}},hw=function(e,t,n){var a=e.boundingBox,i={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return t.boundingBox&&(n.forEach(function(o){var u=e.layoutNodes[e.idToIndex[o.data("id")]];i.x1=Math.min(i.x1,u.positionX),i.x2=Math.max(i.x2,u.positionX),i.y1=Math.min(i.y1,u.positionY),i.y2=Math.max(i.y2,u.positionY)}),i.w=i.x2-i.x1,i.h=i.y2-i.y1),function(o,u){var f=e.layoutNodes[e.idToIndex[o.data("id")]];if(t.boundingBox){var c=i.w===0?.5:(f.positionX-i.x1)/i.w,d=i.h===0?.5:(f.positionY-i.y1)/i.h;return{x:a.x1+c*a.w,y:a.y1+d*a.h}}else return{x:f.positionX,y:f.positionY}}},YC=function(e,t,n){var a=n.layout,i=n.eles.nodes(),o=hw(e,n,i);i.positions(o),e.ready!==!0&&(e.ready=!0,a.one("layoutready",n.ready),a.emit({type:"layoutready",layout:this}))},QC=function(e,t,n){JC(e,t),rT(e),nT(e,t),aT(e),iT(e)},JC=function(e,t){for(var n=0;n<e.graphSet.length;n++)for(var a=e.graphSet[n],i=a.length,o=0;o<i;o++)for(var u=e.layoutNodes[e.idToIndex[a[o]]],f=o+1;f<i;f++){var c=e.layoutNodes[e.idToIndex[a[f]]];eT(u,c,e,t)}},v0=function(e){return-1+2*e*Math.random()},eT=function(e,t,n,a){var i=e.cmptId,o=t.cmptId;if(!(i!==o&&!n.isCompound)){var u=t.positionX-e.positionX,f=t.positionY-e.positionY,c=1;u===0&&f===0&&(u=v0(c),f=v0(c));var d=tT(e,t,u,f);if(d>0)var h=a.nodeOverlap*d,p=Math.sqrt(u*u+f*f),g=h*u/p,m=h*f/p;else var w=kl(e,u,f),x=kl(t,-1*u,-1*f),b=x.x-w.x,_=x.y-w.y,E=b*b+_*_,p=Math.sqrt(E),h=(e.nodeRepulsion+t.nodeRepulsion)/E,g=h*b/p,m=h*_/p;e.isLocked||(e.offsetX-=g,e.offsetY-=m),t.isLocked||(t.offsetX+=g,t.offsetY+=m)}},tT=function(e,t,n,a){if(n>0)var i=e.maxX-t.minX;else var i=t.maxX-e.minX;if(a>0)var o=e.maxY-t.minY;else var o=t.maxY-e.minY;return i>=0&&o>=0?Math.sqrt(i*i+o*o):0},kl=function(e,t,n){var a=e.positionX,i=e.positionY,o=e.height||1,u=e.width||1,f=n/t,c=o/u,d={};return t===0&&0<n||t===0&&0>n?(d.x=a,d.y=i+o/2,d):0<t&&-1*c<=f&&f<=c?(d.x=a+u/2,d.y=i+u*n/2/t,d):0>t&&-1*c<=f&&f<=c?(d.x=a-u/2,d.y=i-u*n/2/t,d):0<n&&(f<=-1*c||f>=c)?(d.x=a+o*t/2/n,d.y=i+o/2,d):(0>n&&(f<=-1*c||f>=c)&&(d.x=a-o*t/2/n,d.y=i-o/2),d)},rT=function(e,t){for(var n=0;n<e.edgeSize;n++){var a=e.layoutEdges[n],i=e.idToIndex[a.sourceId],o=e.layoutNodes[i],u=e.idToIndex[a.targetId],f=e.layoutNodes[u],c=f.positionX-o.positionX,d=f.positionY-o.positionY;if(!(c===0&&d===0)){var h=kl(o,c,d),p=kl(f,-1*c,-1*d),g=p.x-h.x,m=p.y-h.y,w=Math.sqrt(g*g+m*m),x=Math.pow(a.idealLength-w,2)/a.elasticity;if(w!==0)var b=x*g/w,_=x*m/w;else var b=0,_=0;o.isLocked||(o.offsetX+=b,o.offsetY+=_),f.isLocked||(f.offsetX-=b,f.offsetY-=_)}}},nT=function(e,t){if(t.gravity!==0)for(var n=1,a=0;a<e.graphSet.length;a++){var i=e.graphSet[a],o=i.length;if(a===0)var u=e.clientHeight/2,f=e.clientWidth/2;else var c=e.layoutNodes[e.idToIndex[i[0]]],d=e.layoutNodes[e.idToIndex[c.parentId]],u=d.positionX,f=d.positionY;for(var h=0;h<o;h++){var p=e.layoutNodes[e.idToIndex[i[h]]];if(!p.isLocked){var g=u-p.positionX,m=f-p.positionY,w=Math.sqrt(g*g+m*m);if(w>n){var x=t.gravity*g/w,b=t.gravity*m/w;p.offsetX+=x,p.offsetY+=b}}}}},aT=function(e,t){var n=[],a=0,i=-1;for(n.push.apply(n,e.graphSet[0]),i+=e.graphSet[0].length;a<=i;){var o=n[a++],u=e.idToIndex[o],f=e.layoutNodes[u],c=f.children;if(0<c.length&&!f.isLocked){for(var d=f.offsetX,h=f.offsetY,p=0;p<c.length;p++){var g=e.layoutNodes[e.idToIndex[c[p]]];g.offsetX+=d,g.offsetY+=h,n[++i]=c[p]}f.offsetX=0,f.offsetY=0}}},iT=function(e,t){for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];0<a.children.length&&(a.maxX=void 0,a.minX=void 0,a.maxY=void 0,a.minY=void 0)}for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];if(!(0<a.children.length||a.isLocked)){var i=sT(a.offsetX,a.offsetY,e.temperature);a.positionX+=i.x,a.positionY+=i.y,a.offsetX=0,a.offsetY=0,a.minX=a.positionX-a.width,a.maxX=a.positionX+a.width,a.minY=a.positionY-a.height,a.maxY=a.positionY+a.height,vw(a,e)}}for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];0<a.children.length&&!a.isLocked&&(a.positionX=(a.maxX+a.minX)/2,a.positionY=(a.maxY+a.minY)/2,a.width=a.maxX-a.minX,a.height=a.maxY-a.minY)}},sT=function(e,t,n){var a=Math.sqrt(e*e+t*t);if(a>n)var i={x:n*e/a,y:n*t/a};else var i={x:e,y:t};return i},vw=function(e,t){var n=e.parentId;if(n!=null){var a=t.layoutNodes[t.idToIndex[n]],i=!1;if((a.maxX==null||e.maxX+a.padRight>a.maxX)&&(a.maxX=e.maxX+a.padRight,i=!0),(a.minX==null||e.minX-a.padLeft<a.minX)&&(a.minX=e.minX-a.padLeft,i=!0),(a.maxY==null||e.maxY+a.padBottom>a.maxY)&&(a.maxY=e.maxY+a.padBottom,i=!0),(a.minY==null||e.minY-a.padTop<a.minY)&&(a.minY=e.minY-a.padTop,i=!0),i)return vw(a,t)}},p0=function(e,t){for(var n=e.layoutNodes,a=[],i=0;i<n.length;i++){var o=n[i],u=o.cmptId,f=a[u]=a[u]||[];f.push(o)}for(var c=0,i=0;i<a.length;i++){var d=a[i];if(d){d.x1=1/0,d.x2=-1/0,d.y1=1/0,d.y2=-1/0;for(var h=0;h<d.length;h++){var p=d[h];d.x1=Math.min(d.x1,p.positionX-p.width/2),d.x2=Math.max(d.x2,p.positionX+p.width/2),d.y1=Math.min(d.y1,p.positionY-p.height/2),d.y2=Math.max(d.y2,p.positionY+p.height/2)}d.w=d.x2-d.x1,d.h=d.y2-d.y1,c+=d.w*d.h}}a.sort(function(_,E){return E.w*E.h-_.w*_.h});for(var g=0,m=0,w=0,x=0,b=Math.sqrt(c)*e.clientWidth/e.clientHeight,i=0;i<a.length;i++){var d=a[i];if(d){for(var h=0;h<d.length;h++){var p=d[h];p.isLocked||(p.positionX+=g-d.x1,p.positionY+=m-d.y1)}g+=d.w+t.componentSpacing,w+=d.w+t.componentSpacing,x=Math.max(x,d.h),w>b&&(m+=x+t.componentSpacing,g=0,w=0,x=0)}}},oT={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function pw(r){this.options=et({},oT,r)}pw.prototype.run=function(){var r=this.options,e=r,t=r.cy,n=e.eles,a=n.nodes().not(":parent");e.sort&&(a=a.sort(e.sort));var i=Rr(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()});if(i.h===0||i.w===0)n.nodes().layoutPositions(this,e,function(oe){return{x:i.x1,y:i.y1}});else{var o=a.size(),u=Math.sqrt(o*i.h/i.w),f=Math.round(u),c=Math.round(i.w/i.h*u),d=function(ie){if(ie==null)return Math.min(f,c);var ne=Math.min(f,c);ne==f?f=ie:c=ie},h=function(ie){if(ie==null)return Math.max(f,c);var ne=Math.max(f,c);ne==f?f=ie:c=ie},p=e.rows,g=e.cols!=null?e.cols:e.columns;if(p!=null&&g!=null)f=p,c=g;else if(p!=null&&g==null)f=p,c=Math.ceil(o/f);else if(p==null&&g!=null)c=g,f=Math.ceil(o/c);else if(c*f>o){var m=d(),w=h();(m-1)*w>=o?d(m-1):(w-1)*m>=o&&h(w-1)}else for(;c*f<o;){var x=d(),b=h();(b+1)*x>=o?h(b+1):d(x+1)}var _=i.w/c,E=i.h/f;if(e.condense&&(_=0,E=0),e.avoidOverlap)for(var C=0;C<a.length;C++){var B=a[C],N=B._private.position;(N.x==null||N.y==null)&&(N.x=0,N.y=0);var A=B.layoutDimensions(e),z=e.avoidOverlapPadding,M=A.w+z,V=A.h+z;_=Math.max(_,M),E=Math.max(E,V)}for(var q={},I=function(ie,ne){return!!q["c-"+ie+"-"+ne]},F=function(ie,ne){q["c-"+ie+"-"+ne]=!0},T=0,H=0,Q=function(){H++,H>=c&&(H=0,T++)},W={},Z=0;Z<a.length;Z++){var X=a[Z],te=e.position(X);if(te&&(te.row!==void 0||te.col!==void 0)){var L={row:te.row,col:te.col};if(L.col===void 0)for(L.col=0;I(L.row,L.col);)L.col++;else if(L.row===void 0)for(L.row=0;I(L.row,L.col);)L.row++;W[X.id()]=L,F(L.row,L.col)}}var U=function(ie,ne){var we,Te;if(ie.locked()||ie.isParent())return!1;var ke=W[ie.id()];if(ke)we=ke.col*_+_/2+i.x1,Te=ke.row*E+E/2+i.y1;else{for(;I(T,H);)Q();we=H*_+_/2+i.x1,Te=T*E+E/2+i.y1,F(T,H),Q()}return{x:we,y:Te}};a.layoutPositions(this,e,U)}return this};var uT={ready:function(){},stop:function(){}};function lv(r){this.options=et({},uT,r)}lv.prototype.run=function(){var r=this.options,e=r.eles,t=this;return r.cy,t.emit("layoutstart"),e.nodes().positions(function(){return{x:0,y:0}}),t.one("layoutready",r.ready),t.emit("layoutready"),t.one("layoutstop",r.stop),t.emit("layoutstop"),this};lv.prototype.stop=function(){return this};var lT={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function gw(r){this.options=et({},lT,r)}gw.prototype.run=function(){var r=this.options,e=r.eles,t=e.nodes(),n=zt(r.positions);function a(i){if(r.positions==null)return AE(i.position());if(n)return r.positions(i);var o=r.positions[i._private.data.id];return o??null}return t.layoutPositions(this,r,function(i,o){var u=a(i);return i.locked()||u==null?!1:u}),this};var fT={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function mw(r){this.options=et({},fT,r)}mw.prototype.run=function(){var r=this.options,e=r.cy,t=r.eles,n=Rr(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),a=function(o,u){return{x:n.x1+Math.round(Math.random()*n.w),y:n.y1+Math.round(Math.random()*n.h)}};return t.nodes().layoutPositions(this,r,a),this};var cT=[{name:"breadthfirst",impl:lw},{name:"circle",impl:fw},{name:"concentric",impl:cw},{name:"cose",impl:Hl},{name:"grid",impl:pw},{name:"null",impl:lv},{name:"preset",impl:gw},{name:"random",impl:mw}];function yw(r){this.options=r,this.notifications=0}var g0=function(){},m0=function(){throw new Error("A headless instance can not render images")};yw.prototype={recalculateRenderedStyle:g0,notify:function(){this.notifications++},init:g0,isHeadless:function(){return!0},png:m0,jpg:m0};var fv={};fv.arrowShapeWidth=.3;fv.registerArrowShapes=function(){var r=this.arrowShapes={},e=this,t=function(c,d,h,p,g,m,w){var x=g.x-h/2-w,b=g.x+h/2+w,_=g.y-h/2-w,E=g.y+h/2+w,C=x<=c&&c<=b&&_<=d&&d<=E;return C},n=function(c,d,h,p,g){var m=c*Math.cos(p)-d*Math.sin(p),w=c*Math.sin(p)+d*Math.cos(p),x=m*h,b=w*h,_=x+g.x,E=b+g.y;return{x:_,y:E}},a=function(c,d,h,p){for(var g=[],m=0;m<c.length;m+=2){var w=c[m],x=c[m+1];g.push(n(w,x,d,h,p))}return g},i=function(c){for(var d=[],h=0;h<c.length;h++){var p=c[h];d.push(p.x,p.y)}return d},o=function(c){return c.pstyle("width").pfValue*c.pstyle("arrow-scale").pfValue*2},u=function(c,d){Ye(d)&&(d=r[d]),r[c]=et({name:c,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(p,g,m,w,x,b){var _=i(a(this.points,m+2*b,w,x)),E=zr(p,g,_);return E},roughCollide:t,draw:function(p,g,m,w){var x=a(this.points,g,m,w);e.arrowShapeImpl("polygon")(p,x)},spacing:function(p){return 0},gap:o},d)};u("none",{collide:wl,roughCollide:wl,draw:Zh,spacing:Am,gap:Am}),u("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),u("arrow","triangle"),u("triangle-backcurve",{points:r.triangle.points,controlPoint:[0,-.15],roughCollide:t,draw:function(c,d,h,p,g){var m=a(this.points,d,h,p),w=this.controlPoint,x=n(w[0],w[1],d,h,p);e.arrowShapeImpl(this.name)(c,m,x)},gap:function(c){return o(c)*.8}}),u("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(c,d,h,p,g,m,w){var x=i(a(this.points,h+2*w,p,g)),b=i(a(this.pointsTee,h+2*w,p,g)),_=zr(c,d,x)||zr(c,d,b);return _},draw:function(c,d,h,p,g){var m=a(this.points,d,h,p),w=a(this.pointsTee,d,h,p);e.arrowShapeImpl(this.name)(c,m,w)}}),u("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(c,d,h,p,g,m,w){var x=g,b=Math.pow(x.x-c,2)+Math.pow(x.y-d,2)<=Math.pow((h+2*w)*this.radius,2),_=i(a(this.points,h+2*w,p,g));return zr(c,d,_)||b},draw:function(c,d,h,p,g){var m=a(this.pointsTr,d,h,p);e.arrowShapeImpl(this.name)(c,m,p.x,p.y,this.radius*d)},spacing:function(c){return e.getArrowWidth(c.pstyle("width").pfValue,c.pstyle("arrow-scale").value)*this.radius}}),u("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(c,d){var h=this.baseCrossLinePts.slice(),p=d/c,g=3,m=5;return h[g]=h[g]-p,h[m]=h[m]-p,h},collide:function(c,d,h,p,g,m,w){var x=i(a(this.points,h+2*w,p,g)),b=i(a(this.crossLinePts(h,m),h+2*w,p,g)),_=zr(c,d,x)||zr(c,d,b);return _},draw:function(c,d,h,p,g){var m=a(this.points,d,h,p),w=a(this.crossLinePts(d,g),d,h,p);e.arrowShapeImpl(this.name)(c,m,w)}}),u("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(c){return o(c)*.525}}),u("circle",{radius:.15,collide:function(c,d,h,p,g,m,w){var x=g,b=Math.pow(x.x-c,2)+Math.pow(x.y-d,2)<=Math.pow((h+2*w)*this.radius,2);return b},draw:function(c,d,h,p,g){e.arrowShapeImpl(this.name)(c,p.x,p.y,this.radius*d)},spacing:function(c){return e.getArrowWidth(c.pstyle("width").pfValue,c.pstyle("arrow-scale").value)*this.radius}}),u("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(c){return 1},gap:function(c){return 1}}),u("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),u("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(c){return c.pstyle("width").pfValue*c.pstyle("arrow-scale").value}}),u("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(c){return .95*c.pstyle("width").pfValue*c.pstyle("arrow-scale").value}})};var ai={};ai.projectIntoViewport=function(r,e){var t=this.cy,n=this.findContainerClientCoords(),a=n[0],i=n[1],o=n[4],u=t.pan(),f=t.zoom(),c=((r-a)/o-u.x)/f,d=((e-i)/o-u.y)/f;return[c,d]};ai.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var r=this.container,e=r.getBoundingClientRect(),t=this.cy.window().getComputedStyle(r),n=function(b){return parseFloat(t.getPropertyValue(b))},a={left:n("padding-left"),right:n("padding-right"),top:n("padding-top"),bottom:n("padding-bottom")},i={left:n("border-left-width"),right:n("border-right-width"),top:n("border-top-width"),bottom:n("border-bottom-width")},o=r.clientWidth,u=r.clientHeight,f=a.left+a.right,c=a.top+a.bottom,d=i.left+i.right,h=e.width/(o+d),p=o-f,g=u-c,m=e.left+a.left+i.left,w=e.top+a.top+i.top;return this.containerBB=[m,w,p,g,h]};ai.invalidateContainerClientCoordsCache=function(){this.containerBB=null};ai.findNearestElement=function(r,e,t,n){return this.findNearestElements(r,e,t,n)[0]};ai.findNearestElements=function(r,e,t,n){var a=this,i=this,o=i.getCachedZSortedEles(),u=[],f=i.cy.zoom(),c=i.cy.hasCompoundNodes(),d=(n?24:8)/f,h=(n?8:2)/f,p=(n?8:2)/f,g=1/0,m,w;t&&(o=o.interactive);function x(A,z){if(A.isNode()){if(w)return;w=A,u.push(A)}if(A.isEdge()&&(z==null||z<g))if(m){if(m.pstyle("z-compound-depth").value===A.pstyle("z-compound-depth").value&&m.pstyle("z-compound-depth").value===A.pstyle("z-compound-depth").value){for(var M=0;M<u.length;M++)if(u[M].isEdge()){u[M]=A,m=A,g=z??g;break}}}else u.push(A),m=A,g=z??g}function b(A){var z=A.outerWidth()+2*h,M=A.outerHeight()+2*h,V=z/2,q=M/2,I=A.position(),F=A.pstyle("corner-radius").value==="auto"?"auto":A.pstyle("corner-radius").pfValue,T=A._private.rscratch;if(I.x-V<=r&&r<=I.x+V&&I.y-q<=e&&e<=I.y+q){var H=i.nodeShapes[a.getNodeShape(A)];if(H.checkPoint(r,e,0,z,M,I.x,I.y,F,T))return x(A,0),!0}}function _(A){var z=A._private,M=z.rscratch,V=A.pstyle("width").pfValue,q=A.pstyle("arrow-scale").value,I=V/2+d,F=I*I,T=I*2,Z=z.source,X=z.target,H;if(M.edgeType==="segments"||M.edgeType==="straight"||M.edgeType==="haystack"){for(var Q=M.allpts,W=0;W+3<Q.length;W+=2)if(WE(r,e,Q[W],Q[W+1],Q[W+2],Q[W+3],T)&&F>(H=XE(r,e,Q[W],Q[W+1],Q[W+2],Q[W+3])))return x(A,H),!0}else if(M.edgeType==="bezier"||M.edgeType==="multibezier"||M.edgeType==="self"||M.edgeType==="compound"){for(var Q=M.allpts,W=0;W+5<M.allpts.length;W+=4)if(HE(r,e,Q[W],Q[W+1],Q[W+2],Q[W+3],Q[W+4],Q[W+5],T)&&F>(H=ZE(r,e,Q[W],Q[W+1],Q[W+2],Q[W+3],Q[W+4],Q[W+5])))return x(A,H),!0}for(var Z=Z||z.source,X=X||z.target,te=a.getArrowWidth(V,q),L=[{name:"source",x:M.arrowStartX,y:M.arrowStartY,angle:M.srcArrowAngle},{name:"target",x:M.arrowEndX,y:M.arrowEndY,angle:M.tgtArrowAngle},{name:"mid-source",x:M.midX,y:M.midY,angle:M.midsrcArrowAngle},{name:"mid-target",x:M.midX,y:M.midY,angle:M.midtgtArrowAngle}],W=0;W<L.length;W++){var U=L[W],oe=i.arrowShapes[A.pstyle(U.name+"-arrow-shape").value],ie=A.pstyle("width").pfValue;if(oe.roughCollide(r,e,te,U.angle,{x:U.x,y:U.y},ie,d)&&oe.collide(r,e,te,U.angle,{x:U.x,y:U.y},ie,d))return x(A),!0}c&&u.length>0&&(b(Z),b(X))}function E(A,z,M){return Mr(A,z,M)}function C(A,z){var M=A._private,V=p,q;z?q=z+"-":q="",A.boundingBox();var I=M.labelBounds[z||"main"],F=A.pstyle(q+"label").value,T=A.pstyle("text-events").strValue==="yes";if(!(!T||!F)){var H=E(M.rscratch,"labelX",z),Q=E(M.rscratch,"labelY",z),W=E(M.rscratch,"labelAngle",z),Z=A.pstyle(q+"text-margin-x").pfValue,X=A.pstyle(q+"text-margin-y").pfValue,te=I.x1-V-Z,L=I.x2+V-Z,U=I.y1-V-X,oe=I.y2+V-X;if(W){var ie=Math.cos(W),ne=Math.sin(W),we=function(Pe,D){return Pe=Pe-H,D=D-Q,{x:Pe*ie-D*ne+H,y:Pe*ne+D*ie+Q}},Te=we(te,U),ke=we(te,oe),ge=we(L,U),fe=we(L,oe),de=[Te.x+Z,Te.y+X,ge.x+Z,ge.y+X,fe.x+Z,fe.y+X,ke.x+Z,ke.y+X];if(zr(r,e,de))return x(A),!0}else if(pa(I,r,e))return x(A),!0}}for(var B=o.length-1;B>=0;B--){var N=o[B];N.isNode()?b(N)||C(N):_(N)||C(N)||C(N,"source")||C(N,"target")}return u};ai.getAllInBox=function(r,e,t,n){var a=this.getCachedZSortedEles().interactive,i=this.cy.zoom(),o=2/i,u=[],f=Math.min(r,t),c=Math.max(r,t),d=Math.min(e,n),h=Math.max(e,n);r=f,t=c,e=d,n=h;var p=Rr({x1:r,y1:e,x2:t,y2:n}),g=[{x:p.x1,y:p.y1},{x:p.x2,y:p.y1},{x:p.x2,y:p.y2},{x:p.x1,y:p.y2}],m=[[g[0],g[1]],[g[1],g[2]],[g[2],g[3]],[g[3],g[0]]];function w(Pe,D,ve){return Mr(Pe,D,ve)}function x(Pe,D){var ve=Pe._private,pe=o,Y="";Pe.boundingBox();var K=ve.labelBounds.main;if(!K)return null;var ae=w(ve.rscratch,"labelX",D),he=w(ve.rscratch,"labelY",D),me=w(ve.rscratch,"labelAngle",D),se=Pe.pstyle(Y+"text-margin-x").pfValue,Re=Pe.pstyle(Y+"text-margin-y").pfValue,De=K.x1-pe-se,Be=K.x2+pe-se,ze=K.y1-pe-Re,$=K.y2+pe-Re;if(me){var k=Math.cos(me),R=Math.sin(me),G=function(J,O){return J=J-ae,O=O-he,{x:J*k-O*R+ae,y:J*R+O*k+he}};return[G(De,ze),G(Be,ze),G(Be,$),G(De,$)]}else return[{x:De,y:ze},{x:Be,y:ze},{x:Be,y:$},{x:De,y:$}]}function b(Pe,D,ve,pe){function Y(K,ae,he){return(he.y-K.y)*(ae.x-K.x)>(ae.y-K.y)*(he.x-K.x)}return Y(Pe,ve,pe)!==Y(D,ve,pe)&&Y(Pe,D,ve)!==Y(Pe,D,pe)}for(var _=0;_<a.length;_++){var E=a[_];if(E.isNode()){var C=E,B=C.pstyle("text-events").strValue==="yes",N=C.pstyle("box-selection").strValue,A=C.pstyle("box-select-labels").strValue==="yes";if(N==="none")continue;var z=(N==="overlap"||A)&&B,M=C.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:z});if(N==="contain"){var V=!1;if(A&&B){var q=x(C);q&&fd(q,g)&&(u.push(C),V=!0)}!V&&k1(p,M)&&u.push(C)}else if(N==="overlap"&&Jh(p,M)){var I=C.boundingBox({includeNodes:!0,includeEdges:!0,includeLabels:!1,includeMainLabels:!1,includeSourceLabels:!1,includeTargetLabels:!1}),F=[{x:I.x1,y:I.y1},{x:I.x2,y:I.y1},{x:I.x2,y:I.y2},{x:I.x1,y:I.y2}];if(fd(F,g))u.push(C);else{var T=x(C);T&&fd(T,g)&&u.push(C)}}}else{var H=E,Q=H._private,W=Q.rscratch,Z=H.pstyle("box-selection").strValue;if(Z==="none")continue;if(Z==="contain"){if(W.startX!=null&&W.startY!=null&&!pa(p,W.startX,W.startY)||W.endX!=null&&W.endY!=null&&!pa(p,W.endX,W.endY))continue;if(W.edgeType==="bezier"||W.edgeType==="multibezier"||W.edgeType==="self"||W.edgeType==="compound"||W.edgeType==="segments"||W.edgeType==="haystack"){for(var X=Q.rstyle.bezierPts||Q.rstyle.linePts||Q.rstyle.haystackPts,te=!0,L=0;L<X.length;L++)if(!Om(p,X[L])){te=!1;break}te&&u.push(H)}else W.edgeType==="straight"&&u.push(H)}else if(Z==="overlap"){var U=!1;if(W.startX!=null&&W.startY!=null&&W.endX!=null&&W.endY!=null&&(pa(p,W.startX,W.startY)||pa(p,W.endX,W.endY)))u.push(H),U=!0;else if(!U&&W.edgeType==="haystack"){for(var oe=Q.rstyle.haystackPts,ie=0;ie<oe.length;ie++)if(Om(p,oe[ie])){u.push(H),U=!0;break}}if(!U){var ne=Q.rstyle.bezierPts||Q.rstyle.linePts||Q.rstyle.haystackPts;if((!ne||ne.length<2)&&W.edgeType==="straight"&&W.startX!=null&&W.startY!=null&&W.endX!=null&&W.endY!=null&&(ne=[{x:W.startX,y:W.startY},{x:W.endX,y:W.endY}]),!ne||ne.length<2)continue;for(var we=0;we<ne.length-1;we++){for(var Te=ne[we],ke=ne[we+1],ge=0;ge<m.length;ge++){var fe=Ht(m[ge],2),de=fe[0],be=fe[1];if(b(Te,ke,de,be)){u.push(H),U=!0;break}}if(U)break}}}}}return u};var Cl={};Cl.calculateArrowAngles=function(r){var e=r._private.rscratch,t=e.edgeType==="haystack",n=e.edgeType==="bezier",a=e.edgeType==="multibezier",i=e.edgeType==="segments",o=e.edgeType==="compound",u=e.edgeType==="self",f,c,d,h,p,g,b,_;if(t?(d=e.haystackPts[0],h=e.haystackPts[1],p=e.haystackPts[2],g=e.haystackPts[3]):(d=e.arrowStartX,h=e.arrowStartY,p=e.arrowEndX,g=e.arrowEndY),b=e.midX,_=e.midY,i)f=d-e.segpts[0],c=h-e.segpts[1];else if(a||o||u||n){var m=e.allpts,w=nr(m[0],m[2],m[4],.1),x=nr(m[1],m[3],m[5],.1);f=d-w,c=h-x}else f=d-b,c=h-_;e.srcArrowAngle=Gu(f,c);var b=e.midX,_=e.midY;if(t&&(b=(d+p)/2,_=(h+g)/2),f=p-d,c=g-h,i){var m=e.allpts;if(m.length/2%2===0){var E=m.length/2,C=E-2;f=m[E]-m[C],c=m[E+1]-m[C+1]}else if(e.isRound)f=e.midVector[1],c=-e.midVector[0];else{var E=m.length/2-1,C=E-2;f=m[E]-m[C],c=m[E+1]-m[C+1]}}else if(a||o||u){var m=e.allpts,B=e.ctrlpts,N,A,z,M;if(B.length/2%2===0){var V=m.length/2-1,q=V+2,I=q+2;N=nr(m[V],m[q],m[I],0),A=nr(m[V+1],m[q+1],m[I+1],0),z=nr(m[V],m[q],m[I],1e-4),M=nr(m[V+1],m[q+1],m[I+1],1e-4)}else{var q=m.length/2-1,V=q-2,I=q+2;N=nr(m[V],m[q],m[I],.4999),A=nr(m[V+1],m[q+1],m[I+1],.4999),z=nr(m[V],m[q],m[I],.5),M=nr(m[V+1],m[q+1],m[I+1],.5)}f=z-N,c=M-A}if(e.midtgtArrowAngle=Gu(f,c),e.midDispX=f,e.midDispY=c,f*=-1,c*=-1,i){var m=e.allpts;if(m.length/2%2!==0){if(!e.isRound){var E=m.length/2-1,F=E+2;f=-(m[F]-m[E]),c=-(m[F+1]-m[E+1])}}}if(e.midsrcArrowAngle=Gu(f,c),i)f=p-e.segpts[e.segpts.length-2],c=g-e.segpts[e.segpts.length-1];else if(a||o||u||n){var m=e.allpts,T=m.length,w=nr(m[T-6],m[T-4],m[T-2],.9),x=nr(m[T-5],m[T-3],m[T-1],.9);f=p-w,c=g-x}else f=p-b,c=g-_;e.tgtArrowAngle=Gu(f,c)};Cl.getArrowWidth=Cl.getArrowHeight=function(r,e){var t=this.arrowWidthCache=this.arrowWidthCache||{},n=t[r+", "+e];return n||(n=Math.max(Math.pow(r*13.37,.9),29)*e,t[r+", "+e]=n,n)};var Ih,Lh,En={},en={},y0,w0,Xa,hl,Mn,Wa,Ka,bn,Mi,tl,ww,xw,Nh,Oh,x0,b0=function(e,t,n){n.x=t.x-e.x,n.y=t.y-e.y,n.len=Math.sqrt(n.x*n.x+n.y*n.y),n.nx=n.x/n.len,n.ny=n.y/n.len,n.ang=Math.atan2(n.ny,n.nx)},dT=function(e,t){t.x=e.x*-1,t.y=e.y*-1,t.nx=e.nx*-1,t.ny=e.ny*-1,t.ang=e.ang>0?-(Math.PI-e.ang):Math.PI+e.ang},hT=function(e,t,n,a,i){if(e!==x0?b0(t,e,En):dT(en,En),b0(t,n,en),y0=En.nx*en.ny-En.ny*en.nx,w0=En.nx*en.nx-En.ny*-en.ny,Mn=Math.asin(Math.max(-1,Math.min(1,y0))),Math.abs(Mn)<1e-6){Ih=t.x,Lh=t.y,Ka=Mi=0;return}Xa=1,hl=!1,w0<0?Mn<0?Mn=Math.PI+Mn:(Mn=Math.PI-Mn,Xa=-1,hl=!0):Mn>0&&(Xa=-1,hl=!0),t.radius!==void 0?Mi=t.radius:Mi=a,Wa=Mn/2,tl=Math.min(En.len/2,en.len/2),i?(bn=Math.abs(Math.cos(Wa)*Mi/Math.sin(Wa)),bn>tl?(bn=tl,Ka=Math.abs(bn*Math.sin(Wa)/Math.cos(Wa))):Ka=Mi):(bn=Math.min(tl,Mi),Ka=Math.abs(bn*Math.sin(Wa)/Math.cos(Wa))),Nh=t.x+en.nx*bn,Oh=t.y+en.ny*bn,Ih=Nh-en.ny*Ka*Xa,Lh=Oh+en.nx*Ka*Xa,ww=t.x+En.nx*bn,xw=t.y+En.ny*bn,x0=t};function bw(r,e){e.radius===0?r.lineTo(e.cx,e.cy):r.arc(e.cx,e.cy,e.radius,e.startAngle,e.endAngle,e.counterClockwise)}function cv(r,e,t,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;return n===0||e.radius===0?{cx:e.x,cy:e.y,radius:0,startX:e.x,startY:e.y,stopX:e.x,stopY:e.y,startAngle:void 0,endAngle:void 0,counterClockwise:void 0}:(hT(r,e,t,n,a),{cx:Ih,cy:Lh,radius:Ka,startX:ww,startY:xw,stopX:Nh,stopY:Oh,startAngle:En.ang+Math.PI/2*Xa,endAngle:en.ang-Math.PI/2*Xa,counterClockwise:hl})}var xo=.01,vT=Math.sqrt(2*xo),_r={};_r.findMidptPtsEtc=function(r,e){var t=e.posPts,n=e.intersectionPts,a=e.vectorNormInverse,i,o=r.pstyle("source-endpoint"),u=r.pstyle("target-endpoint"),f=o.units!=null&&u.units!=null,c=function(B,N,A,z){var M=z-N,V=A-B,q=Math.sqrt(V*V+M*M);return{x:-M/q,y:V/q}},d=r.pstyle("edge-distances").value;switch(d){case"node-position":i=t;break;case"intersection":i=n;break;case"endpoints":{if(f){var h=this.manualEndptToPx(r.source()[0],o),p=Ht(h,2),g=p[0],m=p[1],w=this.manualEndptToPx(r.target()[0],u),x=Ht(w,2),b=x[0],_=x[1],E={x1:g,y1:m,x2:b,y2:_};a=c(g,m,b,_),i=E}else gt("Edge ".concat(r.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),i=n;break}}return{midptPts:i,vectorNormInverse:a}};_r.findHaystackPoints=function(r){for(var e=0;e<r.length;e++){var t=r[e],n=t._private,a=n.rscratch;if(!a.haystack){var i=Math.random()*2*Math.PI;a.source={x:Math.cos(i),y:Math.sin(i)},i=Math.random()*2*Math.PI,a.target={x:Math.cos(i),y:Math.sin(i)}}var o=n.source,u=n.target,f=o.position(),c=u.position(),d=o.width(),h=u.width(),p=o.height(),g=u.height(),m=t.pstyle("haystack-radius").value,w=m/2;a.haystackPts=a.allpts=[a.source.x*d*w+f.x,a.source.y*p*w+f.y,a.target.x*h*w+c.x,a.target.y*g*w+c.y],a.midX=(a.allpts[0]+a.allpts[2])/2,a.midY=(a.allpts[1]+a.allpts[3])/2,a.edgeType="haystack",a.haystack=!0,this.storeEdgeProjections(t),this.calculateArrowAngles(t),this.recalculateEdgeLabelProjections(t),this.calculateLabelAngles(t)}};_r.findSegmentsPoints=function(r,e){var t=r._private.rscratch,n=r.pstyle("segment-weights"),a=r.pstyle("segment-distances"),i=r.pstyle("segment-radii"),o=r.pstyle("radius-type"),u=Math.min(n.pfValue.length,a.pfValue.length),f=i.pfValue[i.pfValue.length-1],c=o.pfValue[o.pfValue.length-1];t.edgeType="segments",t.segpts=[],t.radii=[],t.isArcRadius=[];for(var d=0;d<u;d++){var h=n.pfValue[d],p=a.pfValue[d],g=1-h,m=h,w=this.findMidptPtsEtc(r,e),x=w.midptPts,b=w.vectorNormInverse,_={x:x.x1*g+x.x2*m,y:x.y1*g+x.y2*m};t.segpts.push(_.x+b.x*p,_.y+b.y*p),t.radii.push(i.pfValue[d]!==void 0?i.pfValue[d]:f),t.isArcRadius.push((o.pfValue[d]!==void 0?o.pfValue[d]:c)==="arc-radius")}};_r.findLoopPoints=function(r,e,t,n){var a=r._private.rscratch,i=e.dirCounts,o=e.srcPos,u=r.pstyle("control-point-distances"),f=u?u.pfValue[0]:void 0,c=r.pstyle("loop-direction").pfValue,d=r.pstyle("loop-sweep").pfValue,h=r.pstyle("control-point-step-size").pfValue;a.edgeType="self";var p=t,g=h;n&&(p=0,g=f);var m=c-Math.PI/2,w=m-d/2,x=m+d/2,b=c+"_"+d;p=i[b]===void 0?i[b]=0:++i[b],a.ctrlpts=[o.x+Math.cos(w)*1.4*g*(p/3+1),o.y+Math.sin(w)*1.4*g*(p/3+1),o.x+Math.cos(x)*1.4*g*(p/3+1),o.y+Math.sin(x)*1.4*g*(p/3+1)]};_r.findCompoundLoopPoints=function(r,e,t,n){var a=r._private.rscratch;a.edgeType="compound";var i=e.srcPos,o=e.tgtPos,u=e.srcW,f=e.srcH,c=e.tgtW,d=e.tgtH,h=r.pstyle("control-point-step-size").pfValue,p=r.pstyle("control-point-distances"),g=p?p.pfValue[0]:void 0,m=t,w=h;n&&(m=0,w=g);var x=50,b={x:i.x-u/2,y:i.y-f/2},_={x:o.x-c/2,y:o.y-d/2},E={x:Math.min(b.x,_.x),y:Math.min(b.y,_.y)},C=.5,B=Math.max(C,Math.log(u*xo)),N=Math.max(C,Math.log(c*xo));a.ctrlpts=[E.x,E.y-(1+Math.pow(x,1.12)/100)*w*(m/3+1)*B,E.x-(1+Math.pow(x,1.12)/100)*w*(m/3+1)*N,E.y]};_r.findStraightEdgePoints=function(r){r._private.rscratch.edgeType="straight"};_r.findBezierPoints=function(r,e,t,n,a){var i=r._private.rscratch,o=r.pstyle("control-point-step-size").pfValue,u=r.pstyle("control-point-distances"),f=r.pstyle("control-point-weights"),c=u&&f?Math.min(u.value.length,f.value.length):1,d=u?u.pfValue[0]:void 0,h=f.value[0],p=n;i.edgeType=p?"multibezier":"bezier",i.ctrlpts=[];for(var g=0;g<c;g++){var m=(.5-e.eles.length/2+t)*o*(a?-1:1),w=void 0,x=Qh(m);p&&(d=u?u.pfValue[g]:o,h=f.value[g]),n?w=d:w=d!==void 0?x*d:void 0;var b=w!==void 0?w:m,_=1-h,E=h,C=this.findMidptPtsEtc(r,e),B=C.midptPts,N=C.vectorNormInverse,A={x:B.x1*_+B.x2*E,y:B.y1*_+B.y2*E};i.ctrlpts.push(A.x+N.x*b,A.y+N.y*b)}};_r.findTaxiPoints=function(r,e){var t=r._private.rscratch;t.edgeType="segments";var n="vertical",a="horizontal",i="leftward",o="rightward",u="downward",f="upward",c="auto",d=e.posPts,h=e.srcW,p=e.srcH,g=e.tgtW,m=e.tgtH,w=r.pstyle("edge-distances").value,x=w!=="node-position",b=r.pstyle("taxi-direction").value,_=b,E=r.pstyle("taxi-turn"),C=E.units==="%",B=E.pfValue,N=B<0,A=r.pstyle("taxi-turn-min-distance").pfValue,z=x?(h+g)/2:0,M=x?(p+m)/2:0,V=d.x2-d.x1,q=d.y2-d.y1,I=function(O,le){return O>0?Math.max(O-le,0):Math.min(O+le,0)},F=I(V,z),T=I(q,M),H=!1;_===c?b=Math.abs(F)>Math.abs(T)?a:n:_===f||_===u?(b=n,H=!0):(_===i||_===o)&&(b=a,H=!0);var Q=b===n,W=Q?T:F,Z=Q?q:V,X=Qh(Z),te=!1;!(H&&(C||N))&&(_===u&&Z<0||_===f&&Z>0||_===i&&Z>0||_===o&&Z<0)&&(X*=-1,W=X*Math.abs(W),te=!0);var L;if(C){var U=B<0?1+B:B;L=U*W}else{var oe=B<0?W:0;L=oe+B*X}var ie=function(O){return Math.abs(O)<A||Math.abs(O)>=Math.abs(W)},ne=ie(L),we=ie(Math.abs(W)-Math.abs(L)),Te=ne||we;if(Te&&!te)if(Q){var ke=Math.abs(Z)<=p/2,ge=Math.abs(V)<=g/2;if(ke){var fe=(d.x1+d.x2)/2,de=d.y1,be=d.y2;t.segpts=[fe,de,fe,be]}else if(ge){var Pe=(d.y1+d.y2)/2,D=d.x1,ve=d.x2;t.segpts=[D,Pe,ve,Pe]}else t.segpts=[d.x1,d.y2]}else{var pe=Math.abs(Z)<=h/2,Y=Math.abs(q)<=m/2;if(pe){var K=(d.y1+d.y2)/2,ae=d.x1,he=d.x2;t.segpts=[ae,K,he,K]}else if(Y){var me=(d.x1+d.x2)/2,se=d.y1,Re=d.y2;t.segpts=[me,se,me,Re]}else t.segpts=[d.x2,d.y1]}else if(Q){var De=d.y1+L+(x?p/2*X:0),Be=d.x1,ze=d.x2;t.segpts=[Be,De,ze,De]}else{var $=d.x1+L+(x?h/2*X:0),k=d.y1,R=d.y2;t.segpts=[$,k,$,R]}if(t.isRound){var G=r.pstyle("taxi-radius").value,ee=r.pstyle("radius-type").value[0]==="arc-radius";t.radii=new Array(t.segpts.length/2).fill(G),t.isArcRadius=new Array(t.segpts.length/2).fill(ee)}};_r.tryToCorrectInvalidPoints=function(r,e){var t=r._private.rscratch;if(t.edgeType==="bezier"){var n=e.srcPos,a=e.tgtPos,i=e.srcW,o=e.srcH,u=e.tgtW,f=e.tgtH,c=e.srcShape,d=e.tgtShape,h=e.srcCornerRadius,p=e.tgtCornerRadius,g=e.srcRs,m=e.tgtRs,w=!Ue(t.startX)||!Ue(t.startY),x=!Ue(t.arrowStartX)||!Ue(t.arrowStartY),b=!Ue(t.endX)||!Ue(t.endY),_=!Ue(t.arrowEndX)||!Ue(t.arrowEndY),E=3,C=this.getArrowWidth(r.pstyle("width").pfValue,r.pstyle("arrow-scale").value)*this.arrowShapeWidth,B=E*C,N=Ja({x:t.ctrlpts[0],y:t.ctrlpts[1]},{x:t.startX,y:t.startY}),A=N<B,z=Ja({x:t.ctrlpts[0],y:t.ctrlpts[1]},{x:t.endX,y:t.endY}),M=z<B,V=!1;if(w||x||A){V=!0;var q={x:t.ctrlpts[0]-n.x,y:t.ctrlpts[1]-n.y},I=Math.sqrt(q.x*q.x+q.y*q.y),F={x:q.x/I,y:q.y/I},T=Math.max(i,o),H={x:t.ctrlpts[0]+F.x*2*T,y:t.ctrlpts[1]+F.y*2*T},Q=c.intersectLine(n.x,n.y,i,o,H.x,H.y,0,h,g);A?(t.ctrlpts[0]=t.ctrlpts[0]+F.x*(B-N),t.ctrlpts[1]=t.ctrlpts[1]+F.y*(B-N)):(t.ctrlpts[0]=Q[0]+F.x*B,t.ctrlpts[1]=Q[1]+F.y*B)}if(b||_||M){V=!0;var W={x:t.ctrlpts[0]-a.x,y:t.ctrlpts[1]-a.y},Z=Math.sqrt(W.x*W.x+W.y*W.y),X={x:W.x/Z,y:W.y/Z},te=Math.max(i,o),L={x:t.ctrlpts[0]+X.x*2*te,y:t.ctrlpts[1]+X.y*2*te},U=d.intersectLine(a.x,a.y,u,f,L.x,L.y,0,p,m);M?(t.ctrlpts[0]=t.ctrlpts[0]+X.x*(B-z),t.ctrlpts[1]=t.ctrlpts[1]+X.y*(B-z)):(t.ctrlpts[0]=U[0]+X.x*B,t.ctrlpts[1]=U[1]+X.y*B)}V&&this.findEndpoints(r)}};_r.storeAllpts=function(r){var e=r._private.rscratch;if(e.edgeType==="multibezier"||e.edgeType==="bezier"||e.edgeType==="self"||e.edgeType==="compound"){e.allpts=[],e.allpts.push(e.startX,e.startY);for(var t=0;t+1<e.ctrlpts.length;t+=2)e.allpts.push(e.ctrlpts[t],e.ctrlpts[t+1]),t+3<e.ctrlpts.length&&e.allpts.push((e.ctrlpts[t]+e.ctrlpts[t+2])/2,(e.ctrlpts[t+1]+e.ctrlpts[t+3])/2);e.allpts.push(e.endX,e.endY);var n,a;e.ctrlpts.length/2%2===0?(n=e.allpts.length/2-1,e.midX=e.allpts[n],e.midY=e.allpts[n+1]):(n=e.allpts.length/2-3,a=.5,e.midX=nr(e.allpts[n],e.allpts[n+2],e.allpts[n+4],a),e.midY=nr(e.allpts[n+1],e.allpts[n+3],e.allpts[n+5],a))}else if(e.edgeType==="straight")e.allpts=[e.startX,e.startY,e.endX,e.endY],e.midX=(e.startX+e.endX+e.arrowStartX+e.arrowEndX)/4,e.midY=(e.startY+e.endY+e.arrowStartY+e.arrowEndY)/4;else if(e.edgeType==="segments"){if(e.allpts=[],e.allpts.push(e.startX,e.startY),e.allpts.push.apply(e.allpts,e.segpts),e.allpts.push(e.endX,e.endY),e.isRound){e.roundCorners=[];for(var i=2;i+3<e.allpts.length;i+=2){var o=e.radii[i/2-1],u=e.isArcRadius[i/2-1];e.roundCorners.push(cv({x:e.allpts[i-2],y:e.allpts[i-1]},{x:e.allpts[i],y:e.allpts[i+1],radius:o},{x:e.allpts[i+2],y:e.allpts[i+3]},o,u))}}if(e.segpts.length%4===0){var f=e.segpts.length/2,c=f-2;e.midX=(e.segpts[c]+e.segpts[f])/2,e.midY=(e.segpts[c+1]+e.segpts[f+1])/2}else{var d=e.segpts.length/2-1;if(!e.isRound)e.midX=e.segpts[d],e.midY=e.segpts[d+1];else{var h={x:e.segpts[d],y:e.segpts[d+1]},p=e.roundCorners[d/2];if(p.radius===0){var g={x:e.segpts[d+2],y:e.segpts[d+3]};e.midX=h.x,e.midY=h.y,e.midVector=[h.y-g.y,g.x-h.x]}else{var m=[h.x-p.cx,h.y-p.cy],w=p.radius/Math.sqrt(Math.pow(m[0],2)+Math.pow(m[1],2));m=m.map(function(x){return x*w}),e.midX=p.cx+m[0],e.midY=p.cy+m[1],e.midVector=m}}}}};_r.checkForInvalidEdgeWarning=function(r){var e=r[0]._private.rscratch;e.nodesOverlap||Ue(e.startX)&&Ue(e.startY)&&Ue(e.endX)&&Ue(e.endY)?e.loggedErr=!1:e.loggedErr||(e.loggedErr=!0,gt("Edge `"+r.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))};_r.findEdgeControlPoints=function(r){var e=this;if(!(!r||r.length===0)){for(var t=this,n=t.cy,a=n.hasCompoundNodes(),i=new Fn,o=function(M,V){return[].concat(gl(M),[V?1:0]).join("-")},u=[],f=[],c=0;c<r.length;c++){var d=r[c],h=d._private,p=d.pstyle("curve-style").value;if(!(d.removed()||!d.takesUpSpace())){if(p==="haystack"){f.push(d);continue}var g=p==="unbundled-bezier"||va(p,"segments")||p==="straight"||p==="straight-triangle"||va(p,"taxi"),m=p==="unbundled-bezier"||p==="bezier",w=h.source,x=h.target,b=w.poolIndex(),_=x.poolIndex(),E=[b,_].sort(),C=o(E,g),B=i.get(C);B==null&&(B={eles:[]},u.push({pairId:E,edgeIsUnbundled:g}),i.set(C,B)),B.eles.push(d),g&&(B.hasUnbundled=!0),m&&(B.hasBezier=!0)}}for(var N=function(){var M=u[A],V=M.pairId,q=M.edgeIsUnbundled,I=o(V,q),F=i.get(I),T;if(!F.hasUnbundled){var H=F.eles[0].parallelEdges().filter(function(ee){return ee.isBundledBezier()});Xh(F.eles),H.forEach(function(ee){return F.eles.push(ee)}),F.eles.sort(function(ee,J){return ee.poolIndex()-J.poolIndex()})}var Q=F.eles[0],W=Q.source(),Z=Q.target();if(W.poolIndex()>Z.poolIndex()){var X=W;W=Z,Z=X}var te=F.srcPos=W.position(),L=F.tgtPos=Z.position(),U=F.srcW=W.outerWidth(),oe=F.srcH=W.outerHeight(),ie=F.tgtW=Z.outerWidth(),ne=F.tgtH=Z.outerHeight(),we=F.srcShape=t.nodeShapes[e.getNodeShape(W)],Te=F.tgtShape=t.nodeShapes[e.getNodeShape(Z)],ke=F.srcCornerRadius=W.pstyle("corner-radius").value==="auto"?"auto":W.pstyle("corner-radius").pfValue,ge=F.tgtCornerRadius=Z.pstyle("corner-radius").value==="auto"?"auto":Z.pstyle("corner-radius").pfValue,fe=F.tgtRs=Z._private.rscratch,de=F.srcRs=W._private.rscratch;F.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var be=0;be<F.eles.length;be++){var Pe=F.eles[be],D=Pe[0]._private.rscratch,ve=Pe.pstyle("curve-style").value,pe=ve==="unbundled-bezier"||va(ve,"segments")||va(ve,"taxi"),Y=!W.same(Pe.source());if(!F.calculatedIntersection&&W!==Z&&(F.hasBezier||F.hasUnbundled)){F.calculatedIntersection=!0;var K=we.intersectLine(te.x,te.y,U,oe,L.x,L.y,0,ke,de),ae=F.srcIntn=K,he=Te.intersectLine(L.x,L.y,ie,ne,te.x,te.y,0,ge,fe),me=F.tgtIntn=he,se=F.intersectionPts={x1:K[0],x2:he[0],y1:K[1],y2:he[1]},Re=F.posPts={x1:te.x,x2:L.x,y1:te.y,y2:L.y},De=he[1]-K[1],Be=he[0]-K[0],ze=Math.sqrt(Be*Be+De*De);Ue(ze)&&ze>=vT||(ze=Math.sqrt(Math.max(Be*Be,xo)+Math.max(De*De,xo)));var $=F.vector={x:Be,y:De},k=F.vectorNorm={x:$.x/ze,y:$.y/ze},R={x:-k.y,y:k.x};F.nodesOverlap=!Ue(ze)||Te.checkPoint(K[0],K[1],0,ie,ne,L.x,L.y,ge,fe)||we.checkPoint(he[0],he[1],0,U,oe,te.x,te.y,ke,de),F.vectorNormInverse=R,T={nodesOverlap:F.nodesOverlap,dirCounts:F.dirCounts,calculatedIntersection:!0,hasBezier:F.hasBezier,hasUnbundled:F.hasUnbundled,eles:F.eles,srcPos:L,srcRs:fe,tgtPos:te,tgtRs:de,srcW:ie,srcH:ne,tgtW:U,tgtH:oe,srcIntn:me,tgtIntn:ae,srcShape:Te,tgtShape:we,posPts:{x1:Re.x2,y1:Re.y2,x2:Re.x1,y2:Re.y1},intersectionPts:{x1:se.x2,y1:se.y2,x2:se.x1,y2:se.y1},vector:{x:-$.x,y:-$.y},vectorNorm:{x:-k.x,y:-k.y},vectorNormInverse:{x:-R.x,y:-R.y}}}var G=Y?T:F;D.nodesOverlap=G.nodesOverlap,D.srcIntn=G.srcIntn,D.tgtIntn=G.tgtIntn,D.isRound=ve.startsWith("round"),a&&(W.isParent()||W.isChild()||Z.isParent()||Z.isChild())&&(W.parents().anySame(Z)||Z.parents().anySame(W)||W.same(Z)&&W.isParent())?e.findCompoundLoopPoints(Pe,G,be,pe):W===Z?e.findLoopPoints(Pe,G,be,pe):ve.endsWith("segments")?e.findSegmentsPoints(Pe,G):ve.endsWith("taxi")?e.findTaxiPoints(Pe,G):ve==="straight"||!pe&&F.eles.length%2===1&&be===Math.floor(F.eles.length/2)?e.findStraightEdgePoints(Pe):e.findBezierPoints(Pe,G,be,pe,Y),e.findEndpoints(Pe),e.tryToCorrectInvalidPoints(Pe,G),e.checkForInvalidEdgeWarning(Pe),e.storeAllpts(Pe),e.storeEdgeProjections(Pe),e.calculateArrowAngles(Pe),e.recalculateEdgeLabelProjections(Pe),e.calculateLabelAngles(Pe)}},A=0;A<u.length;A++)N();this.findHaystackPoints(f)}};function _w(r){var e=[];if(r!=null){for(var t=0;t<r.length;t+=2){var n=r[t],a=r[t+1];e.push({x:n,y:a})}return e}}_r.getSegmentPoints=function(r){var e=r[0]._private.rscratch;this.recalculateRenderedStyle(r);var t=e.edgeType;if(t==="segments")return _w(e.segpts)};_r.getControlPoints=function(r){var e=r[0]._private.rscratch;this.recalculateRenderedStyle(r);var t=e.edgeType;if(t==="bezier"||t==="multibezier"||t==="self"||t==="compound")return _w(e.ctrlpts)};_r.getEdgeMidpoint=function(r){var e=r[0]._private.rscratch;return this.recalculateRenderedStyle(r),{x:e.midX,y:e.midY}};var Do={};Do.manualEndptToPx=function(r,e){var t=this,n=r.position(),a=r.outerWidth(),i=r.outerHeight(),o=r._private.rscratch;if(e.value.length===2){var u=[e.pfValue[0],e.pfValue[1]];return e.units[0]==="%"&&(u[0]=u[0]*a),e.units[1]==="%"&&(u[1]=u[1]*i),u[0]+=n.x,u[1]+=n.y,u}else{var f=e.pfValue[0];f=-Math.PI/2+f;var c=2*Math.max(a,i),d=[n.x+Math.cos(f)*c,n.y+Math.sin(f)*c];return t.nodeShapes[this.getNodeShape(r)].intersectLine(n.x,n.y,a,i,d[0],d[1],0,r.pstyle("corner-radius").value==="auto"?"auto":r.pstyle("corner-radius").pfValue,o)}};Do.findEndpoints=function(r){var e,t,n,a,i=this,o,u=r.source()[0],f=r.target()[0],c=u.position(),d=f.position(),h=r.pstyle("target-arrow-shape").value,p=r.pstyle("source-arrow-shape").value,g=r.pstyle("target-distance-from-node").pfValue,m=r.pstyle("source-distance-from-node").pfValue,w=u._private.rscratch,x=f._private.rscratch,b=r.pstyle("curve-style").value,_=r._private.rscratch,E=_.edgeType,C=va(b,"taxi"),B=E==="self"||E==="compound",N=E==="bezier"||E==="multibezier"||B,A=E!=="bezier",z=E==="straight"||E==="segments",M=E==="segments",V=N||A||z,q=B||C,I=r.pstyle("source-endpoint"),F=q?"outside-to-node":I.value,T=u.pstyle("corner-radius").value==="auto"?"auto":u.pstyle("corner-radius").pfValue,H=r.pstyle("target-endpoint"),Q=q?"outside-to-node":H.value,W=f.pstyle("corner-radius").value==="auto"?"auto":f.pstyle("corner-radius").pfValue;_.srcManEndpt=I,_.tgtManEndpt=H;var Z,X,te,L,U=(e=(H==null||(t=H.pfValue)===null||t===void 0?void 0:t.length)===2?H.pfValue:null)!==null&&e!==void 0?e:[0,0],oe=(n=(I==null||(a=I.pfValue)===null||a===void 0?void 0:a.length)===2?I.pfValue:null)!==null&&n!==void 0?n:[0,0];if(N){var ie=[_.ctrlpts[0],_.ctrlpts[1]],ne=A?[_.ctrlpts[_.ctrlpts.length-2],_.ctrlpts[_.ctrlpts.length-1]]:ie;Z=ne,X=ie}else if(z){var we=M?_.segpts.slice(0,2):[d.x+U[0],d.y+U[1]],Te=M?_.segpts.slice(_.segpts.length-2):[c.x+oe[0],c.y+oe[1]];Z=Te,X=we}if(Q==="inside-to-node")o=[d.x,d.y];else if(H.units)o=this.manualEndptToPx(f,H);else if(Q==="outside-to-line")o=_.tgtIntn;else if(Q==="outside-to-node"||Q==="outside-to-node-or-label"?te=Z:(Q==="outside-to-line"||Q==="outside-to-line-or-label")&&(te=[c.x,c.y]),o=i.nodeShapes[this.getNodeShape(f)].intersectLine(d.x,d.y,f.outerWidth(),f.outerHeight(),te[0],te[1],0,W,x),Q==="outside-to-node-or-label"||Q==="outside-to-line-or-label"){var ke=f._private.rscratch,ge=ke.labelWidth,fe=ke.labelHeight,de=ke.labelX,be=ke.labelY,Pe=ge/2,D=fe/2,ve=f.pstyle("text-valign").value;ve==="top"?be-=D:ve==="bottom"&&(be+=D);var pe=f.pstyle("text-halign").value;pe==="left"?de-=Pe:pe==="right"&&(de+=Pe);var Y=po(te[0],te[1],[de-Pe,be-D,de+Pe,be-D,de+Pe,be+D,de-Pe,be+D],d.x,d.y);if(Y.length>0){var K=c,ae=Ga(K,ji(o)),he=Ga(K,ji(Y)),me=ae;if(he<ae&&(o=Y,me=he),Y.length>2){var se=Ga(K,{x:Y[2],y:Y[3]});se<me&&(o=[Y[2],Y[3]])}}}var Re=Ku(o,Z,i.arrowShapes[h].spacing(r)+g),De=Ku(o,Z,i.arrowShapes[h].gap(r)+g);if(_.endX=De[0],_.endY=De[1],_.arrowEndX=Re[0],_.arrowEndY=Re[1],F==="inside-to-node")o=[c.x,c.y];else if(I.units)o=this.manualEndptToPx(u,I);else if(F==="outside-to-line")o=_.srcIntn;else if(F==="outside-to-node"||F==="outside-to-node-or-label"?L=X:(F==="outside-to-line"||F==="outside-to-line-or-label")&&(L=[d.x,d.y]),o=i.nodeShapes[this.getNodeShape(u)].intersectLine(c.x,c.y,u.outerWidth(),u.outerHeight(),L[0],L[1],0,T,w),F==="outside-to-node-or-label"||F==="outside-to-line-or-label"){var Be=u._private.rscratch,ze=Be.labelWidth,$=Be.labelHeight,k=Be.labelX,R=Be.labelY,G=ze/2,ee=$/2,J=u.pstyle("text-valign").value;J==="top"?R-=ee:J==="bottom"&&(R+=ee);var O=u.pstyle("text-halign").value;O==="left"?k-=G:O==="right"&&(k+=G);var le=po(L[0],L[1],[k-G,R-ee,k+G,R-ee,k+G,R+ee,k-G,R+ee],c.x,c.y);if(le.length>0){var _e=d,ye=Ga(_e,ji(o)),Se=Ga(_e,ji(le)),Oe=ye;if(Se<ye&&(o=[le[0],le[1]],Oe=Se),le.length>2){var Ie=Ga(_e,{x:le[2],y:le[3]});Ie<Oe&&(o=[le[2],le[3]])}}}var We=Ku(o,X,i.arrowShapes[p].spacing(r)+m),$e=Ku(o,X,i.arrowShapes[p].gap(r)+m);_.startX=$e[0],_.startY=$e[1],_.arrowStartX=We[0],_.arrowStartY=We[1],V&&(!Ue(_.startX)||!Ue(_.startY)||!Ue(_.endX)||!Ue(_.endY)?_.badLine=!0:_.badLine=!1)};Do.getSourceEndpoint=function(r){var e=r[0]._private.rscratch;switch(this.recalculateRenderedStyle(r),e.edgeType){case"haystack":return{x:e.haystackPts[0],y:e.haystackPts[1]};default:return{x:e.arrowStartX,y:e.arrowStartY}}};Do.getTargetEndpoint=function(r){var e=r[0]._private.rscratch;switch(this.recalculateRenderedStyle(r),e.edgeType){case"haystack":return{x:e.haystackPts[2],y:e.haystackPts[3]};default:return{x:e.arrowEndX,y:e.arrowEndY}}};var dv={};function pT(r,e,t){for(var n=function(c,d,h,p){return nr(c,d,h,p)},a=e._private,i=a.rstyle.bezierPts,o=0;o<r.bezierProjPcts.length;o++){var u=r.bezierProjPcts[o];i.push({x:n(t[0],t[2],t[4],u),y:n(t[1],t[3],t[5],u)})}}dv.storeEdgeProjections=function(r){var e=r._private,t=e.rscratch,n=t.edgeType;if(e.rstyle.bezierPts=null,e.rstyle.linePts=null,e.rstyle.haystackPts=null,n==="multibezier"||n==="bezier"||n==="self"||n==="compound"){e.rstyle.bezierPts=[];for(var a=0;a+5<t.allpts.length;a+=4)pT(this,r,t.allpts.slice(a,a+6))}else if(n==="segments")for(var i=e.rstyle.linePts=[],a=0;a+1<t.allpts.length;a+=2)i.push({x:t.allpts[a],y:t.allpts[a+1]});else if(n==="haystack"){var o=t.haystackPts;e.rstyle.haystackPts=[{x:o[0],y:o[1]},{x:o[2],y:o[3]}]}e.rstyle.arrowWidth=this.getArrowWidth(r.pstyle("width").pfValue,r.pstyle("arrow-scale").value)*this.arrowShapeWidth};dv.recalculateEdgeProjections=function(r){this.findEdgeControlPoints(r)};var Tn={};Tn.recalculateNodeLabelProjection=function(r){var e=r.pstyle("label").strValue;if(!wa(e)){var t,n,a=r._private,i=r.width(),o=r.height(),u=r.padding(),f=r.position(),c=r.pstyle("text-halign").strValue,d=r.pstyle("text-valign").strValue,h=a.rscratch,p=a.rstyle;switch(c){case"left":t=f.x-i/2-u;break;case"right":t=f.x+i/2+u;break;default:t=f.x}switch(d){case"top":n=f.y-o/2-u;break;case"bottom":n=f.y+o/2+u;break;default:n=f.y}h.labelX=t,h.labelY=n,p.labelX=t,p.labelY=n,this.calculateLabelAngles(r),this.applyLabelDimensions(r)}};var Ew=function(e,t){var n=Math.atan(t/e);return e===0&&n<0&&(n=n*-1),n},Sw=function(e,t){var n=t.x-e.x,a=t.y-e.y;return Ew(n,a)},gT=function(e,t,n,a){var i=vo(0,a-.001,1),o=vo(0,a+.001,1),u=Hi(e,t,n,i),f=Hi(e,t,n,o);return Sw(u,f)};Tn.recalculateEdgeLabelProjections=function(r){var e,t=r._private,n=t.rscratch,a=this,i={mid:r.pstyle("label").strValue,source:r.pstyle("source-label").strValue,target:r.pstyle("target-label").strValue};if(i.mid||i.source||i.target){e={x:n.midX,y:n.midY};var o=function(h,p,g){zn(t.rscratch,h,p,g),zn(t.rstyle,h,p,g)};o("labelX",null,e.x),o("labelY",null,e.y);var u=Ew(n.midDispX,n.midDispY);o("labelAutoAngle",null,u);var f=function(){if(f.cache)return f.cache;for(var h=[],p=0;p+5<n.allpts.length;p+=4){var g={x:n.allpts[p],y:n.allpts[p+1]},m={x:n.allpts[p+2],y:n.allpts[p+3]},w={x:n.allpts[p+4],y:n.allpts[p+5]};h.push({p0:g,p1:m,p2:w,startDist:0,length:0,segments:[]})}var x=t.rstyle.bezierPts,b=a.bezierProjPcts.length;function _(A,z,M,V,q){var I=Ja(z,M),F=A.segments[A.segments.length-1],T={p0:z,p1:M,t0:V,t1:q,startDist:F?F.startDist+F.length:0,length:I};A.segments.push(T),A.length+=I}for(var E=0;E<h.length;E++){var C=h[E],B=h[E-1];B&&(C.startDist=B.startDist+B.length),_(C,C.p0,x[E*b],0,a.bezierProjPcts[0]);for(var N=0;N<b-1;N++)_(C,x[E*b+N],x[E*b+N+1],a.bezierProjPcts[N],a.bezierProjPcts[N+1]);_(C,x[E*b+b-1],C.p2,a.bezierProjPcts[b-1],1)}return f.cache=h},c=function(h){var p,g=h==="source";if(i[h]){var m=r.pstyle(h+"-text-offset").pfValue;switch(n.edgeType){case"self":case"compound":case"bezier":case"multibezier":{for(var w=f(),x,b=0,_=0,E=0;E<w.length;E++){for(var C=w[g?E:w.length-1-E],B=0;B<C.segments.length;B++){var N=C.segments[g?B:C.segments.length-1-B],A=E===w.length-1&&B===C.segments.length-1;if(b=_,_+=N.length,_>=m||A){x={cp:C,segment:N};break}}if(x)break}var z=x.cp,M=x.segment,V=(m-b)/M.length,q=M.t1-M.t0,I=g?M.t0+q*V:M.t1-q*V;I=vo(0,I,1),e=Hi(z.p0,z.p1,z.p2,I),p=gT(z.p0,z.p1,z.p2,I);break}case"straight":case"segments":case"haystack":{for(var F=0,T,H,Q,W,Z=n.allpts.length,X=0;X+3<Z&&(g?(Q={x:n.allpts[X],y:n.allpts[X+1]},W={x:n.allpts[X+2],y:n.allpts[X+3]}):(Q={x:n.allpts[Z-2-X],y:n.allpts[Z-1-X]},W={x:n.allpts[Z-4-X],y:n.allpts[Z-3-X]}),T=Ja(Q,W),H=F,F+=T,!(F>=m));X+=2);var te=m-H,L=te/T;L=vo(0,L,1),e=zE(Q,W,L),p=Sw(Q,W);break}}o("labelX",h,e.x),o("labelY",h,e.y),o("labelAutoAngle",h,p)}};c("source"),c("target"),this.applyLabelDimensions(r)}};Tn.applyLabelDimensions=function(r){this.applyPrefixedLabelDimensions(r),r.isEdge()&&(this.applyPrefixedLabelDimensions(r,"source"),this.applyPrefixedLabelDimensions(r,"target"))};Tn.applyPrefixedLabelDimensions=function(r,e){var t=r._private,n=this.getLabelText(r,e),a=Qa(n,r._private.labelDimsKey);if(Mr(t.rscratch,"prefixedLabelDimsKey",e)!==a){zn(t.rscratch,"prefixedLabelDimsKey",e,a);var i=this.calculateLabelDimensions(r,n),o=r.pstyle("line-height").pfValue,u=r.pstyle("text-wrap").strValue,f=Mr(t.rscratch,"labelWrapCachedLines",e)||[],c=u!=="wrap"?1:Math.max(f.length,1),d=i.height/c,h=d*o,p=i.width,g=i.height+(c-1)*(o-1)*d;zn(t.rstyle,"labelWidth",e,p),zn(t.rscratch,"labelWidth",e,p),zn(t.rstyle,"labelHeight",e,g),zn(t.rscratch,"labelHeight",e,g),zn(t.rscratch,"labelLineHeight",e,h)}};Tn.getLabelText=function(r,e){var t=r._private,n=e?e+"-":"",a=r.pstyle(n+"label").strValue,i=r.pstyle("text-transform").value,o=function(oe,ie){return ie?(zn(t.rscratch,oe,e,ie),ie):Mr(t.rscratch,oe,e)};if(!a)return"";i=="none"||(i=="uppercase"?a=a.toUpperCase():i=="lowercase"&&(a=a.toLowerCase()));var u=r.pstyle("text-wrap").value;if(u==="wrap"){var f=o("labelKey");if(f!=null&&o("labelWrapKey")===f)return o("labelWrapCachedText");for(var c="",d=a.split(`
`),h=r.pstyle("text-max-width").pfValue,p=r.pstyle("text-overflow-wrap").value,g=p==="anywhere",m=[],w=/[\s\u200b]+|$/g,x=0;x<d.length;x++){var b=d[x],_=this.calculateLabelDimensions(r,b),E=_.width;if(g){var C=b.split("").join(c);b=C}if(E>h){var B=b.matchAll(w),N="",A=0,z=Fr(B),M;try{for(z.s();!(M=z.n()).done;){var V=M.value,q=V[0],I=b.substring(A,V.index);A=V.index+q.length;var F=N.length===0?I:N+I+q,T=this.calculateLabelDimensions(r,F),H=T.width;H<=h?N+=I+q:(N&&m.push(N),N=I+q)}}catch(U){z.e(U)}finally{z.f()}N.match(/^[\s\u200b]+$/)||m.push(N)}else m.push(b)}o("labelWrapCachedLines",m),a=o("labelWrapCachedText",m.join(`
`)),o("labelWrapKey",f)}else if(u==="ellipsis"){var Q=r.pstyle("text-max-width").pfValue,W="",Z="",X=!1;if(this.calculateLabelDimensions(r,a).width<Q)return a;for(var te=0;te<a.length;te++){var L=this.calculateLabelDimensions(r,W+a[te]+Z).width;if(L>Q)break;W+=a[te],te===a.length-1&&(X=!0)}return X||(W+=Z),W}return a};Tn.getLabelJustification=function(r){var e=r.pstyle("text-justification").strValue,t=r.pstyle("text-halign").strValue;if(e==="auto")if(r.isNode())switch(t){case"left":return"right";case"right":return"left";default:return"center"}else return"center";else return e};Tn.calculateLabelDimensions=function(r,e){var t=this,n=t.cy.window(),a=n.document,i=0,o=r.pstyle("font-style").strValue,u=r.pstyle("font-size").pfValue,f=r.pstyle("font-family").strValue,c=r.pstyle("font-weight").strValue,d=this.labelCalcCanvas,h=this.labelCalcCanvasContext;if(!d){d=this.labelCalcCanvas=a.createElement("canvas"),h=this.labelCalcCanvasContext=d.getContext("2d");var p=d.style;p.position="absolute",p.left="-9999px",p.top="-9999px",p.zIndex="-1",p.visibility="hidden",p.pointerEvents="none"}h.font="".concat(o," ").concat(c," ").concat(u,"px ").concat(f);for(var g=0,m=0,w=e.split(`
`),x=0;x<w.length;x++){var b=w[x],_=h.measureText(b),E=Math.ceil(_.width),C=u;g=Math.max(E,g),m+=C}return g+=i,m+=i,{width:g,height:m}};Tn.calculateLabelAngle=function(r,e){var t=r._private,n=t.rscratch,a=r.isEdge(),i=e?e+"-":"",o=r.pstyle(i+"text-rotation"),u=o.strValue;return u==="none"?0:a&&u==="autorotate"?n.labelAutoAngle:u==="autorotate"?0:o.pfValue};Tn.calculateLabelAngles=function(r){var e=this,t=r.isEdge(),n=r._private,a=n.rscratch;a.labelAngle=e.calculateLabelAngle(r),t&&(a.sourceLabelAngle=e.calculateLabelAngle(r,"source"),a.targetLabelAngle=e.calculateLabelAngle(r,"target"))};var kw={},_0=28,E0=!1;kw.getNodeShape=function(r){var e=this,t=r.pstyle("shape").value;if(t==="cutrectangle"&&(r.width()<_0||r.height()<_0))return E0||(gt("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),E0=!0),"rectangle";if(r.isParent())return t==="rectangle"||t==="roundrectangle"||t==="round-rectangle"||t==="cutrectangle"||t==="cut-rectangle"||t==="barrel"?t:"rectangle";if(t==="polygon"){var n=r.pstyle("shape-polygon-points").value;return e.nodeShapes.makePolygon(n).name}return t};var Gl={};Gl.registerCalculationListeners=function(){var r=this.cy,e=r.collection(),t=this,n=function(o){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.merge(o),u)for(var f=0;f<o.length;f++){var c=o[f],d=c._private,h=d.rstyle;h.clean=!1,h.cleanConnected=!1}};t.binder(r).on("bounds.* dirty.*",function(o){var u=o.target;n(u)}).on("style.* background.*",function(o){var u=o.target;n(u,!1)});var a=function(o){if(o){var u=t.onUpdateEleCalcsFns;e.cleanStyle();for(var f=0;f<e.length;f++){var c=e[f],d=c._private.rstyle;c.isNode()&&!d.cleanConnected&&(n(c.connectedEdges()),d.cleanConnected=!0)}if(u)for(var h=0;h<u.length;h++){var p=u[h];p(o,e)}t.recalculateRenderedStyle(e),e=r.collection()}};t.flushRenderedStyleQueue=function(){a(!0)},t.beforeRender(a,t.beforeRenderPriorities.eleCalcs)};Gl.onUpdateEleCalcs=function(r){var e=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];e.push(r)};Gl.recalculateRenderedStyle=function(r,e){var t=function(C){return C._private.rstyle.cleanConnected};if(r.length!==0){var n=[],a=[];if(!this.destroyed){e===void 0&&(e=!0);for(var i=0;i<r.length;i++){var o=r[i],u=o._private,f=u.rstyle;o.isEdge()&&(!t(o.source())||!t(o.target()))&&(f.clean=!1),o.isEdge()&&o.isBundledBezier()&&o.parallelEdges().some(function(E){return!E._private.rstyle.clean&&E.isBundledBezier()})&&(f.clean=!1),!(e&&f.clean||o.removed())&&o.pstyle("display").value!=="none"&&(u.group==="nodes"?a.push(o):n.push(o),f.clean=!0)}for(var c=0;c<a.length;c++){var d=a[c],h=d._private,p=h.rstyle,g=d.position();this.recalculateNodeLabelProjection(d),p.nodeX=g.x,p.nodeY=g.y,p.nodeW=d.pstyle("width").pfValue,p.nodeH=d.pstyle("height").pfValue}this.recalculateEdgeProjections(n);for(var m=0;m<n.length;m++){var w=n[m],x=w._private,b=x.rstyle,_=x.rscratch;b.srcX=_.arrowStartX,b.srcY=_.arrowStartY,b.tgtX=_.arrowEndX,b.tgtY=_.arrowEndY,b.midX=_.midX,b.midY=_.midY,b.labelAngle=_.labelAngle,b.sourceLabelAngle=_.sourceLabelAngle,b.targetLabelAngle=_.targetLabelAngle}}}};var Kl={};Kl.updateCachedGrabbedEles=function(){var r=this.cachedZSortedEles;if(r){r.drag=[],r.nondrag=[];for(var e=[],t=0;t<r.length;t++){var n=r[t],a=n._private.rscratch;n.grabbed()&&!n.isParent()?e.push(n):a.inDragLayer?r.drag.push(n):r.nondrag.push(n)}for(var t=0;t<e.length;t++){var n=e[t];r.drag.push(n)}}};Kl.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null};Kl.getCachedZSortedEles=function(r){if(r||!this.cachedZSortedEles){var e=this.cy.mutableElements().toArray();e.sort(sw),e.interactive=e.filter(function(t){return t.interactive()}),this.cachedZSortedEles=e,this.updateCachedGrabbedEles()}else e=this.cachedZSortedEles;return e};var Cw={};[ai,Cl,_r,Do,dv,Tn,kw,Gl,Kl].forEach(function(r){et(Cw,r)});var Tw={};Tw.getCachedImage=function(r,e,t){var n=this,a=n.imageCache=n.imageCache||{},i=a[r];if(i)return i.image.complete||i.image.addEventListener("load",t),i.image;i=a[r]=a[r]||{};var o=i.image=new Image;o.addEventListener("load",t),o.addEventListener("error",function(){o.error=!0});var u="data:",f=r.substring(0,u.length).toLowerCase()===u;return f||(e=e==="null"?null:e,o.crossOrigin=e),o.src=r,o};var ns={};ns.registerBinding=function(r,e,t,n){var a=Array.prototype.slice.apply(arguments,[1]);if(Array.isArray(r)){for(var i=[],o=0;o<r.length;o++){var u=r[o];if(u!==void 0){var f=this.binder(u);i.push(f.on.apply(f,a))}}return i}var f=this.binder(r);return f.on.apply(f,a)};ns.binder=function(r){var e=this,t=e.cy.window(),n=r===t||r===t.document||r===t.document.body||P_(r);if(e.supportsPassiveEvents==null){var a=!1;try{var i=Object.defineProperty({},"passive",{get:function(){return a=!0,!0}});t.addEventListener("test",null,i)}catch{}e.supportsPassiveEvents=a}var o=function(f,c,d){var h=Array.prototype.slice.call(arguments);return n&&e.supportsPassiveEvents&&(h[2]={capture:d??!1,passive:!1,once:!1}),e.bindings.push({target:r,args:h}),(r.addEventListener||r.on).apply(r,h),this};return{on:o,addEventListener:o,addListener:o,bind:o}};ns.nodeIsDraggable=function(r){return r&&r.isNode()&&!r.locked()&&r.grabbable()};ns.nodeIsGrabbable=function(r){return this.nodeIsDraggable(r)&&r.interactive()};ns.load=function(){var r=this,e=r.cy.window(),t=function(O){return O.selected()},n=function(O){var le=O.getRootNode();if(le&&le.nodeType===11&&le.host!==void 0)return le},a=function(O,le,_e,ye){O==null&&(O=r.cy);for(var Se=0;Se<le.length;Se++){var Oe=le[Se];O.emit({originalEvent:_e,type:Oe,position:ye})}},i=function(O){return O.shiftKey||O.metaKey||O.ctrlKey},o=function(O,le){var _e=!0;if(r.cy.hasCompoundNodes()&&O&&O.pannable())for(var ye=0;le&&ye<le.length;ye++){var O=le[ye];if(O.isNode()&&O.isParent()&&!O.pannable()){_e=!1;break}}else _e=!0;return _e},u=function(O){O[0]._private.grabbed=!0},f=function(O){O[0]._private.grabbed=!1},c=function(O){O[0]._private.rscratch.inDragLayer=!0},d=function(O){O[0]._private.rscratch.inDragLayer=!1},h=function(O){O[0]._private.rscratch.isGrabTarget=!0},p=function(O){O[0]._private.rscratch.isGrabTarget=!1},g=function(O,le){var _e=le.addToList,ye=_e.has(O);!ye&&O.grabbable()&&!O.locked()&&(_e.merge(O),u(O))},m=function(O,le){if(O.cy().hasCompoundNodes()&&!(le.inDragLayer==null&&le.addToList==null)){var _e=O.descendants();le.inDragLayer&&(_e.forEach(c),_e.connectedEdges().forEach(c)),le.addToList&&g(_e,le)}},w=function(O,le){le=le||{};var _e=O.cy().hasCompoundNodes();le.inDragLayer&&(O.forEach(c),O.neighborhood().stdFilter(function(ye){return!_e||ye.isEdge()}).forEach(c)),le.addToList&&O.forEach(function(ye){g(ye,le)}),m(O,le),_(O,{inDragLayer:le.inDragLayer}),r.updateCachedGrabbedEles()},x=w,b=function(O){O&&(r.getCachedZSortedEles().forEach(function(le){f(le),d(le),p(le)}),r.updateCachedGrabbedEles())},_=function(O,le){if(!(le.inDragLayer==null&&le.addToList==null)&&O.cy().hasCompoundNodes()){var _e=O.ancestors().orphans();if(!_e.same(O)){var ye=_e.descendants().spawnSelf().merge(_e).unmerge(O).unmerge(O.descendants()),Se=ye.connectedEdges();le.inDragLayer&&(Se.forEach(c),ye.forEach(c)),le.addToList&&ye.forEach(function(Oe){g(Oe,le)})}}},E=function(){document.activeElement!=null&&document.activeElement.blur!=null&&document.activeElement.blur()},C=typeof MutationObserver<"u",B=typeof ResizeObserver<"u";C?(r.removeObserver=new MutationObserver(function(J){for(var O=0;O<J.length;O++){var le=J[O],_e=le.removedNodes;if(_e)for(var ye=0;ye<_e.length;ye++){var Se=_e[ye];if(Se===r.container){r.destroy();break}}}}),r.container.parentNode&&r.removeObserver.observe(r.container.parentNode,{childList:!0})):r.registerBinding(r.container,"DOMNodeRemoved",function(J){r.destroy()});var N=Po(function(){r.cy.resize()},100);C&&(r.styleObserver=new MutationObserver(N),r.styleObserver.observe(r.container,{attributes:!0})),r.registerBinding(e,"resize",N),B&&(r.resizeObserver=new ResizeObserver(N),r.resizeObserver.observe(r.container));var A=function(O,le){for(;O!=null;)le(O),O=O.parentNode},z=function(){r.invalidateContainerClientCoordsCache()};A(r.container,function(J){r.registerBinding(J,"transitionend",z),r.registerBinding(J,"animationend",z),r.registerBinding(J,"scroll",z)}),r.registerBinding(r.container,"contextmenu",function(J){J.preventDefault()});var M=function(){return r.selection[4]!==0},V=function(O){for(var le=r.findContainerClientCoords(),_e=le[0],ye=le[1],Se=le[2],Oe=le[3],Ie=O.touches?O.touches:[O],We=!1,$e=0;$e<Ie.length;$e++){var He=Ie[$e];if(_e<=He.clientX&&He.clientX<=_e+Se&&ye<=He.clientY&&He.clientY<=ye+Oe){We=!0;break}}if(!We)return!1;for(var rt=r.container,nt=O.target,Ke=nt.parentNode,it=!1;Ke;){if(Ke===rt){it=!0;break}Ke=Ke.parentNode}return!!it};r.registerBinding(r.container,"mousedown",function(O){if(V(O)&&!(r.hoverData.which===1&&O.which!==1)){O.preventDefault(),E(),r.hoverData.capture=!0,r.hoverData.which=O.which;var le=r.cy,_e=[O.clientX,O.clientY],ye=r.projectIntoViewport(_e[0],_e[1]),Se=r.selection,Oe=r.findNearestElements(ye[0],ye[1],!0,!1),Ie=Oe[0],We=r.dragData.possibleDragElements;r.hoverData.mdownPos=ye,r.hoverData.mdownGPos=_e;var $e=function(at){return{originalEvent:O,type:at,position:{x:ye[0],y:ye[1]}}},He=function(){r.hoverData.tapholdCancelled=!1,clearTimeout(r.hoverData.tapholdTimeout),r.hoverData.tapholdTimeout=setTimeout(function(){if(!r.hoverData.tapholdCancelled){var at=r.hoverData.down;at?at.emit($e("taphold")):le.emit($e("taphold"))}},r.tapholdDuration)};if(O.which==3){r.hoverData.cxtStarted=!0;var rt={originalEvent:O,type:"cxttapstart",position:{x:ye[0],y:ye[1]}};Ie?(Ie.activate(),Ie.emit(rt),r.hoverData.down=Ie):le.emit(rt),r.hoverData.downTime=new Date().getTime(),r.hoverData.cxtDragged=!1}else if(O.which==1){Ie&&Ie.activate();{if(Ie!=null&&r.nodeIsGrabbable(Ie)){var nt=function(at){at.emit($e("grab"))};if(h(Ie),!Ie.selected())We=r.dragData.possibleDragElements=le.collection(),x(Ie,{addToList:We}),Ie.emit($e("grabon")).emit($e("grab"));else{We=r.dragData.possibleDragElements=le.collection();var Ke=le.$(function(it){return it.isNode()&&it.selected()&&r.nodeIsGrabbable(it)});w(Ke,{addToList:We}),Ie.emit($e("grabon")),Ke.forEach(nt)}r.redrawHint("eles",!0),r.redrawHint("drag",!0)}r.hoverData.down=Ie,r.hoverData.downs=Oe,r.hoverData.downTime=new Date().getTime()}a(Ie,["mousedown","tapstart","vmousedown"],O,{x:ye[0],y:ye[1]}),Ie==null?(Se[4]=1,r.data.bgActivePosistion={x:ye[0],y:ye[1]},r.redrawHint("select",!0),r.redraw()):Ie.pannable()&&(Se[4]=1),He()}Se[0]=Se[2]=ye[0],Se[1]=Se[3]=ye[1]}},!1);var q=n(r.container);r.registerBinding([e,q],"mousemove",function(O){var le=r.hoverData.capture;if(!(!le&&!V(O))){var _e=!1,ye=r.cy,Se=ye.zoom(),Oe=[O.clientX,O.clientY],Ie=r.projectIntoViewport(Oe[0],Oe[1]),We=r.hoverData.mdownPos,$e=r.hoverData.mdownGPos,He=r.selection,rt=null;!r.hoverData.draggingEles&&!r.hoverData.dragging&&!r.hoverData.selecting&&(rt=r.findNearestElement(Ie[0],Ie[1],!0,!1));var nt=r.hoverData.last,Ke=r.hoverData.down,it=[Ie[0]-He[2],Ie[1]-He[3]],at=r.dragData.possibleDragElements,Dt;if($e){var Et=Oe[0]-$e[0],$t=Et*Et,Pt=Oe[1]-$e[1],Rt=Pt*Pt,Vt=$t+Rt;r.hoverData.isOverThresholdDrag=Dt=Vt>=r.desktopTapThreshold2}var It=i(O);Dt&&(r.hoverData.tapholdCancelled=!0);var Ur=function(){var Sr=r.hoverData.dragDelta=r.hoverData.dragDelta||[];Sr.length===0?(Sr.push(it[0]),Sr.push(it[1])):(Sr[0]+=it[0],Sr[1]+=it[1])};_e=!0,a(rt,["mousemove","vmousemove","tapdrag"],O,{x:Ie[0],y:Ie[1]});var St=function(Sr){return{originalEvent:O,type:Sr,position:{x:Ie[0],y:Ie[1]}}},$r=function(){r.data.bgActivePosistion=void 0,r.hoverData.selecting||ye.emit(St("boxstart")),He[4]=1,r.hoverData.selecting=!0,r.redrawHint("select",!0),r.redraw()};if(r.hoverData.which===3){if(Dt){var an=St("cxtdrag");Ke?Ke.emit(an):ye.emit(an),r.hoverData.cxtDragged=!0,(!r.hoverData.cxtOver||rt!==r.hoverData.cxtOver)&&(r.hoverData.cxtOver&&r.hoverData.cxtOver.emit(St("cxtdragout")),r.hoverData.cxtOver=rt,rt&&rt.emit(St("cxtdragover")))}}else if(r.hoverData.dragging){if(_e=!0,ye.panningEnabled()&&ye.userPanningEnabled()){var qn;if(r.hoverData.justStartedPan){var si=r.hoverData.mdownPos;qn={x:(Ie[0]-si[0])*Se,y:(Ie[1]-si[1])*Se},r.hoverData.justStartedPan=!1}else qn={x:it[0]*Se,y:it[1]*Se};ye.panBy(qn),ye.emit(St("dragpan")),r.hoverData.dragged=!0}Ie=r.projectIntoViewport(O.clientX,O.clientY)}else if(He[4]==1&&(Ke==null||Ke.pannable())){if(Dt){if(!r.hoverData.dragging&&ye.boxSelectionEnabled()&&(It||!ye.panningEnabled()||!ye.userPanningEnabled()))$r();else if(!r.hoverData.selecting&&ye.panningEnabled()&&ye.userPanningEnabled()){var Er=o(Ke,r.hoverData.downs);Er&&(r.hoverData.dragging=!0,r.hoverData.justStartedPan=!0,He[4]=0,r.data.bgActivePosistion=ji(We),r.redrawHint("select",!0),r.redraw())}Ke&&Ke.pannable()&&Ke.active()&&Ke.unactivate()}}else{if(Ke&&Ke.pannable()&&Ke.active()&&Ke.unactivate(),(!Ke||!Ke.grabbed())&&rt!=nt&&(nt&&a(nt,["mouseout","tapdragout"],O,{x:Ie[0],y:Ie[1]}),rt&&a(rt,["mouseover","tapdragover"],O,{x:Ie[0],y:Ie[1]}),r.hoverData.last=rt),Ke)if(Dt){if(ye.boxSelectionEnabled()&&It)Ke&&Ke.grabbed()&&(b(at),Ke.emit(St("freeon")),at.emit(St("free")),r.dragData.didDrag&&(Ke.emit(St("dragfreeon")),at.emit(St("dragfree")))),$r();else if(Ke&&Ke.grabbed()&&r.nodeIsDraggable(Ke)){var sr=!r.dragData.didDrag;sr&&r.redrawHint("eles",!0),r.dragData.didDrag=!0,r.hoverData.draggingEles||w(at,{inDragLayer:!0});var Gt={x:0,y:0};if(Ue(it[0])&&Ue(it[1])&&(Gt.x+=it[0],Gt.y+=it[1],sr)){var vr=r.hoverData.dragDelta;vr&&Ue(vr[0])&&Ue(vr[1])&&(Gt.x+=vr[0],Gt.y+=vr[1])}r.hoverData.draggingEles=!0,at.silentShift(Gt).emit(St("position")).emit(St("drag")),r.redrawHint("drag",!0),r.redraw()}}else Ur();_e=!0}if(He[2]=Ie[0],He[3]=Ie[1],_e)return O.stopPropagation&&O.stopPropagation(),O.preventDefault&&O.preventDefault(),!1}},!1);var I,F,T;r.registerBinding(e,"mouseup",function(O){if(!(r.hoverData.which===1&&O.which!==1&&r.hoverData.capture)){var le=r.hoverData.capture;if(le){r.hoverData.capture=!1;var _e=r.cy,ye=r.projectIntoViewport(O.clientX,O.clientY),Se=r.selection,Oe=r.findNearestElement(ye[0],ye[1],!0,!1),Ie=r.dragData.possibleDragElements,We=r.hoverData.down,$e=i(O);r.data.bgActivePosistion&&(r.redrawHint("select",!0),r.redraw()),r.hoverData.tapholdCancelled=!0,r.data.bgActivePosistion=void 0,We&&We.unactivate();var He=function(Et){return{originalEvent:O,type:Et,position:{x:ye[0],y:ye[1]}}};if(r.hoverData.which===3){var rt=He("cxttapend");if(We?We.emit(rt):_e.emit(rt),!r.hoverData.cxtDragged){var nt=He("cxttap");We?We.emit(nt):_e.emit(nt)}r.hoverData.cxtDragged=!1,r.hoverData.which=null}else if(r.hoverData.which===1){if(a(Oe,["mouseup","tapend","vmouseup"],O,{x:ye[0],y:ye[1]}),!r.dragData.didDrag&&!r.hoverData.dragged&&!r.hoverData.selecting&&!r.hoverData.isOverThresholdDrag&&(a(We,["click","tap","vclick"],O,{x:ye[0],y:ye[1]}),F=!1,O.timeStamp-T<=_e.multiClickDebounceTime()?(I&&clearTimeout(I),F=!0,T=null,a(We,["dblclick","dbltap","vdblclick"],O,{x:ye[0],y:ye[1]})):(I=setTimeout(function(){F||a(We,["oneclick","onetap","voneclick"],O,{x:ye[0],y:ye[1]})},_e.multiClickDebounceTime()),T=O.timeStamp)),We==null&&!r.dragData.didDrag&&!r.hoverData.selecting&&!r.hoverData.dragged&&!i(O)&&(_e.$(t).unselect(["tapunselect"]),Ie.length>0&&r.redrawHint("eles",!0),r.dragData.possibleDragElements=Ie=_e.collection()),Oe==We&&!r.dragData.didDrag&&!r.hoverData.selecting&&Oe!=null&&Oe._private.selectable&&(r.hoverData.dragging||(_e.selectionType()==="additive"||$e?Oe.selected()?Oe.unselect(["tapunselect"]):Oe.select(["tapselect"]):$e||(_e.$(t).unmerge(Oe).unselect(["tapunselect"]),Oe.select(["tapselect"]))),r.redrawHint("eles",!0)),r.hoverData.selecting){var Ke=_e.collection(r.getAllInBox(Se[0],Se[1],Se[2],Se[3]));r.redrawHint("select",!0),Ke.length>0&&r.redrawHint("eles",!0),_e.emit(He("boxend"));var it=function(Et){return Et.selectable()&&!Et.selected()};_e.selectionType()==="additive"||$e||_e.$(t).unmerge(Ke).unselect(),Ke.emit(He("box")).stdFilter(it).select().emit(He("boxselect")),r.redraw()}if(r.hoverData.dragging&&(r.hoverData.dragging=!1,r.redrawHint("select",!0),r.redrawHint("eles",!0),r.redraw()),!Se[4]){r.redrawHint("drag",!0),r.redrawHint("eles",!0);var at=We&&We.grabbed();b(Ie),at&&(We.emit(He("freeon")),Ie.emit(He("free")),r.dragData.didDrag&&(We.emit(He("dragfreeon")),Ie.emit(He("dragfree"))))}}Se[4]=0,r.hoverData.down=null,r.hoverData.cxtStarted=!1,r.hoverData.draggingEles=!1,r.hoverData.selecting=!1,r.hoverData.isOverThresholdDrag=!1,r.dragData.didDrag=!1,r.hoverData.dragged=!1,r.hoverData.dragDelta=[],r.hoverData.mdownPos=null,r.hoverData.mdownGPos=null,r.hoverData.which=null}}},!1);var H=[],Q=4,W,Z=1e5,X=function(O,le){for(var _e=0;_e<O.length;_e++)if(O[_e]%le!==0)return!1;return!0},te=function(O){for(var le=Math.abs(O[0]),_e=1;_e<O.length;_e++)if(Math.abs(O[_e])!==le)return!1;return!0},L=function(O){var le=!1,_e=O.deltaY;if(_e==null&&(O.wheelDeltaY!=null?_e=O.wheelDeltaY/4:O.wheelDelta!=null&&(_e=O.wheelDelta/4)),_e!==0){if(W==null)if(H.length>=Q){var ye=H;if(W=X(ye,5),!W){var Se=Math.abs(ye[0]);W=te(ye)&&Se>5}if(W)for(var Oe=0;Oe<ye.length;Oe++)Z=Math.min(Math.abs(ye[Oe]),Z)}else H.push(_e),le=!0;else W&&(Z=Math.min(Math.abs(_e),Z));if(!r.scrollingPage){var Ie=r.cy,We=Ie.zoom(),$e=Ie.pan(),He=r.projectIntoViewport(O.clientX,O.clientY),rt=[He[0]*We+$e.x,He[1]*We+$e.y];if(r.hoverData.draggingEles||r.hoverData.dragging||r.hoverData.cxtStarted||M()){O.preventDefault();return}if(Ie.panningEnabled()&&Ie.userPanningEnabled()&&Ie.zoomingEnabled()&&Ie.userZoomingEnabled()){O.preventDefault(),r.data.wheelZooming=!0,clearTimeout(r.data.wheelTimeout),r.data.wheelTimeout=setTimeout(function(){r.data.wheelZooming=!1,r.redrawHint("eles",!0),r.redraw()},150);var nt;le&&Math.abs(_e)>5&&(_e=Qh(_e)*5),nt=_e/-250,W&&(nt/=Z,nt*=3),nt=nt*r.wheelSensitivity;var Ke=O.deltaMode===1;Ke&&(nt*=33);var it=Ie.zoom()*Math.pow(10,nt);O.type==="gesturechange"&&(it=r.gestureStartZoom*O.scale),Ie.zoom({level:it,renderedPosition:{x:rt[0],y:rt[1]}}),Ie.emit({type:O.type==="gesturechange"?"pinchzoom":"scrollzoom",originalEvent:O,position:{x:He[0],y:He[1]}})}}}};r.registerBinding(r.container,"wheel",L,!0),r.registerBinding(e,"scroll",function(O){r.scrollingPage=!0,clearTimeout(r.scrollingPageTimeout),r.scrollingPageTimeout=setTimeout(function(){r.scrollingPage=!1},250)},!0),r.registerBinding(r.container,"gesturestart",function(O){r.gestureStartZoom=r.cy.zoom(),r.hasTouchStarted||O.preventDefault()},!0),r.registerBinding(r.container,"gesturechange",function(J){r.hasTouchStarted||L(J)},!0),r.registerBinding(r.container,"mouseout",function(O){var le=r.projectIntoViewport(O.clientX,O.clientY);r.cy.emit({originalEvent:O,type:"mouseout",position:{x:le[0],y:le[1]}})},!1),r.registerBinding(r.container,"mouseover",function(O){var le=r.projectIntoViewport(O.clientX,O.clientY);r.cy.emit({originalEvent:O,type:"mouseover",position:{x:le[0],y:le[1]}})},!1);var U,oe,ie,ne,we,Te,ke,ge,fe,de,be,Pe,D,ve=function(O,le,_e,ye){return Math.sqrt((_e-O)*(_e-O)+(ye-le)*(ye-le))},pe=function(O,le,_e,ye){return(_e-O)*(_e-O)+(ye-le)*(ye-le)},Y;r.registerBinding(r.container,"touchstart",Y=function(O){if(r.hasTouchStarted=!0,!!V(O)){E(),r.touchData.capture=!0,r.data.bgActivePosistion=void 0;var le=r.cy,_e=r.touchData.now,ye=r.touchData.earlier;if(O.touches[0]){var Se=r.projectIntoViewport(O.touches[0].clientX,O.touches[0].clientY);_e[0]=Se[0],_e[1]=Se[1]}if(O.touches[1]){var Se=r.projectIntoViewport(O.touches[1].clientX,O.touches[1].clientY);_e[2]=Se[0],_e[3]=Se[1]}if(O.touches[2]){var Se=r.projectIntoViewport(O.touches[2].clientX,O.touches[2].clientY);_e[4]=Se[0],_e[5]=Se[1]}var Oe=function(It){return{originalEvent:O,type:It,position:{x:_e[0],y:_e[1]}}};if(O.touches[1]){r.touchData.singleTouchMoved=!0,b(r.dragData.touchDragEles);var Ie=r.findContainerClientCoords();fe=Ie[0],de=Ie[1],be=Ie[2],Pe=Ie[3],U=O.touches[0].clientX-fe,oe=O.touches[0].clientY-de,ie=O.touches[1].clientX-fe,ne=O.touches[1].clientY-de,D=0<=U&&U<=be&&0<=ie&&ie<=be&&0<=oe&&oe<=Pe&&0<=ne&&ne<=Pe;var We=le.pan(),$e=le.zoom();we=ve(U,oe,ie,ne),Te=pe(U,oe,ie,ne),ke=[(U+ie)/2,(oe+ne)/2],ge=[(ke[0]-We.x)/$e,(ke[1]-We.y)/$e];var He=200,rt=He*He;if(Te<rt&&!O.touches[2]){var nt=r.findNearestElement(_e[0],_e[1],!0,!0),Ke=r.findNearestElement(_e[2],_e[3],!0,!0);nt&&nt.isNode()?(nt.activate().emit(Oe("cxttapstart")),r.touchData.start=nt):Ke&&Ke.isNode()?(Ke.activate().emit(Oe("cxttapstart")),r.touchData.start=Ke):le.emit(Oe("cxttapstart")),r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxt=!0,r.touchData.cxtDragged=!1,r.data.bgActivePosistion=void 0,r.redraw();return}}if(O.touches[2])le.boxSelectionEnabled()&&O.preventDefault();else if(!O.touches[1]){if(O.touches[0]){var it=r.findNearestElements(_e[0],_e[1],!0,!0),at=it[0];if(at!=null&&(at.activate(),r.touchData.start=at,r.touchData.starts=it,r.nodeIsGrabbable(at))){var Dt=r.dragData.touchDragEles=le.collection(),Et=null;r.redrawHint("eles",!0),r.redrawHint("drag",!0),at.selected()?(Et=le.$(function(Vt){return Vt.selected()&&r.nodeIsGrabbable(Vt)}),w(Et,{addToList:Dt})):x(at,{addToList:Dt}),h(at),at.emit(Oe("grabon")),Et?Et.forEach(function(Vt){Vt.emit(Oe("grab"))}):at.emit(Oe("grab"))}a(at,["touchstart","tapstart","vmousedown"],O,{x:_e[0],y:_e[1]}),at==null&&(r.data.bgActivePosistion={x:Se[0],y:Se[1]},r.redrawHint("select",!0),r.redraw()),r.touchData.singleTouchMoved=!1,r.touchData.singleTouchStartTime=+new Date,clearTimeout(r.touchData.tapholdTimeout),r.touchData.tapholdTimeout=setTimeout(function(){r.touchData.singleTouchMoved===!1&&!r.pinching&&!r.touchData.selecting&&a(r.touchData.start,["taphold"],O,{x:_e[0],y:_e[1]})},r.tapholdDuration)}}if(O.touches.length>=1){for(var $t=r.touchData.startPosition=[null,null,null,null,null,null],Pt=0;Pt<_e.length;Pt++)$t[Pt]=ye[Pt]=_e[Pt];var Rt=O.touches[0];r.touchData.startGPosition=[Rt.clientX,Rt.clientY]}}},!1);var K;r.registerBinding(e,"touchmove",K=function(O){var le=r.touchData.capture;if(!(!le&&!V(O))){var _e=r.selection,ye=r.cy,Se=r.touchData.now,Oe=r.touchData.earlier,Ie=ye.zoom();if(O.touches[0]){var We=r.projectIntoViewport(O.touches[0].clientX,O.touches[0].clientY);Se[0]=We[0],Se[1]=We[1]}if(O.touches[1]){var We=r.projectIntoViewport(O.touches[1].clientX,O.touches[1].clientY);Se[2]=We[0],Se[3]=We[1]}if(O.touches[2]){var We=r.projectIntoViewport(O.touches[2].clientX,O.touches[2].clientY);Se[4]=We[0],Se[5]=We[1]}var $e=function(li){return{originalEvent:O,type:li,position:{x:Se[0],y:Se[1]}}},He=r.touchData.startGPosition,rt;if(le&&O.touches[0]&&He){for(var nt=[],Ke=0;Ke<Se.length;Ke++)nt[Ke]=Se[Ke]-Oe[Ke];var it=O.touches[0].clientX-He[0],at=it*it,Dt=O.touches[0].clientY-He[1],Et=Dt*Dt,$t=at+Et;rt=$t>=r.touchTapThreshold2}if(le&&r.touchData.cxt){O.preventDefault();var Pt=O.touches[0].clientX-fe,Rt=O.touches[0].clientY-de,Vt=O.touches[1].clientX-fe,It=O.touches[1].clientY-de,Ur=pe(Pt,Rt,Vt,It),St=Ur/Te,$r=150,an=$r*$r,qn=1.5,si=qn*qn;if(St>=si||Ur>=an){r.touchData.cxt=!1,r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);var Er=$e("cxttapend");r.touchData.start?(r.touchData.start.unactivate().emit(Er),r.touchData.start=null):ye.emit(Er)}}if(le&&r.touchData.cxt){var Er=$e("cxtdrag");r.data.bgActivePosistion=void 0,r.redrawHint("select",!0),r.touchData.start?r.touchData.start.emit(Er):ye.emit(Er),r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxtDragged=!0;var sr=r.findNearestElement(Se[0],Se[1],!0,!0);(!r.touchData.cxtOver||sr!==r.touchData.cxtOver)&&(r.touchData.cxtOver&&r.touchData.cxtOver.emit($e("cxtdragout")),r.touchData.cxtOver=sr,sr&&sr.emit($e("cxtdragover")))}else if(le&&O.touches[2]&&ye.boxSelectionEnabled())O.preventDefault(),r.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,r.touchData.selecting||ye.emit($e("boxstart")),r.touchData.selecting=!0,r.touchData.didSelect=!0,_e[4]=1,!_e||_e.length===0||_e[0]===void 0?(_e[0]=(Se[0]+Se[2]+Se[4])/3,_e[1]=(Se[1]+Se[3]+Se[5])/3,_e[2]=(Se[0]+Se[2]+Se[4])/3+1,_e[3]=(Se[1]+Se[3]+Se[5])/3+1):(_e[2]=(Se[0]+Se[2]+Se[4])/3,_e[3]=(Se[1]+Se[3]+Se[5])/3),r.redrawHint("select",!0),r.redraw();else if(le&&O.touches[1]&&!r.touchData.didSelect&&ye.zoomingEnabled()&&ye.panningEnabled()&&ye.userZoomingEnabled()&&ye.userPanningEnabled()){O.preventDefault(),r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);var Gt=r.dragData.touchDragEles;if(Gt){r.redrawHint("drag",!0);for(var vr=0;vr<Gt.length;vr++){var Wn=Gt[vr]._private;Wn.grabbed=!1,Wn.rscratch.inDragLayer=!1}}var Sr=r.touchData.start,Pt=O.touches[0].clientX-fe,Rt=O.touches[0].clientY-de,Vt=O.touches[1].clientX-fe,It=O.touches[1].clientY-de,is=ve(Pt,Rt,Vt,It),No=is/we;if(D){var Zl=Pt-U,Xl=Rt-oe,Lt=Vt-ie,Yl=It-ne,ss=(Zl+Lt)/2,Oo=(Xl+Yl)/2,gn=ye.zoom(),os=gn*No,Ba=ye.pan(),Aa=ge[0]*gn+Ba.x,Vr=ge[1]*gn+Ba.y,Ql={x:-os/gn*(Aa-Ba.x-ss)+Aa,y:-os/gn*(Vr-Ba.y-Oo)+Vr};if(Sr&&Sr.active()){var Gt=r.dragData.touchDragEles;b(Gt),r.redrawHint("drag",!0),r.redrawHint("eles",!0),Sr.unactivate().emit($e("freeon")),Gt.emit($e("free")),r.dragData.didDrag&&(Sr.emit($e("dragfreeon")),Gt.emit($e("dragfree")))}ye.viewport({zoom:os,pan:Ql,cancelOnFailedZoom:!0}),ye.emit($e("pinchzoom")),we=is,U=Pt,oe=Rt,ie=Vt,ne=It,r.pinching=!0}if(O.touches[0]){var We=r.projectIntoViewport(O.touches[0].clientX,O.touches[0].clientY);Se[0]=We[0],Se[1]=We[1]}if(O.touches[1]){var We=r.projectIntoViewport(O.touches[1].clientX,O.touches[1].clientY);Se[2]=We[0],Se[3]=We[1]}if(O.touches[2]){var We=r.projectIntoViewport(O.touches[2].clientX,O.touches[2].clientY);Se[4]=We[0],Se[5]=We[1]}}else if(O.touches[0]&&!r.touchData.didSelect){var Nt=r.touchData.start,us=r.touchData.last,sr;if(!r.hoverData.draggingEles&&!r.swipePanning&&(sr=r.findNearestElement(Se[0],Se[1],!0,!0)),le&&Nt!=null&&O.preventDefault(),le&&Nt!=null&&r.nodeIsDraggable(Nt))if(rt){var Gt=r.dragData.touchDragEles,Mo=!r.dragData.didDrag;Mo&&w(Gt,{inDragLayer:!0}),r.dragData.didDrag=!0;var Da={x:0,y:0};if(Ue(nt[0])&&Ue(nt[1])&&(Da.x+=nt[0],Da.y+=nt[1],Mo)){r.redrawHint("eles",!0);var pr=r.touchData.dragDelta;pr&&Ue(pr[0])&&Ue(pr[1])&&(Da.x+=pr[0],Da.y+=pr[1])}r.hoverData.draggingEles=!0,Gt.silentShift(Da).emit($e("position")).emit($e("drag")),r.redrawHint("drag",!0),r.touchData.startPosition[0]==Oe[0]&&r.touchData.startPosition[1]==Oe[1]&&r.redrawHint("eles",!0),r.redraw()}else{var pr=r.touchData.dragDelta=r.touchData.dragDelta||[];pr.length===0?(pr.push(nt[0]),pr.push(nt[1])):(pr[0]+=nt[0],pr[1]+=nt[1])}if(a(Nt||sr,["touchmove","tapdrag","vmousemove"],O,{x:Se[0],y:Se[1]}),(!Nt||!Nt.grabbed())&&sr!=us&&(us&&us.emit($e("tapdragout")),sr&&sr.emit($e("tapdragover"))),r.touchData.last=sr,le)for(var vr=0;vr<Se.length;vr++)Se[vr]&&r.touchData.startPosition[vr]&&rt&&(r.touchData.singleTouchMoved=!0);if(le&&(Nt==null||Nt.pannable())&&ye.panningEnabled()&&ye.userPanningEnabled()){var oi=o(Nt,r.touchData.starts);oi&&(O.preventDefault(),r.data.bgActivePosistion||(r.data.bgActivePosistion=ji(r.touchData.startPosition)),r.swipePanning?(ye.panBy({x:nt[0]*Ie,y:nt[1]*Ie}),ye.emit($e("dragpan"))):rt&&(r.swipePanning=!0,ye.panBy({x:it*Ie,y:Dt*Ie}),ye.emit($e("dragpan")),Nt&&(Nt.unactivate(),r.redrawHint("select",!0),r.touchData.start=null)));var We=r.projectIntoViewport(O.touches[0].clientX,O.touches[0].clientY);Se[0]=We[0],Se[1]=We[1]}}for(var Ke=0;Ke<Se.length;Ke++)Oe[Ke]=Se[Ke];le&&O.touches.length>0&&!r.hoverData.draggingEles&&!r.swipePanning&&r.data.bgActivePosistion!=null&&(r.data.bgActivePosistion=void 0,r.redrawHint("select",!0),r.redraw())}},!1);var ae;r.registerBinding(e,"touchcancel",ae=function(O){var le=r.touchData.start;r.touchData.capture=!1,le&&le.unactivate()});var he,me,se,Re;if(r.registerBinding(e,"touchend",he=function(O){var le=r.touchData.start,_e=r.touchData.capture;if(_e)O.touches.length===0&&(r.touchData.capture=!1),O.preventDefault();else return;var ye=r.selection;r.swipePanning=!1,r.hoverData.draggingEles=!1;var Se=r.cy,Oe=Se.zoom(),Ie=r.touchData.now,We=r.touchData.earlier;if(O.touches[0]){var $e=r.projectIntoViewport(O.touches[0].clientX,O.touches[0].clientY);Ie[0]=$e[0],Ie[1]=$e[1]}if(O.touches[1]){var $e=r.projectIntoViewport(O.touches[1].clientX,O.touches[1].clientY);Ie[2]=$e[0],Ie[3]=$e[1]}if(O.touches[2]){var $e=r.projectIntoViewport(O.touches[2].clientX,O.touches[2].clientY);Ie[4]=$e[0],Ie[5]=$e[1]}var He=function(an){return{originalEvent:O,type:an,position:{x:Ie[0],y:Ie[1]}}};le&&le.unactivate();var rt;if(r.touchData.cxt){if(rt=He("cxttapend"),le?le.emit(rt):Se.emit(rt),!r.touchData.cxtDragged){var nt=He("cxttap");le?le.emit(nt):Se.emit(nt)}r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxt=!1,r.touchData.start=null,r.redraw();return}if(!O.touches[2]&&Se.boxSelectionEnabled()&&r.touchData.selecting){r.touchData.selecting=!1;var Ke=Se.collection(r.getAllInBox(ye[0],ye[1],ye[2],ye[3]));ye[0]=void 0,ye[1]=void 0,ye[2]=void 0,ye[3]=void 0,ye[4]=0,r.redrawHint("select",!0),Se.emit(He("boxend"));var it=function(an){return an.selectable()&&!an.selected()};Ke.emit(He("box")).stdFilter(it).select().emit(He("boxselect")),Ke.nonempty()&&r.redrawHint("eles",!0),r.redraw()}if(le!=null&&le.unactivate(),O.touches[2])r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);else if(!O.touches[1]){if(!O.touches[0]){if(!O.touches[0]){r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);var at=r.dragData.touchDragEles;if(le!=null){var Dt=le._private.grabbed;b(at),r.redrawHint("drag",!0),r.redrawHint("eles",!0),Dt&&(le.emit(He("freeon")),at.emit(He("free")),r.dragData.didDrag&&(le.emit(He("dragfreeon")),at.emit(He("dragfree")))),a(le,["touchend","tapend","vmouseup","tapdragout"],O,{x:Ie[0],y:Ie[1]}),le.unactivate(),r.touchData.start=null}else{var Et=r.findNearestElement(Ie[0],Ie[1],!0,!0);a(Et,["touchend","tapend","vmouseup","tapdragout"],O,{x:Ie[0],y:Ie[1]})}var $t=r.touchData.startPosition[0]-Ie[0],Pt=$t*$t,Rt=r.touchData.startPosition[1]-Ie[1],Vt=Rt*Rt,It=Pt+Vt,Ur=It*Oe*Oe;r.touchData.singleTouchMoved||(le||Se.$(":selected").unselect(["tapunselect"]),a(le,["tap","vclick"],O,{x:Ie[0],y:Ie[1]}),me=!1,O.timeStamp-Re<=Se.multiClickDebounceTime()?(se&&clearTimeout(se),me=!0,Re=null,a(le,["dbltap","vdblclick"],O,{x:Ie[0],y:Ie[1]})):(se=setTimeout(function(){me||a(le,["onetap","voneclick"],O,{x:Ie[0],y:Ie[1]})},Se.multiClickDebounceTime()),Re=O.timeStamp)),le!=null&&!r.dragData.didDrag&&le._private.selectable&&Ur<r.touchTapThreshold2&&!r.pinching&&(Se.selectionType()==="single"?(Se.$(t).unmerge(le).unselect(["tapunselect"]),le.select(["tapselect"])):le.selected()?le.unselect(["tapunselect"]):le.select(["tapselect"]),r.redrawHint("eles",!0)),r.touchData.singleTouchMoved=!0}}}for(var St=0;St<Ie.length;St++)We[St]=Ie[St];r.dragData.didDrag=!1,O.touches.length===0&&(r.touchData.dragDelta=[],r.touchData.startPosition=[null,null,null,null,null,null],r.touchData.startGPosition=null,r.touchData.didSelect=!1),O.touches.length<2&&(O.touches.length===1&&(r.touchData.startGPosition=[O.touches[0].clientX,O.touches[0].clientY]),r.pinching=!1,r.redrawHint("eles",!0),r.redraw())},!1),typeof TouchEvent>"u"){var De=[],Be=function(O){return{clientX:O.clientX,clientY:O.clientY,force:1,identifier:O.pointerId,pageX:O.pageX,pageY:O.pageY,radiusX:O.width/2,radiusY:O.height/2,screenX:O.screenX,screenY:O.screenY,target:O.target}},ze=function(O){return{event:O,touch:Be(O)}},$=function(O){De.push(ze(O))},k=function(O){for(var le=0;le<De.length;le++){var _e=De[le];if(_e.event.pointerId===O.pointerId){De.splice(le,1);return}}},R=function(O){var le=De.filter(function(_e){return _e.event.pointerId===O.pointerId})[0];le.event=O,le.touch=Be(O)},G=function(O){O.touches=De.map(function(le){return le.touch})},ee=function(O){return O.pointerType==="mouse"||O.pointerType===4};r.registerBinding(r.container,"pointerdown",function(J){ee(J)||(J.preventDefault(),$(J),G(J),Y(J))}),r.registerBinding(r.container,"pointerup",function(J){ee(J)||(k(J),G(J),he(J))}),r.registerBinding(r.container,"pointercancel",function(J){ee(J)||(k(J),G(J),ae(J))}),r.registerBinding(r.container,"pointermove",function(J){ee(J)||(J.preventDefault(),R(J),G(J),K(J))})}};var Vn={};Vn.generatePolygon=function(r,e){return this.nodeShapes[r]={renderer:this,name:r,points:e,draw:function(n,a,i,o,u,f){this.renderer.nodeShapeImpl("polygon",n,a,i,o,u,this.points)},intersectLine:function(n,a,i,o,u,f,c,d){return po(u,f,this.points,n,a,i/2,o/2,c)},checkPoint:function(n,a,i,o,u,f,c,d){return $n(n,a,this.points,f,c,o,u,[0,-1],i)},hasMiterBounds:r!=="rectangle",miterBounds:function(n,a,i,o,u,f){return qE(this.points,n,a,i,o,u)}}};Vn.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,t,n,a,i,o){this.renderer.nodeShapeImpl(this.name,e,t,n,a,i)},intersectLine:function(e,t,n,a,i,o,u,f){return QE(i,o,e,t,n/2+u,a/2+u)},checkPoint:function(e,t,n,a,i,o,u,f){return Ya(e,t,a,i,o,u,n)}}};Vn.generateRoundPolygon=function(r,e){return this.nodeShapes[r]={renderer:this,name:r,points:e,getOrCreateCorners:function(n,a,i,o,u,f,c){if(f[c]!==void 0&&f[c+"-cx"]===n&&f[c+"-cy"]===a)return f[c];f[c]=new Array(e.length/2),f[c+"-cx"]=n,f[c+"-cy"]=a;var d=i/2,h=o/2;u=u==="auto"?P1(i,o):u;for(var p=new Array(e.length/2),g=0;g<e.length/2;g++)p[g]={x:n+d*e[g*2],y:a+h*e[g*2+1]};var m,w,x,b,_=p.length;for(w=p[_-1],m=0;m<_;m++)x=p[m%_],b=p[(m+1)%_],f[c][m]=cv(w,x,b,u),w=x,x=b;return f[c]},draw:function(n,a,i,o,u,f,c){this.renderer.nodeShapeImpl("round-polygon",n,a,i,o,u,this.points,this.getOrCreateCorners(a,i,o,u,f,c,"drawCorners"))},intersectLine:function(n,a,i,o,u,f,c,d,h){return eS(u,f,this.points,n,a,i,o,c,this.getOrCreateCorners(n,a,i,o,d,h,"corners"))},checkPoint:function(n,a,i,o,u,f,c,d,h){return YE(n,a,this.points,f,c,o,u,this.getOrCreateCorners(f,c,o,u,d,h,"corners"))}}};Vn.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:Pr(4,0),draw:function(e,t,n,a,i,o){this.renderer.nodeShapeImpl(this.name,e,t,n,a,i,this.points,o)},intersectLine:function(e,t,n,a,i,o,u,f){return C1(i,o,e,t,n,a,u,f)},checkPoint:function(e,t,n,a,i,o,u,f){var c=a/2,d=i/2;f=f==="auto"?ba(a,i):f,f=Math.min(c,d,f);var h=f*2;return!!($n(e,t,this.points,o,u,a,i-h,[0,-1],n)||$n(e,t,this.points,o,u,a-h,i,[0,-1],n)||Ya(e,t,h,h,o-c+f,u-d+f,n)||Ya(e,t,h,h,o+c-f,u-d+f,n)||Ya(e,t,h,h,o+c-f,u+d-f,n)||Ya(e,t,h,h,o-c+f,u+d-f,n))}}};Vn.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:ev(),points:Pr(4,0),draw:function(e,t,n,a,i,o){this.renderer.nodeShapeImpl(this.name,e,t,n,a,i,null,o)},generateCutTrianglePts:function(e,t,n,a,i){var o=i==="auto"?this.cornerLength:i,u=t/2,f=e/2,c=n-f,d=n+f,h=a-u,p=a+u;return{topLeft:[c,h+o,c+o,h,c+o,h+o],topRight:[d-o,h,d,h+o,d-o,h+o],bottomRight:[d,p-o,d-o,p,d-o,p-o],bottomLeft:[c+o,p,c,p-o,c+o,p-o]}},intersectLine:function(e,t,n,a,i,o,u,f){var c=this.generateCutTrianglePts(n+2*u,a+2*u,e,t,f),d=[].concat.apply([],[c.topLeft.splice(0,4),c.topRight.splice(0,4),c.bottomRight.splice(0,4),c.bottomLeft.splice(0,4)]);return po(i,o,d,e,t)},checkPoint:function(e,t,n,a,i,o,u,f){var c=f==="auto"?this.cornerLength:f;if($n(e,t,this.points,o,u,a,i-2*c,[0,-1],n)||$n(e,t,this.points,o,u,a-2*c,i,[0,-1],n))return!0;var d=this.generateCutTrianglePts(a,i,o,u);return zr(e,t,d.topLeft)||zr(e,t,d.topRight)||zr(e,t,d.bottomRight)||zr(e,t,d.bottomLeft)}}};Vn.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:Pr(4,0),draw:function(e,t,n,a,i,o){this.renderer.nodeShapeImpl(this.name,e,t,n,a,i)},intersectLine:function(e,t,n,a,i,o,u,f){var c=.15,d=.5,h=.85,p=this.generateBarrelBezierPts(n+2*u,a+2*u,e,t),g=function(x){var b=Hi({x:x[0],y:x[1]},{x:x[2],y:x[3]},{x:x[4],y:x[5]},c),_=Hi({x:x[0],y:x[1]},{x:x[2],y:x[3]},{x:x[4],y:x[5]},d),E=Hi({x:x[0],y:x[1]},{x:x[2],y:x[3]},{x:x[4],y:x[5]},h);return[x[0],x[1],b.x,b.y,_.x,_.y,E.x,E.y,x[4],x[5]]},m=[].concat(g(p.topLeft),g(p.topRight),g(p.bottomRight),g(p.bottomLeft));return po(i,o,m,e,t)},generateBarrelBezierPts:function(e,t,n,a){var i=t/2,o=e/2,u=n-o,f=n+o,c=a-i,d=a+i,h=Sh(e,t),p=h.heightOffset,g=h.widthOffset,m=h.ctrlPtOffsetPct*e,w={topLeft:[u,c+p,u+m,c,u+g,c],topRight:[f-g,c,f-m,c,f,c+p],bottomRight:[f,d-p,f-m,d,f-g,d],bottomLeft:[u+g,d,u+m,d,u,d-p]};return w.topLeft.isTop=!0,w.topRight.isTop=!0,w.bottomLeft.isBottom=!0,w.bottomRight.isBottom=!0,w},checkPoint:function(e,t,n,a,i,o,u,f){var c=Sh(a,i),d=c.heightOffset,h=c.widthOffset;if($n(e,t,this.points,o,u,a,i-2*d,[0,-1],n)||$n(e,t,this.points,o,u,a-2*h,i,[0,-1],n))return!0;for(var p=this.generateBarrelBezierPts(a,i,o,u),g=function(z,M,V){var q=V[4],I=V[2],F=V[0],T=V[5],H=V[1],Q=Math.min(q,F),W=Math.max(q,F),Z=Math.min(T,H),X=Math.max(T,H);if(Q<=z&&z<=W&&Z<=M&&M<=X){var te=tS(q,I,F),L=GE(te[0],te[1],te[2],z),U=L.filter(function(oe){return 0<=oe&&oe<=1});if(U.length>0)return U[0]}return null},m=Object.keys(p),w=0;w<m.length;w++){var x=m[w],b=p[x],_=g(e,t,b);if(_!=null){var E=b[5],C=b[3],B=b[1],N=nr(E,C,B,_);if(b.isTop&&N<=t||b.isBottom&&t<=N)return!0}}return!1}}};Vn.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:Pr(4,0),draw:function(e,t,n,a,i,o){this.renderer.nodeShapeImpl(this.name,e,t,n,a,i,this.points,o)},intersectLine:function(e,t,n,a,i,o,u,f){var c=e-(n/2+u),d=t-(a/2+u),h=d,p=e+(n/2+u),g=ga(i,o,e,t,c,d,p,h,!1);return g.length>0?g:C1(i,o,e,t,n,a,u,f)},checkPoint:function(e,t,n,a,i,o,u,f){f=f==="auto"?ba(a,i):f;var c=2*f;if($n(e,t,this.points,o,u,a,i-c,[0,-1],n)||$n(e,t,this.points,o,u,a-c,i,[0,-1],n))return!0;var d=a/2+2*n,h=i/2+2*n,p=[o-d,u-h,o-d,u,o+d,u,o+d,u-h];return!!(zr(e,t,p)||Ya(e,t,c,c,o+a/2-f,u+i/2-f,n)||Ya(e,t,c,c,o-a/2+f,u+i/2-f,n))}}};Vn.registerNodeShapes=function(){var r=this.nodeShapes={},e=this;this.generateEllipse(),this.generatePolygon("triangle",Pr(3,0)),this.generateRoundPolygon("round-triangle",Pr(3,0)),this.generatePolygon("rectangle",Pr(4,0)),r.square=r.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();{var t=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",t),this.generateRoundPolygon("round-diamond",t)}this.generatePolygon("pentagon",Pr(5,0)),this.generateRoundPolygon("round-pentagon",Pr(5,0)),this.generatePolygon("hexagon",Pr(6,0)),this.generateRoundPolygon("round-hexagon",Pr(6,0)),this.generatePolygon("heptagon",Pr(7,0)),this.generateRoundPolygon("round-heptagon",Pr(7,0)),this.generatePolygon("octagon",Pr(8,0)),this.generateRoundPolygon("round-octagon",Pr(8,0));var n=new Array(20);{var a=Eh(5,0),i=Eh(5,Math.PI/5),o=.5*(3-Math.sqrt(5));o*=1.57;for(var u=0;u<i.length/2;u++)i[u*2]*=o,i[u*2+1]*=o;for(var u=0;u<20/4;u++)n[u*4]=a[u*2],n[u*4+1]=a[u*2+1],n[u*4+2]=i[u*2],n[u*4+3]=i[u*2+1]}n=T1(n),this.generatePolygon("star",n),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);{var f=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",f),this.generateRoundPolygon("round-tag",f)}r.makePolygon=function(c){var d=c.join("$"),h="polygon-"+d,p;return(p=this[h])?p:e.generatePolygon(h,c)}};var Io={};Io.timeToRender=function(){return this.redrawTotalTime/this.redrawCount};Io.redraw=function(r){r=r||_1();var e=this;e.averageRedrawTime===void 0&&(e.averageRedrawTime=0),e.lastRedrawTime===void 0&&(e.lastRedrawTime=0),e.lastDrawTime===void 0&&(e.lastDrawTime=0),e.requestedFrame=!0,e.renderOptions=r};Io.beforeRender=function(r,e){if(!this.destroyed){e==null&&At("Priority is not optional for beforeRender");var t=this.beforeRenderCallbacks;t.push({fn:r,priority:e}),t.sort(function(n,a){return a.priority-n.priority})}};var S0=function(e,t,n){for(var a=e.beforeRenderCallbacks,i=0;i<a.length;i++)a[i].fn(t,n)};Io.startRenderLoop=function(){var r=this,e=r.cy;if(!r.renderLoopStarted){r.renderLoopStarted=!0;var t=function(a){if(!r.destroyed){if(!e.batching())if(r.requestedFrame&&!r.skipFrame){S0(r,!0,a);var i=Un();r.render(r.renderOptions);var o=r.lastDrawTime=Un();r.averageRedrawTime===void 0&&(r.averageRedrawTime=o-i),r.redrawCount===void 0&&(r.redrawCount=0),r.redrawCount++,r.redrawTotalTime===void 0&&(r.redrawTotalTime=0);var u=o-i;r.redrawTotalTime+=u,r.lastRedrawTime=u,r.averageRedrawTime=r.averageRedrawTime/2+u/2,r.requestedFrame=!1}else S0(r,!1,a);r.skipFrame=!1,yl(t)}};yl(t)}};var mT=function(e){this.init(e)},Pw=mT,as=Pw.prototype;as.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"];as.init=function(r){var e=this;e.options=r,e.cy=r.cy;var t=e.container=r.cy.container(),n=e.cy.window();if(n){var a=n.document,i=a.head,o="__________cytoscape_stylesheet",u="__________cytoscape_container",f=a.getElementById(o)!=null;if(t.className.indexOf(u)<0&&(t.className=(t.className||"")+" "+u),!f){var c=a.createElement("style");c.id=o,c.textContent="."+u+" { position: relative; }",i.insertBefore(c,i.children[0])}var d=n.getComputedStyle(t),h=d.getPropertyValue("position");h==="static"&&gt("A Cytoscape container has style position:static and so can not use UI extensions properly")}e.selection=[void 0,void 0,void 0,void 0,0],e.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=r.showFps,e.debug=r.debug,e.webgl=r.webgl,e.hideEdgesOnViewport=r.hideEdgesOnViewport,e.textureOnViewport=r.textureOnViewport,e.wheelSensitivity=r.wheelSensitivity,e.motionBlurEnabled=r.motionBlur,e.forcedPixelRatio=Ue(r.pixelRatio)?r.pixelRatio:null,e.motionBlur=r.motionBlur,e.motionBlurOpacity=r.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=r.desktopTapThreshold,e.desktopTapThreshold2=r.desktopTapThreshold*r.desktopTapThreshold,e.touchTapThreshold=r.touchTapThreshold,e.touchTapThreshold2=r.touchTapThreshold*r.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.beforeRenderCallbacks=[],e.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},e.registerNodeShapes(),e.registerArrowShapes(),e.registerCalculationListeners()};as.notify=function(r,e){var t=this,n=t.cy;if(!this.destroyed){if(r==="init"){t.load();return}if(r==="destroy"){t.destroy();return}(r==="add"||r==="remove"||r==="move"&&n.hasCompoundNodes()||r==="load"||r==="zorder"||r==="mount")&&t.invalidateCachedZSortedEles(),r==="viewport"&&t.redrawHint("select",!0),r==="gc"&&t.redrawHint("gc",!0),(r==="load"||r==="resize"||r==="mount")&&(t.invalidateContainerClientCoordsCache(),t.matchCanvasSize(t.container)),t.redrawHint("eles",!0),t.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}};as.destroy=function(){var r=this;r.destroyed=!0,r.cy.stopAnimationLoop();for(var e=0;e<r.bindings.length;e++){var t=r.bindings[e],n=t,a=n.target;(a.off||a.removeEventListener).apply(a,n.args)}if(r.bindings=[],r.beforeRenderCallbacks=[],r.onUpdateEleCalcsFns=[],r.removeObserver&&r.removeObserver.disconnect(),r.styleObserver&&r.styleObserver.disconnect(),r.resizeObserver&&r.resizeObserver.disconnect(),r.labelCalcDiv)try{document.body.removeChild(r.labelCalcDiv)}catch{}};as.isHeadless=function(){return!1};[fv,Cw,Tw,ns,Vn,Io].forEach(function(r){et(as,r)});var hh=1e3/60,Rw={setupDequeueing:function(e){return function(){var n=this,a=this.renderer;if(!n.dequeueingSetup){n.dequeueingSetup=!0;var i=Po(function(){a.redrawHint("eles",!0),a.redrawHint("drag",!0),a.redraw()},e.deqRedrawThreshold),o=function(c,d){var h=Un(),p=a.averageRedrawTime,g=a.lastRedrawTime,m=[],w=a.cy.extent(),x=a.getPixelRatio();for(c||a.flushRenderedStyleQueue();;){var b=Un(),_=b-h,E=b-d;if(g<hh){var C=hh-(c?p:0);if(E>=e.deqFastCost*C)break}else if(c){if(_>=e.deqCost*g||_>=e.deqAvgCost*p)break}else if(E>=e.deqNoDrawCost*hh)break;var B=e.deq(n,x,w);if(B.length>0)for(var N=0;N<B.length;N++)m.push(B[N]);else break}m.length>0&&(e.onDeqd(n,m),!c&&e.shouldRedraw(n,m,x,w)&&i())},u=e.priority||Zh;a.beforeRender(o,u(n))}}}},yT=(function(){function r(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:wl;ka(this,r),this.idsByKey=new Fn,this.keyForId=new Fn,this.cachesByLvl=new Fn,this.lvls=[],this.getKey=e,this.doesEleInvalidateKey=t}return Ca(r,[{key:"getIdsFor",value:function(t){t==null&&At("Can not get id list for null key");var n=this.idsByKey,a=this.idsByKey.get(t);return a||(a=new Ji,n.set(t,a)),a}},{key:"addIdForKey",value:function(t,n){t!=null&&this.getIdsFor(t).add(n)}},{key:"deleteIdForKey",value:function(t,n){t!=null&&this.getIdsFor(t).delete(n)}},{key:"getNumberOfIdsForKey",value:function(t){return t==null?0:this.getIdsFor(t).size}},{key:"updateKeyMappingFor",value:function(t){var n=t.id(),a=this.keyForId.get(n),i=this.getKey(t);this.deleteIdForKey(a,n),this.addIdForKey(i,n),this.keyForId.set(n,i)}},{key:"deleteKeyMappingFor",value:function(t){var n=t.id(),a=this.keyForId.get(n);this.deleteIdForKey(a,n),this.keyForId.delete(n)}},{key:"keyHasChangedFor",value:function(t){var n=t.id(),a=this.keyForId.get(n),i=this.getKey(t);return a!==i}},{key:"isInvalid",value:function(t){return this.keyHasChangedFor(t)||this.doesEleInvalidateKey(t)}},{key:"getCachesAt",value:function(t){var n=this.cachesByLvl,a=this.lvls,i=n.get(t);return i||(i=new Fn,n.set(t,i),a.push(t)),i}},{key:"getCache",value:function(t,n){return this.getCachesAt(n).get(t)}},{key:"get",value:function(t,n){var a=this.getKey(t),i=this.getCache(a,n);return i!=null&&this.updateKeyMappingFor(t),i}},{key:"getForCachedKey",value:function(t,n){var a=this.keyForId.get(t.id()),i=this.getCache(a,n);return i}},{key:"hasCache",value:function(t,n){return this.getCachesAt(n).has(t)}},{key:"has",value:function(t,n){var a=this.getKey(t);return this.hasCache(a,n)}},{key:"setCache",value:function(t,n,a){a.key=t,this.getCachesAt(n).set(t,a)}},{key:"set",value:function(t,n,a){var i=this.getKey(t);this.setCache(i,n,a),this.updateKeyMappingFor(t)}},{key:"deleteCache",value:function(t,n){this.getCachesAt(n).delete(t)}},{key:"delete",value:function(t,n){var a=this.getKey(t);this.deleteCache(a,n)}},{key:"invalidateKey",value:function(t){var n=this;this.lvls.forEach(function(a){return n.deleteCache(t,a)})}},{key:"invalidate",value:function(t){var n=t.id(),a=this.keyForId.get(n);this.deleteKeyMappingFor(t);var i=this.doesEleInvalidateKey(t);return i&&this.invalidateKey(a),i||this.getNumberOfIdsForKey(a)===0}}])})(),k0=25,rl=50,vl=-4,Mh=3,Bw=7.99,wT=8,xT=1024,bT=1024,_T=1024,ET=.2,ST=.8,kT=10,CT=.15,TT=.1,PT=.9,RT=.9,BT=100,AT=1,Wi={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},DT=dr({getKey:null,doesEleInvalidateKey:wl,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:w1,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),io=function(e,t){var n=this;n.renderer=e,n.onDequeues=[];var a=DT(t);et(n,a),n.lookup=new yT(a.getKey,a.doesEleInvalidateKey),n.setupDequeueing()},Jt=io.prototype;Jt.reasons=Wi;Jt.getTextureQueue=function(r){var e=this;return e.eleImgCaches=e.eleImgCaches||{},e.eleImgCaches[r]=e.eleImgCaches[r]||[]};Jt.getRetiredTextureQueue=function(r){var e=this,t=e.eleImgCaches.retired=e.eleImgCaches.retired||{},n=t[r]=t[r]||[];return n};Jt.getElementQueue=function(){var r=this,e=r.eleCacheQueue=r.eleCacheQueue||new Ro(function(t,n){return n.reqs-t.reqs});return e};Jt.getElementKeyToQueue=function(){var r=this,e=r.eleKeyToCacheQueue=r.eleKeyToCacheQueue||{};return e};Jt.getElement=function(r,e,t,n,a){var i=this,o=this.renderer,u=o.cy.zoom(),f=this.lookup;if(!e||e.w===0||e.h===0||isNaN(e.w)||isNaN(e.h)||!r.visible()||r.removed()||!i.allowEdgeTxrCaching&&r.isEdge()||!i.allowParentTxrCaching&&r.isParent())return null;if(n==null&&(n=Math.ceil(Yh(u*t))),n<vl)n=vl;else if(u>=Bw||n>Mh)return null;var c=Math.pow(2,n),d=e.h*c,h=e.w*c,p=o.eleTextBiggerThanMin(r,c);if(!this.isVisible(r,p))return null;var g=f.get(r,n);if(g&&g.invalidated&&(g.invalidated=!1,g.texture.invalidatedWidth-=g.width),g)return g;var m;if(d<=k0?m=k0:d<=rl?m=rl:m=Math.ceil(d/rl)*rl,d>_T||h>bT)return null;var w=i.getTextureQueue(m),x=w[w.length-2],b=function(){return i.recycleTexture(m,h)||i.addTexture(m,h)};x||(x=w[w.length-1]),x||(x=b()),x.width-x.usedWidth<h&&(x=b());for(var _=function(Q){return Q&&Q.scaledLabelShown===p},E=a&&a===Wi.dequeue,C=a&&a===Wi.highQuality,B=a&&a===Wi.downscale,N,A=n+1;A<=Mh;A++){var z=f.get(r,A);if(z){N=z;break}}var M=N&&N.level===n+1?N:null,V=function(){x.context.drawImage(M.texture.canvas,M.x,0,M.width,M.height,x.usedWidth,0,h,d)};if(x.context.setTransform(1,0,0,1,0,0),x.context.clearRect(x.usedWidth,0,h,m),_(M))V();else if(_(N))if(C){for(var q=N.level;q>n;q--)M=i.getElement(r,e,t,q,Wi.downscale);V()}else return i.queueElement(r,N.level-1),N;else{var I;if(!E&&!C&&!B)for(var F=n-1;F>=vl;F--){var T=f.get(r,F);if(T){I=T;break}}if(_(I))return i.queueElement(r,n),I;x.context.translate(x.usedWidth,0),x.context.scale(c,c),this.drawElement(x.context,r,e,p,!1),x.context.scale(1/c,1/c),x.context.translate(-x.usedWidth,0)}return g={x:x.usedWidth,texture:x,level:n,scale:c,width:h,height:d,scaledLabelShown:p},x.usedWidth+=Math.ceil(h+wT),x.eleCaches.push(g),f.set(r,n,g),i.checkTextureFullness(x),g};Jt.invalidateElements=function(r){for(var e=0;e<r.length;e++)this.invalidateElement(r[e])};Jt.invalidateElement=function(r){var e=this,t=e.lookup,n=[],a=t.isInvalid(r);if(a){for(var i=vl;i<=Mh;i++){var o=t.getForCachedKey(r,i);o&&n.push(o)}var u=t.invalidate(r);if(u)for(var f=0;f<n.length;f++){var c=n[f],d=c.texture;d.invalidatedWidth+=c.width,c.invalidated=!0,e.checkTextureUtility(d)}e.removeFromQueue(r)}};Jt.checkTextureUtility=function(r){r.invalidatedWidth>=ET*r.width&&this.retireTexture(r)};Jt.checkTextureFullness=function(r){var e=this,t=e.getTextureQueue(r.height);r.usedWidth/r.width>ST&&r.fullnessChecks>=kT?xa(t,r):r.fullnessChecks++};Jt.retireTexture=function(r){var e=this,t=r.height,n=e.getTextureQueue(t),a=this.lookup;xa(n,r),r.retired=!0;for(var i=r.eleCaches,o=0;o<i.length;o++){var u=i[o];a.deleteCache(u.key,u.level)}Xh(i);var f=e.getRetiredTextureQueue(t);f.push(r)};Jt.addTexture=function(r,e){var t=this,n=t.getTextureQueue(r),a={};return n.push(a),a.eleCaches=[],a.height=r,a.width=Math.max(xT,e),a.usedWidth=0,a.invalidatedWidth=0,a.fullnessChecks=0,a.canvas=t.renderer.makeOffscreenCanvas(a.width,a.height),a.context=a.canvas.getContext("2d"),a};Jt.recycleTexture=function(r,e){for(var t=this,n=t.getTextureQueue(r),a=t.getRetiredTextureQueue(r),i=0;i<a.length;i++){var o=a[i];if(o.width>=e)return o.retired=!1,o.usedWidth=0,o.invalidatedWidth=0,o.fullnessChecks=0,Xh(o.eleCaches),o.context.setTransform(1,0,0,1,0,0),o.context.clearRect(0,0,o.width,o.height),xa(a,o),n.push(o),o}};Jt.queueElement=function(r,e){var t=this,n=t.getElementQueue(),a=t.getElementKeyToQueue(),i=this.getKey(r),o=a[i];if(o)o.level=Math.max(o.level,e),o.eles.merge(r),o.reqs++,n.updateItem(o);else{var u={eles:r.spawn().merge(r),level:e,reqs:1,key:i};n.push(u),a[i]=u}};Jt.dequeue=function(r){for(var e=this,t=e.getElementQueue(),n=e.getElementKeyToQueue(),a=[],i=e.lookup,o=0;o<AT&&t.size()>0;o++){var u=t.pop(),f=u.key,c=u.eles[0],d=i.hasCache(c,u.level);if(n[f]=null,d)continue;a.push(u);var h=e.getBoundingBox(c);e.getElement(c,h,r,u.level,Wi.dequeue)}return a};Jt.removeFromQueue=function(r){var e=this,t=e.getElementQueue(),n=e.getElementKeyToQueue(),a=this.getKey(r),i=n[a];i!=null&&(i.eles.length===1?(i.reqs=Kh,t.updateItem(i),t.pop(),n[a]=null):i.eles.unmerge(r))};Jt.onDequeue=function(r){this.onDequeues.push(r)};Jt.offDequeue=function(r){xa(this.onDequeues,r)};Jt.setupDequeueing=Rw.setupDequeueing({deqRedrawThreshold:BT,deqCost:CT,deqAvgCost:TT,deqNoDrawCost:PT,deqFastCost:RT,deq:function(e,t,n){return e.dequeue(t,n)},onDeqd:function(e,t){for(var n=0;n<e.onDequeues.length;n++){var a=e.onDequeues[n];a(t)}},shouldRedraw:function(e,t,n,a){for(var i=0;i<t.length;i++)for(var o=t[i].eles,u=0;u<o.length;u++){var f=o[u].boundingBox();if(Jh(f,a))return!0}return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});var IT=1,uo=-4,Tl=2,LT=3.99,NT=50,OT=50,MT=.15,zT=.1,FT=.9,UT=.9,$T=1,C0=250,VT=4e3*4e3,T0=32767,jT=!0,Aw=function(e){var t=this,n=t.renderer=e,a=n.cy;t.layersByLevel={},t.firstGet=!0,t.lastInvalidationTime=Un()-2*C0,t.skipping=!1,t.eleTxrDeqs=a.collection(),t.scheduleElementRefinement=Po(function(){t.refineElementTextures(t.eleTxrDeqs),t.eleTxrDeqs.unmerge(t.eleTxrDeqs)},OT),n.beforeRender(function(o,u){u-t.lastInvalidationTime<=C0?t.skipping=!0:t.skipping=!1},n.beforeRenderPriorities.lyrTxrSkip);var i=function(u,f){return f.reqs-u.reqs};t.layersQueue=new Ro(i),t.setupDequeueing()},hr=Aw.prototype,P0=0,qT=Math.pow(2,53)-1;hr.makeLayer=function(r,e){var t=Math.pow(2,e),n=Math.ceil(r.w*t),a=Math.ceil(r.h*t),i=this.renderer.makeOffscreenCanvas(n,a),o={id:P0=++P0%qT,bb:r,level:e,width:n,height:a,canvas:i,context:i.getContext("2d"),eles:[],elesQueue:[],reqs:0},u=o.context,f=-o.bb.x1,c=-o.bb.y1;return u.scale(t,t),u.translate(f,c),o};hr.getLayers=function(r,e,t){var n=this,a=n.renderer,i=a.cy,o=i.zoom(),u=n.firstGet;if(n.firstGet=!1,t==null){if(t=Math.ceil(Yh(o*e)),t<uo)t=uo;else if(o>=LT||t>Tl)return null}n.validateLayersElesOrdering(t,r);var f=n.layersByLevel,c=Math.pow(2,t),d=f[t]=f[t]||[],h,p=n.levelIsComplete(t,r),g,m=function(){var V=function(H){if(n.validateLayersElesOrdering(H,r),n.levelIsComplete(H,r))return g=f[H],!0},q=function(H){if(!g)for(var Q=t+H;uo<=Q&&Q<=Tl&&!V(Q);Q+=H);};q(1),q(-1);for(var I=d.length-1;I>=0;I--){var F=d[I];F.invalid&&xa(d,F)}};if(!p)m();else return d;var w=function(){if(!h){h=Rr();for(var V=0;V<r.length;V++)$E(h,r[V].boundingBox())}return h},x=function(V){V=V||{};var q=V.after;w();var I=Math.ceil(h.w*c),F=Math.ceil(h.h*c);if(I>T0||F>T0)return null;var T=I*F;if(T>VT)return null;var H=n.makeLayer(h,t);if(q!=null){var Q=d.indexOf(q)+1;d.splice(Q,0,H)}else(V.insert===void 0||V.insert)&&d.unshift(H);return H};if(n.skipping&&!u)return null;for(var b=null,_=r.length/IT,E=!u,C=0;C<r.length;C++){var B=r[C],N=B._private.rscratch,A=N.imgLayerCaches=N.imgLayerCaches||{},z=A[t];if(z){b=z;continue}if((!b||b.eles.length>=_||!k1(b.bb,B.boundingBox()))&&(b=x({insert:!0,after:b}),!b))return null;g||E?n.queueLayer(b,B):n.drawEleInLayer(b,B,t,e),b.eles.push(B),A[t]=b}return g||(E?null:d)};hr.getEleLevelForLayerLevel=function(r,e){return r};hr.drawEleInLayer=function(r,e,t,n){var a=this,i=this.renderer,o=r.context,u=e.boundingBox();u.w===0||u.h===0||!e.visible()||(t=a.getEleLevelForLayerLevel(t,n),i.setImgSmoothing(o,!1),i.drawCachedElement(o,e,null,null,t,jT),i.setImgSmoothing(o,!0))};hr.levelIsComplete=function(r,e){var t=this,n=t.layersByLevel[r];if(!n||n.length===0)return!1;for(var a=0,i=0;i<n.length;i++){var o=n[i];if(o.reqs>0||o.invalid)return!1;a+=o.eles.length}return a===e.length};hr.validateLayersElesOrdering=function(r,e){var t=this.layersByLevel[r];if(t)for(var n=0;n<t.length;n++){for(var a=t[n],i=-1,o=0;o<e.length;o++)if(a.eles[0]===e[o]){i=o;break}if(i<0){this.invalidateLayer(a);continue}for(var u=i,o=0;o<a.eles.length;o++)if(a.eles[o]!==e[u+o]){this.invalidateLayer(a);break}}};hr.updateElementsInLayers=function(r,e){for(var t=this,n=So(r[0]),a=0;a<r.length;a++)for(var i=n?null:r[a],o=n?r[a]:r[a].ele,u=o._private.rscratch,f=u.imgLayerCaches=u.imgLayerCaches||{},c=uo;c<=Tl;c++){var d=f[c];d&&(i&&t.getEleLevelForLayerLevel(d.level)!==i.level||e(d,o,i))}};hr.haveLayers=function(){for(var r=this,e=!1,t=uo;t<=Tl;t++){var n=r.layersByLevel[t];if(n&&n.length>0){e=!0;break}}return e};hr.invalidateElements=function(r){var e=this;r.length!==0&&(e.lastInvalidationTime=Un(),!(r.length===0||!e.haveLayers())&&e.updateElementsInLayers(r,function(n,a,i){e.invalidateLayer(n)}))};hr.invalidateLayer=function(r){if(this.lastInvalidationTime=Un(),!r.invalid){var e=r.level,t=r.eles,n=this.layersByLevel[e];xa(n,r),r.elesQueue=[],r.invalid=!0,r.replacement&&(r.replacement.invalid=!0);for(var a=0;a<t.length;a++){var i=t[a]._private.rscratch.imgLayerCaches;i&&(i[e]=null)}}};hr.refineElementTextures=function(r){var e=this;e.updateElementsInLayers(r,function(n,a,i){var o=n.replacement;if(o||(o=n.replacement=e.makeLayer(n.bb,n.level),o.replaces=n,o.eles=n.eles),!o.reqs)for(var u=0;u<o.eles.length;u++)e.queueLayer(o,o.eles[u])})};hr.enqueueElementRefinement=function(r){this.eleTxrDeqs.merge(r),this.scheduleElementRefinement()};hr.queueLayer=function(r,e){var t=this,n=t.layersQueue,a=r.elesQueue,i=a.hasId=a.hasId||{};if(!r.replacement){if(e){if(i[e.id()])return;a.push(e),i[e.id()]=!0}r.reqs?(r.reqs++,n.updateItem(r)):(r.reqs=1,n.push(r))}};hr.dequeue=function(r){for(var e=this,t=e.layersQueue,n=[],a=0;a<$T&&t.size()!==0;){var i=t.peek();if(i.replacement){t.pop();continue}if(i.replaces&&i!==i.replaces.replacement){t.pop();continue}if(i.invalid){t.pop();continue}var o=i.elesQueue.shift();o&&(e.drawEleInLayer(i,o,i.level,r),a++),n.length===0&&n.push(!0),i.elesQueue.length===0&&(t.pop(),i.reqs=0,i.replaces&&e.applyLayerReplacement(i),e.requestRedraw())}return n};hr.applyLayerReplacement=function(r){var e=this,t=e.layersByLevel[r.level],n=r.replaces,a=t.indexOf(n);if(!(a<0||n.invalid)){t[a]=r;for(var i=0;i<r.eles.length;i++){var o=r.eles[i]._private,u=o.imgLayerCaches=o.imgLayerCaches||{};u&&(u[r.level]=r)}e.requestRedraw()}};hr.requestRedraw=Po(function(){var r=this.renderer;r.redrawHint("eles",!0),r.redrawHint("drag",!0),r.redraw()},100);hr.setupDequeueing=Rw.setupDequeueing({deqRedrawThreshold:NT,deqCost:MT,deqAvgCost:zT,deqNoDrawCost:FT,deqFastCost:UT,deq:function(e,t){return e.dequeue(t)},onDeqd:Zh,shouldRedraw:w1,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});var Dw={},R0;function WT(r,e){for(var t=0;t<e.length;t++){var n=e[t];r.lineTo(n.x,n.y)}}function HT(r,e,t){for(var n,a=0;a<e.length;a++){var i=e[a];a===0&&(n=i),r.lineTo(i.x,i.y)}r.quadraticCurveTo(t.x,t.y,n.x,n.y)}function B0(r,e,t){r.beginPath&&r.beginPath();for(var n=e,a=0;a<n.length;a++){var i=n[a];r.lineTo(i.x,i.y)}var o=t,u=t[0];r.moveTo(u.x,u.y);for(var a=1;a<o.length;a++){var i=o[a];r.lineTo(i.x,i.y)}r.closePath&&r.closePath()}function GT(r,e,t,n,a){r.beginPath&&r.beginPath(),r.arc(t,n,a,0,Math.PI*2,!1);var i=e,o=i[0];r.moveTo(o.x,o.y);for(var u=0;u<i.length;u++){var f=i[u];r.lineTo(f.x,f.y)}r.closePath&&r.closePath()}function KT(r,e,t,n){r.arc(e,t,n,0,Math.PI*2,!1)}Dw.arrowShapeImpl=function(r){return(R0||(R0={polygon:WT,"triangle-backcurve":HT,"triangle-tee":B0,"circle-triangle":GT,"triangle-cross":B0,circle:KT}))[r]};var Pn={};Pn.drawElement=function(r,e,t,n,a,i){var o=this;e.isNode()?o.drawNode(r,e,t,n,a,i):o.drawEdge(r,e,t,n,a,i)};Pn.drawElementOverlay=function(r,e){var t=this;e.isNode()?t.drawNodeOverlay(r,e):t.drawEdgeOverlay(r,e)};Pn.drawElementUnderlay=function(r,e){var t=this;e.isNode()?t.drawNodeUnderlay(r,e):t.drawEdgeUnderlay(r,e)};Pn.drawCachedElementPortion=function(r,e,t,n,a,i,o,u){var f=this,c=t.getBoundingBox(e);if(!(c.w===0||c.h===0)){var d=t.getElement(e,c,n,a,i);if(d!=null){var h=u(f,e);if(h===0)return;var p=o(f,e),g=c.x1,m=c.y1,w=c.w,x=c.h,b,_,E,C,B;if(p!==0){var N=t.getRotationPoint(e);E=N.x,C=N.y,r.translate(E,C),r.rotate(p),B=f.getImgSmoothing(r),B||f.setImgSmoothing(r,!0);var A=t.getRotationOffset(e);b=A.x,_=A.y}else b=g,_=m;var z;h!==1&&(z=r.globalAlpha,r.globalAlpha=z*h),r.drawImage(d.texture.canvas,d.x,0,d.width,d.height,b,_,w,x),h!==1&&(r.globalAlpha=z),p!==0&&(r.rotate(-p),r.translate(-E,-C),B||f.setImgSmoothing(r,!1))}else t.drawElement(r,e)}};var ZT=function(){return 0},XT=function(e,t){return e.getTextAngle(t,null)},YT=function(e,t){return e.getTextAngle(t,"source")},QT=function(e,t){return e.getTextAngle(t,"target")},JT=function(e,t){return t.effectiveOpacity()},vh=function(e,t){return t.pstyle("text-opacity").pfValue*t.effectiveOpacity()};Pn.drawCachedElement=function(r,e,t,n,a,i){var o=this,u=o.data,f=u.eleTxrCache,c=u.lblTxrCache,d=u.slbTxrCache,h=u.tlbTxrCache,p=e.boundingBox(),g=i===!0?f.reasons.highQuality:null;if(!(p.w===0||p.h===0||!e.visible())&&(!n||Jh(p,n))){var m=e.isEdge(),w=e.element()._private.rscratch.badLine;o.drawElementUnderlay(r,e),o.drawCachedElementPortion(r,e,f,t,a,g,ZT,JT),(!m||!w)&&o.drawCachedElementPortion(r,e,c,t,a,g,XT,vh),m&&!w&&(o.drawCachedElementPortion(r,e,d,t,a,g,YT,vh),o.drawCachedElementPortion(r,e,h,t,a,g,QT,vh)),o.drawElementOverlay(r,e)}};Pn.drawElements=function(r,e){for(var t=this,n=0;n<e.length;n++){var a=e[n];t.drawElement(r,a)}};Pn.drawCachedElements=function(r,e,t,n){for(var a=this,i=0;i<e.length;i++){var o=e[i];a.drawCachedElement(r,o,t,n)}};Pn.drawCachedNodes=function(r,e,t,n){for(var a=this,i=0;i<e.length;i++){var o=e[i];o.isNode()&&a.drawCachedElement(r,o,t,n)}};Pn.drawLayeredElements=function(r,e,t,n){var a=this,i=a.data.lyrTxrCache.getLayers(e,t);if(i)for(var o=0;o<i.length;o++){var u=i[o],f=u.bb;f.w===0||f.h===0||r.drawImage(u.canvas,f.x1,f.y1,f.w,f.h)}else a.drawCachedElements(r,e,t,n)};var jn={};jn.drawEdge=function(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this,u=e._private.rscratch;if(!(i&&!e.visible())&&!(u.badLine||u.allpts==null||isNaN(u.allpts[0]))){var f;t&&(f=t,r.translate(-f.x1,-f.y1));var c=i?e.pstyle("opacity").value:1,d=i?e.pstyle("line-opacity").value:1,h=e.pstyle("curve-style").value,p=e.pstyle("line-style").value,g=e.pstyle("width").pfValue,m=e.pstyle("line-cap").value,w=e.pstyle("line-outline-width").value,x=e.pstyle("line-outline-color").value,b=c*d,_=c*d,E=function(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:b;h==="straight-triangle"?(o.eleStrokeStyle(r,e,H),o.drawEdgeTrianglePath(e,r,u.allpts)):(r.lineWidth=g,r.lineCap=m,o.eleStrokeStyle(r,e,H),o.drawEdgePath(e,r,u.allpts,p),r.lineCap="butt")},C=function(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:b;if(r.lineWidth=g+w,r.lineCap=m,w>0)o.colorStrokeStyle(r,x[0],x[1],x[2],H);else{r.lineCap="butt";return}h==="straight-triangle"?o.drawEdgeTrianglePath(e,r,u.allpts):(o.drawEdgePath(e,r,u.allpts,p),r.lineCap="butt")},B=function(){a&&o.drawEdgeOverlay(r,e)},N=function(){a&&o.drawEdgeUnderlay(r,e)},A=function(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:_;o.drawArrowheads(r,e,H)},z=function(){o.drawElementText(r,e,null,n)};r.lineJoin="round";var M=e.pstyle("ghost").value==="yes";if(M){var V=e.pstyle("ghost-offset-x").pfValue,q=e.pstyle("ghost-offset-y").pfValue,I=e.pstyle("ghost-opacity").value,F=b*I;r.translate(V,q),E(F),A(F),r.translate(-V,-q)}else C();N(),E(),A(),B(),z(),t&&r.translate(f.x1,f.y1)}};var Iw=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(t,n){if(n.visible()){var a=n.pstyle("".concat(e,"-opacity")).value;if(a!==0){var i=this,o=i.usePaths(),u=n._private.rscratch,f=n.pstyle("".concat(e,"-padding")).pfValue,c=2*f,d=n.pstyle("".concat(e,"-color")).value;t.lineWidth=c,u.edgeType==="self"&&!o?t.lineCap="butt":t.lineCap="round",i.colorStrokeStyle(t,d[0],d[1],d[2],a),i.drawEdgePath(n,t,u.allpts,"solid")}}}};jn.drawEdgeOverlay=Iw("overlay");jn.drawEdgeUnderlay=Iw("underlay");jn.drawEdgePath=function(r,e,t,n){var a=r._private.rscratch,i=e,o,u=!1,f=this.usePaths(),c=r.pstyle("line-dash-pattern").pfValue,d=r.pstyle("line-dash-offset").pfValue;if(f){var h=t.join("$"),p=a.pathCacheKey&&a.pathCacheKey===h;p?(o=e=a.pathCache,u=!0):(o=e=new Path2D,a.pathCacheKey=h,a.pathCache=o)}if(i.setLineDash)switch(n){case"dotted":i.setLineDash([1,1]);break;case"dashed":i.setLineDash(c),i.lineDashOffset=d;break;case"solid":i.setLineDash([]);break}if(!u&&!a.badLine)switch(e.beginPath&&e.beginPath(),e.moveTo(t[0],t[1]),a.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var g=2;g+3<t.length;g+=4)e.quadraticCurveTo(t[g],t[g+1],t[g+2],t[g+3]);break;case"straight":case"haystack":for(var m=2;m+1<t.length;m+=2)e.lineTo(t[m],t[m+1]);break;case"segments":if(a.isRound){var w=Fr(a.roundCorners),x;try{for(w.s();!(x=w.n()).done;){var b=x.value;bw(e,b)}}catch(E){w.e(E)}finally{w.f()}e.lineTo(t[t.length-2],t[t.length-1])}else for(var _=2;_+1<t.length;_+=2)e.lineTo(t[_],t[_+1]);break}e=i,f?e.stroke(o):e.stroke(),e.setLineDash&&e.setLineDash([])};jn.drawEdgeTrianglePath=function(r,e,t){e.fillStyle=e.strokeStyle;for(var n=r.pstyle("width").pfValue,a=0;a+1<t.length;a+=2){var i=[t[a+2]-t[a],t[a+3]-t[a+1]],o=Math.sqrt(i[0]*i[0]+i[1]*i[1]),u=[i[1]/o,-i[0]/o],f=[u[0]*n/2,u[1]*n/2];e.beginPath(),e.moveTo(t[a]-f[0],t[a+1]-f[1]),e.lineTo(t[a]+f[0],t[a+1]+f[1]),e.lineTo(t[a+2],t[a+3]),e.closePath(),e.fill()}};jn.drawArrowheads=function(r,e,t){var n=e._private.rscratch,a=n.edgeType==="haystack";a||this.drawArrowhead(r,e,"source",n.arrowStartX,n.arrowStartY,n.srcArrowAngle,t),this.drawArrowhead(r,e,"mid-target",n.midX,n.midY,n.midtgtArrowAngle,t),this.drawArrowhead(r,e,"mid-source",n.midX,n.midY,n.midsrcArrowAngle,t),a||this.drawArrowhead(r,e,"target",n.arrowEndX,n.arrowEndY,n.tgtArrowAngle,t)};jn.drawArrowhead=function(r,e,t,n,a,i,o){if(!(isNaN(n)||n==null||isNaN(a)||a==null||isNaN(i)||i==null)){var u=this,f=e.pstyle(t+"-arrow-shape").value;if(f!=="none"){var c=e.pstyle(t+"-arrow-fill").value==="hollow"?"both":"filled",d=e.pstyle(t+"-arrow-fill").value,h=e.pstyle("width").pfValue,p=e.pstyle(t+"-arrow-width"),g=p.value==="match-line"?h:p.pfValue;p.units==="%"&&(g*=h);var m=e.pstyle("opacity").value;o===void 0&&(o=m);var w=r.globalCompositeOperation;(o!==1||d==="hollow")&&(r.globalCompositeOperation="destination-out",u.colorFillStyle(r,255,255,255,1),u.colorStrokeStyle(r,255,255,255,1),u.drawArrowShape(e,r,c,h,f,g,n,a,i),r.globalCompositeOperation=w);var x=e.pstyle(t+"-arrow-color").value;u.colorFillStyle(r,x[0],x[1],x[2],o),u.colorStrokeStyle(r,x[0],x[1],x[2],o),u.drawArrowShape(e,r,d,h,f,g,n,a,i)}}};jn.drawArrowShape=function(r,e,t,n,a,i,o,u,f){var c=this,d=this.usePaths()&&a!=="triangle-cross",h=!1,p,g=e,m={x:o,y:u},w=r.pstyle("arrow-scale").value,x=this.getArrowWidth(n,w),b=c.arrowShapes[a];if(d){var _=c.arrowPathCache=c.arrowPathCache||[],E=Qa(a),C=_[E];C!=null?(p=e=C,h=!0):(p=e=new Path2D,_[E]=p)}h||(e.beginPath&&e.beginPath(),d?b.draw(e,1,0,{x:0,y:0},1):b.draw(e,x,f,m,n),e.closePath&&e.closePath()),e=g,d&&(e.translate(o,u),e.rotate(f),e.scale(x,x)),(t==="filled"||t==="both")&&(d?e.fill(p):e.fill()),(t==="hollow"||t==="both")&&(e.lineWidth=i/(d?x:1),e.lineJoin="miter",d?e.stroke(p):e.stroke()),d&&(e.scale(1/x,1/x),e.rotate(-f),e.translate(-o,-u))};var hv={};hv.safeDrawImage=function(r,e,t,n,a,i,o,u,f,c){if(!(a<=0||i<=0||f<=0||c<=0))try{r.drawImage(e,t,n,a,i,o,u,f,c)}catch(d){gt(d)}};hv.drawInscribedImage=function(r,e,t,n,a){var i=this,o=t.position(),u=o.x,f=o.y,c=t.cy().style(),d=c.getIndexedStyle.bind(c),h=d(t,"background-fit","value",n),p=d(t,"background-repeat","value",n),g=t.width(),m=t.height(),w=t.padding()*2,x=g+(d(t,"background-width-relative-to","value",n)==="inner"?0:w),b=m+(d(t,"background-height-relative-to","value",n)==="inner"?0:w),_=t._private.rscratch,E=d(t,"background-clip","value",n),C=E==="node",B=d(t,"background-image-opacity","value",n)*a,N=d(t,"background-image-smoothing","value",n),A=t.pstyle("corner-radius").value;A!=="auto"&&(A=t.pstyle("corner-radius").pfValue);var z=e.width||e.cachedW,M=e.height||e.cachedH;(z==null||M==null)&&(document.body.appendChild(e),z=e.cachedW=e.width||e.offsetWidth,M=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var V=z,q=M;if(d(t,"background-width","value",n)!=="auto"&&(d(t,"background-width","units",n)==="%"?V=d(t,"background-width","pfValue",n)*x:V=d(t,"background-width","pfValue",n)),d(t,"background-height","value",n)!=="auto"&&(d(t,"background-height","units",n)==="%"?q=d(t,"background-height","pfValue",n)*b:q=d(t,"background-height","pfValue",n)),!(V===0||q===0)){if(h==="contain"){var I=Math.min(x/V,b/q);V*=I,q*=I}else if(h==="cover"){var I=Math.max(x/V,b/q);V*=I,q*=I}var F=u-x/2,T=d(t,"background-position-x","units",n),H=d(t,"background-position-x","pfValue",n);T==="%"?F+=(x-V)*H:F+=H;var Q=d(t,"background-offset-x","units",n),W=d(t,"background-offset-x","pfValue",n);Q==="%"?F+=(x-V)*W:F+=W;var Z=f-b/2,X=d(t,"background-position-y","units",n),te=d(t,"background-position-y","pfValue",n);X==="%"?Z+=(b-q)*te:Z+=te;var L=d(t,"background-offset-y","units",n),U=d(t,"background-offset-y","pfValue",n);L==="%"?Z+=(b-q)*U:Z+=U,_.pathCache&&(F-=u,Z-=f,u=0,f=0);var oe=r.globalAlpha;r.globalAlpha=B;var ie=i.getImgSmoothing(r),ne=!1;if(N==="no"&&ie?(i.setImgSmoothing(r,!1),ne=!0):N==="yes"&&!ie&&(i.setImgSmoothing(r,!0),ne=!0),p==="no-repeat")C&&(r.save(),_.pathCache?r.clip(_.pathCache):(i.nodeShapes[i.getNodeShape(t)].draw(r,u,f,x,b,A,_),r.clip())),i.safeDrawImage(r,e,0,0,z,M,F,Z,V,q),C&&r.restore();else{var we=r.createPattern(e,p);r.fillStyle=we,i.nodeShapes[i.getNodeShape(t)].draw(r,u,f,x,b,A,_),r.translate(F,Z),r.fill(),r.translate(-F,-Z)}r.globalAlpha=oe,ne&&i.setImgSmoothing(r,ie)}};var ii={};ii.eleTextBiggerThanMin=function(r,e){if(!e){var t=r.cy().zoom(),n=this.getPixelRatio(),a=Math.ceil(Yh(t*n));e=Math.pow(2,a)}var i=r.pstyle("font-size").pfValue*e,o=r.pstyle("min-zoomed-font-size").pfValue;return!(i<o)};ii.drawElementText=function(r,e,t,n,a){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this;if(n==null){if(i&&!o.eleTextBiggerThanMin(e))return}else if(n===!1)return;if(e.isNode()){var u=e.pstyle("label");if(!u||!u.value)return;var f=o.getLabelJustification(e);r.textAlign=f,r.textBaseline="bottom"}else{var c=e.element()._private.rscratch.badLine,d=e.pstyle("label"),h=e.pstyle("source-label"),p=e.pstyle("target-label");if(c||(!d||!d.value)&&(!h||!h.value)&&(!p||!p.value))return;r.textAlign="center",r.textBaseline="bottom"}var g=!t,m;t&&(m=t,r.translate(-m.x1,-m.y1)),a==null?(o.drawText(r,e,null,g,i),e.isEdge()&&(o.drawText(r,e,"source",g,i),o.drawText(r,e,"target",g,i))):o.drawText(r,e,a,g,i),t&&r.translate(m.x1,m.y1)};ii.getFontCache=function(r){var e;this.fontCaches=this.fontCaches||[];for(var t=0;t<this.fontCaches.length;t++)if(e=this.fontCaches[t],e.context===r)return e;return e={context:r},this.fontCaches.push(e),e};ii.setupTextStyle=function(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,n=e.pstyle("font-style").strValue,a=e.pstyle("font-size").pfValue+"px",i=e.pstyle("font-family").strValue,o=e.pstyle("font-weight").strValue,u=t?e.effectiveOpacity()*e.pstyle("text-opacity").value:1,f=e.pstyle("text-outline-opacity").value*u,c=e.pstyle("color").value,d=e.pstyle("text-outline-color").value;r.font=n+" "+o+" "+a+" "+i,r.lineJoin="round",this.colorFillStyle(r,c[0],c[1],c[2],u),this.colorStrokeStyle(r,d[0],d[1],d[2],f)};function eP(r,e,t,n,a){var i=Math.min(n,a),o=i/2,u=e+n/2,f=t+a/2;r.beginPath(),r.arc(u,f,o,0,Math.PI*2),r.closePath()}function A0(r,e,t,n,a){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:5,o=Math.min(i,n/2,a/2);r.beginPath(),r.moveTo(e+o,t),r.lineTo(e+n-o,t),r.quadraticCurveTo(e+n,t,e+n,t+o),r.lineTo(e+n,t+a-o),r.quadraticCurveTo(e+n,t+a,e+n-o,t+a),r.lineTo(e+o,t+a),r.quadraticCurveTo(e,t+a,e,t+a-o),r.lineTo(e,t+o),r.quadraticCurveTo(e,t,e+o,t),r.closePath()}ii.getTextAngle=function(r,e){var t,n=r._private,a=n.rscratch,i=e?e+"-":"",o=r.pstyle(i+"text-rotation");if(o.strValue==="autorotate"){var u=Mr(a,"labelAngle",e);t=r.isEdge()?u:0}else o.strValue==="none"?t=0:t=o.pfValue;return t};ii.drawText=function(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=e._private,o=i.rscratch,u=a?e.effectiveOpacity():1;if(!(a&&(u===0||e.pstyle("text-opacity").value===0))){t==="main"&&(t=null);var f=Mr(o,"labelX",t),c=Mr(o,"labelY",t),d,h,p=this.getLabelText(e,t);if(p!=null&&p!==""&&!isNaN(f)&&!isNaN(c)){this.setupTextStyle(r,e,a);var g=t?t+"-":"",m=Mr(o,"labelWidth",t),w=Mr(o,"labelHeight",t),x=e.pstyle(g+"text-margin-x").pfValue,b=e.pstyle(g+"text-margin-y").pfValue,_=e.isEdge(),E=e.pstyle("text-halign").value,C=e.pstyle("text-valign").value;_&&(E="center",C="center"),f+=x,c+=b;var B;switch(n?B=this.getTextAngle(e,t):B=0,B!==0&&(d=f,h=c,r.translate(d,h),r.rotate(B),f=0,c=0),C){case"top":break;case"center":c+=w/2;break;case"bottom":c+=w;break}var N=e.pstyle("text-background-opacity").value,A=e.pstyle("text-border-opacity").value,z=e.pstyle("text-border-width").pfValue,M=e.pstyle("text-background-padding").pfValue,V=e.pstyle("text-background-shape").strValue,q=V==="round-rectangle"||V==="roundrectangle",I=V==="circle",F=2;if(N>0||z>0&&A>0){var T=r.fillStyle,H=r.strokeStyle,Q=r.lineWidth,W=e.pstyle("text-background-color").value,Z=e.pstyle("text-border-color").value,X=e.pstyle("text-border-style").value,te=N>0,L=z>0&&A>0,U=f-M;switch(E){case"left":U-=m;break;case"center":U-=m/2;break}var oe=c-w-M,ie=m+2*M,ne=w+2*M;if(te&&(r.fillStyle="rgba(".concat(W[0],",").concat(W[1],",").concat(W[2],",").concat(N*u,")")),L&&(r.strokeStyle="rgba(".concat(Z[0],",").concat(Z[1],",").concat(Z[2],",").concat(A*u,")"),r.lineWidth=z,r.setLineDash))switch(X){case"dotted":r.setLineDash([1,1]);break;case"dashed":r.setLineDash([4,2]);break;case"double":r.lineWidth=z/4,r.setLineDash([]);break;case"solid":default:r.setLineDash([]);break}if(q?(r.beginPath(),A0(r,U,oe,ie,ne,F)):I?(r.beginPath(),eP(r,U,oe,ie,ne)):(r.beginPath(),r.rect(U,oe,ie,ne)),te&&r.fill(),L&&r.stroke(),L&&X==="double"){var we=z/2;r.beginPath(),q?A0(r,U+we,oe+we,ie-2*we,ne-2*we,F):r.rect(U+we,oe+we,ie-2*we,ne-2*we),r.stroke()}r.fillStyle=T,r.strokeStyle=H,r.lineWidth=Q,r.setLineDash&&r.setLineDash([])}var Te=2*e.pstyle("text-outline-width").pfValue;if(Te>0&&(r.lineWidth=Te),e.pstyle("text-wrap").value==="wrap"){var ke=Mr(o,"labelWrapCachedLines",t),ge=Mr(o,"labelLineHeight",t),fe=m/2,de=this.getLabelJustification(e);switch(de==="auto"||(E==="left"?de==="left"?f+=-m:de==="center"&&(f+=-fe):E==="center"?de==="left"?f+=-fe:de==="right"&&(f+=fe):E==="right"&&(de==="center"?f+=fe:de==="right"&&(f+=m))),C){case"top":c-=(ke.length-1)*ge;break;case"center":case"bottom":c-=(ke.length-1)*ge;break}for(var be=0;be<ke.length;be++)Te>0&&r.strokeText(ke[be],f,c),r.fillText(ke[be],f,c),c+=ge}else Te>0&&r.strokeText(p,f,c),r.fillText(p,f,c);B!==0&&(r.rotate(-B),r.translate(-d,-h))}}};var Pa={};Pa.drawNode=function(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this,u,f,c=e._private,d=c.rscratch,h=e.position();if(!(!Ue(h.x)||!Ue(h.y))&&!(i&&!e.visible())){var p=i?e.effectiveOpacity():1,g=o.usePaths(),m,w=!1,x=e.padding();u=e.width()+2*x,f=e.height()+2*x;var b;t&&(b=t,r.translate(-b.x1,-b.y1));for(var _=e.pstyle("background-image"),E=_.value,C=new Array(E.length),B=new Array(E.length),N=0,A=0;A<E.length;A++){var z=E[A],M=C[A]=z!=null&&z!=="none";if(M){var V=e.cy().style().getIndexedStyle(e,"background-image-crossorigin","value",A);N++,B[A]=o.getCachedImage(z,V,function(){c.backgroundTimestamp=Date.now(),e.emitAndNotify("background")})}}var q=e.pstyle("background-blacken").value,I=e.pstyle("border-width").pfValue,F=e.pstyle("background-opacity").value*p,T=e.pstyle("border-color").value,H=e.pstyle("border-style").value,Q=e.pstyle("border-join").value,W=e.pstyle("border-cap").value,Z=e.pstyle("border-position").value,X=e.pstyle("border-dash-pattern").pfValue,te=e.pstyle("border-dash-offset").pfValue,L=e.pstyle("border-opacity").value*p,U=e.pstyle("outline-width").pfValue,oe=e.pstyle("outline-color").value,ie=e.pstyle("outline-style").value,ne=e.pstyle("outline-opacity").value*p,we=e.pstyle("outline-offset").value,Te=e.pstyle("corner-radius").value;Te!=="auto"&&(Te=e.pstyle("corner-radius").pfValue);var ke=function(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:F;o.eleFillStyle(r,e,ee)},ge=function(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:L;o.colorStrokeStyle(r,T[0],T[1],T[2],ee)},fe=function(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ne;o.colorStrokeStyle(r,oe[0],oe[1],oe[2],ee)},de=function(ee,J,O,le){var _e=o.nodePathCache=o.nodePathCache||[],ye=y1(O==="polygon"?O+","+le.join(","):O,""+J,""+ee,""+Te),Se=_e[ye],Oe,Ie=!1;return Se!=null?(Oe=Se,Ie=!0,d.pathCache=Oe):(Oe=new Path2D,_e[ye]=d.pathCache=Oe),{path:Oe,cacheHit:Ie}},be=e.pstyle("shape").strValue,Pe=e.pstyle("shape-polygon-points").pfValue;if(g){r.translate(h.x,h.y);var D=de(u,f,be,Pe);m=D.path,w=D.cacheHit}var ve=function(){if(!w){var ee=h;g&&(ee={x:0,y:0}),o.nodeShapes[o.getNodeShape(e)].draw(m||r,ee.x,ee.y,u,f,Te,d)}g?r.fill(m):r.fill()},pe=function(){for(var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:p,J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,O=c.backgrounding,le=0,_e=0;_e<B.length;_e++){var ye=e.cy().style().getIndexedStyle(e,"background-image-containment","value",_e);if(J&&ye==="over"||!J&&ye==="inside"){le++;continue}C[_e]&&B[_e].complete&&!B[_e].error&&(le++,o.drawInscribedImage(r,B[_e],e,_e,ee))}c.backgrounding=le!==N,O!==c.backgrounding&&e.updateStyle(!1)},Y=function(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p;o.hasPie(e)&&(o.drawPie(r,e,J),ee&&(g||o.nodeShapes[o.getNodeShape(e)].draw(r,h.x,h.y,u,f,Te,d)))},K=function(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p;o.hasStripe(e)&&(r.save(),g?r.clip(d.pathCache):(o.nodeShapes[o.getNodeShape(e)].draw(r,h.x,h.y,u,f,Te,d),r.clip()),o.drawStripe(r,e,J),r.restore(),ee&&(g||o.nodeShapes[o.getNodeShape(e)].draw(r,h.x,h.y,u,f,Te,d)))},ae=function(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:p,J=(q>0?q:-q)*ee,O=q>0?0:255;q!==0&&(o.colorFillStyle(r,O,O,O,J),g?r.fill(m):r.fill())},he=function(){if(I>0){if(r.lineWidth=I,r.lineCap=W,r.lineJoin=Q,r.setLineDash)switch(H){case"dotted":r.setLineDash([1,1]);break;case"dashed":r.setLineDash(X),r.lineDashOffset=te;break;case"solid":case"double":r.setLineDash([]);break}if(Z!=="center"){if(r.save(),r.lineWidth*=2,Z==="inside")g?r.clip(m):r.clip();else{var ee=new Path2D;ee.rect(-u/2-I,-f/2-I,u+2*I,f+2*I),ee.addPath(m),r.clip(ee,"evenodd")}g?r.stroke(m):r.stroke(),r.restore()}else g?r.stroke(m):r.stroke();if(H==="double"){r.lineWidth=I/3;var J=r.globalCompositeOperation;r.globalCompositeOperation="destination-out",g?r.stroke(m):r.stroke(),r.globalCompositeOperation=J}r.setLineDash&&r.setLineDash([])}},me=function(){if(U>0){if(r.lineWidth=U,r.lineCap="butt",r.setLineDash)switch(ie){case"dotted":r.setLineDash([1,1]);break;case"dashed":r.setLineDash([4,2]);break;case"solid":case"double":r.setLineDash([]);break}var ee=h;g&&(ee={x:0,y:0});var J=o.getNodeShape(e),O=I;Z==="inside"&&(O=0),Z==="outside"&&(O*=2);var le=(u+O+(U+we))/u,_e=(f+O+(U+we))/f,ye=u*le,Se=f*_e,Oe=o.nodeShapes[J].points,Ie;if(g){var We=de(ye,Se,J,Oe);Ie=We.path}if(J==="ellipse")o.drawEllipsePath(Ie||r,ee.x,ee.y,ye,Se);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(J)){var $e=0,He=0,rt=0;J==="round-diamond"?$e=(O+we+U)*1.4:J==="round-heptagon"?($e=(O+we+U)*1.075,rt=-(O/2+we+U)/35):J==="round-hexagon"?$e=(O+we+U)*1.12:J==="round-pentagon"?($e=(O+we+U)*1.13,rt=-(O/2+we+U)/15):J==="round-tag"?($e=(O+we+U)*1.12,He=(O/2+U+we)*.07):J==="round-triangle"&&($e=(O+we+U)*(Math.PI/2),rt=-(O+we/2+U)/Math.PI),$e!==0&&(le=(u+$e)/u,ye=u*le,["round-hexagon","round-tag"].includes(J)||(_e=(f+$e)/f,Se=f*_e)),Te=Te==="auto"?P1(ye,Se):Te;for(var nt=ye/2,Ke=Se/2,it=Te+(O+U+we)/2,at=new Array(Oe.length/2),Dt=new Array(Oe.length/2),Et=0;Et<Oe.length/2;Et++)at[Et]={x:ee.x+He+nt*Oe[Et*2],y:ee.y+rt+Ke*Oe[Et*2+1]};var $t,Pt,Rt,Vt,It=at.length;for(Pt=at[It-1],$t=0;$t<It;$t++)Rt=at[$t%It],Vt=at[($t+1)%It],Dt[$t]=cv(Pt,Rt,Vt,it),Pt=Rt,Rt=Vt;o.drawRoundPolygonPath(Ie||r,ee.x+He,ee.y+rt,u*le,f*_e,Oe,Dt)}else if(["roundrectangle","round-rectangle"].includes(J))Te=Te==="auto"?ba(ye,Se):Te,o.drawRoundRectanglePath(Ie||r,ee.x,ee.y,ye,Se,Te+(O+U+we)/2);else if(["cutrectangle","cut-rectangle"].includes(J))Te=Te==="auto"?ev():Te,o.drawCutRectanglePath(Ie||r,ee.x,ee.y,ye,Se,null,Te+(O+U+we)/4);else if(["bottomroundrectangle","bottom-round-rectangle"].includes(J))Te=Te==="auto"?ba(ye,Se):Te,o.drawBottomRoundRectanglePath(Ie||r,ee.x,ee.y,ye,Se,Te+(O+U+we)/2);else if(J==="barrel")o.drawBarrelPath(Ie||r,ee.x,ee.y,ye,Se);else if(J.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(J)){var Ur=(O+U+we)/u;Oe=xl(bl(Oe,Ur)),o.drawPolygonPath(Ie||r,ee.x,ee.y,u,f,Oe)}else{var St=(O+U+we)/u;Oe=xl(bl(Oe,-St)),o.drawPolygonPath(Ie||r,ee.x,ee.y,u,f,Oe)}if(g?r.stroke(Ie):r.stroke(),ie==="double"){r.lineWidth=O/3;var $r=r.globalCompositeOperation;r.globalCompositeOperation="destination-out",g?r.stroke(Ie):r.stroke(),r.globalCompositeOperation=$r}r.setLineDash&&r.setLineDash([])}},se=function(){a&&o.drawNodeOverlay(r,e,h,u,f)},Re=function(){a&&o.drawNodeUnderlay(r,e,h,u,f)},De=function(){o.drawElementText(r,e,null,n)},Be=e.pstyle("ghost").value==="yes";if(Be){var ze=e.pstyle("ghost-offset-x").pfValue,$=e.pstyle("ghost-offset-y").pfValue,k=e.pstyle("ghost-opacity").value,R=k*p;r.translate(ze,$),fe(),me(),ke(k*F),ve(),pe(R,!0),ge(k*L),he(),Y(q!==0||I!==0),K(q!==0||I!==0),pe(R,!1),ae(R),r.translate(-ze,-$)}g&&r.translate(-h.x,-h.y),Re(),g&&r.translate(h.x,h.y),fe(),me(),ke(),ve(),pe(p,!0),ge(),he(),Y(q!==0||I!==0),K(q!==0||I!==0),pe(p,!1),ae(),g&&r.translate(-h.x,-h.y),De(),se(),t&&r.translate(b.x1,b.y1)}};var Lw=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(t,n,a,i,o){var u=this;if(n.visible()){var f=n.pstyle("".concat(e,"-padding")).pfValue,c=n.pstyle("".concat(e,"-opacity")).value,d=n.pstyle("".concat(e,"-color")).value,h=n.pstyle("".concat(e,"-shape")).value,p=n.pstyle("".concat(e,"-corner-radius")).value;if(c>0){if(a=a||n.position(),i==null||o==null){var g=n.padding();i=n.width()+2*g,o=n.height()+2*g}u.colorFillStyle(t,d[0],d[1],d[2],c),u.nodeShapes[h].draw(t,a.x,a.y,i+f*2,o+f*2,p),t.fill()}}}};Pa.drawNodeOverlay=Lw("overlay");Pa.drawNodeUnderlay=Lw("underlay");Pa.hasPie=function(r){return r=r[0],r._private.hasPie};Pa.hasStripe=function(r){return r=r[0],r._private.hasStripe};Pa.drawPie=function(r,e,t,n){e=e[0],n=n||e.position();var a=e.cy().style(),i=e.pstyle("pie-size"),o=e.pstyle("pie-hole"),u=e.pstyle("pie-start-angle").pfValue,f=n.x,c=n.y,d=e.width(),h=e.height(),p=Math.min(d,h)/2,g,m=0,w=this.usePaths();if(w&&(f=0,c=0),i.units==="%"?p=p*i.pfValue:i.pfValue!==void 0&&(p=i.pfValue/2),o.units==="%"?g=p*o.pfValue:o.pfValue!==void 0&&(g=o.pfValue/2),!(g>=p))for(var x=1;x<=a.pieBackgroundN;x++){var b=e.pstyle("pie-"+x+"-background-size").value,_=e.pstyle("pie-"+x+"-background-color").value,E=e.pstyle("pie-"+x+"-background-opacity").value*t,C=b/100;C+m>1&&(C=1-m);var B=1.5*Math.PI+2*Math.PI*m;B+=u;var N=2*Math.PI*C,A=B+N;b===0||m>=1||m+C>1||(g===0?(r.beginPath(),r.moveTo(f,c),r.arc(f,c,p,B,A),r.closePath()):(r.beginPath(),r.arc(f,c,p,B,A),r.arc(f,c,g,A,B,!0),r.closePath()),this.colorFillStyle(r,_[0],_[1],_[2],E),r.fill(),m+=C)}};Pa.drawStripe=function(r,e,t,n){e=e[0],n=n||e.position();var a=e.cy().style(),i=n.x,o=n.y,u=e.width(),f=e.height(),c=0,d=this.usePaths();r.save();var h=e.pstyle("stripe-direction").value,p=e.pstyle("stripe-size");switch(h){case"vertical":break;case"righward":r.rotate(-Math.PI/2);break}var g=u,m=f;p.units==="%"?(g=g*p.pfValue,m=m*p.pfValue):p.pfValue!==void 0&&(g=p.pfValue,m=p.pfValue),d&&(i=0,o=0),o-=g/2,i-=m/2;for(var w=1;w<=a.stripeBackgroundN;w++){var x=e.pstyle("stripe-"+w+"-background-size").value,b=e.pstyle("stripe-"+w+"-background-color").value,_=e.pstyle("stripe-"+w+"-background-opacity").value*t,E=x/100;E+c>1&&(E=1-c),!(x===0||c>=1||c+E>1)&&(r.beginPath(),r.rect(i,o+m*c,g,m*E),r.closePath(),this.colorFillStyle(r,b[0],b[1],b[2],_),r.fill(),c+=E)}r.restore()};var Br={},tP=100;Br.getPixelRatio=function(){var r=this.data.contexts[0];if(this.forcedPixelRatio!=null)return this.forcedPixelRatio;var e=this.cy.window(),t=r.backingStorePixelRatio||r.webkitBackingStorePixelRatio||r.mozBackingStorePixelRatio||r.msBackingStorePixelRatio||r.oBackingStorePixelRatio||r.backingStorePixelRatio||1;return(e.devicePixelRatio||1)/t};Br.paintCache=function(r){for(var e=this.paintCaches=this.paintCaches||[],t=!0,n,a=0;a<e.length;a++)if(n=e[a],n.context===r){t=!1;break}return t&&(n={context:r},e.push(n)),n};Br.createGradientStyleFor=function(r,e,t,n,a){var i,o=this.usePaths(),u=t.pstyle(e+"-gradient-stop-colors").value,f=t.pstyle(e+"-gradient-stop-positions").pfValue;if(n==="radial-gradient")if(t.isEdge()){var c=t.sourceEndpoint(),d=t.targetEndpoint(),h=t.midpoint(),p=Ja(c,h),g=Ja(d,h);i=r.createRadialGradient(h.x,h.y,0,h.x,h.y,Math.max(p,g))}else{var m=o?{x:0,y:0}:t.position(),w=t.paddedWidth(),x=t.paddedHeight();i=r.createRadialGradient(m.x,m.y,0,m.x,m.y,Math.max(w,x))}else if(t.isEdge()){var b=t.sourceEndpoint(),_=t.targetEndpoint();i=r.createLinearGradient(b.x,b.y,_.x,_.y)}else{var E=o?{x:0,y:0}:t.position(),C=t.paddedWidth(),B=t.paddedHeight(),N=C/2,A=B/2,z=t.pstyle("background-gradient-direction").value;switch(z){case"to-bottom":i=r.createLinearGradient(E.x,E.y-A,E.x,E.y+A);break;case"to-top":i=r.createLinearGradient(E.x,E.y+A,E.x,E.y-A);break;case"to-left":i=r.createLinearGradient(E.x+N,E.y,E.x-N,E.y);break;case"to-right":i=r.createLinearGradient(E.x-N,E.y,E.x+N,E.y);break;case"to-bottom-right":case"to-right-bottom":i=r.createLinearGradient(E.x-N,E.y-A,E.x+N,E.y+A);break;case"to-top-right":case"to-right-top":i=r.createLinearGradient(E.x-N,E.y+A,E.x+N,E.y-A);break;case"to-bottom-left":case"to-left-bottom":i=r.createLinearGradient(E.x+N,E.y-A,E.x-N,E.y+A);break;case"to-top-left":case"to-left-top":i=r.createLinearGradient(E.x+N,E.y+A,E.x-N,E.y-A);break}}if(!i)return null;for(var M=f.length===u.length,V=u.length,q=0;q<V;q++)i.addColorStop(M?f[q]:q/(V-1),"rgba("+u[q][0]+","+u[q][1]+","+u[q][2]+","+a+")");return i};Br.gradientFillStyle=function(r,e,t,n){var a=this.createGradientStyleFor(r,"background",e,t,n);if(!a)return null;r.fillStyle=a};Br.colorFillStyle=function(r,e,t,n,a){r.fillStyle="rgba("+e+","+t+","+n+","+a+")"};Br.eleFillStyle=function(r,e,t){var n=e.pstyle("background-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientFillStyle(r,e,n,t);else{var a=e.pstyle("background-color").value;this.colorFillStyle(r,a[0],a[1],a[2],t)}};Br.gradientStrokeStyle=function(r,e,t,n){var a=this.createGradientStyleFor(r,"line",e,t,n);if(!a)return null;r.strokeStyle=a};Br.colorStrokeStyle=function(r,e,t,n,a){r.strokeStyle="rgba("+e+","+t+","+n+","+a+")"};Br.eleStrokeStyle=function(r,e,t){var n=e.pstyle("line-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientStrokeStyle(r,e,n,t);else{var a=e.pstyle("line-color").value;this.colorStrokeStyle(r,a[0],a[1],a[2],t)}};Br.matchCanvasSize=function(r){var e=this,t=e.data,n=e.findContainerClientCoords(),a=n[2],i=n[3],o=e.getPixelRatio(),u=e.motionBlurPxRatio;(r===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]||r===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG])&&(o=u);var f=a*o,c=i*o,d;if(!(f===e.canvasWidth&&c===e.canvasHeight)){e.fontCaches=null;var h=t.canvasContainer;h.style.width=a+"px",h.style.height=i+"px";for(var p=0;p<e.CANVAS_LAYERS;p++)d=t.canvases[p],d.width=f,d.height=c,d.style.width=a+"px",d.style.height=i+"px";for(var p=0;p<e.BUFFER_COUNT;p++)d=t.bufferCanvases[p],d.width=f,d.height=c,d.style.width=a+"px",d.style.height=i+"px";e.textureMult=1,o<=1&&(d=t.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,d.width=f*e.textureMult,d.height=c*e.textureMult),e.canvasWidth=f,e.canvasHeight=c,e.pixelRatio=o}};Br.renderTo=function(r,e,t,n){this.render({forcedContext:r,forcedZoom:e,forcedPan:t,drawAllLayers:!0,forcedPxRatio:n})};Br.clearCanvas=function(){var r=this,e=r.data;function t(n){n.clearRect(0,0,r.canvasWidth,r.canvasHeight)}t(e.contexts[r.NODE]),t(e.contexts[r.DRAG])};Br.render=function(r){var e=this;r=r||_1();var t=e.cy,n=r.forcedContext,a=r.drawAllLayers,i=r.drawOnlyNodeLayer,o=r.forcedZoom,u=r.forcedPan,f=r.forcedPxRatio===void 0?this.getPixelRatio():r.forcedPxRatio,c=e.data,d=c.canvasNeedsRedraw,h=e.textureOnViewport&&!n&&(e.pinching||e.hoverData.dragging||e.swipePanning||e.data.wheelZooming),p=r.motionBlur!==void 0?r.motionBlur:e.motionBlur,g=e.motionBlurPxRatio,m=t.hasCompoundNodes(),w=e.hoverData.draggingEles,x=!!(e.hoverData.selecting||e.touchData.selecting);p=p&&!n&&e.motionBlurEnabled&&!x;var b=p;n||(e.prevPxRatio!==f&&(e.invalidateContainerClientCoordsCache(),e.matchCanvasSize(e.container),e.redrawHint("eles",!0),e.redrawHint("drag",!0)),e.prevPxRatio=f),!n&&e.motionBlurTimeout&&clearTimeout(e.motionBlurTimeout),p&&(e.mbFrames==null&&(e.mbFrames=0),e.mbFrames++,e.mbFrames<3&&(b=!1),e.mbFrames>e.minMbLowQualFrames&&(e.motionBlurPxRatio=e.mbPxRBlurry)),e.clearingMotionBlur&&(e.motionBlurPxRatio=1),e.textureDrawLastFrame&&!h&&(d[e.NODE]=!0,d[e.SELECT_BOX]=!0);var _=t.style(),E=t.zoom(),C=o!==void 0?o:E,B=t.pan(),N={x:B.x,y:B.y},A={zoom:E,pan:{x:B.x,y:B.y}},z=e.prevViewport,M=z===void 0||A.zoom!==z.zoom||A.pan.x!==z.pan.x||A.pan.y!==z.pan.y;!M&&!(w&&!m)&&(e.motionBlurPxRatio=1),u&&(N=u),C*=f,N.x*=f,N.y*=f;var V=e.getCachedZSortedEles();function q(ge,fe,de,be,Pe){var D=ge.globalCompositeOperation;ge.globalCompositeOperation="destination-out",e.colorFillStyle(ge,255,255,255,e.motionBlurTransparency),ge.fillRect(fe,de,be,Pe),ge.globalCompositeOperation=D}function I(ge,fe){var de,be,Pe,D;!e.clearingMotionBlur&&(ge===c.bufferContexts[e.MOTIONBLUR_BUFFER_NODE]||ge===c.bufferContexts[e.MOTIONBLUR_BUFFER_DRAG])?(de={x:B.x*g,y:B.y*g},be=E*g,Pe=e.canvasWidth*g,D=e.canvasHeight*g):(de=N,be=C,Pe=e.canvasWidth,D=e.canvasHeight),ge.setTransform(1,0,0,1,0,0),fe==="motionBlur"?q(ge,0,0,Pe,D):!n&&(fe===void 0||fe)&&ge.clearRect(0,0,Pe,D),a||(ge.translate(de.x,de.y),ge.scale(be,be)),u&&ge.translate(u.x,u.y),o&&ge.scale(o,o)}if(h||(e.textureDrawLastFrame=!1),h){if(e.textureDrawLastFrame=!0,!e.textureCache){e.textureCache={},e.textureCache.bb=t.mutableElements().boundingBox(),e.textureCache.texture=e.data.bufferCanvases[e.TEXTURE_BUFFER];var F=e.data.bufferContexts[e.TEXTURE_BUFFER];F.setTransform(1,0,0,1,0,0),F.clearRect(0,0,e.canvasWidth*e.textureMult,e.canvasHeight*e.textureMult),e.render({forcedContext:F,drawOnlyNodeLayer:!0,forcedPxRatio:f*e.textureMult});var A=e.textureCache.viewport={zoom:t.zoom(),pan:t.pan(),width:e.canvasWidth,height:e.canvasHeight};A.mpan={x:(0-A.pan.x)/A.zoom,y:(0-A.pan.y)/A.zoom}}d[e.DRAG]=!1,d[e.NODE]=!1;var T=c.contexts[e.NODE],H=e.textureCache.texture,A=e.textureCache.viewport;T.setTransform(1,0,0,1,0,0),p?q(T,0,0,A.width,A.height):T.clearRect(0,0,A.width,A.height);var Q=_.core("outside-texture-bg-color").value,W=_.core("outside-texture-bg-opacity").value;e.colorFillStyle(T,Q[0],Q[1],Q[2],W),T.fillRect(0,0,A.width,A.height);var E=t.zoom();I(T,!1),T.clearRect(A.mpan.x,A.mpan.y,A.width/A.zoom/f,A.height/A.zoom/f),T.drawImage(H,A.mpan.x,A.mpan.y,A.width/A.zoom/f,A.height/A.zoom/f)}else e.textureOnViewport&&!n&&(e.textureCache=null);var Z=t.extent(),X=e.pinching||e.hoverData.dragging||e.swipePanning||e.data.wheelZooming||e.hoverData.draggingEles||e.cy.animated(),te=e.hideEdgesOnViewport&&X,L=[];if(L[e.NODE]=!d[e.NODE]&&p&&!e.clearedForMotionBlur[e.NODE]||e.clearingMotionBlur,L[e.NODE]&&(e.clearedForMotionBlur[e.NODE]=!0),L[e.DRAG]=!d[e.DRAG]&&p&&!e.clearedForMotionBlur[e.DRAG]||e.clearingMotionBlur,L[e.DRAG]&&(e.clearedForMotionBlur[e.DRAG]=!0),d[e.NODE]||a||i||L[e.NODE]){var U=p&&!L[e.NODE]&&g!==1,T=n||(U?e.data.bufferContexts[e.MOTIONBLUR_BUFFER_NODE]:c.contexts[e.NODE]),oe=p&&!U?"motionBlur":void 0;I(T,oe),te?e.drawCachedNodes(T,V.nondrag,f,Z):e.drawLayeredElements(T,V.nondrag,f,Z),e.debug&&e.drawDebugPoints(T,V.nondrag),!a&&!p&&(d[e.NODE]=!1)}if(!i&&(d[e.DRAG]||a||L[e.DRAG])){var U=p&&!L[e.DRAG]&&g!==1,T=n||(U?e.data.bufferContexts[e.MOTIONBLUR_BUFFER_DRAG]:c.contexts[e.DRAG]);I(T,p&&!U?"motionBlur":void 0),te?e.drawCachedNodes(T,V.drag,f,Z):e.drawCachedElements(T,V.drag,f,Z),e.debug&&e.drawDebugPoints(T,V.drag),!a&&!p&&(d[e.DRAG]=!1)}if(this.drawSelectionRectangle(r,I),p&&g!==1){var ie=c.contexts[e.NODE],ne=e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE],we=c.contexts[e.DRAG],Te=e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG],ke=function(fe,de,be){fe.setTransform(1,0,0,1,0,0),be||!b?fe.clearRect(0,0,e.canvasWidth,e.canvasHeight):q(fe,0,0,e.canvasWidth,e.canvasHeight);var Pe=g;fe.drawImage(de,0,0,e.canvasWidth*Pe,e.canvasHeight*Pe,0,0,e.canvasWidth,e.canvasHeight)};(d[e.NODE]||L[e.NODE])&&(ke(ie,ne,L[e.NODE]),d[e.NODE]=!1),(d[e.DRAG]||L[e.DRAG])&&(ke(we,Te,L[e.DRAG]),d[e.DRAG]=!1)}e.prevViewport=A,e.clearingMotionBlur&&(e.clearingMotionBlur=!1,e.motionBlurCleared=!0,e.motionBlur=!0),p&&(e.motionBlurTimeout=setTimeout(function(){e.motionBlurTimeout=null,e.clearedForMotionBlur[e.NODE]=!1,e.clearedForMotionBlur[e.DRAG]=!1,e.motionBlur=!1,e.clearingMotionBlur=!h,e.mbFrames=0,d[e.NODE]=!0,d[e.DRAG]=!0,e.redraw()},tP)),n||t.emit("render")};var Js;Br.drawSelectionRectangle=function(r,e){var t=this,n=t.cy,a=t.data,i=n.style(),o=r.drawOnlyNodeLayer,u=r.drawAllLayers,f=a.canvasNeedsRedraw,c=r.forcedContext;if(t.showFps||!o&&f[t.SELECT_BOX]&&!u){var d=c||a.contexts[t.SELECT_BOX];if(e(d),t.selection[4]==1&&(t.hoverData.selecting||t.touchData.selecting)){var h=t.cy.zoom(),p=i.core("selection-box-border-width").value/h;d.lineWidth=p,d.fillStyle="rgba("+i.core("selection-box-color").value[0]+","+i.core("selection-box-color").value[1]+","+i.core("selection-box-color").value[2]+","+i.core("selection-box-opacity").value+")",d.fillRect(t.selection[0],t.selection[1],t.selection[2]-t.selection[0],t.selection[3]-t.selection[1]),p>0&&(d.strokeStyle="rgba("+i.core("selection-box-border-color").value[0]+","+i.core("selection-box-border-color").value[1]+","+i.core("selection-box-border-color").value[2]+","+i.core("selection-box-opacity").value+")",d.strokeRect(t.selection[0],t.selection[1],t.selection[2]-t.selection[0],t.selection[3]-t.selection[1]))}if(a.bgActivePosistion&&!t.hoverData.selecting){var h=t.cy.zoom(),g=a.bgActivePosistion;d.fillStyle="rgba("+i.core("active-bg-color").value[0]+","+i.core("active-bg-color").value[1]+","+i.core("active-bg-color").value[2]+","+i.core("active-bg-opacity").value+")",d.beginPath(),d.arc(g.x,g.y,i.core("active-bg-size").pfValue/h,0,2*Math.PI),d.fill()}var m=t.lastRedrawTime;if(t.showFps&&m){m=Math.round(m);var w=Math.round(1e3/m),x="1 frame = "+m+" ms = "+w+" fps";if(d.setTransform(1,0,0,1,0,0),d.fillStyle="rgba(255, 0, 0, 0.75)",d.strokeStyle="rgba(255, 0, 0, 0.75)",d.font="30px Arial",!Js){var b=d.measureText(x);Js=b.actualBoundingBoxAscent}d.fillText(x,0,Js);var _=60;d.strokeRect(0,Js+10,250,20),d.fillRect(0,Js+10,250*Math.min(w/_,1),20)}u||(f[t.SELECT_BOX]=!1)}};function D0(r,e,t){var n=r.createShader(e);if(r.shaderSource(n,t),r.compileShader(n),!r.getShaderParameter(n,r.COMPILE_STATUS))throw new Error(r.getShaderInfoLog(n));return n}function rP(r,e,t){var n=D0(r,r.VERTEX_SHADER,e),a=D0(r,r.FRAGMENT_SHADER,t),i=r.createProgram();if(r.attachShader(i,n),r.attachShader(i,a),r.linkProgram(i),!r.getProgramParameter(i,r.LINK_STATUS))throw new Error("Could not initialize shaders");return i}function nP(r,e,t){t===void 0&&(t=e);var n=r.makeOffscreenCanvas(e,t),a=n.context=n.getContext("2d");return n.clear=function(){return a.clearRect(0,0,n.width,n.height)},n.clear(),n}function vv(r){var e=r.pixelRatio,t=r.cy.zoom(),n=r.cy.pan();return{zoom:t*e,pan:{x:n.x*e,y:n.y*e}}}function aP(r){var e=r.pixelRatio,t=r.cy.zoom();return t*e}function iP(r,e,t,n,a){var i=n*t+e.x,o=a*t+e.y;return o=Math.round(r.canvasHeight-o),[i,o]}function sP(r){return r.pstyle("background-fill").value!=="solid"||r.pstyle("background-image").strValue!=="none"?!1:r.pstyle("border-width").value===0||r.pstyle("border-opacity").value===0?!0:r.pstyle("border-style").value==="solid"}function oP(r,e){if(r.length!==e.length)return!1;for(var t=0;t<r.length;t++)if(r[t]!==e[t])return!1;return!0}function Ha(r,e,t){var n=r[0]/255,a=r[1]/255,i=r[2]/255,o=e,u=t||new Array(4);return u[0]=n*o,u[1]=a*o,u[2]=i*o,u[3]=o,u}function zi(r,e){var t=e||new Array(4);return t[0]=(r>>0&255)/255,t[1]=(r>>8&255)/255,t[2]=(r>>16&255)/255,t[3]=(r>>24&255)/255,t}function uP(r){return r[0]+(r[1]<<8)+(r[2]<<16)+(r[3]<<24)}function lP(r,e){var t=r.createTexture();return t.buffer=function(n){r.bindTexture(r.TEXTURE_2D,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR_MIPMAP_NEAREST),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,n),r.generateMipmap(r.TEXTURE_2D),r.bindTexture(r.TEXTURE_2D,null)},t.deleteTexture=function(){r.deleteTexture(t)},t}function Nw(r,e){switch(e){case"float":return[1,r.FLOAT,4];case"vec2":return[2,r.FLOAT,4];case"vec3":return[3,r.FLOAT,4];case"vec4":return[4,r.FLOAT,4];case"int":return[1,r.INT,4];case"ivec2":return[2,r.INT,4]}}function Ow(r,e,t){switch(e){case r.FLOAT:return new Float32Array(t);case r.INT:return new Int32Array(t)}}function fP(r,e,t,n,a,i){switch(e){case r.FLOAT:return new Float32Array(t.buffer,i*n,a);case r.INT:return new Int32Array(t.buffer,i*n,a)}}function cP(r,e,t,n){var a=Nw(r,e),i=Ht(a,2),o=i[0],u=i[1],f=Ow(r,u,n),c=r.createBuffer();return r.bindBuffer(r.ARRAY_BUFFER,c),r.bufferData(r.ARRAY_BUFFER,f,r.STATIC_DRAW),u===r.FLOAT?r.vertexAttribPointer(t,o,u,!1,0,0):u===r.INT&&r.vertexAttribIPointer(t,o,u,0,0),r.enableVertexAttribArray(t),r.bindBuffer(r.ARRAY_BUFFER,null),c}function _n(r,e,t,n){var a=Nw(r,t),i=Ht(a,3),o=i[0],u=i[1],f=i[2],c=Ow(r,u,e*o),d=o*f,h=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,h),r.bufferData(r.ARRAY_BUFFER,e*d,r.DYNAMIC_DRAW),r.enableVertexAttribArray(n),u===r.FLOAT?r.vertexAttribPointer(n,o,u,!1,d,0):u===r.INT&&r.vertexAttribIPointer(n,o,u,d,0),r.vertexAttribDivisor(n,1),r.bindBuffer(r.ARRAY_BUFFER,null);for(var p=new Array(e),g=0;g<e;g++)p[g]=fP(r,u,c,d,o,g);return h.dataArray=c,h.stride=d,h.size=o,h.getView=function(m){return p[m]},h.setPoint=function(m,w,x){var b=p[m];b[0]=w,b[1]=x},h.bufferSubData=function(m){r.bindBuffer(r.ARRAY_BUFFER,h),m?r.bufferSubData(r.ARRAY_BUFFER,0,c,0,m*o):r.bufferSubData(r.ARRAY_BUFFER,0,c)},h}function dP(r,e,t){for(var n=9,a=new Float32Array(e*n),i=new Array(e),o=0;o<e;o++){var u=o*n*4;i[o]=new Float32Array(a.buffer,u,n)}var f=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,f),r.bufferData(r.ARRAY_BUFFER,a.byteLength,r.DYNAMIC_DRAW);for(var c=0;c<3;c++){var d=t+c;r.enableVertexAttribArray(d),r.vertexAttribPointer(d,3,r.FLOAT,!1,36,c*12),r.vertexAttribDivisor(d,1)}return r.bindBuffer(r.ARRAY_BUFFER,null),f.getMatrixView=function(h){return i[h]},f.setData=function(h,p){i[p].set(h,0)},f.bufferSubData=function(){r.bindBuffer(r.ARRAY_BUFFER,f),r.bufferSubData(r.ARRAY_BUFFER,0,a)},f}function hP(r){var e=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,e);var t=r.createTexture();return r.bindTexture(r.TEXTURE_2D,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,t,0),r.bindFramebuffer(r.FRAMEBUFFER,null),e.setFramebufferAttachmentSizes=function(n,a){r.bindTexture(r.TEXTURE_2D,t),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,n,a,0,r.RGBA,r.UNSIGNED_BYTE,null)},e}var I0=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var r=0,e=arguments.length;e--;)r+=arguments[e]*arguments[e];return Math.sqrt(r)});function ph(){var r=new I0(9);return I0!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r}function L0(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=1,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r}function vP(r,e,t){var n=e[0],a=e[1],i=e[2],o=e[3],u=e[4],f=e[5],c=e[6],d=e[7],h=e[8],p=t[0],g=t[1],m=t[2],w=t[3],x=t[4],b=t[5],_=t[6],E=t[7],C=t[8];return r[0]=p*n+g*o+m*c,r[1]=p*a+g*u+m*d,r[2]=p*i+g*f+m*h,r[3]=w*n+x*o+b*c,r[4]=w*a+x*u+b*d,r[5]=w*i+x*f+b*h,r[6]=_*n+E*o+C*c,r[7]=_*a+E*u+C*d,r[8]=_*i+E*f+C*h,r}function pl(r,e,t){var n=e[0],a=e[1],i=e[2],o=e[3],u=e[4],f=e[5],c=e[6],d=e[7],h=e[8],p=t[0],g=t[1];return r[0]=n,r[1]=a,r[2]=i,r[3]=o,r[4]=u,r[5]=f,r[6]=p*n+g*o+c,r[7]=p*a+g*u+d,r[8]=p*i+g*f+h,r}function N0(r,e,t){var n=e[0],a=e[1],i=e[2],o=e[3],u=e[4],f=e[5],c=e[6],d=e[7],h=e[8],p=Math.sin(t),g=Math.cos(t);return r[0]=g*n+p*o,r[1]=g*a+p*u,r[2]=g*i+p*f,r[3]=g*o-p*n,r[4]=g*u-p*a,r[5]=g*f-p*i,r[6]=c,r[7]=d,r[8]=h,r}function zh(r,e,t){var n=t[0],a=t[1];return r[0]=n*e[0],r[1]=n*e[1],r[2]=n*e[2],r[3]=a*e[3],r[4]=a*e[4],r[5]=a*e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r}function pP(r,e,t){return r[0]=2/e,r[1]=0,r[2]=0,r[3]=0,r[4]=-2/t,r[5]=0,r[6]=-1,r[7]=1,r[8]=1,r}var gP=(function(){function r(e,t,n,a){ka(this,r),this.debugID=Math.floor(Math.random()*1e4),this.r=e,this.texSize=t,this.texRows=n,this.texHeight=Math.floor(t/n),this.enableWrapping=!0,this.locked=!1,this.texture=null,this.needsBuffer=!0,this.freePointer={x:0,row:0},this.keyToLocation=new Map,this.canvas=a(e,t,t),this.scratch=a(e,t,this.texHeight,"scratch")}return Ca(r,[{key:"lock",value:function(){this.locked=!0}},{key:"getKeys",value:function(){return new Set(this.keyToLocation.keys())}},{key:"getScale",value:function(t){var n=t.w,a=t.h,i=this.texHeight,o=this.texSize,u=i/a,f=n*u,c=a*u;return f>o&&(u=o/n,f=n*u,c=a*u),{scale:u,texW:f,texH:c}}},{key:"draw",value:function(t,n,a){var i=this;if(this.locked)throw new Error("can't draw, atlas is locked");var o=this.texSize,u=this.texRows,f=this.texHeight,c=this.getScale(n),d=c.scale,h=c.texW,p=c.texH,g=function(E,C){if(a&&C){var B=C.context,N=E.x,A=E.row,z=N,M=f*A;B.save(),B.translate(z,M),B.scale(d,d),a(B,n),B.restore()}},m=[null,null],w=function(){g(i.freePointer,i.canvas),m[0]={x:i.freePointer.x,y:i.freePointer.row*f,w:h,h:p},m[1]={x:i.freePointer.x+h,y:i.freePointer.row*f,w:0,h:p},i.freePointer.x+=h,i.freePointer.x==o&&(i.freePointer.x=0,i.freePointer.row++)},x=function(){var E=i.scratch,C=i.canvas;E.clear(),g({x:0,row:0},E);var B=o-i.freePointer.x,N=h-B,A=f;{var z=i.freePointer.x,M=i.freePointer.row*f,V=B;C.context.drawImage(E,0,0,V,A,z,M,V,A),m[0]={x:z,y:M,w:V,h:p}}{var q=B,I=(i.freePointer.row+1)*f,F=N;C&&C.context.drawImage(E,q,0,F,A,0,I,F,A),m[1]={x:0,y:I,w:F,h:p}}i.freePointer.x=N,i.freePointer.row++},b=function(){i.freePointer.x=0,i.freePointer.row++};if(this.freePointer.x+h<=o)w();else{if(this.freePointer.row>=u-1)return!1;this.freePointer.x===o?(b(),w()):this.enableWrapping?x():(b(),w())}return this.keyToLocation.set(t,m),this.needsBuffer=!0,m}},{key:"getOffsets",value:function(t){return this.keyToLocation.get(t)}},{key:"isEmpty",value:function(){return this.freePointer.x===0&&this.freePointer.row===0}},{key:"canFit",value:function(t){if(this.locked)return!1;var n=this.texSize,a=this.texRows,i=this.getScale(t),o=i.texW;return this.freePointer.x+o>n?this.freePointer.row<a-1:!0}},{key:"bufferIfNeeded",value:function(t){this.texture||(this.texture=lP(t,this.debugID)),this.needsBuffer&&(this.texture.buffer(this.canvas),this.needsBuffer=!1,this.locked&&(this.canvas=null,this.scratch=null))}},{key:"dispose",value:function(){this.texture&&(this.texture.deleteTexture(),this.texture=null),this.canvas=null,this.scratch=null,this.locked=!0}}])})(),mP=(function(){function r(e,t,n,a){ka(this,r),this.r=e,this.texSize=t,this.texRows=n,this.createTextureCanvas=a,this.atlases=[],this.styleKeyToAtlas=new Map,this.markedKeys=new Set}return Ca(r,[{key:"getKeys",value:function(){return new Set(this.styleKeyToAtlas.keys())}},{key:"_createAtlas",value:function(){var t=this.r,n=this.texSize,a=this.texRows,i=this.createTextureCanvas;return new gP(t,n,a,i)}},{key:"_getScratchCanvas",value:function(){if(!this.scratch){var t=this.r,n=this.texSize,a=this.texRows,i=this.createTextureCanvas,o=Math.floor(n/a);this.scratch=i(t,n,o,"scratch")}return this.scratch}},{key:"draw",value:function(t,n,a){var i=this.styleKeyToAtlas.get(t);return i||(i=this.atlases[this.atlases.length-1],(!i||!i.canFit(n))&&(i&&i.lock(),i=this._createAtlas(),this.atlases.push(i)),i.draw(t,n,a),this.styleKeyToAtlas.set(t,i)),i}},{key:"getAtlas",value:function(t){return this.styleKeyToAtlas.get(t)}},{key:"hasAtlas",value:function(t){return this.styleKeyToAtlas.has(t)}},{key:"markKeyForGC",value:function(t){this.markedKeys.add(t)}},{key:"gc",value:function(){var t=this,n=this.markedKeys;if(n.size===0){console.log("nothing to garbage collect");return}var a=[],i=new Map,o=null,u=Fr(this.atlases),f;try{var c=function(){var h=f.value,p=h.getKeys(),g=yP(n,p);if(g.size===0)return a.push(h),p.forEach(function(B){return i.set(B,h)}),1;o||(o=t._createAtlas(),a.push(o));var m=Fr(p),w;try{for(m.s();!(w=m.n()).done;){var x=w.value;if(!g.has(x)){var b=h.getOffsets(x),_=Ht(b,2),E=_[0],C=_[1];o.canFit({w:E.w+C.w,h:E.h})||(o.lock(),o=t._createAtlas(),a.push(o)),h.canvas&&(t._copyTextureToNewAtlas(x,h,o),i.set(x,o))}}}catch(B){m.e(B)}finally{m.f()}h.dispose()};for(u.s();!(f=u.n()).done;)c()}catch(d){u.e(d)}finally{u.f()}this.atlases=a,this.styleKeyToAtlas=i,this.markedKeys=new Set}},{key:"_copyTextureToNewAtlas",value:function(t,n,a){var i=n.getOffsets(t),o=Ht(i,2),u=o[0],f=o[1];if(f.w===0)a.draw(t,u,function(p){p.drawImage(n.canvas,u.x,u.y,u.w,u.h,0,0,u.w,u.h)});else{var c=this._getScratchCanvas();c.clear(),c.context.drawImage(n.canvas,u.x,u.y,u.w,u.h,0,0,u.w,u.h),c.context.drawImage(n.canvas,f.x,f.y,f.w,f.h,u.w,0,f.w,f.h);var d=u.w+f.w,h=u.h;a.draw(t,{w:d,h},function(p){p.drawImage(c,0,0,d,h,0,0,d,h)})}}},{key:"getCounts",value:function(){return{keyCount:this.styleKeyToAtlas.size,atlasCount:new Set(this.styleKeyToAtlas.values()).size}}}])})();function yP(r,e){return r.intersection?r.intersection(e):new Set(gl(r).filter(function(t){return e.has(t)}))}var wP=(function(){function r(e,t){ka(this,r),this.r=e,this.globalOptions=t,this.atlasSize=t.webglTexSize,this.maxAtlasesPerBatch=t.webglTexPerBatch,this.renderTypes=new Map,this.collections=new Map,this.typeAndIdToKey=new Map}return Ca(r,[{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"addAtlasCollection",value:function(t,n){var a=this.globalOptions,i=a.webglTexSize,o=a.createTextureCanvas,u=n.texRows,f=this._cacheScratchCanvas(o),c=new mP(this.r,i,u,f);this.collections.set(t,c)}},{key:"addRenderType",value:function(t,n){var a=n.collection;if(!this.collections.has(a))throw new Error("invalid atlas collection name '".concat(a,"'"));var i=this.collections.get(a),o=et({type:t,atlasCollection:i},n);this.renderTypes.set(t,o)}},{key:"getRenderTypeOpts",value:function(t){return this.renderTypes.get(t)}},{key:"getAtlasCollection",value:function(t){return this.collections.get(t)}},{key:"_cacheScratchCanvas",value:function(t){var n=-1,a=-1,i=null;return function(o,u,f,c){return c?((!i||u!=n||f!=a)&&(n=u,a=f,i=t(o,u,f)),i):t(o,u,f)}}},{key:"_key",value:function(t,n){return"".concat(t,"-").concat(n)}},{key:"invalidate",value:function(t){var n=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=a.forceRedraw,o=i===void 0?!1:i,u=a.filterEle,f=u===void 0?function(){return!0}:u,c=a.filterType,d=c===void 0?function(){return!0}:c,h=!1,p=!1,g=Fr(t),m;try{for(g.s();!(m=g.n()).done;){var w=m.value;if(f(w)){var x=Fr(this.renderTypes.values()),b;try{var _=function(){var C=b.value,B=C.type;if(d(B)){var N=n.collections.get(C.collection),A=C.getKey(w),z=Array.isArray(A)?A:[A];if(o)z.forEach(function(I){return N.markKeyForGC(I)}),p=!0;else{var M=C.getID?C.getID(w):w.id(),V=n._key(B,M),q=n.typeAndIdToKey.get(V);q!==void 0&&!oP(z,q)&&(h=!0,n.typeAndIdToKey.delete(V),q.forEach(function(I){return N.markKeyForGC(I)}))}}};for(x.s();!(b=x.n()).done;)_()}catch(E){x.e(E)}finally{x.f()}}}}catch(E){g.e(E)}finally{g.f()}return p&&(this.gc(),h=!1),h}},{key:"gc",value:function(){var t=Fr(this.collections.values()),n;try{for(t.s();!(n=t.n()).done;){var a=n.value;a.gc()}}catch(i){t.e(i)}finally{t.f()}}},{key:"getOrCreateAtlas",value:function(t,n,a,i){var o=this.renderTypes.get(n),u=this.collections.get(o.collection),f=!1,c=u.draw(i,a,function(p){o.drawClipped?(p.save(),p.beginPath(),p.rect(0,0,a.w,a.h),p.clip(),o.drawElement(p,t,a,!0,!0),p.restore()):o.drawElement(p,t,a,!0,!0),f=!0});if(f){var d=o.getID?o.getID(t):t.id(),h=this._key(n,d);this.typeAndIdToKey.has(h)?this.typeAndIdToKey.get(h).push(i):this.typeAndIdToKey.set(h,[i])}return c}},{key:"getAtlasInfo",value:function(t,n){var a=this,i=this.renderTypes.get(n),o=i.getKey(t),u=Array.isArray(o)?o:[o];return u.map(function(f){var c=i.getBoundingBox(t,f),d=a.getOrCreateAtlas(t,n,c,f),h=d.getOffsets(f),p=Ht(h,2),g=p[0],m=p[1];return{atlas:d,tex:g,tex1:g,tex2:m,bb:c}})}},{key:"getDebugInfo",value:function(){var t=[],n=Fr(this.collections),a;try{for(n.s();!(a=n.n()).done;){var i=Ht(a.value,2),o=i[0],u=i[1],f=u.getCounts(),c=f.keyCount,d=f.atlasCount;t.push({type:o,keyCount:c,atlasCount:d})}}catch(h){n.e(h)}finally{n.f()}return t}}])})(),xP=(function(){function r(e){ka(this,r),this.globalOptions=e,this.atlasSize=e.webglTexSize,this.maxAtlasesPerBatch=e.webglTexPerBatch,this.batchAtlases=[]}return Ca(r,[{key:"getMaxAtlasesPerBatch",value:function(){return this.maxAtlasesPerBatch}},{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"getIndexArray",value:function(){return Array.from({length:this.maxAtlasesPerBatch},function(t,n){return n})}},{key:"startBatch",value:function(){this.batchAtlases=[]}},{key:"getAtlasCount",value:function(){return this.batchAtlases.length}},{key:"getAtlases",value:function(){return this.batchAtlases}},{key:"canAddToCurrentBatch",value:function(t){return this.batchAtlases.length===this.maxAtlasesPerBatch?this.batchAtlases.includes(t):!0}},{key:"getAtlasIndexForBatch",value:function(t){var n=this.batchAtlases.indexOf(t);if(n<0){if(this.batchAtlases.length===this.maxAtlasesPerBatch)throw new Error("cannot add more atlases to batch");this.batchAtlases.push(t),n=this.batchAtlases.length-1}return n}}])})(),bP=`
  float circleSD(vec2 p, float r) {
    return distance(vec2(0), p) - r; // signed distance
  }
`,_P=`
  float rectangleSD(vec2 p, vec2 b) {
    vec2 d = abs(p)-b;
    return distance(vec2(0),max(d,0.0)) + min(max(d.x,d.y),0.0);
  }
`,EP=`
  float roundRectangleSD(vec2 p, vec2 b, vec4 cr) {
    cr.xy = (p.x > 0.0) ? cr.xy : cr.zw;
    cr.x  = (p.y > 0.0) ? cr.x  : cr.y;
    vec2 q = abs(p) - b + cr.x;
    return min(max(q.x, q.y), 0.0) + distance(vec2(0), max(q, 0.0)) - cr.x;
  }
`,SP=`
  float ellipseSD(vec2 p, vec2 ab) {
    p = abs( p ); // symmetry

    // find root with Newton solver
    vec2 q = ab*(p-ab);
    float w = (q.x<q.y)? 1.570796327 : 0.0;
    for( int i=0; i<5; i++ ) {
      vec2 cs = vec2(cos(w),sin(w));
      vec2 u = ab*vec2( cs.x,cs.y);
      vec2 v = ab*vec2(-cs.y,cs.x);
      w = w + dot(p-u,v)/(dot(p-u,u)+dot(v,v));
    }
    
    // compute final point and distance
    float d = length(p-ab*vec2(cos(w),sin(w)));
    
    // return signed distance
    return (dot(p/ab,p/ab)>1.0) ? d : -d;
  }
`,lo={SCREEN:{name:"screen",screen:!0},PICKING:{name:"picking",picking:!0}},Pl={IGNORE:1,USE_BB:2},gh=0,O0=1,M0=2,mh=3,Fi=4,nl=5,eo=6,to=7,kP=(function(){function r(e,t,n){ka(this,r),this.r=e,this.gl=t,this.maxInstances=n.webglBatchSize,this.atlasSize=n.webglTexSize,this.bgColor=n.bgColor,this.debug=n.webglDebug,this.batchDebugInfo=[],n.enableWrapping=!0,n.createTextureCanvas=nP,this.atlasManager=new wP(e,n),this.batchManager=new xP(n),this.simpleShapeOptions=new Map,this.program=this._createShaderProgram(lo.SCREEN),this.pickingProgram=this._createShaderProgram(lo.PICKING),this.vao=this._createVAO()}return Ca(r,[{key:"addAtlasCollection",value:function(t,n){this.atlasManager.addAtlasCollection(t,n)}},{key:"addTextureAtlasRenderType",value:function(t,n){this.atlasManager.addRenderType(t,n)}},{key:"addSimpleShapeRenderType",value:function(t,n){this.simpleShapeOptions.set(t,n)}},{key:"invalidate",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.type,i=this.atlasManager;return a?i.invalidate(t,{filterType:function(u){return u===a},forceRedraw:!0}):i.invalidate(t)}},{key:"gc",value:function(){this.atlasManager.gc()}},{key:"_createShaderProgram",value:function(t){var n=this.gl,a=`#version 300 es
      precision highp float;

      uniform mat3 uPanZoomMatrix;
      uniform int  uAtlasSize;
      
      // instanced
      in vec2 aPosition; // a vertex from the unit square
      
      in mat3 aTransform; // used to transform verticies, eg into a bounding box
      in int aVertType; // the type of thing we are rendering

      // the z-index that is output when using picking mode
      in vec4 aIndex;
      
      // For textures
      in int aAtlasId; // which shader unit/atlas to use
      in vec4 aTex; // x/y/w/h of texture in atlas

      // for edges
      in vec4 aPointAPointB;
      in vec4 aPointCPointD;
      in vec2 aLineWidth; // also used for node border width

      // simple shapes
      in vec4 aCornerRadius; // for round-rectangle [top-right, bottom-right, top-left, bottom-left]
      in vec4 aColor; // also used for edges
      in vec4 aBorderColor; // aLineWidth is used for border width

      // output values passed to the fragment shader
      out vec2 vTexCoord;
      out vec4 vColor;
      out vec2 vPosition;
      // flat values are not interpolated
      flat out int vAtlasId; 
      flat out int vVertType;
      flat out vec2 vTopRight;
      flat out vec2 vBotLeft;
      flat out vec4 vCornerRadius;
      flat out vec4 vBorderColor;
      flat out vec2 vBorderWidth;
      flat out vec4 vIndex;
      
      void main(void) {
        int vid = gl_VertexID;
        vec2 position = aPosition; // TODO make this a vec3, simplifies some code below

        if(aVertType == `.concat(gh,`) {
          float texX = aTex.x; // texture coordinates
          float texY = aTex.y;
          float texW = aTex.z;
          float texH = aTex.w;

          if(vid == 1 || vid == 2 || vid == 4) {
            texX += texW;
          }
          if(vid == 2 || vid == 4 || vid == 5) {
            texY += texH;
          }

          float d = float(uAtlasSize);
          vTexCoord = vec2(texX / d, texY / d); // tex coords must be between 0 and 1

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(Fi," || aVertType == ").concat(to,` 
             || aVertType == `).concat(nl," || aVertType == ").concat(eo,`) { // simple shapes

          // the bounding box is needed by the fragment shader
          vBotLeft  = (aTransform * vec3(0, 0, 1)).xy; // flat
          vTopRight = (aTransform * vec3(1, 1, 1)).xy; // flat
          vPosition = (aTransform * vec3(position, 1)).xy; // will be interpolated

          // calculations are done in the fragment shader, just pass these along
          vColor = aColor;
          vCornerRadius = aCornerRadius;
          vBorderColor = aBorderColor;
          vBorderWidth = aLineWidth;

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(O0,`) {
          vec2 source = aPointAPointB.xy;
          vec2 target = aPointAPointB.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          // stretch the unit square into a long skinny rectangle
          vec2 xBasis = target - source;
          vec2 yBasis = normalize(vec2(-xBasis.y, xBasis.x));
          vec2 point = source + xBasis * position.x + yBasis * aLineWidth[0] * position.y;

          gl_Position = vec4(uPanZoomMatrix * vec3(point, 1.0), 1.0);
          vColor = aColor;
        } 
        else if(aVertType == `).concat(M0,`) {
          vec2 pointA = aPointAPointB.xy;
          vec2 pointB = aPointAPointB.zw;
          vec2 pointC = aPointCPointD.xy;
          vec2 pointD = aPointCPointD.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          vec2 p0, p1, p2, pos;
          if(position.x == 0.0) { // The left side of the unit square
            p0 = pointA;
            p1 = pointB;
            p2 = pointC;
            pos = position;
          } else { // The right side of the unit square, use same approach but flip the geometry upside down
            p0 = pointD;
            p1 = pointC;
            p2 = pointB;
            pos = vec2(0.0, -position.y);
          }

          vec2 p01 = p1 - p0;
          vec2 p12 = p2 - p1;
          vec2 p21 = p1 - p2;

          // Find the normal vector.
          vec2 tangent = normalize(normalize(p12) + normalize(p01));
          vec2 normal = vec2(-tangent.y, tangent.x);

          // Find the vector perpendicular to p0 -> p1.
          vec2 p01Norm = normalize(vec2(-p01.y, p01.x));

          // Determine the bend direction.
          float sigma = sign(dot(p01 + p21, normal));
          float width = aLineWidth[0];

          if(sign(pos.y) == -sigma) {
            // This is an intersecting vertex. Adjust the position so that there's no overlap.
            vec2 point = 0.5 * width * normal * -sigma / dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          } else {
            // This is a non-intersecting vertex. Treat it like a mitre join.
            vec2 point = 0.5 * width * normal * sigma * dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          }

          vColor = aColor;
        } 
        else if(aVertType == `).concat(mh,` && vid < 3) {
          // massage the first triangle into an edge arrow
          if(vid == 0)
            position = vec2(-0.15, -0.3);
          if(vid == 1)
            position = vec2(  0.0,  0.0);
          if(vid == 2)
            position = vec2( 0.15, -0.3);

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
          vColor = aColor;
        }
        else {
          gl_Position = vec4(2.0, 0.0, 0.0, 1.0); // discard vertex by putting it outside webgl clip space
        }

        vAtlasId = aAtlasId;
        vVertType = aVertType;
        vIndex = aIndex;
      }
    `),i=this.batchManager.getIndexArray(),o=`#version 300 es
      precision highp float;

      // declare texture unit for each texture atlas in the batch
      `.concat(i.map(function(c){return"uniform sampler2D uTexture".concat(c,";")}).join(`
	`),`

      uniform vec4 uBGColor;
      uniform float uZoom;

      in vec2 vTexCoord;
      in vec4 vColor;
      in vec2 vPosition; // model coordinates

      flat in int vAtlasId;
      flat in vec4 vIndex;
      flat in int vVertType;
      flat in vec2 vTopRight;
      flat in vec2 vBotLeft;
      flat in vec4 vCornerRadius;
      flat in vec4 vBorderColor;
      flat in vec2 vBorderWidth;

      out vec4 outColor;

      `).concat(bP,`
      `).concat(_P,`
      `).concat(EP,`
      `).concat(SP,`

      vec4 blend(vec4 top, vec4 bot) { // blend colors with premultiplied alpha
        return vec4( 
          top.rgb + (bot.rgb * (1.0 - top.a)),
          top.a   + (bot.a   * (1.0 - top.a)) 
        );
      }

      vec4 distInterp(vec4 cA, vec4 cB, float d) { // interpolate color using Signed Distance
        // scale to the zoom level so that borders don't look blurry when zoomed in
        // note 1.5 is an aribitrary value chosen because it looks good
        return mix(cA, cB, 1.0 - smoothstep(0.0, 1.5 / uZoom, abs(d))); 
      }

      void main(void) {
        if(vVertType == `).concat(gh,`) {
          // look up the texel from the texture unit
          `).concat(i.map(function(c){return"if(vAtlasId == ".concat(c,") outColor = texture(uTexture").concat(c,", vTexCoord);")}).join(`
	else `),`
        } 
        else if(vVertType == `).concat(mh,`) {
          // mimics how canvas renderer uses context.globalCompositeOperation = 'destination-out';
          outColor = blend(vColor, uBGColor);
          outColor.a = 1.0; // make opaque, masks out line under arrow
        }
        else if(vVertType == `).concat(Fi,` && vBorderWidth == vec2(0.0)) { // simple rectangle with no border
          outColor = vColor; // unit square is already transformed to the rectangle, nothing else needs to be done
        }
        else if(vVertType == `).concat(Fi," || vVertType == ").concat(to,` 
          || vVertType == `).concat(nl," || vVertType == ").concat(eo,`) { // use SDF

          float outerBorder = vBorderWidth[0];
          float innerBorder = vBorderWidth[1];
          float borderPadding = outerBorder * 2.0;
          float w = vTopRight.x - vBotLeft.x - borderPadding;
          float h = vTopRight.y - vBotLeft.y - borderPadding;
          vec2 b = vec2(w/2.0, h/2.0); // half width, half height
          vec2 p = vPosition - vec2(vTopRight.x - b[0] - outerBorder, vTopRight.y - b[1] - outerBorder); // translate to center

          float d; // signed distance
          if(vVertType == `).concat(Fi,`) {
            d = rectangleSD(p, b);
          } else if(vVertType == `).concat(to,` && w == h) {
            d = circleSD(p, b.x); // faster than ellipse
          } else if(vVertType == `).concat(to,`) {
            d = ellipseSD(p, b);
          } else {
            d = roundRectangleSD(p, b, vCornerRadius.wzyx);
          }

          // use the distance to interpolate a color to smooth the edges of the shape, doesn't need multisampling
          // we must smooth colors inwards, because we can't change pixels outside the shape's bounding box
          if(d > 0.0) {
            if(d > outerBorder) {
              discard;
            } else {
              outColor = distInterp(vBorderColor, vec4(0), d - outerBorder);
            }
          } else {
            if(d > innerBorder) {
              vec4 outerColor = outerBorder == 0.0 ? vec4(0) : vBorderColor;
              vec4 innerBorderColor = blend(vBorderColor, vColor);
              outColor = distInterp(innerBorderColor, outerColor, d);
            } 
            else {
              vec4 outerColor;
              if(innerBorder == 0.0 && outerBorder == 0.0) {
                outerColor = vec4(0);
              } else if(innerBorder == 0.0) {
                outerColor = vBorderColor;
              } else {
                outerColor = blend(vBorderColor, vColor);
              }
              outColor = distInterp(vColor, outerColor, d - innerBorder);
            }
          }
        }
        else {
          outColor = vColor;
        }

        `).concat(t.picking?`if(outColor.a == 0.0) discard;
             else outColor = vIndex;`:"",`
      }
    `),u=rP(n,a,o);u.aPosition=n.getAttribLocation(u,"aPosition"),u.aIndex=n.getAttribLocation(u,"aIndex"),u.aVertType=n.getAttribLocation(u,"aVertType"),u.aTransform=n.getAttribLocation(u,"aTransform"),u.aAtlasId=n.getAttribLocation(u,"aAtlasId"),u.aTex=n.getAttribLocation(u,"aTex"),u.aPointAPointB=n.getAttribLocation(u,"aPointAPointB"),u.aPointCPointD=n.getAttribLocation(u,"aPointCPointD"),u.aLineWidth=n.getAttribLocation(u,"aLineWidth"),u.aColor=n.getAttribLocation(u,"aColor"),u.aCornerRadius=n.getAttribLocation(u,"aCornerRadius"),u.aBorderColor=n.getAttribLocation(u,"aBorderColor"),u.uPanZoomMatrix=n.getUniformLocation(u,"uPanZoomMatrix"),u.uAtlasSize=n.getUniformLocation(u,"uAtlasSize"),u.uBGColor=n.getUniformLocation(u,"uBGColor"),u.uZoom=n.getUniformLocation(u,"uZoom"),u.uTextures=[];for(var f=0;f<this.batchManager.getMaxAtlasesPerBatch();f++)u.uTextures.push(n.getUniformLocation(u,"uTexture".concat(f)));return u}},{key:"_createVAO",value:function(){var t=[0,0,1,0,1,1,0,0,1,1,0,1];this.vertexCount=t.length/2;var n=this.maxInstances,a=this.gl,i=this.program,o=a.createVertexArray();return a.bindVertexArray(o),cP(a,"vec2",i.aPosition,t),this.transformBuffer=dP(a,n,i.aTransform),this.indexBuffer=_n(a,n,"vec4",i.aIndex),this.vertTypeBuffer=_n(a,n,"int",i.aVertType),this.atlasIdBuffer=_n(a,n,"int",i.aAtlasId),this.texBuffer=_n(a,n,"vec4",i.aTex),this.pointAPointBBuffer=_n(a,n,"vec4",i.aPointAPointB),this.pointCPointDBuffer=_n(a,n,"vec4",i.aPointCPointD),this.lineWidthBuffer=_n(a,n,"vec2",i.aLineWidth),this.colorBuffer=_n(a,n,"vec4",i.aColor),this.cornerRadiusBuffer=_n(a,n,"vec4",i.aCornerRadius),this.borderColorBuffer=_n(a,n,"vec4",i.aBorderColor),a.bindVertexArray(null),o}},{key:"buffers",get:function(){var t=this;return this._buffers||(this._buffers=Object.keys(this).filter(function(n){return va(n,"Buffer")}).map(function(n){return t[n]})),this._buffers}},{key:"startFrame",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:lo.SCREEN;this.panZoomMatrix=t,this.renderTarget=n,this.batchDebugInfo=[],this.wrappedCount=0,this.simpleCount=0,this.startBatch()}},{key:"startBatch",value:function(){this.instanceCount=0,this.batchManager.startBatch()}},{key:"endFrame",value:function(){this.endBatch()}},{key:"_isVisible",value:function(t,n){return t.visible()?n&&n.isVisible?n.isVisible(t):!0:!1}},{key:"drawTexture",value:function(t,n,a){var i=this.atlasManager,o=this.batchManager,u=i.getRenderTypeOpts(a);if(this._isVisible(t,u)&&!(t.isEdge()&&!this._isValidEdge(t))){if(this.renderTarget.picking&&u.getTexPickingMode){var f=u.getTexPickingMode(t);if(f===Pl.IGNORE)return;if(f==Pl.USE_BB){this.drawPickingRectangle(t,n,a);return}}var c=i.getAtlasInfo(t,a),d=Fr(c),h;try{for(d.s();!(h=d.n()).done;){var p=h.value,g=p.atlas,m=p.tex1,w=p.tex2;o.canAddToCurrentBatch(g)||this.endBatch();for(var x=o.getAtlasIndexForBatch(g),b=0,_=[[m,!0],[w,!1]];b<_.length;b++){var E=Ht(_[b],2),C=E[0],B=E[1];if(C.w!=0){var N=this.instanceCount;this.vertTypeBuffer.getView(N)[0]=gh;var A=this.indexBuffer.getView(N);zi(n,A);var z=this.atlasIdBuffer.getView(N);z[0]=x;var M=this.texBuffer.getView(N);M[0]=C.x,M[1]=C.y,M[2]=C.w,M[3]=C.h;var V=this.transformBuffer.getMatrixView(N);this.setTransformMatrix(t,V,u,p,B),this.instanceCount++,B||this.wrappedCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}catch(q){d.e(q)}finally{d.f()}}}},{key:"setTransformMatrix",value:function(t,n,a,i){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,u=0;if(a.shapeProps&&a.shapeProps.padding&&(u=t.pstyle(a.shapeProps.padding).pfValue),i){var f=i.bb,c=i.tex1,d=i.tex2,h=c.w/(c.w+d.w);o||(h=1-h);var p=this._getAdjustedBB(f,u,o,h);this._applyTransformMatrix(n,p,a,t)}else{var g=a.getBoundingBox(t),m=this._getAdjustedBB(g,u,!0,1);this._applyTransformMatrix(n,m,a,t)}}},{key:"_applyTransformMatrix",value:function(t,n,a,i){var o,u;L0(t);var f=a.getRotation?a.getRotation(i):0;if(f!==0){var c=a.getRotationPoint(i),d=c.x,h=c.y;pl(t,t,[d,h]),N0(t,t,f);var p=a.getRotationOffset(i);o=p.x+(n.xOffset||0),u=p.y+(n.yOffset||0)}else o=n.x1,u=n.y1;pl(t,t,[o,u]),zh(t,t,[n.w,n.h])}},{key:"_getAdjustedBB",value:function(t,n,a,i){var o=t.x1,u=t.y1,f=t.w,c=t.h,d=t.yOffset;n&&(o-=n,u-=n,f+=2*n,c+=2*n);var h=0,p=f*i;return a&&i<1?f=p:!a&&i<1&&(h=f-p,o+=h,f=p),{x1:o,y1:u,w:f,h:c,xOffset:h,yOffset:d}}},{key:"drawPickingRectangle",value:function(t,n,a){var i=this.atlasManager.getRenderTypeOpts(a),o=this.instanceCount;this.vertTypeBuffer.getView(o)[0]=Fi;var u=this.indexBuffer.getView(o);zi(n,u);var f=this.colorBuffer.getView(o);Ha([0,0,0],1,f);var c=this.transformBuffer.getMatrixView(o);this.setTransformMatrix(t,c,i),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}},{key:"drawNode",value:function(t,n,a){var i=this.simpleShapeOptions.get(a);if(this._isVisible(t,i)){var o=i.shapeProps,u=this._getVertTypeForShape(t,o.shape);if(u===void 0||i.isSimple&&!i.isSimple(t)){this.drawTexture(t,n,a);return}var f=this.instanceCount;if(this.vertTypeBuffer.getView(f)[0]=u,u===nl||u===eo){var c=i.getBoundingBox(t),d=this._getCornerRadius(t,o.radius,c),h=this.cornerRadiusBuffer.getView(f);h[0]=d,h[1]=d,h[2]=d,h[3]=d,u===eo&&(h[0]=0,h[2]=0)}var p=this.indexBuffer.getView(f);zi(n,p);var g=t.pstyle(o.color).value,m=t.pstyle(o.opacity).value,w=this.colorBuffer.getView(f);Ha(g,m,w);var x=this.lineWidthBuffer.getView(f);if(x[0]=0,x[1]=0,o.border){var b=t.pstyle("border-width").value;if(b>0){var _=t.pstyle("border-color").value,E=t.pstyle("border-opacity").value,C=this.borderColorBuffer.getView(f);Ha(_,E,C);var B=t.pstyle("border-position").value;if(B==="inside")x[0]=0,x[1]=-b;else if(B==="outside")x[0]=b,x[1]=0;else{var N=b/2;x[0]=N,x[1]=-N}}}var A=this.transformBuffer.getMatrixView(f);this.setTransformMatrix(t,A,i),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}},{key:"_getVertTypeForShape",value:function(t,n){var a=t.pstyle(n).value;switch(a){case"rectangle":return Fi;case"ellipse":return to;case"roundrectangle":case"round-rectangle":return nl;case"bottom-round-rectangle":return eo;default:return}}},{key:"_getCornerRadius",value:function(t,n,a){var i=a.w,o=a.h;if(t.pstyle(n).value==="auto")return ba(i,o);var u=t.pstyle(n).pfValue,f=i/2,c=o/2;return Math.min(u,c,f)}},{key:"drawEdgeArrow",value:function(t,n,a){if(t.visible()){var i=t._private.rscratch,o,u,f;if(a==="source"?(o=i.arrowStartX,u=i.arrowStartY,f=i.srcArrowAngle):(o=i.arrowEndX,u=i.arrowEndY,f=i.tgtArrowAngle),!(isNaN(o)||o==null||isNaN(u)||u==null||isNaN(f)||f==null)){var c=t.pstyle(a+"-arrow-shape").value;if(c!=="none"){var d=t.pstyle(a+"-arrow-color").value,h=t.pstyle("opacity").value,p=t.pstyle("line-opacity").value,g=h*p,m=t.pstyle("width").pfValue,w=t.pstyle("arrow-scale").value,x=this.r.getArrowWidth(m,w),b=this.instanceCount,_=this.transformBuffer.getMatrixView(b);L0(_),pl(_,_,[o,u]),zh(_,_,[x,x]),N0(_,_,f),this.vertTypeBuffer.getView(b)[0]=mh;var E=this.indexBuffer.getView(b);zi(n,E);var C=this.colorBuffer.getView(b);Ha(d,g,C),this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"drawEdgeLine",value:function(t,n){if(t.visible()){var a=this._getEdgePoints(t);if(a){var i=t.pstyle("opacity").value,o=t.pstyle("line-opacity").value,u=t.pstyle("width").pfValue,f=t.pstyle("line-color").value,c=i*o;if(a.length/2+this.instanceCount>this.maxInstances&&this.endBatch(),a.length==4){var d=this.instanceCount;this.vertTypeBuffer.getView(d)[0]=O0;var h=this.indexBuffer.getView(d);zi(n,h);var p=this.colorBuffer.getView(d);Ha(f,c,p);var g=this.lineWidthBuffer.getView(d);g[0]=u;var m=this.pointAPointBBuffer.getView(d);m[0]=a[0],m[1]=a[1],m[2]=a[2],m[3]=a[3],this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}else for(var w=0;w<a.length-2;w+=2){var x=this.instanceCount;this.vertTypeBuffer.getView(x)[0]=M0;var b=this.indexBuffer.getView(x);zi(n,b);var _=this.colorBuffer.getView(x);Ha(f,c,_);var E=this.lineWidthBuffer.getView(x);E[0]=u;var C=a[w-2],B=a[w-1],N=a[w],A=a[w+1],z=a[w+2],M=a[w+3],V=a[w+4],q=a[w+5];w==0&&(C=2*N-z+.001,B=2*A-M+.001),w==a.length-4&&(V=2*z-N+.001,q=2*M-A+.001);var I=this.pointAPointBBuffer.getView(x);I[0]=C,I[1]=B,I[2]=N,I[3]=A;var F=this.pointCPointDBuffer.getView(x);F[0]=z,F[1]=M,F[2]=V,F[3]=q,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"_isValidEdge",value:function(t){var n=t._private.rscratch;return!(n.badLine||n.allpts==null||isNaN(n.allpts[0]))}},{key:"_getEdgePoints",value:function(t){var n=t._private.rscratch;if(this._isValidEdge(t)){var a=n.allpts;if(a.length==4)return a;var i=this._getNumSegments(t);return this._getCurveSegmentPoints(a,i)}}},{key:"_getNumSegments",value:function(t){var n=15;return Math.min(Math.max(n,5),this.maxInstances)}},{key:"_getCurveSegmentPoints",value:function(t,n){if(t.length==4)return t;for(var a=Array((n+1)*2),i=0;i<=n;i++)if(i==0)a[0]=t[0],a[1]=t[1];else if(i==n)a[i*2]=t[t.length-2],a[i*2+1]=t[t.length-1];else{var o=i/n;this._setCurvePoint(t,o,a,i*2)}return a}},{key:"_setCurvePoint",value:function(t,n,a,i){if(t.length<=2)a[i]=t[0],a[i+1]=t[1];else{for(var o=Array(t.length-2),u=0;u<o.length;u+=2){var f=(1-n)*t[u]+n*t[u+2],c=(1-n)*t[u+1]+n*t[u+3];o[u]=f,o[u+1]=c}return this._setCurvePoint(o,n,a,i)}}},{key:"endBatch",value:function(){var t=this.gl,n=this.vao,a=this.vertexCount,i=this.instanceCount;if(i!==0){var o=this.renderTarget.picking?this.pickingProgram:this.program;t.useProgram(o),t.bindVertexArray(n);var u=Fr(this.buffers),f;try{for(u.s();!(f=u.n()).done;){var c=f.value;c.bufferSubData(i)}}catch(m){u.e(m)}finally{u.f()}for(var d=this.batchManager.getAtlases(),h=0;h<d.length;h++)d[h].bufferIfNeeded(t);for(var p=0;p<d.length;p++)t.activeTexture(t.TEXTURE0+p),t.bindTexture(t.TEXTURE_2D,d[p].texture),t.uniform1i(o.uTextures[p],p);t.uniform1f(o.uZoom,aP(this.r)),t.uniformMatrix3fv(o.uPanZoomMatrix,!1,this.panZoomMatrix),t.uniform1i(o.uAtlasSize,this.batchManager.getAtlasSize());var g=Ha(this.bgColor,1);t.uniform4fv(o.uBGColor,g),t.drawArraysInstanced(t.TRIANGLES,0,a,i),t.bindVertexArray(null),t.bindTexture(t.TEXTURE_2D,null),this.debug&&this.batchDebugInfo.push({count:i,atlasCount:d.length}),this.startBatch()}}},{key:"getDebugInfo",value:function(){var t=this.atlasManager.getDebugInfo(),n=t.reduce(function(o,u){return o+u.atlasCount},0),a=this.batchDebugInfo,i=a.reduce(function(o,u){return o+u.count},0);return{atlasInfo:t,totalAtlases:n,wrappedCount:this.wrappedCount,simpleCount:this.simpleCount,batchCount:a.length,batchInfo:a,totalInstances:i}}}])})(),Mw={};Mw.initWebgl=function(r,e){var t=this,n=t.data.contexts[t.WEBGL];r.bgColor=CP(t),r.webglTexSize=Math.min(r.webglTexSize,n.getParameter(n.MAX_TEXTURE_SIZE)),r.webglTexRows=Math.min(r.webglTexRows,54),r.webglTexRowsNodes=Math.min(r.webglTexRowsNodes,54),r.webglBatchSize=Math.min(r.webglBatchSize,16384),r.webglTexPerBatch=Math.min(r.webglTexPerBatch,n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)),t.webglDebug=r.webglDebug,t.webglDebugShowAtlases=r.webglDebugShowAtlases,t.pickingFrameBuffer=hP(n),t.pickingFrameBuffer.needsDraw=!0,t.drawing=new kP(t,n,r);var a=function(h){return function(p){return t.getTextAngle(p,h)}},i=function(h){return function(p){var g=p.pstyle(h);return g&&g.value}},o=function(h){return function(p){return p.pstyle("".concat(h,"-opacity")).value>0}},u=function(h){var p=h.pstyle("text-events").strValue==="yes";return p?Pl.USE_BB:Pl.IGNORE},f=function(h){var p=h.position(),g=p.x,m=p.y,w=h.outerWidth(),x=h.outerHeight();return{w,h:x,x1:g-w/2,y1:m-x/2}};t.drawing.addAtlasCollection("node",{texRows:r.webglTexRowsNodes}),t.drawing.addAtlasCollection("label",{texRows:r.webglTexRows}),t.drawing.addTextureAtlasRenderType("node-body",{collection:"node",getKey:e.getStyleKey,getBoundingBox:e.getElementBox,drawElement:e.drawElement}),t.drawing.addSimpleShapeRenderType("node-body",{getBoundingBox:f,isSimple:sP,shapeProps:{shape:"shape",color:"background-color",opacity:"background-opacity",radius:"corner-radius",border:!0}}),t.drawing.addSimpleShapeRenderType("node-overlay",{getBoundingBox:f,isVisible:o("overlay"),shapeProps:{shape:"overlay-shape",color:"overlay-color",opacity:"overlay-opacity",padding:"overlay-padding",radius:"overlay-corner-radius"}}),t.drawing.addSimpleShapeRenderType("node-underlay",{getBoundingBox:f,isVisible:o("underlay"),shapeProps:{shape:"underlay-shape",color:"underlay-color",opacity:"underlay-opacity",padding:"underlay-padding",radius:"underlay-corner-radius"}}),t.drawing.addTextureAtlasRenderType("label",{collection:"label",getTexPickingMode:u,getKey:yh(e.getLabelKey,null),getBoundingBox:wh(e.getLabelBox,null),drawClipped:!0,drawElement:e.drawLabel,getRotation:a(null),getRotationPoint:e.getLabelRotationPoint,getRotationOffset:e.getLabelRotationOffset,isVisible:i("label")}),t.drawing.addTextureAtlasRenderType("edge-source-label",{collection:"label",getTexPickingMode:u,getKey:yh(e.getSourceLabelKey,"source"),getBoundingBox:wh(e.getSourceLabelBox,"source"),drawClipped:!0,drawElement:e.drawSourceLabel,getRotation:a("source"),getRotationPoint:e.getSourceLabelRotationPoint,getRotationOffset:e.getSourceLabelRotationOffset,isVisible:i("source-label")}),t.drawing.addTextureAtlasRenderType("edge-target-label",{collection:"label",getTexPickingMode:u,getKey:yh(e.getTargetLabelKey,"target"),getBoundingBox:wh(e.getTargetLabelBox,"target"),drawClipped:!0,drawElement:e.drawTargetLabel,getRotation:a("target"),getRotationPoint:e.getTargetLabelRotationPoint,getRotationOffset:e.getTargetLabelRotationOffset,isVisible:i("target-label")});var c=Po(function(){console.log("garbage collect flag set"),t.data.gc=!0},1e4);t.onUpdateEleCalcs(function(d,h){var p=!1;h&&h.length>0&&(p|=t.drawing.invalidate(h)),p&&c()}),TP(t)};function CP(r){var e=r.cy.container(),t=e&&e.style&&e.style.backgroundColor||"white";return c1(t)}function zw(r,e){var t=r._private.rscratch;return Mr(t,"labelWrapCachedLines",e)||[]}var yh=function(e,t){return function(n){var a=e(n),i=zw(n,t);return i.length>1?i.map(function(o,u){return"".concat(a,"_").concat(u)}):a}},wh=function(e,t){return function(n,a){var i=e(n);if(typeof a=="string"){var o=a.indexOf("_");if(o>0){var u=Number(a.substring(o+1)),f=zw(n,t),c=i.h/f.length,d=c*u,h=i.y1+d;return{x1:i.x1,w:i.w,y1:h,h:c,yOffset:d}}}return i}};function TP(r){{var e=r.render;r.render=function(i){i=i||{};var o=r.cy;r.webgl&&(o.zoom()>Bw?(PP(r),e.call(r,i)):(RP(r),Uw(r,i,lo.SCREEN)))}}{var t=r.matchCanvasSize;r.matchCanvasSize=function(i){t.call(r,i),r.pickingFrameBuffer.setFramebufferAttachmentSizes(r.canvasWidth,r.canvasHeight),r.pickingFrameBuffer.needsDraw=!0}}r.findNearestElements=function(i,o,u,f){return NP(r,i,o)};{var n=r.invalidateCachedZSortedEles;r.invalidateCachedZSortedEles=function(){n.call(r),r.pickingFrameBuffer.needsDraw=!0}}{var a=r.notify;r.notify=function(i,o){a.call(r,i,o),i==="viewport"||i==="bounds"?r.pickingFrameBuffer.needsDraw=!0:i==="background"&&r.drawing.invalidate(o,{type:"node-body"})}}}function PP(r){var e=r.data.contexts[r.WEBGL];e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)}function RP(r){var e=function(n){n.save(),n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,r.canvasWidth,r.canvasHeight),n.restore()};e(r.data.contexts[r.NODE]),e(r.data.contexts[r.DRAG])}function BP(r){var e=r.canvasWidth,t=r.canvasHeight,n=vv(r),a=n.pan,i=n.zoom,o=ph();pl(o,o,[a.x,a.y]),zh(o,o,[i,i]);var u=ph();pP(u,e,t);var f=ph();return vP(f,u,o),f}function Fw(r,e){var t=r.canvasWidth,n=r.canvasHeight,a=vv(r),i=a.pan,o=a.zoom;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t,n),e.translate(i.x,i.y),e.scale(o,o)}function AP(r,e){r.drawSelectionRectangle(e,function(t){return Fw(r,t)})}function DP(r){var e=r.data.contexts[r.NODE];e.save(),Fw(r,e),e.strokeStyle="rgba(0, 0, 0, 0.3)",e.beginPath(),e.moveTo(-1e3,0),e.lineTo(1e3,0),e.stroke(),e.beginPath(),e.moveTo(0,-1e3),e.lineTo(0,1e3),e.stroke(),e.restore()}function IP(r){var e=function(a,i,o){for(var u=a.atlasManager.getAtlasCollection(i),f=r.data.contexts[r.NODE],c=u.atlases,d=0;d<c.length;d++){var h=c[d],p=h.canvas;if(p){var g=p.width,m=p.height,w=g*d,x=p.height*o,b=.4;f.save(),f.scale(b,b),f.drawImage(p,w,x),f.strokeStyle="black",f.rect(w,x,g,m),f.stroke(),f.restore()}}},t=0;e(r.drawing,"node",t++),e(r.drawing,"label",t++)}function LP(r,e,t,n,a){var i,o,u,f,c=vv(r),d=c.pan,h=c.zoom;{var p=iP(r,d,h,e,t),g=Ht(p,2),m=g[0],w=g[1],x=6;i=m-x/2,o=w-x/2,u=x,f=x}if(u===0||f===0)return[];var b=r.data.contexts[r.WEBGL];b.bindFramebuffer(b.FRAMEBUFFER,r.pickingFrameBuffer),r.pickingFrameBuffer.needsDraw&&(b.viewport(0,0,b.canvas.width,b.canvas.height),Uw(r,null,lo.PICKING),r.pickingFrameBuffer.needsDraw=!1);var _=u*f,E=new Uint8Array(_*4);b.readPixels(i,o,u,f,b.RGBA,b.UNSIGNED_BYTE,E),b.bindFramebuffer(b.FRAMEBUFFER,null);for(var C=new Set,B=0;B<_;B++){var N=E.slice(B*4,B*4+4),A=uP(N)-1;A>=0&&C.add(A)}return C}function NP(r,e,t){var n=LP(r,e,t),a=r.getCachedZSortedEles(),i,o,u=Fr(n),f;try{for(u.s();!(f=u.n()).done;){var c=f.value,d=a[c];if(!i&&d.isNode()&&(i=d),!o&&d.isEdge()&&(o=d),i&&o)break}}catch(h){u.e(h)}finally{u.f()}return[i,o].filter(Boolean)}function xh(r,e,t){var n=r.drawing;e+=1,t.isNode()?(n.drawNode(t,e,"node-underlay"),n.drawNode(t,e,"node-body"),n.drawTexture(t,e,"label"),n.drawNode(t,e,"node-overlay")):(n.drawEdgeLine(t,e),n.drawEdgeArrow(t,e,"source"),n.drawEdgeArrow(t,e,"target"),n.drawTexture(t,e,"label"),n.drawTexture(t,e,"edge-source-label"),n.drawTexture(t,e,"edge-target-label"))}function Uw(r,e,t){var n;r.webglDebug&&(n=performance.now());var a=r.drawing,i=0;if(t.screen&&r.data.canvasNeedsRedraw[r.SELECT_BOX]&&AP(r,e),r.data.canvasNeedsRedraw[r.NODE]||t.picking){var o=r.data.contexts[r.WEBGL];t.screen?(o.clearColor(0,0,0,0),o.enable(o.BLEND),o.blendFunc(o.ONE,o.ONE_MINUS_SRC_ALPHA)):o.disable(o.BLEND),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT),o.viewport(0,0,o.canvas.width,o.canvas.height);var u=BP(r),f=r.getCachedZSortedEles();if(i=f.length,a.startFrame(u,t),t.screen){for(var c=0;c<f.nondrag.length;c++)xh(r,c,f.nondrag[c]);for(var d=0;d<f.drag.length;d++)xh(r,d,f.drag[d])}else if(t.picking)for(var h=0;h<f.length;h++)xh(r,h,f[h]);a.endFrame(),t.screen&&r.webglDebugShowAtlases&&(DP(r),IP(r)),r.data.canvasNeedsRedraw[r.NODE]=!1,r.data.canvasNeedsRedraw[r.DRAG]=!1}if(r.webglDebug){var p=performance.now(),g=!1,m=Math.ceil(p-n),w=a.getDebugInfo(),x=["".concat(i," elements"),"".concat(w.totalInstances," instances"),"".concat(w.batchCount," batches"),"".concat(w.totalAtlases," atlases"),"".concat(w.wrappedCount," wrapped textures"),"".concat(w.simpleCount," simple shapes")].join(", ");if(g)console.log("WebGL (".concat(t.name,") - time ").concat(m,"ms, ").concat(x));else{console.log("WebGL (".concat(t.name,") - frame time ").concat(m,"ms")),console.log("Totals:"),console.log("  ".concat(x)),console.log("Texture Atlases Used:");var b=w.atlasInfo,_=Fr(b),E;try{for(_.s();!(E=_.n()).done;){var C=E.value;console.log("  ".concat(C.type,": ").concat(C.keyCount," keys, ").concat(C.atlasCount," atlases"))}}catch(B){_.e(B)}finally{_.f()}console.log("")}}r.data.gc&&(console.log("Garbage Collect!"),r.data.gc=!1,a.gc())}var Ra={};Ra.drawPolygonPath=function(r,e,t,n,a,i){var o=n/2,u=a/2;r.beginPath&&r.beginPath(),r.moveTo(e+o*i[0],t+u*i[1]);for(var f=1;f<i.length/2;f++)r.lineTo(e+o*i[f*2],t+u*i[f*2+1]);r.closePath()};Ra.drawRoundPolygonPath=function(r,e,t,n,a,i,o){o.forEach(function(u){return bw(r,u)}),r.closePath()};Ra.drawRoundRectanglePath=function(r,e,t,n,a,i){var o=n/2,u=a/2,f=i==="auto"?ba(n,a):Math.min(i,u,o);r.beginPath&&r.beginPath(),r.moveTo(e,t-u),r.arcTo(e+o,t-u,e+o,t,f),r.arcTo(e+o,t+u,e,t+u,f),r.arcTo(e-o,t+u,e-o,t,f),r.arcTo(e-o,t-u,e,t-u,f),r.lineTo(e,t-u),r.closePath()};Ra.drawBottomRoundRectanglePath=function(r,e,t,n,a,i){var o=n/2,u=a/2,f=i==="auto"?ba(n,a):i;r.beginPath&&r.beginPath(),r.moveTo(e,t-u),r.lineTo(e+o,t-u),r.lineTo(e+o,t),r.arcTo(e+o,t+u,e,t+u,f),r.arcTo(e-o,t+u,e-o,t,f),r.lineTo(e-o,t-u),r.lineTo(e,t-u),r.closePath()};Ra.drawCutRectanglePath=function(r,e,t,n,a,i,o){var u=n/2,f=a/2,c=o==="auto"?ev():o;r.beginPath&&r.beginPath(),r.moveTo(e-u+c,t-f),r.lineTo(e+u-c,t-f),r.lineTo(e+u,t-f+c),r.lineTo(e+u,t+f-c),r.lineTo(e+u-c,t+f),r.lineTo(e-u+c,t+f),r.lineTo(e-u,t+f-c),r.lineTo(e-u,t-f+c),r.closePath()};Ra.drawBarrelPath=function(r,e,t,n,a){var i=n/2,o=a/2,u=e-i,f=e+i,c=t-o,d=t+o,h=Sh(n,a),p=h.widthOffset,g=h.heightOffset,m=h.ctrlPtOffsetPct*p;r.beginPath&&r.beginPath(),r.moveTo(u,c+g),r.lineTo(u,d-g),r.quadraticCurveTo(u+m,d,u+p,d),r.lineTo(f-p,d),r.quadraticCurveTo(f-m,d,f,d-g),r.lineTo(f,c+g),r.quadraticCurveTo(f-m,c,f-p,c),r.lineTo(u+p,c),r.quadraticCurveTo(u+m,c,u,c+g),r.closePath()};var z0=Math.sin(0),F0=Math.cos(0),Fh={},Uh={},$w=Math.PI/40;for(var Ui=0*Math.PI;Ui<2*Math.PI;Ui+=$w)Fh[Ui]=Math.sin(Ui),Uh[Ui]=Math.cos(Ui);Ra.drawEllipsePath=function(r,e,t,n,a){if(r.beginPath&&r.beginPath(),r.ellipse)r.ellipse(e,t,n/2,a/2,0,0,2*Math.PI);else for(var i,o,u=n/2,f=a/2,c=0*Math.PI;c<2*Math.PI;c+=$w)i=e-u*Fh[c]*z0+u*Uh[c]*F0,o=t+f*Uh[c]*z0+f*Fh[c]*F0,c===0?r.moveTo(i,o):r.lineTo(i,o);r.closePath()};var Lo={};Lo.createBuffer=function(r,e){var t=document.createElement("canvas");return t.width=r,t.height=e,[t,t.getContext("2d")]};Lo.bufferCanvasImage=function(r){var e=this.cy,t=e.mutableElements(),n=t.boundingBox(),a=this.findContainerClientCoords(),i=r.full?Math.ceil(n.w):a[2],o=r.full?Math.ceil(n.h):a[3],u=Ue(r.maxWidth)||Ue(r.maxHeight),f=this.getPixelRatio(),c=1;if(r.scale!==void 0)i*=r.scale,o*=r.scale,c=r.scale;else if(u){var d=1/0,h=1/0;Ue(r.maxWidth)&&(d=c*r.maxWidth/i),Ue(r.maxHeight)&&(h=c*r.maxHeight/o),c=Math.min(d,h),i*=c,o*=c}u||(i*=f,o*=f,c*=f);var p=document.createElement("canvas");p.width=i,p.height=o,p.style.width=i+"px",p.style.height=o+"px";var g=p.getContext("2d");if(i>0&&o>0){g.clearRect(0,0,i,o),g.globalCompositeOperation="source-over";var m=this.getCachedZSortedEles();if(r.full)g.translate(-n.x1*c,-n.y1*c),g.scale(c,c),this.drawElements(g,m),g.scale(1/c,1/c),g.translate(n.x1*c,n.y1*c);else{var w=e.pan(),x={x:w.x*c,y:w.y*c};c*=e.zoom(),g.translate(x.x,x.y),g.scale(c,c),this.drawElements(g,m),g.scale(1/c,1/c),g.translate(-x.x,-x.y)}r.bg&&(g.globalCompositeOperation="destination-over",g.fillStyle=r.bg,g.rect(0,0,i,o),g.fill())}return p};function OP(r,e){for(var t=atob(r),n=new ArrayBuffer(t.length),a=new Uint8Array(n),i=0;i<t.length;i++)a[i]=t.charCodeAt(i);return new Blob([n],{type:e})}function U0(r){var e=r.indexOf(",");return r.substr(e+1)}function Vw(r,e,t){var n=function(){return e.toDataURL(t,r.quality)};switch(r.output){case"blob-promise":return new es(function(a,i){try{e.toBlob(function(o){o!=null?a(o):i(new Error("`canvas.toBlob()` sent a null value in its callback"))},t,r.quality)}catch(o){i(o)}});case"blob":return OP(U0(n()),t);case"base64":return U0(n());case"base64uri":default:return n()}}Lo.png=function(r){return Vw(r,this.bufferCanvasImage(r),"image/png")};Lo.jpg=function(r){return Vw(r,this.bufferCanvasImage(r),"image/jpeg")};var jw={};jw.nodeShapeImpl=function(r,e,t,n,a,i,o,u){switch(r){case"ellipse":return this.drawEllipsePath(e,t,n,a,i);case"polygon":return this.drawPolygonPath(e,t,n,a,i,o);case"round-polygon":return this.drawRoundPolygonPath(e,t,n,a,i,o,u);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(e,t,n,a,i,u);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(e,t,n,a,i,o,u);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(e,t,n,a,i,u);case"barrel":return this.drawBarrelPath(e,t,n,a,i)}};var MP=qw,ot=qw.prototype;ot.CANVAS_LAYERS=3;ot.SELECT_BOX=0;ot.DRAG=1;ot.NODE=2;ot.WEBGL=3;ot.CANVAS_TYPES=["2d","2d","2d","webgl2"];ot.BUFFER_COUNT=3;ot.TEXTURE_BUFFER=0;ot.MOTIONBLUR_BUFFER_NODE=1;ot.MOTIONBLUR_BUFFER_DRAG=2;function qw(r){var e=this,t=e.cy.window(),n=t.document;r.webgl&&(ot.CANVAS_LAYERS=e.CANVAS_LAYERS=4,console.log("webgl rendering enabled")),e.data={canvases:new Array(ot.CANVAS_LAYERS),contexts:new Array(ot.CANVAS_LAYERS),canvasNeedsRedraw:new Array(ot.CANVAS_LAYERS),bufferCanvases:new Array(ot.BUFFER_COUNT),bufferContexts:new Array(ot.CANVAS_LAYERS)};var a="-webkit-tap-highlight-color",i="rgba(0,0,0,0)";e.data.canvasContainer=n.createElement("div");var o=e.data.canvasContainer.style;e.data.canvasContainer.style[a]=i,o.position="relative",o.zIndex="0",o.overflow="hidden";var u=r.cy.container();u.appendChild(e.data.canvasContainer),u.style[a]=i;var f={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};A_()&&(f["-ms-touch-action"]="none",f["touch-action"]="none");for(var c=0;c<ot.CANVAS_LAYERS;c++){var d=e.data.canvases[c]=n.createElement("canvas"),h=ot.CANVAS_TYPES[c];e.data.contexts[c]=d.getContext(h),e.data.contexts[c]||At("Could not create canvas of type "+h),Object.keys(f).forEach(function(ge){d.style[ge]=f[ge]}),d.style.position="absolute",d.setAttribute("data-id","layer"+c),d.style.zIndex=String(ot.CANVAS_LAYERS-c),e.data.canvasContainer.appendChild(d),e.data.canvasNeedsRedraw[c]=!1}e.data.topCanvas=e.data.canvases[0],e.data.canvases[ot.NODE].setAttribute("data-id","layer"+ot.NODE+"-node"),e.data.canvases[ot.SELECT_BOX].setAttribute("data-id","layer"+ot.SELECT_BOX+"-selectbox"),e.data.canvases[ot.DRAG].setAttribute("data-id","layer"+ot.DRAG+"-drag"),e.data.canvases[ot.WEBGL]&&e.data.canvases[ot.WEBGL].setAttribute("data-id","layer"+ot.WEBGL+"-webgl");for(var c=0;c<ot.BUFFER_COUNT;c++)e.data.bufferCanvases[c]=n.createElement("canvas"),e.data.bufferContexts[c]=e.data.bufferCanvases[c].getContext("2d"),e.data.bufferCanvases[c].style.position="absolute",e.data.bufferCanvases[c].setAttribute("data-id","buffer"+c),e.data.bufferCanvases[c].style.zIndex=String(-c-1),e.data.bufferCanvases[c].style.visibility="hidden";e.pathsEnabled=!0;var p=Rr(),g=function(fe){return{x:(fe.x1+fe.x2)/2,y:(fe.y1+fe.y2)/2}},m=function(fe){return{x:-fe.w/2,y:-fe.h/2}},w=function(fe){var de=fe[0]._private,be=de.oldBackgroundTimestamp===de.backgroundTimestamp;return!be},x=function(fe){return fe[0]._private.nodeKey},b=function(fe){return fe[0]._private.labelStyleKey},_=function(fe){return fe[0]._private.sourceLabelStyleKey},E=function(fe){return fe[0]._private.targetLabelStyleKey},C=function(fe,de,be,Pe,D){return e.drawElement(fe,de,be,!1,!1,D)},B=function(fe,de,be,Pe,D){return e.drawElementText(fe,de,be,Pe,"main",D)},N=function(fe,de,be,Pe,D){return e.drawElementText(fe,de,be,Pe,"source",D)},A=function(fe,de,be,Pe,D){return e.drawElementText(fe,de,be,Pe,"target",D)},z=function(fe){return fe.boundingBox(),fe[0]._private.bodyBounds},M=function(fe){return fe.boundingBox(),fe[0]._private.labelBounds.main||p},V=function(fe){return fe.boundingBox(),fe[0]._private.labelBounds.source||p},q=function(fe){return fe.boundingBox(),fe[0]._private.labelBounds.target||p},I=function(fe,de){return de},F=function(fe){return g(z(fe))},T=function(fe,de,be){var Pe=fe?fe+"-":"";return{x:de.x+be.pstyle(Pe+"text-margin-x").pfValue,y:de.y+be.pstyle(Pe+"text-margin-y").pfValue}},H=function(fe,de,be){var Pe=fe[0]._private.rscratch;return{x:Pe[de],y:Pe[be]}},Q=function(fe){return T("",H(fe,"labelX","labelY"),fe)},W=function(fe){return T("source",H(fe,"sourceLabelX","sourceLabelY"),fe)},Z=function(fe){return T("target",H(fe,"targetLabelX","targetLabelY"),fe)},X=function(fe){return m(z(fe))},te=function(fe){return m(V(fe))},L=function(fe){return m(q(fe))},U=function(fe){var de=M(fe),be=m(M(fe));if(fe.isNode()){switch(fe.pstyle("text-halign").value){case"left":be.x=-de.w-(de.leftPad||0);break;case"right":be.x=-(de.rightPad||0);break}switch(fe.pstyle("text-valign").value){case"top":be.y=-de.h-(de.topPad||0);break;case"bottom":be.y=-(de.botPad||0);break}}return be},oe=e.data.eleTxrCache=new io(e,{getKey:x,doesEleInvalidateKey:w,drawElement:C,getBoundingBox:z,getRotationPoint:F,getRotationOffset:X,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),ie=e.data.lblTxrCache=new io(e,{getKey:b,drawElement:B,getBoundingBox:M,getRotationPoint:Q,getRotationOffset:U,isVisible:I}),ne=e.data.slbTxrCache=new io(e,{getKey:_,drawElement:N,getBoundingBox:V,getRotationPoint:W,getRotationOffset:te,isVisible:I}),we=e.data.tlbTxrCache=new io(e,{getKey:E,drawElement:A,getBoundingBox:q,getRotationPoint:Z,getRotationOffset:L,isVisible:I}),Te=e.data.lyrTxrCache=new Aw(e);e.onUpdateEleCalcs(function(fe,de){oe.invalidateElements(de),ie.invalidateElements(de),ne.invalidateElements(de),we.invalidateElements(de),Te.invalidateElements(de);for(var be=0;be<de.length;be++){var Pe=de[be]._private;Pe.oldBackgroundTimestamp=Pe.backgroundTimestamp}});var ke=function(fe){for(var de=0;de<fe.length;de++)Te.enqueueElementRefinement(fe[de].ele)};oe.onDequeue(ke),ie.onDequeue(ke),ne.onDequeue(ke),we.onDequeue(ke),r.webgl&&e.initWebgl(r,{getStyleKey:x,getLabelKey:b,getSourceLabelKey:_,getTargetLabelKey:E,drawElement:C,drawLabel:B,drawSourceLabel:N,drawTargetLabel:A,getElementBox:z,getLabelBox:M,getSourceLabelBox:V,getTargetLabelBox:q,getElementRotationPoint:F,getElementRotationOffset:X,getLabelRotationPoint:Q,getSourceLabelRotationPoint:W,getTargetLabelRotationPoint:Z,getLabelRotationOffset:U,getSourceLabelRotationOffset:te,getTargetLabelRotationOffset:L})}ot.redrawHint=function(r,e){var t=this;switch(r){case"eles":t.data.canvasNeedsRedraw[ot.NODE]=e;break;case"drag":t.data.canvasNeedsRedraw[ot.DRAG]=e;break;case"select":t.data.canvasNeedsRedraw[ot.SELECT_BOX]=e;break;case"gc":t.data.gc=!0;break}};var zP=typeof Path2D<"u";ot.path2dEnabled=function(r){if(r===void 0)return this.pathsEnabled;this.pathsEnabled=!!r};ot.usePaths=function(){return zP&&this.pathsEnabled};ot.setImgSmoothing=function(r,e){r.imageSmoothingEnabled!=null?r.imageSmoothingEnabled=e:(r.webkitImageSmoothingEnabled=e,r.mozImageSmoothingEnabled=e,r.msImageSmoothingEnabled=e)};ot.getImgSmoothing=function(r){return r.imageSmoothingEnabled!=null?r.imageSmoothingEnabled:r.webkitImageSmoothingEnabled||r.mozImageSmoothingEnabled||r.msImageSmoothingEnabled};ot.makeOffscreenCanvas=function(r,e){var t;if((typeof OffscreenCanvas>"u"?"undefined":Qt(OffscreenCanvas))!=="undefined")t=new OffscreenCanvas(r,e);else{var n=this.cy.window(),a=n.document;t=a.createElement("canvas"),t.width=r,t.height=e}return t};[Dw,Pn,jn,hv,ii,Pa,Br,Mw,Ra,Lo,jw].forEach(function(r){et(ot,r)});var FP=[{name:"null",impl:yw},{name:"base",impl:Pw},{name:"canvas",impl:MP}],UP=[{type:"layout",extensions:cT},{type:"renderer",extensions:FP}],Ww={},Hw={};function Gw(r,e,t){var n=t,a=function(z){gt("Can not register `"+e+"` for `"+r+"` since `"+z+"` already exists in the prototype and can not be overridden")};if(r==="core"){if(wo.prototype[e])return a(e);wo.prototype[e]=t}else if(r==="collection"){if(cr.prototype[e])return a(e);cr.prototype[e]=t}else if(r==="layout"){for(var i=function(z){this.options=z,t.call(this,z),dt(this._private)||(this._private={}),this._private.cy=z.cy,this._private.listeners=[],this.createEmitter()},o=i.prototype=Object.create(t.prototype),u=[],f=0;f<u.length;f++){var c=u[f];o[c]=o[c]||function(){return this}}o.start&&!o.run?o.run=function(){return this.start(),this}:!o.start&&o.run&&(o.start=function(){return this.run(),this});var d=t.prototype.stop;o.stop=function(){var A=this.options;if(A&&A.animate){var z=this.animations;if(z)for(var M=0;M<z.length;M++)z[M].stop()}return d?d.call(this):this.emit("layoutstop"),this},o.destroy||(o.destroy=function(){return this}),o.cy=function(){return this._private.cy};var h=function(z){return z._private.cy},p={addEventFields:function(z,M){M.layout=z,M.cy=h(z),M.target=z},bubble:function(){return!0},parent:function(z){return h(z)}};et(o,{createEmitter:function(){return this._private.emitter=new $l(p,this),this},emitter:function(){return this._private.emitter},on:function(z,M){return this.emitter().on(z,M),this},one:function(z,M){return this.emitter().one(z,M),this},once:function(z,M){return this.emitter().one(z,M),this},removeListener:function(z,M){return this.emitter().removeListener(z,M),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(z,M){return this.emitter().emit(z,M),this}}),pt.eventAliasesOn(o),n=i}else if(r==="renderer"&&e!=="null"&&e!=="base"){var g=Kw("renderer","base"),m=g.prototype,w=t,x=t.prototype,b=function(){g.apply(this,arguments),w.apply(this,arguments)},_=b.prototype;for(var E in m){var C=m[E],B=x[E]!=null;if(B)return a(E);_[E]=C}for(var N in x)_[N]=x[N];m.clientFunctions.forEach(function(A){_[A]=_[A]||function(){At("Renderer does not implement `renderer."+A+"()` on its prototype")}}),n=b}else if(r==="__proto__"||r==="constructor"||r==="prototype")return At(r+" is an illegal type to be registered, possibly lead to prototype pollutions");return d1({map:Ww,keys:[r,e],value:n})}function Kw(r,e){return h1({map:Ww,keys:[r,e]})}function $P(r,e,t,n,a){return d1({map:Hw,keys:[r,e,t,n],value:a})}function VP(r,e,t,n){return h1({map:Hw,keys:[r,e,t,n]})}var $h=function(){if(arguments.length===2)return Kw.apply(null,arguments);if(arguments.length===3)return Gw.apply(null,arguments);if(arguments.length===4)return VP.apply(null,arguments);if(arguments.length===5)return $P.apply(null,arguments);At("Invalid extension access syntax")};wo.prototype.extension=$h;UP.forEach(function(r){r.extensions.forEach(function(e){Gw(r.type,e.name,e.impl)})});var Rl=function(){if(!(this instanceof Rl))return new Rl;this.length=0},ri=Rl.prototype;ri.instanceString=function(){return"stylesheet"};ri.selector=function(r){var e=this.length++;return this[e]={selector:r,properties:[]},this};ri.css=function(r,e){var t=this.length-1;if(Ye(r))this[t].properties.push({name:r,value:e});else if(dt(r))for(var n=r,a=Object.keys(n),i=0;i<a.length;i++){var o=a[i],u=n[o];if(u!=null){var f=ar.properties[o]||ar.properties[Al(o)];if(f!=null){var c=f.name,d=u;this[t].properties.push({name:c,value:d})}}}return this};ri.style=ri.css;ri.generateStyle=function(r){var e=new ar(r);return this.appendToStyle(e)};ri.appendToStyle=function(r){for(var e=0;e<this.length;e++){var t=this[e],n=t.selector,a=t.properties;r.selector(n);for(var i=0;i<a.length;i++){var o=a[i];r.css(o.name,o.value)}}return r};var jP="3.33.1",ni=function(e){if(e===void 0&&(e={}),dt(e))return new wo(e);if(Ye(e))return $h.apply($h,arguments)};ni.use=function(r){var e=Array.prototype.slice.call(arguments,1);return e.unshift(ni),r.apply(null,e),this};ni.warnings=function(r){return x1(r)};ni.version=jP;ni.stylesheet=ni.Stylesheet=Rl;function qP({elements:r,apiRef:e}){const t=lr.useRef(null),n=lr.useRef(null),[a,i]=lr.useState(null),o=lt(f=>f.assets),u=lr.useMemo(()=>[{selector:"node",style:{"background-color":"#70a4ff","border-color":"rgba(255,255,255,0.25)","border-width":1,color:"rgba(255,255,255,0.92)",label:"data(label)","font-size":10,"text-wrap":"wrap","text-max-width":180,"text-outline-width":2,"text-outline-color":"rgba(0,0,0,0.35)","text-valign":"center","text-halign":"center",width:"label",padding:"10px"}},{selector:'node[type="Definition"]',style:{"background-color":"#38d39f"}},{selector:'node[type="Theorem"]',style:{"background-color":"#ffb86b"}},{selector:'node[type="Lemma"]',style:{"background-color":"#ffd86b"}},{selector:'node[type="Formula"]',style:{"background-color":"#b970ff"}},{selector:"edge",style:{width:2,"line-color":"rgba(255,255,255,0.35)","target-arrow-color":"rgba(255,255,255,0.35)","target-arrow-shape":"triangle","curve-style":"bezier",label:"data(label)",color:"rgba(255,255,255,0.7)","font-size":9,"text-outline-width":2,"text-outline-color":"rgba(0,0,0,0.35)","text-rotation":"autorotate"}},{selector:":selected",style:{"border-width":3,"border-color":"rgba(255,255,255,0.7)","line-color":"#70a4ff","target-arrow-color":"#70a4ff"}}],[]);return lr.useEffect(()=>{if(!t.current||n.current)return;const f=ni({container:t.current,elements:r,style:u,layout:{name:"cose",animate:!1,fit:!0,padding:30},wheelSensitivity:.2});return f.on("select","node,edge",c=>{i(c.target.data())}),f.on("unselect","node,edge",()=>{i(null)}),n.current=f,e&&(e.current={fit:()=>f.fit(void 0,40),center:()=>f.center()}),()=>{f.destroy(),n.current=null}},[e,r,u]),lr.useEffect(()=>{const f=n.current;f&&(f.batch(()=>{f.elements().remove(),f.add(r)}),f.layout({name:"cose",animate:!1,fit:!0,padding:30}).run())},[r]),Ae.jsxs("div",{style:{height:"100%",display:"grid",gridTemplateColumns:"1fr 360px"},children:[Ae.jsx("div",{className:"graph",ref:t}),Ae.jsx("div",{style:{padding:12,borderLeft:"1px solid rgba(255,255,255,0.12)",overflow:"auto"},children:Ae.jsxs("div",{className:"card",style:{marginTop:0},children:[Ae.jsx("div",{className:"h1",children:""}),a?Ae.jsxs(Ae.Fragment,{children:[Ae.jsx("div",{className:"muted mono",style:{marginTop:6},children:a.id}),"type"in a?Ae.jsxs("div",{className:"muted",style:{marginTop:6},children:[Ae.jsx("b",{children:"type"}),": ",Ae.jsx("span",{className:"mono",children:a.type})]}):null,"title"in a?Ae.jsxs("div",{className:"muted",style:{marginTop:6},children:[Ae.jsx("b",{children:"title"}),": ",a.title]}):null,"content"in a&&a.content?Ae.jsxs(Ae.Fragment,{children:[Ae.jsx("div",{className:"label",children:"content (LaTeX snippet)"}),Ae.jsx("textarea",{className:"input mono",value:a.content,readOnly:!0})]}):null,"evidence"in a&&a.evidence?Ae.jsxs(Ae.Fragment,{children:[Ae.jsx("div",{className:"label",children:"evidence"}),Ae.jsx("textarea",{className:"input mono",value:a.evidence,readOnly:!0})]}):null,"image"in a&&a.image&&typeof a.image=="string"&&o[a.image]?Ae.jsxs(Ae.Fragment,{children:[Ae.jsx("div",{className:"label",children:"image"}),Ae.jsx("img",{src:o[a.image],alt:a.image,style:{width:"100%",borderRadius:10,border:"1px solid rgba(255,255,255,0.12)"}})]}):null]}):Ae.jsx("div",{className:"muted",style:{marginTop:6},children:"/"})]})})]})}function WP(r){const e=r.nodes.map(n=>({data:{id:n.id,label:`${n.type}: ${n.title}`,type:n.type,title:n.title,content:n.content??"",...n.meta}})),t=r.edges.map((n,a)=>({data:{id:n.id??`${n.source}-${n.type}-${n.target}-${a}`,source:n.source,target:n.target,label:n.type,type:n.type,evidence:n.evidence??""}}));return[...e,...t]}function HP(){const r=lt(o=>o.graph),e=lt(o=>o.processing),t=lt(o=>o.lastError),n=lt(o=>o.lastInfo),a=lr.useMemo(()=>WP(r),[r]),i=lr.useRef(null);return Ae.jsxs("div",{className:"app",children:[Ae.jsxs("aside",{className:"sidebar",children:[Ae.jsxs("div",{className:"card",children:[Ae.jsx("div",{className:"h1",children:"LaTeX   / Cloudflare Pages"}),Ae.jsx("div",{className:"muted",children:" LaTeX/zip/ GPT-5  LLM  API"})]}),Ae.jsx(M2,{}),Ae.jsx(z2,{}),Ae.jsx(h_,{onAfterImport:()=>{var o;return(o=i.current)==null?void 0:o.fit()}})]}),Ae.jsxs("main",{className:"main",children:[Ae.jsxs("div",{className:"topbar",children:[Ae.jsxs("div",{className:"statusbar",children:[Ae.jsxs("span",{className:`pill ${e.status==="idle"?"":"ok"}`,children:[": ",Ae.jsx("span",{className:"mono",children:e.status})]}),Ae.jsxs("span",{className:"pill",children:[": ",Ae.jsx("span",{className:"mono",children:r.nodes.length})]}),Ae.jsxs("span",{className:"pill",children:[": ",Ae.jsx("span",{className:"mono",children:r.edges.length})]}),e.status!=="idle"?Ae.jsxs("span",{className:"pill ok",children:[": ",Ae.jsx("span",{className:"mono",children:e.doneChunks})," /"," ",Ae.jsx("span",{className:"mono",children:e.totalChunks})]}):null,t?Ae.jsxs("span",{className:"pill bad",children:[": ",Ae.jsx("span",{className:"mono",children:t})]}):n?Ae.jsxs("span",{className:"pill ok",children:[": ",Ae.jsx("span",{className:"mono",children:n})]}):null]}),Ae.jsxs("div",{className:"row",children:[Ae.jsx("button",{className:"btn",onClick:()=>{var o;return(o=i.current)==null?void 0:o.fit()},children:"Fit"}),Ae.jsx("button",{className:"btn",onClick:()=>{var o;return(o=i.current)==null?void 0:o.center()},children:"Center"}),Ae.jsx("button",{className:"btn danger",onClick:()=>lt.getState().resetAll(),children:""})]})]}),Ae.jsx("div",{className:"graphWrap",children:Ae.jsx(qP,{elements:a,apiRef:i})})]})]})}Fb.createRoot(document.getElementById("root")).render(Ae.jsx($0.StrictMode,{children:Ae.jsx(HP,{})}));

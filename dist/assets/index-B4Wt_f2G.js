(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=t(a);fetch(a.href,i)}})();var zu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Bl(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var If={exports:{}},$s={},Lf={exports:{}},lt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zg;function Ab(){if(zg)return lt;zg=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator;function g(L){return L===null||typeof L!="object"?null:(L=h&&L[h]||L["@@iterator"],typeof L=="function"?L:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,y={};function x(L,U,oe){this.props=L,this.context=U,this.refs=y,this.updater=oe||p}x.prototype.isReactComponent={},x.prototype.setState=function(L,U){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,U,"setState")},x.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function b(){}b.prototype=x.prototype;function _(L,U,oe){this.props=L,this.context=U,this.refs=y,this.updater=oe||p}var E=_.prototype=new b;E.constructor=_,m(E,x.prototype),E.isPureReactComponent=!0;var C=Array.isArray,B=Object.prototype.hasOwnProperty,N={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function z(L,U,oe){var ie,ne={},we=null,Pe=null;if(U!=null)for(ie in U.ref!==void 0&&(Pe=U.ref),U.key!==void 0&&(we=""+U.key),U)B.call(U,ie)&&!A.hasOwnProperty(ie)&&(ne[ie]=U[ie]);var Ce=arguments.length-2;if(Ce===1)ne.children=oe;else if(1<Ce){for(var ge=Array(Ce),ce=0;ce<Ce;ce++)ge[ce]=arguments[ce+2];ne.children=ge}if(L&&L.defaultProps)for(ie in Ce=L.defaultProps,Ce)ne[ie]===void 0&&(ne[ie]=Ce[ie]);return{$$typeof:r,type:L,key:we,ref:Pe,props:ne,_owner:N.current}}function M(L,U){return{$$typeof:r,type:L.type,key:U,ref:L.ref,props:L.props,_owner:L._owner}}function V(L){return typeof L=="object"&&L!==null&&L.$$typeof===r}function q(L){var U={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(oe){return U[oe]})}var I=/\/+/g;function F(L,U){return typeof L=="object"&&L!==null&&L.key!=null?q(""+L.key):U.toString(36)}function T(L,U,oe,ie,ne){var we=typeof L;(we==="undefined"||we==="boolean")&&(L=null);var Pe=!1;if(L===null)Pe=!0;else switch(we){case"string":case"number":Pe=!0;break;case"object":switch(L.$$typeof){case r:case e:Pe=!0}}if(Pe)return Pe=L,ne=ne(Pe),L=ie===""?"."+F(Pe,0):ie,C(ne)?(oe="",L!=null&&(oe=L.replace(I,"$&/")+"/"),T(ne,U,oe,"",function(ce){return ce})):ne!=null&&(V(ne)&&(ne=M(ne,oe+(!ne.key||Pe&&Pe.key===ne.key?"":(""+ne.key).replace(I,"$&/")+"/")+L)),U.push(ne)),1;if(Pe=0,ie=ie===""?".":ie+":",C(L))for(var Ce=0;Ce<L.length;Ce++){we=L[Ce];var ge=ie+F(we,Ce);Pe+=T(we,U,oe,ge,ne)}else if(ge=g(L),typeof ge=="function")for(L=ge.call(L),Ce=0;!(we=L.next()).done;)we=we.value,ge=ie+F(we,Ce++),Pe+=T(we,U,oe,ge,ne);else if(we==="object")throw U=String(L),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.");return Pe}function G(L,U,oe){if(L==null)return L;var ie=[],ne=0;return T(L,ie,"","",function(we){return U.call(oe,we,ne++)}),ie}function Q(L){if(L._status===-1){var U=L._result;U=U(),U.then(function(oe){(L._status===0||L._status===-1)&&(L._status=1,L._result=oe)},function(oe){(L._status===0||L._status===-1)&&(L._status=2,L._result=oe)}),L._status===-1&&(L._status=0,L._result=U)}if(L._status===1)return L._result.default;throw L._result}var W={current:null},X={transition:null},Z={ReactCurrentDispatcher:W,ReactCurrentBatchConfig:X,ReactCurrentOwner:N};function te(){throw Error("act(...) is not supported in production builds of React.")}return lt.Children={map:G,forEach:function(L,U,oe){G(L,function(){U.apply(this,arguments)},oe)},count:function(L){var U=0;return G(L,function(){U++}),U},toArray:function(L){return G(L,function(U){return U})||[]},only:function(L){if(!V(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},lt.Component=x,lt.Fragment=t,lt.Profiler=a,lt.PureComponent=_,lt.StrictMode=n,lt.Suspense=c,lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z,lt.act=te,lt.cloneElement=function(L,U,oe){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var ie=m({},L.props),ne=L.key,we=L.ref,Pe=L._owner;if(U!=null){if(U.ref!==void 0&&(we=U.ref,Pe=N.current),U.key!==void 0&&(ne=""+U.key),L.type&&L.type.defaultProps)var Ce=L.type.defaultProps;for(ge in U)B.call(U,ge)&&!A.hasOwnProperty(ge)&&(ie[ge]=U[ge]===void 0&&Ce!==void 0?Ce[ge]:U[ge])}var ge=arguments.length-2;if(ge===1)ie.children=oe;else if(1<ge){Ce=Array(ge);for(var ce=0;ce<ge;ce++)Ce[ce]=arguments[ce+2];ie.children=Ce}return{$$typeof:r,type:L.type,key:ne,ref:we,props:ie,_owner:Pe}},lt.createContext=function(L){return L={$$typeof:o,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:i,_context:L},L.Consumer=L},lt.createElement=z,lt.createFactory=function(L){var U=z.bind(null,L);return U.type=L,U},lt.createRef=function(){return{current:null}},lt.forwardRef=function(L){return{$$typeof:u,render:L}},lt.isValidElement=V,lt.lazy=function(L){return{$$typeof:d,_payload:{_status:-1,_result:L},_init:Q}},lt.memo=function(L,U){return{$$typeof:f,type:L,compare:U===void 0?null:U}},lt.startTransition=function(L){var U=X.transition;X.transition={};try{L()}finally{X.transition=U}},lt.unstable_act=te,lt.useCallback=function(L,U){return W.current.useCallback(L,U)},lt.useContext=function(L){return W.current.useContext(L)},lt.useDebugValue=function(){},lt.useDeferredValue=function(L){return W.current.useDeferredValue(L)},lt.useEffect=function(L,U){return W.current.useEffect(L,U)},lt.useId=function(){return W.current.useId()},lt.useImperativeHandle=function(L,U,oe){return W.current.useImperativeHandle(L,U,oe)},lt.useInsertionEffect=function(L,U){return W.current.useInsertionEffect(L,U)},lt.useLayoutEffect=function(L,U){return W.current.useLayoutEffect(L,U)},lt.useMemo=function(L,U){return W.current.useMemo(L,U)},lt.useReducer=function(L,U,oe){return W.current.useReducer(L,U,oe)},lt.useRef=function(L){return W.current.useRef(L)},lt.useState=function(L){return W.current.useState(L)},lt.useSyncExternalStore=function(L,U,oe){return W.current.useSyncExternalStore(L,U,oe)},lt.useTransition=function(){return W.current.useTransition()},lt.version="18.3.1",lt}var Fg;function bo(){return Fg||(Fg=1,Lf.exports=Ab()),Lf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ug;function Db(){if(Ug)return $s;Ug=1;var r=bo(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(u,c,f){var d,h={},g=null,p=null;f!==void 0&&(g=""+f),c.key!==void 0&&(g=""+c.key),c.ref!==void 0&&(p=c.ref);for(d in c)n.call(c,d)&&!i.hasOwnProperty(d)&&(h[d]=c[d]);if(u&&u.defaultProps)for(d in c=u.defaultProps,c)h[d]===void 0&&(h[d]=c[d]);return{$$typeof:e,type:u,key:g,ref:p,props:h,_owner:a.current}}return $s.Fragment=t,$s.jsx=o,$s.jsxs=o,$s}var $g;function Ib(){return $g||($g=1,If.exports=Db()),If.exports}var Se=Ib(),Ut=bo();const V0=Bl(Ut);var Fu={},Nf={exports:{}},Or={},Of={exports:{}},Mf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vg;function Lb(){return Vg||(Vg=1,(function(r){function e(X,Z){var te=X.length;X.push(Z);e:for(;0<te;){var L=te-1>>>1,U=X[L];if(0<a(U,Z))X[L]=Z,X[te]=U,te=L;else break e}}function t(X){return X.length===0?null:X[0]}function n(X){if(X.length===0)return null;var Z=X[0],te=X.pop();if(te!==Z){X[0]=te;e:for(var L=0,U=X.length,oe=U>>>1;L<oe;){var ie=2*(L+1)-1,ne=X[ie],we=ie+1,Pe=X[we];if(0>a(ne,te))we<U&&0>a(Pe,ne)?(X[L]=Pe,X[we]=te,L=we):(X[L]=ne,X[ie]=te,L=ie);else if(we<U&&0>a(Pe,te))X[L]=Pe,X[we]=te,L=we;else break e}}return Z}function a(X,Z){var te=X.sortIndex-Z.sortIndex;return te!==0?te:X.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;r.unstable_now=function(){return i.now()}}else{var o=Date,u=o.now();r.unstable_now=function(){return o.now()-u}}var c=[],f=[],d=1,h=null,g=3,p=!1,m=!1,y=!1,x=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(X){for(var Z=t(f);Z!==null;){if(Z.callback===null)n(f);else if(Z.startTime<=X)n(f),Z.sortIndex=Z.expirationTime,e(c,Z);else break;Z=t(f)}}function C(X){if(y=!1,E(X),!m)if(t(c)!==null)m=!0,Q(B);else{var Z=t(f);Z!==null&&W(C,Z.startTime-X)}}function B(X,Z){m=!1,y&&(y=!1,b(z),z=-1),p=!0;var te=g;try{for(E(Z),h=t(c);h!==null&&(!(h.expirationTime>Z)||X&&!q());){var L=h.callback;if(typeof L=="function"){h.callback=null,g=h.priorityLevel;var U=L(h.expirationTime<=Z);Z=r.unstable_now(),typeof U=="function"?h.callback=U:h===t(c)&&n(c),E(Z)}else n(c);h=t(c)}if(h!==null)var oe=!0;else{var ie=t(f);ie!==null&&W(C,ie.startTime-Z),oe=!1}return oe}finally{h=null,g=te,p=!1}}var N=!1,A=null,z=-1,M=5,V=-1;function q(){return!(r.unstable_now()-V<M)}function I(){if(A!==null){var X=r.unstable_now();V=X;var Z=!0;try{Z=A(!0,X)}finally{Z?F():(N=!1,A=null)}}else N=!1}var F;if(typeof _=="function")F=function(){_(I)};else if(typeof MessageChannel<"u"){var T=new MessageChannel,G=T.port2;T.port1.onmessage=I,F=function(){G.postMessage(null)}}else F=function(){x(I,0)};function Q(X){A=X,N||(N=!0,F())}function W(X,Z){z=x(function(){X(r.unstable_now())},Z)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(X){X.callback=null},r.unstable_continueExecution=function(){m||p||(m=!0,Q(B))},r.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<X?Math.floor(1e3/X):5},r.unstable_getCurrentPriorityLevel=function(){return g},r.unstable_getFirstCallbackNode=function(){return t(c)},r.unstable_next=function(X){switch(g){case 1:case 2:case 3:var Z=3;break;default:Z=g}var te=g;g=Z;try{return X()}finally{g=te}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(X,Z){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var te=g;g=X;try{return Z()}finally{g=te}},r.unstable_scheduleCallback=function(X,Z,te){var L=r.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?L+te:L):te=L,X){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=te+U,X={id:d++,callback:Z,priorityLevel:X,startTime:te,expirationTime:U,sortIndex:-1},te>L?(X.sortIndex=te,e(f,X),t(c)===null&&X===t(f)&&(y?(b(z),z=-1):y=!0,W(C,te-L))):(X.sortIndex=U,e(c,X),m||p||(m=!0,Q(B))),X},r.unstable_shouldYield=q,r.unstable_wrapCallback=function(X){var Z=g;return function(){var te=g;g=Z;try{return X.apply(this,arguments)}finally{g=te}}}})(Mf)),Mf}var jg;function Nb(){return jg||(jg=1,Of.exports=Lb()),Of.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qg;function Ob(){if(qg)return Or;qg=1;var r=bo(),e=Nb();function t(s){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+s,v=1;v<arguments.length;v++)l+="&args[]="+encodeURIComponent(arguments[v]);return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,a={};function i(s,l){o(s,l),o(s+"Capture",l)}function o(s,l){for(a[s]=l,s=0;s<l.length;s++)n.add(l[s])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},h={};function g(s){return c.call(h,s)?!0:c.call(d,s)?!1:f.test(s)?h[s]=!0:(d[s]=!0,!1)}function p(s,l,v,w){if(v!==null&&v.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return w?!1:v!==null?!v.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function m(s,l,v,w){if(l===null||typeof l>"u"||p(s,l,v,w))return!0;if(w)return!1;if(v!==null)switch(v.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function y(s,l,v,w,S,P,j){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=w,this.attributeNamespace=S,this.mustUseProperty=v,this.propertyName=s,this.type=l,this.sanitizeURL=P,this.removeEmptyString=j}var x={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){x[s]=new y(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var l=s[0];x[l]=new y(l,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){x[s]=new y(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){x[s]=new y(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){x[s]=new y(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){x[s]=new y(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){x[s]=new y(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){x[s]=new y(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){x[s]=new y(s,5,!1,s.toLowerCase(),null,!1,!1)});var b=/[\-:]([a-z])/g;function _(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var l=s.replace(b,_);x[l]=new y(l,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var l=s.replace(b,_);x[l]=new y(l,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var l=s.replace(b,_);x[l]=new y(l,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){x[s]=new y(s,1,!1,s.toLowerCase(),null,!1,!1)}),x.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){x[s]=new y(s,1,!1,s.toLowerCase(),null,!0,!0)});function E(s,l,v,w){var S=x.hasOwnProperty(l)?x[l]:null;(S!==null?S.type!==0:w||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(m(l,v,S,w)&&(v=null),w||S===null?g(l)&&(v===null?s.removeAttribute(l):s.setAttribute(l,""+v)):S.mustUseProperty?s[S.propertyName]=v===null?S.type===3?!1:"":v:(l=S.attributeName,w=S.attributeNamespace,v===null?s.removeAttribute(l):(S=S.type,v=S===3||S===4&&v===!0?"":""+v,w?s.setAttributeNS(w,l,v):s.setAttribute(l,v))))}var C=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,B=Symbol.for("react.element"),N=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),V=Symbol.for("react.provider"),q=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),G=Symbol.for("react.memo"),Q=Symbol.for("react.lazy"),W=Symbol.for("react.offscreen"),X=Symbol.iterator;function Z(s){return s===null||typeof s!="object"?null:(s=X&&s[X]||s["@@iterator"],typeof s=="function"?s:null)}var te=Object.assign,L;function U(s){if(L===void 0)try{throw Error()}catch(v){var l=v.stack.trim().match(/\n( *(at )?)/);L=l&&l[1]||""}return`
`+L+s}var oe=!1;function ie(s,l){if(!s||oe)return"";oe=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(Te){var w=Te}Reflect.construct(s,[],l)}else{try{l.call()}catch(Te){w=Te}s.call(l.prototype)}else{try{throw Error()}catch(Te){w=Te}s()}}catch(Te){if(Te&&w&&typeof Te.stack=="string"){for(var S=Te.stack.split(`
`),P=w.stack.split(`
`),j=S.length-1,re=P.length-1;1<=j&&0<=re&&S[j]!==P[re];)re--;for(;1<=j&&0<=re;j--,re--)if(S[j]!==P[re]){if(j!==1||re!==1)do if(j--,re--,0>re||S[j]!==P[re]){var ue=`
`+S[j].replace(" at new "," at ");return s.displayName&&ue.includes("<anonymous>")&&(ue=ue.replace("<anonymous>",s.displayName)),ue}while(1<=j&&0<=re);break}}}finally{oe=!1,Error.prepareStackTrace=v}return(s=s?s.displayName||s.name:"")?U(s):""}function ne(s){switch(s.tag){case 5:return U(s.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return s=ie(s.type,!1),s;case 11:return s=ie(s.type.render,!1),s;case 1:return s=ie(s.type,!0),s;default:return""}}function we(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case A:return"Fragment";case N:return"Portal";case M:return"Profiler";case z:return"StrictMode";case F:return"Suspense";case T:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case q:return(s.displayName||"Context")+".Consumer";case V:return(s._context.displayName||"Context")+".Provider";case I:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case G:return l=s.displayName||null,l!==null?l:we(s.type)||"Memo";case Q:l=s._payload,s=s._init;try{return we(s(l))}catch{}}return null}function Pe(s){var l=s.type;switch(s.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=l.render,s=s.displayName||s.name||"",l.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return we(l);case 8:return l===z?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function Ce(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function ge(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function ce(s){var l=ge(s)?"checked":"value",v=Object.getOwnPropertyDescriptor(s.constructor.prototype,l),w=""+s[l];if(!s.hasOwnProperty(l)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var S=v.get,P=v.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return S.call(this)},set:function(j){w=""+j,P.call(this,j)}}),Object.defineProperty(s,l,{enumerable:v.enumerable}),{getValue:function(){return w},setValue:function(j){w=""+j},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function de(s){s._valueTracker||(s._valueTracker=ce(s))}function be(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var v=l.getValue(),w="";return s&&(w=ge(s)?s.checked?"true":"false":s.value),s=w,s!==v?(l.setValue(s),!0):!1}function Re(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function D(s,l){var v=l.checked;return te({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:v??s._wrapperState.initialChecked})}function ve(s,l){var v=l.defaultValue==null?"":l.defaultValue,w=l.checked!=null?l.checked:l.defaultChecked;v=Ce(l.value!=null?l.value:v),s._wrapperState={initialChecked:w,initialValue:v,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function pe(s,l){l=l.checked,l!=null&&E(s,"checked",l,!1)}function Y(s,l){pe(s,l);var v=Ce(l.value),w=l.type;if(v!=null)w==="number"?(v===0&&s.value===""||s.value!=v)&&(s.value=""+v):s.value!==""+v&&(s.value=""+v);else if(w==="submit"||w==="reset"){s.removeAttribute("value");return}l.hasOwnProperty("value")?ae(s,l.type,v):l.hasOwnProperty("defaultValue")&&ae(s,l.type,Ce(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(s.defaultChecked=!!l.defaultChecked)}function K(s,l,v){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var w=l.type;if(!(w!=="submit"&&w!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+s._wrapperState.initialValue,v||l===s.value||(s.value=l),s.defaultValue=l}v=s.name,v!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,v!==""&&(s.name=v)}function ae(s,l,v){(l!=="number"||Re(s.ownerDocument)!==s)&&(v==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+v&&(s.defaultValue=""+v))}var he=Array.isArray;function me(s,l,v,w){if(s=s.options,l){l={};for(var S=0;S<v.length;S++)l["$"+v[S]]=!0;for(v=0;v<s.length;v++)S=l.hasOwnProperty("$"+s[v].value),s[v].selected!==S&&(s[v].selected=S),S&&w&&(s[v].defaultSelected=!0)}else{for(v=""+Ce(v),l=null,S=0;S<s.length;S++){if(s[S].value===v){s[S].selected=!0,w&&(s[S].defaultSelected=!0);return}l!==null||s[S].disabled||(l=s[S])}l!==null&&(l.selected=!0)}}function se(s,l){if(l.dangerouslySetInnerHTML!=null)throw Error(t(91));return te({},l,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function Be(s,l){var v=l.value;if(v==null){if(v=l.children,l=l.defaultValue,v!=null){if(l!=null)throw Error(t(92));if(he(v)){if(1<v.length)throw Error(t(93));v=v[0]}l=v}l==null&&(l=""),v=l}s._wrapperState={initialValue:Ce(v)}}function De(s,l){var v=Ce(l.value),w=Ce(l.defaultValue);v!=null&&(v=""+v,v!==s.value&&(s.value=v),l.defaultValue==null&&s.defaultValue!==v&&(s.defaultValue=v)),w!=null&&(s.defaultValue=""+w)}function Ae(s){var l=s.textContent;l===s._wrapperState.initialValue&&l!==""&&l!==null&&(s.value=l)}function ze(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $(s,l){return s==null||s==="http://www.w3.org/1999/xhtml"?ze(l):s==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var k,R=(function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,v,w,S){MSApp.execUnsafeLocalFunction(function(){return s(l,v,w,S)})}:s})(function(s,l){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=l;else{for(k=k||document.createElement("div"),k.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=k.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;l.firstChild;)s.appendChild(l.firstChild)}});function H(s,l){if(l){var v=s.firstChild;if(v&&v===s.lastChild&&v.nodeType===3){v.nodeValue=l;return}}s.textContent=l}var ee={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},J=["Webkit","ms","Moz","O"];Object.keys(ee).forEach(function(s){J.forEach(function(l){l=l+s.charAt(0).toUpperCase()+s.substring(1),ee[l]=ee[s]})});function O(s,l,v){return l==null||typeof l=="boolean"||l===""?"":v||typeof l!="number"||l===0||ee.hasOwnProperty(s)&&ee[s]?(""+l).trim():l+"px"}function le(s,l){s=s.style;for(var v in l)if(l.hasOwnProperty(v)){var w=v.indexOf("--")===0,S=O(v,l[v],w);v==="float"&&(v="cssFloat"),w?s.setProperty(v,S):s[v]=S}}var _e=te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(s,l){if(l){if(_e[s]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(t(137,s));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(t(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(t(61))}if(l.style!=null&&typeof l.style!="object")throw Error(t(62))}}function ke(s,l){if(s.indexOf("-")===-1)return typeof l.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Oe=null;function Ie(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var We=null,$e=null,Ge=null;function nt(s){if(s=Cs(s)){if(typeof We!="function")throw Error(t(280));var l=s.stateNode;l&&(l=Jo(l),We(s.stateNode,s.type,l))}}function at(s){$e?Ge?Ge.push(s):Ge=[s]:$e=s}function Ke(){if($e){var s=$e,l=Ge;if(Ge=$e=null,nt(s),l)for(s=0;s<l.length;s++)nt(l[s])}}function st(s,l){return s(l)}function it(){}var Dt=!1;function Et(s,l,v){if(Dt)return s(l,v);Dt=!0;try{return st(s,l,v)}finally{Dt=!1,($e!==null||Ge!==null)&&(it(),Ke())}}function Vt(s,l){var v=s.stateNode;if(v===null)return null;var w=Jo(v);if(w===null)return null;v=w[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(s=s.type,w=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!w;break e;default:s=!1}if(s)return null;if(v&&typeof v!="function")throw Error(t(231,l,typeof v));return v}var Pt=!1;if(u)try{var Rt={};Object.defineProperty(Rt,"passive",{get:function(){Pt=!0}}),window.addEventListener("test",Rt,Rt),window.removeEventListener("test",Rt,Rt)}catch{Pt=!1}function jt(s,l,v,w,S,P,j,re,ue){var Te=Array.prototype.slice.call(arguments,3);try{l.apply(v,Te)}catch(Ne){this.onError(Ne)}}var It=!1,Ur=null,St=!1,$r=null,an={onError:function(s){It=!0,Ur=s}};function qn(s,l,v,w,S,P,j,re,ue){It=!1,Ur=null,jt.apply(an,arguments)}function si(s,l,v,w,S,P,j,re,ue){if(qn.apply(this,arguments),It){if(It){var Te=Ur;It=!1,Ur=null}else throw Error(t(198));St||(St=!0,$r=Te)}}function Er(s){var l=s,v=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(v=l.return),s=l.return;while(s)}return l.tag===3?v:null}function or(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function Kt(s){if(Er(s)!==s)throw Error(t(188))}function vr(s){var l=s.alternate;if(!l){if(l=Er(s),l===null)throw Error(t(188));return l!==s?null:s}for(var v=s,w=l;;){var S=v.return;if(S===null)break;var P=S.alternate;if(P===null){if(w=S.return,w!==null){v=w;continue}break}if(S.child===P.child){for(P=S.child;P;){if(P===v)return Kt(S),s;if(P===w)return Kt(S),l;P=P.sibling}throw Error(t(188))}if(v.return!==w.return)v=S,w=P;else{for(var j=!1,re=S.child;re;){if(re===v){j=!0,v=S,w=P;break}if(re===w){j=!0,w=S,v=P;break}re=re.sibling}if(!j){for(re=P.child;re;){if(re===v){j=!0,v=P,w=S;break}if(re===w){j=!0,w=P,v=S;break}re=re.sibling}if(!j)throw Error(t(189))}}if(v.alternate!==w)throw Error(t(190))}if(v.tag!==3)throw Error(t(188));return v.stateNode.current===v?s:l}function Wn(s){return s=vr(s),s!==null?Sr(s):null}function Sr(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var l=Sr(s);if(l!==null)return l;s=s.sibling}return null}var is=e.unstable_scheduleCallback,No=e.unstable_cancelCallback,Xl=e.unstable_shouldYield,Zl=e.unstable_requestPaint,Lt=e.unstable_now,Yl=e.unstable_getCurrentPriorityLevel,ss=e.unstable_ImmediatePriority,Oo=e.unstable_UserBlockingPriority,gn=e.unstable_NormalPriority,os=e.unstable_LowPriority,Ba=e.unstable_IdlePriority,Aa=null,Vr=null;function Ql(s){if(Vr&&typeof Vr.onCommitFiberRoot=="function")try{Vr.onCommitFiberRoot(Aa,s,void 0,(s.current.flags&128)===128)}catch{}}var Nt=Math.clz32?Math.clz32:Da,us=Math.log,Mo=Math.LN2;function Da(s){return s>>>=0,s===0?32:31-(us(s)/Mo|0)|0}var pr=64,oi=4194304;function ui(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function li(s,l){var v=s.pendingLanes;if(v===0)return 0;var w=0,S=s.suspendedLanes,P=s.pingedLanes,j=v&268435455;if(j!==0){var re=j&~S;re!==0?w=ui(re):(P&=j,P!==0&&(w=ui(P)))}else j=v&~S,j!==0?w=ui(j):P!==0&&(w=ui(P));if(w===0)return 0;if(l!==0&&l!==w&&(l&S)===0&&(S=w&-w,P=l&-l,S>=P||S===16&&(P&4194240)!==0))return l;if((w&4)!==0&&(w|=v&16),l=s.entangledLanes,l!==0)for(s=s.entanglements,l&=w;0<l;)v=31-Nt(l),S=1<<v,w|=s[v],l&=~S;return w}function Zw(s,l){switch(s){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yw(s,l){for(var v=s.suspendedLanes,w=s.pingedLanes,S=s.expirationTimes,P=s.pendingLanes;0<P;){var j=31-Nt(P),re=1<<j,ue=S[j];ue===-1?((re&v)===0||(re&w)!==0)&&(S[j]=Zw(re,l)):ue<=l&&(s.expiredLanes|=re),P&=~re}}function Jl(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function pv(){var s=pr;return pr<<=1,(pr&4194240)===0&&(pr=64),s}function ec(s){for(var l=[],v=0;31>v;v++)l.push(s);return l}function ls(s,l,v){s.pendingLanes|=l,l!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,l=31-Nt(l),s[l]=v}function Qw(s,l){var v=s.pendingLanes&~l;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=l,s.mutableReadLanes&=l,s.entangledLanes&=l,l=s.entanglements;var w=s.eventTimes;for(s=s.expirationTimes;0<v;){var S=31-Nt(v),P=1<<S;l[S]=0,w[S]=-1,s[S]=-1,v&=~P}}function tc(s,l){var v=s.entangledLanes|=l;for(s=s.entanglements;v;){var w=31-Nt(v),S=1<<w;S&l|s[w]&l&&(s[w]|=l),v&=~S}}var mt=0;function gv(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var mv,rc,yv,wv,xv,nc=!1,zo=[],Gn=null,Hn=null,Kn=null,cs=new Map,fs=new Map,Xn=[],Jw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function bv(s,l){switch(s){case"focusin":case"focusout":Gn=null;break;case"dragenter":case"dragleave":Hn=null;break;case"mouseover":case"mouseout":Kn=null;break;case"pointerover":case"pointerout":cs.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":fs.delete(l.pointerId)}}function ds(s,l,v,w,S,P){return s===null||s.nativeEvent!==P?(s={blockedOn:l,domEventName:v,eventSystemFlags:w,nativeEvent:P,targetContainers:[S]},l!==null&&(l=Cs(l),l!==null&&rc(l)),s):(s.eventSystemFlags|=w,l=s.targetContainers,S!==null&&l.indexOf(S)===-1&&l.push(S),s)}function ex(s,l,v,w,S){switch(l){case"focusin":return Gn=ds(Gn,s,l,v,w,S),!0;case"dragenter":return Hn=ds(Hn,s,l,v,w,S),!0;case"mouseover":return Kn=ds(Kn,s,l,v,w,S),!0;case"pointerover":var P=S.pointerId;return cs.set(P,ds(cs.get(P)||null,s,l,v,w,S)),!0;case"gotpointercapture":return P=S.pointerId,fs.set(P,ds(fs.get(P)||null,s,l,v,w,S)),!0}return!1}function _v(s){var l=Ia(s.target);if(l!==null){var v=Er(l);if(v!==null){if(l=v.tag,l===13){if(l=or(v),l!==null){s.blockedOn=l,xv(s.priority,function(){yv(v)});return}}else if(l===3&&v.stateNode.current.memoizedState.isDehydrated){s.blockedOn=v.tag===3?v.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Fo(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var v=ic(s.domEventName,s.eventSystemFlags,l[0],s.nativeEvent);if(v===null){v=s.nativeEvent;var w=new v.constructor(v.type,v);Oe=w,v.target.dispatchEvent(w),Oe=null}else return l=Cs(v),l!==null&&rc(l),s.blockedOn=v,!1;l.shift()}return!0}function Ev(s,l,v){Fo(s)&&v.delete(l)}function tx(){nc=!1,Gn!==null&&Fo(Gn)&&(Gn=null),Hn!==null&&Fo(Hn)&&(Hn=null),Kn!==null&&Fo(Kn)&&(Kn=null),cs.forEach(Ev),fs.forEach(Ev)}function hs(s,l){s.blockedOn===l&&(s.blockedOn=null,nc||(nc=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,tx)))}function vs(s){function l(S){return hs(S,s)}if(0<zo.length){hs(zo[0],s);for(var v=1;v<zo.length;v++){var w=zo[v];w.blockedOn===s&&(w.blockedOn=null)}}for(Gn!==null&&hs(Gn,s),Hn!==null&&hs(Hn,s),Kn!==null&&hs(Kn,s),cs.forEach(l),fs.forEach(l),v=0;v<Xn.length;v++)w=Xn[v],w.blockedOn===s&&(w.blockedOn=null);for(;0<Xn.length&&(v=Xn[0],v.blockedOn===null);)_v(v),v.blockedOn===null&&Xn.shift()}var ci=C.ReactCurrentBatchConfig,Uo=!0;function rx(s,l,v,w){var S=mt,P=ci.transition;ci.transition=null;try{mt=1,ac(s,l,v,w)}finally{mt=S,ci.transition=P}}function nx(s,l,v,w){var S=mt,P=ci.transition;ci.transition=null;try{mt=4,ac(s,l,v,w)}finally{mt=S,ci.transition=P}}function ac(s,l,v,w){if(Uo){var S=ic(s,l,v,w);if(S===null)_c(s,l,w,$o,v),bv(s,w);else if(ex(S,s,l,v,w))w.stopPropagation();else if(bv(s,w),l&4&&-1<Jw.indexOf(s)){for(;S!==null;){var P=Cs(S);if(P!==null&&mv(P),P=ic(s,l,v,w),P===null&&_c(s,l,w,$o,v),P===S)break;S=P}S!==null&&w.stopPropagation()}else _c(s,l,w,null,v)}}var $o=null;function ic(s,l,v,w){if($o=null,s=Ie(w),s=Ia(s),s!==null)if(l=Er(s),l===null)s=null;else if(v=l.tag,v===13){if(s=or(l),s!==null)return s;s=null}else if(v===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null);return $o=s,null}function Sv(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Yl()){case ss:return 1;case Oo:return 4;case gn:case os:return 16;case Ba:return 536870912;default:return 16}default:return 16}}var Zn=null,sc=null,Vo=null;function kv(){if(Vo)return Vo;var s,l=sc,v=l.length,w,S="value"in Zn?Zn.value:Zn.textContent,P=S.length;for(s=0;s<v&&l[s]===S[s];s++);var j=v-s;for(w=1;w<=j&&l[v-w]===S[P-w];w++);return Vo=S.slice(s,1<w?1-w:void 0)}function jo(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function qo(){return!0}function Cv(){return!1}function jr(s){function l(v,w,S,P,j){this._reactName=v,this._targetInst=S,this.type=w,this.nativeEvent=P,this.target=j,this.currentTarget=null;for(var re in s)s.hasOwnProperty(re)&&(v=s[re],this[re]=v?v(P):P[re]);return this.isDefaultPrevented=(P.defaultPrevented!=null?P.defaultPrevented:P.returnValue===!1)?qo:Cv,this.isPropagationStopped=Cv,this}return te(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var v=this.nativeEvent;v&&(v.preventDefault?v.preventDefault():typeof v.returnValue!="unknown"&&(v.returnValue=!1),this.isDefaultPrevented=qo)},stopPropagation:function(){var v=this.nativeEvent;v&&(v.stopPropagation?v.stopPropagation():typeof v.cancelBubble!="unknown"&&(v.cancelBubble=!0),this.isPropagationStopped=qo)},persist:function(){},isPersistent:qo}),l}var fi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},oc=jr(fi),ps=te({},fi,{view:0,detail:0}),ax=jr(ps),uc,lc,gs,Wo=te({},ps,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fc,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==gs&&(gs&&s.type==="mousemove"?(uc=s.screenX-gs.screenX,lc=s.screenY-gs.screenY):lc=uc=0,gs=s),uc)},movementY:function(s){return"movementY"in s?s.movementY:lc}}),Tv=jr(Wo),ix=te({},Wo,{dataTransfer:0}),sx=jr(ix),ox=te({},ps,{relatedTarget:0}),cc=jr(ox),ux=te({},fi,{animationName:0,elapsedTime:0,pseudoElement:0}),lx=jr(ux),cx=te({},fi,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),fx=jr(cx),dx=te({},fi,{data:0}),Pv=jr(dx),hx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},px={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gx(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=px[s])?!!l[s]:!1}function fc(){return gx}var mx=te({},ps,{key:function(s){if(s.key){var l=hx[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=jo(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?vx[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fc,charCode:function(s){return s.type==="keypress"?jo(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?jo(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),yx=jr(mx),wx=te({},Wo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rv=jr(wx),xx=te({},ps,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fc}),bx=jr(xx),_x=te({},fi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ex=jr(_x),Sx=te({},Wo,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),kx=jr(Sx),Cx=[9,13,27,32],dc=u&&"CompositionEvent"in window,ms=null;u&&"documentMode"in document&&(ms=document.documentMode);var Tx=u&&"TextEvent"in window&&!ms,Bv=u&&(!dc||ms&&8<ms&&11>=ms),Av=" ",Dv=!1;function Iv(s,l){switch(s){case"keyup":return Cx.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lv(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var di=!1;function Px(s,l){switch(s){case"compositionend":return Lv(l);case"keypress":return l.which!==32?null:(Dv=!0,Av);case"textInput":return s=l.data,s===Av&&Dv?null:s;default:return null}}function Rx(s,l){if(di)return s==="compositionend"||!dc&&Iv(s,l)?(s=kv(),Vo=sc=Zn=null,di=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Bv&&l.locale!=="ko"?null:l.data;default:return null}}var Bx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nv(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!Bx[s.type]:l==="textarea"}function Ov(s,l,v,w){at(w),l=Zo(l,"onChange"),0<l.length&&(v=new oc("onChange","change",null,v,w),s.push({event:v,listeners:l}))}var ys=null,ws=null;function Ax(s){ep(s,0)}function Go(s){var l=mi(s);if(be(l))return s}function Dx(s,l){if(s==="change")return l}var Mv=!1;if(u){var hc;if(u){var vc="oninput"in document;if(!vc){var zv=document.createElement("div");zv.setAttribute("oninput","return;"),vc=typeof zv.oninput=="function"}hc=vc}else hc=!1;Mv=hc&&(!document.documentMode||9<document.documentMode)}function Fv(){ys&&(ys.detachEvent("onpropertychange",Uv),ws=ys=null)}function Uv(s){if(s.propertyName==="value"&&Go(ws)){var l=[];Ov(l,ws,s,Ie(s)),Et(Ax,l)}}function Ix(s,l,v){s==="focusin"?(Fv(),ys=l,ws=v,ys.attachEvent("onpropertychange",Uv)):s==="focusout"&&Fv()}function Lx(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Go(ws)}function Nx(s,l){if(s==="click")return Go(l)}function Ox(s,l){if(s==="input"||s==="change")return Go(l)}function Mx(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var sn=typeof Object.is=="function"?Object.is:Mx;function xs(s,l){if(sn(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var v=Object.keys(s),w=Object.keys(l);if(v.length!==w.length)return!1;for(w=0;w<v.length;w++){var S=v[w];if(!c.call(l,S)||!sn(s[S],l[S]))return!1}return!0}function $v(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Vv(s,l){var v=$v(s);s=0;for(var w;v;){if(v.nodeType===3){if(w=s+v.textContent.length,s<=l&&w>=l)return{node:v,offset:l-s};s=w}e:{for(;v;){if(v.nextSibling){v=v.nextSibling;break e}v=v.parentNode}v=void 0}v=$v(v)}}function jv(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?jv(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function qv(){for(var s=window,l=Re();l instanceof s.HTMLIFrameElement;){try{var v=typeof l.contentWindow.location.href=="string"}catch{v=!1}if(v)s=l.contentWindow;else break;l=Re(s.document)}return l}function pc(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}function zx(s){var l=qv(),v=s.focusedElem,w=s.selectionRange;if(l!==v&&v&&v.ownerDocument&&jv(v.ownerDocument.documentElement,v)){if(w!==null&&pc(v)){if(l=w.start,s=w.end,s===void 0&&(s=l),"selectionStart"in v)v.selectionStart=l,v.selectionEnd=Math.min(s,v.value.length);else if(s=(l=v.ownerDocument||document)&&l.defaultView||window,s.getSelection){s=s.getSelection();var S=v.textContent.length,P=Math.min(w.start,S);w=w.end===void 0?P:Math.min(w.end,S),!s.extend&&P>w&&(S=w,w=P,P=S),S=Vv(v,P);var j=Vv(v,w);S&&j&&(s.rangeCount!==1||s.anchorNode!==S.node||s.anchorOffset!==S.offset||s.focusNode!==j.node||s.focusOffset!==j.offset)&&(l=l.createRange(),l.setStart(S.node,S.offset),s.removeAllRanges(),P>w?(s.addRange(l),s.extend(j.node,j.offset)):(l.setEnd(j.node,j.offset),s.addRange(l)))}}for(l=[],s=v;s=s.parentNode;)s.nodeType===1&&l.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<l.length;v++)s=l[v],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var Fx=u&&"documentMode"in document&&11>=document.documentMode,hi=null,gc=null,bs=null,mc=!1;function Wv(s,l,v){var w=v.window===v?v.document:v.nodeType===9?v:v.ownerDocument;mc||hi==null||hi!==Re(w)||(w=hi,"selectionStart"in w&&pc(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),bs&&xs(bs,w)||(bs=w,w=Zo(gc,"onSelect"),0<w.length&&(l=new oc("onSelect","select",null,l,v),s.push({event:l,listeners:w}),l.target=hi)))}function Ho(s,l){var v={};return v[s.toLowerCase()]=l.toLowerCase(),v["Webkit"+s]="webkit"+l,v["Moz"+s]="moz"+l,v}var vi={animationend:Ho("Animation","AnimationEnd"),animationiteration:Ho("Animation","AnimationIteration"),animationstart:Ho("Animation","AnimationStart"),transitionend:Ho("Transition","TransitionEnd")},yc={},Gv={};u&&(Gv=document.createElement("div").style,"AnimationEvent"in window||(delete vi.animationend.animation,delete vi.animationiteration.animation,delete vi.animationstart.animation),"TransitionEvent"in window||delete vi.transitionend.transition);function Ko(s){if(yc[s])return yc[s];if(!vi[s])return s;var l=vi[s],v;for(v in l)if(l.hasOwnProperty(v)&&v in Gv)return yc[s]=l[v];return s}var Hv=Ko("animationend"),Kv=Ko("animationiteration"),Xv=Ko("animationstart"),Zv=Ko("transitionend"),Yv=new Map,Qv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Yn(s,l){Yv.set(s,l),i(l,[s])}for(var wc=0;wc<Qv.length;wc++){var xc=Qv[wc],Ux=xc.toLowerCase(),$x=xc[0].toUpperCase()+xc.slice(1);Yn(Ux,"on"+$x)}Yn(Hv,"onAnimationEnd"),Yn(Kv,"onAnimationIteration"),Yn(Xv,"onAnimationStart"),Yn("dblclick","onDoubleClick"),Yn("focusin","onFocus"),Yn("focusout","onBlur"),Yn(Zv,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _s="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Vx=new Set("cancel close invalid load scroll toggle".split(" ").concat(_s));function Jv(s,l,v){var w=s.type||"unknown-event";s.currentTarget=v,si(w,l,void 0,s),s.currentTarget=null}function ep(s,l){l=(l&4)!==0;for(var v=0;v<s.length;v++){var w=s[v],S=w.event;w=w.listeners;e:{var P=void 0;if(l)for(var j=w.length-1;0<=j;j--){var re=w[j],ue=re.instance,Te=re.currentTarget;if(re=re.listener,ue!==P&&S.isPropagationStopped())break e;Jv(S,re,Te),P=ue}else for(j=0;j<w.length;j++){if(re=w[j],ue=re.instance,Te=re.currentTarget,re=re.listener,ue!==P&&S.isPropagationStopped())break e;Jv(S,re,Te),P=ue}}}if(St)throw s=$r,St=!1,$r=null,s}function kt(s,l){var v=l[Pc];v===void 0&&(v=l[Pc]=new Set);var w=s+"__bubble";v.has(w)||(tp(l,s,2,!1),v.add(w))}function bc(s,l,v){var w=0;l&&(w|=4),tp(v,s,w,l)}var Xo="_reactListening"+Math.random().toString(36).slice(2);function Es(s){if(!s[Xo]){s[Xo]=!0,n.forEach(function(v){v!=="selectionchange"&&(Vx.has(v)||bc(v,!1,s),bc(v,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[Xo]||(l[Xo]=!0,bc("selectionchange",!1,l))}}function tp(s,l,v,w){switch(Sv(l)){case 1:var S=rx;break;case 4:S=nx;break;default:S=ac}v=S.bind(null,l,v,s),S=void 0,!Pt||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(S=!0),w?S!==void 0?s.addEventListener(l,v,{capture:!0,passive:S}):s.addEventListener(l,v,!0):S!==void 0?s.addEventListener(l,v,{passive:S}):s.addEventListener(l,v,!1)}function _c(s,l,v,w,S){var P=w;if((l&1)===0&&(l&2)===0&&w!==null)e:for(;;){if(w===null)return;var j=w.tag;if(j===3||j===4){var re=w.stateNode.containerInfo;if(re===S||re.nodeType===8&&re.parentNode===S)break;if(j===4)for(j=w.return;j!==null;){var ue=j.tag;if((ue===3||ue===4)&&(ue=j.stateNode.containerInfo,ue===S||ue.nodeType===8&&ue.parentNode===S))return;j=j.return}for(;re!==null;){if(j=Ia(re),j===null)return;if(ue=j.tag,ue===5||ue===6){w=P=j;continue e}re=re.parentNode}}w=w.return}Et(function(){var Te=P,Ne=Ie(v),Me=[];e:{var Le=Yv.get(s);if(Le!==void 0){var Ve=oc,He=s;switch(s){case"keypress":if(jo(v)===0)break e;case"keydown":case"keyup":Ve=yx;break;case"focusin":He="focus",Ve=cc;break;case"focusout":He="blur",Ve=cc;break;case"beforeblur":case"afterblur":Ve=cc;break;case"click":if(v.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ve=Tv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ve=sx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ve=bx;break;case Hv:case Kv:case Xv:Ve=lx;break;case Zv:Ve=Ex;break;case"scroll":Ve=ax;break;case"wheel":Ve=kx;break;case"copy":case"cut":case"paste":Ve=fx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ve=Rv}var Xe=(l&4)!==0,qt=!Xe&&s==="scroll",xe=Xe?Le!==null?Le+"Capture":null:Le;Xe=[];for(var fe=Te,Ee;fe!==null;){Ee=fe;var Fe=Ee.stateNode;if(Ee.tag===5&&Fe!==null&&(Ee=Fe,xe!==null&&(Fe=Vt(fe,xe),Fe!=null&&Xe.push(Ss(fe,Fe,Ee)))),qt)break;fe=fe.return}0<Xe.length&&(Le=new Ve(Le,He,null,v,Ne),Me.push({event:Le,listeners:Xe}))}}if((l&7)===0){e:{if(Le=s==="mouseover"||s==="pointerover",Ve=s==="mouseout"||s==="pointerout",Le&&v!==Oe&&(He=v.relatedTarget||v.fromElement)&&(Ia(He)||He[Rn]))break e;if((Ve||Le)&&(Le=Ne.window===Ne?Ne:(Le=Ne.ownerDocument)?Le.defaultView||Le.parentWindow:window,Ve?(He=v.relatedTarget||v.toElement,Ve=Te,He=He?Ia(He):null,He!==null&&(qt=Er(He),He!==qt||He.tag!==5&&He.tag!==6)&&(He=null)):(Ve=null,He=Te),Ve!==He)){if(Xe=Tv,Fe="onMouseLeave",xe="onMouseEnter",fe="mouse",(s==="pointerout"||s==="pointerover")&&(Xe=Rv,Fe="onPointerLeave",xe="onPointerEnter",fe="pointer"),qt=Ve==null?Le:mi(Ve),Ee=He==null?Le:mi(He),Le=new Xe(Fe,fe+"leave",Ve,v,Ne),Le.target=qt,Le.relatedTarget=Ee,Fe=null,Ia(Ne)===Te&&(Xe=new Xe(xe,fe+"enter",He,v,Ne),Xe.target=Ee,Xe.relatedTarget=qt,Fe=Xe),qt=Fe,Ve&&He)t:{for(Xe=Ve,xe=He,fe=0,Ee=Xe;Ee;Ee=pi(Ee))fe++;for(Ee=0,Fe=xe;Fe;Fe=pi(Fe))Ee++;for(;0<fe-Ee;)Xe=pi(Xe),fe--;for(;0<Ee-fe;)xe=pi(xe),Ee--;for(;fe--;){if(Xe===xe||xe!==null&&Xe===xe.alternate)break t;Xe=pi(Xe),xe=pi(xe)}Xe=null}else Xe=null;Ve!==null&&rp(Me,Le,Ve,Xe,!1),He!==null&&qt!==null&&rp(Me,qt,He,Xe,!0)}}e:{if(Le=Te?mi(Te):window,Ve=Le.nodeName&&Le.nodeName.toLowerCase(),Ve==="select"||Ve==="input"&&Le.type==="file")var Ze=Dx;else if(Nv(Le))if(Mv)Ze=Ox;else{Ze=Lx;var Qe=Ix}else(Ve=Le.nodeName)&&Ve.toLowerCase()==="input"&&(Le.type==="checkbox"||Le.type==="radio")&&(Ze=Nx);if(Ze&&(Ze=Ze(s,Te))){Ov(Me,Ze,v,Ne);break e}Qe&&Qe(s,Le,Te),s==="focusout"&&(Qe=Le._wrapperState)&&Qe.controlled&&Le.type==="number"&&ae(Le,"number",Le.value)}switch(Qe=Te?mi(Te):window,s){case"focusin":(Nv(Qe)||Qe.contentEditable==="true")&&(hi=Qe,gc=Te,bs=null);break;case"focusout":bs=gc=hi=null;break;case"mousedown":mc=!0;break;case"contextmenu":case"mouseup":case"dragend":mc=!1,Wv(Me,v,Ne);break;case"selectionchange":if(Fx)break;case"keydown":case"keyup":Wv(Me,v,Ne)}var Je;if(dc)e:{switch(s){case"compositionstart":var rt="onCompositionStart";break e;case"compositionend":rt="onCompositionEnd";break e;case"compositionupdate":rt="onCompositionUpdate";break e}rt=void 0}else di?Iv(s,v)&&(rt="onCompositionEnd"):s==="keydown"&&v.keyCode===229&&(rt="onCompositionStart");rt&&(Bv&&v.locale!=="ko"&&(di||rt!=="onCompositionStart"?rt==="onCompositionEnd"&&di&&(Je=kv()):(Zn=Ne,sc="value"in Zn?Zn.value:Zn.textContent,di=!0)),Qe=Zo(Te,rt),0<Qe.length&&(rt=new Pv(rt,s,null,v,Ne),Me.push({event:rt,listeners:Qe}),Je?rt.data=Je:(Je=Lv(v),Je!==null&&(rt.data=Je)))),(Je=Tx?Px(s,v):Rx(s,v))&&(Te=Zo(Te,"onBeforeInput"),0<Te.length&&(Ne=new Pv("onBeforeInput","beforeinput",null,v,Ne),Me.push({event:Ne,listeners:Te}),Ne.data=Je))}ep(Me,l)})}function Ss(s,l,v){return{instance:s,listener:l,currentTarget:v}}function Zo(s,l){for(var v=l+"Capture",w=[];s!==null;){var S=s,P=S.stateNode;S.tag===5&&P!==null&&(S=P,P=Vt(s,v),P!=null&&w.unshift(Ss(s,P,S)),P=Vt(s,l),P!=null&&w.push(Ss(s,P,S))),s=s.return}return w}function pi(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function rp(s,l,v,w,S){for(var P=l._reactName,j=[];v!==null&&v!==w;){var re=v,ue=re.alternate,Te=re.stateNode;if(ue!==null&&ue===w)break;re.tag===5&&Te!==null&&(re=Te,S?(ue=Vt(v,P),ue!=null&&j.unshift(Ss(v,ue,re))):S||(ue=Vt(v,P),ue!=null&&j.push(Ss(v,ue,re)))),v=v.return}j.length!==0&&s.push({event:l,listeners:j})}var jx=/\r\n?/g,qx=/\u0000|\uFFFD/g;function np(s){return(typeof s=="string"?s:""+s).replace(jx,`
`).replace(qx,"")}function Yo(s,l,v){if(l=np(l),np(s)!==l&&v)throw Error(t(425))}function Qo(){}var Ec=null,Sc=null;function kc(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Cc=typeof setTimeout=="function"?setTimeout:void 0,Wx=typeof clearTimeout=="function"?clearTimeout:void 0,ap=typeof Promise=="function"?Promise:void 0,Gx=typeof queueMicrotask=="function"?queueMicrotask:typeof ap<"u"?function(s){return ap.resolve(null).then(s).catch(Hx)}:Cc;function Hx(s){setTimeout(function(){throw s})}function Tc(s,l){var v=l,w=0;do{var S=v.nextSibling;if(s.removeChild(v),S&&S.nodeType===8)if(v=S.data,v==="/$"){if(w===0){s.removeChild(S),vs(l);return}w--}else v!=="$"&&v!=="$?"&&v!=="$!"||w++;v=S}while(v);vs(l)}function Qn(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return s}function ip(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var v=s.data;if(v==="$"||v==="$!"||v==="$?"){if(l===0)return s;l--}else v==="/$"&&l++}s=s.previousSibling}return null}var gi=Math.random().toString(36).slice(2),mn="__reactFiber$"+gi,ks="__reactProps$"+gi,Rn="__reactContainer$"+gi,Pc="__reactEvents$"+gi,Kx="__reactListeners$"+gi,Xx="__reactHandles$"+gi;function Ia(s){var l=s[mn];if(l)return l;for(var v=s.parentNode;v;){if(l=v[Rn]||v[mn]){if(v=l.alternate,l.child!==null||v!==null&&v.child!==null)for(s=ip(s);s!==null;){if(v=s[mn])return v;s=ip(s)}return l}s=v,v=s.parentNode}return null}function Cs(s){return s=s[mn]||s[Rn],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function mi(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(t(33))}function Jo(s){return s[ks]||null}var Rc=[],yi=-1;function Jn(s){return{current:s}}function Ct(s){0>yi||(s.current=Rc[yi],Rc[yi]=null,yi--)}function xt(s,l){yi++,Rc[yi]=s.current,s.current=l}var ea={},gr=Jn(ea),Ar=Jn(!1),La=ea;function wi(s,l){var v=s.type.contextTypes;if(!v)return ea;var w=s.stateNode;if(w&&w.__reactInternalMemoizedUnmaskedChildContext===l)return w.__reactInternalMemoizedMaskedChildContext;var S={},P;for(P in v)S[P]=l[P];return w&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=l,s.__reactInternalMemoizedMaskedChildContext=S),S}function Dr(s){return s=s.childContextTypes,s!=null}function eu(){Ct(Ar),Ct(gr)}function sp(s,l,v){if(gr.current!==ea)throw Error(t(168));xt(gr,l),xt(Ar,v)}function op(s,l,v){var w=s.stateNode;if(l=l.childContextTypes,typeof w.getChildContext!="function")return v;w=w.getChildContext();for(var S in w)if(!(S in l))throw Error(t(108,Pe(s)||"Unknown",S));return te({},v,w)}function tu(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||ea,La=gr.current,xt(gr,s),xt(Ar,Ar.current),!0}function up(s,l,v){var w=s.stateNode;if(!w)throw Error(t(169));v?(s=op(s,l,La),w.__reactInternalMemoizedMergedChildContext=s,Ct(Ar),Ct(gr),xt(gr,s)):Ct(Ar),xt(Ar,v)}var Bn=null,ru=!1,Bc=!1;function lp(s){Bn===null?Bn=[s]:Bn.push(s)}function Zx(s){ru=!0,lp(s)}function ta(){if(!Bc&&Bn!==null){Bc=!0;var s=0,l=mt;try{var v=Bn;for(mt=1;s<v.length;s++){var w=v[s];do w=w(!0);while(w!==null)}Bn=null,ru=!1}catch(S){throw Bn!==null&&(Bn=Bn.slice(s+1)),is(ss,ta),S}finally{mt=l,Bc=!1}}return null}var xi=[],bi=0,nu=null,au=0,Kr=[],Xr=0,Na=null,An=1,Dn="";function Oa(s,l){xi[bi++]=au,xi[bi++]=nu,nu=s,au=l}function cp(s,l,v){Kr[Xr++]=An,Kr[Xr++]=Dn,Kr[Xr++]=Na,Na=s;var w=An;s=Dn;var S=32-Nt(w)-1;w&=~(1<<S),v+=1;var P=32-Nt(l)+S;if(30<P){var j=S-S%5;P=(w&(1<<j)-1).toString(32),w>>=j,S-=j,An=1<<32-Nt(l)+S|v<<S|w,Dn=P+s}else An=1<<P|v<<S|w,Dn=s}function Ac(s){s.return!==null&&(Oa(s,1),cp(s,1,0))}function Dc(s){for(;s===nu;)nu=xi[--bi],xi[bi]=null,au=xi[--bi],xi[bi]=null;for(;s===Na;)Na=Kr[--Xr],Kr[Xr]=null,Dn=Kr[--Xr],Kr[Xr]=null,An=Kr[--Xr],Kr[Xr]=null}var qr=null,Wr=null,Bt=!1,on=null;function fp(s,l){var v=Jr(5,null,null,0);v.elementType="DELETED",v.stateNode=l,v.return=s,l=s.deletions,l===null?(s.deletions=[v],s.flags|=16):l.push(v)}function dp(s,l){switch(s.tag){case 5:var v=s.type;return l=l.nodeType!==1||v.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(s.stateNode=l,qr=s,Wr=Qn(l.firstChild),!0):!1;case 6:return l=s.pendingProps===""||l.nodeType!==3?null:l,l!==null?(s.stateNode=l,qr=s,Wr=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(v=Na!==null?{id:An,overflow:Dn}:null,s.memoizedState={dehydrated:l,treeContext:v,retryLane:1073741824},v=Jr(18,null,null,0),v.stateNode=l,v.return=s,s.child=v,qr=s,Wr=null,!0):!1;default:return!1}}function Ic(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Lc(s){if(Bt){var l=Wr;if(l){var v=l;if(!dp(s,l)){if(Ic(s))throw Error(t(418));l=Qn(v.nextSibling);var w=qr;l&&dp(s,l)?fp(w,v):(s.flags=s.flags&-4097|2,Bt=!1,qr=s)}}else{if(Ic(s))throw Error(t(418));s.flags=s.flags&-4097|2,Bt=!1,qr=s}}}function hp(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;qr=s}function iu(s){if(s!==qr)return!1;if(!Bt)return hp(s),Bt=!0,!1;var l;if((l=s.tag!==3)&&!(l=s.tag!==5)&&(l=s.type,l=l!=="head"&&l!=="body"&&!kc(s.type,s.memoizedProps)),l&&(l=Wr)){if(Ic(s))throw vp(),Error(t(418));for(;l;)fp(s,l),l=Qn(l.nextSibling)}if(hp(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(t(317));e:{for(s=s.nextSibling,l=0;s;){if(s.nodeType===8){var v=s.data;if(v==="/$"){if(l===0){Wr=Qn(s.nextSibling);break e}l--}else v!=="$"&&v!=="$!"&&v!=="$?"||l++}s=s.nextSibling}Wr=null}}else Wr=qr?Qn(s.stateNode.nextSibling):null;return!0}function vp(){for(var s=Wr;s;)s=Qn(s.nextSibling)}function _i(){Wr=qr=null,Bt=!1}function Nc(s){on===null?on=[s]:on.push(s)}var Yx=C.ReactCurrentBatchConfig;function Ts(s,l,v){if(s=v.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(v._owner){if(v=v._owner,v){if(v.tag!==1)throw Error(t(309));var w=v.stateNode}if(!w)throw Error(t(147,s));var S=w,P=""+s;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===P?l.ref:(l=function(j){var re=S.refs;j===null?delete re[P]:re[P]=j},l._stringRef=P,l)}if(typeof s!="string")throw Error(t(284));if(!v._owner)throw Error(t(290,s))}return s}function su(s,l){throw s=Object.prototype.toString.call(l),Error(t(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s))}function pp(s){var l=s._init;return l(s._payload)}function gp(s){function l(xe,fe){if(s){var Ee=xe.deletions;Ee===null?(xe.deletions=[fe],xe.flags|=16):Ee.push(fe)}}function v(xe,fe){if(!s)return null;for(;fe!==null;)l(xe,fe),fe=fe.sibling;return null}function w(xe,fe){for(xe=new Map;fe!==null;)fe.key!==null?xe.set(fe.key,fe):xe.set(fe.index,fe),fe=fe.sibling;return xe}function S(xe,fe){return xe=la(xe,fe),xe.index=0,xe.sibling=null,xe}function P(xe,fe,Ee){return xe.index=Ee,s?(Ee=xe.alternate,Ee!==null?(Ee=Ee.index,Ee<fe?(xe.flags|=2,fe):Ee):(xe.flags|=2,fe)):(xe.flags|=1048576,fe)}function j(xe){return s&&xe.alternate===null&&(xe.flags|=2),xe}function re(xe,fe,Ee,Fe){return fe===null||fe.tag!==6?(fe=Tf(Ee,xe.mode,Fe),fe.return=xe,fe):(fe=S(fe,Ee),fe.return=xe,fe)}function ue(xe,fe,Ee,Fe){var Ze=Ee.type;return Ze===A?Ne(xe,fe,Ee.props.children,Fe,Ee.key):fe!==null&&(fe.elementType===Ze||typeof Ze=="object"&&Ze!==null&&Ze.$$typeof===Q&&pp(Ze)===fe.type)?(Fe=S(fe,Ee.props),Fe.ref=Ts(xe,fe,Ee),Fe.return=xe,Fe):(Fe=Bu(Ee.type,Ee.key,Ee.props,null,xe.mode,Fe),Fe.ref=Ts(xe,fe,Ee),Fe.return=xe,Fe)}function Te(xe,fe,Ee,Fe){return fe===null||fe.tag!==4||fe.stateNode.containerInfo!==Ee.containerInfo||fe.stateNode.implementation!==Ee.implementation?(fe=Pf(Ee,xe.mode,Fe),fe.return=xe,fe):(fe=S(fe,Ee.children||[]),fe.return=xe,fe)}function Ne(xe,fe,Ee,Fe,Ze){return fe===null||fe.tag!==7?(fe=qa(Ee,xe.mode,Fe,Ze),fe.return=xe,fe):(fe=S(fe,Ee),fe.return=xe,fe)}function Me(xe,fe,Ee){if(typeof fe=="string"&&fe!==""||typeof fe=="number")return fe=Tf(""+fe,xe.mode,Ee),fe.return=xe,fe;if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case B:return Ee=Bu(fe.type,fe.key,fe.props,null,xe.mode,Ee),Ee.ref=Ts(xe,null,fe),Ee.return=xe,Ee;case N:return fe=Pf(fe,xe.mode,Ee),fe.return=xe,fe;case Q:var Fe=fe._init;return Me(xe,Fe(fe._payload),Ee)}if(he(fe)||Z(fe))return fe=qa(fe,xe.mode,Ee,null),fe.return=xe,fe;su(xe,fe)}return null}function Le(xe,fe,Ee,Fe){var Ze=fe!==null?fe.key:null;if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number")return Ze!==null?null:re(xe,fe,""+Ee,Fe);if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case B:return Ee.key===Ze?ue(xe,fe,Ee,Fe):null;case N:return Ee.key===Ze?Te(xe,fe,Ee,Fe):null;case Q:return Ze=Ee._init,Le(xe,fe,Ze(Ee._payload),Fe)}if(he(Ee)||Z(Ee))return Ze!==null?null:Ne(xe,fe,Ee,Fe,null);su(xe,Ee)}return null}function Ve(xe,fe,Ee,Fe,Ze){if(typeof Fe=="string"&&Fe!==""||typeof Fe=="number")return xe=xe.get(Ee)||null,re(fe,xe,""+Fe,Ze);if(typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case B:return xe=xe.get(Fe.key===null?Ee:Fe.key)||null,ue(fe,xe,Fe,Ze);case N:return xe=xe.get(Fe.key===null?Ee:Fe.key)||null,Te(fe,xe,Fe,Ze);case Q:var Qe=Fe._init;return Ve(xe,fe,Ee,Qe(Fe._payload),Ze)}if(he(Fe)||Z(Fe))return xe=xe.get(Ee)||null,Ne(fe,xe,Fe,Ze,null);su(fe,Fe)}return null}function He(xe,fe,Ee,Fe){for(var Ze=null,Qe=null,Je=fe,rt=fe=0,nr=null;Je!==null&&rt<Ee.length;rt++){Je.index>rt?(nr=Je,Je=null):nr=Je.sibling;var ht=Le(xe,Je,Ee[rt],Fe);if(ht===null){Je===null&&(Je=nr);break}s&&Je&&ht.alternate===null&&l(xe,Je),fe=P(ht,fe,rt),Qe===null?Ze=ht:Qe.sibling=ht,Qe=ht,Je=nr}if(rt===Ee.length)return v(xe,Je),Bt&&Oa(xe,rt),Ze;if(Je===null){for(;rt<Ee.length;rt++)Je=Me(xe,Ee[rt],Fe),Je!==null&&(fe=P(Je,fe,rt),Qe===null?Ze=Je:Qe.sibling=Je,Qe=Je);return Bt&&Oa(xe,rt),Ze}for(Je=w(xe,Je);rt<Ee.length;rt++)nr=Ve(Je,xe,rt,Ee[rt],Fe),nr!==null&&(s&&nr.alternate!==null&&Je.delete(nr.key===null?rt:nr.key),fe=P(nr,fe,rt),Qe===null?Ze=nr:Qe.sibling=nr,Qe=nr);return s&&Je.forEach(function(ca){return l(xe,ca)}),Bt&&Oa(xe,rt),Ze}function Xe(xe,fe,Ee,Fe){var Ze=Z(Ee);if(typeof Ze!="function")throw Error(t(150));if(Ee=Ze.call(Ee),Ee==null)throw Error(t(151));for(var Qe=Ze=null,Je=fe,rt=fe=0,nr=null,ht=Ee.next();Je!==null&&!ht.done;rt++,ht=Ee.next()){Je.index>rt?(nr=Je,Je=null):nr=Je.sibling;var ca=Le(xe,Je,ht.value,Fe);if(ca===null){Je===null&&(Je=nr);break}s&&Je&&ca.alternate===null&&l(xe,Je),fe=P(ca,fe,rt),Qe===null?Ze=ca:Qe.sibling=ca,Qe=ca,Je=nr}if(ht.done)return v(xe,Je),Bt&&Oa(xe,rt),Ze;if(Je===null){for(;!ht.done;rt++,ht=Ee.next())ht=Me(xe,ht.value,Fe),ht!==null&&(fe=P(ht,fe,rt),Qe===null?Ze=ht:Qe.sibling=ht,Qe=ht);return Bt&&Oa(xe,rt),Ze}for(Je=w(xe,Je);!ht.done;rt++,ht=Ee.next())ht=Ve(Je,xe,rt,ht.value,Fe),ht!==null&&(s&&ht.alternate!==null&&Je.delete(ht.key===null?rt:ht.key),fe=P(ht,fe,rt),Qe===null?Ze=ht:Qe.sibling=ht,Qe=ht);return s&&Je.forEach(function(Bb){return l(xe,Bb)}),Bt&&Oa(xe,rt),Ze}function qt(xe,fe,Ee,Fe){if(typeof Ee=="object"&&Ee!==null&&Ee.type===A&&Ee.key===null&&(Ee=Ee.props.children),typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case B:e:{for(var Ze=Ee.key,Qe=fe;Qe!==null;){if(Qe.key===Ze){if(Ze=Ee.type,Ze===A){if(Qe.tag===7){v(xe,Qe.sibling),fe=S(Qe,Ee.props.children),fe.return=xe,xe=fe;break e}}else if(Qe.elementType===Ze||typeof Ze=="object"&&Ze!==null&&Ze.$$typeof===Q&&pp(Ze)===Qe.type){v(xe,Qe.sibling),fe=S(Qe,Ee.props),fe.ref=Ts(xe,Qe,Ee),fe.return=xe,xe=fe;break e}v(xe,Qe);break}else l(xe,Qe);Qe=Qe.sibling}Ee.type===A?(fe=qa(Ee.props.children,xe.mode,Fe,Ee.key),fe.return=xe,xe=fe):(Fe=Bu(Ee.type,Ee.key,Ee.props,null,xe.mode,Fe),Fe.ref=Ts(xe,fe,Ee),Fe.return=xe,xe=Fe)}return j(xe);case N:e:{for(Qe=Ee.key;fe!==null;){if(fe.key===Qe)if(fe.tag===4&&fe.stateNode.containerInfo===Ee.containerInfo&&fe.stateNode.implementation===Ee.implementation){v(xe,fe.sibling),fe=S(fe,Ee.children||[]),fe.return=xe,xe=fe;break e}else{v(xe,fe);break}else l(xe,fe);fe=fe.sibling}fe=Pf(Ee,xe.mode,Fe),fe.return=xe,xe=fe}return j(xe);case Q:return Qe=Ee._init,qt(xe,fe,Qe(Ee._payload),Fe)}if(he(Ee))return He(xe,fe,Ee,Fe);if(Z(Ee))return Xe(xe,fe,Ee,Fe);su(xe,Ee)}return typeof Ee=="string"&&Ee!==""||typeof Ee=="number"?(Ee=""+Ee,fe!==null&&fe.tag===6?(v(xe,fe.sibling),fe=S(fe,Ee),fe.return=xe,xe=fe):(v(xe,fe),fe=Tf(Ee,xe.mode,Fe),fe.return=xe,xe=fe),j(xe)):v(xe,fe)}return qt}var Ei=gp(!0),mp=gp(!1),ou=Jn(null),uu=null,Si=null,Oc=null;function Mc(){Oc=Si=uu=null}function zc(s){var l=ou.current;Ct(ou),s._currentValue=l}function Fc(s,l,v){for(;s!==null;){var w=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,w!==null&&(w.childLanes|=l)):w!==null&&(w.childLanes&l)!==l&&(w.childLanes|=l),s===v)break;s=s.return}}function ki(s,l){uu=s,Oc=Si=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&l)!==0&&(Ir=!0),s.firstContext=null)}function Zr(s){var l=s._currentValue;if(Oc!==s)if(s={context:s,memoizedValue:l,next:null},Si===null){if(uu===null)throw Error(t(308));Si=s,uu.dependencies={lanes:0,firstContext:s}}else Si=Si.next=s;return l}var Ma=null;function Uc(s){Ma===null?Ma=[s]:Ma.push(s)}function yp(s,l,v,w){var S=l.interleaved;return S===null?(v.next=v,Uc(l)):(v.next=S.next,S.next=v),l.interleaved=v,In(s,w)}function In(s,l){s.lanes|=l;var v=s.alternate;for(v!==null&&(v.lanes|=l),v=s,s=s.return;s!==null;)s.childLanes|=l,v=s.alternate,v!==null&&(v.childLanes|=l),v=s,s=s.return;return v.tag===3?v.stateNode:null}var ra=!1;function $c(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wp(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Ln(s,l){return{eventTime:s,lane:l,tag:0,payload:null,callback:null,next:null}}function na(s,l,v){var w=s.updateQueue;if(w===null)return null;if(w=w.shared,(ct&2)!==0){var S=w.pending;return S===null?l.next=l:(l.next=S.next,S.next=l),w.pending=l,In(s,v)}return S=w.interleaved,S===null?(l.next=l,Uc(w)):(l.next=S.next,S.next=l),w.interleaved=l,In(s,v)}function lu(s,l,v){if(l=l.updateQueue,l!==null&&(l=l.shared,(v&4194240)!==0)){var w=l.lanes;w&=s.pendingLanes,v|=w,l.lanes=v,tc(s,v)}}function xp(s,l){var v=s.updateQueue,w=s.alternate;if(w!==null&&(w=w.updateQueue,v===w)){var S=null,P=null;if(v=v.firstBaseUpdate,v!==null){do{var j={eventTime:v.eventTime,lane:v.lane,tag:v.tag,payload:v.payload,callback:v.callback,next:null};P===null?S=P=j:P=P.next=j,v=v.next}while(v!==null);P===null?S=P=l:P=P.next=l}else S=P=l;v={baseState:w.baseState,firstBaseUpdate:S,lastBaseUpdate:P,shared:w.shared,effects:w.effects},s.updateQueue=v;return}s=v.lastBaseUpdate,s===null?v.firstBaseUpdate=l:s.next=l,v.lastBaseUpdate=l}function cu(s,l,v,w){var S=s.updateQueue;ra=!1;var P=S.firstBaseUpdate,j=S.lastBaseUpdate,re=S.shared.pending;if(re!==null){S.shared.pending=null;var ue=re,Te=ue.next;ue.next=null,j===null?P=Te:j.next=Te,j=ue;var Ne=s.alternate;Ne!==null&&(Ne=Ne.updateQueue,re=Ne.lastBaseUpdate,re!==j&&(re===null?Ne.firstBaseUpdate=Te:re.next=Te,Ne.lastBaseUpdate=ue))}if(P!==null){var Me=S.baseState;j=0,Ne=Te=ue=null,re=P;do{var Le=re.lane,Ve=re.eventTime;if((w&Le)===Le){Ne!==null&&(Ne=Ne.next={eventTime:Ve,lane:0,tag:re.tag,payload:re.payload,callback:re.callback,next:null});e:{var He=s,Xe=re;switch(Le=l,Ve=v,Xe.tag){case 1:if(He=Xe.payload,typeof He=="function"){Me=He.call(Ve,Me,Le);break e}Me=He;break e;case 3:He.flags=He.flags&-65537|128;case 0:if(He=Xe.payload,Le=typeof He=="function"?He.call(Ve,Me,Le):He,Le==null)break e;Me=te({},Me,Le);break e;case 2:ra=!0}}re.callback!==null&&re.lane!==0&&(s.flags|=64,Le=S.effects,Le===null?S.effects=[re]:Le.push(re))}else Ve={eventTime:Ve,lane:Le,tag:re.tag,payload:re.payload,callback:re.callback,next:null},Ne===null?(Te=Ne=Ve,ue=Me):Ne=Ne.next=Ve,j|=Le;if(re=re.next,re===null){if(re=S.shared.pending,re===null)break;Le=re,re=Le.next,Le.next=null,S.lastBaseUpdate=Le,S.shared.pending=null}}while(!0);if(Ne===null&&(ue=Me),S.baseState=ue,S.firstBaseUpdate=Te,S.lastBaseUpdate=Ne,l=S.shared.interleaved,l!==null){S=l;do j|=S.lane,S=S.next;while(S!==l)}else P===null&&(S.shared.lanes=0);Ua|=j,s.lanes=j,s.memoizedState=Me}}function bp(s,l,v){if(s=l.effects,l.effects=null,s!==null)for(l=0;l<s.length;l++){var w=s[l],S=w.callback;if(S!==null){if(w.callback=null,w=v,typeof S!="function")throw Error(t(191,S));S.call(w)}}}var Ps={},yn=Jn(Ps),Rs=Jn(Ps),Bs=Jn(Ps);function za(s){if(s===Ps)throw Error(t(174));return s}function Vc(s,l){switch(xt(Bs,l),xt(Rs,s),xt(yn,Ps),s=l.nodeType,s){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:$(null,"");break;default:s=s===8?l.parentNode:l,l=s.namespaceURI||null,s=s.tagName,l=$(l,s)}Ct(yn),xt(yn,l)}function Ci(){Ct(yn),Ct(Rs),Ct(Bs)}function _p(s){za(Bs.current);var l=za(yn.current),v=$(l,s.type);l!==v&&(xt(Rs,s),xt(yn,v))}function jc(s){Rs.current===s&&(Ct(yn),Ct(Rs))}var Ot=Jn(0);function fu(s){for(var l=s;l!==null;){if(l.tag===13){var v=l.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||v.data==="$?"||v.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var qc=[];function Wc(){for(var s=0;s<qc.length;s++)qc[s]._workInProgressVersionPrimary=null;qc.length=0}var du=C.ReactCurrentDispatcher,Gc=C.ReactCurrentBatchConfig,Fa=0,Mt=null,Xt=null,tr=null,hu=!1,As=!1,Ds=0,Qx=0;function mr(){throw Error(t(321))}function Hc(s,l){if(l===null)return!1;for(var v=0;v<l.length&&v<s.length;v++)if(!sn(s[v],l[v]))return!1;return!0}function Kc(s,l,v,w,S,P){if(Fa=P,Mt=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,du.current=s===null||s.memoizedState===null?rb:nb,s=v(w,S),As){P=0;do{if(As=!1,Ds=0,25<=P)throw Error(t(301));P+=1,tr=Xt=null,l.updateQueue=null,du.current=ab,s=v(w,S)}while(As)}if(du.current=gu,l=Xt!==null&&Xt.next!==null,Fa=0,tr=Xt=Mt=null,hu=!1,l)throw Error(t(300));return s}function Xc(){var s=Ds!==0;return Ds=0,s}function wn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tr===null?Mt.memoizedState=tr=s:tr=tr.next=s,tr}function Yr(){if(Xt===null){var s=Mt.alternate;s=s!==null?s.memoizedState:null}else s=Xt.next;var l=tr===null?Mt.memoizedState:tr.next;if(l!==null)tr=l,Xt=s;else{if(s===null)throw Error(t(310));Xt=s,s={memoizedState:Xt.memoizedState,baseState:Xt.baseState,baseQueue:Xt.baseQueue,queue:Xt.queue,next:null},tr===null?Mt.memoizedState=tr=s:tr=tr.next=s}return tr}function Is(s,l){return typeof l=="function"?l(s):l}function Zc(s){var l=Yr(),v=l.queue;if(v===null)throw Error(t(311));v.lastRenderedReducer=s;var w=Xt,S=w.baseQueue,P=v.pending;if(P!==null){if(S!==null){var j=S.next;S.next=P.next,P.next=j}w.baseQueue=S=P,v.pending=null}if(S!==null){P=S.next,w=w.baseState;var re=j=null,ue=null,Te=P;do{var Ne=Te.lane;if((Fa&Ne)===Ne)ue!==null&&(ue=ue.next={lane:0,action:Te.action,hasEagerState:Te.hasEagerState,eagerState:Te.eagerState,next:null}),w=Te.hasEagerState?Te.eagerState:s(w,Te.action);else{var Me={lane:Ne,action:Te.action,hasEagerState:Te.hasEagerState,eagerState:Te.eagerState,next:null};ue===null?(re=ue=Me,j=w):ue=ue.next=Me,Mt.lanes|=Ne,Ua|=Ne}Te=Te.next}while(Te!==null&&Te!==P);ue===null?j=w:ue.next=re,sn(w,l.memoizedState)||(Ir=!0),l.memoizedState=w,l.baseState=j,l.baseQueue=ue,v.lastRenderedState=w}if(s=v.interleaved,s!==null){S=s;do P=S.lane,Mt.lanes|=P,Ua|=P,S=S.next;while(S!==s)}else S===null&&(v.lanes=0);return[l.memoizedState,v.dispatch]}function Yc(s){var l=Yr(),v=l.queue;if(v===null)throw Error(t(311));v.lastRenderedReducer=s;var w=v.dispatch,S=v.pending,P=l.memoizedState;if(S!==null){v.pending=null;var j=S=S.next;do P=s(P,j.action),j=j.next;while(j!==S);sn(P,l.memoizedState)||(Ir=!0),l.memoizedState=P,l.baseQueue===null&&(l.baseState=P),v.lastRenderedState=P}return[P,w]}function Ep(){}function Sp(s,l){var v=Mt,w=Yr(),S=l(),P=!sn(w.memoizedState,S);if(P&&(w.memoizedState=S,Ir=!0),w=w.queue,Qc(Tp.bind(null,v,w,s),[s]),w.getSnapshot!==l||P||tr!==null&&tr.memoizedState.tag&1){if(v.flags|=2048,Ls(9,Cp.bind(null,v,w,S,l),void 0,null),rr===null)throw Error(t(349));(Fa&30)!==0||kp(v,l,S)}return S}function kp(s,l,v){s.flags|=16384,s={getSnapshot:l,value:v},l=Mt.updateQueue,l===null?(l={lastEffect:null,stores:null},Mt.updateQueue=l,l.stores=[s]):(v=l.stores,v===null?l.stores=[s]:v.push(s))}function Cp(s,l,v,w){l.value=v,l.getSnapshot=w,Pp(l)&&Rp(s)}function Tp(s,l,v){return v(function(){Pp(l)&&Rp(s)})}function Pp(s){var l=s.getSnapshot;s=s.value;try{var v=l();return!sn(s,v)}catch{return!0}}function Rp(s){var l=In(s,1);l!==null&&fn(l,s,1,-1)}function Bp(s){var l=wn();return typeof s=="function"&&(s=s()),l.memoizedState=l.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Is,lastRenderedState:s},l.queue=s,s=s.dispatch=tb.bind(null,Mt,s),[l.memoizedState,s]}function Ls(s,l,v,w){return s={tag:s,create:l,destroy:v,deps:w,next:null},l=Mt.updateQueue,l===null?(l={lastEffect:null,stores:null},Mt.updateQueue=l,l.lastEffect=s.next=s):(v=l.lastEffect,v===null?l.lastEffect=s.next=s:(w=v.next,v.next=s,s.next=w,l.lastEffect=s)),s}function Ap(){return Yr().memoizedState}function vu(s,l,v,w){var S=wn();Mt.flags|=s,S.memoizedState=Ls(1|l,v,void 0,w===void 0?null:w)}function pu(s,l,v,w){var S=Yr();w=w===void 0?null:w;var P=void 0;if(Xt!==null){var j=Xt.memoizedState;if(P=j.destroy,w!==null&&Hc(w,j.deps)){S.memoizedState=Ls(l,v,P,w);return}}Mt.flags|=s,S.memoizedState=Ls(1|l,v,P,w)}function Dp(s,l){return vu(8390656,8,s,l)}function Qc(s,l){return pu(2048,8,s,l)}function Ip(s,l){return pu(4,2,s,l)}function Lp(s,l){return pu(4,4,s,l)}function Np(s,l){if(typeof l=="function")return s=s(),l(s),function(){l(null)};if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function Op(s,l,v){return v=v!=null?v.concat([s]):null,pu(4,4,Np.bind(null,l,s),v)}function Jc(){}function Mp(s,l){var v=Yr();l=l===void 0?null:l;var w=v.memoizedState;return w!==null&&l!==null&&Hc(l,w[1])?w[0]:(v.memoizedState=[s,l],s)}function zp(s,l){var v=Yr();l=l===void 0?null:l;var w=v.memoizedState;return w!==null&&l!==null&&Hc(l,w[1])?w[0]:(s=s(),v.memoizedState=[s,l],s)}function Fp(s,l,v){return(Fa&21)===0?(s.baseState&&(s.baseState=!1,Ir=!0),s.memoizedState=v):(sn(v,l)||(v=pv(),Mt.lanes|=v,Ua|=v,s.baseState=!0),l)}function Jx(s,l){var v=mt;mt=v!==0&&4>v?v:4,s(!0);var w=Gc.transition;Gc.transition={};try{s(!1),l()}finally{mt=v,Gc.transition=w}}function Up(){return Yr().memoizedState}function eb(s,l,v){var w=oa(s);if(v={lane:w,action:v,hasEagerState:!1,eagerState:null,next:null},$p(s))Vp(l,v);else if(v=yp(s,l,v,w),v!==null){var S=Cr();fn(v,s,w,S),jp(v,l,w)}}function tb(s,l,v){var w=oa(s),S={lane:w,action:v,hasEagerState:!1,eagerState:null,next:null};if($p(s))Vp(l,S);else{var P=s.alternate;if(s.lanes===0&&(P===null||P.lanes===0)&&(P=l.lastRenderedReducer,P!==null))try{var j=l.lastRenderedState,re=P(j,v);if(S.hasEagerState=!0,S.eagerState=re,sn(re,j)){var ue=l.interleaved;ue===null?(S.next=S,Uc(l)):(S.next=ue.next,ue.next=S),l.interleaved=S;return}}catch{}finally{}v=yp(s,l,S,w),v!==null&&(S=Cr(),fn(v,s,w,S),jp(v,l,w))}}function $p(s){var l=s.alternate;return s===Mt||l!==null&&l===Mt}function Vp(s,l){As=hu=!0;var v=s.pending;v===null?l.next=l:(l.next=v.next,v.next=l),s.pending=l}function jp(s,l,v){if((v&4194240)!==0){var w=l.lanes;w&=s.pendingLanes,v|=w,l.lanes=v,tc(s,v)}}var gu={readContext:Zr,useCallback:mr,useContext:mr,useEffect:mr,useImperativeHandle:mr,useInsertionEffect:mr,useLayoutEffect:mr,useMemo:mr,useReducer:mr,useRef:mr,useState:mr,useDebugValue:mr,useDeferredValue:mr,useTransition:mr,useMutableSource:mr,useSyncExternalStore:mr,useId:mr,unstable_isNewReconciler:!1},rb={readContext:Zr,useCallback:function(s,l){return wn().memoizedState=[s,l===void 0?null:l],s},useContext:Zr,useEffect:Dp,useImperativeHandle:function(s,l,v){return v=v!=null?v.concat([s]):null,vu(4194308,4,Np.bind(null,l,s),v)},useLayoutEffect:function(s,l){return vu(4194308,4,s,l)},useInsertionEffect:function(s,l){return vu(4,2,s,l)},useMemo:function(s,l){var v=wn();return l=l===void 0?null:l,s=s(),v.memoizedState=[s,l],s},useReducer:function(s,l,v){var w=wn();return l=v!==void 0?v(l):l,w.memoizedState=w.baseState=l,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:l},w.queue=s,s=s.dispatch=eb.bind(null,Mt,s),[w.memoizedState,s]},useRef:function(s){var l=wn();return s={current:s},l.memoizedState=s},useState:Bp,useDebugValue:Jc,useDeferredValue:function(s){return wn().memoizedState=s},useTransition:function(){var s=Bp(!1),l=s[0];return s=Jx.bind(null,s[1]),wn().memoizedState=s,[l,s]},useMutableSource:function(){},useSyncExternalStore:function(s,l,v){var w=Mt,S=wn();if(Bt){if(v===void 0)throw Error(t(407));v=v()}else{if(v=l(),rr===null)throw Error(t(349));(Fa&30)!==0||kp(w,l,v)}S.memoizedState=v;var P={value:v,getSnapshot:l};return S.queue=P,Dp(Tp.bind(null,w,P,s),[s]),w.flags|=2048,Ls(9,Cp.bind(null,w,P,v,l),void 0,null),v},useId:function(){var s=wn(),l=rr.identifierPrefix;if(Bt){var v=Dn,w=An;v=(w&~(1<<32-Nt(w)-1)).toString(32)+v,l=":"+l+"R"+v,v=Ds++,0<v&&(l+="H"+v.toString(32)),l+=":"}else v=Qx++,l=":"+l+"r"+v.toString(32)+":";return s.memoizedState=l},unstable_isNewReconciler:!1},nb={readContext:Zr,useCallback:Mp,useContext:Zr,useEffect:Qc,useImperativeHandle:Op,useInsertionEffect:Ip,useLayoutEffect:Lp,useMemo:zp,useReducer:Zc,useRef:Ap,useState:function(){return Zc(Is)},useDebugValue:Jc,useDeferredValue:function(s){var l=Yr();return Fp(l,Xt.memoizedState,s)},useTransition:function(){var s=Zc(Is)[0],l=Yr().memoizedState;return[s,l]},useMutableSource:Ep,useSyncExternalStore:Sp,useId:Up,unstable_isNewReconciler:!1},ab={readContext:Zr,useCallback:Mp,useContext:Zr,useEffect:Qc,useImperativeHandle:Op,useInsertionEffect:Ip,useLayoutEffect:Lp,useMemo:zp,useReducer:Yc,useRef:Ap,useState:function(){return Yc(Is)},useDebugValue:Jc,useDeferredValue:function(s){var l=Yr();return Xt===null?l.memoizedState=s:Fp(l,Xt.memoizedState,s)},useTransition:function(){var s=Yc(Is)[0],l=Yr().memoizedState;return[s,l]},useMutableSource:Ep,useSyncExternalStore:Sp,useId:Up,unstable_isNewReconciler:!1};function un(s,l){if(s&&s.defaultProps){l=te({},l),s=s.defaultProps;for(var v in s)l[v]===void 0&&(l[v]=s[v]);return l}return l}function ef(s,l,v,w){l=s.memoizedState,v=v(w,l),v=v==null?l:te({},l,v),s.memoizedState=v,s.lanes===0&&(s.updateQueue.baseState=v)}var mu={isMounted:function(s){return(s=s._reactInternals)?Er(s)===s:!1},enqueueSetState:function(s,l,v){s=s._reactInternals;var w=Cr(),S=oa(s),P=Ln(w,S);P.payload=l,v!=null&&(P.callback=v),l=na(s,P,S),l!==null&&(fn(l,s,S,w),lu(l,s,S))},enqueueReplaceState:function(s,l,v){s=s._reactInternals;var w=Cr(),S=oa(s),P=Ln(w,S);P.tag=1,P.payload=l,v!=null&&(P.callback=v),l=na(s,P,S),l!==null&&(fn(l,s,S,w),lu(l,s,S))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var v=Cr(),w=oa(s),S=Ln(v,w);S.tag=2,l!=null&&(S.callback=l),l=na(s,S,w),l!==null&&(fn(l,s,w,v),lu(l,s,w))}};function qp(s,l,v,w,S,P,j){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(w,P,j):l.prototype&&l.prototype.isPureReactComponent?!xs(v,w)||!xs(S,P):!0}function Wp(s,l,v){var w=!1,S=ea,P=l.contextType;return typeof P=="object"&&P!==null?P=Zr(P):(S=Dr(l)?La:gr.current,w=l.contextTypes,P=(w=w!=null)?wi(s,S):ea),l=new l(v,P),s.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=mu,s.stateNode=l,l._reactInternals=s,w&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=S,s.__reactInternalMemoizedMaskedChildContext=P),l}function Gp(s,l,v,w){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(v,w),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(v,w),l.state!==s&&mu.enqueueReplaceState(l,l.state,null)}function tf(s,l,v,w){var S=s.stateNode;S.props=v,S.state=s.memoizedState,S.refs={},$c(s);var P=l.contextType;typeof P=="object"&&P!==null?S.context=Zr(P):(P=Dr(l)?La:gr.current,S.context=wi(s,P)),S.state=s.memoizedState,P=l.getDerivedStateFromProps,typeof P=="function"&&(ef(s,l,P,v),S.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(l=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),l!==S.state&&mu.enqueueReplaceState(S,S.state,null),cu(s,v,S,w),S.state=s.memoizedState),typeof S.componentDidMount=="function"&&(s.flags|=4194308)}function Ti(s,l){try{var v="",w=l;do v+=ne(w),w=w.return;while(w);var S=v}catch(P){S=`
Error generating stack: `+P.message+`
`+P.stack}return{value:s,source:l,stack:S,digest:null}}function rf(s,l,v){return{value:s,source:null,stack:v??null,digest:l??null}}function nf(s,l){try{console.error(l.value)}catch(v){setTimeout(function(){throw v})}}var ib=typeof WeakMap=="function"?WeakMap:Map;function Hp(s,l,v){v=Ln(-1,v),v.tag=3,v.payload={element:null};var w=l.value;return v.callback=function(){Su||(Su=!0,wf=w),nf(s,l)},v}function Kp(s,l,v){v=Ln(-1,v),v.tag=3;var w=s.type.getDerivedStateFromError;if(typeof w=="function"){var S=l.value;v.payload=function(){return w(S)},v.callback=function(){nf(s,l)}}var P=s.stateNode;return P!==null&&typeof P.componentDidCatch=="function"&&(v.callback=function(){nf(s,l),typeof w!="function"&&(ia===null?ia=new Set([this]):ia.add(this));var j=l.stack;this.componentDidCatch(l.value,{componentStack:j!==null?j:""})}),v}function Xp(s,l,v){var w=s.pingCache;if(w===null){w=s.pingCache=new ib;var S=new Set;w.set(l,S)}else S=w.get(l),S===void 0&&(S=new Set,w.set(l,S));S.has(v)||(S.add(v),s=wb.bind(null,s,l,v),l.then(s,s))}function Zp(s){do{var l;if((l=s.tag===13)&&(l=s.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return s;s=s.return}while(s!==null);return null}function Yp(s,l,v,w,S){return(s.mode&1)===0?(s===l?s.flags|=65536:(s.flags|=128,v.flags|=131072,v.flags&=-52805,v.tag===1&&(v.alternate===null?v.tag=17:(l=Ln(-1,1),l.tag=2,na(v,l,1))),v.lanes|=1),s):(s.flags|=65536,s.lanes=S,s)}var sb=C.ReactCurrentOwner,Ir=!1;function kr(s,l,v,w){l.child=s===null?mp(l,null,v,w):Ei(l,s.child,v,w)}function Qp(s,l,v,w,S){v=v.render;var P=l.ref;return ki(l,S),w=Kc(s,l,v,w,P,S),v=Xc(),s!==null&&!Ir?(l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~S,Nn(s,l,S)):(Bt&&v&&Ac(l),l.flags|=1,kr(s,l,w,S),l.child)}function Jp(s,l,v,w,S){if(s===null){var P=v.type;return typeof P=="function"&&!Cf(P)&&P.defaultProps===void 0&&v.compare===null&&v.defaultProps===void 0?(l.tag=15,l.type=P,eg(s,l,P,w,S)):(s=Bu(v.type,null,w,l,l.mode,S),s.ref=l.ref,s.return=l,l.child=s)}if(P=s.child,(s.lanes&S)===0){var j=P.memoizedProps;if(v=v.compare,v=v!==null?v:xs,v(j,w)&&s.ref===l.ref)return Nn(s,l,S)}return l.flags|=1,s=la(P,w),s.ref=l.ref,s.return=l,l.child=s}function eg(s,l,v,w,S){if(s!==null){var P=s.memoizedProps;if(xs(P,w)&&s.ref===l.ref)if(Ir=!1,l.pendingProps=w=P,(s.lanes&S)!==0)(s.flags&131072)!==0&&(Ir=!0);else return l.lanes=s.lanes,Nn(s,l,S)}return af(s,l,v,w,S)}function tg(s,l,v){var w=l.pendingProps,S=w.children,P=s!==null?s.memoizedState:null;if(w.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},xt(Ri,Gr),Gr|=v;else{if((v&1073741824)===0)return s=P!==null?P.baseLanes|v:v,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:s,cachePool:null,transitions:null},l.updateQueue=null,xt(Ri,Gr),Gr|=s,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},w=P!==null?P.baseLanes:v,xt(Ri,Gr),Gr|=w}else P!==null?(w=P.baseLanes|v,l.memoizedState=null):w=v,xt(Ri,Gr),Gr|=w;return kr(s,l,S,v),l.child}function rg(s,l){var v=l.ref;(s===null&&v!==null||s!==null&&s.ref!==v)&&(l.flags|=512,l.flags|=2097152)}function af(s,l,v,w,S){var P=Dr(v)?La:gr.current;return P=wi(l,P),ki(l,S),v=Kc(s,l,v,w,P,S),w=Xc(),s!==null&&!Ir?(l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~S,Nn(s,l,S)):(Bt&&w&&Ac(l),l.flags|=1,kr(s,l,v,S),l.child)}function ng(s,l,v,w,S){if(Dr(v)){var P=!0;tu(l)}else P=!1;if(ki(l,S),l.stateNode===null)wu(s,l),Wp(l,v,w),tf(l,v,w,S),w=!0;else if(s===null){var j=l.stateNode,re=l.memoizedProps;j.props=re;var ue=j.context,Te=v.contextType;typeof Te=="object"&&Te!==null?Te=Zr(Te):(Te=Dr(v)?La:gr.current,Te=wi(l,Te));var Ne=v.getDerivedStateFromProps,Me=typeof Ne=="function"||typeof j.getSnapshotBeforeUpdate=="function";Me||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(re!==w||ue!==Te)&&Gp(l,j,w,Te),ra=!1;var Le=l.memoizedState;j.state=Le,cu(l,w,j,S),ue=l.memoizedState,re!==w||Le!==ue||Ar.current||ra?(typeof Ne=="function"&&(ef(l,v,Ne,w),ue=l.memoizedState),(re=ra||qp(l,v,re,w,Le,ue,Te))?(Me||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount()),typeof j.componentDidMount=="function"&&(l.flags|=4194308)):(typeof j.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=w,l.memoizedState=ue),j.props=w,j.state=ue,j.context=Te,w=re):(typeof j.componentDidMount=="function"&&(l.flags|=4194308),w=!1)}else{j=l.stateNode,wp(s,l),re=l.memoizedProps,Te=l.type===l.elementType?re:un(l.type,re),j.props=Te,Me=l.pendingProps,Le=j.context,ue=v.contextType,typeof ue=="object"&&ue!==null?ue=Zr(ue):(ue=Dr(v)?La:gr.current,ue=wi(l,ue));var Ve=v.getDerivedStateFromProps;(Ne=typeof Ve=="function"||typeof j.getSnapshotBeforeUpdate=="function")||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(re!==Me||Le!==ue)&&Gp(l,j,w,ue),ra=!1,Le=l.memoizedState,j.state=Le,cu(l,w,j,S);var He=l.memoizedState;re!==Me||Le!==He||Ar.current||ra?(typeof Ve=="function"&&(ef(l,v,Ve,w),He=l.memoizedState),(Te=ra||qp(l,v,Te,w,Le,He,ue)||!1)?(Ne||typeof j.UNSAFE_componentWillUpdate!="function"&&typeof j.componentWillUpdate!="function"||(typeof j.componentWillUpdate=="function"&&j.componentWillUpdate(w,He,ue),typeof j.UNSAFE_componentWillUpdate=="function"&&j.UNSAFE_componentWillUpdate(w,He,ue)),typeof j.componentDidUpdate=="function"&&(l.flags|=4),typeof j.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof j.componentDidUpdate!="function"||re===s.memoizedProps&&Le===s.memoizedState||(l.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||re===s.memoizedProps&&Le===s.memoizedState||(l.flags|=1024),l.memoizedProps=w,l.memoizedState=He),j.props=w,j.state=He,j.context=ue,w=Te):(typeof j.componentDidUpdate!="function"||re===s.memoizedProps&&Le===s.memoizedState||(l.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||re===s.memoizedProps&&Le===s.memoizedState||(l.flags|=1024),w=!1)}return sf(s,l,v,w,P,S)}function sf(s,l,v,w,S,P){rg(s,l);var j=(l.flags&128)!==0;if(!w&&!j)return S&&up(l,v,!1),Nn(s,l,P);w=l.stateNode,sb.current=l;var re=j&&typeof v.getDerivedStateFromError!="function"?null:w.render();return l.flags|=1,s!==null&&j?(l.child=Ei(l,s.child,null,P),l.child=Ei(l,null,re,P)):kr(s,l,re,P),l.memoizedState=w.state,S&&up(l,v,!0),l.child}function ag(s){var l=s.stateNode;l.pendingContext?sp(s,l.pendingContext,l.pendingContext!==l.context):l.context&&sp(s,l.context,!1),Vc(s,l.containerInfo)}function ig(s,l,v,w,S){return _i(),Nc(S),l.flags|=256,kr(s,l,v,w),l.child}var of={dehydrated:null,treeContext:null,retryLane:0};function uf(s){return{baseLanes:s,cachePool:null,transitions:null}}function sg(s,l,v){var w=l.pendingProps,S=Ot.current,P=!1,j=(l.flags&128)!==0,re;if((re=j)||(re=s!==null&&s.memoizedState===null?!1:(S&2)!==0),re?(P=!0,l.flags&=-129):(s===null||s.memoizedState!==null)&&(S|=1),xt(Ot,S&1),s===null)return Lc(l),s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((l.mode&1)===0?l.lanes=1:s.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(j=w.children,s=w.fallback,P?(w=l.mode,P=l.child,j={mode:"hidden",children:j},(w&1)===0&&P!==null?(P.childLanes=0,P.pendingProps=j):P=Au(j,w,0,null),s=qa(s,w,v,null),P.return=l,s.return=l,P.sibling=s,l.child=P,l.child.memoizedState=uf(v),l.memoizedState=of,s):lf(l,j));if(S=s.memoizedState,S!==null&&(re=S.dehydrated,re!==null))return ob(s,l,j,w,re,S,v);if(P){P=w.fallback,j=l.mode,S=s.child,re=S.sibling;var ue={mode:"hidden",children:w.children};return(j&1)===0&&l.child!==S?(w=l.child,w.childLanes=0,w.pendingProps=ue,l.deletions=null):(w=la(S,ue),w.subtreeFlags=S.subtreeFlags&14680064),re!==null?P=la(re,P):(P=qa(P,j,v,null),P.flags|=2),P.return=l,w.return=l,w.sibling=P,l.child=w,w=P,P=l.child,j=s.child.memoizedState,j=j===null?uf(v):{baseLanes:j.baseLanes|v,cachePool:null,transitions:j.transitions},P.memoizedState=j,P.childLanes=s.childLanes&~v,l.memoizedState=of,w}return P=s.child,s=P.sibling,w=la(P,{mode:"visible",children:w.children}),(l.mode&1)===0&&(w.lanes=v),w.return=l,w.sibling=null,s!==null&&(v=l.deletions,v===null?(l.deletions=[s],l.flags|=16):v.push(s)),l.child=w,l.memoizedState=null,w}function lf(s,l){return l=Au({mode:"visible",children:l},s.mode,0,null),l.return=s,s.child=l}function yu(s,l,v,w){return w!==null&&Nc(w),Ei(l,s.child,null,v),s=lf(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function ob(s,l,v,w,S,P,j){if(v)return l.flags&256?(l.flags&=-257,w=rf(Error(t(422))),yu(s,l,j,w)):l.memoizedState!==null?(l.child=s.child,l.flags|=128,null):(P=w.fallback,S=l.mode,w=Au({mode:"visible",children:w.children},S,0,null),P=qa(P,S,j,null),P.flags|=2,w.return=l,P.return=l,w.sibling=P,l.child=w,(l.mode&1)!==0&&Ei(l,s.child,null,j),l.child.memoizedState=uf(j),l.memoizedState=of,P);if((l.mode&1)===0)return yu(s,l,j,null);if(S.data==="$!"){if(w=S.nextSibling&&S.nextSibling.dataset,w)var re=w.dgst;return w=re,P=Error(t(419)),w=rf(P,w,void 0),yu(s,l,j,w)}if(re=(j&s.childLanes)!==0,Ir||re){if(w=rr,w!==null){switch(j&-j){case 4:S=2;break;case 16:S=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:S=32;break;case 536870912:S=268435456;break;default:S=0}S=(S&(w.suspendedLanes|j))!==0?0:S,S!==0&&S!==P.retryLane&&(P.retryLane=S,In(s,S),fn(w,s,S,-1))}return kf(),w=rf(Error(t(421))),yu(s,l,j,w)}return S.data==="$?"?(l.flags|=128,l.child=s.child,l=xb.bind(null,s),S._reactRetry=l,null):(s=P.treeContext,Wr=Qn(S.nextSibling),qr=l,Bt=!0,on=null,s!==null&&(Kr[Xr++]=An,Kr[Xr++]=Dn,Kr[Xr++]=Na,An=s.id,Dn=s.overflow,Na=l),l=lf(l,w.children),l.flags|=4096,l)}function og(s,l,v){s.lanes|=l;var w=s.alternate;w!==null&&(w.lanes|=l),Fc(s.return,l,v)}function cf(s,l,v,w,S){var P=s.memoizedState;P===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:w,tail:v,tailMode:S}:(P.isBackwards=l,P.rendering=null,P.renderingStartTime=0,P.last=w,P.tail=v,P.tailMode=S)}function ug(s,l,v){var w=l.pendingProps,S=w.revealOrder,P=w.tail;if(kr(s,l,w.children,v),w=Ot.current,(w&2)!==0)w=w&1|2,l.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&og(s,v,l);else if(s.tag===19)og(s,v,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}w&=1}if(xt(Ot,w),(l.mode&1)===0)l.memoizedState=null;else switch(S){case"forwards":for(v=l.child,S=null;v!==null;)s=v.alternate,s!==null&&fu(s)===null&&(S=v),v=v.sibling;v=S,v===null?(S=l.child,l.child=null):(S=v.sibling,v.sibling=null),cf(l,!1,S,v,P);break;case"backwards":for(v=null,S=l.child,l.child=null;S!==null;){if(s=S.alternate,s!==null&&fu(s)===null){l.child=S;break}s=S.sibling,S.sibling=v,v=S,S=s}cf(l,!0,v,null,P);break;case"together":cf(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function wu(s,l){(l.mode&1)===0&&s!==null&&(s.alternate=null,l.alternate=null,l.flags|=2)}function Nn(s,l,v){if(s!==null&&(l.dependencies=s.dependencies),Ua|=l.lanes,(v&l.childLanes)===0)return null;if(s!==null&&l.child!==s.child)throw Error(t(153));if(l.child!==null){for(s=l.child,v=la(s,s.pendingProps),l.child=v,v.return=l;s.sibling!==null;)s=s.sibling,v=v.sibling=la(s,s.pendingProps),v.return=l;v.sibling=null}return l.child}function ub(s,l,v){switch(l.tag){case 3:ag(l),_i();break;case 5:_p(l);break;case 1:Dr(l.type)&&tu(l);break;case 4:Vc(l,l.stateNode.containerInfo);break;case 10:var w=l.type._context,S=l.memoizedProps.value;xt(ou,w._currentValue),w._currentValue=S;break;case 13:if(w=l.memoizedState,w!==null)return w.dehydrated!==null?(xt(Ot,Ot.current&1),l.flags|=128,null):(v&l.child.childLanes)!==0?sg(s,l,v):(xt(Ot,Ot.current&1),s=Nn(s,l,v),s!==null?s.sibling:null);xt(Ot,Ot.current&1);break;case 19:if(w=(v&l.childLanes)!==0,(s.flags&128)!==0){if(w)return ug(s,l,v);l.flags|=128}if(S=l.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),xt(Ot,Ot.current),w)break;return null;case 22:case 23:return l.lanes=0,tg(s,l,v)}return Nn(s,l,v)}var lg,ff,cg,fg;lg=function(s,l){for(var v=l.child;v!==null;){if(v.tag===5||v.tag===6)s.appendChild(v.stateNode);else if(v.tag!==4&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===l)break;for(;v.sibling===null;){if(v.return===null||v.return===l)return;v=v.return}v.sibling.return=v.return,v=v.sibling}},ff=function(){},cg=function(s,l,v,w){var S=s.memoizedProps;if(S!==w){s=l.stateNode,za(yn.current);var P=null;switch(v){case"input":S=D(s,S),w=D(s,w),P=[];break;case"select":S=te({},S,{value:void 0}),w=te({},w,{value:void 0}),P=[];break;case"textarea":S=se(s,S),w=se(s,w),P=[];break;default:typeof S.onClick!="function"&&typeof w.onClick=="function"&&(s.onclick=Qo)}ye(v,w);var j;v=null;for(Te in S)if(!w.hasOwnProperty(Te)&&S.hasOwnProperty(Te)&&S[Te]!=null)if(Te==="style"){var re=S[Te];for(j in re)re.hasOwnProperty(j)&&(v||(v={}),v[j]="")}else Te!=="dangerouslySetInnerHTML"&&Te!=="children"&&Te!=="suppressContentEditableWarning"&&Te!=="suppressHydrationWarning"&&Te!=="autoFocus"&&(a.hasOwnProperty(Te)?P||(P=[]):(P=P||[]).push(Te,null));for(Te in w){var ue=w[Te];if(re=S!=null?S[Te]:void 0,w.hasOwnProperty(Te)&&ue!==re&&(ue!=null||re!=null))if(Te==="style")if(re){for(j in re)!re.hasOwnProperty(j)||ue&&ue.hasOwnProperty(j)||(v||(v={}),v[j]="");for(j in ue)ue.hasOwnProperty(j)&&re[j]!==ue[j]&&(v||(v={}),v[j]=ue[j])}else v||(P||(P=[]),P.push(Te,v)),v=ue;else Te==="dangerouslySetInnerHTML"?(ue=ue?ue.__html:void 0,re=re?re.__html:void 0,ue!=null&&re!==ue&&(P=P||[]).push(Te,ue)):Te==="children"?typeof ue!="string"&&typeof ue!="number"||(P=P||[]).push(Te,""+ue):Te!=="suppressContentEditableWarning"&&Te!=="suppressHydrationWarning"&&(a.hasOwnProperty(Te)?(ue!=null&&Te==="onScroll"&&kt("scroll",s),P||re===ue||(P=[])):(P=P||[]).push(Te,ue))}v&&(P=P||[]).push("style",v);var Te=P;(l.updateQueue=Te)&&(l.flags|=4)}},fg=function(s,l,v,w){v!==w&&(l.flags|=4)};function Ns(s,l){if(!Bt)switch(s.tailMode){case"hidden":l=s.tail;for(var v=null;l!==null;)l.alternate!==null&&(v=l),l=l.sibling;v===null?s.tail=null:v.sibling=null;break;case"collapsed":v=s.tail;for(var w=null;v!==null;)v.alternate!==null&&(w=v),v=v.sibling;w===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:w.sibling=null}}function yr(s){var l=s.alternate!==null&&s.alternate.child===s.child,v=0,w=0;if(l)for(var S=s.child;S!==null;)v|=S.lanes|S.childLanes,w|=S.subtreeFlags&14680064,w|=S.flags&14680064,S.return=s,S=S.sibling;else for(S=s.child;S!==null;)v|=S.lanes|S.childLanes,w|=S.subtreeFlags,w|=S.flags,S.return=s,S=S.sibling;return s.subtreeFlags|=w,s.childLanes=v,l}function lb(s,l,v){var w=l.pendingProps;switch(Dc(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yr(l),null;case 1:return Dr(l.type)&&eu(),yr(l),null;case 3:return w=l.stateNode,Ci(),Ct(Ar),Ct(gr),Wc(),w.pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),(s===null||s.child===null)&&(iu(l)?l.flags|=4:s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,on!==null&&(_f(on),on=null))),ff(s,l),yr(l),null;case 5:jc(l);var S=za(Bs.current);if(v=l.type,s!==null&&l.stateNode!=null)cg(s,l,v,w,S),s.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!w){if(l.stateNode===null)throw Error(t(166));return yr(l),null}if(s=za(yn.current),iu(l)){w=l.stateNode,v=l.type;var P=l.memoizedProps;switch(w[mn]=l,w[ks]=P,s=(l.mode&1)!==0,v){case"dialog":kt("cancel",w),kt("close",w);break;case"iframe":case"object":case"embed":kt("load",w);break;case"video":case"audio":for(S=0;S<_s.length;S++)kt(_s[S],w);break;case"source":kt("error",w);break;case"img":case"image":case"link":kt("error",w),kt("load",w);break;case"details":kt("toggle",w);break;case"input":ve(w,P),kt("invalid",w);break;case"select":w._wrapperState={wasMultiple:!!P.multiple},kt("invalid",w);break;case"textarea":Be(w,P),kt("invalid",w)}ye(v,P),S=null;for(var j in P)if(P.hasOwnProperty(j)){var re=P[j];j==="children"?typeof re=="string"?w.textContent!==re&&(P.suppressHydrationWarning!==!0&&Yo(w.textContent,re,s),S=["children",re]):typeof re=="number"&&w.textContent!==""+re&&(P.suppressHydrationWarning!==!0&&Yo(w.textContent,re,s),S=["children",""+re]):a.hasOwnProperty(j)&&re!=null&&j==="onScroll"&&kt("scroll",w)}switch(v){case"input":de(w),K(w,P,!0);break;case"textarea":de(w),Ae(w);break;case"select":case"option":break;default:typeof P.onClick=="function"&&(w.onclick=Qo)}w=S,l.updateQueue=w,w!==null&&(l.flags|=4)}else{j=S.nodeType===9?S:S.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=ze(v)),s==="http://www.w3.org/1999/xhtml"?v==="script"?(s=j.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof w.is=="string"?s=j.createElement(v,{is:w.is}):(s=j.createElement(v),v==="select"&&(j=s,w.multiple?j.multiple=!0:w.size&&(j.size=w.size))):s=j.createElementNS(s,v),s[mn]=l,s[ks]=w,lg(s,l,!1,!1),l.stateNode=s;e:{switch(j=ke(v,w),v){case"dialog":kt("cancel",s),kt("close",s),S=w;break;case"iframe":case"object":case"embed":kt("load",s),S=w;break;case"video":case"audio":for(S=0;S<_s.length;S++)kt(_s[S],s);S=w;break;case"source":kt("error",s),S=w;break;case"img":case"image":case"link":kt("error",s),kt("load",s),S=w;break;case"details":kt("toggle",s),S=w;break;case"input":ve(s,w),S=D(s,w),kt("invalid",s);break;case"option":S=w;break;case"select":s._wrapperState={wasMultiple:!!w.multiple},S=te({},w,{value:void 0}),kt("invalid",s);break;case"textarea":Be(s,w),S=se(s,w),kt("invalid",s);break;default:S=w}ye(v,S),re=S;for(P in re)if(re.hasOwnProperty(P)){var ue=re[P];P==="style"?le(s,ue):P==="dangerouslySetInnerHTML"?(ue=ue?ue.__html:void 0,ue!=null&&R(s,ue)):P==="children"?typeof ue=="string"?(v!=="textarea"||ue!=="")&&H(s,ue):typeof ue=="number"&&H(s,""+ue):P!=="suppressContentEditableWarning"&&P!=="suppressHydrationWarning"&&P!=="autoFocus"&&(a.hasOwnProperty(P)?ue!=null&&P==="onScroll"&&kt("scroll",s):ue!=null&&E(s,P,ue,j))}switch(v){case"input":de(s),K(s,w,!1);break;case"textarea":de(s),Ae(s);break;case"option":w.value!=null&&s.setAttribute("value",""+Ce(w.value));break;case"select":s.multiple=!!w.multiple,P=w.value,P!=null?me(s,!!w.multiple,P,!1):w.defaultValue!=null&&me(s,!!w.multiple,w.defaultValue,!0);break;default:typeof S.onClick=="function"&&(s.onclick=Qo)}switch(v){case"button":case"input":case"select":case"textarea":w=!!w.autoFocus;break e;case"img":w=!0;break e;default:w=!1}}w&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return yr(l),null;case 6:if(s&&l.stateNode!=null)fg(s,l,s.memoizedProps,w);else{if(typeof w!="string"&&l.stateNode===null)throw Error(t(166));if(v=za(Bs.current),za(yn.current),iu(l)){if(w=l.stateNode,v=l.memoizedProps,w[mn]=l,(P=w.nodeValue!==v)&&(s=qr,s!==null))switch(s.tag){case 3:Yo(w.nodeValue,v,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Yo(w.nodeValue,v,(s.mode&1)!==0)}P&&(l.flags|=4)}else w=(v.nodeType===9?v:v.ownerDocument).createTextNode(w),w[mn]=l,l.stateNode=w}return yr(l),null;case 13:if(Ct(Ot),w=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(Bt&&Wr!==null&&(l.mode&1)!==0&&(l.flags&128)===0)vp(),_i(),l.flags|=98560,P=!1;else if(P=iu(l),w!==null&&w.dehydrated!==null){if(s===null){if(!P)throw Error(t(318));if(P=l.memoizedState,P=P!==null?P.dehydrated:null,!P)throw Error(t(317));P[mn]=l}else _i(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;yr(l),P=!1}else on!==null&&(_f(on),on=null),P=!0;if(!P)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=v,l):(w=w!==null,w!==(s!==null&&s.memoizedState!==null)&&w&&(l.child.flags|=8192,(l.mode&1)!==0&&(s===null||(Ot.current&1)!==0?Zt===0&&(Zt=3):kf())),l.updateQueue!==null&&(l.flags|=4),yr(l),null);case 4:return Ci(),ff(s,l),s===null&&Es(l.stateNode.containerInfo),yr(l),null;case 10:return zc(l.type._context),yr(l),null;case 17:return Dr(l.type)&&eu(),yr(l),null;case 19:if(Ct(Ot),P=l.memoizedState,P===null)return yr(l),null;if(w=(l.flags&128)!==0,j=P.rendering,j===null)if(w)Ns(P,!1);else{if(Zt!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(j=fu(s),j!==null){for(l.flags|=128,Ns(P,!1),w=j.updateQueue,w!==null&&(l.updateQueue=w,l.flags|=4),l.subtreeFlags=0,w=v,v=l.child;v!==null;)P=v,s=w,P.flags&=14680066,j=P.alternate,j===null?(P.childLanes=0,P.lanes=s,P.child=null,P.subtreeFlags=0,P.memoizedProps=null,P.memoizedState=null,P.updateQueue=null,P.dependencies=null,P.stateNode=null):(P.childLanes=j.childLanes,P.lanes=j.lanes,P.child=j.child,P.subtreeFlags=0,P.deletions=null,P.memoizedProps=j.memoizedProps,P.memoizedState=j.memoizedState,P.updateQueue=j.updateQueue,P.type=j.type,s=j.dependencies,P.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),v=v.sibling;return xt(Ot,Ot.current&1|2),l.child}s=s.sibling}P.tail!==null&&Lt()>Bi&&(l.flags|=128,w=!0,Ns(P,!1),l.lanes=4194304)}else{if(!w)if(s=fu(j),s!==null){if(l.flags|=128,w=!0,v=s.updateQueue,v!==null&&(l.updateQueue=v,l.flags|=4),Ns(P,!0),P.tail===null&&P.tailMode==="hidden"&&!j.alternate&&!Bt)return yr(l),null}else 2*Lt()-P.renderingStartTime>Bi&&v!==1073741824&&(l.flags|=128,w=!0,Ns(P,!1),l.lanes=4194304);P.isBackwards?(j.sibling=l.child,l.child=j):(v=P.last,v!==null?v.sibling=j:l.child=j,P.last=j)}return P.tail!==null?(l=P.tail,P.rendering=l,P.tail=l.sibling,P.renderingStartTime=Lt(),l.sibling=null,v=Ot.current,xt(Ot,w?v&1|2:v&1),l):(yr(l),null);case 22:case 23:return Sf(),w=l.memoizedState!==null,s!==null&&s.memoizedState!==null!==w&&(l.flags|=8192),w&&(l.mode&1)!==0?(Gr&1073741824)!==0&&(yr(l),l.subtreeFlags&6&&(l.flags|=8192)):yr(l),null;case 24:return null;case 25:return null}throw Error(t(156,l.tag))}function cb(s,l){switch(Dc(l),l.tag){case 1:return Dr(l.type)&&eu(),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return Ci(),Ct(Ar),Ct(gr),Wc(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 5:return jc(l),null;case 13:if(Ct(Ot),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(t(340));_i()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return Ct(Ot),null;case 4:return Ci(),null;case 10:return zc(l.type._context),null;case 22:case 23:return Sf(),null;case 24:return null;default:return null}}var xu=!1,wr=!1,fb=typeof WeakSet=="function"?WeakSet:Set,je=null;function Pi(s,l){var v=s.ref;if(v!==null)if(typeof v=="function")try{v(null)}catch(w){Ft(s,l,w)}else v.current=null}function df(s,l,v){try{v()}catch(w){Ft(s,l,w)}}var dg=!1;function db(s,l){if(Ec=Uo,s=qv(),pc(s)){if("selectionStart"in s)var v={start:s.selectionStart,end:s.selectionEnd};else e:{v=(v=s.ownerDocument)&&v.defaultView||window;var w=v.getSelection&&v.getSelection();if(w&&w.rangeCount!==0){v=w.anchorNode;var S=w.anchorOffset,P=w.focusNode;w=w.focusOffset;try{v.nodeType,P.nodeType}catch{v=null;break e}var j=0,re=-1,ue=-1,Te=0,Ne=0,Me=s,Le=null;t:for(;;){for(var Ve;Me!==v||S!==0&&Me.nodeType!==3||(re=j+S),Me!==P||w!==0&&Me.nodeType!==3||(ue=j+w),Me.nodeType===3&&(j+=Me.nodeValue.length),(Ve=Me.firstChild)!==null;)Le=Me,Me=Ve;for(;;){if(Me===s)break t;if(Le===v&&++Te===S&&(re=j),Le===P&&++Ne===w&&(ue=j),(Ve=Me.nextSibling)!==null)break;Me=Le,Le=Me.parentNode}Me=Ve}v=re===-1||ue===-1?null:{start:re,end:ue}}else v=null}v=v||{start:0,end:0}}else v=null;for(Sc={focusedElem:s,selectionRange:v},Uo=!1,je=l;je!==null;)if(l=je,s=l.child,(l.subtreeFlags&1028)!==0&&s!==null)s.return=l,je=s;else for(;je!==null;){l=je;try{var He=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(He!==null){var Xe=He.memoizedProps,qt=He.memoizedState,xe=l.stateNode,fe=xe.getSnapshotBeforeUpdate(l.elementType===l.type?Xe:un(l.type,Xe),qt);xe.__reactInternalSnapshotBeforeUpdate=fe}break;case 3:var Ee=l.stateNode.containerInfo;Ee.nodeType===1?Ee.textContent="":Ee.nodeType===9&&Ee.documentElement&&Ee.removeChild(Ee.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Fe){Ft(l,l.return,Fe)}if(s=l.sibling,s!==null){s.return=l.return,je=s;break}je=l.return}return He=dg,dg=!1,He}function Os(s,l,v){var w=l.updateQueue;if(w=w!==null?w.lastEffect:null,w!==null){var S=w=w.next;do{if((S.tag&s)===s){var P=S.destroy;S.destroy=void 0,P!==void 0&&df(l,v,P)}S=S.next}while(S!==w)}}function bu(s,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var v=l=l.next;do{if((v.tag&s)===s){var w=v.create;v.destroy=w()}v=v.next}while(v!==l)}}function hf(s){var l=s.ref;if(l!==null){var v=s.stateNode;switch(s.tag){case 5:s=v;break;default:s=v}typeof l=="function"?l(s):l.current=s}}function hg(s){var l=s.alternate;l!==null&&(s.alternate=null,hg(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&(delete l[mn],delete l[ks],delete l[Pc],delete l[Kx],delete l[Xx])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function vg(s){return s.tag===5||s.tag===3||s.tag===4}function pg(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||vg(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function vf(s,l,v){var w=s.tag;if(w===5||w===6)s=s.stateNode,l?v.nodeType===8?v.parentNode.insertBefore(s,l):v.insertBefore(s,l):(v.nodeType===8?(l=v.parentNode,l.insertBefore(s,v)):(l=v,l.appendChild(s)),v=v._reactRootContainer,v!=null||l.onclick!==null||(l.onclick=Qo));else if(w!==4&&(s=s.child,s!==null))for(vf(s,l,v),s=s.sibling;s!==null;)vf(s,l,v),s=s.sibling}function pf(s,l,v){var w=s.tag;if(w===5||w===6)s=s.stateNode,l?v.insertBefore(s,l):v.appendChild(s);else if(w!==4&&(s=s.child,s!==null))for(pf(s,l,v),s=s.sibling;s!==null;)pf(s,l,v),s=s.sibling}var ur=null,ln=!1;function aa(s,l,v){for(v=v.child;v!==null;)gg(s,l,v),v=v.sibling}function gg(s,l,v){if(Vr&&typeof Vr.onCommitFiberUnmount=="function")try{Vr.onCommitFiberUnmount(Aa,v)}catch{}switch(v.tag){case 5:wr||Pi(v,l);case 6:var w=ur,S=ln;ur=null,aa(s,l,v),ur=w,ln=S,ur!==null&&(ln?(s=ur,v=v.stateNode,s.nodeType===8?s.parentNode.removeChild(v):s.removeChild(v)):ur.removeChild(v.stateNode));break;case 18:ur!==null&&(ln?(s=ur,v=v.stateNode,s.nodeType===8?Tc(s.parentNode,v):s.nodeType===1&&Tc(s,v),vs(s)):Tc(ur,v.stateNode));break;case 4:w=ur,S=ln,ur=v.stateNode.containerInfo,ln=!0,aa(s,l,v),ur=w,ln=S;break;case 0:case 11:case 14:case 15:if(!wr&&(w=v.updateQueue,w!==null&&(w=w.lastEffect,w!==null))){S=w=w.next;do{var P=S,j=P.destroy;P=P.tag,j!==void 0&&((P&2)!==0||(P&4)!==0)&&df(v,l,j),S=S.next}while(S!==w)}aa(s,l,v);break;case 1:if(!wr&&(Pi(v,l),w=v.stateNode,typeof w.componentWillUnmount=="function"))try{w.props=v.memoizedProps,w.state=v.memoizedState,w.componentWillUnmount()}catch(re){Ft(v,l,re)}aa(s,l,v);break;case 21:aa(s,l,v);break;case 22:v.mode&1?(wr=(w=wr)||v.memoizedState!==null,aa(s,l,v),wr=w):aa(s,l,v);break;default:aa(s,l,v)}}function mg(s){var l=s.updateQueue;if(l!==null){s.updateQueue=null;var v=s.stateNode;v===null&&(v=s.stateNode=new fb),l.forEach(function(w){var S=bb.bind(null,s,w);v.has(w)||(v.add(w),w.then(S,S))})}}function cn(s,l){var v=l.deletions;if(v!==null)for(var w=0;w<v.length;w++){var S=v[w];try{var P=s,j=l,re=j;e:for(;re!==null;){switch(re.tag){case 5:ur=re.stateNode,ln=!1;break e;case 3:ur=re.stateNode.containerInfo,ln=!0;break e;case 4:ur=re.stateNode.containerInfo,ln=!0;break e}re=re.return}if(ur===null)throw Error(t(160));gg(P,j,S),ur=null,ln=!1;var ue=S.alternate;ue!==null&&(ue.return=null),S.return=null}catch(Te){Ft(S,l,Te)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)yg(l,s),l=l.sibling}function yg(s,l){var v=s.alternate,w=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(cn(l,s),xn(s),w&4){try{Os(3,s,s.return),bu(3,s)}catch(Xe){Ft(s,s.return,Xe)}try{Os(5,s,s.return)}catch(Xe){Ft(s,s.return,Xe)}}break;case 1:cn(l,s),xn(s),w&512&&v!==null&&Pi(v,v.return);break;case 5:if(cn(l,s),xn(s),w&512&&v!==null&&Pi(v,v.return),s.flags&32){var S=s.stateNode;try{H(S,"")}catch(Xe){Ft(s,s.return,Xe)}}if(w&4&&(S=s.stateNode,S!=null)){var P=s.memoizedProps,j=v!==null?v.memoizedProps:P,re=s.type,ue=s.updateQueue;if(s.updateQueue=null,ue!==null)try{re==="input"&&P.type==="radio"&&P.name!=null&&pe(S,P),ke(re,j);var Te=ke(re,P);for(j=0;j<ue.length;j+=2){var Ne=ue[j],Me=ue[j+1];Ne==="style"?le(S,Me):Ne==="dangerouslySetInnerHTML"?R(S,Me):Ne==="children"?H(S,Me):E(S,Ne,Me,Te)}switch(re){case"input":Y(S,P);break;case"textarea":De(S,P);break;case"select":var Le=S._wrapperState.wasMultiple;S._wrapperState.wasMultiple=!!P.multiple;var Ve=P.value;Ve!=null?me(S,!!P.multiple,Ve,!1):Le!==!!P.multiple&&(P.defaultValue!=null?me(S,!!P.multiple,P.defaultValue,!0):me(S,!!P.multiple,P.multiple?[]:"",!1))}S[ks]=P}catch(Xe){Ft(s,s.return,Xe)}}break;case 6:if(cn(l,s),xn(s),w&4){if(s.stateNode===null)throw Error(t(162));S=s.stateNode,P=s.memoizedProps;try{S.nodeValue=P}catch(Xe){Ft(s,s.return,Xe)}}break;case 3:if(cn(l,s),xn(s),w&4&&v!==null&&v.memoizedState.isDehydrated)try{vs(l.containerInfo)}catch(Xe){Ft(s,s.return,Xe)}break;case 4:cn(l,s),xn(s);break;case 13:cn(l,s),xn(s),S=s.child,S.flags&8192&&(P=S.memoizedState!==null,S.stateNode.isHidden=P,!P||S.alternate!==null&&S.alternate.memoizedState!==null||(yf=Lt())),w&4&&mg(s);break;case 22:if(Ne=v!==null&&v.memoizedState!==null,s.mode&1?(wr=(Te=wr)||Ne,cn(l,s),wr=Te):cn(l,s),xn(s),w&8192){if(Te=s.memoizedState!==null,(s.stateNode.isHidden=Te)&&!Ne&&(s.mode&1)!==0)for(je=s,Ne=s.child;Ne!==null;){for(Me=je=Ne;je!==null;){switch(Le=je,Ve=Le.child,Le.tag){case 0:case 11:case 14:case 15:Os(4,Le,Le.return);break;case 1:Pi(Le,Le.return);var He=Le.stateNode;if(typeof He.componentWillUnmount=="function"){w=Le,v=Le.return;try{l=w,He.props=l.memoizedProps,He.state=l.memoizedState,He.componentWillUnmount()}catch(Xe){Ft(w,v,Xe)}}break;case 5:Pi(Le,Le.return);break;case 22:if(Le.memoizedState!==null){bg(Me);continue}}Ve!==null?(Ve.return=Le,je=Ve):bg(Me)}Ne=Ne.sibling}e:for(Ne=null,Me=s;;){if(Me.tag===5){if(Ne===null){Ne=Me;try{S=Me.stateNode,Te?(P=S.style,typeof P.setProperty=="function"?P.setProperty("display","none","important"):P.display="none"):(re=Me.stateNode,ue=Me.memoizedProps.style,j=ue!=null&&ue.hasOwnProperty("display")?ue.display:null,re.style.display=O("display",j))}catch(Xe){Ft(s,s.return,Xe)}}}else if(Me.tag===6){if(Ne===null)try{Me.stateNode.nodeValue=Te?"":Me.memoizedProps}catch(Xe){Ft(s,s.return,Xe)}}else if((Me.tag!==22&&Me.tag!==23||Me.memoizedState===null||Me===s)&&Me.child!==null){Me.child.return=Me,Me=Me.child;continue}if(Me===s)break e;for(;Me.sibling===null;){if(Me.return===null||Me.return===s)break e;Ne===Me&&(Ne=null),Me=Me.return}Ne===Me&&(Ne=null),Me.sibling.return=Me.return,Me=Me.sibling}}break;case 19:cn(l,s),xn(s),w&4&&mg(s);break;case 21:break;default:cn(l,s),xn(s)}}function xn(s){var l=s.flags;if(l&2){try{e:{for(var v=s.return;v!==null;){if(vg(v)){var w=v;break e}v=v.return}throw Error(t(160))}switch(w.tag){case 5:var S=w.stateNode;w.flags&32&&(H(S,""),w.flags&=-33);var P=pg(s);pf(s,P,S);break;case 3:case 4:var j=w.stateNode.containerInfo,re=pg(s);vf(s,re,j);break;default:throw Error(t(161))}}catch(ue){Ft(s,s.return,ue)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function hb(s,l,v){je=s,wg(s)}function wg(s,l,v){for(var w=(s.mode&1)!==0;je!==null;){var S=je,P=S.child;if(S.tag===22&&w){var j=S.memoizedState!==null||xu;if(!j){var re=S.alternate,ue=re!==null&&re.memoizedState!==null||wr;re=xu;var Te=wr;if(xu=j,(wr=ue)&&!Te)for(je=S;je!==null;)j=je,ue=j.child,j.tag===22&&j.memoizedState!==null?_g(S):ue!==null?(ue.return=j,je=ue):_g(S);for(;P!==null;)je=P,wg(P),P=P.sibling;je=S,xu=re,wr=Te}xg(s)}else(S.subtreeFlags&8772)!==0&&P!==null?(P.return=S,je=P):xg(s)}}function xg(s){for(;je!==null;){var l=je;if((l.flags&8772)!==0){var v=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:wr||bu(5,l);break;case 1:var w=l.stateNode;if(l.flags&4&&!wr)if(v===null)w.componentDidMount();else{var S=l.elementType===l.type?v.memoizedProps:un(l.type,v.memoizedProps);w.componentDidUpdate(S,v.memoizedState,w.__reactInternalSnapshotBeforeUpdate)}var P=l.updateQueue;P!==null&&bp(l,P,w);break;case 3:var j=l.updateQueue;if(j!==null){if(v=null,l.child!==null)switch(l.child.tag){case 5:v=l.child.stateNode;break;case 1:v=l.child.stateNode}bp(l,j,v)}break;case 5:var re=l.stateNode;if(v===null&&l.flags&4){v=re;var ue=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":ue.autoFocus&&v.focus();break;case"img":ue.src&&(v.src=ue.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var Te=l.alternate;if(Te!==null){var Ne=Te.memoizedState;if(Ne!==null){var Me=Ne.dehydrated;Me!==null&&vs(Me)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}wr||l.flags&512&&hf(l)}catch(Le){Ft(l,l.return,Le)}}if(l===s){je=null;break}if(v=l.sibling,v!==null){v.return=l.return,je=v;break}je=l.return}}function bg(s){for(;je!==null;){var l=je;if(l===s){je=null;break}var v=l.sibling;if(v!==null){v.return=l.return,je=v;break}je=l.return}}function _g(s){for(;je!==null;){var l=je;try{switch(l.tag){case 0:case 11:case 15:var v=l.return;try{bu(4,l)}catch(ue){Ft(l,v,ue)}break;case 1:var w=l.stateNode;if(typeof w.componentDidMount=="function"){var S=l.return;try{w.componentDidMount()}catch(ue){Ft(l,S,ue)}}var P=l.return;try{hf(l)}catch(ue){Ft(l,P,ue)}break;case 5:var j=l.return;try{hf(l)}catch(ue){Ft(l,j,ue)}}}catch(ue){Ft(l,l.return,ue)}if(l===s){je=null;break}var re=l.sibling;if(re!==null){re.return=l.return,je=re;break}je=l.return}}var vb=Math.ceil,_u=C.ReactCurrentDispatcher,gf=C.ReactCurrentOwner,Qr=C.ReactCurrentBatchConfig,ct=0,rr=null,Wt=null,lr=0,Gr=0,Ri=Jn(0),Zt=0,Ms=null,Ua=0,Eu=0,mf=0,zs=null,Lr=null,yf=0,Bi=1/0,On=null,Su=!1,wf=null,ia=null,ku=!1,sa=null,Cu=0,Fs=0,xf=null,Tu=-1,Pu=0;function Cr(){return(ct&6)!==0?Lt():Tu!==-1?Tu:Tu=Lt()}function oa(s){return(s.mode&1)===0?1:(ct&2)!==0&&lr!==0?lr&-lr:Yx.transition!==null?(Pu===0&&(Pu=pv()),Pu):(s=mt,s!==0||(s=window.event,s=s===void 0?16:Sv(s.type)),s)}function fn(s,l,v,w){if(50<Fs)throw Fs=0,xf=null,Error(t(185));ls(s,v,w),((ct&2)===0||s!==rr)&&(s===rr&&((ct&2)===0&&(Eu|=v),Zt===4&&ua(s,lr)),Nr(s,w),v===1&&ct===0&&(l.mode&1)===0&&(Bi=Lt()+500,ru&&ta()))}function Nr(s,l){var v=s.callbackNode;Yw(s,l);var w=li(s,s===rr?lr:0);if(w===0)v!==null&&No(v),s.callbackNode=null,s.callbackPriority=0;else if(l=w&-w,s.callbackPriority!==l){if(v!=null&&No(v),l===1)s.tag===0?Zx(Sg.bind(null,s)):lp(Sg.bind(null,s)),Gx(function(){(ct&6)===0&&ta()}),v=null;else{switch(gv(w)){case 1:v=ss;break;case 4:v=Oo;break;case 16:v=gn;break;case 536870912:v=Ba;break;default:v=gn}v=Dg(v,Eg.bind(null,s))}s.callbackPriority=l,s.callbackNode=v}}function Eg(s,l){if(Tu=-1,Pu=0,(ct&6)!==0)throw Error(t(327));var v=s.callbackNode;if(Ai()&&s.callbackNode!==v)return null;var w=li(s,s===rr?lr:0);if(w===0)return null;if((w&30)!==0||(w&s.expiredLanes)!==0||l)l=Ru(s,w);else{l=w;var S=ct;ct|=2;var P=Cg();(rr!==s||lr!==l)&&(On=null,Bi=Lt()+500,Va(s,l));do try{mb();break}catch(re){kg(s,re)}while(!0);Mc(),_u.current=P,ct=S,Wt!==null?l=0:(rr=null,lr=0,l=Zt)}if(l!==0){if(l===2&&(S=Jl(s),S!==0&&(w=S,l=bf(s,S))),l===1)throw v=Ms,Va(s,0),ua(s,w),Nr(s,Lt()),v;if(l===6)ua(s,w);else{if(S=s.current.alternate,(w&30)===0&&!pb(S)&&(l=Ru(s,w),l===2&&(P=Jl(s),P!==0&&(w=P,l=bf(s,P))),l===1))throw v=Ms,Va(s,0),ua(s,w),Nr(s,Lt()),v;switch(s.finishedWork=S,s.finishedLanes=w,l){case 0:case 1:throw Error(t(345));case 2:ja(s,Lr,On);break;case 3:if(ua(s,w),(w&130023424)===w&&(l=yf+500-Lt(),10<l)){if(li(s,0)!==0)break;if(S=s.suspendedLanes,(S&w)!==w){Cr(),s.pingedLanes|=s.suspendedLanes&S;break}s.timeoutHandle=Cc(ja.bind(null,s,Lr,On),l);break}ja(s,Lr,On);break;case 4:if(ua(s,w),(w&4194240)===w)break;for(l=s.eventTimes,S=-1;0<w;){var j=31-Nt(w);P=1<<j,j=l[j],j>S&&(S=j),w&=~P}if(w=S,w=Lt()-w,w=(120>w?120:480>w?480:1080>w?1080:1920>w?1920:3e3>w?3e3:4320>w?4320:1960*vb(w/1960))-w,10<w){s.timeoutHandle=Cc(ja.bind(null,s,Lr,On),w);break}ja(s,Lr,On);break;case 5:ja(s,Lr,On);break;default:throw Error(t(329))}}}return Nr(s,Lt()),s.callbackNode===v?Eg.bind(null,s):null}function bf(s,l){var v=zs;return s.current.memoizedState.isDehydrated&&(Va(s,l).flags|=256),s=Ru(s,l),s!==2&&(l=Lr,Lr=v,l!==null&&_f(l)),s}function _f(s){Lr===null?Lr=s:Lr.push.apply(Lr,s)}function pb(s){for(var l=s;;){if(l.flags&16384){var v=l.updateQueue;if(v!==null&&(v=v.stores,v!==null))for(var w=0;w<v.length;w++){var S=v[w],P=S.getSnapshot;S=S.value;try{if(!sn(P(),S))return!1}catch{return!1}}}if(v=l.child,l.subtreeFlags&16384&&v!==null)v.return=l,l=v;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function ua(s,l){for(l&=~mf,l&=~Eu,s.suspendedLanes|=l,s.pingedLanes&=~l,s=s.expirationTimes;0<l;){var v=31-Nt(l),w=1<<v;s[v]=-1,l&=~w}}function Sg(s){if((ct&6)!==0)throw Error(t(327));Ai();var l=li(s,0);if((l&1)===0)return Nr(s,Lt()),null;var v=Ru(s,l);if(s.tag!==0&&v===2){var w=Jl(s);w!==0&&(l=w,v=bf(s,w))}if(v===1)throw v=Ms,Va(s,0),ua(s,l),Nr(s,Lt()),v;if(v===6)throw Error(t(345));return s.finishedWork=s.current.alternate,s.finishedLanes=l,ja(s,Lr,On),Nr(s,Lt()),null}function Ef(s,l){var v=ct;ct|=1;try{return s(l)}finally{ct=v,ct===0&&(Bi=Lt()+500,ru&&ta())}}function $a(s){sa!==null&&sa.tag===0&&(ct&6)===0&&Ai();var l=ct;ct|=1;var v=Qr.transition,w=mt;try{if(Qr.transition=null,mt=1,s)return s()}finally{mt=w,Qr.transition=v,ct=l,(ct&6)===0&&ta()}}function Sf(){Gr=Ri.current,Ct(Ri)}function Va(s,l){s.finishedWork=null,s.finishedLanes=0;var v=s.timeoutHandle;if(v!==-1&&(s.timeoutHandle=-1,Wx(v)),Wt!==null)for(v=Wt.return;v!==null;){var w=v;switch(Dc(w),w.tag){case 1:w=w.type.childContextTypes,w!=null&&eu();break;case 3:Ci(),Ct(Ar),Ct(gr),Wc();break;case 5:jc(w);break;case 4:Ci();break;case 13:Ct(Ot);break;case 19:Ct(Ot);break;case 10:zc(w.type._context);break;case 22:case 23:Sf()}v=v.return}if(rr=s,Wt=s=la(s.current,null),lr=Gr=l,Zt=0,Ms=null,mf=Eu=Ua=0,Lr=zs=null,Ma!==null){for(l=0;l<Ma.length;l++)if(v=Ma[l],w=v.interleaved,w!==null){v.interleaved=null;var S=w.next,P=v.pending;if(P!==null){var j=P.next;P.next=S,w.next=j}v.pending=w}Ma=null}return s}function kg(s,l){do{var v=Wt;try{if(Mc(),du.current=gu,hu){for(var w=Mt.memoizedState;w!==null;){var S=w.queue;S!==null&&(S.pending=null),w=w.next}hu=!1}if(Fa=0,tr=Xt=Mt=null,As=!1,Ds=0,gf.current=null,v===null||v.return===null){Zt=1,Ms=l,Wt=null;break}e:{var P=s,j=v.return,re=v,ue=l;if(l=lr,re.flags|=32768,ue!==null&&typeof ue=="object"&&typeof ue.then=="function"){var Te=ue,Ne=re,Me=Ne.tag;if((Ne.mode&1)===0&&(Me===0||Me===11||Me===15)){var Le=Ne.alternate;Le?(Ne.updateQueue=Le.updateQueue,Ne.memoizedState=Le.memoizedState,Ne.lanes=Le.lanes):(Ne.updateQueue=null,Ne.memoizedState=null)}var Ve=Zp(j);if(Ve!==null){Ve.flags&=-257,Yp(Ve,j,re,P,l),Ve.mode&1&&Xp(P,Te,l),l=Ve,ue=Te;var He=l.updateQueue;if(He===null){var Xe=new Set;Xe.add(ue),l.updateQueue=Xe}else He.add(ue);break e}else{if((l&1)===0){Xp(P,Te,l),kf();break e}ue=Error(t(426))}}else if(Bt&&re.mode&1){var qt=Zp(j);if(qt!==null){(qt.flags&65536)===0&&(qt.flags|=256),Yp(qt,j,re,P,l),Nc(Ti(ue,re));break e}}P=ue=Ti(ue,re),Zt!==4&&(Zt=2),zs===null?zs=[P]:zs.push(P),P=j;do{switch(P.tag){case 3:P.flags|=65536,l&=-l,P.lanes|=l;var xe=Hp(P,ue,l);xp(P,xe);break e;case 1:re=ue;var fe=P.type,Ee=P.stateNode;if((P.flags&128)===0&&(typeof fe.getDerivedStateFromError=="function"||Ee!==null&&typeof Ee.componentDidCatch=="function"&&(ia===null||!ia.has(Ee)))){P.flags|=65536,l&=-l,P.lanes|=l;var Fe=Kp(P,re,l);xp(P,Fe);break e}}P=P.return}while(P!==null)}Pg(v)}catch(Ze){l=Ze,Wt===v&&v!==null&&(Wt=v=v.return);continue}break}while(!0)}function Cg(){var s=_u.current;return _u.current=gu,s===null?gu:s}function kf(){(Zt===0||Zt===3||Zt===2)&&(Zt=4),rr===null||(Ua&268435455)===0&&(Eu&268435455)===0||ua(rr,lr)}function Ru(s,l){var v=ct;ct|=2;var w=Cg();(rr!==s||lr!==l)&&(On=null,Va(s,l));do try{gb();break}catch(S){kg(s,S)}while(!0);if(Mc(),ct=v,_u.current=w,Wt!==null)throw Error(t(261));return rr=null,lr=0,Zt}function gb(){for(;Wt!==null;)Tg(Wt)}function mb(){for(;Wt!==null&&!Xl();)Tg(Wt)}function Tg(s){var l=Ag(s.alternate,s,Gr);s.memoizedProps=s.pendingProps,l===null?Pg(s):Wt=l,gf.current=null}function Pg(s){var l=s;do{var v=l.alternate;if(s=l.return,(l.flags&32768)===0){if(v=lb(v,l,Gr),v!==null){Wt=v;return}}else{if(v=cb(v,l),v!==null){v.flags&=32767,Wt=v;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Zt=6,Wt=null;return}}if(l=l.sibling,l!==null){Wt=l;return}Wt=l=s}while(l!==null);Zt===0&&(Zt=5)}function ja(s,l,v){var w=mt,S=Qr.transition;try{Qr.transition=null,mt=1,yb(s,l,v,w)}finally{Qr.transition=S,mt=w}return null}function yb(s,l,v,w){do Ai();while(sa!==null);if((ct&6)!==0)throw Error(t(327));v=s.finishedWork;var S=s.finishedLanes;if(v===null)return null;if(s.finishedWork=null,s.finishedLanes=0,v===s.current)throw Error(t(177));s.callbackNode=null,s.callbackPriority=0;var P=v.lanes|v.childLanes;if(Qw(s,P),s===rr&&(Wt=rr=null,lr=0),(v.subtreeFlags&2064)===0&&(v.flags&2064)===0||ku||(ku=!0,Dg(gn,function(){return Ai(),null})),P=(v.flags&15990)!==0,(v.subtreeFlags&15990)!==0||P){P=Qr.transition,Qr.transition=null;var j=mt;mt=1;var re=ct;ct|=4,gf.current=null,db(s,v),yg(v,s),zx(Sc),Uo=!!Ec,Sc=Ec=null,s.current=v,hb(v),Zl(),ct=re,mt=j,Qr.transition=P}else s.current=v;if(ku&&(ku=!1,sa=s,Cu=S),P=s.pendingLanes,P===0&&(ia=null),Ql(v.stateNode),Nr(s,Lt()),l!==null)for(w=s.onRecoverableError,v=0;v<l.length;v++)S=l[v],w(S.value,{componentStack:S.stack,digest:S.digest});if(Su)throw Su=!1,s=wf,wf=null,s;return(Cu&1)!==0&&s.tag!==0&&Ai(),P=s.pendingLanes,(P&1)!==0?s===xf?Fs++:(Fs=0,xf=s):Fs=0,ta(),null}function Ai(){if(sa!==null){var s=gv(Cu),l=Qr.transition,v=mt;try{if(Qr.transition=null,mt=16>s?16:s,sa===null)var w=!1;else{if(s=sa,sa=null,Cu=0,(ct&6)!==0)throw Error(t(331));var S=ct;for(ct|=4,je=s.current;je!==null;){var P=je,j=P.child;if((je.flags&16)!==0){var re=P.deletions;if(re!==null){for(var ue=0;ue<re.length;ue++){var Te=re[ue];for(je=Te;je!==null;){var Ne=je;switch(Ne.tag){case 0:case 11:case 15:Os(8,Ne,P)}var Me=Ne.child;if(Me!==null)Me.return=Ne,je=Me;else for(;je!==null;){Ne=je;var Le=Ne.sibling,Ve=Ne.return;if(hg(Ne),Ne===Te){je=null;break}if(Le!==null){Le.return=Ve,je=Le;break}je=Ve}}}var He=P.alternate;if(He!==null){var Xe=He.child;if(Xe!==null){He.child=null;do{var qt=Xe.sibling;Xe.sibling=null,Xe=qt}while(Xe!==null)}}je=P}}if((P.subtreeFlags&2064)!==0&&j!==null)j.return=P,je=j;else e:for(;je!==null;){if(P=je,(P.flags&2048)!==0)switch(P.tag){case 0:case 11:case 15:Os(9,P,P.return)}var xe=P.sibling;if(xe!==null){xe.return=P.return,je=xe;break e}je=P.return}}var fe=s.current;for(je=fe;je!==null;){j=je;var Ee=j.child;if((j.subtreeFlags&2064)!==0&&Ee!==null)Ee.return=j,je=Ee;else e:for(j=fe;je!==null;){if(re=je,(re.flags&2048)!==0)try{switch(re.tag){case 0:case 11:case 15:bu(9,re)}}catch(Ze){Ft(re,re.return,Ze)}if(re===j){je=null;break e}var Fe=re.sibling;if(Fe!==null){Fe.return=re.return,je=Fe;break e}je=re.return}}if(ct=S,ta(),Vr&&typeof Vr.onPostCommitFiberRoot=="function")try{Vr.onPostCommitFiberRoot(Aa,s)}catch{}w=!0}return w}finally{mt=v,Qr.transition=l}}return!1}function Rg(s,l,v){l=Ti(v,l),l=Hp(s,l,1),s=na(s,l,1),l=Cr(),s!==null&&(ls(s,1,l),Nr(s,l))}function Ft(s,l,v){if(s.tag===3)Rg(s,s,v);else for(;l!==null;){if(l.tag===3){Rg(l,s,v);break}else if(l.tag===1){var w=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(ia===null||!ia.has(w))){s=Ti(v,s),s=Kp(l,s,1),l=na(l,s,1),s=Cr(),l!==null&&(ls(l,1,s),Nr(l,s));break}}l=l.return}}function wb(s,l,v){var w=s.pingCache;w!==null&&w.delete(l),l=Cr(),s.pingedLanes|=s.suspendedLanes&v,rr===s&&(lr&v)===v&&(Zt===4||Zt===3&&(lr&130023424)===lr&&500>Lt()-yf?Va(s,0):mf|=v),Nr(s,l)}function Bg(s,l){l===0&&((s.mode&1)===0?l=1:(l=oi,oi<<=1,(oi&130023424)===0&&(oi=4194304)));var v=Cr();s=In(s,l),s!==null&&(ls(s,l,v),Nr(s,v))}function xb(s){var l=s.memoizedState,v=0;l!==null&&(v=l.retryLane),Bg(s,v)}function bb(s,l){var v=0;switch(s.tag){case 13:var w=s.stateNode,S=s.memoizedState;S!==null&&(v=S.retryLane);break;case 19:w=s.stateNode;break;default:throw Error(t(314))}w!==null&&w.delete(l),Bg(s,v)}var Ag;Ag=function(s,l,v){if(s!==null)if(s.memoizedProps!==l.pendingProps||Ar.current)Ir=!0;else{if((s.lanes&v)===0&&(l.flags&128)===0)return Ir=!1,ub(s,l,v);Ir=(s.flags&131072)!==0}else Ir=!1,Bt&&(l.flags&1048576)!==0&&cp(l,au,l.index);switch(l.lanes=0,l.tag){case 2:var w=l.type;wu(s,l),s=l.pendingProps;var S=wi(l,gr.current);ki(l,v),S=Kc(null,l,w,s,S,v);var P=Xc();return l.flags|=1,typeof S=="object"&&S!==null&&typeof S.render=="function"&&S.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,Dr(w)?(P=!0,tu(l)):P=!1,l.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,$c(l),S.updater=mu,l.stateNode=S,S._reactInternals=l,tf(l,w,s,v),l=sf(null,l,w,!0,P,v)):(l.tag=0,Bt&&P&&Ac(l),kr(null,l,S,v),l=l.child),l;case 16:w=l.elementType;e:{switch(wu(s,l),s=l.pendingProps,S=w._init,w=S(w._payload),l.type=w,S=l.tag=Eb(w),s=un(w,s),S){case 0:l=af(null,l,w,s,v);break e;case 1:l=ng(null,l,w,s,v);break e;case 11:l=Qp(null,l,w,s,v);break e;case 14:l=Jp(null,l,w,un(w.type,s),v);break e}throw Error(t(306,w,""))}return l;case 0:return w=l.type,S=l.pendingProps,S=l.elementType===w?S:un(w,S),af(s,l,w,S,v);case 1:return w=l.type,S=l.pendingProps,S=l.elementType===w?S:un(w,S),ng(s,l,w,S,v);case 3:e:{if(ag(l),s===null)throw Error(t(387));w=l.pendingProps,P=l.memoizedState,S=P.element,wp(s,l),cu(l,w,null,v);var j=l.memoizedState;if(w=j.element,P.isDehydrated)if(P={element:w,isDehydrated:!1,cache:j.cache,pendingSuspenseBoundaries:j.pendingSuspenseBoundaries,transitions:j.transitions},l.updateQueue.baseState=P,l.memoizedState=P,l.flags&256){S=Ti(Error(t(423)),l),l=ig(s,l,w,v,S);break e}else if(w!==S){S=Ti(Error(t(424)),l),l=ig(s,l,w,v,S);break e}else for(Wr=Qn(l.stateNode.containerInfo.firstChild),qr=l,Bt=!0,on=null,v=mp(l,null,w,v),l.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling;else{if(_i(),w===S){l=Nn(s,l,v);break e}kr(s,l,w,v)}l=l.child}return l;case 5:return _p(l),s===null&&Lc(l),w=l.type,S=l.pendingProps,P=s!==null?s.memoizedProps:null,j=S.children,kc(w,S)?j=null:P!==null&&kc(w,P)&&(l.flags|=32),rg(s,l),kr(s,l,j,v),l.child;case 6:return s===null&&Lc(l),null;case 13:return sg(s,l,v);case 4:return Vc(l,l.stateNode.containerInfo),w=l.pendingProps,s===null?l.child=Ei(l,null,w,v):kr(s,l,w,v),l.child;case 11:return w=l.type,S=l.pendingProps,S=l.elementType===w?S:un(w,S),Qp(s,l,w,S,v);case 7:return kr(s,l,l.pendingProps,v),l.child;case 8:return kr(s,l,l.pendingProps.children,v),l.child;case 12:return kr(s,l,l.pendingProps.children,v),l.child;case 10:e:{if(w=l.type._context,S=l.pendingProps,P=l.memoizedProps,j=S.value,xt(ou,w._currentValue),w._currentValue=j,P!==null)if(sn(P.value,j)){if(P.children===S.children&&!Ar.current){l=Nn(s,l,v);break e}}else for(P=l.child,P!==null&&(P.return=l);P!==null;){var re=P.dependencies;if(re!==null){j=P.child;for(var ue=re.firstContext;ue!==null;){if(ue.context===w){if(P.tag===1){ue=Ln(-1,v&-v),ue.tag=2;var Te=P.updateQueue;if(Te!==null){Te=Te.shared;var Ne=Te.pending;Ne===null?ue.next=ue:(ue.next=Ne.next,Ne.next=ue),Te.pending=ue}}P.lanes|=v,ue=P.alternate,ue!==null&&(ue.lanes|=v),Fc(P.return,v,l),re.lanes|=v;break}ue=ue.next}}else if(P.tag===10)j=P.type===l.type?null:P.child;else if(P.tag===18){if(j=P.return,j===null)throw Error(t(341));j.lanes|=v,re=j.alternate,re!==null&&(re.lanes|=v),Fc(j,v,l),j=P.sibling}else j=P.child;if(j!==null)j.return=P;else for(j=P;j!==null;){if(j===l){j=null;break}if(P=j.sibling,P!==null){P.return=j.return,j=P;break}j=j.return}P=j}kr(s,l,S.children,v),l=l.child}return l;case 9:return S=l.type,w=l.pendingProps.children,ki(l,v),S=Zr(S),w=w(S),l.flags|=1,kr(s,l,w,v),l.child;case 14:return w=l.type,S=un(w,l.pendingProps),S=un(w.type,S),Jp(s,l,w,S,v);case 15:return eg(s,l,l.type,l.pendingProps,v);case 17:return w=l.type,S=l.pendingProps,S=l.elementType===w?S:un(w,S),wu(s,l),l.tag=1,Dr(w)?(s=!0,tu(l)):s=!1,ki(l,v),Wp(l,w,S),tf(l,w,S,v),sf(null,l,w,!0,s,v);case 19:return ug(s,l,v);case 22:return tg(s,l,v)}throw Error(t(156,l.tag))};function Dg(s,l){return is(s,l)}function _b(s,l,v,w){this.tag=s,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jr(s,l,v,w){return new _b(s,l,v,w)}function Cf(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Eb(s){if(typeof s=="function")return Cf(s)?1:0;if(s!=null){if(s=s.$$typeof,s===I)return 11;if(s===G)return 14}return 2}function la(s,l){var v=s.alternate;return v===null?(v=Jr(s.tag,l,s.key,s.mode),v.elementType=s.elementType,v.type=s.type,v.stateNode=s.stateNode,v.alternate=s,s.alternate=v):(v.pendingProps=l,v.type=s.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=s.flags&14680064,v.childLanes=s.childLanes,v.lanes=s.lanes,v.child=s.child,v.memoizedProps=s.memoizedProps,v.memoizedState=s.memoizedState,v.updateQueue=s.updateQueue,l=s.dependencies,v.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},v.sibling=s.sibling,v.index=s.index,v.ref=s.ref,v}function Bu(s,l,v,w,S,P){var j=2;if(w=s,typeof s=="function")Cf(s)&&(j=1);else if(typeof s=="string")j=5;else e:switch(s){case A:return qa(v.children,S,P,l);case z:j=8,S|=8;break;case M:return s=Jr(12,v,l,S|2),s.elementType=M,s.lanes=P,s;case F:return s=Jr(13,v,l,S),s.elementType=F,s.lanes=P,s;case T:return s=Jr(19,v,l,S),s.elementType=T,s.lanes=P,s;case W:return Au(v,S,P,l);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case V:j=10;break e;case q:j=9;break e;case I:j=11;break e;case G:j=14;break e;case Q:j=16,w=null;break e}throw Error(t(130,s==null?s:typeof s,""))}return l=Jr(j,v,l,S),l.elementType=s,l.type=w,l.lanes=P,l}function qa(s,l,v,w){return s=Jr(7,s,w,l),s.lanes=v,s}function Au(s,l,v,w){return s=Jr(22,s,w,l),s.elementType=W,s.lanes=v,s.stateNode={isHidden:!1},s}function Tf(s,l,v){return s=Jr(6,s,null,l),s.lanes=v,s}function Pf(s,l,v){return l=Jr(4,s.children!==null?s.children:[],s.key,l),l.lanes=v,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}function Sb(s,l,v,w,S){this.tag=l,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ec(0),this.expirationTimes=ec(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ec(0),this.identifierPrefix=w,this.onRecoverableError=S,this.mutableSourceEagerHydrationData=null}function Rf(s,l,v,w,S,P,j,re,ue){return s=new Sb(s,l,v,re,ue),l===1?(l=1,P===!0&&(l|=8)):l=0,P=Jr(3,null,null,l),s.current=P,P.stateNode=s,P.memoizedState={element:w,isDehydrated:v,cache:null,transitions:null,pendingSuspenseBoundaries:null},$c(P),s}function kb(s,l,v){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:N,key:w==null?null:""+w,children:s,containerInfo:l,implementation:v}}function Ig(s){if(!s)return ea;s=s._reactInternals;e:{if(Er(s)!==s||s.tag!==1)throw Error(t(170));var l=s;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(Dr(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(t(171))}if(s.tag===1){var v=s.type;if(Dr(v))return op(s,v,l)}return l}function Lg(s,l,v,w,S,P,j,re,ue){return s=Rf(v,w,!0,s,S,P,j,re,ue),s.context=Ig(null),v=s.current,w=Cr(),S=oa(v),P=Ln(w,S),P.callback=l??null,na(v,P,S),s.current.lanes=S,ls(s,S,w),Nr(s,w),s}function Du(s,l,v,w){var S=l.current,P=Cr(),j=oa(S);return v=Ig(v),l.context===null?l.context=v:l.pendingContext=v,l=Ln(P,j),l.payload={element:s},w=w===void 0?null:w,w!==null&&(l.callback=w),s=na(S,l,j),s!==null&&(fn(s,S,j,P),lu(s,S,j)),j}function Iu(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function Ng(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var v=s.retryLane;s.retryLane=v!==0&&v<l?v:l}}function Bf(s,l){Ng(s,l),(s=s.alternate)&&Ng(s,l)}function Cb(){return null}var Og=typeof reportError=="function"?reportError:function(s){console.error(s)};function Af(s){this._internalRoot=s}Lu.prototype.render=Af.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(t(409));Du(s,l,null,null)},Lu.prototype.unmount=Af.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;$a(function(){Du(null,s,null,null)}),l[Rn]=null}};function Lu(s){this._internalRoot=s}Lu.prototype.unstable_scheduleHydration=function(s){if(s){var l=wv();s={blockedOn:null,target:s,priority:l};for(var v=0;v<Xn.length&&l!==0&&l<Xn[v].priority;v++);Xn.splice(v,0,s),v===0&&_v(s)}};function Df(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function Nu(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function Mg(){}function Tb(s,l,v,w,S){if(S){if(typeof w=="function"){var P=w;w=function(){var Te=Iu(j);P.call(Te)}}var j=Lg(l,w,s,0,null,!1,!1,"",Mg);return s._reactRootContainer=j,s[Rn]=j.current,Es(s.nodeType===8?s.parentNode:s),$a(),j}for(;S=s.lastChild;)s.removeChild(S);if(typeof w=="function"){var re=w;w=function(){var Te=Iu(ue);re.call(Te)}}var ue=Rf(s,0,!1,null,null,!1,!1,"",Mg);return s._reactRootContainer=ue,s[Rn]=ue.current,Es(s.nodeType===8?s.parentNode:s),$a(function(){Du(l,ue,v,w)}),ue}function Ou(s,l,v,w,S){var P=v._reactRootContainer;if(P){var j=P;if(typeof S=="function"){var re=S;S=function(){var ue=Iu(j);re.call(ue)}}Du(l,j,s,S)}else j=Tb(v,l,s,S,w);return Iu(j)}mv=function(s){switch(s.tag){case 3:var l=s.stateNode;if(l.current.memoizedState.isDehydrated){var v=ui(l.pendingLanes);v!==0&&(tc(l,v|1),Nr(l,Lt()),(ct&6)===0&&(Bi=Lt()+500,ta()))}break;case 13:$a(function(){var w=In(s,1);if(w!==null){var S=Cr();fn(w,s,1,S)}}),Bf(s,1)}},rc=function(s){if(s.tag===13){var l=In(s,134217728);if(l!==null){var v=Cr();fn(l,s,134217728,v)}Bf(s,134217728)}},yv=function(s){if(s.tag===13){var l=oa(s),v=In(s,l);if(v!==null){var w=Cr();fn(v,s,l,w)}Bf(s,l)}},wv=function(){return mt},xv=function(s,l){var v=mt;try{return mt=s,l()}finally{mt=v}},We=function(s,l,v){switch(l){case"input":if(Y(s,v),l=v.name,v.type==="radio"&&l!=null){for(v=s;v.parentNode;)v=v.parentNode;for(v=v.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<v.length;l++){var w=v[l];if(w!==s&&w.form===s.form){var S=Jo(w);if(!S)throw Error(t(90));be(w),Y(w,S)}}}break;case"textarea":De(s,v);break;case"select":l=v.value,l!=null&&me(s,!!v.multiple,l,!1)}},st=Ef,it=$a;var Pb={usingClientEntryPoint:!1,Events:[Cs,mi,Jo,at,Ke,Ef]},Us={findFiberByHostInstance:Ia,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Rb={bundleType:Us.bundleType,version:Us.version,rendererPackageName:Us.rendererPackageName,rendererConfig:Us.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:C.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=Wn(s),s===null?null:s.stateNode},findFiberByHostInstance:Us.findFiberByHostInstance||Cb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mu.isDisabled&&Mu.supportsFiber)try{Aa=Mu.inject(Rb),Vr=Mu}catch{}}return Or.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Pb,Or.createPortal=function(s,l){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Df(l))throw Error(t(200));return kb(s,l,null,v)},Or.createRoot=function(s,l){if(!Df(s))throw Error(t(299));var v=!1,w="",S=Og;return l!=null&&(l.unstable_strictMode===!0&&(v=!0),l.identifierPrefix!==void 0&&(w=l.identifierPrefix),l.onRecoverableError!==void 0&&(S=l.onRecoverableError)),l=Rf(s,1,!1,null,null,v,!1,w,S),s[Rn]=l.current,Es(s.nodeType===8?s.parentNode:s),new Af(l)},Or.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(t(188)):(s=Object.keys(s).join(","),Error(t(268,s)));return s=Wn(l),s=s===null?null:s.stateNode,s},Or.flushSync=function(s){return $a(s)},Or.hydrate=function(s,l,v){if(!Nu(l))throw Error(t(200));return Ou(null,s,l,!0,v)},Or.hydrateRoot=function(s,l,v){if(!Df(s))throw Error(t(405));var w=v!=null&&v.hydratedSources||null,S=!1,P="",j=Og;if(v!=null&&(v.unstable_strictMode===!0&&(S=!0),v.identifierPrefix!==void 0&&(P=v.identifierPrefix),v.onRecoverableError!==void 0&&(j=v.onRecoverableError)),l=Lg(l,null,s,1,v??null,S,!1,P,j),s[Rn]=l.current,Es(s),w)for(s=0;s<w.length;s++)v=w[s],S=v._getVersion,S=S(v._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[v,S]:l.mutableSourceEagerHydrationData.push(v,S);return new Lu(l)},Or.render=function(s,l,v){if(!Nu(l))throw Error(t(200));return Ou(null,s,l,!1,v)},Or.unmountComponentAtNode=function(s){if(!Nu(s))throw Error(t(40));return s._reactRootContainer?($a(function(){Ou(null,null,s,!1,function(){s._reactRootContainer=null,s[Rn]=null})}),!0):!1},Or.unstable_batchedUpdates=Ef,Or.unstable_renderSubtreeIntoContainer=function(s,l,v,w){if(!Nu(v))throw Error(t(200));if(s==null||s._reactInternals===void 0)throw Error(t(38));return Ou(s,l,v,!1,w)},Or.version="18.3.1-next-f1338f8080-20240426",Or}var Wg;function Mb(){if(Wg)return Nf.exports;Wg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Nf.exports=Ob(),Nf.exports}var Gg;function zb(){if(Gg)return Fu;Gg=1;var r=Mb();return Fu.createRoot=r.createRoot,Fu.hydrateRoot=r.hydrateRoot,Fu}var Fb=zb();const Ub=Bl(Fb),$b={},Hg=r=>{let e;const t=new Set,n=(d,h)=>{const g=typeof d=="function"?d(e):d;if(!Object.is(g,e)){const p=e;e=h??(typeof g!="object"||g===null)?g:Object.assign({},e,g),t.forEach(m=>m(e,p))}},a=()=>e,c={setState:n,getState:a,getInitialState:()=>f,subscribe:d=>(t.add(d),()=>t.delete(d)),destroy:()=>{($b?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},f=e=r(n,a,c);return c},Vb=r=>r?Hg(r):Hg;var zf={exports:{}},Ff={},Uf={exports:{}},$f={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kg;function jb(){if(Kg)return $f;Kg=1;var r=bo();function e(h,g){return h===g&&(h!==0||1/h===1/g)||h!==h&&g!==g}var t=typeof Object.is=="function"?Object.is:e,n=r.useState,a=r.useEffect,i=r.useLayoutEffect,o=r.useDebugValue;function u(h,g){var p=g(),m=n({inst:{value:p,getSnapshot:g}}),y=m[0].inst,x=m[1];return i(function(){y.value=p,y.getSnapshot=g,c(y)&&x({inst:y})},[h,p,g]),a(function(){return c(y)&&x({inst:y}),h(function(){c(y)&&x({inst:y})})},[h]),o(p),p}function c(h){var g=h.getSnapshot;h=h.value;try{var p=g();return!t(h,p)}catch{return!0}}function f(h,g){return g()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:u;return $f.useSyncExternalStore=r.useSyncExternalStore!==void 0?r.useSyncExternalStore:d,$f}var Xg;function qb(){return Xg||(Xg=1,Uf.exports=jb()),Uf.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zg;function Wb(){if(Zg)return Ff;Zg=1;var r=bo(),e=qb();function t(f,d){return f===d&&(f!==0||1/f===1/d)||f!==f&&d!==d}var n=typeof Object.is=="function"?Object.is:t,a=e.useSyncExternalStore,i=r.useRef,o=r.useEffect,u=r.useMemo,c=r.useDebugValue;return Ff.useSyncExternalStoreWithSelector=function(f,d,h,g,p){var m=i(null);if(m.current===null){var y={hasValue:!1,value:null};m.current=y}else y=m.current;m=u(function(){function b(N){if(!_){if(_=!0,E=N,N=g(N),p!==void 0&&y.hasValue){var A=y.value;if(p(A,N))return C=A}return C=N}if(A=C,n(E,N))return A;var z=g(N);return p!==void 0&&p(A,z)?(E=N,A):(E=N,C=z)}var _=!1,E,C,B=h===void 0?null:h;return[function(){return b(d())},B===null?void 0:function(){return b(B())}]},[d,h,g,p]);var x=a(f,m[0],m[1]);return o(function(){y.hasValue=!0,y.value=x},[x]),c(x),x},Ff}var Yg;function Gb(){return Yg||(Yg=1,zf.exports=Wb()),zf.exports}var Hb=Gb();const Kb=Bl(Hb),j0={},{useDebugValue:Xb}=V0,{useSyncExternalStoreWithSelector:Zb}=Kb;let Qg=!1;const Yb=r=>r;function Qb(r,e=Yb,t){(j0?"production":void 0)!=="production"&&t&&!Qg&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Qg=!0);const n=Zb(r.subscribe,r.getState,r.getServerState||r.getInitialState,e,t);return Xb(n),n}const Jg=r=>{(j0?"production":void 0)!=="production"&&typeof r!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof r=="function"?Vb(r):r,t=(n,a)=>Qb(e,n,a);return Object.assign(t,e),t},Jb=r=>r?Jg(r):Jg,q0=["Theorem","Lemma","Corollary","Definition","Formula","Example","Exercise","Axiom","Proposition","Conclusion"],W0=["Proves","DependsOn","DerivedFrom","Contains","EquivalentTo","AppliesTo","Uses","AssistsIn"],e2=[...q0],t2=[...W0],em={nodes:[],edges:[]},tt=Jb((r,e)=>({graph:em,assets:{},latexFiles:[],schema:{entityTypes:e2,relationTypes:t2,notes:""},llm:{enabled:!1,protocol:"openai",baseUrl:"https://api.openai.com/v1",model:"gpt-5",apiKey:"",temperature:.2,topP:.9,maxTokens:1e5,parallelism:4},processing:{status:"idle",totalChunks:0,doneChunks:0},lastError:null,lastInfo:null,setInfo:t=>r({lastInfo:t}),setError:t=>r({lastError:t}),setSchema:t=>r({schema:{...e().schema,...t}}),setLlm:t=>r({llm:{...e().llm,...t}}),setLatexFiles:t=>r({latexFiles:t}),setAssets:t=>r({assets:t}),setGraph:t=>r({graph:t}),mergeGraph:t=>r(n=>({graph:{nodes:t.nodes?r2(n.graph.nodes,t.nodes):n.graph.nodes,edges:t.edges?n2(n.graph.edges,t.edges):n.graph.edges}})),updateNode:(t,n)=>r(a=>({graph:{...a.graph,nodes:a.graph.nodes.map(i=>i.id===t?{...i,...n,meta:{...i.meta,...n.meta}}:i)}})),updateNodes:t=>r(n=>{const a=new Map(t.map(i=>[i.id,i.patch]));return{graph:{...n.graph,nodes:n.graph.nodes.map(i=>{const o=a.get(i.id);return o?{...i,...o,meta:{...i.meta,...o.meta}}:i})}}}),setProcessing:t=>r({processing:{...e().processing,...t}}),stopProcessing:()=>{const t=e().processing.abortController;t&&t.abort(),r({processing:{...e().processing,status:"stopped",abortController:void 0}})},resetAll:()=>{const t=e().assets;for(const n of Object.values(t))URL.revokeObjectURL(n);r({graph:em,assets:{},latexFiles:[],processing:{status:"idle",totalChunks:0,doneChunks:0},lastError:null,lastInfo:null})}}));function r2(r,e){const t=new Map(r.map(n=>[n.id,n]));for(const n of e){const a=t.get(n.id);t.set(n.id,a?{...a,...n,meta:{...a.meta,...n.meta}}:n)}return[...t.values()]}function n2(r,e){const t=a=>{var i;return`${a.source}::${a.type}::${a.target}${(i=a.meta)!=null&&i.chunkId?`::${a.meta.chunkId}`:""}`},n=new Map(r.map(a=>[t(a),a]));for(const a of e){const i=t(a),o=n.get(i);n.set(i,o?{...o,...a,meta:{...o.meta,...a.meta}}:a)}return[...n.values()]}function Uu(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Vf={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var tm;function a2(){return tm||(tm=1,(function(r,e){(function(t){r.exports=t()})(function(){return(function t(n,a,i){function o(f,d){if(!a[f]){if(!n[f]){var h=typeof Uu=="function"&&Uu;if(!d&&h)return h(f,!0);if(u)return u(f,!0);var g=new Error("Cannot find module '"+f+"'");throw g.code="MODULE_NOT_FOUND",g}var p=a[f]={exports:{}};n[f][0].call(p.exports,function(m){var y=n[f][1][m];return o(y||m)},p,p.exports,t,n,a,i)}return a[f].exports}for(var u=typeof Uu=="function"&&Uu,c=0;c<i.length;c++)o(i[c]);return o})({1:[function(t,n,a){var i=t("./utils"),o=t("./support"),u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.encode=function(c){for(var f,d,h,g,p,m,y,x=[],b=0,_=c.length,E=_,C=i.getTypeOf(c)!=="string";b<c.length;)E=_-b,h=C?(f=c[b++],d=b<_?c[b++]:0,b<_?c[b++]:0):(f=c.charCodeAt(b++),d=b<_?c.charCodeAt(b++):0,b<_?c.charCodeAt(b++):0),g=f>>2,p=(3&f)<<4|d>>4,m=1<E?(15&d)<<2|h>>6:64,y=2<E?63&h:64,x.push(u.charAt(g)+u.charAt(p)+u.charAt(m)+u.charAt(y));return x.join("")},a.decode=function(c){var f,d,h,g,p,m,y=0,x=0,b="data:";if(c.substr(0,b.length)===b)throw new Error("Invalid base64 input, it looks like a data url.");var _,E=3*(c=c.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(c.charAt(c.length-1)===u.charAt(64)&&E--,c.charAt(c.length-2)===u.charAt(64)&&E--,E%1!=0)throw new Error("Invalid base64 input, bad content length.");for(_=o.uint8array?new Uint8Array(0|E):new Array(0|E);y<c.length;)f=u.indexOf(c.charAt(y++))<<2|(g=u.indexOf(c.charAt(y++)))>>4,d=(15&g)<<4|(p=u.indexOf(c.charAt(y++)))>>2,h=(3&p)<<6|(m=u.indexOf(c.charAt(y++))),_[x++]=f,p!==64&&(_[x++]=d),m!==64&&(_[x++]=h);return _}},{"./support":30,"./utils":32}],2:[function(t,n,a){var i=t("./external"),o=t("./stream/DataWorker"),u=t("./stream/Crc32Probe"),c=t("./stream/DataLengthProbe");function f(d,h,g,p,m){this.compressedSize=d,this.uncompressedSize=h,this.crc32=g,this.compression=p,this.compressedContent=m}f.prototype={getContentWorker:function(){var d=new o(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new c("data_length")),h=this;return d.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),d},getCompressedWorker:function(){return new o(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},f.createWorkerFrom=function(d,h,g){return d.pipe(new u).pipe(new c("uncompressedSize")).pipe(h.compressWorker(g)).pipe(new c("compressedSize")).withStreamInfo("compression",h)},n.exports=f},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,n,a){var i=t("./stream/GenericWorker");a.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},a.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,n,a){var i=t("./utils"),o=(function(){for(var u,c=[],f=0;f<256;f++){u=f;for(var d=0;d<8;d++)u=1&u?3988292384^u>>>1:u>>>1;c[f]=u}return c})();n.exports=function(u,c){return u!==void 0&&u.length?i.getTypeOf(u)!=="string"?(function(f,d,h,g){var p=o,m=g+h;f^=-1;for(var y=g;y<m;y++)f=f>>>8^p[255&(f^d[y])];return-1^f})(0|c,u,u.length,0):(function(f,d,h,g){var p=o,m=g+h;f^=-1;for(var y=g;y<m;y++)f=f>>>8^p[255&(f^d.charCodeAt(y))];return-1^f})(0|c,u,u.length,0):0}},{"./utils":32}],5:[function(t,n,a){a.base64=!1,a.binary=!1,a.dir=!1,a.createFolders=!0,a.date=null,a.compression=null,a.compressionOptions=null,a.comment=null,a.unixPermissions=null,a.dosPermissions=null},{}],6:[function(t,n,a){var i=null;i=typeof Promise<"u"?Promise:t("lie"),n.exports={Promise:i}},{lie:37}],7:[function(t,n,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=t("pako"),u=t("./utils"),c=t("./stream/GenericWorker"),f=i?"uint8array":"array";function d(h,g){c.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=g,this.meta={}}a.magic="\b\0",u.inherits(d,c),d.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(u.transformTo(f,h.data),!1)},d.prototype.flush=function(){c.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},d.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this._pako=null},d.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(g){h.push({data:g,meta:h.meta})}},a.compressWorker=function(h){return new d("Deflate",h)},a.uncompressWorker=function(){return new d("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,n,a){function i(p,m){var y,x="";for(y=0;y<m;y++)x+=String.fromCharCode(255&p),p>>>=8;return x}function o(p,m,y,x,b,_){var E,C,B=p.file,N=p.compression,A=_!==f.utf8encode,z=u.transformTo("string",_(B.name)),M=u.transformTo("string",f.utf8encode(B.name)),V=B.comment,q=u.transformTo("string",_(V)),I=u.transformTo("string",f.utf8encode(V)),F=M.length!==B.name.length,T=I.length!==V.length,G="",Q="",W="",X=B.dir,Z=B.date,te={crc32:0,compressedSize:0,uncompressedSize:0};m&&!y||(te.crc32=p.crc32,te.compressedSize=p.compressedSize,te.uncompressedSize=p.uncompressedSize);var L=0;m&&(L|=8),A||!F&&!T||(L|=2048);var U=0,oe=0;X&&(U|=16),b==="UNIX"?(oe=798,U|=(function(ne,we){var Pe=ne;return ne||(Pe=we?16893:33204),(65535&Pe)<<16})(B.unixPermissions,X)):(oe=20,U|=(function(ne){return 63&(ne||0)})(B.dosPermissions)),E=Z.getUTCHours(),E<<=6,E|=Z.getUTCMinutes(),E<<=5,E|=Z.getUTCSeconds()/2,C=Z.getUTCFullYear()-1980,C<<=4,C|=Z.getUTCMonth()+1,C<<=5,C|=Z.getUTCDate(),F&&(Q=i(1,1)+i(d(z),4)+M,G+="up"+i(Q.length,2)+Q),T&&(W=i(1,1)+i(d(q),4)+I,G+="uc"+i(W.length,2)+W);var ie="";return ie+=`
\0`,ie+=i(L,2),ie+=N.magic,ie+=i(E,2),ie+=i(C,2),ie+=i(te.crc32,4),ie+=i(te.compressedSize,4),ie+=i(te.uncompressedSize,4),ie+=i(z.length,2),ie+=i(G.length,2),{fileRecord:h.LOCAL_FILE_HEADER+ie+z+G,dirRecord:h.CENTRAL_FILE_HEADER+i(oe,2)+ie+i(q.length,2)+"\0\0\0\0"+i(U,4)+i(x,4)+z+G+q}}var u=t("../utils"),c=t("../stream/GenericWorker"),f=t("../utf8"),d=t("../crc32"),h=t("../signature");function g(p,m,y,x){c.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=m,this.zipPlatform=y,this.encodeFileName=x,this.streamFiles=p,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}u.inherits(g,c),g.prototype.push=function(p){var m=p.meta.percent||0,y=this.entriesCount,x=this._sources.length;this.accumulate?this.contentBuffer.push(p):(this.bytesWritten+=p.data.length,c.prototype.push.call(this,{data:p.data,meta:{currentFile:this.currentFile,percent:y?(m+100*(y-x-1))/y:100}}))},g.prototype.openedSource=function(p){this.currentSourceOffset=this.bytesWritten,this.currentFile=p.file.name;var m=this.streamFiles&&!p.file.dir;if(m){var y=o(p,m,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:y.fileRecord,meta:{percent:0}})}else this.accumulate=!0},g.prototype.closedSource=function(p){this.accumulate=!1;var m=this.streamFiles&&!p.file.dir,y=o(p,m,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(y.dirRecord),m)this.push({data:(function(x){return h.DATA_DESCRIPTOR+i(x.crc32,4)+i(x.compressedSize,4)+i(x.uncompressedSize,4)})(p),meta:{percent:100}});else for(this.push({data:y.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},g.prototype.flush=function(){for(var p=this.bytesWritten,m=0;m<this.dirRecords.length;m++)this.push({data:this.dirRecords[m],meta:{percent:100}});var y=this.bytesWritten-p,x=(function(b,_,E,C,B){var N=u.transformTo("string",B(C));return h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(b,2)+i(b,2)+i(_,4)+i(E,4)+i(N.length,2)+N})(this.dirRecords.length,y,p,this.zipComment,this.encodeFileName);this.push({data:x,meta:{percent:100}})},g.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},g.prototype.registerPrevious=function(p){this._sources.push(p);var m=this;return p.on("data",function(y){m.processChunk(y)}),p.on("end",function(){m.closedSource(m.previous.streamInfo),m._sources.length?m.prepareNextSource():m.end()}),p.on("error",function(y){m.error(y)}),this},g.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},g.prototype.error=function(p){var m=this._sources;if(!c.prototype.error.call(this,p))return!1;for(var y=0;y<m.length;y++)try{m[y].error(p)}catch{}return!0},g.prototype.lock=function(){c.prototype.lock.call(this);for(var p=this._sources,m=0;m<p.length;m++)p[m].lock()},n.exports=g},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,n,a){var i=t("../compressions"),o=t("./ZipFileWorker");a.generateWorker=function(u,c,f){var d=new o(c.streamFiles,f,c.platform,c.encodeFileName),h=0;try{u.forEach(function(g,p){h++;var m=(function(_,E){var C=_||E,B=i[C];if(!B)throw new Error(C+" is not a valid compression method !");return B})(p.options.compression,c.compression),y=p.options.compressionOptions||c.compressionOptions||{},x=p.dir,b=p.date;p._compressWorker(m,y).withStreamInfo("file",{name:g,dir:x,date:b,comment:p.comment||"",unixPermissions:p.unixPermissions,dosPermissions:p.dosPermissions}).pipe(d)}),d.entriesCount=h}catch(g){d.error(g)}return d}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,n,a){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new i;for(var u in this)typeof this[u]!="function"&&(o[u]=this[u]);return o}}(i.prototype=t("./object")).loadAsync=t("./load"),i.support=t("./support"),i.defaults=t("./defaults"),i.version="3.10.1",i.loadAsync=function(o,u){return new i().loadAsync(o,u)},i.external=t("./external"),n.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,n,a){var i=t("./utils"),o=t("./external"),u=t("./utf8"),c=t("./zipEntries"),f=t("./stream/Crc32Probe"),d=t("./nodejsUtils");function h(g){return new o.Promise(function(p,m){var y=g.decompressed.getContentWorker().pipe(new f);y.on("error",function(x){m(x)}).on("end",function(){y.streamInfo.crc32!==g.decompressed.crc32?m(new Error("Corrupted zip : CRC32 mismatch")):p()}).resume()})}n.exports=function(g,p){var m=this;return p=i.extend(p||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:u.utf8decode}),d.isNode&&d.isStream(g)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",g,!0,p.optimizedBinaryString,p.base64).then(function(y){var x=new c(p);return x.load(y),x}).then(function(y){var x=[o.Promise.resolve(y)],b=y.files;if(p.checkCRC32)for(var _=0;_<b.length;_++)x.push(h(b[_]));return o.Promise.all(x)}).then(function(y){for(var x=y.shift(),b=x.files,_=0;_<b.length;_++){var E=b[_],C=E.fileNameStr,B=i.resolve(E.fileNameStr);m.file(B,E.decompressed,{binary:!0,optimizedBinaryString:!0,date:E.date,dir:E.dir,comment:E.fileCommentStr.length?E.fileCommentStr:null,unixPermissions:E.unixPermissions,dosPermissions:E.dosPermissions,createFolders:p.createFolders}),E.dir||(m.file(B).unsafeOriginalName=C)}return x.zipComment.length&&(m.comment=x.zipComment),m})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,n,a){var i=t("../utils"),o=t("../stream/GenericWorker");function u(c,f){o.call(this,"Nodejs stream input adapter for "+c),this._upstreamEnded=!1,this._bindStream(f)}i.inherits(u,o),u.prototype._bindStream=function(c){var f=this;(this._stream=c).pause(),c.on("data",function(d){f.push({data:d,meta:{percent:0}})}).on("error",function(d){f.isPaused?this.generatedError=d:f.error(d)}).on("end",function(){f.isPaused?f._upstreamEnded=!0:f.end()})},u.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},u.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=u},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,n,a){var i=t("readable-stream").Readable;function o(u,c,f){i.call(this,c),this._helper=u;var d=this;u.on("data",function(h,g){d.push(h)||d._helper.pause(),f&&f(g)}).on("error",function(h){d.emit("error",h)}).on("end",function(){d.push(null)})}t("../utils").inherits(o,i),o.prototype._read=function(){this._helper.resume()},n.exports=o},{"../utils":32,"readable-stream":16}],14:[function(t,n,a){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,o);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,o)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var o=new Buffer(i);return o.fill(0),o},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(t,n,a){function i(B,N,A){var z,M=u.getTypeOf(N),V=u.extend(A||{},d);V.date=V.date||new Date,V.compression!==null&&(V.compression=V.compression.toUpperCase()),typeof V.unixPermissions=="string"&&(V.unixPermissions=parseInt(V.unixPermissions,8)),V.unixPermissions&&16384&V.unixPermissions&&(V.dir=!0),V.dosPermissions&&16&V.dosPermissions&&(V.dir=!0),V.dir&&(B=b(B)),V.createFolders&&(z=x(B))&&_.call(this,z,!0);var q=M==="string"&&V.binary===!1&&V.base64===!1;A&&A.binary!==void 0||(V.binary=!q),(N instanceof h&&N.uncompressedSize===0||V.dir||!N||N.length===0)&&(V.base64=!1,V.binary=!0,N="",V.compression="STORE",M="string");var I=null;I=N instanceof h||N instanceof c?N:m.isNode&&m.isStream(N)?new y(B,N):u.prepareContent(B,N,V.binary,V.optimizedBinaryString,V.base64);var F=new g(B,I,V);this.files[B]=F}var o=t("./utf8"),u=t("./utils"),c=t("./stream/GenericWorker"),f=t("./stream/StreamHelper"),d=t("./defaults"),h=t("./compressedObject"),g=t("./zipObject"),p=t("./generate"),m=t("./nodejsUtils"),y=t("./nodejs/NodejsStreamInputAdapter"),x=function(B){B.slice(-1)==="/"&&(B=B.substring(0,B.length-1));var N=B.lastIndexOf("/");return 0<N?B.substring(0,N):""},b=function(B){return B.slice(-1)!=="/"&&(B+="/"),B},_=function(B,N){return N=N!==void 0?N:d.createFolders,B=b(B),this.files[B]||i.call(this,B,null,{dir:!0,createFolders:N}),this.files[B]};function E(B){return Object.prototype.toString.call(B)==="[object RegExp]"}var C={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(B){var N,A,z;for(N in this.files)z=this.files[N],(A=N.slice(this.root.length,N.length))&&N.slice(0,this.root.length)===this.root&&B(A,z)},filter:function(B){var N=[];return this.forEach(function(A,z){B(A,z)&&N.push(z)}),N},file:function(B,N,A){if(arguments.length!==1)return B=this.root+B,i.call(this,B,N,A),this;if(E(B)){var z=B;return this.filter(function(V,q){return!q.dir&&z.test(V)})}var M=this.files[this.root+B];return M&&!M.dir?M:null},folder:function(B){if(!B)return this;if(E(B))return this.filter(function(M,V){return V.dir&&B.test(M)});var N=this.root+B,A=_.call(this,N),z=this.clone();return z.root=A.name,z},remove:function(B){B=this.root+B;var N=this.files[B];if(N||(B.slice(-1)!=="/"&&(B+="/"),N=this.files[B]),N&&!N.dir)delete this.files[B];else for(var A=this.filter(function(M,V){return V.name.slice(0,B.length)===B}),z=0;z<A.length;z++)delete this.files[A[z].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(B){var N,A={};try{if((A=u.extend(B||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=A.type.toLowerCase(),A.compression=A.compression.toUpperCase(),A.type==="binarystring"&&(A.type="string"),!A.type)throw new Error("No output type specified.");u.checkSupport(A.type),A.platform!=="darwin"&&A.platform!=="freebsd"&&A.platform!=="linux"&&A.platform!=="sunos"||(A.platform="UNIX"),A.platform==="win32"&&(A.platform="DOS");var z=A.comment||this.comment||"";N=p.generateWorker(this,A,z)}catch(M){(N=new c("error")).error(M)}return new f(N,A.type||"string",A.mimeType)},generateAsync:function(B,N){return this.generateInternalStream(B).accumulate(N)},generateNodeStream:function(B,N){return(B=B||{}).type||(B.type="nodebuffer"),this.generateInternalStream(B).toNodejsStream(N)}};n.exports=C},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,n,a){n.exports=t("stream")},{stream:void 0}],17:[function(t,n,a){var i=t("./DataReader");function o(u){i.call(this,u);for(var c=0;c<this.data.length;c++)u[c]=255&u[c]}t("../utils").inherits(o,i),o.prototype.byteAt=function(u){return this.data[this.zero+u]},o.prototype.lastIndexOfSignature=function(u){for(var c=u.charCodeAt(0),f=u.charCodeAt(1),d=u.charCodeAt(2),h=u.charCodeAt(3),g=this.length-4;0<=g;--g)if(this.data[g]===c&&this.data[g+1]===f&&this.data[g+2]===d&&this.data[g+3]===h)return g-this.zero;return-1},o.prototype.readAndCheckSignature=function(u){var c=u.charCodeAt(0),f=u.charCodeAt(1),d=u.charCodeAt(2),h=u.charCodeAt(3),g=this.readData(4);return c===g[0]&&f===g[1]&&d===g[2]&&h===g[3]},o.prototype.readData=function(u){if(this.checkOffset(u),u===0)return[];var c=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,c},n.exports=o},{"../utils":32,"./DataReader":18}],18:[function(t,n,a){var i=t("../utils");function o(u){this.data=u,this.length=u.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(u){this.checkIndex(this.index+u)},checkIndex:function(u){if(this.length<this.zero+u||u<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+u+"). Corrupted zip ?")},setIndex:function(u){this.checkIndex(u),this.index=u},skip:function(u){this.setIndex(this.index+u)},byteAt:function(){},readInt:function(u){var c,f=0;for(this.checkOffset(u),c=this.index+u-1;c>=this.index;c--)f=(f<<8)+this.byteAt(c);return this.index+=u,f},readString:function(u){return i.transformTo("string",this.readData(u))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var u=this.readInt(4);return new Date(Date.UTC(1980+(u>>25&127),(u>>21&15)-1,u>>16&31,u>>11&31,u>>5&63,(31&u)<<1))}},n.exports=o},{"../utils":32}],19:[function(t,n,a){var i=t("./Uint8ArrayReader");function o(u){i.call(this,u)}t("../utils").inherits(o,i),o.prototype.readData=function(u){this.checkOffset(u);var c=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,c},n.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,n,a){var i=t("./DataReader");function o(u){i.call(this,u)}t("../utils").inherits(o,i),o.prototype.byteAt=function(u){return this.data.charCodeAt(this.zero+u)},o.prototype.lastIndexOfSignature=function(u){return this.data.lastIndexOf(u)-this.zero},o.prototype.readAndCheckSignature=function(u){return u===this.readData(4)},o.prototype.readData=function(u){this.checkOffset(u);var c=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,c},n.exports=o},{"../utils":32,"./DataReader":18}],21:[function(t,n,a){var i=t("./ArrayReader");function o(u){i.call(this,u)}t("../utils").inherits(o,i),o.prototype.readData=function(u){if(this.checkOffset(u),u===0)return new Uint8Array(0);var c=this.data.subarray(this.zero+this.index,this.zero+this.index+u);return this.index+=u,c},n.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(t,n,a){var i=t("../utils"),o=t("../support"),u=t("./ArrayReader"),c=t("./StringReader"),f=t("./NodeBufferReader"),d=t("./Uint8ArrayReader");n.exports=function(h){var g=i.getTypeOf(h);return i.checkSupport(g),g!=="string"||o.uint8array?g==="nodebuffer"?new f(h):o.uint8array?new d(i.transformTo("uint8array",h)):new u(i.transformTo("array",h)):new c(h)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,n,a){a.LOCAL_FILE_HEADER="PK",a.CENTRAL_FILE_HEADER="PK",a.CENTRAL_DIRECTORY_END="PK",a.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",a.ZIP64_CENTRAL_DIRECTORY_END="PK",a.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,n,a){var i=t("./GenericWorker"),o=t("../utils");function u(c){i.call(this,"ConvertWorker to "+c),this.destType=c}o.inherits(u,i),u.prototype.processChunk=function(c){this.push({data:o.transformTo(this.destType,c.data),meta:c.meta})},n.exports=u},{"../utils":32,"./GenericWorker":28}],25:[function(t,n,a){var i=t("./GenericWorker"),o=t("../crc32");function u(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(u,i),u.prototype.processChunk=function(c){this.streamInfo.crc32=o(c.data,this.streamInfo.crc32||0),this.push(c)},n.exports=u},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,n,a){var i=t("../utils"),o=t("./GenericWorker");function u(c){o.call(this,"DataLengthProbe for "+c),this.propName=c,this.withStreamInfo(c,0)}i.inherits(u,o),u.prototype.processChunk=function(c){if(c){var f=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=f+c.data.length}o.prototype.processChunk.call(this,c)},n.exports=u},{"../utils":32,"./GenericWorker":28}],27:[function(t,n,a){var i=t("../utils"),o=t("./GenericWorker");function u(c){o.call(this,"DataWorker");var f=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,c.then(function(d){f.dataIsReady=!0,f.data=d,f.max=d&&d.length||0,f.type=i.getTypeOf(d),f.isPaused||f._tickAndRepeat()},function(d){f.error(d)})}i.inherits(u,o),u.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},u.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},u.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},u.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var c=null,f=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":c=this.data.substring(this.index,f);break;case"uint8array":c=this.data.subarray(this.index,f);break;case"array":case"nodebuffer":c=this.data.slice(this.index,f)}return this.index=f,this.push({data:c,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=u},{"../utils":32,"./GenericWorker":28}],28:[function(t,n,a){function i(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,u){return this._listeners[o].push(u),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,u){if(this._listeners[o])for(var c=0;c<this._listeners[o].length;c++)this._listeners[o][c].call(this,u)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var u=this;return o.on("data",function(c){u.processChunk(c)}),o.on("end",function(){u.end()}),o.on("error",function(c){u.error(c)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,u){return this.extraStreamInfo[o]=u,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},n.exports=i},{}],29:[function(t,n,a){var i=t("../utils"),o=t("./ConvertWorker"),u=t("./GenericWorker"),c=t("../base64"),f=t("../support"),d=t("../external"),h=null;if(f.nodestream)try{h=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function g(m,y){return new d.Promise(function(x,b){var _=[],E=m._internalType,C=m._outputType,B=m._mimeType;m.on("data",function(N,A){_.push(N),y&&y(A)}).on("error",function(N){_=[],b(N)}).on("end",function(){try{var N=(function(A,z,M){switch(A){case"blob":return i.newBlob(i.transformTo("arraybuffer",z),M);case"base64":return c.encode(z);default:return i.transformTo(A,z)}})(C,(function(A,z){var M,V=0,q=null,I=0;for(M=0;M<z.length;M++)I+=z[M].length;switch(A){case"string":return z.join("");case"array":return Array.prototype.concat.apply([],z);case"uint8array":for(q=new Uint8Array(I),M=0;M<z.length;M++)q.set(z[M],V),V+=z[M].length;return q;case"nodebuffer":return Buffer.concat(z);default:throw new Error("concat : unsupported type '"+A+"'")}})(E,_),B);x(N)}catch(A){b(A)}_=[]}).resume()})}function p(m,y,x){var b=y;switch(y){case"blob":case"arraybuffer":b="uint8array";break;case"base64":b="string"}try{this._internalType=b,this._outputType=y,this._mimeType=x,i.checkSupport(b),this._worker=m.pipe(new o(b)),m.lock()}catch(_){this._worker=new u("error"),this._worker.error(_)}}p.prototype={accumulate:function(m){return g(this,m)},on:function(m,y){var x=this;return m==="data"?this._worker.on(m,function(b){y.call(x,b.data,b.meta)}):this._worker.on(m,function(){i.delay(y,arguments,x)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(m){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},m)}},n.exports=p},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,n,a){if(a.base64=!0,a.array=!0,a.string=!0,a.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",a.nodebuffer=typeof Buffer<"u",a.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")a.blob=!1;else{var i=new ArrayBuffer(0);try{a.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(i),a.blob=o.getBlob("application/zip").size===0}catch{a.blob=!1}}}try{a.nodestream=!!t("readable-stream").Readable}catch{a.nodestream=!1}},{"readable-stream":16}],31:[function(t,n,a){for(var i=t("./utils"),o=t("./support"),u=t("./nodejsUtils"),c=t("./stream/GenericWorker"),f=new Array(256),d=0;d<256;d++)f[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;f[254]=f[254]=1;function h(){c.call(this,"utf-8 decode"),this.leftOver=null}function g(){c.call(this,"utf-8 encode")}a.utf8encode=function(p){return o.nodebuffer?u.newBufferFrom(p,"utf-8"):(function(m){var y,x,b,_,E,C=m.length,B=0;for(_=0;_<C;_++)(64512&(x=m.charCodeAt(_)))==55296&&_+1<C&&(64512&(b=m.charCodeAt(_+1)))==56320&&(x=65536+(x-55296<<10)+(b-56320),_++),B+=x<128?1:x<2048?2:x<65536?3:4;for(y=o.uint8array?new Uint8Array(B):new Array(B),_=E=0;E<B;_++)(64512&(x=m.charCodeAt(_)))==55296&&_+1<C&&(64512&(b=m.charCodeAt(_+1)))==56320&&(x=65536+(x-55296<<10)+(b-56320),_++),x<128?y[E++]=x:(x<2048?y[E++]=192|x>>>6:(x<65536?y[E++]=224|x>>>12:(y[E++]=240|x>>>18,y[E++]=128|x>>>12&63),y[E++]=128|x>>>6&63),y[E++]=128|63&x);return y})(p)},a.utf8decode=function(p){return o.nodebuffer?i.transformTo("nodebuffer",p).toString("utf-8"):(function(m){var y,x,b,_,E=m.length,C=new Array(2*E);for(y=x=0;y<E;)if((b=m[y++])<128)C[x++]=b;else if(4<(_=f[b]))C[x++]=65533,y+=_-1;else{for(b&=_===2?31:_===3?15:7;1<_&&y<E;)b=b<<6|63&m[y++],_--;1<_?C[x++]=65533:b<65536?C[x++]=b:(b-=65536,C[x++]=55296|b>>10&1023,C[x++]=56320|1023&b)}return C.length!==x&&(C.subarray?C=C.subarray(0,x):C.length=x),i.applyFromCharCode(C)})(p=i.transformTo(o.uint8array?"uint8array":"array",p))},i.inherits(h,c),h.prototype.processChunk=function(p){var m=i.transformTo(o.uint8array?"uint8array":"array",p.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var y=m;(m=new Uint8Array(y.length+this.leftOver.length)).set(this.leftOver,0),m.set(y,this.leftOver.length)}else m=this.leftOver.concat(m);this.leftOver=null}var x=(function(_,E){var C;for((E=E||_.length)>_.length&&(E=_.length),C=E-1;0<=C&&(192&_[C])==128;)C--;return C<0||C===0?E:C+f[_[C]]>E?C:E})(m),b=m;x!==m.length&&(o.uint8array?(b=m.subarray(0,x),this.leftOver=m.subarray(x,m.length)):(b=m.slice(0,x),this.leftOver=m.slice(x,m.length))),this.push({data:a.utf8decode(b),meta:p.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:a.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},a.Utf8DecodeWorker=h,i.inherits(g,c),g.prototype.processChunk=function(p){this.push({data:a.utf8encode(p.data),meta:p.meta})},a.Utf8EncodeWorker=g},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,n,a){var i=t("./support"),o=t("./base64"),u=t("./nodejsUtils"),c=t("./external");function f(y){return y}function d(y,x){for(var b=0;b<y.length;++b)x[b]=255&y.charCodeAt(b);return x}t("setimmediate"),a.newBlob=function(y,x){a.checkSupport("blob");try{return new Blob([y],{type:x})}catch{try{var b=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return b.append(y),b.getBlob(x)}catch{throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(y,x,b){var _=[],E=0,C=y.length;if(C<=b)return String.fromCharCode.apply(null,y);for(;E<C;)x==="array"||x==="nodebuffer"?_.push(String.fromCharCode.apply(null,y.slice(E,Math.min(E+b,C)))):_.push(String.fromCharCode.apply(null,y.subarray(E,Math.min(E+b,C)))),E+=b;return _.join("")},stringifyByChar:function(y){for(var x="",b=0;b<y.length;b++)x+=String.fromCharCode(y[b]);return x},applyCanBeUsed:{uint8array:(function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,u.allocBuffer(1)).length===1}catch{return!1}})()}};function g(y){var x=65536,b=a.getTypeOf(y),_=!0;if(b==="uint8array"?_=h.applyCanBeUsed.uint8array:b==="nodebuffer"&&(_=h.applyCanBeUsed.nodebuffer),_)for(;1<x;)try{return h.stringifyByChunk(y,b,x)}catch{x=Math.floor(x/2)}return h.stringifyByChar(y)}function p(y,x){for(var b=0;b<y.length;b++)x[b]=y[b];return x}a.applyFromCharCode=g;var m={};m.string={string:f,array:function(y){return d(y,new Array(y.length))},arraybuffer:function(y){return m.string.uint8array(y).buffer},uint8array:function(y){return d(y,new Uint8Array(y.length))},nodebuffer:function(y){return d(y,u.allocBuffer(y.length))}},m.array={string:g,array:f,arraybuffer:function(y){return new Uint8Array(y).buffer},uint8array:function(y){return new Uint8Array(y)},nodebuffer:function(y){return u.newBufferFrom(y)}},m.arraybuffer={string:function(y){return g(new Uint8Array(y))},array:function(y){return p(new Uint8Array(y),new Array(y.byteLength))},arraybuffer:f,uint8array:function(y){return new Uint8Array(y)},nodebuffer:function(y){return u.newBufferFrom(new Uint8Array(y))}},m.uint8array={string:g,array:function(y){return p(y,new Array(y.length))},arraybuffer:function(y){return y.buffer},uint8array:f,nodebuffer:function(y){return u.newBufferFrom(y)}},m.nodebuffer={string:g,array:function(y){return p(y,new Array(y.length))},arraybuffer:function(y){return m.nodebuffer.uint8array(y).buffer},uint8array:function(y){return p(y,new Uint8Array(y.length))},nodebuffer:f},a.transformTo=function(y,x){if(x=x||"",!y)return x;a.checkSupport(y);var b=a.getTypeOf(x);return m[b][y](x)},a.resolve=function(y){for(var x=y.split("/"),b=[],_=0;_<x.length;_++){var E=x[_];E==="."||E===""&&_!==0&&_!==x.length-1||(E===".."?b.pop():b.push(E))}return b.join("/")},a.getTypeOf=function(y){return typeof y=="string"?"string":Object.prototype.toString.call(y)==="[object Array]"?"array":i.nodebuffer&&u.isBuffer(y)?"nodebuffer":i.uint8array&&y instanceof Uint8Array?"uint8array":i.arraybuffer&&y instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(y){if(!i[y.toLowerCase()])throw new Error(y+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(y){var x,b,_="";for(b=0;b<(y||"").length;b++)_+="\\x"+((x=y.charCodeAt(b))<16?"0":"")+x.toString(16).toUpperCase();return _},a.delay=function(y,x,b){setImmediate(function(){y.apply(b||null,x||[])})},a.inherits=function(y,x){function b(){}b.prototype=x.prototype,y.prototype=new b},a.extend=function(){var y,x,b={};for(y=0;y<arguments.length;y++)for(x in arguments[y])Object.prototype.hasOwnProperty.call(arguments[y],x)&&b[x]===void 0&&(b[x]=arguments[y][x]);return b},a.prepareContent=function(y,x,b,_,E){return c.Promise.resolve(x).then(function(C){return i.blob&&(C instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(C))!==-1)&&typeof FileReader<"u"?new c.Promise(function(B,N){var A=new FileReader;A.onload=function(z){B(z.target.result)},A.onerror=function(z){N(z.target.error)},A.readAsArrayBuffer(C)}):C}).then(function(C){var B=a.getTypeOf(C);return B?(B==="arraybuffer"?C=a.transformTo("uint8array",C):B==="string"&&(E?C=o.decode(C):b&&_!==!0&&(C=(function(N){return d(N,i.uint8array?new Uint8Array(N.length):new Array(N.length))})(C))),C):c.Promise.reject(new Error("Can't read the data of '"+y+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,n,a){var i=t("./reader/readerFor"),o=t("./utils"),u=t("./signature"),c=t("./zipEntry"),f=t("./support");function d(h){this.files=[],this.loadOptions=h}d.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var g=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(g)+", expected "+o.pretty(h)+")")}},isSignature:function(h,g){var p=this.reader.index;this.reader.setIndex(h);var m=this.reader.readString(4)===g;return this.reader.setIndex(p),m},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),g=f.uint8array?"uint8array":"array",p=o.transformTo(g,h);this.zipComment=this.loadOptions.decodeFileName(p)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h,g,p,m=this.zip64EndOfCentralSize-44;0<m;)h=this.reader.readInt(2),g=this.reader.readInt(4),p=this.reader.readData(g),this.zip64ExtensibleData[h]={id:h,length:g,value:p}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,g;for(h=0;h<this.files.length;h++)g=this.files[h],this.reader.setIndex(g.localHeaderOffset),this.checkSignature(u.LOCAL_FILE_HEADER),g.readLocalPart(this.reader),g.handleUTF8(),g.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(u.CENTRAL_FILE_HEADER);)(h=new c({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(u.CENTRAL_DIRECTORY_END);if(h<0)throw this.isSignature(0,u.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(h);var g=h;if(this.checkSignature(u.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(h=this.reader.lastIndexOfSignature(u.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(u.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,u.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(u.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(u.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var p=this.centralDirOffset+this.centralDirSize;this.zip64&&(p+=20,p+=12+this.zip64EndOfCentralSize);var m=g-p;if(0<m)this.isSignature(g,u.CENTRAL_FILE_HEADER)||(this.reader.zero=m);else if(m<0)throw new Error("Corrupted zip: missing "+Math.abs(m)+" bytes.")},prepareReader:function(h){this.reader=i(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=d},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,n,a){var i=t("./reader/readerFor"),o=t("./utils"),u=t("./compressedObject"),c=t("./crc32"),f=t("./utf8"),d=t("./compressions"),h=t("./support");function g(p,m){this.options=p,this.loadOptions=m}g.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(p){var m,y;if(p.skip(22),this.fileNameLength=p.readInt(2),y=p.readInt(2),this.fileName=p.readData(this.fileNameLength),p.skip(y),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((m=(function(x){for(var b in d)if(Object.prototype.hasOwnProperty.call(d,b)&&d[b].magic===x)return d[b];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new u(this.compressedSize,this.uncompressedSize,this.crc32,m,p.readData(this.compressedSize))},readCentralPart:function(p){this.versionMadeBy=p.readInt(2),p.skip(2),this.bitFlag=p.readInt(2),this.compressionMethod=p.readString(2),this.date=p.readDate(),this.crc32=p.readInt(4),this.compressedSize=p.readInt(4),this.uncompressedSize=p.readInt(4);var m=p.readInt(2);if(this.extraFieldsLength=p.readInt(2),this.fileCommentLength=p.readInt(2),this.diskNumberStart=p.readInt(2),this.internalFileAttributes=p.readInt(2),this.externalFileAttributes=p.readInt(4),this.localHeaderOffset=p.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");p.skip(m),this.readExtraFields(p),this.parseZIP64ExtraField(p),this.fileComment=p.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var p=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),p==0&&(this.dosPermissions=63&this.externalFileAttributes),p==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var p=i(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=p.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=p.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=p.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=p.readInt(4))}},readExtraFields:function(p){var m,y,x,b=p.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});p.index+4<b;)m=p.readInt(2),y=p.readInt(2),x=p.readData(y),this.extraFields[m]={id:m,length:y,value:x};p.setIndex(b)},handleUTF8:function(){var p=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=f.utf8decode(this.fileName),this.fileCommentStr=f.utf8decode(this.fileComment);else{var m=this.findExtraFieldUnicodePath();if(m!==null)this.fileNameStr=m;else{var y=o.transformTo(p,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(y)}var x=this.findExtraFieldUnicodeComment();if(x!==null)this.fileCommentStr=x;else{var b=o.transformTo(p,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(b)}}},findExtraFieldUnicodePath:function(){var p=this.extraFields[28789];if(p){var m=i(p.value);return m.readInt(1)!==1||c(this.fileName)!==m.readInt(4)?null:f.utf8decode(m.readData(p.length-5))}return null},findExtraFieldUnicodeComment:function(){var p=this.extraFields[25461];if(p){var m=i(p.value);return m.readInt(1)!==1||c(this.fileComment)!==m.readInt(4)?null:f.utf8decode(m.readData(p.length-5))}return null}},n.exports=g},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,n,a){function i(m,y,x){this.name=m,this.dir=x.dir,this.date=x.date,this.comment=x.comment,this.unixPermissions=x.unixPermissions,this.dosPermissions=x.dosPermissions,this._data=y,this._dataBinary=x.binary,this.options={compression:x.compression,compressionOptions:x.compressionOptions}}var o=t("./stream/StreamHelper"),u=t("./stream/DataWorker"),c=t("./utf8"),f=t("./compressedObject"),d=t("./stream/GenericWorker");i.prototype={internalStream:function(m){var y=null,x="string";try{if(!m)throw new Error("No output type specified.");var b=(x=m.toLowerCase())==="string"||x==="text";x!=="binarystring"&&x!=="text"||(x="string"),y=this._decompressWorker();var _=!this._dataBinary;_&&!b&&(y=y.pipe(new c.Utf8EncodeWorker)),!_&&b&&(y=y.pipe(new c.Utf8DecodeWorker))}catch(E){(y=new d("error")).error(E)}return new o(y,x,"")},async:function(m,y){return this.internalStream(m).accumulate(y)},nodeStream:function(m,y){return this.internalStream(m||"nodebuffer").toNodejsStream(y)},_compressWorker:function(m,y){if(this._data instanceof f&&this._data.compression.magic===m.magic)return this._data.getCompressedWorker();var x=this._decompressWorker();return this._dataBinary||(x=x.pipe(new c.Utf8EncodeWorker)),f.createWorkerFrom(x,m,y)},_decompressWorker:function(){return this._data instanceof f?this._data.getContentWorker():this._data instanceof d?this._data:new u(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],g=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},p=0;p<h.length;p++)i.prototype[h[p]]=g;n.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,n,a){(function(i){var o,u,c=i.MutationObserver||i.WebKitMutationObserver;if(c){var f=0,d=new c(m),h=i.document.createTextNode("");d.observe(h,{characterData:!0}),o=function(){h.data=f=++f%2}}else if(i.setImmediate||i.MessageChannel===void 0)o="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var y=i.document.createElement("script");y.onreadystatechange=function(){m(),y.onreadystatechange=null,y.parentNode.removeChild(y),y=null},i.document.documentElement.appendChild(y)}:function(){setTimeout(m,0)};else{var g=new i.MessageChannel;g.port1.onmessage=m,o=function(){g.port2.postMessage(0)}}var p=[];function m(){var y,x;u=!0;for(var b=p.length;b;){for(x=p,p=[],y=-1;++y<b;)x[y]();b=p.length}u=!1}n.exports=function(y){p.push(y)!==1||u||o()}}).call(this,typeof zu<"u"?zu:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,n,a){var i=t("immediate");function o(){}var u={},c=["REJECTED"],f=["FULFILLED"],d=["PENDING"];function h(b){if(typeof b!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,b!==o&&y(this,b)}function g(b,_,E){this.promise=b,typeof _=="function"&&(this.onFulfilled=_,this.callFulfilled=this.otherCallFulfilled),typeof E=="function"&&(this.onRejected=E,this.callRejected=this.otherCallRejected)}function p(b,_,E){i(function(){var C;try{C=_(E)}catch(B){return u.reject(b,B)}C===b?u.reject(b,new TypeError("Cannot resolve promise with itself")):u.resolve(b,C)})}function m(b){var _=b&&b.then;if(b&&(typeof b=="object"||typeof b=="function")&&typeof _=="function")return function(){_.apply(b,arguments)}}function y(b,_){var E=!1;function C(A){E||(E=!0,u.reject(b,A))}function B(A){E||(E=!0,u.resolve(b,A))}var N=x(function(){_(B,C)});N.status==="error"&&C(N.value)}function x(b,_){var E={};try{E.value=b(_),E.status="success"}catch(C){E.status="error",E.value=C}return E}(n.exports=h).prototype.finally=function(b){if(typeof b!="function")return this;var _=this.constructor;return this.then(function(E){return _.resolve(b()).then(function(){return E})},function(E){return _.resolve(b()).then(function(){throw E})})},h.prototype.catch=function(b){return this.then(null,b)},h.prototype.then=function(b,_){if(typeof b!="function"&&this.state===f||typeof _!="function"&&this.state===c)return this;var E=new this.constructor(o);return this.state!==d?p(E,this.state===f?b:_,this.outcome):this.queue.push(new g(E,b,_)),E},g.prototype.callFulfilled=function(b){u.resolve(this.promise,b)},g.prototype.otherCallFulfilled=function(b){p(this.promise,this.onFulfilled,b)},g.prototype.callRejected=function(b){u.reject(this.promise,b)},g.prototype.otherCallRejected=function(b){p(this.promise,this.onRejected,b)},u.resolve=function(b,_){var E=x(m,_);if(E.status==="error")return u.reject(b,E.value);var C=E.value;if(C)y(b,C);else{b.state=f,b.outcome=_;for(var B=-1,N=b.queue.length;++B<N;)b.queue[B].callFulfilled(_)}return b},u.reject=function(b,_){b.state=c,b.outcome=_;for(var E=-1,C=b.queue.length;++E<C;)b.queue[E].callRejected(_);return b},h.resolve=function(b){return b instanceof this?b:u.resolve(new this(o),b)},h.reject=function(b){var _=new this(o);return u.reject(_,b)},h.all=function(b){var _=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=b.length,C=!1;if(!E)return this.resolve([]);for(var B=new Array(E),N=0,A=-1,z=new this(o);++A<E;)M(b[A],A);return z;function M(V,q){_.resolve(V).then(function(I){B[q]=I,++N!==E||C||(C=!0,u.resolve(z,B))},function(I){C||(C=!0,u.reject(z,I))})}},h.race=function(b){var _=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=b.length,C=!1;if(!E)return this.resolve([]);for(var B=-1,N=new this(o);++B<E;)A=b[B],_.resolve(A).then(function(z){C||(C=!0,u.resolve(N,z))},function(z){C||(C=!0,u.reject(N,z))});var A;return N}},{immediate:36}],38:[function(t,n,a){var i={};(0,t("./lib/utils/common").assign)(i,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),n.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,n,a){var i=t("./zlib/deflate"),o=t("./utils/common"),u=t("./utils/strings"),c=t("./zlib/messages"),f=t("./zlib/zstream"),d=Object.prototype.toString,h=0,g=-1,p=0,m=8;function y(b){if(!(this instanceof y))return new y(b);this.options=o.assign({level:g,method:m,chunkSize:16384,windowBits:15,memLevel:8,strategy:p,to:""},b||{});var _=this.options;_.raw&&0<_.windowBits?_.windowBits=-_.windowBits:_.gzip&&0<_.windowBits&&_.windowBits<16&&(_.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var E=i.deflateInit2(this.strm,_.level,_.method,_.windowBits,_.memLevel,_.strategy);if(E!==h)throw new Error(c[E]);if(_.header&&i.deflateSetHeader(this.strm,_.header),_.dictionary){var C;if(C=typeof _.dictionary=="string"?u.string2buf(_.dictionary):d.call(_.dictionary)==="[object ArrayBuffer]"?new Uint8Array(_.dictionary):_.dictionary,(E=i.deflateSetDictionary(this.strm,C))!==h)throw new Error(c[E]);this._dict_set=!0}}function x(b,_){var E=new y(_);if(E.push(b,!0),E.err)throw E.msg||c[E.err];return E.result}y.prototype.push=function(b,_){var E,C,B=this.strm,N=this.options.chunkSize;if(this.ended)return!1;C=_===~~_?_:_===!0?4:0,typeof b=="string"?B.input=u.string2buf(b):d.call(b)==="[object ArrayBuffer]"?B.input=new Uint8Array(b):B.input=b,B.next_in=0,B.avail_in=B.input.length;do{if(B.avail_out===0&&(B.output=new o.Buf8(N),B.next_out=0,B.avail_out=N),(E=i.deflate(B,C))!==1&&E!==h)return this.onEnd(E),!(this.ended=!0);B.avail_out!==0&&(B.avail_in!==0||C!==4&&C!==2)||(this.options.to==="string"?this.onData(u.buf2binstring(o.shrinkBuf(B.output,B.next_out))):this.onData(o.shrinkBuf(B.output,B.next_out)))}while((0<B.avail_in||B.avail_out===0)&&E!==1);return C===4?(E=i.deflateEnd(this.strm),this.onEnd(E),this.ended=!0,E===h):C!==2||(this.onEnd(h),!(B.avail_out=0))},y.prototype.onData=function(b){this.chunks.push(b)},y.prototype.onEnd=function(b){b===h&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg},a.Deflate=y,a.deflate=x,a.deflateRaw=function(b,_){return(_=_||{}).raw=!0,x(b,_)},a.gzip=function(b,_){return(_=_||{}).gzip=!0,x(b,_)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,n,a){var i=t("./zlib/inflate"),o=t("./utils/common"),u=t("./utils/strings"),c=t("./zlib/constants"),f=t("./zlib/messages"),d=t("./zlib/zstream"),h=t("./zlib/gzheader"),g=Object.prototype.toString;function p(y){if(!(this instanceof p))return new p(y);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},y||{});var x=this.options;x.raw&&0<=x.windowBits&&x.windowBits<16&&(x.windowBits=-x.windowBits,x.windowBits===0&&(x.windowBits=-15)),!(0<=x.windowBits&&x.windowBits<16)||y&&y.windowBits||(x.windowBits+=32),15<x.windowBits&&x.windowBits<48&&(15&x.windowBits)==0&&(x.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var b=i.inflateInit2(this.strm,x.windowBits);if(b!==c.Z_OK)throw new Error(f[b]);this.header=new h,i.inflateGetHeader(this.strm,this.header)}function m(y,x){var b=new p(x);if(b.push(y,!0),b.err)throw b.msg||f[b.err];return b.result}p.prototype.push=function(y,x){var b,_,E,C,B,N,A=this.strm,z=this.options.chunkSize,M=this.options.dictionary,V=!1;if(this.ended)return!1;_=x===~~x?x:x===!0?c.Z_FINISH:c.Z_NO_FLUSH,typeof y=="string"?A.input=u.binstring2buf(y):g.call(y)==="[object ArrayBuffer]"?A.input=new Uint8Array(y):A.input=y,A.next_in=0,A.avail_in=A.input.length;do{if(A.avail_out===0&&(A.output=new o.Buf8(z),A.next_out=0,A.avail_out=z),(b=i.inflate(A,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&M&&(N=typeof M=="string"?u.string2buf(M):g.call(M)==="[object ArrayBuffer]"?new Uint8Array(M):M,b=i.inflateSetDictionary(this.strm,N)),b===c.Z_BUF_ERROR&&V===!0&&(b=c.Z_OK,V=!1),b!==c.Z_STREAM_END&&b!==c.Z_OK)return this.onEnd(b),!(this.ended=!0);A.next_out&&(A.avail_out!==0&&b!==c.Z_STREAM_END&&(A.avail_in!==0||_!==c.Z_FINISH&&_!==c.Z_SYNC_FLUSH)||(this.options.to==="string"?(E=u.utf8border(A.output,A.next_out),C=A.next_out-E,B=u.buf2string(A.output,E),A.next_out=C,A.avail_out=z-C,C&&o.arraySet(A.output,A.output,E,C,0),this.onData(B)):this.onData(o.shrinkBuf(A.output,A.next_out)))),A.avail_in===0&&A.avail_out===0&&(V=!0)}while((0<A.avail_in||A.avail_out===0)&&b!==c.Z_STREAM_END);return b===c.Z_STREAM_END&&(_=c.Z_FINISH),_===c.Z_FINISH?(b=i.inflateEnd(this.strm),this.onEnd(b),this.ended=!0,b===c.Z_OK):_!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),!(A.avail_out=0))},p.prototype.onData=function(y){this.chunks.push(y)},p.prototype.onEnd=function(y){y===c.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=y,this.msg=this.strm.msg},a.Inflate=p,a.inflate=m,a.inflateRaw=function(y,x){return(x=x||{}).raw=!0,m(y,x)},a.ungzip=m},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,n,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";a.assign=function(c){for(var f=Array.prototype.slice.call(arguments,1);f.length;){var d=f.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var h in d)d.hasOwnProperty(h)&&(c[h]=d[h])}}return c},a.shrinkBuf=function(c,f){return c.length===f?c:c.subarray?c.subarray(0,f):(c.length=f,c)};var o={arraySet:function(c,f,d,h,g){if(f.subarray&&c.subarray)c.set(f.subarray(d,d+h),g);else for(var p=0;p<h;p++)c[g+p]=f[d+p]},flattenChunks:function(c){var f,d,h,g,p,m;for(f=h=0,d=c.length;f<d;f++)h+=c[f].length;for(m=new Uint8Array(h),f=g=0,d=c.length;f<d;f++)p=c[f],m.set(p,g),g+=p.length;return m}},u={arraySet:function(c,f,d,h,g){for(var p=0;p<h;p++)c[g+p]=f[d+p]},flattenChunks:function(c){return[].concat.apply([],c)}};a.setTyped=function(c){c?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,o)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,u))},a.setTyped(i)},{}],42:[function(t,n,a){var i=t("./common"),o=!0,u=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{u=!1}for(var c=new i.Buf8(256),f=0;f<256;f++)c[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;function d(h,g){if(g<65537&&(h.subarray&&u||!h.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(h,g));for(var p="",m=0;m<g;m++)p+=String.fromCharCode(h[m]);return p}c[254]=c[254]=1,a.string2buf=function(h){var g,p,m,y,x,b=h.length,_=0;for(y=0;y<b;y++)(64512&(p=h.charCodeAt(y)))==55296&&y+1<b&&(64512&(m=h.charCodeAt(y+1)))==56320&&(p=65536+(p-55296<<10)+(m-56320),y++),_+=p<128?1:p<2048?2:p<65536?3:4;for(g=new i.Buf8(_),y=x=0;x<_;y++)(64512&(p=h.charCodeAt(y)))==55296&&y+1<b&&(64512&(m=h.charCodeAt(y+1)))==56320&&(p=65536+(p-55296<<10)+(m-56320),y++),p<128?g[x++]=p:(p<2048?g[x++]=192|p>>>6:(p<65536?g[x++]=224|p>>>12:(g[x++]=240|p>>>18,g[x++]=128|p>>>12&63),g[x++]=128|p>>>6&63),g[x++]=128|63&p);return g},a.buf2binstring=function(h){return d(h,h.length)},a.binstring2buf=function(h){for(var g=new i.Buf8(h.length),p=0,m=g.length;p<m;p++)g[p]=h.charCodeAt(p);return g},a.buf2string=function(h,g){var p,m,y,x,b=g||h.length,_=new Array(2*b);for(p=m=0;p<b;)if((y=h[p++])<128)_[m++]=y;else if(4<(x=c[y]))_[m++]=65533,p+=x-1;else{for(y&=x===2?31:x===3?15:7;1<x&&p<b;)y=y<<6|63&h[p++],x--;1<x?_[m++]=65533:y<65536?_[m++]=y:(y-=65536,_[m++]=55296|y>>10&1023,_[m++]=56320|1023&y)}return d(_,m)},a.utf8border=function(h,g){var p;for((g=g||h.length)>h.length&&(g=h.length),p=g-1;0<=p&&(192&h[p])==128;)p--;return p<0||p===0?g:p+c[h[p]]>g?p:g}},{"./common":41}],43:[function(t,n,a){n.exports=function(i,o,u,c){for(var f=65535&i|0,d=i>>>16&65535|0,h=0;u!==0;){for(u-=h=2e3<u?2e3:u;d=d+(f=f+o[c++]|0)|0,--h;);f%=65521,d%=65521}return f|d<<16|0}},{}],44:[function(t,n,a){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,n,a){var i=(function(){for(var o,u=[],c=0;c<256;c++){o=c;for(var f=0;f<8;f++)o=1&o?3988292384^o>>>1:o>>>1;u[c]=o}return u})();n.exports=function(o,u,c,f){var d=i,h=f+c;o^=-1;for(var g=f;g<h;g++)o=o>>>8^d[255&(o^u[g])];return-1^o}},{}],46:[function(t,n,a){var i,o=t("../utils/common"),u=t("./trees"),c=t("./adler32"),f=t("./crc32"),d=t("./messages"),h=0,g=4,p=0,m=-2,y=-1,x=4,b=2,_=8,E=9,C=286,B=30,N=19,A=2*C+1,z=15,M=3,V=258,q=V+M+1,I=42,F=113,T=1,G=2,Q=3,W=4;function X(D,ve){return D.msg=d[ve],ve}function Z(D){return(D<<1)-(4<D?9:0)}function te(D){for(var ve=D.length;0<=--ve;)D[ve]=0}function L(D){var ve=D.state,pe=ve.pending;pe>D.avail_out&&(pe=D.avail_out),pe!==0&&(o.arraySet(D.output,ve.pending_buf,ve.pending_out,pe,D.next_out),D.next_out+=pe,ve.pending_out+=pe,D.total_out+=pe,D.avail_out-=pe,ve.pending-=pe,ve.pending===0&&(ve.pending_out=0))}function U(D,ve){u._tr_flush_block(D,0<=D.block_start?D.block_start:-1,D.strstart-D.block_start,ve),D.block_start=D.strstart,L(D.strm)}function oe(D,ve){D.pending_buf[D.pending++]=ve}function ie(D,ve){D.pending_buf[D.pending++]=ve>>>8&255,D.pending_buf[D.pending++]=255&ve}function ne(D,ve){var pe,Y,K=D.max_chain_length,ae=D.strstart,he=D.prev_length,me=D.nice_match,se=D.strstart>D.w_size-q?D.strstart-(D.w_size-q):0,Be=D.window,De=D.w_mask,Ae=D.prev,ze=D.strstart+V,$=Be[ae+he-1],k=Be[ae+he];D.prev_length>=D.good_match&&(K>>=2),me>D.lookahead&&(me=D.lookahead);do if(Be[(pe=ve)+he]===k&&Be[pe+he-1]===$&&Be[pe]===Be[ae]&&Be[++pe]===Be[ae+1]){ae+=2,pe++;do;while(Be[++ae]===Be[++pe]&&Be[++ae]===Be[++pe]&&Be[++ae]===Be[++pe]&&Be[++ae]===Be[++pe]&&Be[++ae]===Be[++pe]&&Be[++ae]===Be[++pe]&&Be[++ae]===Be[++pe]&&Be[++ae]===Be[++pe]&&ae<ze);if(Y=V-(ze-ae),ae=ze-V,he<Y){if(D.match_start=ve,me<=(he=Y))break;$=Be[ae+he-1],k=Be[ae+he]}}while((ve=Ae[ve&De])>se&&--K!=0);return he<=D.lookahead?he:D.lookahead}function we(D){var ve,pe,Y,K,ae,he,me,se,Be,De,Ae=D.w_size;do{if(K=D.window_size-D.lookahead-D.strstart,D.strstart>=Ae+(Ae-q)){for(o.arraySet(D.window,D.window,Ae,Ae,0),D.match_start-=Ae,D.strstart-=Ae,D.block_start-=Ae,ve=pe=D.hash_size;Y=D.head[--ve],D.head[ve]=Ae<=Y?Y-Ae:0,--pe;);for(ve=pe=Ae;Y=D.prev[--ve],D.prev[ve]=Ae<=Y?Y-Ae:0,--pe;);K+=Ae}if(D.strm.avail_in===0)break;if(he=D.strm,me=D.window,se=D.strstart+D.lookahead,Be=K,De=void 0,De=he.avail_in,Be<De&&(De=Be),pe=De===0?0:(he.avail_in-=De,o.arraySet(me,he.input,he.next_in,De,se),he.state.wrap===1?he.adler=c(he.adler,me,De,se):he.state.wrap===2&&(he.adler=f(he.adler,me,De,se)),he.next_in+=De,he.total_in+=De,De),D.lookahead+=pe,D.lookahead+D.insert>=M)for(ae=D.strstart-D.insert,D.ins_h=D.window[ae],D.ins_h=(D.ins_h<<D.hash_shift^D.window[ae+1])&D.hash_mask;D.insert&&(D.ins_h=(D.ins_h<<D.hash_shift^D.window[ae+M-1])&D.hash_mask,D.prev[ae&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=ae,ae++,D.insert--,!(D.lookahead+D.insert<M)););}while(D.lookahead<q&&D.strm.avail_in!==0)}function Pe(D,ve){for(var pe,Y;;){if(D.lookahead<q){if(we(D),D.lookahead<q&&ve===h)return T;if(D.lookahead===0)break}if(pe=0,D.lookahead>=M&&(D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+M-1])&D.hash_mask,pe=D.prev[D.strstart&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=D.strstart),pe!==0&&D.strstart-pe<=D.w_size-q&&(D.match_length=ne(D,pe)),D.match_length>=M)if(Y=u._tr_tally(D,D.strstart-D.match_start,D.match_length-M),D.lookahead-=D.match_length,D.match_length<=D.max_lazy_match&&D.lookahead>=M){for(D.match_length--;D.strstart++,D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+M-1])&D.hash_mask,pe=D.prev[D.strstart&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=D.strstart,--D.match_length!=0;);D.strstart++}else D.strstart+=D.match_length,D.match_length=0,D.ins_h=D.window[D.strstart],D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+1])&D.hash_mask;else Y=u._tr_tally(D,0,D.window[D.strstart]),D.lookahead--,D.strstart++;if(Y&&(U(D,!1),D.strm.avail_out===0))return T}return D.insert=D.strstart<M-1?D.strstart:M-1,ve===g?(U(D,!0),D.strm.avail_out===0?Q:W):D.last_lit&&(U(D,!1),D.strm.avail_out===0)?T:G}function Ce(D,ve){for(var pe,Y,K;;){if(D.lookahead<q){if(we(D),D.lookahead<q&&ve===h)return T;if(D.lookahead===0)break}if(pe=0,D.lookahead>=M&&(D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+M-1])&D.hash_mask,pe=D.prev[D.strstart&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=D.strstart),D.prev_length=D.match_length,D.prev_match=D.match_start,D.match_length=M-1,pe!==0&&D.prev_length<D.max_lazy_match&&D.strstart-pe<=D.w_size-q&&(D.match_length=ne(D,pe),D.match_length<=5&&(D.strategy===1||D.match_length===M&&4096<D.strstart-D.match_start)&&(D.match_length=M-1)),D.prev_length>=M&&D.match_length<=D.prev_length){for(K=D.strstart+D.lookahead-M,Y=u._tr_tally(D,D.strstart-1-D.prev_match,D.prev_length-M),D.lookahead-=D.prev_length-1,D.prev_length-=2;++D.strstart<=K&&(D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+M-1])&D.hash_mask,pe=D.prev[D.strstart&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=D.strstart),--D.prev_length!=0;);if(D.match_available=0,D.match_length=M-1,D.strstart++,Y&&(U(D,!1),D.strm.avail_out===0))return T}else if(D.match_available){if((Y=u._tr_tally(D,0,D.window[D.strstart-1]))&&U(D,!1),D.strstart++,D.lookahead--,D.strm.avail_out===0)return T}else D.match_available=1,D.strstart++,D.lookahead--}return D.match_available&&(Y=u._tr_tally(D,0,D.window[D.strstart-1]),D.match_available=0),D.insert=D.strstart<M-1?D.strstart:M-1,ve===g?(U(D,!0),D.strm.avail_out===0?Q:W):D.last_lit&&(U(D,!1),D.strm.avail_out===0)?T:G}function ge(D,ve,pe,Y,K){this.good_length=D,this.max_lazy=ve,this.nice_length=pe,this.max_chain=Y,this.func=K}function ce(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=_,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*A),this.dyn_dtree=new o.Buf16(2*(2*B+1)),this.bl_tree=new o.Buf16(2*(2*N+1)),te(this.dyn_ltree),te(this.dyn_dtree),te(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(z+1),this.heap=new o.Buf16(2*C+1),te(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*C+1),te(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function de(D){var ve;return D&&D.state?(D.total_in=D.total_out=0,D.data_type=b,(ve=D.state).pending=0,ve.pending_out=0,ve.wrap<0&&(ve.wrap=-ve.wrap),ve.status=ve.wrap?I:F,D.adler=ve.wrap===2?0:1,ve.last_flush=h,u._tr_init(ve),p):X(D,m)}function be(D){var ve=de(D);return ve===p&&(function(pe){pe.window_size=2*pe.w_size,te(pe.head),pe.max_lazy_match=i[pe.level].max_lazy,pe.good_match=i[pe.level].good_length,pe.nice_match=i[pe.level].nice_length,pe.max_chain_length=i[pe.level].max_chain,pe.strstart=0,pe.block_start=0,pe.lookahead=0,pe.insert=0,pe.match_length=pe.prev_length=M-1,pe.match_available=0,pe.ins_h=0})(D.state),ve}function Re(D,ve,pe,Y,K,ae){if(!D)return m;var he=1;if(ve===y&&(ve=6),Y<0?(he=0,Y=-Y):15<Y&&(he=2,Y-=16),K<1||E<K||pe!==_||Y<8||15<Y||ve<0||9<ve||ae<0||x<ae)return X(D,m);Y===8&&(Y=9);var me=new ce;return(D.state=me).strm=D,me.wrap=he,me.gzhead=null,me.w_bits=Y,me.w_size=1<<me.w_bits,me.w_mask=me.w_size-1,me.hash_bits=K+7,me.hash_size=1<<me.hash_bits,me.hash_mask=me.hash_size-1,me.hash_shift=~~((me.hash_bits+M-1)/M),me.window=new o.Buf8(2*me.w_size),me.head=new o.Buf16(me.hash_size),me.prev=new o.Buf16(me.w_size),me.lit_bufsize=1<<K+6,me.pending_buf_size=4*me.lit_bufsize,me.pending_buf=new o.Buf8(me.pending_buf_size),me.d_buf=1*me.lit_bufsize,me.l_buf=3*me.lit_bufsize,me.level=ve,me.strategy=ae,me.method=pe,be(D)}i=[new ge(0,0,0,0,function(D,ve){var pe=65535;for(pe>D.pending_buf_size-5&&(pe=D.pending_buf_size-5);;){if(D.lookahead<=1){if(we(D),D.lookahead===0&&ve===h)return T;if(D.lookahead===0)break}D.strstart+=D.lookahead,D.lookahead=0;var Y=D.block_start+pe;if((D.strstart===0||D.strstart>=Y)&&(D.lookahead=D.strstart-Y,D.strstart=Y,U(D,!1),D.strm.avail_out===0)||D.strstart-D.block_start>=D.w_size-q&&(U(D,!1),D.strm.avail_out===0))return T}return D.insert=0,ve===g?(U(D,!0),D.strm.avail_out===0?Q:W):(D.strstart>D.block_start&&(U(D,!1),D.strm.avail_out),T)}),new ge(4,4,8,4,Pe),new ge(4,5,16,8,Pe),new ge(4,6,32,32,Pe),new ge(4,4,16,16,Ce),new ge(8,16,32,32,Ce),new ge(8,16,128,128,Ce),new ge(8,32,128,256,Ce),new ge(32,128,258,1024,Ce),new ge(32,258,258,4096,Ce)],a.deflateInit=function(D,ve){return Re(D,ve,_,15,8,0)},a.deflateInit2=Re,a.deflateReset=be,a.deflateResetKeep=de,a.deflateSetHeader=function(D,ve){return D&&D.state?D.state.wrap!==2?m:(D.state.gzhead=ve,p):m},a.deflate=function(D,ve){var pe,Y,K,ae;if(!D||!D.state||5<ve||ve<0)return D?X(D,m):m;if(Y=D.state,!D.output||!D.input&&D.avail_in!==0||Y.status===666&&ve!==g)return X(D,D.avail_out===0?-5:m);if(Y.strm=D,pe=Y.last_flush,Y.last_flush=ve,Y.status===I)if(Y.wrap===2)D.adler=0,oe(Y,31),oe(Y,139),oe(Y,8),Y.gzhead?(oe(Y,(Y.gzhead.text?1:0)+(Y.gzhead.hcrc?2:0)+(Y.gzhead.extra?4:0)+(Y.gzhead.name?8:0)+(Y.gzhead.comment?16:0)),oe(Y,255&Y.gzhead.time),oe(Y,Y.gzhead.time>>8&255),oe(Y,Y.gzhead.time>>16&255),oe(Y,Y.gzhead.time>>24&255),oe(Y,Y.level===9?2:2<=Y.strategy||Y.level<2?4:0),oe(Y,255&Y.gzhead.os),Y.gzhead.extra&&Y.gzhead.extra.length&&(oe(Y,255&Y.gzhead.extra.length),oe(Y,Y.gzhead.extra.length>>8&255)),Y.gzhead.hcrc&&(D.adler=f(D.adler,Y.pending_buf,Y.pending,0)),Y.gzindex=0,Y.status=69):(oe(Y,0),oe(Y,0),oe(Y,0),oe(Y,0),oe(Y,0),oe(Y,Y.level===9?2:2<=Y.strategy||Y.level<2?4:0),oe(Y,3),Y.status=F);else{var he=_+(Y.w_bits-8<<4)<<8;he|=(2<=Y.strategy||Y.level<2?0:Y.level<6?1:Y.level===6?2:3)<<6,Y.strstart!==0&&(he|=32),he+=31-he%31,Y.status=F,ie(Y,he),Y.strstart!==0&&(ie(Y,D.adler>>>16),ie(Y,65535&D.adler)),D.adler=1}if(Y.status===69)if(Y.gzhead.extra){for(K=Y.pending;Y.gzindex<(65535&Y.gzhead.extra.length)&&(Y.pending!==Y.pending_buf_size||(Y.gzhead.hcrc&&Y.pending>K&&(D.adler=f(D.adler,Y.pending_buf,Y.pending-K,K)),L(D),K=Y.pending,Y.pending!==Y.pending_buf_size));)oe(Y,255&Y.gzhead.extra[Y.gzindex]),Y.gzindex++;Y.gzhead.hcrc&&Y.pending>K&&(D.adler=f(D.adler,Y.pending_buf,Y.pending-K,K)),Y.gzindex===Y.gzhead.extra.length&&(Y.gzindex=0,Y.status=73)}else Y.status=73;if(Y.status===73)if(Y.gzhead.name){K=Y.pending;do{if(Y.pending===Y.pending_buf_size&&(Y.gzhead.hcrc&&Y.pending>K&&(D.adler=f(D.adler,Y.pending_buf,Y.pending-K,K)),L(D),K=Y.pending,Y.pending===Y.pending_buf_size)){ae=1;break}ae=Y.gzindex<Y.gzhead.name.length?255&Y.gzhead.name.charCodeAt(Y.gzindex++):0,oe(Y,ae)}while(ae!==0);Y.gzhead.hcrc&&Y.pending>K&&(D.adler=f(D.adler,Y.pending_buf,Y.pending-K,K)),ae===0&&(Y.gzindex=0,Y.status=91)}else Y.status=91;if(Y.status===91)if(Y.gzhead.comment){K=Y.pending;do{if(Y.pending===Y.pending_buf_size&&(Y.gzhead.hcrc&&Y.pending>K&&(D.adler=f(D.adler,Y.pending_buf,Y.pending-K,K)),L(D),K=Y.pending,Y.pending===Y.pending_buf_size)){ae=1;break}ae=Y.gzindex<Y.gzhead.comment.length?255&Y.gzhead.comment.charCodeAt(Y.gzindex++):0,oe(Y,ae)}while(ae!==0);Y.gzhead.hcrc&&Y.pending>K&&(D.adler=f(D.adler,Y.pending_buf,Y.pending-K,K)),ae===0&&(Y.status=103)}else Y.status=103;if(Y.status===103&&(Y.gzhead.hcrc?(Y.pending+2>Y.pending_buf_size&&L(D),Y.pending+2<=Y.pending_buf_size&&(oe(Y,255&D.adler),oe(Y,D.adler>>8&255),D.adler=0,Y.status=F)):Y.status=F),Y.pending!==0){if(L(D),D.avail_out===0)return Y.last_flush=-1,p}else if(D.avail_in===0&&Z(ve)<=Z(pe)&&ve!==g)return X(D,-5);if(Y.status===666&&D.avail_in!==0)return X(D,-5);if(D.avail_in!==0||Y.lookahead!==0||ve!==h&&Y.status!==666){var me=Y.strategy===2?(function(se,Be){for(var De;;){if(se.lookahead===0&&(we(se),se.lookahead===0)){if(Be===h)return T;break}if(se.match_length=0,De=u._tr_tally(se,0,se.window[se.strstart]),se.lookahead--,se.strstart++,De&&(U(se,!1),se.strm.avail_out===0))return T}return se.insert=0,Be===g?(U(se,!0),se.strm.avail_out===0?Q:W):se.last_lit&&(U(se,!1),se.strm.avail_out===0)?T:G})(Y,ve):Y.strategy===3?(function(se,Be){for(var De,Ae,ze,$,k=se.window;;){if(se.lookahead<=V){if(we(se),se.lookahead<=V&&Be===h)return T;if(se.lookahead===0)break}if(se.match_length=0,se.lookahead>=M&&0<se.strstart&&(Ae=k[ze=se.strstart-1])===k[++ze]&&Ae===k[++ze]&&Ae===k[++ze]){$=se.strstart+V;do;while(Ae===k[++ze]&&Ae===k[++ze]&&Ae===k[++ze]&&Ae===k[++ze]&&Ae===k[++ze]&&Ae===k[++ze]&&Ae===k[++ze]&&Ae===k[++ze]&&ze<$);se.match_length=V-($-ze),se.match_length>se.lookahead&&(se.match_length=se.lookahead)}if(se.match_length>=M?(De=u._tr_tally(se,1,se.match_length-M),se.lookahead-=se.match_length,se.strstart+=se.match_length,se.match_length=0):(De=u._tr_tally(se,0,se.window[se.strstart]),se.lookahead--,se.strstart++),De&&(U(se,!1),se.strm.avail_out===0))return T}return se.insert=0,Be===g?(U(se,!0),se.strm.avail_out===0?Q:W):se.last_lit&&(U(se,!1),se.strm.avail_out===0)?T:G})(Y,ve):i[Y.level].func(Y,ve);if(me!==Q&&me!==W||(Y.status=666),me===T||me===Q)return D.avail_out===0&&(Y.last_flush=-1),p;if(me===G&&(ve===1?u._tr_align(Y):ve!==5&&(u._tr_stored_block(Y,0,0,!1),ve===3&&(te(Y.head),Y.lookahead===0&&(Y.strstart=0,Y.block_start=0,Y.insert=0))),L(D),D.avail_out===0))return Y.last_flush=-1,p}return ve!==g?p:Y.wrap<=0?1:(Y.wrap===2?(oe(Y,255&D.adler),oe(Y,D.adler>>8&255),oe(Y,D.adler>>16&255),oe(Y,D.adler>>24&255),oe(Y,255&D.total_in),oe(Y,D.total_in>>8&255),oe(Y,D.total_in>>16&255),oe(Y,D.total_in>>24&255)):(ie(Y,D.adler>>>16),ie(Y,65535&D.adler)),L(D),0<Y.wrap&&(Y.wrap=-Y.wrap),Y.pending!==0?p:1)},a.deflateEnd=function(D){var ve;return D&&D.state?(ve=D.state.status)!==I&&ve!==69&&ve!==73&&ve!==91&&ve!==103&&ve!==F&&ve!==666?X(D,m):(D.state=null,ve===F?X(D,-3):p):m},a.deflateSetDictionary=function(D,ve){var pe,Y,K,ae,he,me,se,Be,De=ve.length;if(!D||!D.state||(ae=(pe=D.state).wrap)===2||ae===1&&pe.status!==I||pe.lookahead)return m;for(ae===1&&(D.adler=c(D.adler,ve,De,0)),pe.wrap=0,De>=pe.w_size&&(ae===0&&(te(pe.head),pe.strstart=0,pe.block_start=0,pe.insert=0),Be=new o.Buf8(pe.w_size),o.arraySet(Be,ve,De-pe.w_size,pe.w_size,0),ve=Be,De=pe.w_size),he=D.avail_in,me=D.next_in,se=D.input,D.avail_in=De,D.next_in=0,D.input=ve,we(pe);pe.lookahead>=M;){for(Y=pe.strstart,K=pe.lookahead-(M-1);pe.ins_h=(pe.ins_h<<pe.hash_shift^pe.window[Y+M-1])&pe.hash_mask,pe.prev[Y&pe.w_mask]=pe.head[pe.ins_h],pe.head[pe.ins_h]=Y,Y++,--K;);pe.strstart=Y,pe.lookahead=M-1,we(pe)}return pe.strstart+=pe.lookahead,pe.block_start=pe.strstart,pe.insert=pe.lookahead,pe.lookahead=0,pe.match_length=pe.prev_length=M-1,pe.match_available=0,D.next_in=me,D.input=se,D.avail_in=he,pe.wrap=ae,p},a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,n,a){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,n,a){n.exports=function(i,o){var u,c,f,d,h,g,p,m,y,x,b,_,E,C,B,N,A,z,M,V,q,I,F,T,G;u=i.state,c=i.next_in,T=i.input,f=c+(i.avail_in-5),d=i.next_out,G=i.output,h=d-(o-i.avail_out),g=d+(i.avail_out-257),p=u.dmax,m=u.wsize,y=u.whave,x=u.wnext,b=u.window,_=u.hold,E=u.bits,C=u.lencode,B=u.distcode,N=(1<<u.lenbits)-1,A=(1<<u.distbits)-1;e:do{E<15&&(_+=T[c++]<<E,E+=8,_+=T[c++]<<E,E+=8),z=C[_&N];t:for(;;){if(_>>>=M=z>>>24,E-=M,(M=z>>>16&255)===0)G[d++]=65535&z;else{if(!(16&M)){if((64&M)==0){z=C[(65535&z)+(_&(1<<M)-1)];continue t}if(32&M){u.mode=12;break e}i.msg="invalid literal/length code",u.mode=30;break e}V=65535&z,(M&=15)&&(E<M&&(_+=T[c++]<<E,E+=8),V+=_&(1<<M)-1,_>>>=M,E-=M),E<15&&(_+=T[c++]<<E,E+=8,_+=T[c++]<<E,E+=8),z=B[_&A];r:for(;;){if(_>>>=M=z>>>24,E-=M,!(16&(M=z>>>16&255))){if((64&M)==0){z=B[(65535&z)+(_&(1<<M)-1)];continue r}i.msg="invalid distance code",u.mode=30;break e}if(q=65535&z,E<(M&=15)&&(_+=T[c++]<<E,(E+=8)<M&&(_+=T[c++]<<E,E+=8)),p<(q+=_&(1<<M)-1)){i.msg="invalid distance too far back",u.mode=30;break e}if(_>>>=M,E-=M,(M=d-h)<q){if(y<(M=q-M)&&u.sane){i.msg="invalid distance too far back",u.mode=30;break e}if(F=b,(I=0)===x){if(I+=m-M,M<V){for(V-=M;G[d++]=b[I++],--M;);I=d-q,F=G}}else if(x<M){if(I+=m+x-M,(M-=x)<V){for(V-=M;G[d++]=b[I++],--M;);if(I=0,x<V){for(V-=M=x;G[d++]=b[I++],--M;);I=d-q,F=G}}}else if(I+=x-M,M<V){for(V-=M;G[d++]=b[I++],--M;);I=d-q,F=G}for(;2<V;)G[d++]=F[I++],G[d++]=F[I++],G[d++]=F[I++],V-=3;V&&(G[d++]=F[I++],1<V&&(G[d++]=F[I++]))}else{for(I=d-q;G[d++]=G[I++],G[d++]=G[I++],G[d++]=G[I++],2<(V-=3););V&&(G[d++]=G[I++],1<V&&(G[d++]=G[I++]))}break}}break}}while(c<f&&d<g);c-=V=E>>3,_&=(1<<(E-=V<<3))-1,i.next_in=c,i.next_out=d,i.avail_in=c<f?f-c+5:5-(c-f),i.avail_out=d<g?g-d+257:257-(d-g),u.hold=_,u.bits=E}},{}],49:[function(t,n,a){var i=t("../utils/common"),o=t("./adler32"),u=t("./crc32"),c=t("./inffast"),f=t("./inftrees"),d=1,h=2,g=0,p=-2,m=1,y=852,x=592;function b(I){return(I>>>24&255)+(I>>>8&65280)+((65280&I)<<8)+((255&I)<<24)}function _(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function E(I){var F;return I&&I.state?(F=I.state,I.total_in=I.total_out=F.total=0,I.msg="",F.wrap&&(I.adler=1&F.wrap),F.mode=m,F.last=0,F.havedict=0,F.dmax=32768,F.head=null,F.hold=0,F.bits=0,F.lencode=F.lendyn=new i.Buf32(y),F.distcode=F.distdyn=new i.Buf32(x),F.sane=1,F.back=-1,g):p}function C(I){var F;return I&&I.state?((F=I.state).wsize=0,F.whave=0,F.wnext=0,E(I)):p}function B(I,F){var T,G;return I&&I.state?(G=I.state,F<0?(T=0,F=-F):(T=1+(F>>4),F<48&&(F&=15)),F&&(F<8||15<F)?p:(G.window!==null&&G.wbits!==F&&(G.window=null),G.wrap=T,G.wbits=F,C(I))):p}function N(I,F){var T,G;return I?(G=new _,(I.state=G).window=null,(T=B(I,F))!==g&&(I.state=null),T):p}var A,z,M=!0;function V(I){if(M){var F;for(A=new i.Buf32(512),z=new i.Buf32(32),F=0;F<144;)I.lens[F++]=8;for(;F<256;)I.lens[F++]=9;for(;F<280;)I.lens[F++]=7;for(;F<288;)I.lens[F++]=8;for(f(d,I.lens,0,288,A,0,I.work,{bits:9}),F=0;F<32;)I.lens[F++]=5;f(h,I.lens,0,32,z,0,I.work,{bits:5}),M=!1}I.lencode=A,I.lenbits=9,I.distcode=z,I.distbits=5}function q(I,F,T,G){var Q,W=I.state;return W.window===null&&(W.wsize=1<<W.wbits,W.wnext=0,W.whave=0,W.window=new i.Buf8(W.wsize)),G>=W.wsize?(i.arraySet(W.window,F,T-W.wsize,W.wsize,0),W.wnext=0,W.whave=W.wsize):(G<(Q=W.wsize-W.wnext)&&(Q=G),i.arraySet(W.window,F,T-G,Q,W.wnext),(G-=Q)?(i.arraySet(W.window,F,T-G,G,0),W.wnext=G,W.whave=W.wsize):(W.wnext+=Q,W.wnext===W.wsize&&(W.wnext=0),W.whave<W.wsize&&(W.whave+=Q))),0}a.inflateReset=C,a.inflateReset2=B,a.inflateResetKeep=E,a.inflateInit=function(I){return N(I,15)},a.inflateInit2=N,a.inflate=function(I,F){var T,G,Q,W,X,Z,te,L,U,oe,ie,ne,we,Pe,Ce,ge,ce,de,be,Re,D,ve,pe,Y,K=0,ae=new i.Buf8(4),he=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!I||!I.state||!I.output||!I.input&&I.avail_in!==0)return p;(T=I.state).mode===12&&(T.mode=13),X=I.next_out,Q=I.output,te=I.avail_out,W=I.next_in,G=I.input,Z=I.avail_in,L=T.hold,U=T.bits,oe=Z,ie=te,ve=g;e:for(;;)switch(T.mode){case m:if(T.wrap===0){T.mode=13;break}for(;U<16;){if(Z===0)break e;Z--,L+=G[W++]<<U,U+=8}if(2&T.wrap&&L===35615){ae[T.check=0]=255&L,ae[1]=L>>>8&255,T.check=u(T.check,ae,2,0),U=L=0,T.mode=2;break}if(T.flags=0,T.head&&(T.head.done=!1),!(1&T.wrap)||(((255&L)<<8)+(L>>8))%31){I.msg="incorrect header check",T.mode=30;break}if((15&L)!=8){I.msg="unknown compression method",T.mode=30;break}if(U-=4,D=8+(15&(L>>>=4)),T.wbits===0)T.wbits=D;else if(D>T.wbits){I.msg="invalid window size",T.mode=30;break}T.dmax=1<<D,I.adler=T.check=1,T.mode=512&L?10:12,U=L=0;break;case 2:for(;U<16;){if(Z===0)break e;Z--,L+=G[W++]<<U,U+=8}if(T.flags=L,(255&T.flags)!=8){I.msg="unknown compression method",T.mode=30;break}if(57344&T.flags){I.msg="unknown header flags set",T.mode=30;break}T.head&&(T.head.text=L>>8&1),512&T.flags&&(ae[0]=255&L,ae[1]=L>>>8&255,T.check=u(T.check,ae,2,0)),U=L=0,T.mode=3;case 3:for(;U<32;){if(Z===0)break e;Z--,L+=G[W++]<<U,U+=8}T.head&&(T.head.time=L),512&T.flags&&(ae[0]=255&L,ae[1]=L>>>8&255,ae[2]=L>>>16&255,ae[3]=L>>>24&255,T.check=u(T.check,ae,4,0)),U=L=0,T.mode=4;case 4:for(;U<16;){if(Z===0)break e;Z--,L+=G[W++]<<U,U+=8}T.head&&(T.head.xflags=255&L,T.head.os=L>>8),512&T.flags&&(ae[0]=255&L,ae[1]=L>>>8&255,T.check=u(T.check,ae,2,0)),U=L=0,T.mode=5;case 5:if(1024&T.flags){for(;U<16;){if(Z===0)break e;Z--,L+=G[W++]<<U,U+=8}T.length=L,T.head&&(T.head.extra_len=L),512&T.flags&&(ae[0]=255&L,ae[1]=L>>>8&255,T.check=u(T.check,ae,2,0)),U=L=0}else T.head&&(T.head.extra=null);T.mode=6;case 6:if(1024&T.flags&&(Z<(ne=T.length)&&(ne=Z),ne&&(T.head&&(D=T.head.extra_len-T.length,T.head.extra||(T.head.extra=new Array(T.head.extra_len)),i.arraySet(T.head.extra,G,W,ne,D)),512&T.flags&&(T.check=u(T.check,G,ne,W)),Z-=ne,W+=ne,T.length-=ne),T.length))break e;T.length=0,T.mode=7;case 7:if(2048&T.flags){if(Z===0)break e;for(ne=0;D=G[W+ne++],T.head&&D&&T.length<65536&&(T.head.name+=String.fromCharCode(D)),D&&ne<Z;);if(512&T.flags&&(T.check=u(T.check,G,ne,W)),Z-=ne,W+=ne,D)break e}else T.head&&(T.head.name=null);T.length=0,T.mode=8;case 8:if(4096&T.flags){if(Z===0)break e;for(ne=0;D=G[W+ne++],T.head&&D&&T.length<65536&&(T.head.comment+=String.fromCharCode(D)),D&&ne<Z;);if(512&T.flags&&(T.check=u(T.check,G,ne,W)),Z-=ne,W+=ne,D)break e}else T.head&&(T.head.comment=null);T.mode=9;case 9:if(512&T.flags){for(;U<16;){if(Z===0)break e;Z--,L+=G[W++]<<U,U+=8}if(L!==(65535&T.check)){I.msg="header crc mismatch",T.mode=30;break}U=L=0}T.head&&(T.head.hcrc=T.flags>>9&1,T.head.done=!0),I.adler=T.check=0,T.mode=12;break;case 10:for(;U<32;){if(Z===0)break e;Z--,L+=G[W++]<<U,U+=8}I.adler=T.check=b(L),U=L=0,T.mode=11;case 11:if(T.havedict===0)return I.next_out=X,I.avail_out=te,I.next_in=W,I.avail_in=Z,T.hold=L,T.bits=U,2;I.adler=T.check=1,T.mode=12;case 12:if(F===5||F===6)break e;case 13:if(T.last){L>>>=7&U,U-=7&U,T.mode=27;break}for(;U<3;){if(Z===0)break e;Z--,L+=G[W++]<<U,U+=8}switch(T.last=1&L,U-=1,3&(L>>>=1)){case 0:T.mode=14;break;case 1:if(V(T),T.mode=20,F!==6)break;L>>>=2,U-=2;break e;case 2:T.mode=17;break;case 3:I.msg="invalid block type",T.mode=30}L>>>=2,U-=2;break;case 14:for(L>>>=7&U,U-=7&U;U<32;){if(Z===0)break e;Z--,L+=G[W++]<<U,U+=8}if((65535&L)!=(L>>>16^65535)){I.msg="invalid stored block lengths",T.mode=30;break}if(T.length=65535&L,U=L=0,T.mode=15,F===6)break e;case 15:T.mode=16;case 16:if(ne=T.length){if(Z<ne&&(ne=Z),te<ne&&(ne=te),ne===0)break e;i.arraySet(Q,G,W,ne,X),Z-=ne,W+=ne,te-=ne,X+=ne,T.length-=ne;break}T.mode=12;break;case 17:for(;U<14;){if(Z===0)break e;Z--,L+=G[W++]<<U,U+=8}if(T.nlen=257+(31&L),L>>>=5,U-=5,T.ndist=1+(31&L),L>>>=5,U-=5,T.ncode=4+(15&L),L>>>=4,U-=4,286<T.nlen||30<T.ndist){I.msg="too many length or distance symbols",T.mode=30;break}T.have=0,T.mode=18;case 18:for(;T.have<T.ncode;){for(;U<3;){if(Z===0)break e;Z--,L+=G[W++]<<U,U+=8}T.lens[he[T.have++]]=7&L,L>>>=3,U-=3}for(;T.have<19;)T.lens[he[T.have++]]=0;if(T.lencode=T.lendyn,T.lenbits=7,pe={bits:T.lenbits},ve=f(0,T.lens,0,19,T.lencode,0,T.work,pe),T.lenbits=pe.bits,ve){I.msg="invalid code lengths set",T.mode=30;break}T.have=0,T.mode=19;case 19:for(;T.have<T.nlen+T.ndist;){for(;ge=(K=T.lencode[L&(1<<T.lenbits)-1])>>>16&255,ce=65535&K,!((Ce=K>>>24)<=U);){if(Z===0)break e;Z--,L+=G[W++]<<U,U+=8}if(ce<16)L>>>=Ce,U-=Ce,T.lens[T.have++]=ce;else{if(ce===16){for(Y=Ce+2;U<Y;){if(Z===0)break e;Z--,L+=G[W++]<<U,U+=8}if(L>>>=Ce,U-=Ce,T.have===0){I.msg="invalid bit length repeat",T.mode=30;break}D=T.lens[T.have-1],ne=3+(3&L),L>>>=2,U-=2}else if(ce===17){for(Y=Ce+3;U<Y;){if(Z===0)break e;Z--,L+=G[W++]<<U,U+=8}U-=Ce,D=0,ne=3+(7&(L>>>=Ce)),L>>>=3,U-=3}else{for(Y=Ce+7;U<Y;){if(Z===0)break e;Z--,L+=G[W++]<<U,U+=8}U-=Ce,D=0,ne=11+(127&(L>>>=Ce)),L>>>=7,U-=7}if(T.have+ne>T.nlen+T.ndist){I.msg="invalid bit length repeat",T.mode=30;break}for(;ne--;)T.lens[T.have++]=D}}if(T.mode===30)break;if(T.lens[256]===0){I.msg="invalid code -- missing end-of-block",T.mode=30;break}if(T.lenbits=9,pe={bits:T.lenbits},ve=f(d,T.lens,0,T.nlen,T.lencode,0,T.work,pe),T.lenbits=pe.bits,ve){I.msg="invalid literal/lengths set",T.mode=30;break}if(T.distbits=6,T.distcode=T.distdyn,pe={bits:T.distbits},ve=f(h,T.lens,T.nlen,T.ndist,T.distcode,0,T.work,pe),T.distbits=pe.bits,ve){I.msg="invalid distances set",T.mode=30;break}if(T.mode=20,F===6)break e;case 20:T.mode=21;case 21:if(6<=Z&&258<=te){I.next_out=X,I.avail_out=te,I.next_in=W,I.avail_in=Z,T.hold=L,T.bits=U,c(I,ie),X=I.next_out,Q=I.output,te=I.avail_out,W=I.next_in,G=I.input,Z=I.avail_in,L=T.hold,U=T.bits,T.mode===12&&(T.back=-1);break}for(T.back=0;ge=(K=T.lencode[L&(1<<T.lenbits)-1])>>>16&255,ce=65535&K,!((Ce=K>>>24)<=U);){if(Z===0)break e;Z--,L+=G[W++]<<U,U+=8}if(ge&&(240&ge)==0){for(de=Ce,be=ge,Re=ce;ge=(K=T.lencode[Re+((L&(1<<de+be)-1)>>de)])>>>16&255,ce=65535&K,!(de+(Ce=K>>>24)<=U);){if(Z===0)break e;Z--,L+=G[W++]<<U,U+=8}L>>>=de,U-=de,T.back+=de}if(L>>>=Ce,U-=Ce,T.back+=Ce,T.length=ce,ge===0){T.mode=26;break}if(32&ge){T.back=-1,T.mode=12;break}if(64&ge){I.msg="invalid literal/length code",T.mode=30;break}T.extra=15&ge,T.mode=22;case 22:if(T.extra){for(Y=T.extra;U<Y;){if(Z===0)break e;Z--,L+=G[W++]<<U,U+=8}T.length+=L&(1<<T.extra)-1,L>>>=T.extra,U-=T.extra,T.back+=T.extra}T.was=T.length,T.mode=23;case 23:for(;ge=(K=T.distcode[L&(1<<T.distbits)-1])>>>16&255,ce=65535&K,!((Ce=K>>>24)<=U);){if(Z===0)break e;Z--,L+=G[W++]<<U,U+=8}if((240&ge)==0){for(de=Ce,be=ge,Re=ce;ge=(K=T.distcode[Re+((L&(1<<de+be)-1)>>de)])>>>16&255,ce=65535&K,!(de+(Ce=K>>>24)<=U);){if(Z===0)break e;Z--,L+=G[W++]<<U,U+=8}L>>>=de,U-=de,T.back+=de}if(L>>>=Ce,U-=Ce,T.back+=Ce,64&ge){I.msg="invalid distance code",T.mode=30;break}T.offset=ce,T.extra=15&ge,T.mode=24;case 24:if(T.extra){for(Y=T.extra;U<Y;){if(Z===0)break e;Z--,L+=G[W++]<<U,U+=8}T.offset+=L&(1<<T.extra)-1,L>>>=T.extra,U-=T.extra,T.back+=T.extra}if(T.offset>T.dmax){I.msg="invalid distance too far back",T.mode=30;break}T.mode=25;case 25:if(te===0)break e;if(ne=ie-te,T.offset>ne){if((ne=T.offset-ne)>T.whave&&T.sane){I.msg="invalid distance too far back",T.mode=30;break}we=ne>T.wnext?(ne-=T.wnext,T.wsize-ne):T.wnext-ne,ne>T.length&&(ne=T.length),Pe=T.window}else Pe=Q,we=X-T.offset,ne=T.length;for(te<ne&&(ne=te),te-=ne,T.length-=ne;Q[X++]=Pe[we++],--ne;);T.length===0&&(T.mode=21);break;case 26:if(te===0)break e;Q[X++]=T.length,te--,T.mode=21;break;case 27:if(T.wrap){for(;U<32;){if(Z===0)break e;Z--,L|=G[W++]<<U,U+=8}if(ie-=te,I.total_out+=ie,T.total+=ie,ie&&(I.adler=T.check=T.flags?u(T.check,Q,ie,X-ie):o(T.check,Q,ie,X-ie)),ie=te,(T.flags?L:b(L))!==T.check){I.msg="incorrect data check",T.mode=30;break}U=L=0}T.mode=28;case 28:if(T.wrap&&T.flags){for(;U<32;){if(Z===0)break e;Z--,L+=G[W++]<<U,U+=8}if(L!==(4294967295&T.total)){I.msg="incorrect length check",T.mode=30;break}U=L=0}T.mode=29;case 29:ve=1;break e;case 30:ve=-3;break e;case 31:return-4;case 32:default:return p}return I.next_out=X,I.avail_out=te,I.next_in=W,I.avail_in=Z,T.hold=L,T.bits=U,(T.wsize||ie!==I.avail_out&&T.mode<30&&(T.mode<27||F!==4))&&q(I,I.output,I.next_out,ie-I.avail_out)?(T.mode=31,-4):(oe-=I.avail_in,ie-=I.avail_out,I.total_in+=oe,I.total_out+=ie,T.total+=ie,T.wrap&&ie&&(I.adler=T.check=T.flags?u(T.check,Q,ie,I.next_out-ie):o(T.check,Q,ie,I.next_out-ie)),I.data_type=T.bits+(T.last?64:0)+(T.mode===12?128:0)+(T.mode===20||T.mode===15?256:0),(oe==0&&ie===0||F===4)&&ve===g&&(ve=-5),ve)},a.inflateEnd=function(I){if(!I||!I.state)return p;var F=I.state;return F.window&&(F.window=null),I.state=null,g},a.inflateGetHeader=function(I,F){var T;return I&&I.state?(2&(T=I.state).wrap)==0?p:((T.head=F).done=!1,g):p},a.inflateSetDictionary=function(I,F){var T,G=F.length;return I&&I.state?(T=I.state).wrap!==0&&T.mode!==11?p:T.mode===11&&o(1,F,G,0)!==T.check?-3:q(I,F,G,G)?(T.mode=31,-4):(T.havedict=1,g):p},a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,n,a){var i=t("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],u=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(d,h,g,p,m,y,x,b){var _,E,C,B,N,A,z,M,V,q=b.bits,I=0,F=0,T=0,G=0,Q=0,W=0,X=0,Z=0,te=0,L=0,U=null,oe=0,ie=new i.Buf16(16),ne=new i.Buf16(16),we=null,Pe=0;for(I=0;I<=15;I++)ie[I]=0;for(F=0;F<p;F++)ie[h[g+F]]++;for(Q=q,G=15;1<=G&&ie[G]===0;G--);if(G<Q&&(Q=G),G===0)return m[y++]=20971520,m[y++]=20971520,b.bits=1,0;for(T=1;T<G&&ie[T]===0;T++);for(Q<T&&(Q=T),I=Z=1;I<=15;I++)if(Z<<=1,(Z-=ie[I])<0)return-1;if(0<Z&&(d===0||G!==1))return-1;for(ne[1]=0,I=1;I<15;I++)ne[I+1]=ne[I]+ie[I];for(F=0;F<p;F++)h[g+F]!==0&&(x[ne[h[g+F]]++]=F);if(A=d===0?(U=we=x,19):d===1?(U=o,oe-=257,we=u,Pe-=257,256):(U=c,we=f,-1),I=T,N=y,X=F=L=0,C=-1,B=(te=1<<(W=Q))-1,d===1&&852<te||d===2&&592<te)return 1;for(;;){for(z=I-X,V=x[F]<A?(M=0,x[F]):x[F]>A?(M=we[Pe+x[F]],U[oe+x[F]]):(M=96,0),_=1<<I-X,T=E=1<<W;m[N+(L>>X)+(E-=_)]=z<<24|M<<16|V|0,E!==0;);for(_=1<<I-1;L&_;)_>>=1;if(_!==0?(L&=_-1,L+=_):L=0,F++,--ie[I]==0){if(I===G)break;I=h[g+x[F]]}if(Q<I&&(L&B)!==C){for(X===0&&(X=Q),N+=T,Z=1<<(W=I-X);W+X<G&&!((Z-=ie[W+X])<=0);)W++,Z<<=1;if(te+=1<<W,d===1&&852<te||d===2&&592<te)return 1;m[C=L&B]=Q<<24|W<<16|N-y|0}}return L!==0&&(m[N+L]=I-X<<24|64<<16|0),b.bits=Q,0}},{"../utils/common":41}],51:[function(t,n,a){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,n,a){var i=t("../utils/common"),o=0,u=1;function c(K){for(var ae=K.length;0<=--ae;)K[ae]=0}var f=0,d=29,h=256,g=h+1+d,p=30,m=19,y=2*g+1,x=15,b=16,_=7,E=256,C=16,B=17,N=18,A=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],z=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],M=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],V=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],q=new Array(2*(g+2));c(q);var I=new Array(2*p);c(I);var F=new Array(512);c(F);var T=new Array(256);c(T);var G=new Array(d);c(G);var Q,W,X,Z=new Array(p);function te(K,ae,he,me,se){this.static_tree=K,this.extra_bits=ae,this.extra_base=he,this.elems=me,this.max_length=se,this.has_stree=K&&K.length}function L(K,ae){this.dyn_tree=K,this.max_code=0,this.stat_desc=ae}function U(K){return K<256?F[K]:F[256+(K>>>7)]}function oe(K,ae){K.pending_buf[K.pending++]=255&ae,K.pending_buf[K.pending++]=ae>>>8&255}function ie(K,ae,he){K.bi_valid>b-he?(K.bi_buf|=ae<<K.bi_valid&65535,oe(K,K.bi_buf),K.bi_buf=ae>>b-K.bi_valid,K.bi_valid+=he-b):(K.bi_buf|=ae<<K.bi_valid&65535,K.bi_valid+=he)}function ne(K,ae,he){ie(K,he[2*ae],he[2*ae+1])}function we(K,ae){for(var he=0;he|=1&K,K>>>=1,he<<=1,0<--ae;);return he>>>1}function Pe(K,ae,he){var me,se,Be=new Array(x+1),De=0;for(me=1;me<=x;me++)Be[me]=De=De+he[me-1]<<1;for(se=0;se<=ae;se++){var Ae=K[2*se+1];Ae!==0&&(K[2*se]=we(Be[Ae]++,Ae))}}function Ce(K){var ae;for(ae=0;ae<g;ae++)K.dyn_ltree[2*ae]=0;for(ae=0;ae<p;ae++)K.dyn_dtree[2*ae]=0;for(ae=0;ae<m;ae++)K.bl_tree[2*ae]=0;K.dyn_ltree[2*E]=1,K.opt_len=K.static_len=0,K.last_lit=K.matches=0}function ge(K){8<K.bi_valid?oe(K,K.bi_buf):0<K.bi_valid&&(K.pending_buf[K.pending++]=K.bi_buf),K.bi_buf=0,K.bi_valid=0}function ce(K,ae,he,me){var se=2*ae,Be=2*he;return K[se]<K[Be]||K[se]===K[Be]&&me[ae]<=me[he]}function de(K,ae,he){for(var me=K.heap[he],se=he<<1;se<=K.heap_len&&(se<K.heap_len&&ce(ae,K.heap[se+1],K.heap[se],K.depth)&&se++,!ce(ae,me,K.heap[se],K.depth));)K.heap[he]=K.heap[se],he=se,se<<=1;K.heap[he]=me}function be(K,ae,he){var me,se,Be,De,Ae=0;if(K.last_lit!==0)for(;me=K.pending_buf[K.d_buf+2*Ae]<<8|K.pending_buf[K.d_buf+2*Ae+1],se=K.pending_buf[K.l_buf+Ae],Ae++,me===0?ne(K,se,ae):(ne(K,(Be=T[se])+h+1,ae),(De=A[Be])!==0&&ie(K,se-=G[Be],De),ne(K,Be=U(--me),he),(De=z[Be])!==0&&ie(K,me-=Z[Be],De)),Ae<K.last_lit;);ne(K,E,ae)}function Re(K,ae){var he,me,se,Be=ae.dyn_tree,De=ae.stat_desc.static_tree,Ae=ae.stat_desc.has_stree,ze=ae.stat_desc.elems,$=-1;for(K.heap_len=0,K.heap_max=y,he=0;he<ze;he++)Be[2*he]!==0?(K.heap[++K.heap_len]=$=he,K.depth[he]=0):Be[2*he+1]=0;for(;K.heap_len<2;)Be[2*(se=K.heap[++K.heap_len]=$<2?++$:0)]=1,K.depth[se]=0,K.opt_len--,Ae&&(K.static_len-=De[2*se+1]);for(ae.max_code=$,he=K.heap_len>>1;1<=he;he--)de(K,Be,he);for(se=ze;he=K.heap[1],K.heap[1]=K.heap[K.heap_len--],de(K,Be,1),me=K.heap[1],K.heap[--K.heap_max]=he,K.heap[--K.heap_max]=me,Be[2*se]=Be[2*he]+Be[2*me],K.depth[se]=(K.depth[he]>=K.depth[me]?K.depth[he]:K.depth[me])+1,Be[2*he+1]=Be[2*me+1]=se,K.heap[1]=se++,de(K,Be,1),2<=K.heap_len;);K.heap[--K.heap_max]=K.heap[1],(function(k,R){var H,ee,J,O,le,_e,ye=R.dyn_tree,ke=R.max_code,Oe=R.stat_desc.static_tree,Ie=R.stat_desc.has_stree,We=R.stat_desc.extra_bits,$e=R.stat_desc.extra_base,Ge=R.stat_desc.max_length,nt=0;for(O=0;O<=x;O++)k.bl_count[O]=0;for(ye[2*k.heap[k.heap_max]+1]=0,H=k.heap_max+1;H<y;H++)Ge<(O=ye[2*ye[2*(ee=k.heap[H])+1]+1]+1)&&(O=Ge,nt++),ye[2*ee+1]=O,ke<ee||(k.bl_count[O]++,le=0,$e<=ee&&(le=We[ee-$e]),_e=ye[2*ee],k.opt_len+=_e*(O+le),Ie&&(k.static_len+=_e*(Oe[2*ee+1]+le)));if(nt!==0){do{for(O=Ge-1;k.bl_count[O]===0;)O--;k.bl_count[O]--,k.bl_count[O+1]+=2,k.bl_count[Ge]--,nt-=2}while(0<nt);for(O=Ge;O!==0;O--)for(ee=k.bl_count[O];ee!==0;)ke<(J=k.heap[--H])||(ye[2*J+1]!==O&&(k.opt_len+=(O-ye[2*J+1])*ye[2*J],ye[2*J+1]=O),ee--)}})(K,ae),Pe(Be,$,K.bl_count)}function D(K,ae,he){var me,se,Be=-1,De=ae[1],Ae=0,ze=7,$=4;for(De===0&&(ze=138,$=3),ae[2*(he+1)+1]=65535,me=0;me<=he;me++)se=De,De=ae[2*(me+1)+1],++Ae<ze&&se===De||(Ae<$?K.bl_tree[2*se]+=Ae:se!==0?(se!==Be&&K.bl_tree[2*se]++,K.bl_tree[2*C]++):Ae<=10?K.bl_tree[2*B]++:K.bl_tree[2*N]++,Be=se,$=(Ae=0)===De?(ze=138,3):se===De?(ze=6,3):(ze=7,4))}function ve(K,ae,he){var me,se,Be=-1,De=ae[1],Ae=0,ze=7,$=4;for(De===0&&(ze=138,$=3),me=0;me<=he;me++)if(se=De,De=ae[2*(me+1)+1],!(++Ae<ze&&se===De)){if(Ae<$)for(;ne(K,se,K.bl_tree),--Ae!=0;);else se!==0?(se!==Be&&(ne(K,se,K.bl_tree),Ae--),ne(K,C,K.bl_tree),ie(K,Ae-3,2)):Ae<=10?(ne(K,B,K.bl_tree),ie(K,Ae-3,3)):(ne(K,N,K.bl_tree),ie(K,Ae-11,7));Be=se,$=(Ae=0)===De?(ze=138,3):se===De?(ze=6,3):(ze=7,4)}}c(Z);var pe=!1;function Y(K,ae,he,me){ie(K,(f<<1)+(me?1:0),3),(function(se,Be,De,Ae){ge(se),oe(se,De),oe(se,~De),i.arraySet(se.pending_buf,se.window,Be,De,se.pending),se.pending+=De})(K,ae,he)}a._tr_init=function(K){pe||((function(){var ae,he,me,se,Be,De=new Array(x+1);for(se=me=0;se<d-1;se++)for(G[se]=me,ae=0;ae<1<<A[se];ae++)T[me++]=se;for(T[me-1]=se,se=Be=0;se<16;se++)for(Z[se]=Be,ae=0;ae<1<<z[se];ae++)F[Be++]=se;for(Be>>=7;se<p;se++)for(Z[se]=Be<<7,ae=0;ae<1<<z[se]-7;ae++)F[256+Be++]=se;for(he=0;he<=x;he++)De[he]=0;for(ae=0;ae<=143;)q[2*ae+1]=8,ae++,De[8]++;for(;ae<=255;)q[2*ae+1]=9,ae++,De[9]++;for(;ae<=279;)q[2*ae+1]=7,ae++,De[7]++;for(;ae<=287;)q[2*ae+1]=8,ae++,De[8]++;for(Pe(q,g+1,De),ae=0;ae<p;ae++)I[2*ae+1]=5,I[2*ae]=we(ae,5);Q=new te(q,A,h+1,g,x),W=new te(I,z,0,p,x),X=new te(new Array(0),M,0,m,_)})(),pe=!0),K.l_desc=new L(K.dyn_ltree,Q),K.d_desc=new L(K.dyn_dtree,W),K.bl_desc=new L(K.bl_tree,X),K.bi_buf=0,K.bi_valid=0,Ce(K)},a._tr_stored_block=Y,a._tr_flush_block=function(K,ae,he,me){var se,Be,De=0;0<K.level?(K.strm.data_type===2&&(K.strm.data_type=(function(Ae){var ze,$=4093624447;for(ze=0;ze<=31;ze++,$>>>=1)if(1&$&&Ae.dyn_ltree[2*ze]!==0)return o;if(Ae.dyn_ltree[18]!==0||Ae.dyn_ltree[20]!==0||Ae.dyn_ltree[26]!==0)return u;for(ze=32;ze<h;ze++)if(Ae.dyn_ltree[2*ze]!==0)return u;return o})(K)),Re(K,K.l_desc),Re(K,K.d_desc),De=(function(Ae){var ze;for(D(Ae,Ae.dyn_ltree,Ae.l_desc.max_code),D(Ae,Ae.dyn_dtree,Ae.d_desc.max_code),Re(Ae,Ae.bl_desc),ze=m-1;3<=ze&&Ae.bl_tree[2*V[ze]+1]===0;ze--);return Ae.opt_len+=3*(ze+1)+5+5+4,ze})(K),se=K.opt_len+3+7>>>3,(Be=K.static_len+3+7>>>3)<=se&&(se=Be)):se=Be=he+5,he+4<=se&&ae!==-1?Y(K,ae,he,me):K.strategy===4||Be===se?(ie(K,2+(me?1:0),3),be(K,q,I)):(ie(K,4+(me?1:0),3),(function(Ae,ze,$,k){var R;for(ie(Ae,ze-257,5),ie(Ae,$-1,5),ie(Ae,k-4,4),R=0;R<k;R++)ie(Ae,Ae.bl_tree[2*V[R]+1],3);ve(Ae,Ae.dyn_ltree,ze-1),ve(Ae,Ae.dyn_dtree,$-1)})(K,K.l_desc.max_code+1,K.d_desc.max_code+1,De+1),be(K,K.dyn_ltree,K.dyn_dtree)),Ce(K),me&&ge(K)},a._tr_tally=function(K,ae,he){return K.pending_buf[K.d_buf+2*K.last_lit]=ae>>>8&255,K.pending_buf[K.d_buf+2*K.last_lit+1]=255&ae,K.pending_buf[K.l_buf+K.last_lit]=255&he,K.last_lit++,ae===0?K.dyn_ltree[2*he]++:(K.matches++,ae--,K.dyn_ltree[2*(T[he]+h+1)]++,K.dyn_dtree[2*U(ae)]++),K.last_lit===K.lit_bufsize-1},a._tr_align=function(K){ie(K,2,3),ne(K,E,q),(function(ae){ae.bi_valid===16?(oe(ae,ae.bi_buf),ae.bi_buf=0,ae.bi_valid=0):8<=ae.bi_valid&&(ae.pending_buf[ae.pending++]=255&ae.bi_buf,ae.bi_buf>>=8,ae.bi_valid-=8)})(K)}},{"../utils/common":41}],53:[function(t,n,a){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,n,a){(function(i){(function(o,u){if(!o.setImmediate){var c,f,d,h,g=1,p={},m=!1,y=o.document,x=Object.getPrototypeOf&&Object.getPrototypeOf(o);x=x&&x.setTimeout?x:o,c={}.toString.call(o.process)==="[object process]"?function(C){process.nextTick(function(){_(C)})}:(function(){if(o.postMessage&&!o.importScripts){var C=!0,B=o.onmessage;return o.onmessage=function(){C=!1},o.postMessage("","*"),o.onmessage=B,C}})()?(h="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",E,!1):o.attachEvent("onmessage",E),function(C){o.postMessage(h+C,"*")}):o.MessageChannel?((d=new MessageChannel).port1.onmessage=function(C){_(C.data)},function(C){d.port2.postMessage(C)}):y&&"onreadystatechange"in y.createElement("script")?(f=y.documentElement,function(C){var B=y.createElement("script");B.onreadystatechange=function(){_(C),B.onreadystatechange=null,f.removeChild(B),B=null},f.appendChild(B)}):function(C){setTimeout(_,0,C)},x.setImmediate=function(C){typeof C!="function"&&(C=new Function(""+C));for(var B=new Array(arguments.length-1),N=0;N<B.length;N++)B[N]=arguments[N+1];var A={callback:C,args:B};return p[g]=A,c(g),g++},x.clearImmediate=b}function b(C){delete p[C]}function _(C){if(m)setTimeout(_,0,C);else{var B=p[C];if(B){m=!0;try{(function(N){var A=N.callback,z=N.args;switch(z.length){case 0:A();break;case 1:A(z[0]);break;case 2:A(z[0],z[1]);break;case 3:A(z[0],z[1],z[2]);break;default:A.apply(u,z)}})(B)}finally{b(C),m=!1}}}}function E(C){C.source===o&&typeof C.data=="string"&&C.data.indexOf(h)===0&&_(+C.data.slice(h.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof zu<"u"?zu:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Vf)),Vf.exports}var i2=a2();const s2=Bl(i2),rm=new Set(["png","jpg","jpeg","gif","webp","svg"]);async function o2(r){const e=[],t=[],n={};for(const a of r.files){const i=a.name,o=a.webkitRelativePath?a.webkitRelativePath:i,u=i.toLowerCase(),c=u.includes(".")?u.split(".").pop():"";if(c==="zip"){const f=await s2.loadAsync(await a.arrayBuffer()),d=Object.values(f.files);for(const h of d){if(h.dir)continue;const g=h.name,p=g.toLowerCase(),m=p.includes(".")?p.split(".").pop():"";if(m==="tex"){const y=await h.async("string");t.push({path:g,content:y})}else if(rm.has(m)){const y=await h.async("blob");n[g]=URL.createObjectURL(y)}}continue}if(c==="tex"){const f=await a.text();t.push({path:o,content:f});continue}if(rm.has(c)){n[o]=URL.createObjectURL(a);continue}e.push(`: ${o}`)}return t.length===0&&e.push(" .tex "),{latexFiles:t,assets:n,warnings:e}}function u2(r){return r.split(`
`).map(e=>{let t="",n=!1;for(let a=0;a<e.length;a++){const i=e[a];if(n){t+=i,n=!1;continue}if(i==="\\"){t+=i,n=!0;continue}if(i==="%")break;t+=i}return t}).join(`
`)}const l2=/^\\(section|subsection|subsubsection)\*?\{(.+?)\}\s*$/m;function c2(r,e={}){const t=e.maxChars??6e3,n=[],a=[...r].sort((i,o)=>i.path.localeCompare(o.path));for(const i of a){const u=u2(i.content).split(`
`);let c=[`${i.path}`],f=[],d=i.path;const h=()=>{const g=f.join(`
`).trim();if(!g)return;const p=f2(i.path,n.length);n.push({id:p,file:i.path,title:d,sectionPath:[...c],text:g}),f=[]};for(let g=0;g<u.length;g++){const p=u[g],m=p.match(l2);if(m){h();const y=m[1],x=d2(m[2]);c=h2(c,y,x,i.path),d=c.slice(-1)[0]??x,f.push(p);continue}f.push(p),f.join(`
`).length>t&&h()}h()}return v2(n,t)}function f2(r,e){return`chunk:${r}:${e}`}function d2(r){return r.replace(/\s+/g," ").trim()}function h2(r,e,t,n){const a=r.length?[r[0]]:[n],i=r.slice(1),o=e==="section"?1:e==="subsection"?2:3,u=i.slice(0,o-1);return u.push(t),[...a,...u]}function v2(r,e){const t=[];for(const n of r){if(n.text.length<=e){t.push(n);continue}const a=n.text.split(/\n\s*\n+/);let i="",o=0;for(const u of a){const c=(i?`${i}

${u}`:u).trim();c.length>e&&i?(t.push({...n,id:`${n.id}:p${o++}`,text:i.trim()}),i=u):i=c}i.trim()&&t.push({...n,id:`${n.id}:p${o++}`,text:i.trim()})}return t}const p2={theorem:"Theorem",lemma:"Lemma",corollary:"Corollary",definition:"Definition",example:"Example",exercise:"Exercise",axiom:"Axiom",proposition:"Proposition",conclusion:"Conclusion"};function g2(r){const{chunk:e,selectedEntities:t,selectedRelations:n,knownLabelToNodeId:a}=r,i=[],o=[],u=`sec:${e.sectionPath.join(" / ")}`;t.includes("Conclusion")&&i.push({id:u,type:"Conclusion",title:e.sectionPath.slice(1).join(" / ")||e.title,content:"",source:{file:e.file,sectionPath:e.sectionPath}});const c=m2(e,t,a);i.push(...c);const f=["Theorem","Lemma","Corollary","Definition","Axiom","Proposition","Conclusion","Formula"];let d=null;for(const h of c)f.includes(h.type)&&h.type!=="Example"&&h.type!=="Exercise"&&(d=h),(h.type==="Example"||h.type==="Exercise")&&d&&(h.type==="Exercise"&&n.includes("AppliesTo")?o.push({type:"AppliesTo",source:h.id,target:d.id,meta:{chunkId:e.id}}):n.includes("AssistsIn")&&o.push({type:"AssistsIn",source:h.id,target:d.id,meta:{chunkId:e.id}}));if(t.includes("Formula")){const h=y2(e,a);i.push(...h)}if(n.includes("Contains"))for(const h of i)h.id!==u&&u.startsWith("sec:")&&i.find(g=>g.id===u)&&o.push({type:"Contains",source:u,target:h.id,meta:{chunkId:e.id}});if(n.includes("DependsOn")){const h=x2(e.text),g=i.filter(p=>p.id!==u);for(const p of g)for(const m of h){const y=a.get(m);y&&y!==p.id&&o.push({type:"DependsOn",source:p.id,target:y,evidence:`reference: ${m}`,meta:{chunkId:e.id}})}}if(n.includes("DerivedFrom")){const h=/derived\s+from\s+(\\ref\{([^}]+)\})/gi,g=[...e.text.matchAll(h)];if(g.length){const p=i.filter(m=>m.id!==u);for(const m of p)for(const y of g){const x=y[2],b=a.get(x);b&&b!==m.id&&o.push({type:"DerivedFrom",source:m.id,target:b,evidence:y[0],meta:{chunkId:e.id}})}}}return{nodes:b2(i),edges:_2(o)}}function m2(r,e,t){const n=[],a=/\\begin\{(theorem|lemma|corollary|definition|example|exercise|axiom|proposition|conclusion)\}([\s\S]*?)\\end\{\1\}/gi;let i=0;for(const o of r.text.matchAll(a)){const u=(o[1]??"").toLowerCase(),c=p2[u];if(!c||!e.includes(c))continue;const f=(o[2]??"").trim(),d=G0(f),h=w2(o[0])??`${c} ${i+1}`,g=d?`tex:${d}`:`${r.id}:${u}:${i}`;i++;const p={id:g,type:c,title:h,content:f,source:{file:r.file,latexLabel:d??void 0,sectionPath:r.sectionPath}};n.push(p),d&&t.set(d,g)}return n}function y2(r,e){const t=[],n=[/\\begin\{equation\}([\s\S]*?)\\end\{equation\}/gi,/\\begin\{align\}([\s\S]*?)\\end\{align\}/gi,/\$\$([\s\S]*?)\$\$/g,/\\\[([\s\S]*?)\\\]/g];let a=0;for(const i of n)for(const o of r.text.matchAll(i)){const u=(o[1]??"").trim();if(!u)continue;const c=G0(u),f=c?`tex:${c}`:`${r.id}:formula:${a++}`,d=c?`Formula (${c})`:`Formula ${a}`;t.push({id:f,type:"Formula",title:d,content:u,source:{file:r.file,latexLabel:c??void 0,sectionPath:r.sectionPath}}),c&&e.set(c,f)}return t}function G0(r){const e=r.match(/\\label\{([^}]+)\}/);return e?e[1].trim():null}function w2(r){const e=r.match(/\\begin\{[a-zA-Z*]+\}\s*\[([^\]]+)\]/);return e?e[1].trim():null}function x2(r){const e=new Set;for(const t of r.matchAll(/\\(eqref|ref|autoref|cref)\{([^}]+)\}/g))e.add(t[2].trim());return[...e.values()]}function b2(r){const e=new Map;for(const t of r){const n=e.get(t.id);e.set(t.id,n?{...n,...t,meta:{...n.meta,...t.meta}}:t)}return[...e.values()]}function _2(r){const e=n=>{var a;return`${n.source}::${n.type}::${n.target}::${String(((a=n.meta)==null?void 0:a.chunkId)??"")}`},t=new Map;for(const n of r)t.set(e(n),n);return[...t.values()]}function E2(r){const{chunk:e,selectedEntities:t,selectedRelations:n,graphSummary:a,userNotes:i}=r;return`
LaTeX  LaTeX  JSON markdown

## 
${t.map(o=>`- ${o}`).join(`
`)}

## 
${n.map(o=>`- ${o}`).join(`
`)}

## 
- /////////label
- 
-  \\label / \\ref / \\eqref 

## 
- **** LaTeX 
- **Formula ** equation/align/\\[ \\]/$$ $$  Formula
- title /label/

## 
${a}

${i!=null&&i.trim()?`## 
${i.trim()}
`:""}

## 
- chunk_id: ${e.id}
- file: ${e.file}
- section_path: ${e.sectionPath.join(" / ")}
- title: ${e.title}

## LaTeX 
${e.text}

##  JSON 
 nodes  edges
{
  "nodes": [
    {
      "id": "string ( tex:<label> label  chunk:<chunkId>:<type>:<idx>)",
      "type": "EntityType",
      "title": "//",
      "content": " LaTeX Formula  math delimiter",
      "source": { "file": "string", "latexLabel": "string|null", "sectionPath": ["..."] },
      "meta": { "chunkId": "string", "confidence": 0.0 }
    }
  ],
  "edges": [
    {
      "type": "RelationType",
      "source": "node.id",
      "target": "node.id",
      "evidence": "",
      "meta": { "chunkId": "string", "confidence": 0.0 }
    }
  ]
}


-  JSON markdown
- nodes[].type edges[].type 
- edges  source/target  nodes  id id id  title/content/source
`.trim()}function S2(r,e=120){const t=r.nodes.slice(0,e),n=t.map(i=>{var u;const o=typeof((u=i.source)==null?void 0:u.latexLabel)=="string"?` label=${i.source.latexLabel}`:"";return`- ${i.id} | ${i.type} | ${k2(i.title,80)}${o}`}),a=r.edges.slice(0,80).map(i=>`- (${i.type}) ${i.source} -> ${i.target}`);return[`nodes(${r.nodes.length}) showing ${t.length}:`,...n,"",`edges(${r.edges.length}) showing ${a.length}:`,...a].join(`
`).trim()}function k2(r,e){return r.length<=e?r:r.slice(0,e-1)+""}async function C2(r){try{const e=await fetch(`${r.baseUrl.replace(/\/$/,"")}/models`,{method:"GET",headers:{Authorization:`Bearer ${r.apiKey}`},signal:r.signal});return e.ok?{ok:!0,message:" models "}:{ok:!1,message:`HTTP ${e.status}`,detail:await H0(e)}}catch(e){return{ok:!1,message:" CORS / Key / ",detail:String((e==null?void 0:e.message)??e)}}}async function T2(r){const e=`${r.baseUrl.replace(/\/$/,"")}/responses`,t={model:r.model,input:r.prompt,temperature:r.temperature,top_p:r.topP,max_output_tokens:r.maxTokens,response_format:{type:"json_object"}},n=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r.apiKey}`},body:JSON.stringify(t),signal:r.signal});if(!n.ok)throw new Error(`OpenAI HTTP ${n.status}: ${await H0(n)}`);const a=await n.json(),i=P2(a);return{...JSON.parse(i),rawText:i}}function P2(r){var t,n,a,i;if(typeof(r==null?void 0:r.output_text)=="string")return r.output_text;const e=(i=(a=(n=(t=r==null?void 0:r.output)==null?void 0:t[0])==null?void 0:n.content)==null?void 0:a[0])==null?void 0:i.text;return typeof e=="string"?e:JSON.stringify(r)}async function H0(r){try{return await r.text()}catch{return""}}async function R2(r){try{const e=await fetch(`${r.baseUrl.replace(/\/$/,"")}/v1/models`,{method:"GET",headers:{"x-api-key":r.apiKey,"anthropic-version":"2023-06-01"},signal:r.signal});return e.ok?{ok:!0,message:" models "}:{ok:!1,message:`HTTP ${e.status}`,detail:await K0(e)}}catch(e){return{ok:!1,message:" CORS / Key / ",detail:String((e==null?void 0:e.message)??e)}}}async function B2(r){const e=`${r.baseUrl.replace(/\/$/,"")}/v1/messages`,t={model:r.model,max_tokens:r.maxTokens,temperature:r.temperature,top_p:r.topP,messages:[{role:"user",content:r.prompt}]},n=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":r.apiKey,"anthropic-version":"2023-06-01"},body:JSON.stringify(t),signal:r.signal});if(!n.ok)throw new Error(`Anthropic HTTP ${n.status}: ${await K0(n)}`);const a=await n.json(),i=A2(a);return{...JSON.parse(i),rawText:i}}function A2(r){var t;const e=r==null?void 0:r.content;if(Array.isArray(e)){const n=(t=e.find(a=>(a==null?void 0:a.type)==="text"))==null?void 0:t.text;if(typeof n=="string")return n}return typeof(r==null?void 0:r.text)=="string"?r.text:JSON.stringify(r)}async function K0(r){try{return await r.text()}catch{return""}}async function D2(r){try{const e=`${r.baseUrl.replace(/\/$/,"")}/v1beta/models?key=${encodeURIComponent(r.apiKey)}`,t=await fetch(e,{method:"GET",signal:r.signal});return t.ok?{ok:!0,message:" models "}:{ok:!1,message:`HTTP ${t.status}`,detail:await X0(t)}}catch(e){return{ok:!1,message:" CORS / Key / ",detail:String((e==null?void 0:e.message)??e)}}}async function I2(r){const e=r.model.startsWith("models/")?r.model:`models/${r.model}`,t=`${r.baseUrl.replace(/\/$/,"")}/v1beta/${e}:generateContent?key=${encodeURIComponent(r.apiKey)}`,n={contents:[{role:"user",parts:[{text:r.prompt}]}],generationConfig:{temperature:r.temperature,topP:r.topP,maxOutputTokens:r.maxTokens,responseMimeType:"application/json"}},a=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n),signal:r.signal});if(!a.ok)throw new Error(`Gemini HTTP ${a.status}: ${await X0(a)}`);const i=await a.json(),o=L2(i);return{...JSON.parse(o),rawText:o}}function L2(r){var t,n,a,i,o;const e=(o=(i=(a=(n=(t=r==null?void 0:r.candidates)==null?void 0:t[0])==null?void 0:n.content)==null?void 0:a.parts)==null?void 0:i[0])==null?void 0:o.text;return typeof e=="string"?e:JSON.stringify(r)}async function X0(r){try{return await r.text()}catch{return""}}async function N2(r){const e=S2(r.graph,160),t=E2({chunk:r.chunk,selectedEntities:r.selectedEntities,selectedRelations:r.selectedRelations,graphSummary:e,userNotes:r.userNotes}),n={baseUrl:r.baseUrl,apiKey:r.apiKey,model:r.model,prompt:t,temperature:r.temperature,topP:r.topP,maxTokens:r.maxTokens,signal:r.signal},a=r.protocol==="openai"?await T2(n):r.protocol==="anthropic"?await B2(n):await I2(n),i=O2(a),{filtered:o,warnings:u}=M2(i,r.chunk.text);return{...o,warnings:u}}function O2(r){const e=Array.isArray(r==null?void 0:r.nodes)?r.nodes:[],t=Array.isArray(r==null?void 0:r.edges)?r.edges:[];return{nodes:e.filter(n=>n&&typeof n.id=="string"&&typeof n.type=="string"&&typeof n.title=="string").map(n=>({id:n.id,type:n.type,title:n.title,content:typeof n.content=="string"?n.content:void 0,source:typeof n.source=="object"?n.source:void 0,meta:typeof n.meta=="object"?n.meta:void 0})),edges:t.filter(n=>n&&typeof n.type=="string"&&typeof n.source=="string"&&typeof n.target=="string"&&n.source!==n.target).map(n=>({type:n.type,source:n.source,target:n.target,evidence:typeof n.evidence=="string"?n.evidence:void 0,meta:typeof n.meta=="object"?n.meta:void 0}))}}function M2(r,e){var c;const t=[],n=[],a=new Set;for(const f of r.nodes){if(f.type==="Formula"){const d=(f.content??"").trim(),h=(f.title??"").trim(),g=z2(d)||typeof((c=f.source)==null?void 0:c.latexLabel)=="string"&&f.source.latexLabel.length>0,p=h.length>=8&&/[\u4e00-\u9fff]/.test(h)&&!/(\(|\)|\\|=|\$|_|\^)/.test(h),m=h&&e.includes(h);if(!g||p&&!m){a.add(f.id),t.push(` Formula: ${f.title} (${f.id})`);continue}}n.push(f)}const i=new Set(n.map(f=>f.id)),o=r.edges.filter(f=>i.has(f.source)&&i.has(f.target)),u=r.edges.length-o.length;return u>0&&t.push(` ${u} /`),{filtered:{nodes:n,edges:o},warnings:t}}function z2(r){return r?!!(/\\begin\{(equation|align|aligned|gather|multline)\}/.test(r)||/\$\$[\s\S]*\$\$/.test(r)||/\\\[[\s\S]*\\\]/.test(r)||/\\(frac|sum|int|prod|mathbb|mathbf|mathrm|left|right|cdot|leq|geq|neq|infty)\b/.test(r)||/[=<>]/.test(r)&&/[a-zA-Z\\]/.test(r)||/[0-9]/.test(r)&&/[_^]/.test(r)):!1}async function F2(r){var a,i,o;const e=tt.getState();e.setError(null),e.setInfo(null),e.setProcessing({status:"extracting",totalChunks:r.chunks.length,doneChunks:0});const t=new AbortController;e.setProcessing({abortController:t});const n=new Map;for(const u of e.graph.nodes){const c=typeof((a=u.source)==null?void 0:a.latexLabel)=="string"?u.source.latexLabel:null;c&&n.set(c,u.id)}try{if(!(r.llm.enabled&&r.llm.apiKey.trim().length>0)){for(let x=0;x<r.chunks.length;x++){if(t.signal.aborted){tt.getState().setProcessing({status:"stopped",abortController:void 0});return}const b=r.chunks[x];e.setProcessing({currentChunkTitle:b.title});const _=g2({chunk:b,selectedEntities:r.schema.entityTypes,selectedRelations:r.schema.relationTypes,knownLabelToNodeId:n});for(const E of _.nodes){const C=typeof((i=E==null?void 0:E.source)==null?void 0:i.latexLabel)=="string"?E.source.latexLabel:null;C&&n.set(C,E.id)}e.mergeGraph({nodes:_.nodes,edges:_.edges}),e.setProcessing({doneChunks:x+1})}e.setProcessing({status:"done",abortController:void 0}),e.setInfo("");return}const c=Math.max(1,Math.min(32,Math.floor(r.llm.parallelism||1))),f=new Map;let d=0,h=0,g=0;const p=[],m=async x=>{const b=r.chunks[x],_=tt.getState().graph;return await N2({protocol:r.llm.protocol,baseUrl:r.llm.baseUrl,apiKey:r.llm.apiKey,model:r.llm.model,temperature:r.llm.temperature,topP:r.llm.topP,maxTokens:r.llm.maxTokens,chunk:b,selectedEntities:r.schema.entityTypes,selectedRelations:r.schema.relationTypes,graph:_,userNotes:r.schema.notes??"",signal:t.signal})},y=async()=>{for(;!t.signal.aborted&&d<r.chunks.length&&g<c;){const x=d++;g++,e.setProcessing({currentChunkTitle:r.chunks[x].title}),m(x).then(b=>{f.set(x,b)}).catch(b=>{f.set(x,{nodes:[],edges:[],warnings:[`chunk ${x} : ${String((b==null?void 0:b.message)??b)}`]})}).finally(()=>{g--})}};for(;!t.signal.aborted&&h<r.chunks.length;){await y();const x=f.get(h);if(!x){await U2(60);continue}f.delete(h);for(const b of x.nodes??[]){const _=typeof((o=b==null?void 0:b.source)==null?void 0:o.latexLabel)=="string"?b.source.latexLabel:null;_&&typeof(b==null?void 0:b.id)=="string"&&n.set(_,b.id)}Array.isArray(x.warnings)&&p.push(...x.warnings),e.mergeGraph({nodes:x.nodes,edges:x.edges}),h++,e.setProcessing({doneChunks:h})}if(t.signal.aborted){e.setProcessing({status:"stopped",abortController:void 0});return}e.setProcessing({status:"done",abortController:void 0}),e.setInfo(p.length?`LLM/${p.slice(0,2).join("")}${p.length>2?` ${p.length} `:""}`:"LLM")}catch(u){if(t.signal.aborted){e.setProcessing({status:"stopped",abortController:void 0});return}e.setProcessing({status:"error",abortController:void 0}),e.setError(String((u==null?void 0:u.message)??u))}}function U2(r){return new Promise(e=>setTimeout(e,r))}function $2(){const r=tt(d=>d.latexFiles),e=tt(d=>d.processing);tt(d=>d.schema),tt(d=>d.llm);const[t,n]=Ut.useState([]),[a,i]=Ut.useState(6e3),o=e.status!=="idle"&&e.status!=="done"&&e.status!=="stopped"&&e.status!=="error",u=Ut.useMemo(()=>` .tex: ${r.length}`,[r.length]);async function c(d){if(!d)return;tt.getState().setError(null),tt.getState().setInfo(null);const h=Array.from(d),{latexFiles:g,assets:p,warnings:m}=await o2({files:h});n(m),tt.getState().setLatexFiles(g),tt.getState().setAssets(p),tt.getState().setInfo(` ${g.length}  .tex  ${Object.keys(p).length} `)}async function f(){const d=tt.getState();if(!d.latexFiles.length){d.setError(" .tex  zip/");return}d.setProcessing({status:"chunking",totalChunks:0,doneChunks:0});const h=c2(d.latexFiles,{maxChars:a});d.setInfo(`${h.length} maxChars=${a}`),await F2({chunks:h,schema:d.schema,llm:d.llm})}return Se.jsxs("div",{className:"card",children:[Se.jsx("div",{className:"h1",children:" LaTeX / zip / "}),Se.jsx("div",{className:"muted",children:" 1 zip .tex   2  3"}),Se.jsx("div",{className:"label",children:"zip / "}),Se.jsx("input",{className:"input",type:"file",multiple:!0,onChange:d=>c(d.target.files),disabled:o}),Se.jsx("div",{className:"label",children:""}),Se.jsx("input",{className:"input",type:"file",multiple:!0,webkitdirectory:"true",directory:"true",onChange:d=>c(d.target.files),disabled:o}),Se.jsx("div",{className:"label",children:""}),Se.jsx("input",{className:"input mono",type:"number",min:1500,step:500,value:a,onChange:d=>i(Number(d.target.value)),disabled:o}),Se.jsx("div",{className:"muted",style:{marginTop:8},children:u}),t.length?Se.jsxs("div",{className:"muted",style:{marginTop:8},children:[Se.jsx("b",{children:""}),"",Se.jsxs("ul",{style:{margin:"6px 0 0 18px"},children:[t.slice(0,6).map((d,h)=>Se.jsx("li",{children:d},h)),t.length>6?Se.jsxs("li",{children:["...  ",t.length-6," "]}):null]})]}):null,Se.jsxs("div",{className:"row",style:{marginTop:12},children:[Se.jsx("button",{className:"btn primary",onClick:f,disabled:o,children:""}),Se.jsx("button",{className:"btn danger",onClick:()=>tt.getState().stopProcessing(),disabled:e.status==="idle",children:""})]}),Se.jsxs("div",{className:"muted",style:{marginTop:8},children:["",Se.jsx("span",{className:"mono",children:e.currentChunkTitle??"-"})]})]})}function V2(){const r=tt(h=>h.schema),e=tt(h=>h.llm),t=tt(h=>h.processing),[n,a]=Ut.useState(!1),[i,o]=Ut.useState(null),u=t.status!=="idle"&&t.status!=="done"&&t.status!=="stopped"&&t.status!=="error",c=Ut.useMemo(()=>new Set(r.entityTypes),[r.entityTypes]),f=Ut.useMemo(()=>new Set(r.relationTypes),[r.relationTypes]);async function d(){a(!0),o(null);const h=new AbortController;try{const g=e.baseUrl.trim(),p=e.apiKey.trim();if(!g||!p){o(" Base URL  API Key");return}const m=e.protocol==="openai"?await C2({baseUrl:g,apiKey:p,model:e.model,signal:h.signal}):e.protocol==="anthropic"?await R2({baseUrl:g,apiKey:p,model:e.model,signal:h.signal}):await D2({baseUrl:g,apiKey:p,model:e.model,signal:h.signal});o(m.ok?`OK: ${m.message}`:`FAIL: ${m.message}${m.detail?`
${m.detail}`:""}`)}finally{a(!1)}}return Se.jsxs("div",{className:"card",children:[Se.jsx("div",{className:"h1",children:"/ + LLM "}),Se.jsxs("div",{className:"muted",children:["/LLM  LLM ",Se.jsx("br",{})," LLM  CORS/Key  Key"]}),Se.jsx("div",{className:"label",children:"Entities"}),Se.jsx("div",{className:"row",children:q0.map(h=>Se.jsxs("label",{className:"pill",style:{cursor:"pointer"},children:[Se.jsx("input",{type:"checkbox",checked:c.has(h),onChange:g=>{const p=new Set(r.entityTypes);g.target.checked?p.add(h):p.delete(h),tt.getState().setSchema({entityTypes:[...p.values()]})},disabled:u,style:{marginRight:6}}),h]},h))}),Se.jsx("div",{className:"label",children:"Relations"}),Se.jsx("div",{className:"row",children:W0.map(h=>Se.jsxs("label",{className:"pill",style:{cursor:"pointer"},children:[Se.jsx("input",{type:"checkbox",checked:f.has(h),onChange:g=>{const p=new Set(r.relationTypes);g.target.checked?p.add(h):p.delete(h),tt.getState().setSchema({relationTypes:[...p.values()]})},disabled:u,style:{marginRight:6}}),h]},h))}),Se.jsx("div",{className:"label",children:" LLM "}),Se.jsx("textarea",{className:"input",value:r.notes??"",onChange:h=>tt.getState().setSchema({notes:h.target.value}),disabled:u,placeholder:"DerivedFrom..."}),Se.jsx("div",{className:"label",children:" LLM"}),Se.jsxs("label",{className:"pill",style:{cursor:"pointer"},children:[Se.jsx("input",{type:"checkbox",checked:e.enabled,onChange:h=>tt.getState().setLlm({enabled:h.target.checked}),disabled:u,style:{marginRight:6}})," LLM "]}),e.enabled?Se.jsxs(Se.Fragment,{children:[Se.jsx("div",{className:"label",children:"openai / claude / gemini"}),Se.jsxs("select",{className:"input",value:e.protocol,onChange:h=>{const g=h.target.value,p=g==="openai"?{baseUrl:"https://api.openai.com/v1",model:"gpt-5"}:g==="anthropic"?{baseUrl:"https://api.anthropic.com",model:"claude-3-5-sonnet-latest"}:{baseUrl:"https://generativelanguage.googleapis.com",model:"gemini-1.5-pro"};tt.getState().setLlm({protocol:g,...p})},disabled:u,children:[Se.jsx("option",{value:"openai",children:"openai"}),Se.jsx("option",{value:"anthropic",children:"claude (anthropic)"}),Se.jsx("option",{value:"gemini",children:"gemini"})]}),Se.jsx("div",{className:"label",children:"Base URL"}),Se.jsx("input",{className:"input mono",value:e.baseUrl,onChange:h=>tt.getState().setLlm({baseUrl:h.target.value}),disabled:u,placeholder:" https://api.openai.com/v1"}),Se.jsx("div",{className:"label",children:"Model"}),Se.jsx("input",{className:"input mono",value:e.model,onChange:h=>tt.getState().setLlm({model:h.target.value}),disabled:u,placeholder:" gpt-5 / claude-... / gemini-..."}),Se.jsx("div",{className:"label",children:"API Key"}),Se.jsx("input",{className:"input mono",value:e.apiKey,onChange:h=>tt.getState().setLlm({apiKey:h.target.value}),disabled:u,placeholder:""}),Se.jsxs("div",{className:"row",style:{marginTop:10},children:[Se.jsxs("div",{style:{flex:1,minWidth:160},children:[Se.jsx("div",{className:"label",children:"max_tokens 100000"}),Se.jsx("input",{className:"input mono",type:"number",min:256,step:256,value:e.maxTokens,onChange:h=>tt.getState().setLlm({maxTokens:Number(h.target.value)}),disabled:u}),Se.jsx("div",{className:"muted",style:{marginTop:6},children:""})]}),Se.jsxs("div",{style:{flex:1,minWidth:160},children:[Se.jsx("div",{className:"label",children:"LLM "}),Se.jsx("input",{className:"input mono",type:"number",min:1,max:32,step:1,value:e.parallelism,onChange:h=>tt.getState().setLlm({parallelism:Number(h.target.value)}),disabled:u}),Se.jsx("div",{className:"muted",style:{marginTop:6},children:"/ 2-6"})]})]}),Se.jsxs("div",{className:"row",style:{marginTop:10},children:[Se.jsxs("div",{style:{flex:1,minWidth:160},children:[Se.jsx("div",{className:"label",children:"temperature"}),Se.jsx("input",{className:"input mono",type:"number",step:.05,min:0,max:2,value:e.temperature,onChange:h=>tt.getState().setLlm({temperature:Number(h.target.value)}),disabled:u})]}),Se.jsxs("div",{style:{flex:1,minWidth:160},children:[Se.jsx("div",{className:"label",children:"top_p"}),Se.jsx("input",{className:"input mono",type:"number",step:.05,min:0,max:1,value:e.topP,onChange:h=>tt.getState().setLlm({topP:Number(h.target.value)}),disabled:u})]})]}),Se.jsx("div",{className:"row",style:{marginTop:12},children:Se.jsx("button",{className:"btn ok",onClick:d,disabled:n||u,children:n?"...":""})}),i?Se.jsxs(Se.Fragment,{children:[Se.jsx("div",{className:"label",children:""}),Se.jsx("textarea",{className:"input mono",value:i,readOnly:!0})]}):null]}):null]})}var jf={},Vs={},nm;function j2(){if(nm)return Vs;nm=1,Vs.byteLength=u,Vs.toByteArray=f,Vs.fromByteArray=g;for(var r=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,i=n.length;a<i;++a)r[a]=n[a],e[n.charCodeAt(a)]=a;e[45]=62,e[95]=63;function o(p){var m=p.length;if(m%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var y=p.indexOf("=");y===-1&&(y=m);var x=y===m?0:4-y%4;return[y,x]}function u(p){var m=o(p),y=m[0],x=m[1];return(y+x)*3/4-x}function c(p,m,y){return(m+y)*3/4-y}function f(p){var m,y=o(p),x=y[0],b=y[1],_=new t(c(p,x,b)),E=0,C=b>0?x-4:x,B;for(B=0;B<C;B+=4)m=e[p.charCodeAt(B)]<<18|e[p.charCodeAt(B+1)]<<12|e[p.charCodeAt(B+2)]<<6|e[p.charCodeAt(B+3)],_[E++]=m>>16&255,_[E++]=m>>8&255,_[E++]=m&255;return b===2&&(m=e[p.charCodeAt(B)]<<2|e[p.charCodeAt(B+1)]>>4,_[E++]=m&255),b===1&&(m=e[p.charCodeAt(B)]<<10|e[p.charCodeAt(B+1)]<<4|e[p.charCodeAt(B+2)]>>2,_[E++]=m>>8&255,_[E++]=m&255),_}function d(p){return r[p>>18&63]+r[p>>12&63]+r[p>>6&63]+r[p&63]}function h(p,m,y){for(var x,b=[],_=m;_<y;_+=3)x=(p[_]<<16&16711680)+(p[_+1]<<8&65280)+(p[_+2]&255),b.push(d(x));return b.join("")}function g(p){for(var m,y=p.length,x=y%3,b=[],_=16383,E=0,C=y-x;E<C;E+=_)b.push(h(p,E,E+_>C?C:E+_));return x===1?(m=p[y-1],b.push(r[m>>2]+r[m<<4&63]+"==")):x===2&&(m=(p[y-2]<<8)+p[y-1],b.push(r[m>>10]+r[m>>4&63]+r[m<<2&63]+"=")),b.join("")}return Vs}var $u={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var am;function q2(){return am||(am=1,$u.read=function(r,e,t,n,a){var i,o,u=a*8-n-1,c=(1<<u)-1,f=c>>1,d=-7,h=t?a-1:0,g=t?-1:1,p=r[e+h];for(h+=g,i=p&(1<<-d)-1,p>>=-d,d+=u;d>0;i=i*256+r[e+h],h+=g,d-=8);for(o=i&(1<<-d)-1,i>>=-d,d+=n;d>0;o=o*256+r[e+h],h+=g,d-=8);if(i===0)i=1-f;else{if(i===c)return o?NaN:(p?-1:1)*(1/0);o=o+Math.pow(2,n),i=i-f}return(p?-1:1)*o*Math.pow(2,i-n)},$u.write=function(r,e,t,n,a,i){var o,u,c,f=i*8-a-1,d=(1<<f)-1,h=d>>1,g=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:i-1,m=n?1:-1,y=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,o=d):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+h>=1?e+=g/c:e+=g*Math.pow(2,1-h),e*c>=2&&(o++,c/=2),o+h>=d?(u=0,o=d):o+h>=1?(u=(e*c-1)*Math.pow(2,a),o=o+h):(u=e*Math.pow(2,h-1)*Math.pow(2,a),o=0));a>=8;r[t+p]=u&255,p+=m,u/=256,a-=8);for(o=o<<a|u,f+=a;f>0;r[t+p]=o&255,p+=m,o/=256,f-=8);r[t+p-m]|=y*128}),$u}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var im;function W2(){return im||(im=1,(function(r){const e=j2(),t=q2(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=u,r.SlowBuffer=_,r.INSPECT_MAX_BYTES=50;const a=2147483647;r.kMaxLength=a,u.TYPED_ARRAY_SUPPORT=i(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const $=new Uint8Array(1),k={foo:function(){return 42}};return Object.setPrototypeOf(k,Uint8Array.prototype),Object.setPrototypeOf($,k),$.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function o($){if($>a)throw new RangeError('The value "'+$+'" is invalid for option "size"');const k=new Uint8Array($);return Object.setPrototypeOf(k,u.prototype),k}function u($,k,R){if(typeof $=="number"){if(typeof k=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return h($)}return c($,k,R)}u.poolSize=8192;function c($,k,R){if(typeof $=="string")return g($,k);if(ArrayBuffer.isView($))return m($);if($==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof $);if(se($,ArrayBuffer)||$&&se($.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(se($,SharedArrayBuffer)||$&&se($.buffer,SharedArrayBuffer)))return y($,k,R);if(typeof $=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const H=$.valueOf&&$.valueOf();if(H!=null&&H!==$)return u.from(H,k,R);const ee=x($);if(ee)return ee;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof $[Symbol.toPrimitive]=="function")return u.from($[Symbol.toPrimitive]("string"),k,R);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof $)}u.from=function($,k,R){return c($,k,R)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function f($){if(typeof $!="number")throw new TypeError('"size" argument must be of type number');if($<0)throw new RangeError('The value "'+$+'" is invalid for option "size"')}function d($,k,R){return f($),$<=0?o($):k!==void 0?typeof R=="string"?o($).fill(k,R):o($).fill(k):o($)}u.alloc=function($,k,R){return d($,k,R)};function h($){return f($),o($<0?0:b($)|0)}u.allocUnsafe=function($){return h($)},u.allocUnsafeSlow=function($){return h($)};function g($,k){if((typeof k!="string"||k==="")&&(k="utf8"),!u.isEncoding(k))throw new TypeError("Unknown encoding: "+k);const R=E($,k)|0;let H=o(R);const ee=H.write($,k);return ee!==R&&(H=H.slice(0,ee)),H}function p($){const k=$.length<0?0:b($.length)|0,R=o(k);for(let H=0;H<k;H+=1)R[H]=$[H]&255;return R}function m($){if(se($,Uint8Array)){const k=new Uint8Array($);return y(k.buffer,k.byteOffset,k.byteLength)}return p($)}function y($,k,R){if(k<0||$.byteLength<k)throw new RangeError('"offset" is outside of buffer bounds');if($.byteLength<k+(R||0))throw new RangeError('"length" is outside of buffer bounds');let H;return k===void 0&&R===void 0?H=new Uint8Array($):R===void 0?H=new Uint8Array($,k):H=new Uint8Array($,k,R),Object.setPrototypeOf(H,u.prototype),H}function x($){if(u.isBuffer($)){const k=b($.length)|0,R=o(k);return R.length===0||$.copy(R,0,0,k),R}if($.length!==void 0)return typeof $.length!="number"||Be($.length)?o(0):p($);if($.type==="Buffer"&&Array.isArray($.data))return p($.data)}function b($){if($>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return $|0}function _($){return+$!=$&&($=0),u.alloc(+$)}u.isBuffer=function(k){return k!=null&&k._isBuffer===!0&&k!==u.prototype},u.compare=function(k,R){if(se(k,Uint8Array)&&(k=u.from(k,k.offset,k.byteLength)),se(R,Uint8Array)&&(R=u.from(R,R.offset,R.byteLength)),!u.isBuffer(k)||!u.isBuffer(R))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(k===R)return 0;let H=k.length,ee=R.length;for(let J=0,O=Math.min(H,ee);J<O;++J)if(k[J]!==R[J]){H=k[J],ee=R[J];break}return H<ee?-1:ee<H?1:0},u.isEncoding=function(k){switch(String(k).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(k,R){if(!Array.isArray(k))throw new TypeError('"list" argument must be an Array of Buffers');if(k.length===0)return u.alloc(0);let H;if(R===void 0)for(R=0,H=0;H<k.length;++H)R+=k[H].length;const ee=u.allocUnsafe(R);let J=0;for(H=0;H<k.length;++H){let O=k[H];if(se(O,Uint8Array))J+O.length>ee.length?(u.isBuffer(O)||(O=u.from(O)),O.copy(ee,J)):Uint8Array.prototype.set.call(ee,O,J);else if(u.isBuffer(O))O.copy(ee,J);else throw new TypeError('"list" argument must be an Array of Buffers');J+=O.length}return ee};function E($,k){if(u.isBuffer($))return $.length;if(ArrayBuffer.isView($)||se($,ArrayBuffer))return $.byteLength;if(typeof $!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof $);const R=$.length,H=arguments.length>2&&arguments[2]===!0;if(!H&&R===0)return 0;let ee=!1;for(;;)switch(k){case"ascii":case"latin1":case"binary":return R;case"utf8":case"utf-8":return Y($).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R*2;case"hex":return R>>>1;case"base64":return he($).length;default:if(ee)return H?-1:Y($).length;k=(""+k).toLowerCase(),ee=!0}}u.byteLength=E;function C($,k,R){let H=!1;if((k===void 0||k<0)&&(k=0),k>this.length||((R===void 0||R>this.length)&&(R=this.length),R<=0)||(R>>>=0,k>>>=0,R<=k))return"";for($||($="utf8");;)switch($){case"hex":return Z(this,k,R);case"utf8":case"utf-8":return T(this,k,R);case"ascii":return W(this,k,R);case"latin1":case"binary":return X(this,k,R);case"base64":return F(this,k,R);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return te(this,k,R);default:if(H)throw new TypeError("Unknown encoding: "+$);$=($+"").toLowerCase(),H=!0}}u.prototype._isBuffer=!0;function B($,k,R){const H=$[k];$[k]=$[R],$[R]=H}u.prototype.swap16=function(){const k=this.length;if(k%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let R=0;R<k;R+=2)B(this,R,R+1);return this},u.prototype.swap32=function(){const k=this.length;if(k%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let R=0;R<k;R+=4)B(this,R,R+3),B(this,R+1,R+2);return this},u.prototype.swap64=function(){const k=this.length;if(k%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let R=0;R<k;R+=8)B(this,R,R+7),B(this,R+1,R+6),B(this,R+2,R+5),B(this,R+3,R+4);return this},u.prototype.toString=function(){const k=this.length;return k===0?"":arguments.length===0?T(this,0,k):C.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(k){if(!u.isBuffer(k))throw new TypeError("Argument must be a Buffer");return this===k?!0:u.compare(this,k)===0},u.prototype.inspect=function(){let k="";const R=r.INSPECT_MAX_BYTES;return k=this.toString("hex",0,R).replace(/(.{2})/g,"$1 ").trim(),this.length>R&&(k+=" ... "),"<Buffer "+k+">"},n&&(u.prototype[n]=u.prototype.inspect),u.prototype.compare=function(k,R,H,ee,J){if(se(k,Uint8Array)&&(k=u.from(k,k.offset,k.byteLength)),!u.isBuffer(k))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof k);if(R===void 0&&(R=0),H===void 0&&(H=k?k.length:0),ee===void 0&&(ee=0),J===void 0&&(J=this.length),R<0||H>k.length||ee<0||J>this.length)throw new RangeError("out of range index");if(ee>=J&&R>=H)return 0;if(ee>=J)return-1;if(R>=H)return 1;if(R>>>=0,H>>>=0,ee>>>=0,J>>>=0,this===k)return 0;let O=J-ee,le=H-R;const _e=Math.min(O,le),ye=this.slice(ee,J),ke=k.slice(R,H);for(let Oe=0;Oe<_e;++Oe)if(ye[Oe]!==ke[Oe]){O=ye[Oe],le=ke[Oe];break}return O<le?-1:le<O?1:0};function N($,k,R,H,ee){if($.length===0)return-1;if(typeof R=="string"?(H=R,R=0):R>2147483647?R=2147483647:R<-2147483648&&(R=-2147483648),R=+R,Be(R)&&(R=ee?0:$.length-1),R<0&&(R=$.length+R),R>=$.length){if(ee)return-1;R=$.length-1}else if(R<0)if(ee)R=0;else return-1;if(typeof k=="string"&&(k=u.from(k,H)),u.isBuffer(k))return k.length===0?-1:A($,k,R,H,ee);if(typeof k=="number")return k=k&255,typeof Uint8Array.prototype.indexOf=="function"?ee?Uint8Array.prototype.indexOf.call($,k,R):Uint8Array.prototype.lastIndexOf.call($,k,R):A($,[k],R,H,ee);throw new TypeError("val must be string, number or Buffer")}function A($,k,R,H,ee){let J=1,O=$.length,le=k.length;if(H!==void 0&&(H=String(H).toLowerCase(),H==="ucs2"||H==="ucs-2"||H==="utf16le"||H==="utf-16le")){if($.length<2||k.length<2)return-1;J=2,O/=2,le/=2,R/=2}function _e(ke,Oe){return J===1?ke[Oe]:ke.readUInt16BE(Oe*J)}let ye;if(ee){let ke=-1;for(ye=R;ye<O;ye++)if(_e($,ye)===_e(k,ke===-1?0:ye-ke)){if(ke===-1&&(ke=ye),ye-ke+1===le)return ke*J}else ke!==-1&&(ye-=ye-ke),ke=-1}else for(R+le>O&&(R=O-le),ye=R;ye>=0;ye--){let ke=!0;for(let Oe=0;Oe<le;Oe++)if(_e($,ye+Oe)!==_e(k,Oe)){ke=!1;break}if(ke)return ye}return-1}u.prototype.includes=function(k,R,H){return this.indexOf(k,R,H)!==-1},u.prototype.indexOf=function(k,R,H){return N(this,k,R,H,!0)},u.prototype.lastIndexOf=function(k,R,H){return N(this,k,R,H,!1)};function z($,k,R,H){R=Number(R)||0;const ee=$.length-R;H?(H=Number(H),H>ee&&(H=ee)):H=ee;const J=k.length;H>J/2&&(H=J/2);let O;for(O=0;O<H;++O){const le=parseInt(k.substr(O*2,2),16);if(Be(le))return O;$[R+O]=le}return O}function M($,k,R,H){return me(Y(k,$.length-R),$,R,H)}function V($,k,R,H){return me(K(k),$,R,H)}function q($,k,R,H){return me(he(k),$,R,H)}function I($,k,R,H){return me(ae(k,$.length-R),$,R,H)}u.prototype.write=function(k,R,H,ee){if(R===void 0)ee="utf8",H=this.length,R=0;else if(H===void 0&&typeof R=="string")ee=R,H=this.length,R=0;else if(isFinite(R))R=R>>>0,isFinite(H)?(H=H>>>0,ee===void 0&&(ee="utf8")):(ee=H,H=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const J=this.length-R;if((H===void 0||H>J)&&(H=J),k.length>0&&(H<0||R<0)||R>this.length)throw new RangeError("Attempt to write outside buffer bounds");ee||(ee="utf8");let O=!1;for(;;)switch(ee){case"hex":return z(this,k,R,H);case"utf8":case"utf-8":return M(this,k,R,H);case"ascii":case"latin1":case"binary":return V(this,k,R,H);case"base64":return q(this,k,R,H);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,k,R,H);default:if(O)throw new TypeError("Unknown encoding: "+ee);ee=(""+ee).toLowerCase(),O=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function F($,k,R){return k===0&&R===$.length?e.fromByteArray($):e.fromByteArray($.slice(k,R))}function T($,k,R){R=Math.min($.length,R);const H=[];let ee=k;for(;ee<R;){const J=$[ee];let O=null,le=J>239?4:J>223?3:J>191?2:1;if(ee+le<=R){let _e,ye,ke,Oe;switch(le){case 1:J<128&&(O=J);break;case 2:_e=$[ee+1],(_e&192)===128&&(Oe=(J&31)<<6|_e&63,Oe>127&&(O=Oe));break;case 3:_e=$[ee+1],ye=$[ee+2],(_e&192)===128&&(ye&192)===128&&(Oe=(J&15)<<12|(_e&63)<<6|ye&63,Oe>2047&&(Oe<55296||Oe>57343)&&(O=Oe));break;case 4:_e=$[ee+1],ye=$[ee+2],ke=$[ee+3],(_e&192)===128&&(ye&192)===128&&(ke&192)===128&&(Oe=(J&15)<<18|(_e&63)<<12|(ye&63)<<6|ke&63,Oe>65535&&Oe<1114112&&(O=Oe))}}O===null?(O=65533,le=1):O>65535&&(O-=65536,H.push(O>>>10&1023|55296),O=56320|O&1023),H.push(O),ee+=le}return Q(H)}const G=4096;function Q($){const k=$.length;if(k<=G)return String.fromCharCode.apply(String,$);let R="",H=0;for(;H<k;)R+=String.fromCharCode.apply(String,$.slice(H,H+=G));return R}function W($,k,R){let H="";R=Math.min($.length,R);for(let ee=k;ee<R;++ee)H+=String.fromCharCode($[ee]&127);return H}function X($,k,R){let H="";R=Math.min($.length,R);for(let ee=k;ee<R;++ee)H+=String.fromCharCode($[ee]);return H}function Z($,k,R){const H=$.length;(!k||k<0)&&(k=0),(!R||R<0||R>H)&&(R=H);let ee="";for(let J=k;J<R;++J)ee+=De[$[J]];return ee}function te($,k,R){const H=$.slice(k,R);let ee="";for(let J=0;J<H.length-1;J+=2)ee+=String.fromCharCode(H[J]+H[J+1]*256);return ee}u.prototype.slice=function(k,R){const H=this.length;k=~~k,R=R===void 0?H:~~R,k<0?(k+=H,k<0&&(k=0)):k>H&&(k=H),R<0?(R+=H,R<0&&(R=0)):R>H&&(R=H),R<k&&(R=k);const ee=this.subarray(k,R);return Object.setPrototypeOf(ee,u.prototype),ee};function L($,k,R){if($%1!==0||$<0)throw new RangeError("offset is not uint");if($+k>R)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(k,R,H){k=k>>>0,R=R>>>0,H||L(k,R,this.length);let ee=this[k],J=1,O=0;for(;++O<R&&(J*=256);)ee+=this[k+O]*J;return ee},u.prototype.readUintBE=u.prototype.readUIntBE=function(k,R,H){k=k>>>0,R=R>>>0,H||L(k,R,this.length);let ee=this[k+--R],J=1;for(;R>0&&(J*=256);)ee+=this[k+--R]*J;return ee},u.prototype.readUint8=u.prototype.readUInt8=function(k,R){return k=k>>>0,R||L(k,1,this.length),this[k]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(k,R){return k=k>>>0,R||L(k,2,this.length),this[k]|this[k+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(k,R){return k=k>>>0,R||L(k,2,this.length),this[k]<<8|this[k+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(k,R){return k=k>>>0,R||L(k,4,this.length),(this[k]|this[k+1]<<8|this[k+2]<<16)+this[k+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(k,R){return k=k>>>0,R||L(k,4,this.length),this[k]*16777216+(this[k+1]<<16|this[k+2]<<8|this[k+3])},u.prototype.readBigUInt64LE=Ae(function(k){k=k>>>0,Re(k,"offset");const R=this[k],H=this[k+7];(R===void 0||H===void 0)&&D(k,this.length-8);const ee=R+this[++k]*2**8+this[++k]*2**16+this[++k]*2**24,J=this[++k]+this[++k]*2**8+this[++k]*2**16+H*2**24;return BigInt(ee)+(BigInt(J)<<BigInt(32))}),u.prototype.readBigUInt64BE=Ae(function(k){k=k>>>0,Re(k,"offset");const R=this[k],H=this[k+7];(R===void 0||H===void 0)&&D(k,this.length-8);const ee=R*2**24+this[++k]*2**16+this[++k]*2**8+this[++k],J=this[++k]*2**24+this[++k]*2**16+this[++k]*2**8+H;return(BigInt(ee)<<BigInt(32))+BigInt(J)}),u.prototype.readIntLE=function(k,R,H){k=k>>>0,R=R>>>0,H||L(k,R,this.length);let ee=this[k],J=1,O=0;for(;++O<R&&(J*=256);)ee+=this[k+O]*J;return J*=128,ee>=J&&(ee-=Math.pow(2,8*R)),ee},u.prototype.readIntBE=function(k,R,H){k=k>>>0,R=R>>>0,H||L(k,R,this.length);let ee=R,J=1,O=this[k+--ee];for(;ee>0&&(J*=256);)O+=this[k+--ee]*J;return J*=128,O>=J&&(O-=Math.pow(2,8*R)),O},u.prototype.readInt8=function(k,R){return k=k>>>0,R||L(k,1,this.length),this[k]&128?(255-this[k]+1)*-1:this[k]},u.prototype.readInt16LE=function(k,R){k=k>>>0,R||L(k,2,this.length);const H=this[k]|this[k+1]<<8;return H&32768?H|4294901760:H},u.prototype.readInt16BE=function(k,R){k=k>>>0,R||L(k,2,this.length);const H=this[k+1]|this[k]<<8;return H&32768?H|4294901760:H},u.prototype.readInt32LE=function(k,R){return k=k>>>0,R||L(k,4,this.length),this[k]|this[k+1]<<8|this[k+2]<<16|this[k+3]<<24},u.prototype.readInt32BE=function(k,R){return k=k>>>0,R||L(k,4,this.length),this[k]<<24|this[k+1]<<16|this[k+2]<<8|this[k+3]},u.prototype.readBigInt64LE=Ae(function(k){k=k>>>0,Re(k,"offset");const R=this[k],H=this[k+7];(R===void 0||H===void 0)&&D(k,this.length-8);const ee=this[k+4]+this[k+5]*2**8+this[k+6]*2**16+(H<<24);return(BigInt(ee)<<BigInt(32))+BigInt(R+this[++k]*2**8+this[++k]*2**16+this[++k]*2**24)}),u.prototype.readBigInt64BE=Ae(function(k){k=k>>>0,Re(k,"offset");const R=this[k],H=this[k+7];(R===void 0||H===void 0)&&D(k,this.length-8);const ee=(R<<24)+this[++k]*2**16+this[++k]*2**8+this[++k];return(BigInt(ee)<<BigInt(32))+BigInt(this[++k]*2**24+this[++k]*2**16+this[++k]*2**8+H)}),u.prototype.readFloatLE=function(k,R){return k=k>>>0,R||L(k,4,this.length),t.read(this,k,!0,23,4)},u.prototype.readFloatBE=function(k,R){return k=k>>>0,R||L(k,4,this.length),t.read(this,k,!1,23,4)},u.prototype.readDoubleLE=function(k,R){return k=k>>>0,R||L(k,8,this.length),t.read(this,k,!0,52,8)},u.prototype.readDoubleBE=function(k,R){return k=k>>>0,R||L(k,8,this.length),t.read(this,k,!1,52,8)};function U($,k,R,H,ee,J){if(!u.isBuffer($))throw new TypeError('"buffer" argument must be a Buffer instance');if(k>ee||k<J)throw new RangeError('"value" argument is out of bounds');if(R+H>$.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(k,R,H,ee){if(k=+k,R=R>>>0,H=H>>>0,!ee){const le=Math.pow(2,8*H)-1;U(this,k,R,H,le,0)}let J=1,O=0;for(this[R]=k&255;++O<H&&(J*=256);)this[R+O]=k/J&255;return R+H},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(k,R,H,ee){if(k=+k,R=R>>>0,H=H>>>0,!ee){const le=Math.pow(2,8*H)-1;U(this,k,R,H,le,0)}let J=H-1,O=1;for(this[R+J]=k&255;--J>=0&&(O*=256);)this[R+J]=k/O&255;return R+H},u.prototype.writeUint8=u.prototype.writeUInt8=function(k,R,H){return k=+k,R=R>>>0,H||U(this,k,R,1,255,0),this[R]=k&255,R+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(k,R,H){return k=+k,R=R>>>0,H||U(this,k,R,2,65535,0),this[R]=k&255,this[R+1]=k>>>8,R+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(k,R,H){return k=+k,R=R>>>0,H||U(this,k,R,2,65535,0),this[R]=k>>>8,this[R+1]=k&255,R+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(k,R,H){return k=+k,R=R>>>0,H||U(this,k,R,4,4294967295,0),this[R+3]=k>>>24,this[R+2]=k>>>16,this[R+1]=k>>>8,this[R]=k&255,R+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(k,R,H){return k=+k,R=R>>>0,H||U(this,k,R,4,4294967295,0),this[R]=k>>>24,this[R+1]=k>>>16,this[R+2]=k>>>8,this[R+3]=k&255,R+4};function oe($,k,R,H,ee){be(k,H,ee,$,R,7);let J=Number(k&BigInt(4294967295));$[R++]=J,J=J>>8,$[R++]=J,J=J>>8,$[R++]=J,J=J>>8,$[R++]=J;let O=Number(k>>BigInt(32)&BigInt(4294967295));return $[R++]=O,O=O>>8,$[R++]=O,O=O>>8,$[R++]=O,O=O>>8,$[R++]=O,R}function ie($,k,R,H,ee){be(k,H,ee,$,R,7);let J=Number(k&BigInt(4294967295));$[R+7]=J,J=J>>8,$[R+6]=J,J=J>>8,$[R+5]=J,J=J>>8,$[R+4]=J;let O=Number(k>>BigInt(32)&BigInt(4294967295));return $[R+3]=O,O=O>>8,$[R+2]=O,O=O>>8,$[R+1]=O,O=O>>8,$[R]=O,R+8}u.prototype.writeBigUInt64LE=Ae(function(k,R=0){return oe(this,k,R,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=Ae(function(k,R=0){return ie(this,k,R,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(k,R,H,ee){if(k=+k,R=R>>>0,!ee){const _e=Math.pow(2,8*H-1);U(this,k,R,H,_e-1,-_e)}let J=0,O=1,le=0;for(this[R]=k&255;++J<H&&(O*=256);)k<0&&le===0&&this[R+J-1]!==0&&(le=1),this[R+J]=(k/O>>0)-le&255;return R+H},u.prototype.writeIntBE=function(k,R,H,ee){if(k=+k,R=R>>>0,!ee){const _e=Math.pow(2,8*H-1);U(this,k,R,H,_e-1,-_e)}let J=H-1,O=1,le=0;for(this[R+J]=k&255;--J>=0&&(O*=256);)k<0&&le===0&&this[R+J+1]!==0&&(le=1),this[R+J]=(k/O>>0)-le&255;return R+H},u.prototype.writeInt8=function(k,R,H){return k=+k,R=R>>>0,H||U(this,k,R,1,127,-128),k<0&&(k=255+k+1),this[R]=k&255,R+1},u.prototype.writeInt16LE=function(k,R,H){return k=+k,R=R>>>0,H||U(this,k,R,2,32767,-32768),this[R]=k&255,this[R+1]=k>>>8,R+2},u.prototype.writeInt16BE=function(k,R,H){return k=+k,R=R>>>0,H||U(this,k,R,2,32767,-32768),this[R]=k>>>8,this[R+1]=k&255,R+2},u.prototype.writeInt32LE=function(k,R,H){return k=+k,R=R>>>0,H||U(this,k,R,4,2147483647,-2147483648),this[R]=k&255,this[R+1]=k>>>8,this[R+2]=k>>>16,this[R+3]=k>>>24,R+4},u.prototype.writeInt32BE=function(k,R,H){return k=+k,R=R>>>0,H||U(this,k,R,4,2147483647,-2147483648),k<0&&(k=4294967295+k+1),this[R]=k>>>24,this[R+1]=k>>>16,this[R+2]=k>>>8,this[R+3]=k&255,R+4},u.prototype.writeBigInt64LE=Ae(function(k,R=0){return oe(this,k,R,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=Ae(function(k,R=0){return ie(this,k,R,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ne($,k,R,H,ee,J){if(R+H>$.length)throw new RangeError("Index out of range");if(R<0)throw new RangeError("Index out of range")}function we($,k,R,H,ee){return k=+k,R=R>>>0,ee||ne($,k,R,4),t.write($,k,R,H,23,4),R+4}u.prototype.writeFloatLE=function(k,R,H){return we(this,k,R,!0,H)},u.prototype.writeFloatBE=function(k,R,H){return we(this,k,R,!1,H)};function Pe($,k,R,H,ee){return k=+k,R=R>>>0,ee||ne($,k,R,8),t.write($,k,R,H,52,8),R+8}u.prototype.writeDoubleLE=function(k,R,H){return Pe(this,k,R,!0,H)},u.prototype.writeDoubleBE=function(k,R,H){return Pe(this,k,R,!1,H)},u.prototype.copy=function(k,R,H,ee){if(!u.isBuffer(k))throw new TypeError("argument should be a Buffer");if(H||(H=0),!ee&&ee!==0&&(ee=this.length),R>=k.length&&(R=k.length),R||(R=0),ee>0&&ee<H&&(ee=H),ee===H||k.length===0||this.length===0)return 0;if(R<0)throw new RangeError("targetStart out of bounds");if(H<0||H>=this.length)throw new RangeError("Index out of range");if(ee<0)throw new RangeError("sourceEnd out of bounds");ee>this.length&&(ee=this.length),k.length-R<ee-H&&(ee=k.length-R+H);const J=ee-H;return this===k&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(R,H,ee):Uint8Array.prototype.set.call(k,this.subarray(H,ee),R),J},u.prototype.fill=function(k,R,H,ee){if(typeof k=="string"){if(typeof R=="string"?(ee=R,R=0,H=this.length):typeof H=="string"&&(ee=H,H=this.length),ee!==void 0&&typeof ee!="string")throw new TypeError("encoding must be a string");if(typeof ee=="string"&&!u.isEncoding(ee))throw new TypeError("Unknown encoding: "+ee);if(k.length===1){const O=k.charCodeAt(0);(ee==="utf8"&&O<128||ee==="latin1")&&(k=O)}}else typeof k=="number"?k=k&255:typeof k=="boolean"&&(k=Number(k));if(R<0||this.length<R||this.length<H)throw new RangeError("Out of range index");if(H<=R)return this;R=R>>>0,H=H===void 0?this.length:H>>>0,k||(k=0);let J;if(typeof k=="number")for(J=R;J<H;++J)this[J]=k;else{const O=u.isBuffer(k)?k:u.from(k,ee),le=O.length;if(le===0)throw new TypeError('The value "'+k+'" is invalid for argument "value"');for(J=0;J<H-R;++J)this[J+R]=O[J%le]}return this};const Ce={};function ge($,k,R){Ce[$]=class extends R{constructor(){super(),Object.defineProperty(this,"message",{value:k.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${$}]`,this.stack,delete this.name}get code(){return $}set code(ee){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ee,writable:!0})}toString(){return`${this.name} [${$}]: ${this.message}`}}}ge("ERR_BUFFER_OUT_OF_BOUNDS",function($){return $?`${$} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ge("ERR_INVALID_ARG_TYPE",function($,k){return`The "${$}" argument must be of type number. Received type ${typeof k}`},TypeError),ge("ERR_OUT_OF_RANGE",function($,k,R){let H=`The value of "${$}" is out of range.`,ee=R;return Number.isInteger(R)&&Math.abs(R)>2**32?ee=ce(String(R)):typeof R=="bigint"&&(ee=String(R),(R>BigInt(2)**BigInt(32)||R<-(BigInt(2)**BigInt(32)))&&(ee=ce(ee)),ee+="n"),H+=` It must be ${k}. Received ${ee}`,H},RangeError);function ce($){let k="",R=$.length;const H=$[0]==="-"?1:0;for(;R>=H+4;R-=3)k=`_${$.slice(R-3,R)}${k}`;return`${$.slice(0,R)}${k}`}function de($,k,R){Re(k,"offset"),($[k]===void 0||$[k+R]===void 0)&&D(k,$.length-(R+1))}function be($,k,R,H,ee,J){if($>R||$<k){const O=typeof k=="bigint"?"n":"";let le;throw k===0||k===BigInt(0)?le=`>= 0${O} and < 2${O} ** ${(J+1)*8}${O}`:le=`>= -(2${O} ** ${(J+1)*8-1}${O}) and < 2 ** ${(J+1)*8-1}${O}`,new Ce.ERR_OUT_OF_RANGE("value",le,$)}de(H,ee,J)}function Re($,k){if(typeof $!="number")throw new Ce.ERR_INVALID_ARG_TYPE(k,"number",$)}function D($,k,R){throw Math.floor($)!==$?(Re($,R),new Ce.ERR_OUT_OF_RANGE("offset","an integer",$)):k<0?new Ce.ERR_BUFFER_OUT_OF_BOUNDS:new Ce.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${k}`,$)}const ve=/[^+/0-9A-Za-z-_]/g;function pe($){if($=$.split("=")[0],$=$.trim().replace(ve,""),$.length<2)return"";for(;$.length%4!==0;)$=$+"=";return $}function Y($,k){k=k||1/0;let R;const H=$.length;let ee=null;const J=[];for(let O=0;O<H;++O){if(R=$.charCodeAt(O),R>55295&&R<57344){if(!ee){if(R>56319){(k-=3)>-1&&J.push(239,191,189);continue}else if(O+1===H){(k-=3)>-1&&J.push(239,191,189);continue}ee=R;continue}if(R<56320){(k-=3)>-1&&J.push(239,191,189),ee=R;continue}R=(ee-55296<<10|R-56320)+65536}else ee&&(k-=3)>-1&&J.push(239,191,189);if(ee=null,R<128){if((k-=1)<0)break;J.push(R)}else if(R<2048){if((k-=2)<0)break;J.push(R>>6|192,R&63|128)}else if(R<65536){if((k-=3)<0)break;J.push(R>>12|224,R>>6&63|128,R&63|128)}else if(R<1114112){if((k-=4)<0)break;J.push(R>>18|240,R>>12&63|128,R>>6&63|128,R&63|128)}else throw new Error("Invalid code point")}return J}function K($){const k=[];for(let R=0;R<$.length;++R)k.push($.charCodeAt(R)&255);return k}function ae($,k){let R,H,ee;const J=[];for(let O=0;O<$.length&&!((k-=2)<0);++O)R=$.charCodeAt(O),H=R>>8,ee=R%256,J.push(ee),J.push(H);return J}function he($){return e.toByteArray(pe($))}function me($,k,R,H){let ee;for(ee=0;ee<H&&!(ee+R>=k.length||ee>=$.length);++ee)k[ee+R]=$[ee];return ee}function se($,k){return $ instanceof k||$!=null&&$.constructor!=null&&$.constructor.name!=null&&$.constructor.name===k.name}function Be($){return $!==$}const De=(function(){const $="0123456789abcdef",k=new Array(256);for(let R=0;R<16;++R){const H=R*16;for(let ee=0;ee<16;++ee)k[H+ee]=$[R]+$[ee]}return k})();function Ae($){return typeof BigInt>"u"?ze:$}function ze(){throw new Error("BigInt not supported")}})(jf)),jf}var G2=W2();const js="http://www.w3.org/1999/02/22-rdf-syntax-ns#",qs="http://www.w3.org/2001/XMLSchema#",Vu="http://www.w3.org/2000/10/swap/",tn={xsd:{decimal:`${qs}decimal`,boolean:`${qs}boolean`,double:`${qs}double`,integer:`${qs}integer`,string:`${qs}string`},rdf:{type:`${js}type`,nil:`${js}nil`,first:`${js}first`,rest:`${js}rest`,langString:`${js}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${Vu}reify#forSome`,forAll:`${Vu}reify#forAll`},log:{implies:`${Vu}log#implies`,isImpliedBy:`${Vu}log#isImpliedBy`}},{xsd:ju}=tn,H2=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,sm={"\\":"\\","'":"'",'"':'"',n:`
`,r:"\r",t:"	",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},K2=/[\x00-\x20<>\\"\{\}\|\^\`]/,X2={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},Z2=/$0^/;class Y2{constructor(e){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,e=e||{},this._isImpliedBy=e.isImpliedBy,this._lineMode=!!e.lineMode){this._n3Mode=!1;for(const t in this)!(t in X2)&&this[t]instanceof RegExp&&(this[t]=Z2)}else this._n3Mode=e.n3!==!1;this.comments=!!e.comments,this._literalClosingPos=0}_tokenizeToEnd(e,t){let n=this._input,a=n.length;for(;;){let u,c;for(;u=this._newline.exec(n);)this.comments&&(c=this._comment.exec(u[0]))&&i("comment",c[1],"",this._line,u[0].length),n=n.substr(u[0].length,n.length),a=n.length,this._line++;if(!u&&(u=this._whitespace.exec(n))&&(n=n.substr(u[0].length,n.length)),this._endOfFile.test(n))return t&&(this.comments&&(c=this._comment.exec(n))&&i("comment",c[1],"",this._line,n.length),n=null,i("eof","","",this._line,0)),this._input=n;const f=this._line,d=n[0];let h="",g="",p="",m=null,y=0,x=!1;switch(d){case"^":if(n.length<3)break;if(n[1]==="^"){if(this._previousMarker="^^",n=n.substr(2),n[0]!=="<"){x=!0;break}}else{this._n3Mode&&(y=1,h="^");break}case"<":if(m=this._unescapedIri.exec(n))h="IRI",g=m[1];else if(m=this._iri.exec(n)){if(g=this._unescape(m[1]),g===null||K2.test(g))return o(this);h="IRI"}else n.length>1&&n[1]==="<"?(h="<<",y=2):this._n3Mode&&n.length>1&&n[1]==="="&&(y=2,this._isImpliedBy?(h="abbreviation",g="<"):(h="inverse",g=">"));break;case">":n.length>1&&n[1]===">"&&(h=">>",y=2);break;case"_":((m=this._blank.exec(n))||t&&(m=this._blank.exec(`${n} `)))&&(h="blank",p="_",g=m[1]);break;case'"':if(m=this._simpleQuotedString.exec(n))g=m[1];else if({value:g,matchLength:y}=this._parseLiteral(n),g===null)return o(this);(m!==null||y!==0)&&(h="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(m=this._simpleApostropheString.exec(n))g=m[1];else if({value:g,matchLength:y}=this._parseLiteral(n),g===null)return o(this);(m!==null||y!==0)&&(h="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(m=this._variable.exec(n))&&(h="var",g=m[0]);break;case"@":this._previousMarker==="literal"&&(m=this._langcode.exec(n))?(h="langcode",g=m[1]):(m=this._keyword.exec(n))&&(h=m[0]);break;case".":if(n.length===1?t:n[1]<"0"||n[1]>"9"){h=".",y=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(m=this._number.exec(n)||t&&(m=this._number.exec(`${n} `)))&&(h="literal",g=m[0],p=typeof m[1]=="string"?ju.double:typeof m[2]=="string"?ju.decimal:ju.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(m=this._sparqlKeyword.exec(n))?h=m[0].toUpperCase():x=!0;break;case"f":case"t":(m=this._boolean.exec(n))?(h="literal",g=m[0],p=ju.boolean):x=!0;break;case"a":(m=this._shortPredicates.exec(n))?(h="abbreviation",g="a"):x=!0;break;case"=":this._n3Mode&&n.length>1&&(h="abbreviation",n[1]!==">"?(y=1,g="="):(y=2,g=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"}":this._lineMode||(y=1,h=d);break;case"{":!this._lineMode&&n.length>=2&&(n[1]==="|"?(h="{|",y=2):(h=d,y=1));break;case"|":n.length>=2&&n[1]==="}"&&(h="|}",y=2);break;default:x=!0}if(x&&((this._previousMarker==="@prefix"||this._previousMarker==="PREFIX")&&(m=this._prefix.exec(n))?(h="prefix",g=m[1]||""):((m=this._prefixed.exec(n))||t&&(m=this._prefixed.exec(`${n} `)))&&(h="prefixed",p=m[1]||"",g=this._unescape(m[2]))),this._previousMarker==="^^")switch(h){case"prefixed":h="type";break;case"IRI":h="typeIRI";break;default:h=""}if(!h)return t||!/^'''|^"""/.test(n)&&/\n|\r/.test(n)?o(this):this._input=n;const b=y||m[0].length,_=i(h,g,p,f,b);this.previousToken=_,this._previousMarker=h,n=n.substr(b,n.length)}function i(u,c,f,d,h){const g=n?a-n.length:a,p=g+h,m={type:u,value:c,prefix:f,line:d,start:g,end:p};return e(null,m),m}function o(u){e(u._syntaxError(/^\S*/.exec(n)[0]))}}_unescape(e){let t=!1;const n=e.replace(H2,(a,i,o,u)=>{if(typeof i=="string")return String.fromCharCode(Number.parseInt(i,16));if(typeof o=="string"){let c=Number.parseInt(o,16);return c<=65535?String.fromCharCode(Number.parseInt(o,16)):String.fromCharCode(55296+((c-=65536)>>10),56320+(c&1023))}return u in sm?sm[u]:(t=!0,"")});return t?null:n}_parseLiteral(e){if(e.length>=3){const t=e.match(/^(?:"""|"|'''|'|)/)[0],n=t.length;let a=Math.max(this._literalClosingPos,n);for(;(a=e.indexOf(t,a))>0;){let i=0;for(;e[a-i-1]==="\\";)i++;if(i%2===0){const o=e.substring(n,a),u=o.split(/\r\n|\r|\n/).length-1,c=a+n;if(n===1&&u!==0||n===3&&this._lineMode)break;return this._line+=u,{value:this._unescape(o),matchLength:c}}a++}this._literalClosingPos=e.length-n+1}return{value:"",matchLength:0}}_syntaxError(e){this._input=null;const t=new Error(`Unexpected "${e}" on line ${this._line}.`);return t.context={token:void 0,line:this._line,previousToken:this.previousToken},t}_readStartingBom(e){return e.startsWith("\uFEFF")?e.substr(1):e}tokenize(e,t){if(this._line=1,typeof e=="string")if(this._input=this._readStartingBom(e),typeof t=="function")queueMicrotask(()=>this._tokenizeToEnd(t,!0));else{const n=[];let a;if(this._tokenizeToEnd((i,o)=>i?a=i:n.push(o),!0),a)throw a;return n}else this._pendingBuffer=null,typeof e.setEncoding=="function"&&e.setEncoding("utf8"),e.on("data",n=>{this._input!==null&&n.length!==0&&(this._pendingBuffer&&(n=G2.Buffer.concat([this._pendingBuffer,n]),this._pendingBuffer=null),n[n.length-1]&128?this._pendingBuffer=n:(typeof this._input>"u"?this._input=this._readStartingBom(typeof n=="string"?n:n.toString()):this._input+=n,this._tokenizeToEnd(t,!1)))}),e.on("end",()=>{typeof this._input=="string"&&this._tokenizeToEnd(t,!0)}),e.on("error",t)}}const{rdf:Q2,xsd:$i}=tn;let _o,J2=0;const Vh={namedNode:Q0,blankNode:J0,variable:t1,literal:e1,defaultGraph:n_,quad:bh,triple:bh,fromTerm:ro,fromQuad:r1};class Cn{constructor(e){this.id=e}get value(){return this.id}equals(e){return e instanceof Cn?this.id===e.id:!!e&&this.termType===e.termType&&this.value===e.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}class Z0 extends Cn{get termType(){return"NamedNode"}}class so extends Cn{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const e=this.id;let t=e.lastIndexOf('"')+1;return t<e.length&&e[t++]==="@"?e.substr(t).toLowerCase():""}get datatype(){return new Z0(this.datatypeString)}get datatypeString(){const e=this.id,t=e.lastIndexOf('"')+1,n=t<e.length?e[t]:"";return n==="^"?e.substr(t+2):n!=="@"?$i.string:Q2.langString}equals(e){return e instanceof so?this.id===e.id:!!e&&!!e.datatype&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&this.datatype.value===e.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}}class e_ extends Cn{constructor(e){super(`_:${e}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}}class t_ extends Cn{constructor(e){super(`?${e}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}}class r_ extends Cn{constructor(){return super(""),_o||this}get termType(){return"DefaultGraph"}equals(e){return this===e||!!e&&this.termType===e.termType}}_o=new r_;class Y0 extends Cn{constructor(e,t,n,a){super(""),this._subject=e,this._predicate=t,this._object=n,this._graph=a||_o}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(e){return!!e&&this._subject.equals(e.subject)&&this._predicate.equals(e.predicate)&&this._object.equals(e.object)&&this._graph.equals(e.graph)}}function Q0(r){return new Z0(r)}function J0(r){return new e_(r||`n3-${J2++}`)}function e1(r,e){if(typeof e=="string")return new so(`"${r}"@${e.toLowerCase()}`);let t=e?e.value:"";return t===""&&(typeof r=="boolean"?t=$i.boolean:typeof r=="number"&&(Number.isFinite(r)?t=Number.isInteger(r)?$i.integer:$i.double:(t=$i.double,Number.isNaN(r)||(r=r>0?"INF":"-INF")))),t===""||t===$i.string?new so(`"${r}"`):new so(`"${r}"^^${t}`)}function t1(r){return new t_(r)}function n_(){return _o}function bh(r,e,t,n){return new Y0(r,e,t,n)}function ro(r){if(r instanceof Cn)return r;switch(r.termType){case"NamedNode":return Q0(r.value);case"BlankNode":return J0(r.value);case"Variable":return t1(r.value);case"DefaultGraph":return _o;case"Literal":return e1(r.value,r.language||r.datatype);case"Quad":return r1(r);default:throw new Error(`Unexpected termType: ${r.termType}`)}}function r1(r){if(r instanceof Y0)return r;if(r.termType!=="Quad")throw new Error(`Unexpected termType: ${r.termType}`);return bh(ro(r.subject),ro(r.predicate),ro(r.object),ro(r.graph))}let om=0;class n1{constructor(e){this._contextStack=[],this._graph=null,e=e||{},this._setBase(e.baseIRI),e.factory&&a1(this,e.factory);const t=typeof e.format=="string"?e.format.match(/\w*$/)[0].toLowerCase():"",n=/turtle/.test(t),a=/trig/.test(t),i=/triple/.test(t),o=/quad/.test(t),u=this._n3Mode=/n3/.test(t),c=i||o;(this._supportsNamedGraphs=!(n||u))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(n||a||i||u),this._isImpliedBy=e.isImpliedBy,this._supportsRDFStar=t===""||/star|\*$/.test(t),c&&(this._resolveRelativeIRI=f=>null),this._blankNodePrefix=typeof e.blankNodePrefix!="string"?"":e.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=e.lexer||new Y2({lineMode:c,n3:u,isImpliedBy:this._isImpliedBy}),this._explicitQuantifiers=!!e.explicitQuantifiers}static _resetBlankNodePrefix(){om=0}_setBase(e){if(!e)this._base="",this._basePath="";else{const t=e.indexOf("#");t>=0&&(e=e.substr(0,t)),this._base=e,this._basePath=e.indexOf("/")<0?e:e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1]}}_saveContext(e,t,n,a,i){const o=this._n3Mode;this._contextStack.push({type:e,subject:n,predicate:a,object:i,graph:t,inverse:o?this._inversePredicate:!1,blankPrefix:o?this._prefixes._:"",quantified:o?this._quantified:null}),o&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(e,t){const n=this._contextStack.pop();if(!n||n.type!==e)return this._error(`Unexpected ${t.type}`,t);this._subject=n.subject,this._predicate=n.predicate,this._object=n.object,this._graph=n.graph,this._n3Mode&&(this._inversePredicate=n.inverse,this._prefixes._=n.blankPrefix,this._quantified=n.quantified)}_readInTopContext(e){switch(e.type){case"eof":return this._graph!==null?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}}_readEntity(e,t){let n;switch(e.type){case"IRI":case"typeIRI":const a=this._resolveIRI(e.value);if(a===null)return this._error("Invalid IRI",e);n=this._factory.namedNode(a);break;case"type":case"prefixed":const i=this._prefixes[e.prefix];if(i===void 0)return this._error(`Undefined prefix "${e.prefix}:"`,e);n=this._factory.namedNode(i+e.value);break;case"blank":n=this._factory.blankNode(this._prefixes[e.prefix]+e.value);break;case"var":n=this._factory.variable(e.value.substr(1));break;default:return this._error(`Expected entity but got ${e.type}`,e)}return!t&&this._n3Mode&&n.id in this._quantified&&(n=this._quantified[n.id]),n}_readSubject(e){switch(this._predicate=null,e.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._factory.blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._factory.blankNode(),null,null),this._readSubject):this._error("Unexpected graph",e);case"}":return this._readPunctuation(e);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier="blankNode",this._readQuantifierList):this._error('Unexpected "@forSome"',e);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier="variable",this._readQuantifierList):this._error('Unexpected "@forAll"',e);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",e);if(e.prefix.length===0)return this._literalValue=e.value,this._completeSubjectLiteral;this._subject=this._factory.literal(e.value,this._factory.namedNode(e.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",e);default:if((this._subject=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(e){const t=e.type;switch(t){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[e.value];break;case".":case"]":case"}":return this._predicate===null?this._error(`Unexpected ${t}`,e):(this._subject=null,t==="]"?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return this._predicate!==null?this._readPredicate:this._error("Expected predicate but got ;",e);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._factory.blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",e);default:if((this._predicate=this._readEntity(e))===void 0)return}return this._readObject}_readObject(e){switch(e.type){case"literal":if(e.prefix.length===0)return this._literalValue=e.value,this._readDataTypeOrLang;this._object=this._factory.literal(e.value,this._factory.namedNode(e.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._factory.blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",e);default:if((this._object=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(e){return e.type==="{"?this._readGraph(e):this._readPredicate(e)}_readGraph(e){return e.type!=="{"?this._error(`Expected graph but got ${e.type}`,e):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(e){return e.type==="]"?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))}_readBlankNodeTail(e){if(e.type!=="]")return this._readBlankNodePunctuation(e);this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph);const t=this._predicate===null;return this._restoreContext("blank",e),this._object!==null?this._getContextEndReader():this._predicate!==null?this._readObject:t?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(e){switch(e.type){case".":case"}":return this._subject=null,this._readPunctuation(e);default:return this._readPredicate(e)}}_readListItem(e){let t=null,n=null,a=this._readListItem;const i=this._subject,o=this._contextStack,u=o[o.length-1];switch(e.type){case"[":this._saveContext("blank",this._graph,n=this._factory.blankNode(),this.RDF_FIRST,this._subject=t=this._factory.blankNode()),a=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,n=this._factory.blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",e),o.length!==0&&o[o.length-1].type==="list"&&this._emit(this._subject,this._predicate,this._object,this._graph),this._predicate===null){if(a=this._readPredicate,this._subject===this.RDF_NIL)return a}else if(a=this._getContextEndReader(),this._object===this.RDF_NIL)return a;n=this.RDF_NIL;break;case"literal":e.prefix.length===0?(this._literalValue=e.value,a=this._readListItemDataTypeOrLang):(t=this._factory.literal(e.value,this._factory.namedNode(e.prefix)),a=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",e);default:if((t=this._readEntity(e))===void 0)return}if(n===null&&(this._subject=n=this._factory.blankNode()),i===null?u.predicate===null?u.subject=n:u.object=n:this._emit(i,this.RDF_REST,n,this._graph),t!==null){if(this._n3Mode&&(e.type==="IRI"||e.type==="prefixed"))return this._saveContext("item",this._graph,n,this.RDF_FIRST,t),this._subject=t,this._predicate=null,this._getPathReader(this._readListItem);this._emit(n,this.RDF_FIRST,t,this._graph)}return a}_readDataTypeOrLang(e){return this._completeObjectLiteral(e,!1)}_readListItemDataTypeOrLang(e){return this._completeObjectLiteral(e,!0)}_completeLiteral(e){let t=this._factory.literal(this._literalValue);switch(e.type){case"type":case"typeIRI":const n=this._readEntity(e);if(n===void 0)return;t=this._factory.literal(this._literalValue,n),e=null;break;case"langcode":t=this._factory.literal(this._literalValue,e.value),e=null;break}return{token:e,literal:t}}_completeSubjectLiteral(e){return this._subject=this._completeLiteral(e).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(e,t){const n=this._completeLiteral(e);if(n)return this._object=n.literal,t&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),n.token===null?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(n.token))}_readFormulaTail(e){return e.type!=="}"?this._readPunctuation(e):(this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",e),this._object===null?this._readPredicate:this._getContextEndReader())}_readPunctuation(e){let t,n=this._graph;const a=this._subject,i=this._inversePredicate;switch(e.type){case"}":if(this._graph===null)return this._error("Unexpected graph closing",e);if(this._n3Mode)return this._readFormulaTail(e);this._graph=null;case".":this._subject=null,t=this._contextStack.length?this._readSubject:this._readInTopContext,i&&(this._inversePredicate=!1);break;case";":t=this._readPredicate;break;case",":t=this._readObject;break;case"{|":if(!this._supportsRDFStar)return this._error("Unexpected RDF-star syntax",e);const o=this._predicate,u=this._object;this._subject=this._factory.quad(a,o,u,this.DEFAULTGRAPH),t=this._readPredicate;break;case"|}":if(this._subject.termType!=="Quad")return this._error("Unexpected asserted triple closing",e);this._subject=null,t=this._readPunctuation;break;default:if(this._supportsQuads&&this._graph===null&&(n=this._readEntity(e))!==void 0){t=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}if(a!==null){const o=this._predicate,u=this._object;i?this._emit(u,o,a,n):this._emit(a,o,u,n)}return t}_readBlankNodePunctuation(e){let t;switch(e.type){case";":t=this._readPredicate;break;case",":t=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}return this._emit(this._subject,this._predicate,this._object,this._graph),t}_readQuadPunctuation(e){return e.type!=="."?this._error("Expected dot to follow quad",e):this._readInTopContext}_readPrefix(e){return e.type!=="prefix"?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)}_readPrefixIRI(e){if(e.type!=="IRI")return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,e);const t=this._readEntity(e);return this._prefixes[this._prefix]=t.value,this._prefixCallback(this._prefix,t),this._readDeclarationPunctuation}_readBaseIRI(e){const t=e.type==="IRI"&&this._resolveIRI(e.value);return t?(this._setBase(t),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",e)}_readNamedGraphLabel(e){switch(e.type){case"IRI":case"blank":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}}_readNamedGraphBlankLabel(e){return e.type!=="]"?this._error("Invalid graph label",e):(this._subject=this._factory.blankNode(),this._readGraph)}_readDeclarationPunctuation(e){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(e)):e.type!=="."?this._error("Expected declaration to end with a dot",e):this._readInTopContext}_readQuantifierList(e){let t;switch(e.type){case"IRI":case"prefixed":if((t=this._readEntity(e,!0))!==void 0)break;default:return this._error(`Unexpected ${e.type}`,e)}return this._explicitQuantifiers?(this._subject===null?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,t,this.QUANTIFIERS_GRAPH)):this._quantified[t.id]=this._factory[this._quantifier](this._factory.blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(e){return e.type===","?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(e))}_getPathReader(e){return this._afterPath=e,this._readPath}_readPath(e){switch(e.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const t=this._contextStack,n=t.length&&t[t.length-1];if(n&&n.type==="item"){const a=this._subject;this._restoreContext("item",e),this._emit(this._subject,this.RDF_FIRST,a,this._graph)}return this._afterPath(e)}}_readForwardPath(e){let t,n;const a=this._factory.blankNode();if((n=this._readEntity(e))!==void 0)return this._predicate===null?(t=this._subject,this._subject=a):(t=this._object,this._object=a),this._emit(t,n,a,this._graph),this._readPath}_readBackwardPath(e){const t=this._factory.blankNode();let n,a;if((n=this._readEntity(e))!==void 0)return this._predicate===null?(a=this._subject,this._subject=t):(a=this._object,this._object=t),this._emit(t,n,a,this._graph),this._readPath}_readRDFStarTailOrGraph(e){return e.type!==">>"?this._supportsQuads&&this._graph===null&&(this._graph=this._readEntity(e))!==void 0?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,e):this._readRDFStarTail(e)}_readRDFStarTail(e){if(e.type!==">>")return this._error(`Expected >> but got ${e.type}`,e);const t=this._factory.quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",e),this._subject===null?(this._subject=t,this._readPredicate):(this._object=t,this._getContextEndReader())}_getContextEndReader(){const e=this._contextStack;if(!e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(e,t,n,a){this._callback(null,this._factory.quad(e,t,n,a||this.DEFAULTGRAPH))}_error(e,t){const n=new Error(`${e} on line ${t.line}.`);n.context={token:t,line:t.line,previousToken:this._lexer.previousToken},this._callback(n),this._callback=qu}_resolveIRI(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)?e:this._resolveRelativeIRI(e)}_resolveRelativeIRI(e){if(!e.length)return this._base;switch(e[0]){case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return(e[1]==="/"?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return/^[^/:]*:/.test(e)?null:this._removeDotSegments(this._basePath+e)}}_removeDotSegments(e){if(!/(^|\/)\.\.?($|[/#?])/.test(e))return e;const t=e.length;let n="",a=-1,i=-1,o=0,u="/";for(;a<t;){switch(u){case":":if(i<0&&e[++a]==="/"&&e[++a]==="/")for(;(i=a+1)<t&&e[i]!=="/";)a=i;break;case"?":case"#":a=t;break;case"/":if(e[a+1]===".")switch(u=e[++a+1],u){case"/":n+=e.substring(o,a-1),o=a+1;break;case void 0:case"?":case"#":return n+e.substring(o,a)+e.substr(a+1);case".":if(u=e[++a+1],u===void 0||u==="/"||u==="?"||u==="#"){if(n+=e.substring(o,a-2),(o=n.lastIndexOf("/"))>=i&&(n=n.substr(0,o)),u!=="/")return`${n}/${e.substr(a+1)}`;o=a+1}}}u=e[++a]}return n+e.substring(o)}parse(e,t,n){let a,i,o;if(t&&(t.onQuad||t.onPrefix||t.onComment)?(a=t.onQuad,i=t.onPrefix,o=t.onComment):(a=t,i=n),this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${om++}_`,this._prefixCallback=i||qu,this._inversePredicate=!1,this._quantified=Object.create(null),!a){const c=[];let f;if(this._callback=(d,h)=>{d?f=d:h&&c.push(h)},this._lexer.tokenize(e).every(d=>this._readCallback=this._readCallback(d)),f)throw f;return c}let u=(c,f)=>{c!==null?(this._callback(c),this._callback=qu):this._readCallback&&(this._readCallback=this._readCallback(f))};o&&(this._lexer.comments=!0,u=(c,f)=>{c!==null?(this._callback(c),this._callback=qu):this._readCallback&&(f.type==="comment"?o(f.value):this._readCallback=this._readCallback(f))}),this._callback=a,this._lexer.tokenize(e,u)}}function qu(){}function a1(r,e){r._factory=e,r.DEFAULTGRAPH=e.defaultGraph(),r.RDF_FIRST=e.namedNode(tn.rdf.first),r.RDF_REST=e.namedNode(tn.rdf.rest),r.RDF_NIL=e.namedNode(tn.rdf.nil),r.N3_FORALL=e.namedNode(tn.r.forAll),r.N3_FORSOME=e.namedNode(tn.r.forSome),r.ABBREVIATIONS={a:e.namedNode(tn.rdf.type),"=":e.namedNode(tn.owl.sameAs),">":e.namedNode(tn.log.implies),"<":e.namedNode(tn.log.isImpliedBy)},r.QUANTIFIERS_GRAPH=e.namedNode("urn:n3:quantifiers")}a1(n1.prototype,Vh);function a_(r){return!!r&&r.termType==="DefaultGraph"}function al(r){return r.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&")}const i_=/^:?[^:?#]*(?:[?#]|$)|^file:|^[^:]*:\/*[^?#]+?\/(?:\.\.?(?:\/|$)|\/)/i,s_=/^(?:(?:[^/?#]{3,}|\.?[^/?#.]\.?)(?:\/[^/?#]{3,}|\.?[^/?#.]\.?)*\/?)?(?:[?#]|$)/,um="./",o_="../",qf="?",lm="#";class jh{constructor(e){this.base=e,this._baseLength=0,this._baseMatcher=null,this._pathReplacements=new Array(e.length+1)}static supports(e){return!i_.test(e)}_getBaseMatcher(){if(this._baseMatcher)return this._baseMatcher;if(!jh.supports(this.base))return this._baseMatcher=/.^/;const e=/^[^:]*:\/*/.exec(this.base)[0],t=["^",al(e)],n=[],a=[],i=/[^/?#]*([/?#])/y;let o,u=0,c=0,f=i.lastIndex=e.length;for(;!u&&!c&&(o=i.exec(this.base));)o[1]===lm?c=i.lastIndex-1:(t.push(al(o[0]),"(?:"),n.push(")?"),o[1]!==qf?a.push(f=i.lastIndex):(u=f=i.lastIndex,c=this.base.indexOf(lm,u),this._pathReplacements[u]=qf));for(let d=0;d<a.length;d++)this._pathReplacements[a[d]]=o_.repeat(a.length-d-1);return this._pathReplacements[a[a.length-1]]=um,this._baseLength=c>0?c:this.base.length,t.push(al(this.base.substring(f,this._baseLength)),u?"(?:#|$)":"(?:[?#]|$)"),this._baseMatcher=new RegExp([...t,...n].join(""))}toRelative(e){const t=this._getBaseMatcher().exec(e);if(!t)return e;const n=t[0].length;if(n===this._baseLength&&n===e.length)return"";const a=this._pathReplacements[n];if(a){const i=e.substring(n);return a!==qf&&!s_.test(i)?e:a===um&&/^[^?#]/.test(i)?i:a+i}return e.substring(n-1)}}const Ws=Vh.defaultGraph(),{rdf:u_,xsd:Di}=tn,cm=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,fm=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,l_={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};class Gs extends Cn{equals(e){return e===this}}class c_{constructor(e,t){if(this._prefixRegex=/$0^/,e&&typeof e.write!="function"&&(t=e,e=null),t=t||{},this._lists=t.lists,e)this._outputStream=e,this._endStream=t.end===void 0?!0:!!t.end;else{let n="";this._outputStream={write(a,i,o){n+=a,o&&o()},end:a=>{a&&a(null,n)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(t.format)?(this._lineMode=!0,this._writeQuad=this._writeQuadLine):(this._lineMode=!1,this._graph=Ws,this._prefixIRIs=Object.create(null),t.prefixes&&this.addPrefixes(t.prefixes),t.baseIRI&&(this._baseIri=new jh(t.baseIRI)))}get _inDefaultGraph(){return Ws.equals(this._graph)}_write(e,t){this._outputStream.write(e,"utf8",t)}_writeQuad(e,t,n,a,i){try{a.equals(this._graph)||(this._write((this._subject===null?"":this._inDefaultGraph?`.
`:`
}
`)+(Ws.equals(a)?"":`${this._encodeIriOrBlank(a)} {
`)),this._graph=a,this._subject=null),e.equals(this._subject)?t.equals(this._predicate)?this._write(`, ${this._encodeObject(n)}`,i):this._write(`;
    ${this._encodePredicate(this._predicate=t)} ${this._encodeObject(n)}`,i):this._write(`${(this._subject===null?"":`.
`)+this._encodeSubject(this._subject=e)} ${this._encodePredicate(this._predicate=t)} ${this._encodeObject(n)}`,i)}catch(o){i&&i(o)}}_writeQuadLine(e,t,n,a,i){delete this._prefixMatch,this._write(this.quadToString(e,t,n,a),i)}quadToString(e,t,n,a){return`${this._encodeSubject(e)} ${this._encodeIriOrBlank(t)} ${this._encodeObject(n)}${a&&a.value?` ${this._encodeIriOrBlank(a)} .
`:` .
`}`}quadsToString(e){let t="";for(const n of e)t+=this.quadToString(n.subject,n.predicate,n.object,n.graph);return t}_encodeSubject(e){return e.termType==="Quad"?this._encodeQuad(e):this._encodeIriOrBlank(e)}_encodeIriOrBlank(e){if(e.termType!=="NamedNode")return this._lists&&e.value in this._lists&&(e=this.list(this._lists[e.value])),"id"in e?e.id:`_:${e.value}`;let t=e.value;this._baseIri&&(t=this._baseIri.toRelative(t)),cm.test(t)&&(t=t.replace(fm,dm));const n=this._prefixRegex.exec(t);return n?n[1]?this._prefixIRIs[n[1]]+n[2]:t:`<${t}>`}_encodeLiteral(e){let t=e.value;if(cm.test(t)&&(t=t.replace(fm,dm)),e.language)return`"${t}"@${e.language}`;if(this._lineMode){if(e.datatype.value===Di.string)return`"${t}"`}else switch(e.datatype.value){case Di.string:return`"${t}"`;case Di.boolean:if(t==="true"||t==="false")return t;break;case Di.integer:if(/^[+-]?\d+$/.test(t))return t;break;case Di.decimal:if(/^[+-]?\d*\.\d+$/.test(t))return t;break;case Di.double:if(/^[+-]?(?:\d+\.\d*|\.?\d+)[eE][+-]?\d+$/.test(t))return t;break}return`"${t}"^^${this._encodeIriOrBlank(e.datatype)}`}_encodePredicate(e){return e.value===u_.type?"a":this._encodeIriOrBlank(e)}_encodeObject(e){switch(e.termType){case"Quad":return this._encodeQuad(e);case"Literal":return this._encodeLiteral(e);default:return this._encodeIriOrBlank(e)}}_encodeQuad({subject:e,predicate:t,object:n,graph:a}){return`<<${this._encodeSubject(e)} ${this._encodePredicate(t)} ${this._encodeObject(n)}${a_(a)?"":` ${this._encodeIriOrBlank(a)}`}>>`}_blockedWrite(){throw new Error("Cannot write because the writer has been closed.")}addQuad(e,t,n,a,i){n===void 0?this._writeQuad(e.subject,e.predicate,e.object,e.graph,t):typeof a=="function"?this._writeQuad(e,t,n,Ws,a):this._writeQuad(e,t,n,a||Ws,i)}addQuads(e){for(let t=0;t<e.length;t++)this.addQuad(e[t])}addPrefix(e,t,n){const a={};a[e]=t,this.addPrefixes(a,n)}addPrefixes(e,t){if(!this._prefixIRIs)return t&&t();let n=!1;for(let a in e){let i=e[a];typeof i!="string"&&(i=i.value),n=!0,this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null,this._graph=""),this._prefixIRIs[i]=a+=":",this._write(`@prefix ${a} <${i}>.
`)}if(n){let a="",i="";for(const o in this._prefixIRIs)a+=a?`|${o}`:o,i+=(i?"|":"")+this._prefixIRIs[o];a=al(a),this._prefixRegex=new RegExp(`^(?:${i})[^/]*$|^(${a})([_a-zA-Z0-9][\\-_a-zA-Z0-9]*)$`)}this._write(n?`
`:"",t)}blank(e,t){let n=e,a,i;switch(e===void 0?n=[]:e.termType?n=[{predicate:e,object:t}]:"length"in e||(n=[e]),i=n.length){case 0:return new Gs("[]");case 1:if(a=n[0],!(a.object instanceof Gs))return new Gs(`[ ${this._encodePredicate(a.predicate)} ${this._encodeObject(a.object)} ]`);default:let o="[";for(let u=0;u<i;u++)a=n[u],a.predicate.equals(e)?o+=`, ${this._encodeObject(a.object)}`:(o+=`${(u?`;
  `:`
  `)+this._encodePredicate(a.predicate)} ${this._encodeObject(a.object)}`,e=a.predicate);return new Gs(`${o}
]`)}}list(e){const t=e&&e.length||0,n=new Array(t);for(let a=0;a<t;a++)n[a]=this._encodeObject(e[a]);return new Gs(`(${n.join(" ")})`)}end(e){this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null),this._write=this._blockedWrite;let t=e&&((n,a)=>{t=null,e(n,a)});if(this._endStream)try{return this._outputStream.end(t)}catch{}t&&t()}}function dm(r){let e=l_[r];return e===void 0&&(r.length===1?(e=r.charCodeAt(0).toString(16),e="\\u0000".substr(0,6-e.length)+e):(e=((r.charCodeAt(0)-55296)*1024+r.charCodeAt(1)+9216).toString(16),e="\\U00000000".substr(0,10-e.length)+e)),e}const{namedNode:Tr,literal:Hs,quad:dn}=Vh,ot={base:"https://example.org/latexkg#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",owl:"http://www.w3.org/2002/07/owl#"};function f_(r){return JSON.stringify({version:1,graph:r},null,2)}async function d_(r){var t,n;const e=new c_({prefixes:{latexkg:ot.base,rdf:ot.rdf,rdfs:ot.rdfs,owl:ot.owl}});for(const a of r.nodes){const i=Ks(a.id);e.addQuad(dn(i,Tr(`${ot.rdf}type`),Tr(`${ot.base}${a.type}`))),e.addQuad(dn(i,Tr(`${ot.rdfs}label`),Hs(a.title))),a.content&&e.addQuad(dn(i,Tr(`${ot.base}content`),Hs(a.content))),(t=a.source)!=null&&t.file&&e.addQuad(dn(i,Tr(`${ot.base}sourceFile`),Hs(a.source.file))),(n=a.source)!=null&&n.latexLabel&&e.addQuad(dn(i,Tr(`${ot.base}latexLabel`),Hs(a.source.latexLabel)))}for(const a of r.edges){const i=v_(a.type);if(e.addQuad(dn(Ks(a.source),i,Ks(a.target))),a.evidence){const o=Tr(`${ot.base}stmt:${encodeURIComponent(`${a.source}|${a.type}|${a.target}`)}`);e.addQuad(dn(o,Tr(`${ot.rdf}type`),Tr(`${ot.rdf}Statement`))),e.addQuad(dn(o,Tr(`${ot.rdf}subject`),Ks(a.source))),e.addQuad(dn(o,Tr(`${ot.rdf}predicate`),i)),e.addQuad(dn(o,Tr(`${ot.rdf}object`),Ks(a.target))),e.addQuad(dn(o,Tr(`${ot.base}evidence`),Hs(a.evidence)))}}return await new Promise((a,i)=>{e.end((o,u)=>{o?i(o):a(u)})})}function h_(r){const e=c=>c.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"),t=new Set(r.nodes.map(c=>c.type)),n=new Set(r.edges.map(c=>c.type)),a=[...t].map(c=>`  <owl:Class rdf:about="${ot.base}${c}"/>`).join(`
`),i=[...n].map(c=>`  <owl:ObjectProperty rdf:about="${ot.base}${c}"/>`).join(`
`),o=r.nodes.map(c=>{const f=`${ot.base}node:${encodeURIComponent(c.id)}`,d=e(c.title),h=c.content?`
    <latexkg:content>${e(c.content)}</latexkg:content>`:"";return`  <owl:NamedIndividual rdf:about="${f}">
    <rdf:type rdf:resource="${ot.base}${c.type}"/>
    <rdfs:label>${d}</rdfs:label>${h}
  </owl:NamedIndividual>`}).join(`
`),u=r.edges.map(c=>{const f=`${ot.base}node:${encodeURIComponent(c.source)}`,d=`${ot.base}node:${encodeURIComponent(c.target)}`;return`  <rdf:Description rdf:about="${f}">
    <latexkg:${c.type} rdf:resource="${d}"/>
  </rdf:Description>`}).join(`
`);return`<?xml version="1.0" encoding="UTF-8"?>
<rdf:RDF
  xmlns:rdf="${ot.rdf}"
  xmlns:rdfs="${ot.rdfs}"
  xmlns:owl="${ot.owl}"
  xmlns:latexkg="${ot.base}">
  <owl:Ontology rdf:about="${ot.base}"/>
${a?`
`+a:""}${i?`
`+i:""}${o?`
`+o:""}${u?`
`+u:""}
</rdf:RDF>
`}function Ks(r){return Tr(`${ot.base}node:${encodeURIComponent(r)}`)}function v_(r){return Tr(`${ot.base}${r}`)}function p_(r){var t,n;const e=JSON.parse(r);if((t=e==null?void 0:e.graph)!=null&&t.nodes&&((n=e==null?void 0:e.graph)!=null&&n.edges))return e.graph;if(e!=null&&e.nodes&&(e!=null&&e.edges))return e;throw new Error("JSON  {graph:{nodes,edges}}  {nodes,edges}")}async function g_(r){const t=new n1().parse(r),n=new Map,a=[],i=c=>{const f=`${ot.base}node:`;return c.startsWith(f)?decodeURIComponent(c.slice(f.length)):null},o=c=>c.startsWith(ot.base);for(const c of t){const f=c.subject.value,d=c.predicate.value,h=c.object,g=i(f);if(!g)continue;const p=n.get(g)??{id:g};if(n.set(g,p),d===`${ot.rdf}type`&&h.termType==="NamedNode"&&h.value.startsWith(ot.base)){const m=h.value.slice(ot.base.length);p.type=m}else if(d===`${ot.rdfs}label`&&h.termType==="Literal")p.title=h.value;else if(d===`${ot.base}content`&&h.termType==="Literal")p.content=h.value;else if(d===`${ot.base}sourceFile`&&h.termType==="Literal")p.source={...p.source,file:h.value};else if(d===`${ot.base}latexLabel`&&h.termType==="Literal")p.source={...p.source,latexLabel:h.value};else if(o(d)&&h.termType==="NamedNode"){const m=d.slice(ot.base.length),y=i(h.value);y&&a.push({type:m,source:g,target:y})}}const u=[];for(const[c,f]of n.entries())!f.type||!f.title?u.push({id:c,type:f.type??"Conclusion",title:f.title??c,content:f.content,source:f.source}):u.push(f);return{nodes:u,edges:a}}function m_({onAfterImport:r}){const e=tt(o=>o.graph),[t,n]=Ut.useState(null);function a(o,u,c="application/octet-stream"){const f=new Blob([u],{type:c}),d=URL.createObjectURL(f),h=document.createElement("a");h.href=d,h.download=o,h.click(),setTimeout(()=>URL.revokeObjectURL(d),5e3)}async function i(o){n(null);try{const u=await o.text();let c=null;if(o.name.toLowerCase().endsWith(".json"))c=p_(u);else if(o.name.toLowerCase().endsWith(".ttl")||o.name.toLowerCase().endsWith(".turtle"))c=await g_(u);else throw new Error(" .json  .ttl(turtle)");tt.getState().setGraph(c),tt.getState().setInfo(`nodes=${c.nodes.length}, edges=${c.edges.length}`),n(""),r==null||r()}catch(u){const c=String((u==null?void 0:u.message)??u);n(`${c}`),tt.getState().setError(c)}}return Se.jsxs("div",{className:"card",children:[Se.jsx("div",{className:"h1",children:" /  "}),Se.jsx("div",{className:"muted",children:" JSON / RDF(Turtle) / OWL(RDF/XML) JSON / Turtle"}),Se.jsxs("div",{className:"row",style:{marginTop:10},children:[Se.jsx("button",{className:"btn",onClick:()=>a("graph.json",f_(e),"application/json"),children:" JSON"}),Se.jsx("button",{className:"btn",onClick:async()=>a("graph.ttl",await d_(e),"text/turtle"),children:" RDF(TTL)"}),Se.jsx("button",{className:"btn",onClick:()=>a("graph.owl.xml",h_(e),"application/rdf+xml"),children:" OWL"})]}),Se.jsx("div",{className:"label",children:".json / .ttl"}),Se.jsx("input",{className:"input",type:"file",accept:".json,.ttl,.turtle,application/json,text/turtle",onChange:o=>{var c;const u=(c=o.target.files)==null?void 0:c[0];u&&i(u)}}),t?Se.jsx("div",{className:"muted",style:{marginTop:8},children:t}):null]})}function _h(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function y_(r){if(Array.isArray(r))return r}function w_(r){if(Array.isArray(r))return _h(r)}function ka(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function x_(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,s1(n.key),n)}}function Ca(r,e,t){return e&&x_(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function Fr(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=qh(r))||e){t&&(r=t);var n=0,a=function(){};return{s:a,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(c){throw c},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i,o=!0,u=!1;return{s:function(){t=t.call(r)},n:function(){var c=t.next();return o=c.done,c},e:function(c){u=!0,i=c},f:function(){try{o||t.return==null||t.return()}finally{if(u)throw i}}}}function i1(r,e,t){return(e=s1(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function b_(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function __(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,a,i,o,u=[],c=!0,f=!1;try{if(i=(t=t.call(r)).next,e===0){if(Object(t)!==t)return;c=!1}else for(;!(c=(n=i.call(t)).done)&&(u.push(n.value),u.length!==e);c=!0);}catch(d){f=!0,a=d}finally{try{if(!c&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(f)throw a}}return u}}function E_(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function S_(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ht(r,e){return y_(r)||__(r,e)||qh(r,e)||E_()}function gl(r){return w_(r)||b_(r)||qh(r)||S_()}function k_(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}function s1(r){var e=k_(r,"string");return typeof e=="symbol"?e:e+""}function Jt(r){"@babel/helpers - typeof";return Jt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jt(r)}function qh(r,e){if(r){if(typeof r=="string")return _h(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_h(r,e):void 0}}var Yt=typeof window>"u"?null:window,hm=Yt?Yt.navigator:null;Yt&&Yt.document;var C_=Jt(""),o1=Jt({}),T_=Jt(function(){}),P_=typeof HTMLElement>"u"?"undefined":Jt(HTMLElement),Eo=function(e){return e&&e.instanceString&&zt(e.instanceString)?e.instanceString():null},Ye=function(e){return e!=null&&Jt(e)==C_},zt=function(e){return e!=null&&Jt(e)===T_},wt=function(e){return!Hr(e)&&(Array.isArray?Array.isArray(e):e!=null&&e instanceof Array)},dt=function(e){return e!=null&&Jt(e)===o1&&!wt(e)&&e.constructor===Object},R_=function(e){return e!=null&&Jt(e)===o1},Ue=function(e){return e!=null&&Jt(e)===Jt(1)&&!isNaN(e)},B_=function(e){return Ue(e)&&Math.floor(e)===e},ml=function(e){if(P_!=="undefined")return e!=null&&e instanceof HTMLElement},Hr=function(e){return So(e)||u1(e)},So=function(e){return Eo(e)==="collection"&&e._private.single},u1=function(e){return Eo(e)==="collection"&&!e._private.single},Wh=function(e){return Eo(e)==="core"},l1=function(e){return Eo(e)==="stylesheet"},A_=function(e){return Eo(e)==="event"},wa=function(e){return e==null?!0:!!(e===""||e.match(/^\s+$/))},D_=function(e){return typeof HTMLElement>"u"?!1:e instanceof HTMLElement},I_=function(e){return dt(e)&&Ue(e.x1)&&Ue(e.x2)&&Ue(e.y1)&&Ue(e.y2)},L_=function(e){return R_(e)&&zt(e.then)},N_=function(){return hm&&hm.userAgent.match(/msie|trident|edge/i)},Zi=function(e,t){t||(t=function(){if(arguments.length===1)return arguments[0];if(arguments.length===0)return"undefined";for(var i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);return i.join("$")});var n=function(){var i=this,o=arguments,u,c=t.apply(i,o),f=n.cache;return(u=f[c])||(u=f[c]=e.apply(i,o)),u};return n.cache={},n},Gh=Zi(function(r){return r.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}),Al=Zi(function(r){return r.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}),c1=Zi(function(r,e){return r+e[0].toUpperCase()+e.substring(1)},function(r,e){return r+"$"+e}),vm=function(e){return wa(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},va=function(e,t){return e.slice(-1*t.length)===t},Qt="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",O_="rgb[a]?\\(("+Qt+"[%]?)\\s*,\\s*("+Qt+"[%]?)\\s*,\\s*("+Qt+"[%]?)(?:\\s*,\\s*("+Qt+"))?\\)",M_="rgb[a]?\\((?:"+Qt+"[%]?)\\s*,\\s*(?:"+Qt+"[%]?)\\s*,\\s*(?:"+Qt+"[%]?)(?:\\s*,\\s*(?:"+Qt+"))?\\)",z_="hsl[a]?\\(("+Qt+")\\s*,\\s*("+Qt+"[%])\\s*,\\s*("+Qt+"[%])(?:\\s*,\\s*("+Qt+"))?\\)",F_="hsl[a]?\\((?:"+Qt+")\\s*,\\s*(?:"+Qt+"[%])\\s*,\\s*(?:"+Qt+"[%])(?:\\s*,\\s*(?:"+Qt+"))?\\)",U_="\\#[0-9a-fA-F]{3}",$_="\\#[0-9a-fA-F]{6}",f1=function(e,t){return e<t?-1:e>t?1:0},V_=function(e,t){return-1*f1(e,t)},et=Object.assign!=null?Object.assign.bind(Object):function(r){for(var e=arguments,t=1;t<e.length;t++){var n=e[t];if(n!=null)for(var a=Object.keys(n),i=0;i<a.length;i++){var o=a[i];r[o]=n[o]}}return r},j_=function(e){if(!(!(e.length===4||e.length===7)||e[0]!=="#")){var t=e.length===4,n,a,i,o=16;return t?(n=parseInt(e[1]+e[1],o),a=parseInt(e[2]+e[2],o),i=parseInt(e[3]+e[3],o)):(n=parseInt(e[1]+e[2],o),a=parseInt(e[3]+e[4],o),i=parseInt(e[5]+e[6],o)),[n,a,i]}},q_=function(e){var t,n,a,i,o,u,c,f;function d(m,y,x){return x<0&&(x+=1),x>1&&(x-=1),x<1/6?m+(y-m)*6*x:x<1/2?y:x<2/3?m+(y-m)*(2/3-x)*6:m}var h=new RegExp("^"+z_+"$").exec(e);if(h){if(n=parseInt(h[1]),n<0?n=(360- -1*n%360)%360:n>360&&(n=n%360),n/=360,a=parseFloat(h[2]),a<0||a>100||(a=a/100,i=parseFloat(h[3]),i<0||i>100)||(i=i/100,o=h[4],o!==void 0&&(o=parseFloat(o),o<0||o>1)))return;if(a===0)u=c=f=Math.round(i*255);else{var g=i<.5?i*(1+a):i+a-i*a,p=2*i-g;u=Math.round(255*d(p,g,n+1/3)),c=Math.round(255*d(p,g,n)),f=Math.round(255*d(p,g,n-1/3))}t=[u,c,f,o]}return t},W_=function(e){var t,n=new RegExp("^"+O_+"$").exec(e);if(n){t=[];for(var a=[],i=1;i<=3;i++){var o=n[i];if(o[o.length-1]==="%"&&(a[i]=!0),o=parseFloat(o),a[i]&&(o=o/100*255),o<0||o>255)return;t.push(Math.floor(o))}var u=a[1]||a[2]||a[3],c=a[1]&&a[2]&&a[3];if(u&&!c)return;var f=n[4];if(f!==void 0){if(f=parseFloat(f),f<0||f>1)return;t.push(f)}}return t},G_=function(e){return H_[e.toLowerCase()]},d1=function(e){return(wt(e)?e:null)||G_(e)||j_(e)||W_(e)||q_(e)},H_={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},h1=function(e){for(var t=e.map,n=e.keys,a=n.length,i=0;i<a;i++){var o=n[i];if(dt(o))throw Error("Tried to set map with object key");i<n.length-1?(t[o]==null&&(t[o]={}),t=t[o]):t[o]=e.value}},v1=function(e){for(var t=e.map,n=e.keys,a=n.length,i=0;i<a;i++){var o=n[i];if(dt(o))throw Error("Tried to get map with object key");if(t=t[o],t==null)return t}return t},Wu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ko(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Wf,pm;function Co(){if(pm)return Wf;pm=1;function r(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return Wf=r,Wf}var Gf,gm;function K_(){if(gm)return Gf;gm=1;var r=typeof Wu=="object"&&Wu&&Wu.Object===Object&&Wu;return Gf=r,Gf}var Hf,mm;function Dl(){if(mm)return Hf;mm=1;var r=K_(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=r||e||Function("return this")();return Hf=t,Hf}var Kf,ym;function X_(){if(ym)return Kf;ym=1;var r=Dl(),e=function(){return r.Date.now()};return Kf=e,Kf}var Xf,wm;function Z_(){if(wm)return Xf;wm=1;var r=/\s/;function e(t){for(var n=t.length;n--&&r.test(t.charAt(n)););return n}return Xf=e,Xf}var Zf,xm;function Y_(){if(xm)return Zf;xm=1;var r=Z_(),e=/^\s+/;function t(n){return n&&n.slice(0,r(n)+1).replace(e,"")}return Zf=t,Zf}var Yf,bm;function Hh(){if(bm)return Yf;bm=1;var r=Dl(),e=r.Symbol;return Yf=e,Yf}var Qf,_m;function Q_(){if(_m)return Qf;_m=1;var r=Hh(),e=Object.prototype,t=e.hasOwnProperty,n=e.toString,a=r?r.toStringTag:void 0;function i(o){var u=t.call(o,a),c=o[a];try{o[a]=void 0;var f=!0}catch{}var d=n.call(o);return f&&(u?o[a]=c:delete o[a]),d}return Qf=i,Qf}var Jf,Em;function J_(){if(Em)return Jf;Em=1;var r=Object.prototype,e=r.toString;function t(n){return e.call(n)}return Jf=t,Jf}var ed,Sm;function p1(){if(Sm)return ed;Sm=1;var r=Hh(),e=Q_(),t=J_(),n="[object Null]",a="[object Undefined]",i=r?r.toStringTag:void 0;function o(u){return u==null?u===void 0?a:n:i&&i in Object(u)?e(u):t(u)}return ed=o,ed}var td,km;function eE(){if(km)return td;km=1;function r(e){return e!=null&&typeof e=="object"}return td=r,td}var rd,Cm;function To(){if(Cm)return rd;Cm=1;var r=p1(),e=eE(),t="[object Symbol]";function n(a){return typeof a=="symbol"||e(a)&&r(a)==t}return rd=n,rd}var nd,Tm;function tE(){if(Tm)return nd;Tm=1;var r=Y_(),e=Co(),t=To(),n=NaN,a=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,u=parseInt;function c(f){if(typeof f=="number")return f;if(t(f))return n;if(e(f)){var d=typeof f.valueOf=="function"?f.valueOf():f;f=e(d)?d+"":d}if(typeof f!="string")return f===0?f:+f;f=r(f);var h=i.test(f);return h||o.test(f)?u(f.slice(2),h?2:8):a.test(f)?n:+f}return nd=c,nd}var ad,Pm;function rE(){if(Pm)return ad;Pm=1;var r=Co(),e=X_(),t=tE(),n="Expected a function",a=Math.max,i=Math.min;function o(u,c,f){var d,h,g,p,m,y,x=0,b=!1,_=!1,E=!0;if(typeof u!="function")throw new TypeError(n);c=t(c)||0,r(f)&&(b=!!f.leading,_="maxWait"in f,g=_?a(t(f.maxWait)||0,c):g,E="trailing"in f?!!f.trailing:E);function C(F){var T=d,G=h;return d=h=void 0,x=F,p=u.apply(G,T),p}function B(F){return x=F,m=setTimeout(z,c),b?C(F):p}function N(F){var T=F-y,G=F-x,Q=c-T;return _?i(Q,g-G):Q}function A(F){var T=F-y,G=F-x;return y===void 0||T>=c||T<0||_&&G>=g}function z(){var F=e();if(A(F))return M(F);m=setTimeout(z,N(F))}function M(F){return m=void 0,E&&d?C(F):(d=h=void 0,p)}function V(){m!==void 0&&clearTimeout(m),x=0,d=y=h=m=void 0}function q(){return m===void 0?p:M(e())}function I(){var F=e(),T=A(F);if(d=arguments,h=this,y=F,T){if(m===void 0)return B(y);if(_)return clearTimeout(m),m=setTimeout(z,c),C(y)}return m===void 0&&(m=setTimeout(z,c)),p}return I.cancel=V,I.flush=q,I}return ad=o,ad}var nE=rE(),Po=ko(nE),id=Yt?Yt.performance:null,g1=id&&id.now?function(){return id.now()}:function(){return Date.now()},aE=(function(){if(Yt){if(Yt.requestAnimationFrame)return function(r){Yt.requestAnimationFrame(r)};if(Yt.mozRequestAnimationFrame)return function(r){Yt.mozRequestAnimationFrame(r)};if(Yt.webkitRequestAnimationFrame)return function(r){Yt.webkitRequestAnimationFrame(r)};if(Yt.msRequestAnimationFrame)return function(r){Yt.msRequestAnimationFrame(r)}}return function(r){r&&setTimeout(function(){r(g1())},1e3/60)}})(),yl=function(e){return aE(e)},Un=g1,Xa=9261,m1=65599,Vi=5381,y1=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Xa,n=t,a;a=e.next(),!a.done;)n=n*m1+a.value|0;return n},co=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Xa;return t*m1+e|0},fo=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Vi;return(t<<5)+t+e|0},iE=function(e,t){return e*2097152+t},fa=function(e){return e[0]*2097152+e[1]},Gu=function(e,t){return[co(e[0],t[0]),fo(e[1],t[1])]},Rm=function(e,t){var n={value:0,done:!1},a=0,i=e.length,o={next:function(){return a<i?n.value=e[a++]:n.done=!0,n}};return y1(o,t)},Qa=function(e,t){var n={value:0,done:!1},a=0,i=e.length,o={next:function(){return a<i?n.value=e.charCodeAt(a++):n.done=!0,n}};return y1(o,t)},w1=function(){return sE(arguments)},sE=function(e){for(var t,n=0;n<e.length;n++){var a=e[n];n===0?t=Qa(a):t=Qa(a,t)}return t};function oE(r,e,t,n,a){var i=a*Math.PI/180,o=Math.cos(i)*(r-t)-Math.sin(i)*(e-n)+t,u=Math.sin(i)*(r-t)+Math.cos(i)*(e-n)+n;return{x:o,y:u}}var uE=function(e,t,n,a,i,o){return{x:(e-n)*i+n,y:(t-a)*o+a}};function lE(r,e,t){if(t===0)return r;var n=(e.x1+e.x2)/2,a=(e.y1+e.y2)/2,i=e.w/e.h,o=1/i,u=oE(r.x,r.y,n,a,t),c=uE(u.x,u.y,n,a,i,o);return{x:c.x,y:c.y}}var Bm=!0,cE=console.warn!=null,fE=console.trace!=null,Kh=Number.MAX_SAFE_INTEGER||9007199254740991,x1=function(){return!0},wl=function(){return!1},Am=function(){return 0},Xh=function(){},At=function(e){throw new Error(e)},b1=function(e){if(e!==void 0)Bm=!!e;else return Bm},gt=function(e){b1()&&(cE?console.warn(e):(console.log(e),fE&&console.trace()))},dE=function(e){return et({},e)},Sn=function(e){return e==null?e:wt(e)?e.slice():dt(e)?dE(e):e},hE=function(e){return e.slice()},_1=function(e,t){for(t=e="";e++<36;t+=e*51&52?(e^15?8^Math.random()*(e^20?16:4):4).toString(16):"-");return t},vE={},E1=function(){return vE},dr=function(e){var t=Object.keys(e);return function(n){for(var a={},i=0;i<t.length;i++){var o=t[i],u=n==null?void 0:n[o];a[o]=u===void 0?e[o]:u}return a}},xa=function(e,t,n){for(var a=e.length-1;a>=0;a--)e[a]===t&&e.splice(a,1)},Zh=function(e){e.splice(0,e.length)},pE=function(e,t){for(var n=0;n<t.length;n++){var a=t[n];e.push(a)}},Mr=function(e,t,n){return n&&(t=c1(n,t)),e[t]},zn=function(e,t,n,a){n&&(t=c1(n,t)),e[t]=a},gE=(function(){function r(){ka(this,r),this._obj={}}return Ca(r,[{key:"set",value:function(t,n){return this._obj[t]=n,this}},{key:"delete",value:function(t){return this._obj[t]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(t){return this._obj[t]!==void 0}},{key:"get",value:function(t){return this._obj[t]}}])})(),Fn=typeof Map<"u"?Map:gE,mE="undefined",yE=(function(){function r(e){if(ka(this,r),this._obj=Object.create(null),this.size=0,e!=null){var t;e.instanceString!=null&&e.instanceString()===this.instanceString()?t=e.toArray():t=e;for(var n=0;n<t.length;n++)this.add(t[n])}}return Ca(r,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(t){var n=this._obj;n[t]!==1&&(n[t]=1,this.size++)}},{key:"delete",value:function(t){var n=this._obj;n[t]===1&&(n[t]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(t){return this._obj[t]===1}},{key:"toArray",value:function(){var t=this;return Object.keys(this._obj).filter(function(n){return t.has(n)})}},{key:"forEach",value:function(t,n){return this.toArray().forEach(t,n)}}])})(),Ji=(typeof Set>"u"?"undefined":Jt(Set))!==mE?Set:yE,Il=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0||t===void 0||!Wh(e)){At("An element must have a core reference and parameters set");return}var a=t.group;if(a==null&&(t.data&&t.data.source!=null&&t.data.target!=null?a="edges":a="nodes"),a!=="nodes"&&a!=="edges"){At("An element must be of type `nodes` or `edges`; you specified `"+a+"`");return}this.length=1,this[0]=this;var i=this._private={cy:e,single:!0,data:t.data||{},position:t.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:a,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!t.selected,selectable:t.selectable===void 0?!0:!!t.selectable,locked:!!t.locked,grabbed:!1,grabbable:t.grabbable===void 0?!0:!!t.grabbable,pannable:t.pannable===void 0?a==="edges":!!t.pannable,active:!1,classes:new Ji,animation:{current:[],queue:[]},rscratch:{},scratch:t.scratch||{},edges:[],children:[],parent:t.parent&&t.parent.isNode()?t.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(i.position.x==null&&(i.position.x=0),i.position.y==null&&(i.position.y=0),t.renderedPosition){var o=t.renderedPosition,u=e.pan(),c=e.zoom();i.position={x:(o.x-u.x)/c,y:(o.y-u.y)/c}}var f=[];wt(t.classes)?f=t.classes:Ye(t.classes)&&(f=t.classes.split(/\s+/));for(var d=0,h=f.length;d<h;d++){var g=f[d];!g||g===""||i.classes.add(g)}this.createEmitter(),(n===void 0||n)&&this.restore();var p=t.style||t.css;p&&(gt("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(p))},Dm=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(n,a,i){var o;dt(n)&&!Hr(n)&&(o=n,n=o.roots||o.root,a=o.visit,i=o.directed),i=arguments.length===2&&!zt(a)?a:i,a=zt(a)?a:function(){};for(var u=this._private.cy,c=n=Ye(n)?this.filter(n):n,f=[],d=[],h={},g={},p={},m=0,y,x=this.byGroup(),b=x.nodes,_=x.edges,E=0;E<c.length;E++){var C=c[E],B=C.id();C.isNode()&&(f.unshift(C),e.bfs&&(p[B]=!0,d.push(C)),g[B]=0)}for(var N=function(){var F=e.bfs?f.shift():f.pop(),T=F.id();if(e.dfs){if(p[T])return 0;p[T]=!0,d.push(F)}var G=g[T],Q=h[T],W=Q!=null?Q.source():null,X=Q!=null?Q.target():null,Z=Q==null?void 0:F.same(W)?X[0]:W[0],te;if(te=a(F,Q,Z,m++,G),te===!0)return y=F,1;if(te===!1)return 1;for(var L=F.connectedEdges().filter(function(we){return(!i||we.source().same(F))&&_.has(we)}),U=0;U<L.length;U++){var oe=L[U],ie=oe.connectedNodes().filter(function(we){return!we.same(F)&&b.has(we)}),ne=ie.id();ie.length!==0&&!p[ne]&&(ie=ie[0],f.push(ie),e.bfs&&(p[ne]=!0,d.push(ie)),h[ne]=oe,g[ne]=g[T]+1)}},A;f.length!==0&&(A=N(),!(A!==0&&A===1)););for(var z=u.collection(),M=0;M<d.length;M++){var V=d[M],q=h[V.id()];q!=null&&z.push(q),z.push(V)}return{path:u.collection(z),found:u.collection(y)}}},ho={breadthFirstSearch:Dm({bfs:!0}),depthFirstSearch:Dm({dfs:!0})};ho.bfs=ho.breadthFirstSearch;ho.dfs=ho.depthFirstSearch;var il={exports:{}},wE=il.exports,Im;function xE(){return Im||(Im=1,(function(r,e){(function(){var t,n,a,i,o,u,c,f,d,h,g,p,m,y,x;a=Math.floor,h=Math.min,n=function(b,_){return b<_?-1:b>_?1:0},d=function(b,_,E,C,B){var N;if(E==null&&(E=0),B==null&&(B=n),E<0)throw new Error("lo must be non-negative");for(C==null&&(C=b.length);E<C;)N=a((E+C)/2),B(_,b[N])<0?C=N:E=N+1;return[].splice.apply(b,[E,E-E].concat(_)),_},u=function(b,_,E){return E==null&&(E=n),b.push(_),y(b,0,b.length-1,E)},o=function(b,_){var E,C;return _==null&&(_=n),E=b.pop(),b.length?(C=b[0],b[0]=E,x(b,0,_)):C=E,C},f=function(b,_,E){var C;return E==null&&(E=n),C=b[0],b[0]=_,x(b,0,E),C},c=function(b,_,E){var C;return E==null&&(E=n),b.length&&E(b[0],_)<0&&(C=[b[0],_],_=C[0],b[0]=C[1],x(b,0,E)),_},i=function(b,_){var E,C,B,N,A,z;for(_==null&&(_=n),N=(function(){z=[];for(var M=0,V=a(b.length/2);0<=V?M<V:M>V;0<=V?M++:M--)z.push(M);return z}).apply(this).reverse(),A=[],C=0,B=N.length;C<B;C++)E=N[C],A.push(x(b,E,_));return A},m=function(b,_,E){var C;if(E==null&&(E=n),C=b.indexOf(_),C!==-1)return y(b,0,C,E),x(b,C,E)},g=function(b,_,E){var C,B,N,A,z;if(E==null&&(E=n),B=b.slice(0,_),!B.length)return B;for(i(B,E),z=b.slice(_),N=0,A=z.length;N<A;N++)C=z[N],c(B,C,E);return B.sort(E).reverse()},p=function(b,_,E){var C,B,N,A,z,M,V,q,I;if(E==null&&(E=n),_*10<=b.length){if(N=b.slice(0,_).sort(E),!N.length)return N;for(B=N[N.length-1],V=b.slice(_),A=0,M=V.length;A<M;A++)C=V[A],E(C,B)<0&&(d(N,C,0,null,E),N.pop(),B=N[N.length-1]);return N}for(i(b,E),I=[],z=0,q=h(_,b.length);0<=q?z<q:z>q;0<=q?++z:--z)I.push(o(b,E));return I},y=function(b,_,E,C){var B,N,A;for(C==null&&(C=n),B=b[E];E>_;){if(A=E-1>>1,N=b[A],C(B,N)<0){b[E]=N,E=A;continue}break}return b[E]=B},x=function(b,_,E){var C,B,N,A,z;for(E==null&&(E=n),B=b.length,z=_,N=b[_],C=2*_+1;C<B;)A=C+1,A<B&&!(E(b[C],b[A])<0)&&(C=A),b[_]=b[C],_=C,C=2*_+1;return b[_]=N,y(b,z,_,E)},t=(function(){b.push=u,b.pop=o,b.replace=f,b.pushpop=c,b.heapify=i,b.updateItem=m,b.nlargest=g,b.nsmallest=p;function b(_){this.cmp=_??n,this.nodes=[]}return b.prototype.push=function(_){return u(this.nodes,_,this.cmp)},b.prototype.pop=function(){return o(this.nodes,this.cmp)},b.prototype.peek=function(){return this.nodes[0]},b.prototype.contains=function(_){return this.nodes.indexOf(_)!==-1},b.prototype.replace=function(_){return f(this.nodes,_,this.cmp)},b.prototype.pushpop=function(_){return c(this.nodes,_,this.cmp)},b.prototype.heapify=function(){return i(this.nodes,this.cmp)},b.prototype.updateItem=function(_){return m(this.nodes,_,this.cmp)},b.prototype.clear=function(){return this.nodes=[]},b.prototype.empty=function(){return this.nodes.length===0},b.prototype.size=function(){return this.nodes.length},b.prototype.clone=function(){var _;return _=new b,_.nodes=this.nodes.slice(0),_},b.prototype.toArray=function(){return this.nodes.slice(0)},b.prototype.insert=b.prototype.push,b.prototype.top=b.prototype.peek,b.prototype.front=b.prototype.peek,b.prototype.has=b.prototype.contains,b.prototype.copy=b.prototype.clone,b})(),(function(b,_){return r.exports=_()})(this,function(){return t})}).call(wE)})(il)),il.exports}var sd,Lm;function bE(){return Lm||(Lm=1,sd=xE()),sd}var _E=bE(),Ro=ko(_E),EE=dr({root:null,weight:function(e){return 1},directed:!1}),SE={dijkstra:function(e){if(!dt(e)){var t=arguments;e={root:t[0],weight:t[1],directed:t[2]}}var n=EE(e),a=n.root,i=n.weight,o=n.directed,u=this,c=i,f=Ye(a)?this.filter(a)[0]:a[0],d={},h={},g={},p=this.byGroup(),m=p.nodes,y=p.edges;y.unmergeBy(function(G){return G.isLoop()});for(var x=function(Q){return d[Q.id()]},b=function(Q,W){d[Q.id()]=W,_.updateItem(Q)},_=new Ro(function(G,Q){return x(G)-x(Q)}),E=0;E<m.length;E++){var C=m[E];d[C.id()]=C.same(f)?0:1/0,_.push(C)}for(var B=function(Q,W){for(var X=(o?Q.edgesTo(W):Q.edgesWith(W)).intersect(y),Z=1/0,te,L=0;L<X.length;L++){var U=X[L],oe=c(U);(oe<Z||!te)&&(Z=oe,te=U)}return{edge:te,dist:Z}};_.size()>0;){var N=_.pop(),A=x(N),z=N.id();if(g[z]=A,A!==1/0)for(var M=N.neighborhood().intersect(m),V=0;V<M.length;V++){var q=M[V],I=q.id(),F=B(N,q),T=A+F.dist;T<x(q)&&(b(q,T),h[I]={node:N,edge:F.edge})}}return{distanceTo:function(Q){var W=Ye(Q)?m.filter(Q)[0]:Q[0];return g[W.id()]},pathTo:function(Q){var W=Ye(Q)?m.filter(Q)[0]:Q[0],X=[],Z=W,te=Z.id();if(W.length>0)for(X.unshift(W);h[te];){var L=h[te];X.unshift(L.edge),X.unshift(L.node),Z=L.node,te=Z.id()}return u.spawn(X)}}}},kE={kruskal:function(e){e=e||function(E){return 1};for(var t=this.byGroup(),n=t.nodes,a=t.edges,i=n.length,o=new Array(i),u=n,c=function(C){for(var B=0;B<o.length;B++){var N=o[B];if(N.has(C))return B}},f=0;f<i;f++)o[f]=this.spawn(n[f]);for(var d=a.sort(function(E,C){return e(E)-e(C)}),h=0;h<d.length;h++){var g=d[h],p=g.source()[0],m=g.target()[0],y=c(p),x=c(m),b=o[y],_=o[x];y!==x&&(u.merge(g),b.merge(_),o.splice(x,1))}return u}},CE=dr({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),TE={aStar:function(e){var t=this.cy(),n=CE(e),a=n.root,i=n.goal,o=n.heuristic,u=n.directed,c=n.weight;a=t.collection(a)[0],i=t.collection(i)[0];var f=a.id(),d=i.id(),h={},g={},p={},m=new Ro(function(te,L){return g[te.id()]-g[L.id()]}),y=new Ji,x={},b={},_=function(L,U){m.push(L),y.add(U)},E,C,B=function(){E=m.pop(),C=E.id(),y.delete(C)},N=function(L){return y.has(L)};_(a,f),h[f]=0,g[f]=o(a);for(var A=0;m.size()>0;){if(B(),A++,C===d){for(var z=[],M=i,V=d,q=b[V];z.unshift(M),q!=null&&z.unshift(q),M=x[V],M!=null;)V=M.id(),q=b[V];return{found:!0,distance:h[C],path:this.spawn(z),steps:A}}p[C]=!0;for(var I=E._private.edges,F=0;F<I.length;F++){var T=I[F];if(this.hasElementWithId(T.id())&&!(u&&T.data("source")!==C)){var G=T.source(),Q=T.target(),W=G.id()!==C?G:Q,X=W.id();if(this.hasElementWithId(X)&&!p[X]){var Z=h[C]+c(T);if(!N(X)){h[X]=Z,g[X]=Z+o(W),_(W,X),x[X]=E,b[X]=T;continue}Z<h[X]&&(h[X]=Z,g[X]=Z+o(W),x[X]=E,b[X]=T)}}}}return{found:!1,distance:void 0,path:void 0,steps:A}}},PE=dr({weight:function(e){return 1},directed:!1}),RE={floydWarshall:function(e){for(var t=this.cy(),n=PE(e),a=n.weight,i=n.directed,o=a,u=this.byGroup(),c=u.nodes,f=u.edges,d=c.length,h=d*d,g=function(oe){return c.indexOf(oe)},p=function(oe){return c[oe]},m=new Array(h),y=0;y<h;y++){var x=y%d,b=(y-x)/d;b===x?m[y]=0:m[y]=1/0}for(var _=new Array(h),E=new Array(h),C=0;C<f.length;C++){var B=f[C],N=B.source()[0],A=B.target()[0];if(N!==A){var z=g(N),M=g(A),V=z*d+M,q=o(B);if(m[V]>q&&(m[V]=q,_[V]=M,E[V]=B),!i){var I=M*d+z;!i&&m[I]>q&&(m[I]=q,_[I]=z,E[I]=B)}}}for(var F=0;F<d;F++)for(var T=0;T<d;T++)for(var G=T*d+F,Q=0;Q<d;Q++){var W=T*d+Q,X=F*d+Q;m[G]+m[X]<m[W]&&(m[W]=m[G]+m[X],_[W]=_[G])}var Z=function(oe){return(Ye(oe)?t.filter(oe):oe)[0]},te=function(oe){return g(Z(oe))},L={distance:function(oe,ie){var ne=te(oe),we=te(ie);return m[ne*d+we]},path:function(oe,ie){var ne=te(oe),we=te(ie),Pe=p(ne);if(ne===we)return Pe.collection();if(_[ne*d+we]==null)return t.collection();var Ce=t.collection(),ge=ne,ce;for(Ce.merge(Pe);ne!==we;)ge=ne,ne=_[ne*d+we],ce=E[ge*d+ne],Ce.merge(ce),Ce.merge(p(ne));return Ce}};return L}},BE=dr({weight:function(e){return 1},directed:!1,root:null}),AE={bellmanFord:function(e){var t=this,n=BE(e),a=n.weight,i=n.directed,o=n.root,u=a,c=this,f=this.cy(),d=this.byGroup(),h=d.edges,g=d.nodes,p=g.length,m=new Fn,y=!1,x=[];o=f.collection(o)[0],h.unmergeBy(function(Y){return Y.isLoop()});for(var b=h.length,_=function(K){var ae=m.get(K.id());return ae||(ae={},m.set(K.id(),ae)),ae},E=function(K){return(Ye(K)?f.$(K):K)[0]},C=function(K){return _(E(K)).dist},B=function(K){for(var ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o,he=E(K),me=[],se=he;;){if(se==null)return t.spawn();var Be=_(se),De=Be.edge,Ae=Be.pred;if(me.unshift(se[0]),se.same(ae)&&me.length>0)break;De!=null&&me.unshift(De),se=Ae}return c.spawn(me)},N=0;N<p;N++){var A=g[N],z=_(A);A.same(o)?z.dist=0:z.dist=1/0,z.pred=null,z.edge=null}for(var M=!1,V=function(K,ae,he,me,se,Be){var De=me.dist+Be;De<se.dist&&!he.same(me.edge)&&(se.dist=De,se.pred=K,se.edge=he,M=!0)},q=1;q<p;q++){M=!1;for(var I=0;I<b;I++){var F=h[I],T=F.source(),G=F.target(),Q=u(F),W=_(T),X=_(G);V(T,G,F,W,X,Q),i||V(G,T,F,X,W,Q)}if(!M)break}if(M)for(var Z=[],te=0;te<b;te++){var L=h[te],U=L.source(),oe=L.target(),ie=u(L),ne=_(U).dist,we=_(oe).dist;if(ne+ie<we||!i&&we+ie<ne)if(y||(gt("Graph contains a negative weight cycle for Bellman-Ford"),y=!0),e.findNegativeWeightCycles!==!1){var Pe=[];ne+ie<we&&Pe.push(U),!i&&we+ie<ne&&Pe.push(oe);for(var Ce=Pe.length,ge=0;ge<Ce;ge++){var ce=Pe[ge],de=[ce];de.push(_(ce).edge);for(var be=_(ce).pred;de.indexOf(be)===-1;)de.push(be),de.push(_(be).edge),be=_(be).pred;de=de.slice(de.indexOf(be));for(var Re=de[0].id(),D=0,ve=2;ve<de.length;ve+=2)de[ve].id()<Re&&(Re=de[ve].id(),D=ve);de=de.slice(D).concat(de.slice(0,D)),de.push(de[0]);var pe=de.map(function(Y){return Y.id()}).join(",");Z.indexOf(pe)===-1&&(x.push(c.spawn(de)),Z.push(pe))}}else break}return{distanceTo:C,pathTo:B,hasNegativeWeightCycle:y,negativeWeightCycles:x}}},DE=Math.sqrt(2),IE=function(e,t,n){n.length===0&&At("Karger-Stein must be run on a connected (sub)graph");for(var a=n[e],i=a[1],o=a[2],u=t[i],c=t[o],f=n,d=f.length-1;d>=0;d--){var h=f[d],g=h[1],p=h[2];(t[g]===u&&t[p]===c||t[g]===c&&t[p]===u)&&f.splice(d,1)}for(var m=0;m<f.length;m++){var y=f[m];y[1]===c?(f[m]=y.slice(),f[m][1]=u):y[2]===c&&(f[m]=y.slice(),f[m][2]=u)}for(var x=0;x<t.length;x++)t[x]===c&&(t[x]=u);return f},od=function(e,t,n,a){for(;n>a;){var i=Math.floor(Math.random()*t.length);t=IE(i,e,t),n--}return t},LE={kargerStein:function(){var e=this,t=this.byGroup(),n=t.nodes,a=t.edges;a.unmergeBy(function(X){return X.isLoop()});var i=n.length,o=a.length,u=Math.ceil(Math.pow(Math.log(i)/Math.LN2,2)),c=Math.floor(i/DE);if(i<2){At("At least 2 nodes are required for Karger-Stein algorithm");return}for(var f=[],d=0;d<o;d++){var h=a[d];f.push([d,n.indexOf(h.source()),n.indexOf(h.target())])}for(var g=1/0,p=[],m=new Array(i),y=new Array(i),x=new Array(i),b=function(Z,te){for(var L=0;L<i;L++)te[L]=Z[L]},_=0;_<=u;_++){for(var E=0;E<i;E++)y[E]=E;var C=od(y,f.slice(),i,c),B=C.slice();b(y,x);var N=od(y,C,c,2),A=od(x,B,c,2);N.length<=A.length&&N.length<g?(g=N.length,p=N,b(y,m)):A.length<=N.length&&A.length<g&&(g=A.length,p=A,b(x,m))}for(var z=this.spawn(p.map(function(X){return a[X[0]]})),M=this.spawn(),V=this.spawn(),q=m[0],I=0;I<m.length;I++){var F=m[I],T=n[I];F===q?M.merge(T):V.merge(T)}var G=function(Z){var te=e.spawn();return Z.forEach(function(L){te.merge(L),L.connectedEdges().forEach(function(U){e.contains(U)&&!z.contains(U)&&te.merge(U)})}),te},Q=[G(M),G(V)],W={cut:z,components:Q,partition1:M,partition2:V};return W}},ud,NE=function(e){return{x:e.x,y:e.y}},Ll=function(e,t,n){return{x:e.x*t+n.x,y:e.y*t+n.y}},S1=function(e,t,n){return{x:(e.x-n.x)/t,y:(e.y-n.y)/t}},ji=function(e){return{x:e[0],y:e[1]}},OE=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=1/0,i=t;i<n;i++){var o=e[i];isFinite(o)&&(a=Math.min(o,a))}return a},ME=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=-1/0,i=t;i<n;i++){var o=e[i];isFinite(o)&&(a=Math.max(o,a))}return a},zE=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=0,i=0,o=t;o<n;o++){var u=e[o];isFinite(u)&&(a+=u,i++)}return a/i},FE=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;a?e=e.slice(t,n):(n<e.length&&e.splice(n,e.length-n),t>0&&e.splice(0,t));for(var u=0,c=e.length-1;c>=0;c--){var f=e[c];o?isFinite(f)||(e[c]=-1/0,u++):e.splice(c,1)}i&&e.sort(function(g,p){return g-p});var d=e.length,h=Math.floor(d/2);return d%2!==0?e[h+1+u]:(e[h-1+u]+e[h+u])/2},UE=function(e){return Math.PI*e/180},Hu=function(e,t){return Math.atan2(t,e)-Math.PI/2},Yh=Math.log2||function(r){return Math.log(r)/Math.log(2)},Qh=function(e){return e>0?1:e<0?-1:0},Ja=function(e,t){return Math.sqrt(Ha(e,t))},Ha=function(e,t){var n=t.x-e.x,a=t.y-e.y;return n*n+a*a},$E=function(e){for(var t=e.length,n=0,a=0;a<t;a++)n+=e[a];for(var i=0;i<t;i++)e[i]=e[i]/n;return e},ar=function(e,t,n,a){return(1-a)*(1-a)*e+2*(1-a)*a*t+a*a*n},Gi=function(e,t,n,a){return{x:ar(e.x,t.x,n.x,a),y:ar(e.y,t.y,n.y,a)}},VE=function(e,t,n,a){var i={x:t.x-e.x,y:t.y-e.y},o=Ja(e,t),u={x:i.x/o,y:i.y/o};return n=n??0,a=a??n*o,{x:e.x+u.x*a,y:e.y+u.y*a}},vo=function(e,t,n){return Math.max(e,Math.min(n,t))},Rr=function(e){if(e==null)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(e.x1!=null&&e.y1!=null){if(e.x2!=null&&e.y2!=null&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(e.w!=null&&e.h!=null&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},jE=function(e){return{x1:e.x1,x2:e.x2,w:e.w,y1:e.y1,y2:e.y2,h:e.h}},qE=function(e){e.x1=1/0,e.y1=1/0,e.x2=-1/0,e.y2=-1/0,e.w=0,e.h=0},WE=function(e,t){e.x1=Math.min(e.x1,t.x1),e.x2=Math.max(e.x2,t.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,t.y1),e.y2=Math.max(e.y2,t.y2),e.h=e.y2-e.y1},k1=function(e,t,n){e.x1=Math.min(e.x1,t),e.x2=Math.max(e.x2,t),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,n),e.y2=Math.max(e.y2,n),e.h=e.y2-e.y1},sl=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.x1-=t,e.x2+=t,e.y1-=t,e.y2+=t,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},ol=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0],n,a,i,o;if(t.length===1)n=a=i=o=t[0];else if(t.length===2)n=i=t[0],o=a=t[1];else if(t.length===4){var u=Ht(t,4);n=u[0],a=u[1],i=u[2],o=u[3]}return e.x1-=o,e.x2+=a,e.y1-=n,e.y2+=i,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},Nm=function(e,t){e.x1=t.x1,e.y1=t.y1,e.x2=t.x2,e.y2=t.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},Jh=function(e,t){return!(e.x1>t.x2||t.x1>e.x2||e.x2<t.x1||t.x2<e.x1||e.y2<t.y1||t.y2<e.y1||e.y1>t.y2||t.y1>e.y2)},pa=function(e,t,n){return e.x1<=t&&t<=e.x2&&e.y1<=n&&n<=e.y2},Om=function(e,t){return pa(e,t.x,t.y)},C1=function(e,t){return pa(e,t.x1,t.y1)&&pa(e,t.x2,t.y2)},GE=(ud=Math.hypot)!==null&&ud!==void 0?ud:function(r,e){return Math.sqrt(r*r+e*e)};function HE(r,e){if(r.length<3)throw new Error("Need at least 3 vertices");var t=function(z,M){return{x:z.x+M.x,y:z.y+M.y}},n=function(z,M){return{x:z.x-M.x,y:z.y-M.y}},a=function(z,M){return{x:z.x*M,y:z.y*M}},i=function(z,M){return z.x*M.y-z.y*M.x},o=function(z){var M=GE(z.x,z.y);return M===0?{x:0,y:0}:{x:z.x/M,y:z.y/M}},u=function(z){for(var M=0,V=0;V<z.length;V++){var q=z[V],I=z[(V+1)%z.length];M+=q.x*I.y-I.x*q.y}return M/2},c=function(z,M,V,q){var I=n(M,z),F=n(q,V),T=i(I,F);if(Math.abs(T)<1e-9)return t(z,a(I,.5));var G=i(n(V,z),F)/T;return t(z,a(I,G))},f=r.map(function(A){return{x:A.x,y:A.y}});u(f)<0&&f.reverse();for(var d=f.length,h=[],g=0;g<d;g++){var p=f[g],m=f[(g+1)%d],y=n(m,p),x=o({x:y.y,y:-y.x});h.push(x)}for(var b=h.map(function(A,z){var M=t(f[z],a(A,e)),V=t(f[(z+1)%d],a(A,e));return{p1:M,p2:V}}),_=[],E=0;E<d;E++){var C=b[(E-1+d)%d],B=b[E],N=c(C.p1,C.p2,B.p1,B.p2);_.push(N)}return _}function KE(r,e,t,n,a,i){var o=nS(r,e,t,n,a),u=HE(o,i),c=Rr();return u.forEach(function(f){return k1(c,f.x,f.y)}),c}var T1=function(e,t,n,a,i,o,u){var c=arguments.length>7&&arguments[7]!==void 0?arguments[7]:"auto",f=c==="auto"?ba(i,o):c,d=i/2,h=o/2;f=Math.min(f,d,h);var g=f!==d,p=f!==h,m;if(g){var y=n-d+f-u,x=a-h-u,b=n+d-f+u,_=x;if(m=ga(e,t,n,a,y,x,b,_,!1),m.length>0)return m}if(p){var E=n+d+u,C=a-h+f-u,B=E,N=a+h-f+u;if(m=ga(e,t,n,a,E,C,B,N,!1),m.length>0)return m}if(g){var A=n-d+f-u,z=a+h+u,M=n+d-f+u,V=z;if(m=ga(e,t,n,a,A,z,M,V,!1),m.length>0)return m}if(p){var q=n-d-u,I=a-h+f-u,F=q,T=a+h-f+u;if(m=ga(e,t,n,a,q,I,F,T,!1),m.length>0)return m}var G;{var Q=n-d+f,W=a-h+f;if(G=no(e,t,n,a,Q,W,f+u),G.length>0&&G[0]<=Q&&G[1]<=W)return[G[0],G[1]]}{var X=n+d-f,Z=a-h+f;if(G=no(e,t,n,a,X,Z,f+u),G.length>0&&G[0]>=X&&G[1]<=Z)return[G[0],G[1]]}{var te=n+d-f,L=a+h-f;if(G=no(e,t,n,a,te,L,f+u),G.length>0&&G[0]>=te&&G[1]>=L)return[G[0],G[1]]}{var U=n-d+f,oe=a+h-f;if(G=no(e,t,n,a,U,oe,f+u),G.length>0&&G[0]<=U&&G[1]>=oe)return[G[0],G[1]]}return[]},XE=function(e,t,n,a,i,o,u){var c=u,f=Math.min(n,i),d=Math.max(n,i),h=Math.min(a,o),g=Math.max(a,o);return f-c<=e&&e<=d+c&&h-c<=t&&t<=g+c},ZE=function(e,t,n,a,i,o,u,c,f){var d={x1:Math.min(n,u,i)-f,x2:Math.max(n,u,i)+f,y1:Math.min(a,c,o)-f,y2:Math.max(a,c,o)+f};return!(e<d.x1||e>d.x2||t<d.y1||t>d.y2)},YE=function(e,t,n,a){n-=a;var i=t*t-4*e*n;if(i<0)return[];var o=Math.sqrt(i),u=2*e,c=(-t+o)/u,f=(-t-o)/u;return[c,f]},QE=function(e,t,n,a,i){var o=1e-5;e===0&&(e=o),t/=e,n/=e,a/=e;var u,c,f,d,h,g,p,m;if(c=(3*n-t*t)/9,f=-(27*a)+t*(9*n-2*(t*t)),f/=54,u=c*c*c+f*f,i[1]=0,p=t/3,u>0){h=f+Math.sqrt(u),h=h<0?-Math.pow(-h,1/3):Math.pow(h,1/3),g=f-Math.sqrt(u),g=g<0?-Math.pow(-g,1/3):Math.pow(g,1/3),i[0]=-p+h+g,p+=(h+g)/2,i[4]=i[2]=-p,p=Math.sqrt(3)*(-g+h)/2,i[3]=p,i[5]=-p;return}if(i[5]=i[3]=0,u===0){m=f<0?-Math.pow(-f,1/3):Math.pow(f,1/3),i[0]=-p+2*m,i[4]=i[2]=-(m+p);return}c=-c,d=c*c*c,d=Math.acos(f/Math.sqrt(d)),m=2*Math.sqrt(c),i[0]=-p+m*Math.cos(d/3),i[2]=-p+m*Math.cos((d+2*Math.PI)/3),i[4]=-p+m*Math.cos((d+4*Math.PI)/3)},JE=function(e,t,n,a,i,o,u,c){var f=1*n*n-4*n*i+2*n*u+4*i*i-4*i*u+u*u+a*a-4*a*o+2*a*c+4*o*o-4*o*c+c*c,d=9*n*i-3*n*n-3*n*u-6*i*i+3*i*u+9*a*o-3*a*a-3*a*c-6*o*o+3*o*c,h=3*n*n-6*n*i+n*u-n*e+2*i*i+2*i*e-u*e+3*a*a-6*a*o+a*c-a*t+2*o*o+2*o*t-c*t,g=1*n*i-n*n+n*e-i*e+a*o-a*a+a*t-o*t,p=[];QE(f,d,h,g,p);for(var m=1e-7,y=[],x=0;x<6;x+=2)Math.abs(p[x+1])<m&&p[x]>=0&&p[x]<=1&&y.push(p[x]);y.push(1),y.push(0);for(var b=-1,_,E,C,B=0;B<y.length;B++)_=Math.pow(1-y[B],2)*n+2*(1-y[B])*y[B]*i+y[B]*y[B]*u,E=Math.pow(1-y[B],2)*a+2*(1-y[B])*y[B]*o+y[B]*y[B]*c,C=Math.pow(_-e,2)+Math.pow(E-t,2),b>=0?C<b&&(b=C):b=C;return b},eS=function(e,t,n,a,i,o){var u=[e-n,t-a],c=[i-n,o-a],f=c[0]*c[0]+c[1]*c[1],d=u[0]*u[0]+u[1]*u[1],h=u[0]*c[0]+u[1]*c[1],g=h*h/f;return h<0?d:g>f?(e-i)*(e-i)+(t-o)*(t-o):d-g},zr=function(e,t,n){for(var a,i,o,u,c,f=0,d=0;d<n.length/2;d++)if(a=n[d*2],i=n[d*2+1],d+1<n.length/2?(o=n[(d+1)*2],u=n[(d+1)*2+1]):(o=n[(d+1-n.length/2)*2],u=n[(d+1-n.length/2)*2+1]),!(a==e&&o==e))if(a>=e&&e>=o||a<=e&&e<=o)c=(e-a)/(o-a)*(u-i)+i,c>t&&f++;else continue;return f%2!==0},$n=function(e,t,n,a,i,o,u,c,f){var d=new Array(n.length),h;c[0]!=null?(h=Math.atan(c[1]/c[0]),c[0]<0?h=h+Math.PI/2:h=-h-Math.PI/2):h=c;for(var g=Math.cos(-h),p=Math.sin(-h),m=0;m<d.length/2;m++)d[m*2]=o/2*(n[m*2]*g-n[m*2+1]*p),d[m*2+1]=u/2*(n[m*2+1]*g+n[m*2]*p),d[m*2]+=a,d[m*2+1]+=i;var y;if(f>0){var x=bl(d,-f);y=xl(x)}else y=d;return zr(e,t,y)},tS=function(e,t,n,a,i,o,u,c){for(var f=new Array(n.length*2),d=0;d<c.length;d++){var h=c[d];f[d*4+0]=h.startX,f[d*4+1]=h.startY,f[d*4+2]=h.stopX,f[d*4+3]=h.stopY;var g=Math.pow(h.cx-e,2)+Math.pow(h.cy-t,2);if(g<=Math.pow(h.radius,2))return!0}return zr(e,t,f)},xl=function(e){for(var t=new Array(e.length/2),n,a,i,o,u,c,f,d,h=0;h<e.length/4;h++){n=e[h*4],a=e[h*4+1],i=e[h*4+2],o=e[h*4+3],h<e.length/4-1?(u=e[(h+1)*4],c=e[(h+1)*4+1],f=e[(h+1)*4+2],d=e[(h+1)*4+3]):(u=e[0],c=e[1],f=e[2],d=e[3]);var g=ga(n,a,i,o,u,c,f,d,!0);t[h*2]=g[0],t[h*2+1]=g[1]}return t},bl=function(e,t){for(var n=new Array(e.length*2),a,i,o,u,c=0;c<e.length/2;c++){a=e[c*2],i=e[c*2+1],c<e.length/2-1?(o=e[(c+1)*2],u=e[(c+1)*2+1]):(o=e[0],u=e[1]);var f=u-i,d=-(o-a),h=Math.sqrt(f*f+d*d),g=f/h,p=d/h;n[c*4]=a+g*t,n[c*4+1]=i+p*t,n[c*4+2]=o+g*t,n[c*4+3]=u+p*t}return n},rS=function(e,t,n,a,i,o){var u=n-e,c=a-t;u/=i,c/=o;var f=Math.sqrt(u*u+c*c),d=f-1;if(d<0)return[];var h=d/f;return[(n-e)*h+e,(a-t)*h+t]},Ya=function(e,t,n,a,i,o,u){return e-=i,t-=o,e/=n/2+u,t/=a/2+u,e*e+t*t<=1},no=function(e,t,n,a,i,o,u){var c=[n-e,a-t],f=[e-i,t-o],d=c[0]*c[0]+c[1]*c[1],h=2*(f[0]*c[0]+f[1]*c[1]),g=f[0]*f[0]+f[1]*f[1]-u*u,p=h*h-4*d*g;if(p<0)return[];var m=(-h+Math.sqrt(p))/(2*d),y=(-h-Math.sqrt(p))/(2*d),x=Math.min(m,y),b=Math.max(m,y),_=[];if(x>=0&&x<=1&&_.push(x),b>=0&&b<=1&&_.push(b),_.length===0)return[];var E=_[0]*c[0]+e,C=_[0]*c[1]+t;if(_.length>1){if(_[0]==_[1])return[E,C];var B=_[1]*c[0]+e,N=_[1]*c[1]+t;return[E,C,B,N]}else return[E,C]},ld=function(e,t,n){return t<=e&&e<=n||n<=e&&e<=t?e:e<=t&&t<=n||n<=t&&t<=e?t:n},ga=function(e,t,n,a,i,o,u,c,f){var d=e-i,h=n-e,g=u-i,p=t-o,m=a-t,y=c-o,x=g*p-y*d,b=h*p-m*d,_=y*h-g*m;if(_!==0){var E=x/_,C=b/_,B=.001,N=0-B,A=1+B;return N<=E&&E<=A&&N<=C&&C<=A?[e+E*h,t+E*m]:f?[e+E*h,t+E*m]:[]}else return x===0||b===0?ld(e,n,u)===u?[u,c]:ld(e,n,i)===i?[i,o]:ld(i,u,n)===n?[n,a]:[]:[]},nS=function(e,t,n,a,i){var o=[],u=a/2,c=i/2,f=t,d=n;o.push({x:f+u*e[0],y:d+c*e[1]});for(var h=1;h<e.length/2;h++)o.push({x:f+u*e[h*2],y:d+c*e[h*2+1]});return o},po=function(e,t,n,a,i,o,u,c){var f=[],d,h=new Array(n.length),g=!0;o==null&&(g=!1);var p;if(g){for(var m=0;m<h.length/2;m++)h[m*2]=n[m*2]*o+a,h[m*2+1]=n[m*2+1]*u+i;if(c>0){var y=bl(h,-c);p=xl(y)}else p=h}else p=n;for(var x,b,_,E,C=0;C<p.length/2;C++)x=p[C*2],b=p[C*2+1],C<p.length/2-1?(_=p[(C+1)*2],E=p[(C+1)*2+1]):(_=p[0],E=p[1]),d=ga(e,t,a,i,x,b,_,E),d.length!==0&&f.push(d[0],d[1]);return f},aS=function(e,t,n,a,i,o,u,c,f){var d=[],h,g=new Array(n.length*2);f.forEach(function(_,E){E===0?(g[g.length-2]=_.startX,g[g.length-1]=_.startY):(g[E*4-2]=_.startX,g[E*4-1]=_.startY),g[E*4]=_.stopX,g[E*4+1]=_.stopY,h=no(e,t,a,i,_.cx,_.cy,_.radius),h.length!==0&&d.push(h[0],h[1])});for(var p=0;p<g.length/4;p++)h=ga(e,t,a,i,g[p*4],g[p*4+1],g[p*4+2],g[p*4+3],!1),h.length!==0&&d.push(h[0],h[1]);if(d.length>2){for(var m=[d[0],d[1]],y=Math.pow(m[0]-e,2)+Math.pow(m[1]-t,2),x=1;x<d.length/2;x++){var b=Math.pow(d[x*2]-e,2)+Math.pow(d[x*2+1]-t,2);b<=y&&(m[0]=d[x*2],m[1]=d[x*2+1],y=b)}return m}return d},Ku=function(e,t,n){var a=[e[0]-t[0],e[1]-t[1]],i=Math.sqrt(a[0]*a[0]+a[1]*a[1]),o=(i-n)/i;return o<0&&(o=1e-5),[t[0]+o*a[0],t[1]+o*a[1]]},Pr=function(e,t){var n=Eh(e,t);return n=P1(n),n},P1=function(e){for(var t,n,a=e.length/2,i=1/0,o=1/0,u=-1/0,c=-1/0,f=0;f<a;f++)t=e[2*f],n=e[2*f+1],i=Math.min(i,t),u=Math.max(u,t),o=Math.min(o,n),c=Math.max(c,n);for(var d=2/(u-i),h=2/(c-o),g=0;g<a;g++)t=e[2*g]=e[2*g]*d,n=e[2*g+1]=e[2*g+1]*h,i=Math.min(i,t),u=Math.max(u,t),o=Math.min(o,n),c=Math.max(c,n);if(o<-1)for(var p=0;p<a;p++)n=e[2*p+1]=e[2*p+1]+(-1-o);return e},Eh=function(e,t){var n=1/e*2*Math.PI,a=e%2===0?Math.PI/2+n/2:Math.PI/2;a+=t;for(var i=new Array(e*2),o,u=0;u<e;u++)o=u*n+a,i[2*u]=Math.cos(o),i[2*u+1]=Math.sin(-o);return i},ba=function(e,t){return Math.min(e/4,t/4,8)},R1=function(e,t){return Math.min(e/10,t/10,8)},ev=function(){return 8},iS=function(e,t,n){return[e-2*t+n,2*(t-e),e]},Sh=function(e,t){return{heightOffset:Math.min(15,.05*t),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}};function cd(r,e){function t(h){for(var g=[],p=0;p<h.length;p++){var m=h[p],y=h[(p+1)%h.length],x={x:y.x-m.x,y:y.y-m.y},b={x:-x.y,y:x.x},_=Math.sqrt(b.x*b.x+b.y*b.y);g.push({x:b.x/_,y:b.y/_})}return g}function n(h,g){var p=1/0,m=-1/0,y=Fr(h),x;try{for(y.s();!(x=y.n()).done;){var b=x.value,_=b.x*g.x+b.y*g.y;p=Math.min(p,_),m=Math.max(m,_)}}catch(E){y.e(E)}finally{y.f()}return{min:p,max:m}}function a(h,g){return!(h.max<g.min||g.max<h.min)}var i=[].concat(gl(t(r)),gl(t(e))),o=Fr(i),u;try{for(o.s();!(u=o.n()).done;){var c=u.value,f=n(r,c),d=n(e,c);if(!a(f,d))return!1}}catch(h){o.e(h)}finally{o.f()}return!0}var sS=dr({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),oS={pageRank:function(e){for(var t=sS(e),n=t.dampingFactor,a=t.precision,i=t.iterations,o=t.weight,u=this._private.cy,c=this.byGroup(),f=c.nodes,d=c.edges,h=f.length,g=h*h,p=d.length,m=new Array(g),y=new Array(h),x=(1-n)/h,b=0;b<h;b++){for(var _=0;_<h;_++){var E=b*h+_;m[E]=0}y[b]=0}for(var C=0;C<p;C++){var B=d[C],N=B.data("source"),A=B.data("target");if(N!==A){var z=f.indexOfId(N),M=f.indexOfId(A),V=o(B),q=M*h+z;m[q]+=V,y[z]+=V}}for(var I=1/h+x,F=0;F<h;F++)if(y[F]===0)for(var T=0;T<h;T++){var G=T*h+F;m[G]=I}else for(var Q=0;Q<h;Q++){var W=Q*h+F;m[W]=m[W]/y[F]+x}for(var X=new Array(h),Z=new Array(h),te,L=0;L<h;L++)X[L]=1;for(var U=0;U<i;U++){for(var oe=0;oe<h;oe++)Z[oe]=0;for(var ie=0;ie<h;ie++)for(var ne=0;ne<h;ne++){var we=ie*h+ne;Z[ie]+=m[we]*X[ne]}$E(Z),te=X,X=Z,Z=te;for(var Pe=0,Ce=0;Ce<h;Ce++){var ge=te[Ce]-X[Ce];Pe+=ge*ge}if(Pe<a)break}var ce={rank:function(be){return be=u.collection(be)[0],X[f.indexOf(be)]}};return ce}},Mm=dr({root:null,weight:function(e){return 1},directed:!1,alpha:0}),Hi={degreeCentralityNormalized:function(e){e=Mm(e);var t=this.cy(),n=this.nodes(),a=n.length;if(e.directed){for(var d={},h={},g=0,p=0,m=0;m<a;m++){var y=n[m],x=y.id();e.root=y;var b=this.degreeCentrality(e);g<b.indegree&&(g=b.indegree),p<b.outdegree&&(p=b.outdegree),d[x]=b.indegree,h[x]=b.outdegree}return{indegree:function(E){return g==0?0:(Ye(E)&&(E=t.filter(E)),d[E.id()]/g)},outdegree:function(E){return p===0?0:(Ye(E)&&(E=t.filter(E)),h[E.id()]/p)}}}else{for(var i={},o=0,u=0;u<a;u++){var c=n[u];e.root=c;var f=this.degreeCentrality(e);o<f.degree&&(o=f.degree),i[c.id()]=f.degree}return{degree:function(E){return o===0?0:(Ye(E)&&(E=t.filter(E)),i[E.id()]/o)}}}},degreeCentrality:function(e){e=Mm(e);var t=this.cy(),n=this,a=e,i=a.root,o=a.weight,u=a.directed,c=a.alpha;if(i=t.collection(i)[0],u){for(var p=i.connectedEdges(),m=p.filter(function(N){return N.target().same(i)&&n.has(N)}),y=p.filter(function(N){return N.source().same(i)&&n.has(N)}),x=m.length,b=y.length,_=0,E=0,C=0;C<m.length;C++)_+=o(m[C]);for(var B=0;B<y.length;B++)E+=o(y[B]);return{indegree:Math.pow(x,1-c)*Math.pow(_,c),outdegree:Math.pow(b,1-c)*Math.pow(E,c)}}else{for(var f=i.connectedEdges().intersection(n),d=f.length,h=0,g=0;g<f.length;g++)h+=o(f[g]);return{degree:Math.pow(d,1-c)*Math.pow(h,c)}}}};Hi.dc=Hi.degreeCentrality;Hi.dcn=Hi.degreeCentralityNormalised=Hi.degreeCentralityNormalized;var zm=dr({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),Ki={closenessCentralityNormalized:function(e){for(var t=zm(e),n=t.harmonic,a=t.weight,i=t.directed,o=this.cy(),u={},c=0,f=this.nodes(),d=this.floydWarshall({weight:a,directed:i}),h=0;h<f.length;h++){for(var g=0,p=f[h],m=0;m<f.length;m++)if(h!==m){var y=d.distance(p,f[m]);n?g+=1/y:g+=y}n||(g=1/g),c<g&&(c=g),u[p.id()]=g}return{closeness:function(b){return c==0?0:(Ye(b)?b=o.filter(b)[0].id():b=b.id(),u[b]/c)}}},closenessCentrality:function(e){var t=zm(e),n=t.root,a=t.weight,i=t.directed,o=t.harmonic;n=this.filter(n)[0];for(var u=this.dijkstra({root:n,weight:a,directed:i}),c=0,f=this.nodes(),d=0;d<f.length;d++){var h=f[d];if(!h.same(n)){var g=u.distanceTo(h);o?c+=1/g:c+=g}}return o?c:1/c}};Ki.cc=Ki.closenessCentrality;Ki.ccn=Ki.closenessCentralityNormalised=Ki.closenessCentralityNormalized;var uS=dr({weight:null,directed:!1}),kh={betweennessCentrality:function(e){for(var t=uS(e),n=t.directed,a=t.weight,i=a!=null,o=this.cy(),u=this.nodes(),c={},f={},d=0,h={set:function(E,C){f[E]=C,C>d&&(d=C)},get:function(E){return f[E]}},g=0;g<u.length;g++){var p=u[g],m=p.id();n?c[m]=p.outgoers().nodes():c[m]=p.openNeighborhood().nodes(),h.set(m,0)}for(var y=function(){for(var E=u[x].id(),C=[],B={},N={},A={},z=new Ro(function(ie,ne){return A[ie]-A[ne]}),M=0;M<u.length;M++){var V=u[M].id();B[V]=[],N[V]=0,A[V]=1/0}for(N[E]=1,A[E]=0,z.push(E);!z.empty();){var q=z.pop();if(C.push(q),i)for(var I=0;I<c[q].length;I++){var F=c[q][I],T=o.getElementById(q),G=void 0;T.edgesTo(F).length>0?G=T.edgesTo(F)[0]:G=F.edgesTo(T)[0];var Q=a(G);F=F.id(),A[F]>A[q]+Q&&(A[F]=A[q]+Q,z.nodes.indexOf(F)<0?z.push(F):z.updateItem(F),N[F]=0,B[F]=[]),A[F]==A[q]+Q&&(N[F]=N[F]+N[q],B[F].push(q))}else for(var W=0;W<c[q].length;W++){var X=c[q][W].id();A[X]==1/0&&(z.push(X),A[X]=A[q]+1),A[X]==A[q]+1&&(N[X]=N[X]+N[q],B[X].push(q))}}for(var Z={},te=0;te<u.length;te++)Z[u[te].id()]=0;for(;C.length>0;){for(var L=C.pop(),U=0;U<B[L].length;U++){var oe=B[L][U];Z[oe]=Z[oe]+N[oe]/N[L]*(1+Z[L])}L!=u[x].id()&&h.set(L,h.get(L)+Z[L])}},x=0;x<u.length;x++)y();var b={betweenness:function(E){var C=o.collection(E).id();return h.get(C)},betweennessNormalized:function(E){if(d==0)return 0;var C=o.collection(E).id();return h.get(C)/d}};return b.betweennessNormalised=b.betweennessNormalized,b}};kh.bc=kh.betweennessCentrality;var lS=dr({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(r){return 1}]}),cS=function(e){return lS(e)},fS=function(e,t){for(var n=0,a=0;a<t.length;a++)n+=t[a](e);return n},dS=function(e,t,n){for(var a=0;a<t;a++)e[a*t+a]=n},B1=function(e,t){for(var n,a=0;a<t;a++){n=0;for(var i=0;i<t;i++)n+=e[i*t+a];for(var o=0;o<t;o++)e[o*t+a]=e[o*t+a]/n}},hS=function(e,t,n){for(var a=new Array(n*n),i=0;i<n;i++){for(var o=0;o<n;o++)a[i*n+o]=0;for(var u=0;u<n;u++)for(var c=0;c<n;c++)a[i*n+c]+=e[i*n+u]*t[u*n+c]}return a},vS=function(e,t,n){for(var a=e.slice(0),i=1;i<n;i++)e=hS(e,a,t);return e},pS=function(e,t,n){for(var a=new Array(t*t),i=0;i<t*t;i++)a[i]=Math.pow(e[i],n);return B1(a,t),a},gS=function(e,t,n,a){for(var i=0;i<n;i++){var o=Math.round(e[i]*Math.pow(10,a))/Math.pow(10,a),u=Math.round(t[i]*Math.pow(10,a))/Math.pow(10,a);if(o!==u)return!1}return!0},mS=function(e,t,n,a){for(var i=[],o=0;o<t;o++){for(var u=[],c=0;c<t;c++)Math.round(e[o*t+c]*1e3)/1e3>0&&u.push(n[c]);u.length!==0&&i.push(a.collection(u))}return i},yS=function(e,t){for(var n=0;n<e.length;n++)if(!t[n]||e[n].id()!==t[n].id())return!1;return!0},wS=function(e){for(var t=0;t<e.length;t++)for(var n=0;n<e.length;n++)t!=n&&yS(e[t],e[n])&&e.splice(n,1);return e},Fm=function(e){for(var t=this.nodes(),n=this.edges(),a=this.cy(),i=cS(e),o={},u=0;u<t.length;u++)o[t[u].id()]=u;for(var c=t.length,f=c*c,d=new Array(f),h,g=0;g<f;g++)d[g]=0;for(var p=0;p<n.length;p++){var m=n[p],y=o[m.source().id()],x=o[m.target().id()],b=fS(m,i.attributes);d[y*c+x]+=b,d[x*c+y]+=b}dS(d,c,i.multFactor),B1(d,c);for(var _=!0,E=0;_&&E<i.maxIterations;)_=!1,h=vS(d,c,i.expandFactor),d=pS(h,c,i.inflateFactor),gS(d,h,f,4)||(_=!0),E++;var C=mS(d,c,t,a);return C=wS(C),C},xS={markovClustering:Fm,mcl:Fm},bS=function(e){return e},A1=function(e,t){return Math.abs(t-e)},Um=function(e,t,n){return e+A1(t,n)},$m=function(e,t,n){return e+Math.pow(n-t,2)},_S=function(e){return Math.sqrt(e)},ES=function(e,t,n){return Math.max(e,A1(t,n))},Xs=function(e,t,n,a,i){for(var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:bS,u=a,c,f,d=0;d<e;d++)c=t(d),f=n(d),u=i(u,c,f);return o(u)},Yi={euclidean:function(e,t,n){return e>=2?Xs(e,t,n,0,$m,_S):Xs(e,t,n,0,Um)},squaredEuclidean:function(e,t,n){return Xs(e,t,n,0,$m)},manhattan:function(e,t,n){return Xs(e,t,n,0,Um)},max:function(e,t,n){return Xs(e,t,n,-1/0,ES)}};Yi["squared-euclidean"]=Yi.squaredEuclidean;Yi.squaredeuclidean=Yi.squaredEuclidean;function Nl(r,e,t,n,a,i){var o;return zt(r)?o=r:o=Yi[r]||Yi.euclidean,e===0&&zt(r)?o(a,i):o(e,t,n,a,i)}var SS=dr({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),tv=function(e){return SS(e)},_l=function(e,t,n,a,i){var o=i!=="kMedoids",u=o?function(h){return n[h]}:function(h){return a[h](n)},c=function(g){return a[g](t)},f=n,d=t;return Nl(e,a.length,u,c,f,d)},fd=function(e,t,n){for(var a=n.length,i=new Array(a),o=new Array(a),u=new Array(t),c=null,f=0;f<a;f++)i[f]=e.min(n[f]).value,o[f]=e.max(n[f]).value;for(var d=0;d<t;d++){c=[];for(var h=0;h<a;h++)c[h]=Math.random()*(o[h]-i[h])+i[h];u[d]=c}return u},D1=function(e,t,n,a,i){for(var o=1/0,u=0,c=0;c<t.length;c++){var f=_l(n,e,t[c],a,i);f<o&&(o=f,u=c)}return u},I1=function(e,t,n){for(var a=[],i=null,o=0;o<t.length;o++)i=t[o],n[i.id()]===e&&a.push(i);return a},kS=function(e,t,n){return Math.abs(t-e)<=n},CS=function(e,t,n){for(var a=0;a<e.length;a++)for(var i=0;i<e[a].length;i++){var o=Math.abs(e[a][i]-t[a][i]);if(o>n)return!1}return!0},TS=function(e,t,n){for(var a=0;a<n;a++)if(e===t[a])return!0;return!1},Vm=function(e,t){var n=new Array(t);if(e.length<50)for(var a=0;a<t;a++){for(var i=e[Math.floor(Math.random()*e.length)];TS(i,n,a);)i=e[Math.floor(Math.random()*e.length)];n[a]=i}else for(var o=0;o<t;o++)n[o]=e[Math.floor(Math.random()*e.length)];return n},jm=function(e,t,n){for(var a=0,i=0;i<t.length;i++)a+=_l("manhattan",t[i],e,n,"kMedoids");return a},PS=function(e){var t=this.cy(),n=this.nodes(),a=null,i=tv(e),o=new Array(i.k),u={},c;i.testMode?typeof i.testCentroids=="number"?(i.testCentroids,c=fd(n,i.k,i.attributes)):Jt(i.testCentroids)==="object"?c=i.testCentroids:c=fd(n,i.k,i.attributes):c=fd(n,i.k,i.attributes);for(var f=!0,d=0;f&&d<i.maxIterations;){for(var h=0;h<n.length;h++)a=n[h],u[a.id()]=D1(a,c,i.distance,i.attributes,"kMeans");f=!1;for(var g=0;g<i.k;g++){var p=I1(g,n,u);if(p.length!==0){for(var m=i.attributes.length,y=c[g],x=new Array(m),b=new Array(m),_=0;_<m;_++){b[_]=0;for(var E=0;E<p.length;E++)a=p[E],b[_]+=i.attributes[_](a);x[_]=b[_]/p.length,kS(x[_],y[_],i.sensitivityThreshold)||(f=!0)}c[g]=x,o[g]=t.collection(p)}}d++}return o},RS=function(e){var t=this.cy(),n=this.nodes(),a=null,i=tv(e),o=new Array(i.k),u,c={},f,d=new Array(i.k);i.testMode?typeof i.testCentroids=="number"||(Jt(i.testCentroids)==="object"?u=i.testCentroids:u=Vm(n,i.k)):u=Vm(n,i.k);for(var h=!0,g=0;h&&g<i.maxIterations;){for(var p=0;p<n.length;p++)a=n[p],c[a.id()]=D1(a,u,i.distance,i.attributes,"kMedoids");h=!1;for(var m=0;m<u.length;m++){var y=I1(m,n,c);if(y.length!==0){d[m]=jm(u[m],y,i.attributes);for(var x=0;x<y.length;x++)f=jm(y[x],y,i.attributes),f<d[m]&&(d[m]=f,u[m]=y[x],h=!0);o[m]=t.collection(y)}}g++}return o},BS=function(e,t,n,a,i){for(var o,u,c=0;c<t.length;c++)for(var f=0;f<e.length;f++)a[c][f]=Math.pow(n[c][f],i.m);for(var d=0;d<e.length;d++)for(var h=0;h<i.attributes.length;h++){o=0,u=0;for(var g=0;g<t.length;g++)o+=a[g][d]*i.attributes[h](t[g]),u+=a[g][d];e[d][h]=o/u}},AS=function(e,t,n,a,i){for(var o=0;o<e.length;o++)t[o]=e[o].slice();for(var u,c,f,d=2/(i.m-1),h=0;h<n.length;h++)for(var g=0;g<a.length;g++){u=0;for(var p=0;p<n.length;p++)c=_l(i.distance,a[g],n[h],i.attributes,"cmeans"),f=_l(i.distance,a[g],n[p],i.attributes,"cmeans"),u+=Math.pow(c/f,d);e[g][h]=1/u}},DS=function(e,t,n,a){for(var i=new Array(n.k),o=0;o<i.length;o++)i[o]=[];for(var u,c,f=0;f<t.length;f++){u=-1/0,c=-1;for(var d=0;d<t[0].length;d++)t[f][d]>u&&(u=t[f][d],c=d);i[c].push(e[f])}for(var h=0;h<i.length;h++)i[h]=a.collection(i[h]);return i},qm=function(e){var t=this.cy(),n=this.nodes(),a=tv(e),i,o,u,c,f;c=new Array(n.length);for(var d=0;d<n.length;d++)c[d]=new Array(a.k);u=new Array(n.length);for(var h=0;h<n.length;h++)u[h]=new Array(a.k);for(var g=0;g<n.length;g++){for(var p=0,m=0;m<a.k;m++)u[g][m]=Math.random(),p+=u[g][m];for(var y=0;y<a.k;y++)u[g][y]=u[g][y]/p}o=new Array(a.k);for(var x=0;x<a.k;x++)o[x]=new Array(a.attributes.length);f=new Array(n.length);for(var b=0;b<n.length;b++)f[b]=new Array(a.k);for(var _=!0,E=0;_&&E<a.maxIterations;)_=!1,BS(o,n,u,f,a),AS(u,c,o,n,a),CS(u,c,a.sensitivityThreshold)||(_=!0),E++;return i=DS(n,u,a,t),{clusters:i,degreeOfMembership:u}},IS={kMeans:PS,kMedoids:RS,fuzzyCMeans:qm,fcm:qm},LS=dr({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),NS={single:"min",complete:"max"},OS=function(e){var t=LS(e),n=NS[t.linkage];return n!=null&&(t.linkage=n),t},Wm=function(e,t,n,a,i){for(var o=0,u=1/0,c,f=i.attributes,d=function(M,V){return Nl(i.distance,f.length,function(q){return f[q](M)},function(q){return f[q](V)},M,V)},h=0;h<e.length;h++){var g=e[h].key,p=n[g][a[g]];p<u&&(o=g,u=p)}if(i.mode==="threshold"&&u>=i.threshold||i.mode==="dendrogram"&&e.length===1)return!1;var m=t[o],y=t[a[o]],x;i.mode==="dendrogram"?x={left:m,right:y,key:m.key}:x={value:m.value.concat(y.value),key:m.key},e[m.index]=x,e.splice(y.index,1),t[m.key]=x;for(var b=0;b<e.length;b++){var _=e[b];m.key===_.key?c=1/0:i.linkage==="min"?(c=n[m.key][_.key],n[m.key][_.key]>n[y.key][_.key]&&(c=n[y.key][_.key])):i.linkage==="max"?(c=n[m.key][_.key],n[m.key][_.key]<n[y.key][_.key]&&(c=n[y.key][_.key])):i.linkage==="mean"?c=(n[m.key][_.key]*m.size+n[y.key][_.key]*y.size)/(m.size+y.size):i.mode==="dendrogram"?c=d(_.value,m.value):c=d(_.value[0],m.value[0]),n[m.key][_.key]=n[_.key][m.key]=c}for(var E=0;E<e.length;E++){var C=e[E].key;if(a[C]===m.key||a[C]===y.key){for(var B=C,N=0;N<e.length;N++){var A=e[N].key;n[C][A]<n[C][B]&&(B=A)}a[C]=B}e[E].index=E}return m.key=y.key=m.index=y.index=null,!0},qi=function(e,t,n){e&&(e.value?t.push(e.value):(e.left&&qi(e.left,t),e.right&&qi(e.right,t)))},Ch=function(e,t){if(!e)return"";if(e.left&&e.right){var n=Ch(e.left,t),a=Ch(e.right,t),i=t.add({group:"nodes",data:{id:n+","+a}});return t.add({group:"edges",data:{source:n,target:i.id()}}),t.add({group:"edges",data:{source:a,target:i.id()}}),i.id()}else if(e.value)return e.value.id()},Th=function(e,t,n){if(!e)return[];var a=[],i=[],o=[];return t===0?(e.left&&qi(e.left,a),e.right&&qi(e.right,i),o=a.concat(i),[n.collection(o)]):t===1?e.value?[n.collection(e.value)]:(e.left&&qi(e.left,a),e.right&&qi(e.right,i),[n.collection(a),n.collection(i)]):e.value?[n.collection(e.value)]:(e.left&&(a=Th(e.left,t-1,n)),e.right&&(i=Th(e.right,t-1,n)),a.concat(i))},Gm=function(e){for(var t=this.cy(),n=this.nodes(),a=OS(e),i=a.attributes,o=function(E,C){return Nl(a.distance,i.length,function(B){return i[B](E)},function(B){return i[B](C)},E,C)},u=[],c=[],f=[],d=[],h=0;h<n.length;h++){var g={value:a.mode==="dendrogram"?n[h]:[n[h]],key:h,index:h};u[h]=g,d[h]=g,c[h]=[],f[h]=0}for(var p=0;p<u.length;p++)for(var m=0;m<=p;m++){var y=void 0;a.mode==="dendrogram"?y=p===m?1/0:o(u[p].value,u[m].value):y=p===m?1/0:o(u[p].value[0],u[m].value[0]),c[p][m]=y,c[m][p]=y,y<c[p][f[p]]&&(f[p]=m)}for(var x=Wm(u,d,c,f,a);x;)x=Wm(u,d,c,f,a);var b;return a.mode==="dendrogram"?(b=Th(u[0],a.dendrogramDepth,t),a.addDendrogram&&Ch(u[0],t)):(b=new Array(u.length),u.forEach(function(_,E){_.key=_.index=null,b[E]=t.collection(_.value)})),b},MS={hierarchicalClustering:Gm,hca:Gm},zS=dr({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),FS=function(e){var t=e.damping,n=e.preference;.5<=t&&t<1||At("Damping must range on [0.5, 1).  Got: ".concat(t));var a=["median","mean","min","max"];return a.some(function(i){return i===n})||Ue(n)||At("Preference must be one of [".concat(a.map(function(i){return"'".concat(i,"'")}).join(", "),"] or a number.  Got: ").concat(n)),zS(e)},US=function(e,t,n,a){var i=function(u,c){return a[c](u)};return-Nl(e,a.length,function(o){return i(t,o)},function(o){return i(n,o)},t,n)},$S=function(e,t){var n=null;return t==="median"?n=FE(e):t==="mean"?n=zE(e):t==="min"?n=OE(e):t==="max"?n=ME(e):n=t,n},VS=function(e,t,n){for(var a=[],i=0;i<e;i++)t[i*e+i]+n[i*e+i]>0&&a.push(i);return a},Hm=function(e,t,n){for(var a=[],i=0;i<e;i++){for(var o=-1,u=-1/0,c=0;c<n.length;c++){var f=n[c];t[i*e+f]>u&&(o=f,u=t[i*e+f])}o>0&&a.push(o)}for(var d=0;d<n.length;d++)a[n[d]]=n[d];return a},jS=function(e,t,n){for(var a=Hm(e,t,n),i=0;i<n.length;i++){for(var o=[],u=0;u<a.length;u++)a[u]===n[i]&&o.push(u);for(var c=-1,f=-1/0,d=0;d<o.length;d++){for(var h=0,g=0;g<o.length;g++)h+=t[o[g]*e+o[d]];h>f&&(c=d,f=h)}n[i]=o[c]}return a=Hm(e,t,n),a},Km=function(e){for(var t=this.cy(),n=this.nodes(),a=FS(e),i={},o=0;o<n.length;o++)i[n[o].id()]=o;var u,c,f,d,h,g;u=n.length,c=u*u,f=new Array(c);for(var p=0;p<c;p++)f[p]=-1/0;for(var m=0;m<u;m++)for(var y=0;y<u;y++)m!==y&&(f[m*u+y]=US(a.distance,n[m],n[y],a.attributes));d=$S(f,a.preference);for(var x=0;x<u;x++)f[x*u+x]=d;h=new Array(c);for(var b=0;b<c;b++)h[b]=0;g=new Array(c);for(var _=0;_<c;_++)g[_]=0;for(var E=new Array(u),C=new Array(u),B=new Array(u),N=0;N<u;N++)E[N]=0,C[N]=0,B[N]=0;for(var A=new Array(u*a.minIterations),z=0;z<A.length;z++)A[z]=0;var M;for(M=0;M<a.maxIterations;M++){for(var V=0;V<u;V++){for(var q=-1/0,I=-1/0,F=-1,T=0,G=0;G<u;G++)E[G]=h[V*u+G],T=g[V*u+G]+f[V*u+G],T>=q?(I=q,q=T,F=G):T>I&&(I=T);for(var Q=0;Q<u;Q++)h[V*u+Q]=(1-a.damping)*(f[V*u+Q]-q)+a.damping*E[Q];h[V*u+F]=(1-a.damping)*(f[V*u+F]-I)+a.damping*E[F]}for(var W=0;W<u;W++){for(var X=0,Z=0;Z<u;Z++)E[Z]=g[Z*u+W],C[Z]=Math.max(0,h[Z*u+W]),X+=C[Z];X-=C[W],C[W]=h[W*u+W],X+=C[W];for(var te=0;te<u;te++)g[te*u+W]=(1-a.damping)*Math.min(0,X-C[te])+a.damping*E[te];g[W*u+W]=(1-a.damping)*(X-C[W])+a.damping*E[W]}for(var L=0,U=0;U<u;U++){var oe=g[U*u+U]+h[U*u+U]>0?1:0;A[M%a.minIterations*u+U]=oe,L+=oe}if(L>0&&(M>=a.minIterations-1||M==a.maxIterations-1)){for(var ie=0,ne=0;ne<u;ne++){B[ne]=0;for(var we=0;we<a.minIterations;we++)B[ne]+=A[we*u+ne];(B[ne]===0||B[ne]===a.minIterations)&&ie++}if(ie===u)break}}for(var Pe=VS(u,h,g),Ce=jS(u,f,Pe),ge={},ce=0;ce<Pe.length;ce++)ge[Pe[ce]]=[];for(var de=0;de<n.length;de++){var be=i[n[de].id()],Re=Ce[be];Re!=null&&ge[Re].push(n[de])}for(var D=new Array(Pe.length),ve=0;ve<Pe.length;ve++)D[ve]=t.collection(ge[Pe[ve]]);return D},qS={affinityPropagation:Km,ap:Km},WS=dr({root:void 0,directed:!1}),GS={hierholzer:function(e){if(!dt(e)){var t=arguments;e={root:t[0],directed:t[1]}}var n=WS(e),a=n.root,i=n.directed,o=this,u=!1,c,f,d;a&&(d=Ye(a)?this.filter(a)[0].id():a[0].id());var h={},g={};i?o.forEach(function(_){var E=_.id();if(_.isNode()){var C=_.indegree(!0),B=_.outdegree(!0),N=C-B,A=B-C;N==1?c?u=!0:c=E:A==1?f?u=!0:f=E:(A>1||N>1)&&(u=!0),h[E]=[],_.outgoers().forEach(function(z){z.isEdge()&&h[E].push(z.id())})}else g[E]=[void 0,_.target().id()]}):o.forEach(function(_){var E=_.id();if(_.isNode()){var C=_.degree(!0);C%2&&(c?f?u=!0:f=E:c=E),h[E]=[],_.connectedEdges().forEach(function(B){return h[E].push(B.id())})}else g[E]=[_.source().id(),_.target().id()]});var p={found:!1,trail:void 0};if(u)return p;if(f&&c)if(i){if(d&&f!=d)return p;d=f}else{if(d&&f!=d&&c!=d)return p;d||(d=f)}else d||(d=o[0].id());var m=function(E){for(var C=E,B=[E],N,A,z;h[C].length;)N=h[C].shift(),A=g[N][0],z=g[N][1],C!=z?(h[z]=h[z].filter(function(M){return M!=N}),C=z):!i&&C!=A&&(h[A]=h[A].filter(function(M){return M!=N}),C=A),B.unshift(N),B.unshift(C);return B},y=[],x=[];for(x=m(d);x.length!=1;)h[x[0]].length==0?(y.unshift(o.getElementById(x.shift())),y.unshift(o.getElementById(x.shift()))):x=m(x.shift()).concat(x);y.unshift(o.getElementById(x.shift()));for(var b in h)if(h[b].length)return p;return p.found=!0,p.trail=this.spawn(y,!0),p}},Xu=function(){var e=this,t={},n=0,a=0,i=[],o=[],u={},c=function(g,p){for(var m=o.length-1,y=[],x=e.spawn();o[m].x!=g||o[m].y!=p;)y.push(o.pop().edge),m--;y.push(o.pop().edge),y.forEach(function(b){var _=b.connectedNodes().intersection(e);x.merge(b),_.forEach(function(E){var C=E.id(),B=E.connectedEdges().intersection(e);x.merge(E),t[C].cutVertex?x.merge(B.filter(function(N){return N.isLoop()})):x.merge(B)})}),i.push(x)},f=function(g,p,m){g===m&&(a+=1),t[p]={id:n,low:n++,cutVertex:!1};var y=e.getElementById(p).connectedEdges().intersection(e);if(y.size()===0)i.push(e.spawn(e.getElementById(p)));else{var x,b,_,E;y.forEach(function(C){x=C.source().id(),b=C.target().id(),_=x===p?b:x,_!==m&&(E=C.id(),u[E]||(u[E]=!0,o.push({x:p,y:_,edge:C})),_ in t?t[p].low=Math.min(t[p].low,t[_].id):(f(g,_,p),t[p].low=Math.min(t[p].low,t[_].low),t[p].id<=t[_].low&&(t[p].cutVertex=!0,c(p,_))))})}};e.forEach(function(h){if(h.isNode()){var g=h.id();g in t||(a=0,f(g,g),t[g].cutVertex=a>1)}});var d=Object.keys(t).filter(function(h){return t[h].cutVertex}).map(function(h){return e.getElementById(h)});return{cut:e.spawn(d),components:i}},HS={hopcroftTarjanBiconnected:Xu,htbc:Xu,htb:Xu,hopcroftTarjanBiconnectedComponents:Xu},Zu=function(){var e=this,t={},n=0,a=[],i=[],o=e.spawn(e),u=function(f){i.push(f),t[f]={index:n,low:n++,explored:!1};var d=e.getElementById(f).connectedEdges().intersection(e);if(d.forEach(function(y){var x=y.target().id();x!==f&&(x in t||u(x),t[x].explored||(t[f].low=Math.min(t[f].low,t[x].low)))}),t[f].index===t[f].low){for(var h=e.spawn();;){var g=i.pop();if(h.merge(e.getElementById(g)),t[g].low=t[f].index,t[g].explored=!0,g===f)break}var p=h.edgesWith(h),m=h.merge(p);a.push(m),o=o.difference(m)}};return e.forEach(function(c){if(c.isNode()){var f=c.id();f in t||u(f)}}),{cut:o,components:a}},KS={tarjanStronglyConnected:Zu,tsc:Zu,tscc:Zu,tarjanStronglyConnectedComponents:Zu},L1={};[ho,SE,kE,TE,RE,AE,LE,oS,Hi,Ki,kh,xS,IS,MS,qS,GS,HS,KS].forEach(function(r){et(L1,r)});/*!
Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
Licensed under The MIT License (http://opensource.org/licenses/MIT)
*/var N1=0,O1=1,M1=2,pn=function(e){if(!(this instanceof pn))return new pn(e);this.id="Thenable/1.0.7",this.state=N1,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},typeof e=="function"&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};pn.prototype={fulfill:function(e){return Xm(this,O1,"fulfillValue",e)},reject:function(e){return Xm(this,M1,"rejectReason",e)},then:function(e,t){var n=this,a=new pn;return n.onFulfilled.push(Ym(e,a,"fulfill")),n.onRejected.push(Ym(t,a,"reject")),z1(n),a.proxy}};var Xm=function(e,t,n,a){return e.state===N1&&(e.state=t,e[n]=a,z1(e)),e},z1=function(e){e.state===O1?Zm(e,"onFulfilled",e.fulfillValue):e.state===M1&&Zm(e,"onRejected",e.rejectReason)},Zm=function(e,t,n){if(e[t].length!==0){var a=e[t];e[t]=[];var i=function(){for(var u=0;u<a.length;u++)a[u](n)};typeof setImmediate=="function"?setImmediate(i):setTimeout(i,0)}},Ym=function(e,t,n){return function(a){if(typeof e!="function")t[n].call(t,a);else{var i;try{i=e(a)}catch(o){t.reject(o);return}F1(t,i)}}},F1=function(e,t){if(e===t||e.proxy===t){e.reject(new TypeError("cannot resolve promise with itself"));return}var n;if(Jt(t)==="object"&&t!==null||typeof t=="function")try{n=t.then}catch(i){e.reject(i);return}if(typeof n=="function"){var a=!1;try{n.call(t,function(i){a||(a=!0,i===t?e.reject(new TypeError("circular thenable chain")):F1(e,i))},function(i){a||(a=!0,e.reject(i))})}catch(i){a||e.reject(i)}return}e.fulfill(t)};pn.all=function(r){return new pn(function(e,t){for(var n=new Array(r.length),a=0,i=function(c,f){n[c]=f,a++,a===r.length&&e(n)},o=0;o<r.length;o++)(function(u){var c=r[u],f=c!=null&&c.then!=null;if(f)c.then(function(h){i(u,h)},function(h){t(h)});else{var d=c;i(u,d)}})(o)})};pn.resolve=function(r){return new pn(function(e,t){e(r)})};pn.reject=function(r){return new pn(function(e,t){t(r)})};var es=typeof Promise<"u"?Promise:pn,Ph=function(e,t,n){var a=Wh(e),i=!a,o=this._private=et({duration:1e3},t,n);if(o.target=e,o.style=o.style||o.css,o.started=!1,o.playing=!1,o.hooked=!1,o.applying=!1,o.progress=0,o.completes=[],o.frames=[],o.complete&&zt(o.complete)&&o.completes.push(o.complete),i){var u=e.position();o.startPosition=o.startPosition||{x:u.x,y:u.y},o.startStyle=o.startStyle||e.cy().style().getAnimationStartStyle(e,o.style)}if(a){var c=e.pan();o.startPan={x:c.x,y:c.y},o.startZoom=e.zoom()}this.length=1,this[0]=this},ei=Ph.prototype;et(ei,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var t,n=e.target._private.animation;e.queue?t=n.queue:t=n.current,t.push(this),Hr(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return e.progress===1&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var t=this._private;return e===void 0?t.progress*t.duration:this.progress(e/t.duration)},progress:function(e){var t=this._private,n=t.playing;return e===void 0?t.progress:(n&&this.pause(),t.progress=e,t.started=!1,n&&this.play(),this)},completed:function(){return this._private.progress===1},reverse:function(){var e=this._private,t=e.playing;t&&this.pause(),e.progress=1-e.progress,e.started=!1;var n=function(f,d){var h=e[f];h!=null&&(e[f]=e[d],e[d]=h)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),e.style)for(var a=0;a<e.style.length;a++){var i=e.style[a],o=i.name,u=e.startStyle[o];e.startStyle[o]=i,e.style[a]=u}return t&&this.play(),this},promise:function(e){var t=this._private,n;switch(e){case"frame":n=t.frames;break;default:case"complete":case"completed":n=t.completes}return new es(function(a,i){n.push(function(){a()})})}});ei.complete=ei.completed;ei.run=ei.play;ei.running=ei.playing;var XS={animated:function(){return function(){var t=this,n=t.length!==void 0,a=n?t:[t],i=this._private.cy||this;if(!i.styleEnabled())return!1;var o=a[0];if(o)return o._private.animation.current.length>0}},clearQueue:function(){return function(){var t=this,n=t.length!==void 0,a=n?t:[t],i=this._private.cy||this;if(!i.styleEnabled())return this;for(var o=0;o<a.length;o++){var u=a[o];u._private.animation.queue=[]}return this}},delay:function(){return function(t,n){var a=this._private.cy||this;return a.styleEnabled()?this.animate({delay:t,duration:t,complete:n}):this}},delayAnimation:function(){return function(t,n){var a=this._private.cy||this;return a.styleEnabled()?this.animation({delay:t,duration:t,complete:n}):this}},animation:function(){return function(t,n){var a=this,i=a.length!==void 0,o=i?a:[a],u=this._private.cy||this,c=!i,f=!c;if(!u.styleEnabled())return this;var d=u.style();t=et({},t,n);var h=Object.keys(t).length===0;if(h)return new Ph(o[0],t);switch(t.duration===void 0&&(t.duration=400),t.duration){case"slow":t.duration=600;break;case"fast":t.duration=200;break}if(f&&(t.style=d.getPropsList(t.style||t.css),t.css=void 0),f&&t.renderedPosition!=null){var g=t.renderedPosition,p=u.pan(),m=u.zoom();t.position=S1(g,m,p)}if(c&&t.panBy!=null){var y=t.panBy,x=u.pan();t.pan={x:x.x+y.x,y:x.y+y.y}}var b=t.center||t.centre;if(c&&b!=null){var _=u.getCenterPan(b.eles,t.zoom);_!=null&&(t.pan=_)}if(c&&t.fit!=null){var E=t.fit,C=u.getFitViewport(E.eles||E.boundingBox,E.padding);C!=null&&(t.pan=C.pan,t.zoom=C.zoom)}if(c&&dt(t.zoom)){var B=u.getZoomedViewport(t.zoom);B!=null?(B.zoomed&&(t.zoom=B.zoom),B.panned&&(t.pan=B.pan)):t.zoom=null}return new Ph(o[0],t)}},animate:function(){return function(t,n){var a=this,i=a.length!==void 0,o=i?a:[a],u=this._private.cy||this;if(!u.styleEnabled())return this;n&&(t=et({},t,n));for(var c=0;c<o.length;c++){var f=o[c],d=f.animated()&&(t.queue===void 0||t.queue),h=f.animation(t,d?{queue:!0}:void 0);h.play()}return this}},stop:function(){return function(t,n){var a=this,i=a.length!==void 0,o=i?a:[a],u=this._private.cy||this;if(!u.styleEnabled())return this;for(var c=0;c<o.length;c++){for(var f=o[c],d=f._private,h=d.animation.current,g=0;g<h.length;g++){var p=h[g],m=p._private;n&&(m.duration=0)}t&&(d.animation.queue=[]),n||(d.animation.current=[])}return u.notify("draw"),this}}},dd,Qm;function Ol(){if(Qm)return dd;Qm=1;var r=Array.isArray;return dd=r,dd}var hd,Jm;function ZS(){if(Jm)return hd;Jm=1;var r=Ol(),e=To(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(i,o){if(r(i))return!1;var u=typeof i;return u=="number"||u=="symbol"||u=="boolean"||i==null||e(i)?!0:n.test(i)||!t.test(i)||o!=null&&i in Object(o)}return hd=a,hd}var vd,ey;function YS(){if(ey)return vd;ey=1;var r=p1(),e=Co(),t="[object AsyncFunction]",n="[object Function]",a="[object GeneratorFunction]",i="[object Proxy]";function o(u){if(!e(u))return!1;var c=r(u);return c==n||c==a||c==t||c==i}return vd=o,vd}var pd,ty;function QS(){if(ty)return pd;ty=1;var r=Dl(),e=r["__core-js_shared__"];return pd=e,pd}var gd,ry;function JS(){if(ry)return gd;ry=1;var r=QS(),e=(function(){var n=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function t(n){return!!e&&e in n}return gd=t,gd}var md,ny;function ek(){if(ny)return md;ny=1;var r=Function.prototype,e=r.toString;function t(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return md=t,md}var yd,ay;function tk(){if(ay)return yd;ay=1;var r=YS(),e=JS(),t=Co(),n=ek(),a=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,o=Function.prototype,u=Object.prototype,c=o.toString,f=u.hasOwnProperty,d=RegExp("^"+c.call(f).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function h(g){if(!t(g)||e(g))return!1;var p=r(g)?d:i;return p.test(n(g))}return yd=h,yd}var wd,iy;function rk(){if(iy)return wd;iy=1;function r(e,t){return e==null?void 0:e[t]}return wd=r,wd}var xd,sy;function rv(){if(sy)return xd;sy=1;var r=tk(),e=rk();function t(n,a){var i=e(n,a);return r(i)?i:void 0}return xd=t,xd}var bd,oy;function Ml(){if(oy)return bd;oy=1;var r=rv(),e=r(Object,"create");return bd=e,bd}var _d,uy;function nk(){if(uy)return _d;uy=1;var r=Ml();function e(){this.__data__=r?r(null):{},this.size=0}return _d=e,_d}var Ed,ly;function ak(){if(ly)return Ed;ly=1;function r(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return Ed=r,Ed}var Sd,cy;function ik(){if(cy)return Sd;cy=1;var r=Ml(),e="__lodash_hash_undefined__",t=Object.prototype,n=t.hasOwnProperty;function a(i){var o=this.__data__;if(r){var u=o[i];return u===e?void 0:u}return n.call(o,i)?o[i]:void 0}return Sd=a,Sd}var kd,fy;function sk(){if(fy)return kd;fy=1;var r=Ml(),e=Object.prototype,t=e.hasOwnProperty;function n(a){var i=this.__data__;return r?i[a]!==void 0:t.call(i,a)}return kd=n,kd}var Cd,dy;function ok(){if(dy)return Cd;dy=1;var r=Ml(),e="__lodash_hash_undefined__";function t(n,a){var i=this.__data__;return this.size+=this.has(n)?0:1,i[n]=r&&a===void 0?e:a,this}return Cd=t,Cd}var Td,hy;function uk(){if(hy)return Td;hy=1;var r=nk(),e=ak(),t=ik(),n=sk(),a=ok();function i(o){var u=-1,c=o==null?0:o.length;for(this.clear();++u<c;){var f=o[u];this.set(f[0],f[1])}}return i.prototype.clear=r,i.prototype.delete=e,i.prototype.get=t,i.prototype.has=n,i.prototype.set=a,Td=i,Td}var Pd,vy;function lk(){if(vy)return Pd;vy=1;function r(){this.__data__=[],this.size=0}return Pd=r,Pd}var Rd,py;function U1(){if(py)return Rd;py=1;function r(e,t){return e===t||e!==e&&t!==t}return Rd=r,Rd}var Bd,gy;function zl(){if(gy)return Bd;gy=1;var r=U1();function e(t,n){for(var a=t.length;a--;)if(r(t[a][0],n))return a;return-1}return Bd=e,Bd}var Ad,my;function ck(){if(my)return Ad;my=1;var r=zl(),e=Array.prototype,t=e.splice;function n(a){var i=this.__data__,o=r(i,a);if(o<0)return!1;var u=i.length-1;return o==u?i.pop():t.call(i,o,1),--this.size,!0}return Ad=n,Ad}var Dd,yy;function fk(){if(yy)return Dd;yy=1;var r=zl();function e(t){var n=this.__data__,a=r(n,t);return a<0?void 0:n[a][1]}return Dd=e,Dd}var Id,wy;function dk(){if(wy)return Id;wy=1;var r=zl();function e(t){return r(this.__data__,t)>-1}return Id=e,Id}var Ld,xy;function hk(){if(xy)return Ld;xy=1;var r=zl();function e(t,n){var a=this.__data__,i=r(a,t);return i<0?(++this.size,a.push([t,n])):a[i][1]=n,this}return Ld=e,Ld}var Nd,by;function vk(){if(by)return Nd;by=1;var r=lk(),e=ck(),t=fk(),n=dk(),a=hk();function i(o){var u=-1,c=o==null?0:o.length;for(this.clear();++u<c;){var f=o[u];this.set(f[0],f[1])}}return i.prototype.clear=r,i.prototype.delete=e,i.prototype.get=t,i.prototype.has=n,i.prototype.set=a,Nd=i,Nd}var Od,_y;function pk(){if(_y)return Od;_y=1;var r=rv(),e=Dl(),t=r(e,"Map");return Od=t,Od}var Md,Ey;function gk(){if(Ey)return Md;Ey=1;var r=uk(),e=vk(),t=pk();function n(){this.size=0,this.__data__={hash:new r,map:new(t||e),string:new r}}return Md=n,Md}var zd,Sy;function mk(){if(Sy)return zd;Sy=1;function r(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return zd=r,zd}var Fd,ky;function Fl(){if(ky)return Fd;ky=1;var r=mk();function e(t,n){var a=t.__data__;return r(n)?a[typeof n=="string"?"string":"hash"]:a.map}return Fd=e,Fd}var Ud,Cy;function yk(){if(Cy)return Ud;Cy=1;var r=Fl();function e(t){var n=r(this,t).delete(t);return this.size-=n?1:0,n}return Ud=e,Ud}var $d,Ty;function wk(){if(Ty)return $d;Ty=1;var r=Fl();function e(t){return r(this,t).get(t)}return $d=e,$d}var Vd,Py;function xk(){if(Py)return Vd;Py=1;var r=Fl();function e(t){return r(this,t).has(t)}return Vd=e,Vd}var jd,Ry;function bk(){if(Ry)return jd;Ry=1;var r=Fl();function e(t,n){var a=r(this,t),i=a.size;return a.set(t,n),this.size+=a.size==i?0:1,this}return jd=e,jd}var qd,By;function _k(){if(By)return qd;By=1;var r=gk(),e=yk(),t=wk(),n=xk(),a=bk();function i(o){var u=-1,c=o==null?0:o.length;for(this.clear();++u<c;){var f=o[u];this.set(f[0],f[1])}}return i.prototype.clear=r,i.prototype.delete=e,i.prototype.get=t,i.prototype.has=n,i.prototype.set=a,qd=i,qd}var Wd,Ay;function Ek(){if(Ay)return Wd;Ay=1;var r=_k(),e="Expected a function";function t(n,a){if(typeof n!="function"||a!=null&&typeof a!="function")throw new TypeError(e);var i=function(){var o=arguments,u=a?a.apply(this,o):o[0],c=i.cache;if(c.has(u))return c.get(u);var f=n.apply(this,o);return i.cache=c.set(u,f)||c,f};return i.cache=new(t.Cache||r),i}return t.Cache=r,Wd=t,Wd}var Gd,Dy;function Sk(){if(Dy)return Gd;Dy=1;var r=Ek(),e=500;function t(n){var a=r(n,function(o){return i.size===e&&i.clear(),o}),i=a.cache;return a}return Gd=t,Gd}var Hd,Iy;function $1(){if(Iy)return Hd;Iy=1;var r=Sk(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,n=r(function(a){var i=[];return a.charCodeAt(0)===46&&i.push(""),a.replace(e,function(o,u,c,f){i.push(c?f.replace(t,"$1"):u||o)}),i});return Hd=n,Hd}var Kd,Ly;function V1(){if(Ly)return Kd;Ly=1;function r(e,t){for(var n=-1,a=e==null?0:e.length,i=Array(a);++n<a;)i[n]=t(e[n],n,e);return i}return Kd=r,Kd}var Xd,Ny;function kk(){if(Ny)return Xd;Ny=1;var r=Hh(),e=V1(),t=Ol(),n=To(),a=r?r.prototype:void 0,i=a?a.toString:void 0;function o(u){if(typeof u=="string")return u;if(t(u))return e(u,o)+"";if(n(u))return i?i.call(u):"";var c=u+"";return c=="0"&&1/u==-1/0?"-0":c}return Xd=o,Xd}var Zd,Oy;function j1(){if(Oy)return Zd;Oy=1;var r=kk();function e(t){return t==null?"":r(t)}return Zd=e,Zd}var Yd,My;function q1(){if(My)return Yd;My=1;var r=Ol(),e=ZS(),t=$1(),n=j1();function a(i,o){return r(i)?i:e(i,o)?[i]:t(n(i))}return Yd=a,Yd}var Qd,zy;function nv(){if(zy)return Qd;zy=1;var r=To();function e(t){if(typeof t=="string"||r(t))return t;var n=t+"";return n=="0"&&1/t==-1/0?"-0":n}return Qd=e,Qd}var Jd,Fy;function Ck(){if(Fy)return Jd;Fy=1;var r=q1(),e=nv();function t(n,a){a=r(a,n);for(var i=0,o=a.length;n!=null&&i<o;)n=n[e(a[i++])];return i&&i==o?n:void 0}return Jd=t,Jd}var eh,Uy;function Tk(){if(Uy)return eh;Uy=1;var r=Ck();function e(t,n,a){var i=t==null?void 0:r(t,n);return i===void 0?a:i}return eh=e,eh}var Pk=Tk(),Rk=ko(Pk),th,$y;function Bk(){if($y)return th;$y=1;var r=rv(),e=(function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch{}})();return th=e,th}var rh,Vy;function Ak(){if(Vy)return rh;Vy=1;var r=Bk();function e(t,n,a){n=="__proto__"&&r?r(t,n,{configurable:!0,enumerable:!0,value:a,writable:!0}):t[n]=a}return rh=e,rh}var nh,jy;function Dk(){if(jy)return nh;jy=1;var r=Ak(),e=U1(),t=Object.prototype,n=t.hasOwnProperty;function a(i,o,u){var c=i[o];(!(n.call(i,o)&&e(c,u))||u===void 0&&!(o in i))&&r(i,o,u)}return nh=a,nh}var ah,qy;function Ik(){if(qy)return ah;qy=1;var r=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(n,a){var i=typeof n;return a=a??r,!!a&&(i=="number"||i!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<a}return ah=t,ah}var ih,Wy;function Lk(){if(Wy)return ih;Wy=1;var r=Dk(),e=q1(),t=Ik(),n=Co(),a=nv();function i(o,u,c,f){if(!n(o))return o;u=e(u,o);for(var d=-1,h=u.length,g=h-1,p=o;p!=null&&++d<h;){var m=a(u[d]),y=c;if(m==="__proto__"||m==="constructor"||m==="prototype")return o;if(d!=g){var x=p[m];y=f?f(x,m,p):void 0,y===void 0&&(y=n(x)?x:t(u[d+1])?[]:{})}r(p,m,y),p=p[m]}return o}return ih=i,ih}var sh,Gy;function Nk(){if(Gy)return sh;Gy=1;var r=Lk();function e(t,n,a){return t==null?t:r(t,n,a)}return sh=e,sh}var Ok=Nk(),Mk=ko(Ok),oh,Hy;function zk(){if(Hy)return oh;Hy=1;function r(e,t){var n=-1,a=e.length;for(t||(t=Array(a));++n<a;)t[n]=e[n];return t}return oh=r,oh}var uh,Ky;function Fk(){if(Ky)return uh;Ky=1;var r=V1(),e=zk(),t=Ol(),n=To(),a=$1(),i=nv(),o=j1();function u(c){return t(c)?r(c,i):n(c)?[c]:e(a(o(c)))}return uh=u,uh}var Uk=Fk(),$k=ko(Uk),Vk={data:function(e){var t={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(a){},beforeSet:function(a,i){},onSet:function(a){},canSet:function(a){return!0}};return e=et({},t,e),function(a,i){var o=e,u=this,c=u.length!==void 0,f=c?u:[u],d=c?u[0]:u;if(Ye(a)){var h=a.indexOf(".")!==-1,g=h&&$k(a);if(o.allowGetting&&i===void 0){var p;return d&&(o.beforeGet(d),g&&d._private[o.field][a]===void 0?p=Rk(d._private[o.field],g):p=d._private[o.field][a]),p}else if(o.allowSetting&&i!==void 0){var m=!o.immutableKeys[a];if(m){var y=i1({},a,i);o.beforeSet(u,y);for(var x=0,b=f.length;x<b;x++){var _=f[x];o.canSet(_)&&(g&&d._private[o.field][a]===void 0?Mk(_._private[o.field],g,i):_._private[o.field][a]=i)}o.updateStyle&&u.updateStyle(),o.onSet(u),o.settingTriggersEvent&&u[o.triggerFnName](o.settingEvent)}}}else if(o.allowSetting&&dt(a)){var E=a,C,B,N=Object.keys(E);o.beforeSet(u,E);for(var A=0;A<N.length;A++){C=N[A],B=E[C];var z=!o.immutableKeys[C];if(z)for(var M=0;M<f.length;M++){var V=f[M];o.canSet(V)&&(V._private[o.field][C]=B)}}o.updateStyle&&u.updateStyle(),o.onSet(u),o.settingTriggersEvent&&u[o.triggerFnName](o.settingEvent)}else if(o.allowBinding&&zt(a)){var q=a;u.on(o.bindingEvent,q)}else if(o.allowGetting&&a===void 0){var I;return d&&(o.beforeGet(d),I=d._private[o.field]),I}return u}},removeData:function(e){var t={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return e=et({},t,e),function(a){var i=e,o=this,u=o.length!==void 0,c=u?o:[o];if(Ye(a)){for(var f=a.split(/\s+/),d=f.length,h=0;h<d;h++){var g=f[h];if(!wa(g)){var p=!i.immutableKeys[g];if(p)for(var m=0,y=c.length;m<y;m++)c[m]._private[i.field][g]=void 0}}i.triggerEvent&&o[i.triggerFnName](i.event)}else if(a===void 0){for(var x=0,b=c.length;x<b;x++)for(var _=c[x]._private[i.field],E=Object.keys(_),C=0;C<E.length;C++){var B=E[C],N=!i.immutableKeys[B];N&&(_[B]=void 0)}i.triggerEvent&&o[i.triggerFnName](i.event)}return o}}},jk={eventAliasesOn:function(e){var t=e;t.addListener=t.listen=t.bind=t.on,t.unlisten=t.unbind=t.off=t.removeListener,t.trigger=t.emit,t.pon=t.promiseOn=function(n,a){var i=this,o=Array.prototype.slice.call(arguments,0);return new es(function(u,c){var f=function(p){i.off.apply(i,h),u(p)},d=o.concat([f]),h=d.concat([]);i.on.apply(i,d)})}}},pt={};[XS,Vk,jk].forEach(function(r){et(pt,r)});var qk={animate:pt.animate(),animation:pt.animation(),animated:pt.animated(),clearQueue:pt.clearQueue(),delay:pt.delay(),delayAnimation:pt.delayAnimation(),stop:pt.stop()},ul={classes:function(e){var t=this;if(e===void 0){var n=[];return t[0]._private.classes.forEach(function(m){return n.push(m)}),n}else wt(e)||(e=(e||"").match(/\S+/g)||[]);for(var a=[],i=new Ji(e),o=0;o<t.length;o++){for(var u=t[o],c=u._private,f=c.classes,d=!1,h=0;h<e.length;h++){var g=e[h],p=f.has(g);if(!p){d=!0;break}}d||(d=f.size!==e.length),d&&(c.classes=i,a.push(u))}return a.length>0&&this.spawn(a).updateStyle().emit("class"),t},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var t=this[0];return t!=null&&t._private.classes.has(e)},toggleClass:function(e,t){wt(e)||(e=e.match(/\S+/g)||[]);for(var n=this,a=t===void 0,i=[],o=0,u=n.length;o<u;o++)for(var c=n[o],f=c._private.classes,d=!1,h=0;h<e.length;h++){var g=e[h],p=f.has(g),m=!1;t||a&&!p?(f.add(g),m=!0):(!t||a&&p)&&(f.delete(g),m=!0),!d&&m&&(i.push(c),d=!0)}return i.length>0&&this.spawn(i).updateStyle().emit("class"),n},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,t){var n=this;if(t==null)t=250;else if(t===0)return n;return n.addClass(e),setTimeout(function(){n.removeClass(e)},t),n}};ul.className=ul.classNames=ul.classes;var ft={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:`"(?:\\\\"|[^"])*"|'(?:\\\\'|[^'])*'`,number:Qt,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};ft.variable="(?:[\\w-.]|(?:\\\\"+ft.metaChar+"))+";ft.className="(?:[\\w-]|(?:\\\\"+ft.metaChar+"))+";ft.value=ft.string+"|"+ft.number;ft.id=ft.variable;(function(){var r,e,t;for(r=ft.comparatorOp.split("|"),t=0;t<r.length;t++)e=r[t],ft.comparatorOp+="|@"+e;for(r=ft.comparatorOp.split("|"),t=0;t<r.length;t++)e=r[t],!(e.indexOf("!")>=0)&&e!=="="&&(ft.comparatorOp+="|\\!"+e)})();var yt=function(){return{checks:[]}},qe={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},Rh=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort(function(r,e){return V_(r.selector,e.selector)}),Wk=(function(){for(var r={},e,t=0;t<Rh.length;t++)e=Rh[t],r[e.selector]=e.matches;return r})(),Gk=function(e,t){return Wk[e](t)},Hk="("+Rh.map(function(r){return r.selector}).join("|")+")",Ii=function(e){return e.replace(new RegExp("\\\\("+ft.metaChar+")","g"),function(t,n){return n})},da=function(e,t,n){e[e.length-1]=n},Bh=[{name:"group",query:!0,regex:"("+ft.group+")",populate:function(e,t,n){var a=Ht(n,1),i=a[0];t.checks.push({type:qe.GROUP,value:i==="*"?i:i+"s"})}},{name:"state",query:!0,regex:Hk,populate:function(e,t,n){var a=Ht(n,1),i=a[0];t.checks.push({type:qe.STATE,value:i})}},{name:"id",query:!0,regex:"\\#("+ft.id+")",populate:function(e,t,n){var a=Ht(n,1),i=a[0];t.checks.push({type:qe.ID,value:Ii(i)})}},{name:"className",query:!0,regex:"\\.("+ft.className+")",populate:function(e,t,n){var a=Ht(n,1),i=a[0];t.checks.push({type:qe.CLASS,value:Ii(i)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+ft.variable+")\\s*\\]",populate:function(e,t,n){var a=Ht(n,1),i=a[0];t.checks.push({type:qe.DATA_EXIST,field:Ii(i)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+ft.variable+")\\s*("+ft.comparatorOp+")\\s*("+ft.value+")\\s*\\]",populate:function(e,t,n){var a=Ht(n,3),i=a[0],o=a[1],u=a[2],c=new RegExp("^"+ft.string+"$").exec(u)!=null;c?u=u.substring(1,u.length-1):u=parseFloat(u),t.checks.push({type:qe.DATA_COMPARE,field:Ii(i),operator:o,value:u})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+ft.boolOp+")\\s*("+ft.variable+")\\s*\\]",populate:function(e,t,n){var a=Ht(n,2),i=a[0],o=a[1];t.checks.push({type:qe.DATA_BOOL,field:Ii(o),operator:i})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+ft.meta+")\\s*("+ft.comparatorOp+")\\s*("+ft.number+")\\s*\\]\\]",populate:function(e,t,n){var a=Ht(n,3),i=a[0],o=a[1],u=a[2];t.checks.push({type:qe.META_COMPARE,field:Ii(i),operator:o,value:parseFloat(u)})}},{name:"nextQuery",separator:!0,regex:ft.separator,populate:function(e,t){var n=e.currentSubject,a=e.edgeCount,i=e.compoundCount,o=e[e.length-1];n!=null&&(o.subject=n,e.currentSubject=null),o.edgeCount=a,o.compoundCount=i,e.edgeCount=0,e.compoundCount=0;var u=e[e.length++]=yt();return u}},{name:"directedEdge",separator:!0,regex:ft.directedEdge,populate:function(e,t){if(e.currentSubject==null){var n=yt(),a=t,i=yt();return n.checks.push({type:qe.DIRECTED_EDGE,source:a,target:i}),da(e,t,n),e.edgeCount++,i}else{var o=yt(),u=t,c=yt();return o.checks.push({type:qe.NODE_SOURCE,source:u,target:c}),da(e,t,o),e.edgeCount++,c}}},{name:"undirectedEdge",separator:!0,regex:ft.undirectedEdge,populate:function(e,t){if(e.currentSubject==null){var n=yt(),a=t,i=yt();return n.checks.push({type:qe.UNDIRECTED_EDGE,nodes:[a,i]}),da(e,t,n),e.edgeCount++,i}else{var o=yt(),u=t,c=yt();return o.checks.push({type:qe.NODE_NEIGHBOR,node:u,neighbor:c}),da(e,t,o),c}}},{name:"child",separator:!0,regex:ft.child,populate:function(e,t){if(e.currentSubject==null){var n=yt(),a=yt(),i=e[e.length-1];return n.checks.push({type:qe.CHILD,parent:i,child:a}),da(e,t,n),e.compoundCount++,a}else if(e.currentSubject===t){var o=yt(),u=e[e.length-1],c=yt(),f=yt(),d=yt(),h=yt();return o.checks.push({type:qe.COMPOUND_SPLIT,left:u,right:c,subject:f}),f.checks=t.checks,t.checks=[{type:qe.TRUE}],h.checks.push({type:qe.TRUE}),c.checks.push({type:qe.PARENT,parent:h,child:d}),da(e,u,o),e.currentSubject=f,e.compoundCount++,d}else{var g=yt(),p=yt(),m=[{type:qe.PARENT,parent:g,child:p}];return g.checks=t.checks,t.checks=m,e.compoundCount++,p}}},{name:"descendant",separator:!0,regex:ft.descendant,populate:function(e,t){if(e.currentSubject==null){var n=yt(),a=yt(),i=e[e.length-1];return n.checks.push({type:qe.DESCENDANT,ancestor:i,descendant:a}),da(e,t,n),e.compoundCount++,a}else if(e.currentSubject===t){var o=yt(),u=e[e.length-1],c=yt(),f=yt(),d=yt(),h=yt();return o.checks.push({type:qe.COMPOUND_SPLIT,left:u,right:c,subject:f}),f.checks=t.checks,t.checks=[{type:qe.TRUE}],h.checks.push({type:qe.TRUE}),c.checks.push({type:qe.ANCESTOR,ancestor:h,descendant:d}),da(e,u,o),e.currentSubject=f,e.compoundCount++,d}else{var g=yt(),p=yt(),m=[{type:qe.ANCESTOR,ancestor:g,descendant:p}];return g.checks=t.checks,t.checks=m,e.compoundCount++,p}}},{name:"subject",modifier:!0,regex:ft.subject,populate:function(e,t){if(e.currentSubject!=null&&e.currentSubject!==t)return gt("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=t;var n=e[e.length-1],a=n.checks[0],i=a==null?null:a.type;i===qe.DIRECTED_EDGE?a.type=qe.NODE_TARGET:i===qe.UNDIRECTED_EDGE&&(a.type=qe.NODE_NEIGHBOR,a.node=a.nodes[1],a.neighbor=a.nodes[0],a.nodes=null)}}];Bh.forEach(function(r){return r.regexObj=new RegExp("^"+r.regex)});var Kk=function(e){for(var t,n,a,i=0;i<Bh.length;i++){var o=Bh[i],u=o.name,c=e.match(o.regexObj);if(c!=null){n=c,t=o,a=u;var f=c[0];e=e.substring(f.length);break}}return{expr:t,match:n,name:a,remaining:e}},Xk=function(e){var t=e.match(/^\s+/);if(t){var n=t[0];e=e.substring(n.length)}return e},Zk=function(e){var t=this,n=t.inputText=e,a=t[0]=yt();for(t.length=1,n=Xk(n);;){var i=Kk(n);if(i.expr==null)return gt("The selector `"+e+"`is invalid"),!1;var o=i.match.slice(1),u=i.expr.populate(t,a,o);if(u===!1)return!1;if(u!=null&&(a=u),n=i.remaining,n.match(/^\s*$/))break}var c=t[t.length-1];t.currentSubject!=null&&(c.subject=t.currentSubject),c.edgeCount=t.edgeCount,c.compoundCount=t.compoundCount;for(var f=0;f<t.length;f++){var d=t[f];if(d.compoundCount>0&&d.edgeCount>0)return gt("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(d.edgeCount>1)return gt("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;d.edgeCount===1&&gt("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},Yk=function(){if(this.toStringCache!=null)return this.toStringCache;for(var e=function(d){return d??""},t=function(d){return Ye(d)?'"'+d+'"':e(d)},n=function(d){return" "+d+" "},a=function(d,h){var g=d.type,p=d.value;switch(g){case qe.GROUP:{var m=e(p);return m.substring(0,m.length-1)}case qe.DATA_COMPARE:{var y=d.field,x=d.operator;return"["+y+n(e(x))+t(p)+"]"}case qe.DATA_BOOL:{var b=d.operator,_=d.field;return"["+e(b)+_+"]"}case qe.DATA_EXIST:{var E=d.field;return"["+E+"]"}case qe.META_COMPARE:{var C=d.operator,B=d.field;return"[["+B+n(e(C))+t(p)+"]]"}case qe.STATE:return p;case qe.ID:return"#"+p;case qe.CLASS:return"."+p;case qe.PARENT:case qe.CHILD:return i(d.parent,h)+n(">")+i(d.child,h);case qe.ANCESTOR:case qe.DESCENDANT:return i(d.ancestor,h)+" "+i(d.descendant,h);case qe.COMPOUND_SPLIT:{var N=i(d.left,h),A=i(d.subject,h),z=i(d.right,h);return N+(N.length>0?" ":"")+A+z}case qe.TRUE:return""}},i=function(d,h){return d.checks.reduce(function(g,p,m){return g+(h===d&&m===0?"$":"")+a(p,h)},"")},o="",u=0;u<this.length;u++){var c=this[u];o+=i(c,c.subject),this.length>1&&u<this.length-1&&(o+=", ")}return this.toStringCache=o,o},Qk={parse:Zk,toString:Yk},W1=function(e,t,n){var a,i=Ye(e),o=Ue(e),u=Ye(n),c,f,d=!1,h=!1,g=!1;switch(t.indexOf("!")>=0&&(t=t.replace("!",""),h=!0),t.indexOf("@")>=0&&(t=t.replace("@",""),d=!0),(i||u||d)&&(c=!i&&!o?"":""+e,f=""+n),d&&(e=c=c.toLowerCase(),n=f=f.toLowerCase()),t){case"*=":a=c.indexOf(f)>=0;break;case"$=":a=c.indexOf(f,c.length-f.length)>=0;break;case"^=":a=c.indexOf(f)===0;break;case"=":a=e===n;break;case">":g=!0,a=e>n;break;case">=":g=!0,a=e>=n;break;case"<":g=!0,a=e<n;break;case"<=":g=!0,a=e<=n;break;default:a=!1;break}return h&&(e!=null||!g)&&(a=!a),a},Jk=function(e,t){switch(t){case"?":return!!e;case"!":return!e;case"^":return e===void 0}},eC=function(e){return e!==void 0},av=function(e,t){return e.data(t)},tC=function(e,t){return e[t]()},$t=[],Tt=function(e,t){return e.checks.every(function(n){return $t[n.type](n,t)})};$t[qe.GROUP]=function(r,e){var t=r.value;return t==="*"||t===e.group()};$t[qe.STATE]=function(r,e){var t=r.value;return Gk(t,e)};$t[qe.ID]=function(r,e){var t=r.value;return e.id()===t};$t[qe.CLASS]=function(r,e){var t=r.value;return e.hasClass(t)};$t[qe.META_COMPARE]=function(r,e){var t=r.field,n=r.operator,a=r.value;return W1(tC(e,t),n,a)};$t[qe.DATA_COMPARE]=function(r,e){var t=r.field,n=r.operator,a=r.value;return W1(av(e,t),n,a)};$t[qe.DATA_BOOL]=function(r,e){var t=r.field,n=r.operator;return Jk(av(e,t),n)};$t[qe.DATA_EXIST]=function(r,e){var t=r.field;return r.operator,eC(av(e,t))};$t[qe.UNDIRECTED_EDGE]=function(r,e){var t=r.nodes[0],n=r.nodes[1],a=e.source(),i=e.target();return Tt(t,a)&&Tt(n,i)||Tt(n,a)&&Tt(t,i)};$t[qe.NODE_NEIGHBOR]=function(r,e){return Tt(r.node,e)&&e.neighborhood().some(function(t){return t.isNode()&&Tt(r.neighbor,t)})};$t[qe.DIRECTED_EDGE]=function(r,e){return Tt(r.source,e.source())&&Tt(r.target,e.target())};$t[qe.NODE_SOURCE]=function(r,e){return Tt(r.source,e)&&e.outgoers().some(function(t){return t.isNode()&&Tt(r.target,t)})};$t[qe.NODE_TARGET]=function(r,e){return Tt(r.target,e)&&e.incomers().some(function(t){return t.isNode()&&Tt(r.source,t)})};$t[qe.CHILD]=function(r,e){return Tt(r.child,e)&&Tt(r.parent,e.parent())};$t[qe.PARENT]=function(r,e){return Tt(r.parent,e)&&e.children().some(function(t){return Tt(r.child,t)})};$t[qe.DESCENDANT]=function(r,e){return Tt(r.descendant,e)&&e.ancestors().some(function(t){return Tt(r.ancestor,t)})};$t[qe.ANCESTOR]=function(r,e){return Tt(r.ancestor,e)&&e.descendants().some(function(t){return Tt(r.descendant,t)})};$t[qe.COMPOUND_SPLIT]=function(r,e){return Tt(r.subject,e)&&Tt(r.left,e)&&Tt(r.right,e)};$t[qe.TRUE]=function(){return!0};$t[qe.COLLECTION]=function(r,e){var t=r.value;return t.has(e)};$t[qe.FILTER]=function(r,e){var t=r.value;return t(e)};var rC=function(e){var t=this;if(t.length===1&&t[0].checks.length===1&&t[0].checks[0].type===qe.ID)return e.getElementById(t[0].checks[0].value).collection();var n=function(i){for(var o=0;o<t.length;o++){var u=t[o];if(Tt(u,i))return!0}return!1};return t.text()==null&&(n=function(){return!0}),e.filter(n)},nC=function(e){for(var t=this,n=0;n<t.length;n++){var a=t[n];if(Tt(a,e))return!0}return!1},aC={matches:nC,filter:rC},_a=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,e==null||Ye(e)&&e.match(/^\s*$/)||(Hr(e)?this.addQuery({checks:[{type:qe.COLLECTION,value:e.collection()}]}):zt(e)?this.addQuery({checks:[{type:qe.FILTER,value:e}]}):Ye(e)?this.parse(e)||(this.invalid=!0):At("A selector must be created from a string; found "))},Ea=_a.prototype;[Qk,aC].forEach(function(r){return et(Ea,r)});Ea.text=function(){return this.inputText};Ea.size=function(){return this.length};Ea.eq=function(r){return this[r]};Ea.sameText=function(r){return!this.invalid&&!r.invalid&&this.text()===r.text()};Ea.addQuery=function(r){this[this.length++]=r};Ea.selector=Ea.toString;var ma={allAre:function(e){var t=new _a(e);return this.every(function(n){return t.matches(n)})},is:function(e){var t=new _a(e);return this.some(function(n){return t.matches(n)})},some:function(e,t){for(var n=0;n<this.length;n++){var a=t?e.apply(t,[this[n],n,this]):e(this[n],n,this);if(a)return!0}return!1},every:function(e,t){for(var n=0;n<this.length;n++){var a=t?e.apply(t,[this[n],n,this]):e(this[n],n,this);if(!a)return!1}return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var t=this.length,n=e.length;return t!==n?!1:t===1?this[0]===e[0]:this.every(function(a){return e.hasElementWithId(a.id())})},anySame:function(e){return e=this.cy().collection(e),this.some(function(t){return e.hasElementWithId(t.id())})},allAreNeighbors:function(e){e=this.cy().collection(e);var t=this.neighborhood();return e.every(function(n){return t.hasElementWithId(n.id())})},contains:function(e){e=this.cy().collection(e);var t=this;return e.every(function(n){return t.hasElementWithId(n.id())})}};ma.allAreNeighbours=ma.allAreNeighbors;ma.has=ma.contains;ma.equal=ma.equals=ma.same;var nn=function(e,t){return function(a,i,o,u){var c=a,f=this,d;if(c==null?d="":Hr(c)&&c.length===1&&(d=c.id()),f.length===1&&d){var h=f[0]._private,g=h.traversalCache=h.traversalCache||{},p=g[t]=g[t]||[],m=Qa(d),y=p[m];return y||(p[m]=e.call(f,a,i,o,u))}else return e.call(f,a,i,o,u)}},Qi={parent:function(e){var t=[];if(this.length===1){var n=this[0]._private.parent;if(n)return n}for(var a=0;a<this.length;a++){var i=this[a],o=i._private.parent;o&&t.push(o)}return this.spawn(t,!0).filter(e)},parents:function(e){for(var t=[],n=this.parent();n.nonempty();){for(var a=0;a<n.length;a++){var i=n[a];t.push(i)}n=n.parent()}return this.spawn(t,!0).filter(e)},commonAncestors:function(e){for(var t,n=0;n<this.length;n++){var a=this[n],i=a.parents();t=t||i,t=t.intersect(i)}return t.filter(e)},orphans:function(e){return this.stdFilter(function(t){return t.isOrphan()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(t){return t.isChild()}).filter(e)},children:nn(function(r){for(var e=[],t=0;t<this.length;t++)for(var n=this[t],a=n._private.children,i=0;i<a.length;i++)e.push(a[i]);return this.spawn(e,!0).filter(r)},"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length!==0},isChildless:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length===0},isChild:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent!=null},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent==null},descendants:function(e){var t=[];function n(a){for(var i=0;i<a.length;i++){var o=a[i];t.push(o),o.children().nonempty()&&n(o.children())}}return n(this.children()),this.spawn(t,!0).filter(e)}};function iv(r,e,t,n){for(var a=[],i=new Ji,o=r.cy(),u=o.hasCompoundNodes(),c=0;c<r.length;c++){var f=r[c];t?a.push(f):u&&n(a,i,f)}for(;a.length>0;){var d=a.shift();e(d),i.add(d.id()),u&&n(a,i,d)}return r}function G1(r,e,t){if(t.isParent())for(var n=t._private.children,a=0;a<n.length;a++){var i=n[a];e.has(i.id())||r.push(i)}}Qi.forEachDown=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return iv(this,r,e,G1)};function H1(r,e,t){if(t.isChild()){var n=t._private.parent;e.has(n.id())||r.push(n)}}Qi.forEachUp=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return iv(this,r,e,H1)};function iC(r,e,t){H1(r,e,t),G1(r,e,t)}Qi.forEachUpAndDown=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return iv(this,r,e,iC)};Qi.ancestors=Qi.parents;var go,K1;go=K1={data:pt.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:pt.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:pt.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:pt.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:pt.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:pt.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}};go.attr=go.data;go.removeAttr=go.removeData;var sC=K1,Ul={};function lh(r){return function(e){var t=this;if(e===void 0&&(e=!0),t.length!==0)if(t.isNode()&&!t.removed()){for(var n=0,a=t[0],i=a._private.edges,o=0;o<i.length;o++){var u=i[o];!e&&u.isLoop()||(n+=r(a,u))}return n}else return}}et(Ul,{degree:lh(function(r,e){return e.source().same(e.target())?2:1}),indegree:lh(function(r,e){return e.target().same(r)?1:0}),outdegree:lh(function(r,e){return e.source().same(r)?1:0})});function Li(r,e){return function(t){for(var n,a=this.nodes(),i=0;i<a.length;i++){var o=a[i],u=o[r](t);u!==void 0&&(n===void 0||e(u,n))&&(n=u)}return n}}et(Ul,{minDegree:Li("degree",function(r,e){return r<e}),maxDegree:Li("degree",function(r,e){return r>e}),minIndegree:Li("indegree",function(r,e){return r<e}),maxIndegree:Li("indegree",function(r,e){return r>e}),minOutdegree:Li("outdegree",function(r,e){return r<e}),maxOutdegree:Li("outdegree",function(r,e){return r>e})});et(Ul,{totalDegree:function(e){for(var t=0,n=this.nodes(),a=0;a<n.length;a++)t+=n[a].degree(e);return t}});var vn,X1,Z1=function(e,t,n){for(var a=0;a<e.length;a++){var i=e[a];if(!i.locked()){var o=i._private.position,u={x:t.x!=null?t.x-o.x:0,y:t.y!=null?t.y-o.y:0};i.isParent()&&!(u.x===0&&u.y===0)&&i.children().shift(u,n),i.dirtyBoundingBoxCache()}}},Xy={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,t){Z1(e,t,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}};vn=X1={position:pt.data(Xy),silentPosition:pt.data(et({},Xy,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,t){Z1(e,t,!0)},onSet:function(e){e.dirtyCompoundBoundsCache()}})),positions:function(e,t){if(dt(e))t?this.silentPosition(e):this.position(e);else if(zt(e)){var n=e,a=this.cy();a.startBatch();for(var i=0;i<this.length;i++){var o=this[i],u=void 0;(u=n(o,i))&&(t?o.silentPosition(u):o.position(u))}a.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,t,n){var a;if(dt(e)?(a={x:Ue(e.x)?e.x:0,y:Ue(e.y)?e.y:0},n=t):Ye(e)&&Ue(t)&&(a={x:0,y:0},a[e]=t),a!=null){var i=this.cy();i.startBatch();for(var o=0;o<this.length;o++){var u=this[o];if(!(i.hasCompoundNodes()&&u.isChild()&&u.ancestors().anySame(this))){var c=u.position(),f={x:c.x+a.x,y:c.y+a.y};n?u.silentPosition(f):u.position(f)}}i.endBatch()}return this},silentShift:function(e,t){return dt(e)?this.shift(e,!0):Ye(e)&&Ue(t)&&this.shift(e,t,!0),this},renderedPosition:function(e,t){var n=this[0],a=this.cy(),i=a.zoom(),o=a.pan(),u=dt(e)?e:void 0,c=u!==void 0||t!==void 0&&Ye(e);if(n&&n.isNode())if(c)for(var f=0;f<this.length;f++){var d=this[f];t!==void 0?d.position(e,(t-o[e])/i):u!==void 0&&d.position(S1(u,i,o))}else{var h=n.position();return u=Ll(h,i,o),e===void 0?u:u[e]}else if(!c)return;return this},relativePosition:function(e,t){var n=this[0],a=this.cy(),i=dt(e)?e:void 0,o=i!==void 0||t!==void 0&&Ye(e),u=a.hasCompoundNodes();if(n&&n.isNode())if(o)for(var c=0;c<this.length;c++){var f=this[c],d=u?f.parent():null,h=d&&d.length>0,g=h;h&&(d=d[0]);var p=g?d.position():{x:0,y:0};t!==void 0?f.position(e,t+p[e]):i!==void 0&&f.position({x:i.x+p.x,y:i.y+p.y})}else{var m=n.position(),y=u?n.parent():null,x=y&&y.length>0,b=x;x&&(y=y[0]);var _=b?y.position():{x:0,y:0};return i={x:m.x-_.x,y:m.y-_.y},e===void 0?i:i[e]}else if(!o)return;return this}};vn.modelPosition=vn.point=vn.position;vn.modelPositions=vn.points=vn.positions;vn.renderedPoint=vn.renderedPosition;vn.relativePoint=vn.relativePosition;var oC=X1,Xi,Ta;Xi=Ta={};Ta.renderedBoundingBox=function(r){var e=this.boundingBox(r),t=this.cy(),n=t.zoom(),a=t.pan(),i=e.x1*n+a.x,o=e.x2*n+a.x,u=e.y1*n+a.y,c=e.y2*n+a.y;return{x1:i,x2:o,y1:u,y2:c,w:o-i,h:c-u}};Ta.dirtyCompoundBoundsCache=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();return!e.styleEnabled()||!e.hasCompoundNodes()?this:(this.forEachUp(function(t){if(t.isParent()){var n=t._private;n.compoundBoundsClean=!1,n.bbCache=null,r||t.emitAndNotify("bounds")}}),this)};Ta.updateCompoundBounds=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();if(!e.styleEnabled()||!e.hasCompoundNodes())return this;if(!r&&e.batching())return this;function t(o){if(!o.isParent())return;var u=o._private,c=o.children(),f=o.pstyle("compound-sizing-wrt-labels").value==="include",d={width:{val:o.pstyle("min-width").pfValue,left:o.pstyle("min-width-bias-left"),right:o.pstyle("min-width-bias-right")},height:{val:o.pstyle("min-height").pfValue,top:o.pstyle("min-height-bias-top"),bottom:o.pstyle("min-height-bias-bottom")}},h=c.boundingBox({includeLabels:f,includeOverlays:!1,useCache:!1}),g=u.position;(h.w===0||h.h===0)&&(h={w:o.pstyle("width").pfValue,h:o.pstyle("height").pfValue},h.x1=g.x-h.w/2,h.x2=g.x+h.w/2,h.y1=g.y-h.h/2,h.y2=g.y+h.h/2);function p(M,V,q){var I=0,F=0,T=V+q;return M>0&&T>0&&(I=V/T*M,F=q/T*M),{biasDiff:I,biasComplementDiff:F}}function m(M,V,q,I){if(q.units==="%")switch(I){case"width":return M>0?q.pfValue*M:0;case"height":return V>0?q.pfValue*V:0;case"average":return M>0&&V>0?q.pfValue*(M+V)/2:0;case"min":return M>0&&V>0?M>V?q.pfValue*V:q.pfValue*M:0;case"max":return M>0&&V>0?M>V?q.pfValue*M:q.pfValue*V:0;default:return 0}else return q.units==="px"?q.pfValue:0}var y=d.width.left.value;d.width.left.units==="px"&&d.width.val>0&&(y=y*100/d.width.val);var x=d.width.right.value;d.width.right.units==="px"&&d.width.val>0&&(x=x*100/d.width.val);var b=d.height.top.value;d.height.top.units==="px"&&d.height.val>0&&(b=b*100/d.height.val);var _=d.height.bottom.value;d.height.bottom.units==="px"&&d.height.val>0&&(_=_*100/d.height.val);var E=p(d.width.val-h.w,y,x),C=E.biasDiff,B=E.biasComplementDiff,N=p(d.height.val-h.h,b,_),A=N.biasDiff,z=N.biasComplementDiff;u.autoPadding=m(h.w,h.h,o.pstyle("padding"),o.pstyle("padding-relative-to").value),u.autoWidth=Math.max(h.w,d.width.val),g.x=(-C+h.x1+h.x2+B)/2,u.autoHeight=Math.max(h.h,d.height.val),g.y=(-A+h.y1+h.y2+z)/2}for(var n=0;n<this.length;n++){var a=this[n],i=a._private;(!i.compoundBoundsClean||r)&&(t(a),e.batching()||(i.compoundBoundsClean=!0))}return this};var rn=function(e){return e===1/0||e===-1/0?0:e},hn=function(e,t,n,a,i){a-t===0||i-n===0||t==null||n==null||a==null||i==null||(e.x1=t<e.x1?t:e.x1,e.x2=a>e.x2?a:e.x2,e.y1=n<e.y1?n:e.y1,e.y2=i>e.y2?i:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},ha=function(e,t){return t==null?e:hn(e,t.x1,t.y1,t.x2,t.y2)},Zs=function(e,t,n){return Mr(e,t,n)},Yu=function(e,t,n){if(!t.cy().headless()){var a=t._private,i=a.rstyle,o=i.arrowWidth/2,u=t.pstyle(n+"-arrow-shape").value,c,f;if(u!=="none"){n==="source"?(c=i.srcX,f=i.srcY):n==="target"?(c=i.tgtX,f=i.tgtY):(c=i.midX,f=i.midY);var d=a.arrowBounds=a.arrowBounds||{},h=d[n]=d[n]||{};h.x1=c-o,h.y1=f-o,h.x2=c+o,h.y2=f+o,h.w=h.x2-h.x1,h.h=h.y2-h.y1,sl(h,1),hn(e,h.x1,h.y1,h.x2,h.y2)}}},ch=function(e,t,n){if(!t.cy().headless()){var a;n?a=n+"-":a="";var i=t._private,o=i.rstyle,u=t.pstyle(a+"label").strValue;if(u){var c=t.pstyle("text-halign"),f=t.pstyle("text-valign"),d=Zs(o,"labelWidth",n),h=Zs(o,"labelHeight",n),g=Zs(o,"labelX",n),p=Zs(o,"labelY",n),m=t.pstyle(a+"text-margin-x").pfValue,y=t.pstyle(a+"text-margin-y").pfValue,x=t.isEdge(),b=t.pstyle(a+"text-rotation"),_=t.pstyle("text-outline-width").pfValue,E=t.pstyle("text-border-width").pfValue,C=E/2,B=t.pstyle("text-background-padding").pfValue,N=2,A=h,z=d,M=z/2,V=A/2,q,I,F,T;if(x)q=g-M,I=g+M,F=p-V,T=p+V;else{switch(c.value){case"left":q=g-z,I=g;break;case"center":q=g-M,I=g+M;break;case"right":q=g,I=g+z;break}switch(f.value){case"top":F=p-A,T=p;break;case"center":F=p-V,T=p+V;break;case"bottom":F=p,T=p+A;break}}var G=m-Math.max(_,C)-B-N,Q=m+Math.max(_,C)+B+N,W=y-Math.max(_,C)-B-N,X=y+Math.max(_,C)+B+N;q+=G,I+=Q,F+=W,T+=X;var Z=n||"main",te=i.labelBounds,L=te[Z]=te[Z]||{};L.x1=q,L.y1=F,L.x2=I,L.y2=T,L.w=I-q,L.h=T-F,L.leftPad=G,L.rightPad=Q,L.topPad=W,L.botPad=X;var U=x&&b.strValue==="autorotate",oe=b.pfValue!=null&&b.pfValue!==0;if(U||oe){var ie=U?Zs(i.rstyle,"labelAngle",n):b.pfValue,ne=Math.cos(ie),we=Math.sin(ie),Pe=(q+I)/2,Ce=(F+T)/2;if(!x){switch(c.value){case"left":Pe=I;break;case"right":Pe=q;break}switch(f.value){case"top":Ce=T;break;case"bottom":Ce=F;break}}var ge=function(Y,K){return Y=Y-Pe,K=K-Ce,{x:Y*ne-K*we+Pe,y:Y*we+K*ne+Ce}},ce=ge(q,F),de=ge(q,T),be=ge(I,F),Re=ge(I,T);q=Math.min(ce.x,de.x,be.x,Re.x),I=Math.max(ce.x,de.x,be.x,Re.x),F=Math.min(ce.y,de.y,be.y,Re.y),T=Math.max(ce.y,de.y,be.y,Re.y)}var D=Z+"Rot",ve=te[D]=te[D]||{};ve.x1=q,ve.y1=F,ve.x2=I,ve.y2=T,ve.w=I-q,ve.h=T-F,hn(e,q,F,I,T),hn(i.labelBounds.all,q,F,I,T)}return e}},Zy=function(e,t){if(!t.cy().headless()){var n=t.pstyle("outline-opacity").value,a=t.pstyle("outline-width").value,i=t.pstyle("outline-offset").value,o=a+i;Y1(e,t,n,o,"outside",o/2)}},Y1=function(e,t,n,a,i,o){if(!(n===0||a<=0||i==="inside")){var u=t.cy(),c=t.pstyle("shape").value,f=u.renderer().nodeShapes[c],d=t.position(),h=d.x,g=d.y,p=t.width(),m=t.height();if(f.hasMiterBounds){i==="center"&&(a/=2);var y=f.miterBounds(h,g,p,m,a);ha(e,y)}else o!=null&&o>0&&ol(e,[o,o,o,o])}},uC=function(e,t){if(!t.cy().headless()){var n=t.pstyle("border-opacity").value,a=t.pstyle("border-width").pfValue,i=t.pstyle("border-position").value;Y1(e,t,n,a,i)}},lC=function(e,t){var n=e._private.cy,a=n.styleEnabled(),i=n.headless(),o=Rr(),u=e._private,c=e.isNode(),f=e.isEdge(),d,h,g,p,m,y,x=u.rstyle,b=c&&a?e.pstyle("bounds-expansion").pfValue:[0],_=function(pe){return pe.pstyle("display").value!=="none"},E=!a||_(e)&&(!f||_(e.source())&&_(e.target()));if(E){var C=0,B=0;a&&t.includeOverlays&&(C=e.pstyle("overlay-opacity").value,C!==0&&(B=e.pstyle("overlay-padding").value));var N=0,A=0;a&&t.includeUnderlays&&(N=e.pstyle("underlay-opacity").value,N!==0&&(A=e.pstyle("underlay-padding").value));var z=Math.max(B,A),M=0,V=0;if(a&&(M=e.pstyle("width").pfValue,V=M/2),c&&t.includeNodes){var q=e.position();m=q.x,y=q.y;var I=e.outerWidth(),F=I/2,T=e.outerHeight(),G=T/2;d=m-F,h=m+F,g=y-G,p=y+G,hn(o,d,g,h,p),a&&Zy(o,e),a&&t.includeOutlines&&!i&&Zy(o,e),a&&uC(o,e)}else if(f&&t.includeEdges)if(a&&!i){var Q=e.pstyle("curve-style").strValue;if(d=Math.min(x.srcX,x.midX,x.tgtX),h=Math.max(x.srcX,x.midX,x.tgtX),g=Math.min(x.srcY,x.midY,x.tgtY),p=Math.max(x.srcY,x.midY,x.tgtY),d-=V,h+=V,g-=V,p+=V,hn(o,d,g,h,p),Q==="haystack"){var W=x.haystackPts;if(W&&W.length===2){if(d=W[0].x,g=W[0].y,h=W[1].x,p=W[1].y,d>h){var X=d;d=h,h=X}if(g>p){var Z=g;g=p,p=Z}hn(o,d-V,g-V,h+V,p+V)}}else if(Q==="bezier"||Q==="unbundled-bezier"||va(Q,"segments")||va(Q,"taxi")){var te;switch(Q){case"bezier":case"unbundled-bezier":te=x.bezierPts;break;case"segments":case"taxi":case"round-segments":case"round-taxi":te=x.linePts;break}if(te!=null)for(var L=0;L<te.length;L++){var U=te[L];d=U.x-V,h=U.x+V,g=U.y-V,p=U.y+V,hn(o,d,g,h,p)}}}else{var oe=e.source(),ie=oe.position(),ne=e.target(),we=ne.position();if(d=ie.x,h=we.x,g=ie.y,p=we.y,d>h){var Pe=d;d=h,h=Pe}if(g>p){var Ce=g;g=p,p=Ce}d-=V,h+=V,g-=V,p+=V,hn(o,d,g,h,p)}if(a&&t.includeEdges&&f&&(Yu(o,e,"mid-source"),Yu(o,e,"mid-target"),Yu(o,e,"source"),Yu(o,e,"target")),a){var ge=e.pstyle("ghost").value==="yes";if(ge){var ce=e.pstyle("ghost-offset-x").pfValue,de=e.pstyle("ghost-offset-y").pfValue;hn(o,o.x1+ce,o.y1+de,o.x2+ce,o.y2+de)}}var be=u.bodyBounds=u.bodyBounds||{};Nm(be,o),ol(be,b),sl(be,1),a&&(d=o.x1,h=o.x2,g=o.y1,p=o.y2,hn(o,d-z,g-z,h+z,p+z));var Re=u.overlayBounds=u.overlayBounds||{};Nm(Re,o),ol(Re,b),sl(Re,1);var D=u.labelBounds=u.labelBounds||{};D.all!=null?qE(D.all):D.all=Rr(),a&&t.includeLabels&&(t.includeMainLabels&&ch(o,e,null),f&&(t.includeSourceLabels&&ch(o,e,"source"),t.includeTargetLabels&&ch(o,e,"target")))}return o.x1=rn(o.x1),o.y1=rn(o.y1),o.x2=rn(o.x2),o.y2=rn(o.y2),o.w=rn(o.x2-o.x1),o.h=rn(o.y2-o.y1),o.w>0&&o.h>0&&E&&(ol(o,b),sl(o,1)),o},Q1=function(e){var t=0,n=function(o){return(o?1:0)<<t++},a=0;return a+=n(e.incudeNodes),a+=n(e.includeEdges),a+=n(e.includeLabels),a+=n(e.includeMainLabels),a+=n(e.includeSourceLabels),a+=n(e.includeTargetLabels),a+=n(e.includeOverlays),a+=n(e.includeOutlines),a},J1=function(e){var t=function(u){return Math.round(u)};if(e.isEdge()){var n=e.source().position(),a=e.target().position();return Rm([t(n.x),t(n.y),t(a.x),t(a.y)])}else{var i=e.position();return Rm([t(i.x),t(i.y)])}},Yy=function(e,t){var n=e._private,a,i=e.isEdge(),o=t==null?Qy:Q1(t),u=o===Qy;if(n.bbCache==null?(a=lC(e,mo),n.bbCache=a,n.bbCachePosKey=J1(e)):a=n.bbCache,!u){var c=e.isNode();a=Rr(),(t.includeNodes&&c||t.includeEdges&&!c)&&(t.includeOverlays?ha(a,n.overlayBounds):ha(a,n.bodyBounds)),t.includeLabels&&(t.includeMainLabels&&(!i||t.includeSourceLabels&&t.includeTargetLabels)?ha(a,n.labelBounds.all):(t.includeMainLabels&&ha(a,n.labelBounds.mainRot),t.includeSourceLabels&&ha(a,n.labelBounds.sourceRot),t.includeTargetLabels&&ha(a,n.labelBounds.targetRot))),a.w=a.x2-a.x1,a.h=a.y2-a.y1}return a},mo={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},Qy=Q1(mo),Jy=dr(mo);Ta.boundingBox=function(r){var e,t=r===void 0||r.useCache===void 0||r.useCache===!0,n=Zi(function(d){var h=d._private;return h.bbCache==null||h.styleDirty||h.bbCachePosKey!==J1(d)},function(d){return d.id()});if(t&&this.length===1&&!n(this[0]))r===void 0?r=mo:r=Jy(r),e=Yy(this[0],r);else{e=Rr(),r=r||mo;var a=Jy(r),i=this,o=i.cy(),u=o.styleEnabled();this.edges().forEach(n),this.nodes().forEach(n),u&&this.recalculateRenderedStyle(t),this.updateCompoundBounds(!t);for(var c=0;c<i.length;c++){var f=i[c];n(f)&&f.dirtyBoundingBoxCache(),ha(e,Yy(f,a))}}return e.x1=rn(e.x1),e.y1=rn(e.y1),e.x2=rn(e.x2),e.y2=rn(e.y2),e.w=rn(e.x2-e.x1),e.h=rn(e.y2-e.y1),e};Ta.dirtyBoundingBoxCache=function(){for(var r=0;r<this.length;r++){var e=this[r]._private;e.bbCache=null,e.bbCachePosKey=null,e.bodyBounds=null,e.overlayBounds=null,e.labelBounds.all=null,e.labelBounds.source=null,e.labelBounds.target=null,e.labelBounds.main=null,e.labelBounds.sourceRot=null,e.labelBounds.targetRot=null,e.labelBounds.mainRot=null,e.arrowBounds.source=null,e.arrowBounds.target=null,e.arrowBounds["mid-source"]=null,e.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this};Ta.boundingBoxAt=function(r){var e=this.nodes(),t=this.cy(),n=t.hasCompoundNodes(),a=t.collection();if(n&&(a=e.filter(function(f){return f.isParent()}),e=e.not(a)),dt(r)){var i=r;r=function(){return i}}var o=function(d,h){return d._private.bbAtOldPos=r(d,h)},u=function(d){return d._private.bbAtOldPos};t.startBatch(),e.forEach(o).silentPositions(r),n&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0));var c=jE(this.boundingBox({useCache:!1}));return e.silentPositions(u),n&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0)),t.endBatch(),c};Xi.boundingbox=Xi.bb=Xi.boundingBox;Xi.renderedBoundingbox=Xi.renderedBoundingBox;var cC=Ta,ao,Bo;ao=Bo={};var ew=function(e){e.uppercaseName=vm(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=vm(e.outerName),ao[e.name]=function(){var n=this[0],a=n._private,i=a.cy,o=i._private.styleEnabled;if(n)if(o){if(n.isParent())return n.updateCompoundBounds(),a[e.autoName]||0;var u=n.pstyle(e.name);switch(u.strValue){case"label":return n.recalculateRenderedStyle(),a.rstyle[e.labelName]||0;default:return u.pfValue}}else return 1},ao["outer"+e.uppercaseName]=function(){var n=this[0],a=n._private,i=a.cy,o=i._private.styleEnabled;if(n)if(o){var u=n[e.name](),c=n.pstyle("border-position").value,f;c==="center"?f=n.pstyle("border-width").pfValue:c==="outside"?f=2*n.pstyle("border-width").pfValue:f=0;var d=2*n.padding();return u+f+d}else return 1},ao["rendered"+e.uppercaseName]=function(){var n=this[0];if(n){var a=n[e.name]();return a*this.cy().zoom()}},ao["rendered"+e.uppercaseOuterName]=function(){var n=this[0];if(n){var a=n[e.outerName]();return a*this.cy().zoom()}}};ew({name:"width"});ew({name:"height"});Bo.padding=function(){var r=this[0],e=r._private;return r.isParent()?(r.updateCompoundBounds(),e.autoPadding!==void 0?e.autoPadding:r.pstyle("padding").pfValue):r.pstyle("padding").pfValue};Bo.paddedHeight=function(){var r=this[0];return r.height()+2*r.padding()};Bo.paddedWidth=function(){var r=this[0];return r.width()+2*r.padding()};var fC=Bo,dC=function(e,t){if(e.isEdge()&&e.takesUpSpace())return t(e)},hC=function(e,t){if(e.isEdge()&&e.takesUpSpace()){var n=e.cy();return Ll(t(e),n.zoom(),n.pan())}},vC=function(e,t){if(e.isEdge()&&e.takesUpSpace()){var n=e.cy(),a=n.pan(),i=n.zoom();return t(e).map(function(o){return Ll(o,i,a)})}},pC=function(e){return e.renderer().getControlPoints(e)},gC=function(e){return e.renderer().getSegmentPoints(e)},mC=function(e){return e.renderer().getSourceEndpoint(e)},yC=function(e){return e.renderer().getTargetEndpoint(e)},wC=function(e){return e.renderer().getEdgeMidpoint(e)},e0={controlPoints:{get:pC,mult:!0},segmentPoints:{get:gC,mult:!0},sourceEndpoint:{get:mC},targetEndpoint:{get:yC},midpoint:{get:wC}},xC=function(e){return"rendered"+e[0].toUpperCase()+e.substr(1)},bC=Object.keys(e0).reduce(function(r,e){var t=e0[e],n=xC(e);return r[e]=function(){return dC(this,t.get)},t.mult?r[n]=function(){return vC(this,t.get)}:r[n]=function(){return hC(this,t.get)},r},{}),_C=et({},oC,cC,fC,bC);/*!
Event object based on jQuery events, MIT license

https://jquery.org/license/
https://tldrlegal.com/license/mit-license
https://github.com/jquery/jquery/blob/master/src/event.js
*/var tw=function(e,t){this.recycle(e,t)};function Ys(){return!1}function Qu(){return!0}tw.prototype={instanceString:function(){return"event"},recycle:function(e,t){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=Ys,e!=null&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?Qu:Ys):e!=null&&e.type?t=e:this.type=e,t!=null&&(this.originalEvent=t.originalEvent,this.type=t.type!=null?t.type:this.type,this.cy=t.cy,this.target=t.target,this.position=t.position,this.renderedPosition=t.renderedPosition,this.namespace=t.namespace,this.layout=t.layout),this.cy!=null&&this.position!=null&&this.renderedPosition==null){var n=this.position,a=this.cy.zoom(),i=this.cy.pan();this.renderedPosition={x:n.x*a+i.x,y:n.y*a+i.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=Qu;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=Qu;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=Qu,this.stopPropagation()},isDefaultPrevented:Ys,isPropagationStopped:Ys,isImmediatePropagationStopped:Ys};var rw=/^([^.]+)(\.(?:[^.]+))?$/,EC=".*",nw={qualifierCompare:function(e,t){return e===t},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},t0=Object.keys(nw),SC={};function $l(){for(var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:SC,e=arguments.length>1?arguments[1]:void 0,t=0;t<t0.length;t++){var n=t0[t];this[n]=r[n]||nw[n]}this.context=e||this.context,this.listeners=[],this.emitting=0}var Sa=$l.prototype,aw=function(e,t,n,a,i,o,u){zt(a)&&(i=a,a=null),u&&(o==null?o=u:o=et({},o,u));for(var c=wt(n)?n:n.split(/\s+/),f=0;f<c.length;f++){var d=c[f];if(!wa(d)){var h=d.match(rw);if(h){var g=h[1],p=h[2]?h[2]:null,m=t(e,d,g,p,a,i,o);if(m===!1)break}}}},r0=function(e,t){return e.addEventFields(e.context,t),new tw(t.type,t)},kC=function(e,t,n){if(A_(n)){t(e,n);return}else if(dt(n)){t(e,r0(e,n));return}for(var a=wt(n)?n:n.split(/\s+/),i=0;i<a.length;i++){var o=a[i];if(!wa(o)){var u=o.match(rw);if(u){var c=u[1],f=u[2]?u[2]:null,d=r0(e,{type:c,namespace:f,target:e.context});t(e,d)}}}};Sa.on=Sa.addListener=function(r,e,t,n,a){return aw(this,function(i,o,u,c,f,d,h){zt(d)&&i.listeners.push({event:o,callback:d,type:u,namespace:c,qualifier:f,conf:h})},r,e,t,n,a),this};Sa.one=function(r,e,t,n){return this.on(r,e,t,n,{one:!0})};Sa.removeListener=Sa.off=function(r,e,t,n){var a=this;this.emitting!==0&&(this.listeners=hE(this.listeners));for(var i=this.listeners,o=function(f){var d=i[f];aw(a,function(h,g,p,m,y,x){if((d.type===p||r==="*")&&(!m&&d.namespace!==".*"||d.namespace===m)&&(!y||h.qualifierCompare(d.qualifier,y))&&(!x||d.callback===x))return i.splice(f,1),!1},r,e,t,n)},u=i.length-1;u>=0;u--)o(u);return this};Sa.removeAllListeners=function(){return this.removeListener("*")};Sa.emit=Sa.trigger=function(r,e,t){var n=this.listeners,a=n.length;return this.emitting++,wt(e)||(e=[e]),kC(this,function(i,o){t!=null&&(n=[{event:o.event,type:o.type,namespace:o.namespace,callback:t}],a=n.length);for(var u=function(){var d=n[c];if(d.type===o.type&&(!d.namespace||d.namespace===o.namespace||d.namespace===EC)&&i.eventMatches(i.context,d,o)){var h=[o];e!=null&&pE(h,e),i.beforeEmit(i.context,d,o),d.conf&&d.conf.one&&(i.listeners=i.listeners.filter(function(m){return m!==d}));var g=i.callbackContext(i.context,d,o),p=d.callback.apply(g,h);i.afterEmit(i.context,d,o),p===!1&&(o.stopPropagation(),o.preventDefault())}},c=0;c<a;c++)u();i.bubble(i.context)&&!o.isPropagationStopped()&&i.parent(i.context).emit(o,e)},r),this.emitting--,this};var CC={qualifierCompare:function(e,t){return e==null||t==null?e==null&&t==null:e.sameText(t)},eventMatches:function(e,t,n){var a=t.qualifier;return a!=null?e!==n.target&&So(n.target)&&a.matches(n.target):!0},addEventFields:function(e,t){t.cy=e.cy(),t.target=e},callbackContext:function(e,t,n){return t.qualifier!=null?n.target:e},beforeEmit:function(e,t){t.conf&&t.conf.once&&t.conf.onceCollection.removeListener(t.event,t.qualifier,t.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},Ju=function(e){return Ye(e)?new _a(e):e},iw={createEmitter:function(){for(var e=0;e<this.length;e++){var t=this[e],n=t._private;n.emitter||(n.emitter=new $l(CC,t))}return this},emitter:function(){return this._private.emitter},on:function(e,t,n){for(var a=Ju(t),i=0;i<this.length;i++){var o=this[i];o.emitter().on(e,a,n)}return this},removeListener:function(e,t,n){for(var a=Ju(t),i=0;i<this.length;i++){var o=this[i];o.emitter().removeListener(e,a,n)}return this},removeAllListeners:function(){for(var e=0;e<this.length;e++){var t=this[e];t.emitter().removeAllListeners()}return this},one:function(e,t,n){for(var a=Ju(t),i=0;i<this.length;i++){var o=this[i];o.emitter().one(e,a,n)}return this},once:function(e,t,n){for(var a=Ju(t),i=0;i<this.length;i++){var o=this[i];o.emitter().on(e,a,n,{once:!0,onceCollection:this})}},emit:function(e,t){for(var n=0;n<this.length;n++){var a=this[n];a.emitter().emit(e,t)}return this},emitAndNotify:function(e,t){if(this.length!==0)return this.cy().notify(e,this),this.emit(e,t),this}};pt.eventAliasesOn(iw);var sw={nodes:function(e){return this.filter(function(t){return t.isNode()}).filter(e)},edges:function(e){return this.filter(function(t){return t.isEdge()}).filter(e)},byGroup:function(){for(var e=this.spawn(),t=this.spawn(),n=0;n<this.length;n++){var a=this[n];a.isNode()?e.push(a):t.push(a)}return{nodes:e,edges:t}},filter:function(e,t){if(e===void 0)return this;if(Ye(e)||Hr(e))return new _a(e).filter(this);if(zt(e)){for(var n=this.spawn(),a=this,i=0;i<a.length;i++){var o=a[i],u=t?e.apply(t,[o,i,a]):e(o,i,a);u&&n.push(o)}return n}return this.spawn()},not:function(e){if(e){Ye(e)&&(e=this.filter(e));for(var t=this.spawn(),n=0;n<this.length;n++){var a=this[n],i=e.has(a);i||t.push(a)}return t}else return this},absoluteComplement:function(){var e=this.cy();return e.mutableElements().not(this)},intersect:function(e){if(Ye(e)){var t=e;return this.filter(t)}for(var n=this.spawn(),a=this,i=e,o=this.length<e.length,u=o?a:i,c=o?i:a,f=0;f<u.length;f++){var d=u[f];c.has(d)&&n.push(d)}return n},xor:function(e){var t=this._private.cy;Ye(e)&&(e=t.$(e));var n=this.spawn(),a=this,i=e,o=function(c,f){for(var d=0;d<c.length;d++){var h=c[d],g=h._private.data.id,p=f.hasElementWithId(g);p||n.push(h)}};return o(a,i),o(i,a),n},diff:function(e){var t=this._private.cy;Ye(e)&&(e=t.$(e));var n=this.spawn(),a=this.spawn(),i=this.spawn(),o=this,u=e,c=function(d,h,g){for(var p=0;p<d.length;p++){var m=d[p],y=m._private.data.id,x=h.hasElementWithId(y);x?i.merge(m):g.push(m)}};return c(o,u,n),c(u,o,a),{left:n,right:a,both:i}},add:function(e){var t=this._private.cy;if(!e)return this;if(Ye(e)){var n=e;e=t.mutableElements().filter(n)}for(var a=this.spawnSelf(),i=0;i<e.length;i++){var o=e[i],u=!this.has(o);u&&a.push(o)}return a},merge:function(e){var t=this._private,n=t.cy;if(!e)return this;if(e&&Ye(e)){var a=e;e=n.mutableElements().filter(a)}for(var i=t.map,o=0;o<e.length;o++){var u=e[o],c=u._private.data.id,f=!i.has(c);if(f){var d=this.length++;this[d]=u,i.set(c,{ele:u,index:d})}}return this},unmergeAt:function(e){var t=this[e],n=t.id(),a=this._private,i=a.map;this[e]=void 0,i.delete(n);var o=e===this.length-1;if(this.length>1&&!o){var u=this.length-1,c=this[u],f=c._private.data.id;this[u]=void 0,this[e]=c,i.set(f,{ele:c,index:e})}return this.length--,this},unmergeOne:function(e){e=e[0];var t=this._private,n=e._private.data.id,a=t.map,i=a.get(n);if(!i)return this;var o=i.index;return this.unmergeAt(o),this},unmerge:function(e){var t=this._private.cy;if(!e)return this;if(e&&Ye(e)){var n=e;e=t.mutableElements().filter(n)}for(var a=0;a<e.length;a++)this.unmergeOne(e[a]);return this},unmergeBy:function(e){for(var t=this.length-1;t>=0;t--){var n=this[t];e(n)&&this.unmergeAt(t)}return this},map:function(e,t){for(var n=[],a=this,i=0;i<a.length;i++){var o=a[i],u=t?e.apply(t,[o,i,a]):e(o,i,a);n.push(u)}return n},reduce:function(e,t){for(var n=t,a=this,i=0;i<a.length;i++)n=e(n,a[i],i,a);return n},max:function(e,t){for(var n=-1/0,a,i=this,o=0;o<i.length;o++){var u=i[o],c=t?e.apply(t,[u,o,i]):e(u,o,i);c>n&&(n=c,a=u)}return{value:n,ele:a}},min:function(e,t){for(var n=1/0,a,i=this,o=0;o<i.length;o++){var u=i[o],c=t?e.apply(t,[u,o,i]):e(u,o,i);c<n&&(n=c,a=u)}return{value:n,ele:a}}},vt=sw;vt.u=vt["|"]=vt["+"]=vt.union=vt.or=vt.add;vt["\\"]=vt["!"]=vt["-"]=vt.difference=vt.relativeComplement=vt.subtract=vt.not;vt.n=vt["&"]=vt["."]=vt.and=vt.intersection=vt.intersect;vt["^"]=vt["(+)"]=vt["(-)"]=vt.symmetricDifference=vt.symdiff=vt.xor;vt.fnFilter=vt.filterFn=vt.stdFilter=vt.filter;vt.complement=vt.abscomp=vt.absoluteComplement;var TC={isNode:function(){return this.group()==="nodes"},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},ow=function(e,t){var n=e.cy(),a=n.hasCompoundNodes();function i(d){var h=d.pstyle("z-compound-depth");return h.value==="auto"?a?d.zDepth():0:h.value==="bottom"?-1:h.value==="top"?Kh:0}var o=i(e)-i(t);if(o!==0)return o;function u(d){var h=d.pstyle("z-index-compare");return h.value==="auto"&&d.isNode()?1:0}var c=u(e)-u(t);if(c!==0)return c;var f=e.pstyle("z-index").value-t.pstyle("z-index").value;return f!==0?f:e.poolIndex()-t.poolIndex()},El={forEach:function(e,t){if(zt(e))for(var n=this.length,a=0;a<n;a++){var i=this[a],o=t?e.apply(t,[i,a,this]):e(i,a,this);if(o===!1)break}return this},toArray:function(){for(var e=[],t=0;t<this.length;t++)e.push(this[t]);return e},slice:function(e,t){var n=[],a=this.length;t==null&&(t=a),e==null&&(e=0),e<0&&(e=a+e),t<0&&(t=a+t);for(var i=e;i>=0&&i<t&&i<a;i++)n.push(this[i]);return this.spawn(n)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return this.length===0},nonempty:function(){return!this.empty()},sort:function(e){if(!zt(e))return this;var t=this.toArray().sort(e);return this.spawn(t)},sortByZIndex:function(){return this.sort(ow)},zDepth:function(){var e=this[0];if(e){var t=e._private,n=t.group;if(n==="nodes"){var a=t.data.parent?e.parents().size():0;return e.isParent()?a:Kh-1}else{var i=t.source,o=t.target,u=i.zDepth(),c=o.zDepth();return Math.max(u,c,0)}}}};El.each=El.forEach;var PC=function(){var e="undefined",t=(typeof Symbol>"u"?"undefined":Jt(Symbol))!=e&&Jt(Symbol.iterator)!=e;t&&(El[Symbol.iterator]=function(){var n=this,a={value:void 0,done:!1},i=0,o=this.length;return i1({next:function(){return i<o?a.value=n[i++]:(a.value=void 0,a.done=!0),a}},Symbol.iterator,function(){return this})})};PC();var RC=dr({nodeDimensionsIncludeLabels:!1}),ll={layoutDimensions:function(e){e=RC(e);var t;if(!this.takesUpSpace())t={w:0,h:0};else if(e.nodeDimensionsIncludeLabels){var n=this.boundingBox();t={w:n.w,h:n.h}}else t={w:this.outerWidth(),h:this.outerHeight()};return(t.w===0||t.h===0)&&(t.w=t.h=1),t},layoutPositions:function(e,t,n){var a=this.nodes().filter(function(B){return!B.isParent()}),i=this.cy(),o=t.eles,u=function(N){return N.id()},c=Zi(n,u);e.emit({type:"layoutstart",layout:e}),e.animations=[];var f=function(N,A,z){var M={x:A.x1+A.w/2,y:A.y1+A.h/2},V={x:(z.x-M.x)*N,y:(z.y-M.y)*N};return{x:M.x+V.x,y:M.y+V.y}},d=t.spacingFactor&&t.spacingFactor!==1,h=function(){if(!d)return null;for(var N=Rr(),A=0;A<a.length;A++){var z=a[A],M=c(z,A);k1(N,M.x,M.y)}return N},g=h(),p=Zi(function(B,N){var A=c(B,N);if(d){var z=Math.abs(t.spacingFactor);A=f(z,g,A)}return t.transform!=null&&(A=t.transform(B,A)),A},u);if(t.animate){for(var m=0;m<a.length;m++){var y=a[m],x=p(y,m),b=t.animateFilter==null||t.animateFilter(y,m);if(b){var _=y.animation({position:x,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(_)}else y.position(x)}if(t.fit){var E=i.animation({fit:{boundingBox:o.boundingBoxAt(p),padding:t.padding},duration:t.animationDuration,easing:t.animationEasing});e.animations.push(E)}else if(t.zoom!==void 0&&t.pan!==void 0){var C=i.animation({zoom:t.zoom,pan:t.pan,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(C)}e.animations.forEach(function(B){return B.play()}),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),es.all(e.animations.map(function(B){return B.promise()})).then(function(){e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e})})}else a.positions(p),t.fit&&i.fit(t.eles,t.padding),t.zoom!=null&&i.zoom(t.zoom),t.pan&&i.pan(t.pan),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){var t=this.cy();return t.makeLayout(et({},e,{eles:this}))}};ll.createLayout=ll.makeLayout=ll.layout;function uw(r,e,t){var n=t._private,a=n.styleCache=n.styleCache||[],i;return(i=a[r])!=null||(i=a[r]=e(t)),i}function Vl(r,e){return r=Qa(r),function(n){return uw(r,e,n)}}function jl(r,e){r=Qa(r);var t=function(a){return e.call(a)};return function(){var a=this[0];if(a)return uw(r,t,a)}}var cr={recalculateRenderedStyle:function(e){var t=this.cy(),n=t.renderer(),a=t.styleEnabled();return n&&a&&n.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e=this.cy(),t=function(i){return i._private.styleCache=null};if(e.hasCompoundNodes()){var n;n=this.spawnSelf().merge(this.descendants()).merge(this.parents()),n.merge(n.connectedEdges()),n.forEach(t)}else this.forEach(function(a){t(a),a.connectedEdges().forEach(t)});return this},updateStyle:function(e){var t=this._private.cy;if(!t.styleEnabled())return this;if(t.batching()){var n=t._private.batchStyleEles;return n.merge(this),this}var a=t.hasCompoundNodes(),i=this;e=!!(e||e===void 0),a&&(i=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var o=i;return e?o.emitAndNotify("style"):o.emit("style"),i.forEach(function(u){return u._private.styleDirty=!0}),this},cleanStyle:function(){var e=this.cy();if(e.styleEnabled())for(var t=0;t<this.length;t++){var n=this[t];n._private.styleDirty&&(n._private.styleDirty=!1,e.style().apply(n))}},parsedStyle:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this[0],a=n.cy();if(a.styleEnabled()&&n){n._private.styleDirty&&(n._private.styleDirty=!1,a.style().apply(n));var i=n._private.style[e];return i??(t?a.style().getDefaultProperty(e):null)}},numericStyle:function(e){var t=this[0];if(t.cy().styleEnabled()&&t){var n=t.pstyle(e);return n.pfValue!==void 0?n.pfValue:n.value}},numericStyleUnits:function(e){var t=this[0];if(t.cy().styleEnabled()&&t)return t.pstyle(e).units},renderedStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=this[0];if(n)return t.style().getRenderedStyle(n,e)},style:function(e,t){var n=this.cy();if(!n.styleEnabled())return this;var a=!1,i=n.style();if(dt(e)){var o=e;i.applyBypass(this,o,a),this.emitAndNotify("style")}else if(Ye(e))if(t===void 0){var u=this[0];return u?i.getStylePropertyValue(u,e):void 0}else i.applyBypass(this,e,t,a),this.emitAndNotify("style");else if(e===void 0){var c=this[0];return c?i.getRawStyle(c):void 0}return this},removeStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=!1,a=t.style(),i=this;if(e===void 0)for(var o=0;o<i.length;o++){var u=i[o];a.removeAllBypasses(u,n)}else{e=e.split(/\s+/);for(var c=0;c<i.length;c++){var f=i[c];a.removeBypasses(f,e,n)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var t=e.hasCompoundNodes(),n=this[0];if(n){var a=n._private,i=n.pstyle("opacity").value;if(!t)return i;var o=a.data.parent?n.parents():null;if(o)for(var u=0;u<o.length;u++){var c=o[u],f=c.pstyle("opacity").value;i=f*i}return i}},transparent:function(){var e=this.cy();if(!e.styleEnabled())return!1;var t=this[0],n=t.cy().hasCompoundNodes();if(t)return n?t.effectiveOpacity()===0:t.pstyle("opacity").value===0},backgrounding:function(){var e=this.cy();if(!e.styleEnabled())return!1;var t=this[0];return!!t._private.backgrounding}};function fh(r,e){var t=r._private,n=t.data.parent?r.parents():null;if(n)for(var a=0;a<n.length;a++){var i=n[a];if(!e(i))return!1}return!0}function sv(r){var e=r.ok,t=r.edgeOkViaNode||r.ok,n=r.parentOk||r.ok;return function(){var a=this.cy();if(!a.styleEnabled())return!0;var i=this[0],o=a.hasCompoundNodes();if(i){var u=i._private;if(!e(i))return!1;if(i.isNode())return!o||fh(i,n);var c=u.source,f=u.target;return t(c)&&(!o||fh(c,t))&&(c===f||t(f)&&(!o||fh(f,t)))}}}var ts=Vl("eleTakesUpSpace",function(r){return r.pstyle("display").value==="element"&&r.width()!==0&&(r.isNode()?r.height()!==0:!0)});cr.takesUpSpace=jl("takesUpSpace",sv({ok:ts}));var BC=Vl("eleInteractive",function(r){return r.pstyle("events").value==="yes"&&r.pstyle("visibility").value==="visible"&&ts(r)}),AC=Vl("parentInteractive",function(r){return r.pstyle("visibility").value==="visible"&&ts(r)});cr.interactive=jl("interactive",sv({ok:BC,parentOk:AC,edgeOkViaNode:ts}));cr.noninteractive=function(){var r=this[0];if(r)return!r.interactive()};var DC=Vl("eleVisible",function(r){return r.pstyle("visibility").value==="visible"&&r.pstyle("opacity").pfValue!==0&&ts(r)}),IC=ts;cr.visible=jl("visible",sv({ok:DC,edgeOkViaNode:IC}));cr.hidden=function(){var r=this[0];if(r)return!r.visible()};cr.isBundledBezier=jl("isBundledBezier",function(){return this.cy().styleEnabled()?!this.removed()&&this.pstyle("curve-style").value==="bezier"&&this.takesUpSpace():!1});cr.bypass=cr.css=cr.style;cr.renderedCss=cr.renderedStyle;cr.removeBypass=cr.removeCss=cr.removeStyle;cr.pstyle=cr.parsedStyle;var ya={};function n0(r){return function(){var e=arguments,t=[];if(e.length===2){var n=e[0],a=e[1];this.on(r.event,n,a)}else if(e.length===1&&zt(e[0])){var i=e[0];this.on(r.event,i)}else if(e.length===0||e.length===1&&wt(e[0])){for(var o=e.length===1?e[0]:null,u=0;u<this.length;u++){var c=this[u],f=!r.ableField||c._private[r.ableField],d=c._private[r.field]!=r.value;if(r.overrideAble){var h=r.overrideAble(c);if(h!==void 0&&(f=h,!h))return this}f&&(c._private[r.field]=r.value,d&&t.push(c))}var g=this.spawn(t);g.updateStyle(),g.emit(r.event),o&&g.emit(o)}return this}}function rs(r){ya[r.field]=function(){var e=this[0];if(e){if(r.overrideField){var t=r.overrideField(e);if(t!==void 0)return t}return e._private[r.field]}},ya[r.on]=n0({event:r.on,field:r.field,ableField:r.ableField,overrideAble:r.overrideAble,value:!0}),ya[r.off]=n0({event:r.off,field:r.field,ableField:r.ableField,overrideAble:r.overrideAble,value:!1})}rs({field:"locked",overrideField:function(e){return e.cy().autolock()?!0:void 0},on:"lock",off:"unlock"});rs({field:"grabbable",overrideField:function(e){return e.cy().autoungrabify()||e.pannable()?!1:void 0},on:"grabify",off:"ungrabify"});rs({field:"selected",ableField:"selectable",overrideAble:function(e){return e.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"});rs({field:"selectable",overrideField:function(e){return e.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"});ya.deselect=ya.unselect;ya.grabbed=function(){var r=this[0];if(r)return r._private.grabbed};rs({field:"active",on:"activate",off:"unactivate"});rs({field:"pannable",on:"panify",off:"unpanify"});ya.inactive=function(){var r=this[0];if(r)return!r._private.active};var xr={},a0=function(e){return function(n){for(var a=this,i=[],o=0;o<a.length;o++){var u=a[o];if(u.isNode()){for(var c=!1,f=u.connectedEdges(),d=0;d<f.length;d++){var h=f[d],g=h.source(),p=h.target();if(e.noIncomingEdges&&p===u&&g!==u||e.noOutgoingEdges&&g===u&&p!==u){c=!0;break}}c||i.push(u)}}return this.spawn(i,!0).filter(n)}},i0=function(e){return function(t){for(var n=this,a=[],i=0;i<n.length;i++){var o=n[i];if(o.isNode())for(var u=o.connectedEdges(),c=0;c<u.length;c++){var f=u[c],d=f.source(),h=f.target();e.outgoing&&d===o?(a.push(f),a.push(h)):e.incoming&&h===o&&(a.push(f),a.push(d))}}return this.spawn(a,!0).filter(t)}},s0=function(e){return function(t){for(var n=this,a=[],i={};;){var o=e.outgoing?n.outgoers():n.incomers();if(o.length===0)break;for(var u=!1,c=0;c<o.length;c++){var f=o[c],d=f.id();i[d]||(i[d]=!0,a.push(f),u=!0)}if(!u)break;n=o}return this.spawn(a,!0).filter(t)}};xr.clearTraversalCache=function(){for(var r=0;r<this.length;r++)this[r]._private.traversalCache=null};et(xr,{roots:a0({noIncomingEdges:!0}),leaves:a0({noOutgoingEdges:!0}),outgoers:nn(i0({outgoing:!0}),"outgoers"),successors:s0({outgoing:!0}),incomers:nn(i0({incoming:!0}),"incomers"),predecessors:s0({})});et(xr,{neighborhood:nn(function(r){for(var e=[],t=this.nodes(),n=0;n<t.length;n++)for(var a=t[n],i=a.connectedEdges(),o=0;o<i.length;o++){var u=i[o],c=u.source(),f=u.target(),d=a===c?f:c;d.length>0&&e.push(d[0]),e.push(u[0])}return this.spawn(e,!0).filter(r)},"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}});xr.neighbourhood=xr.neighborhood;xr.closedNeighbourhood=xr.closedNeighborhood;xr.openNeighbourhood=xr.openNeighborhood;et(xr,{source:nn(function(e){var t=this[0],n;return t&&(n=t._private.source||t.cy().collection()),n&&e?n.filter(e):n},"source"),target:nn(function(e){var t=this[0],n;return t&&(n=t._private.target||t.cy().collection()),n&&e?n.filter(e):n},"target"),sources:o0({attr:"source"}),targets:o0({attr:"target"})});function o0(r){return function(t){for(var n=[],a=0;a<this.length;a++){var i=this[a],o=i._private[r.attr];o&&n.push(o)}return this.spawn(n,!0).filter(t)}}et(xr,{edgesWith:nn(u0(),"edgesWith"),edgesTo:nn(u0({thisIsSrc:!0}),"edgesTo")});function u0(r){return function(t){var n=[],a=this._private.cy,i=r||{};Ye(t)&&(t=a.$(t));for(var o=0;o<t.length;o++)for(var u=t[o]._private.edges,c=0;c<u.length;c++){var f=u[c],d=f._private.data,h=this.hasElementWithId(d.source)&&t.hasElementWithId(d.target),g=t.hasElementWithId(d.source)&&this.hasElementWithId(d.target),p=h||g;p&&((i.thisIsSrc||i.thisIsTgt)&&(i.thisIsSrc&&!h||i.thisIsTgt&&!g)||n.push(f))}return this.spawn(n,!0)}}et(xr,{connectedEdges:nn(function(r){for(var e=[],t=this,n=0;n<t.length;n++){var a=t[n];if(a.isNode())for(var i=a._private.edges,o=0;o<i.length;o++){var u=i[o];e.push(u)}}return this.spawn(e,!0).filter(r)},"connectedEdges"),connectedNodes:nn(function(r){for(var e=[],t=this,n=0;n<t.length;n++){var a=t[n];a.isEdge()&&(e.push(a.source()[0]),e.push(a.target()[0]))}return this.spawn(e,!0).filter(r)},"connectedNodes"),parallelEdges:nn(l0(),"parallelEdges"),codirectedEdges:nn(l0({codirected:!0}),"codirectedEdges")});function l0(r){var e={codirected:!1};return r=et({},e,r),function(n){for(var a=[],i=this.edges(),o=r,u=0;u<i.length;u++)for(var c=i[u],f=c._private,d=f.source,h=d._private.data.id,g=f.data.target,p=d._private.edges,m=0;m<p.length;m++){var y=p[m],x=y._private.data,b=x.target,_=x.source,E=b===g&&_===h,C=h===b&&g===_;(o.codirected&&E||!o.codirected&&(E||C))&&a.push(y)}return this.spawn(a,!0).filter(n)}}et(xr,{components:function(e){var t=this,n=t.cy(),a=n.collection(),i=e==null?t.nodes():e.nodes(),o=[];e!=null&&i.empty()&&(i=e.sources());var u=function(d,h){a.merge(d),i.unmerge(d),h.merge(d)};if(i.empty())return t.spawn();var c=function(){var d=n.collection();o.push(d);var h=i[0];u(h,d),t.bfs({directed:!1,roots:h,visit:function(p){return u(p,d)}}),d.forEach(function(g){g.connectedEdges().forEach(function(p){t.has(p)&&d.has(p.source())&&d.has(p.target())&&d.merge(p)})})};do c();while(i.length>0);return o},component:function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}});xr.componentsOf=xr.components;var fr=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e===void 0){At("A collection must have a reference to the core");return}var i=new Fn,o=!1;if(!t)t=[];else if(t.length>0&&dt(t[0])&&!So(t[0])){o=!0;for(var u=[],c=new Ji,f=0,d=t.length;f<d;f++){var h=t[f];h.data==null&&(h.data={});var g=h.data;if(g.id==null)g.id=_1();else if(e.hasElementWithId(g.id)||c.has(g.id))continue;var p=new Il(e,h,!1);u.push(p),c.add(g.id)}t=u}this.length=0;for(var m=0,y=t.length;m<y;m++){var x=t[m][0];if(x!=null){var b=x._private.data.id;(!n||!i.has(b))&&(n&&i.set(b,{index:this.length,ele:x}),this[this.length]=x,this.length++)}}this._private={eles:this,cy:e,get map(){return this.lazyMap==null&&this.rebuildMap(),this.lazyMap},set map(_){this.lazyMap=_},rebuildMap:function(){for(var E=this.lazyMap=new Fn,C=this.eles,B=0;B<C.length;B++){var N=C[B];E.set(N.id(),{index:B,ele:N})}}},n&&(this._private.map=i),o&&!a&&this.restore()},_t=Il.prototype=fr.prototype=Object.create(Array.prototype);_t.instanceString=function(){return"collection"};_t.spawn=function(r,e){return new fr(this.cy(),r,e)};_t.spawnSelf=function(){return this.spawn(this)};_t.cy=function(){return this._private.cy};_t.renderer=function(){return this._private.cy.renderer()};_t.element=function(){return this[0]};_t.collection=function(){return u1(this)?this:new fr(this._private.cy,[this])};_t.unique=function(){return new fr(this._private.cy,this,!0)};_t.hasElementWithId=function(r){return r=""+r,this._private.map.has(r)};_t.getElementById=function(r){r=""+r;var e=this._private.cy,t=this._private.map.get(r);return t?t.ele:new fr(e)};_t.$id=_t.getElementById;_t.poolIndex=function(){var r=this._private.cy,e=r._private.elements,t=this[0]._private.data.id;return e._private.map.get(t).index};_t.indexOf=function(r){var e=r[0]._private.data.id;return this._private.map.get(e).index};_t.indexOfId=function(r){return r=""+r,this._private.map.get(r).index};_t.json=function(r){var e=this.element(),t=this.cy();if(e==null&&r)return this;if(e!=null){var n=e._private;if(dt(r)){if(t.startBatch(),r.data){e.data(r.data);var a=n.data;if(e.isEdge()){var i=!1,o={},u=r.data.source,c=r.data.target;u!=null&&u!=a.source&&(o.source=""+u,i=!0),c!=null&&c!=a.target&&(o.target=""+c,i=!0),i&&(e=e.move(o))}else{var f="parent"in r.data,d=r.data.parent;f&&(d!=null||a.parent!=null)&&d!=a.parent&&(d===void 0&&(d=null),d!=null&&(d=""+d),e=e.move({parent:d}))}}r.position&&e.position(r.position);var h=function(y,x,b){var _=r[y];_!=null&&_!==n[y]&&(_?e[x]():e[b]())};return h("removed","remove","restore"),h("selected","select","unselect"),h("selectable","selectify","unselectify"),h("locked","lock","unlock"),h("grabbable","grabify","ungrabify"),h("pannable","panify","unpanify"),r.classes!=null&&e.classes(r.classes),t.endBatch(),this}else if(r===void 0){var g={data:Sn(n.data),position:Sn(n.position),group:n.group,removed:n.removed,selected:n.selected,selectable:n.selectable,locked:n.locked,grabbable:n.grabbable,pannable:n.pannable,classes:null};g.classes="";var p=0;return n.classes.forEach(function(m){return g.classes+=p++===0?m:" "+m}),g}}};_t.jsons=function(){for(var r=[],e=0;e<this.length;e++){var t=this[e],n=t.json();r.push(n)}return r};_t.clone=function(){for(var r=this.cy(),e=[],t=0;t<this.length;t++){var n=this[t],a=n.json(),i=new Il(r,a,!1);e.push(i)}return new fr(r,e)};_t.copy=_t.clone;_t.restore=function(){for(var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=this,n=t.cy(),a=n._private,i=[],o=[],u,c=0,f=t.length;c<f;c++){var d=t[c];e&&!d.removed()||(d.isNode()?i.push(d):o.push(d))}u=i.concat(o);var h,g=function(){u.splice(h,1),h--};for(h=0;h<u.length;h++){var p=u[h],m=p._private,y=m.data;if(p.clearTraversalCache(),!(!e&&!m.removed)){if(y.id===void 0)y.id=_1();else if(Ue(y.id))y.id=""+y.id;else if(wa(y.id)||!Ye(y.id)){At("Can not create element with invalid string ID `"+y.id+"`"),g();continue}else if(n.hasElementWithId(y.id)){At("Can not create second element with ID `"+y.id+"`"),g();continue}}var x=y.id;if(p.isNode()){var b=m.position;b.x==null&&(b.x=0),b.y==null&&(b.y=0)}if(p.isEdge()){for(var _=p,E=["source","target"],C=E.length,B=!1,N=0;N<C;N++){var A=E[N],z=y[A];Ue(z)&&(z=y[A]=""+y[A]),z==null||z===""?(At("Can not create edge `"+x+"` with unspecified "+A),B=!0):n.hasElementWithId(z)||(At("Can not create edge `"+x+"` with nonexistant "+A+" `"+z+"`"),B=!0)}if(B){g();continue}var M=n.getElementById(y.source),V=n.getElementById(y.target);M.same(V)?M._private.edges.push(_):(M._private.edges.push(_),V._private.edges.push(_)),_._private.source=M,_._private.target=V}m.map=new Fn,m.map.set(x,{ele:p,index:0}),m.removed=!1,e&&n.addToPool(p)}for(var q=0;q<i.length;q++){var I=i[q],F=I._private.data;Ue(F.parent)&&(F.parent=""+F.parent);var T=F.parent,G=T!=null;if(G||I._private.parent){var Q=I._private.parent?n.collection().merge(I._private.parent):n.getElementById(T);if(Q.empty())F.parent=void 0;else if(Q[0].removed())gt("Node added with missing parent, reference to parent removed"),F.parent=void 0,I._private.parent=null;else{for(var W=!1,X=Q;!X.empty();){if(I.same(X)){W=!0,F.parent=void 0;break}X=X.parent()}W||(Q[0]._private.children.push(I),I._private.parent=Q[0],a.hasCompoundNodes=!0)}}}if(u.length>0){for(var Z=u.length===t.length?t:new fr(n,u),te=0;te<Z.length;te++){var L=Z[te];L.isNode()||(L.parallelEdges().clearTraversalCache(),L.source().clearTraversalCache(),L.target().clearTraversalCache())}var U;a.hasCompoundNodes?U=n.collection().merge(Z).merge(Z.connectedNodes()).merge(Z.parent()):U=Z,U.dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(r),r?Z.emitAndNotify("add"):e&&Z.emit("add")}return t};_t.removed=function(){var r=this[0];return r&&r._private.removed};_t.inside=function(){var r=this[0];return r&&!r._private.removed};_t.remove=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=this,n=[],a={},i=t._private.cy;function o(T){for(var G=T._private.edges,Q=0;Q<G.length;Q++)c(G[Q])}function u(T){for(var G=T._private.children,Q=0;Q<G.length;Q++)c(G[Q])}function c(T){var G=a[T.id()];e&&T.removed()||G||(a[T.id()]=!0,T.isNode()?(n.push(T),o(T),u(T)):n.unshift(T))}for(var f=0,d=t.length;f<d;f++){var h=t[f];c(h)}function g(T,G){var Q=T._private.edges;xa(Q,G),T.clearTraversalCache()}function p(T){T.clearTraversalCache()}var m=[];m.ids={};function y(T,G){G=G[0],T=T[0];var Q=T._private.children,W=T.id();xa(Q,G),G._private.parent=null,m.ids[W]||(m.ids[W]=!0,m.push(T))}t.dirtyCompoundBoundsCache(),e&&i.removeFromPool(n);for(var x=0;x<n.length;x++){var b=n[x];if(b.isEdge()){var _=b.source()[0],E=b.target()[0];g(_,b),g(E,b);for(var C=b.parallelEdges(),B=0;B<C.length;B++){var N=C[B];p(N),N.isBundledBezier()&&N.dirtyBoundingBoxCache()}}else{var A=b.parent();A.length!==0&&y(A,b)}e&&(b._private.removed=!0)}var z=i._private.elements;i._private.hasCompoundNodes=!1;for(var M=0;M<z.length;M++){var V=z[M];if(V.isParent()){i._private.hasCompoundNodes=!0;break}}var q=new fr(this.cy(),n);q.size()>0&&(r?q.emitAndNotify("remove"):e&&q.emit("remove"));for(var I=0;I<m.length;I++){var F=m[I];(!e||!F.removed())&&F.updateStyle()}return q};_t.move=function(r){var e=this._private.cy,t=this,n=!1,a=!1,i=function(m){return m==null?m:""+m};if(r.source!==void 0||r.target!==void 0){var o=i(r.source),u=i(r.target),c=o!=null&&e.hasElementWithId(o),f=u!=null&&e.hasElementWithId(u);(c||f)&&(e.batch(function(){t.remove(n,a),t.emitAndNotify("moveout");for(var p=0;p<t.length;p++){var m=t[p],y=m._private.data;m.isEdge()&&(c&&(y.source=o),f&&(y.target=u))}t.restore(n,a)}),t.emitAndNotify("move"))}else if(r.parent!==void 0){var d=i(r.parent),h=d===null||e.hasElementWithId(d);if(h){var g=d===null?void 0:d;e.batch(function(){var p=t.remove(n,a);p.emitAndNotify("moveout");for(var m=0;m<t.length;m++){var y=t[m],x=y._private.data;y.isNode()&&(x.parent=g)}p.restore(n,a)}),t.emitAndNotify("move")}}return this};[L1,qk,ul,ma,Qi,sC,Ul,_C,iw,sw,TC,El,ll,cr,ya,xr].forEach(function(r){et(_t,r)});var LC={add:function(e){var t,n=this;if(Hr(e)){var a=e;if(a._private.cy===n)t=a.restore();else{for(var i=[],o=0;o<a.length;o++){var u=a[o];i.push(u.json())}t=new fr(n,i)}}else if(wt(e)){var c=e;t=new fr(n,c)}else if(dt(e)&&(wt(e.nodes)||wt(e.edges))){for(var f=e,d=[],h=["nodes","edges"],g=0,p=h.length;g<p;g++){var m=h[g],y=f[m];if(wt(y))for(var x=0,b=y.length;x<b;x++){var _=et({group:m},y[x]);d.push(_)}}t=new fr(n,d)}else{var E=e;t=new Il(n,E).collection()}return t},remove:function(e){if(!Hr(e)){if(Ye(e)){var t=e;e=this.$(t)}}return e.remove()}};/*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License */function NC(r,e,t,n){var a=4,i=.001,o=1e-7,u=10,c=11,f=1/(c-1),d=typeof Float32Array<"u";if(arguments.length!==4)return!1;for(var h=0;h<4;++h)if(typeof arguments[h]!="number"||isNaN(arguments[h])||!isFinite(arguments[h]))return!1;r=Math.min(r,1),t=Math.min(t,1),r=Math.max(r,0),t=Math.max(t,0);var g=d?new Float32Array(c):new Array(c);function p(V,q){return 1-3*q+3*V}function m(V,q){return 3*q-6*V}function y(V){return 3*V}function x(V,q,I){return((p(q,I)*V+m(q,I))*V+y(q))*V}function b(V,q,I){return 3*p(q,I)*V*V+2*m(q,I)*V+y(q)}function _(V,q){for(var I=0;I<a;++I){var F=b(q,r,t);if(F===0)return q;var T=x(q,r,t)-V;q-=T/F}return q}function E(){for(var V=0;V<c;++V)g[V]=x(V*f,r,t)}function C(V,q,I){var F,T,G=0;do T=q+(I-q)/2,F=x(T,r,t)-V,F>0?I=T:q=T;while(Math.abs(F)>o&&++G<u);return T}function B(V){for(var q=0,I=1,F=c-1;I!==F&&g[I]<=V;++I)q+=f;--I;var T=(V-g[I])/(g[I+1]-g[I]),G=q+T*f,Q=b(G,r,t);return Q>=i?_(V,G):Q===0?G:C(V,q,q+f)}var N=!1;function A(){N=!0,(r!==e||t!==n)&&E()}var z=function(q){return N||A(),r===e&&t===n?q:q===0?0:q===1?1:x(B(q),e,n)};z.getControlPoints=function(){return[{x:r,y:e},{x:t,y:n}]};var M="generateBezier("+[r,e,t,n]+")";return z.toString=function(){return M},z}/*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License */var OC=(function(){function r(n){return-n.tension*n.x-n.friction*n.v}function e(n,a,i){var o={x:n.x+i.dx*a,v:n.v+i.dv*a,tension:n.tension,friction:n.friction};return{dx:o.v,dv:r(o)}}function t(n,a){var i={dx:n.v,dv:r(n)},o=e(n,a*.5,i),u=e(n,a*.5,o),c=e(n,a,u),f=1/6*(i.dx+2*(o.dx+u.dx)+c.dx),d=1/6*(i.dv+2*(o.dv+u.dv)+c.dv);return n.x=n.x+f*a,n.v=n.v+d*a,n}return function n(a,i,o){var u={x:-1,v:0,tension:null,friction:null},c=[0],f=0,d=1/1e4,h=16/1e3,g,p,m;for(a=parseFloat(a)||500,i=parseFloat(i)||20,o=o||null,u.tension=a,u.friction=i,g=o!==null,g?(f=n(a,i),p=f/o*h):p=h;m=t(m||u,p),c.push(1+m.x),f+=16,Math.abs(m.x)>d&&Math.abs(m.v)>d;);return g?function(y){return c[y*(c.length-1)|0]}:f}})(),bt=function(e,t,n,a){var i=NC(e,t,n,a);return function(o,u,c){return o+(u-o)*i(c)}},cl={linear:function(e,t,n){return e+(t-e)*n},ease:bt(.25,.1,.25,1),"ease-in":bt(.42,0,1,1),"ease-out":bt(0,0,.58,1),"ease-in-out":bt(.42,0,.58,1),"ease-in-sine":bt(.47,0,.745,.715),"ease-out-sine":bt(.39,.575,.565,1),"ease-in-out-sine":bt(.445,.05,.55,.95),"ease-in-quad":bt(.55,.085,.68,.53),"ease-out-quad":bt(.25,.46,.45,.94),"ease-in-out-quad":bt(.455,.03,.515,.955),"ease-in-cubic":bt(.55,.055,.675,.19),"ease-out-cubic":bt(.215,.61,.355,1),"ease-in-out-cubic":bt(.645,.045,.355,1),"ease-in-quart":bt(.895,.03,.685,.22),"ease-out-quart":bt(.165,.84,.44,1),"ease-in-out-quart":bt(.77,0,.175,1),"ease-in-quint":bt(.755,.05,.855,.06),"ease-out-quint":bt(.23,1,.32,1),"ease-in-out-quint":bt(.86,0,.07,1),"ease-in-expo":bt(.95,.05,.795,.035),"ease-out-expo":bt(.19,1,.22,1),"ease-in-out-expo":bt(1,0,0,1),"ease-in-circ":bt(.6,.04,.98,.335),"ease-out-circ":bt(.075,.82,.165,1),"ease-in-out-circ":bt(.785,.135,.15,.86),spring:function(e,t,n){if(n===0)return cl.linear;var a=OC(e,t,n);return function(i,o,u){return i+(o-i)*a(u)}},"cubic-bezier":bt};function c0(r,e,t,n,a){if(n===1||e===t)return t;var i=a(e,t,n);return r==null||((r.roundValue||r.color)&&(i=Math.round(i)),r.min!==void 0&&(i=Math.max(i,r.min)),r.max!==void 0&&(i=Math.min(i,r.max))),i}function f0(r,e){return r.pfValue!=null||r.value!=null?r.pfValue!=null&&(e==null||e.type.units!=="%")?r.pfValue:r.value:r}function Ni(r,e,t,n,a){var i=a!=null?a.type:null;t<0?t=0:t>1&&(t=1);var o=f0(r,a),u=f0(e,a);if(Ue(o)&&Ue(u))return c0(i,o,u,t,n);if(wt(o)&&wt(u)){for(var c=[],f=0;f<u.length;f++){var d=o[f],h=u[f];if(d!=null&&h!=null){var g=c0(i,d,h,t,n);c.push(g)}else c.push(h)}return c}}function MC(r,e,t,n){var a=!n,i=r._private,o=e._private,u=o.easing,c=o.startTime,f=n?r:r.cy(),d=f.style();if(!o.easingImpl)if(u==null)o.easingImpl=cl.linear;else{var h;if(Ye(u)){var g=d.parse("transition-timing-function",u);h=g.value}else h=u;var p,m;Ye(h)?(p=h,m=[]):(p=h[1],m=h.slice(2).map(function(Z){return+Z})),m.length>0?(p==="spring"&&m.push(o.duration),o.easingImpl=cl[p].apply(null,m)):o.easingImpl=cl[p]}var y=o.easingImpl,x;if(o.duration===0?x=1:x=(t-c)/o.duration,o.applying&&(x=o.progress),x<0?x=0:x>1&&(x=1),o.delay==null){var b=o.startPosition,_=o.position;if(_&&a&&!r.locked()){var E={};Qs(b.x,_.x)&&(E.x=Ni(b.x,_.x,x,y)),Qs(b.y,_.y)&&(E.y=Ni(b.y,_.y,x,y)),r.position(E)}var C=o.startPan,B=o.pan,N=i.pan,A=B!=null&&n;A&&(Qs(C.x,B.x)&&(N.x=Ni(C.x,B.x,x,y)),Qs(C.y,B.y)&&(N.y=Ni(C.y,B.y,x,y)),r.emit("pan"));var z=o.startZoom,M=o.zoom,V=M!=null&&n;V&&(Qs(z,M)&&(i.zoom=vo(i.minZoom,Ni(z,M,x,y),i.maxZoom)),r.emit("zoom")),(A||V)&&r.emit("viewport");var q=o.style;if(q&&q.length>0&&a){for(var I=0;I<q.length;I++){var F=q[I],T=F.name,G=F,Q=o.startStyle[T],W=d.properties[Q.name],X=Ni(Q,G,x,y,W);d.overrideBypass(r,T,X)}r.emit("style")}}return o.progress=x,x}function Qs(r,e){return r==null||e==null?!1:Ue(r)&&Ue(e)?!0:!!(r&&e)}function zC(r,e,t,n){var a=e._private;a.started=!0,a.startTime=t-a.progress*a.duration}function d0(r,e){var t=e._private.aniEles,n=[];function a(d,h){var g=d._private,p=g.animation.current,m=g.animation.queue,y=!1;if(p.length===0){var x=m.shift();x&&p.push(x)}for(var b=function(N){for(var A=N.length-1;A>=0;A--){var z=N[A];z()}N.splice(0,N.length)},_=p.length-1;_>=0;_--){var E=p[_],C=E._private;if(C.stopped){p.splice(_,1),C.hooked=!1,C.playing=!1,C.started=!1,b(C.frames);continue}!C.playing&&!C.applying||(C.playing&&C.applying&&(C.applying=!1),C.started||zC(d,E,r),MC(d,E,r,h),C.applying&&(C.applying=!1),b(C.frames),C.step!=null&&C.step(r),E.completed()&&(p.splice(_,1),C.hooked=!1,C.playing=!1,C.started=!1,b(C.completes)),y=!0)}return!h&&p.length===0&&m.length===0&&n.push(d),y}for(var i=!1,o=0;o<t.length;o++){var u=t[o],c=a(u);i=i||c}var f=a(e,!0);(i||f)&&(t.length>0?e.notify("draw",t):e.notify("draw")),t.unmerge(n),e.emit("step")}var FC={animate:pt.animate(),animation:pt.animation(),animated:pt.animated(),clearQueue:pt.clearQueue(),delay:pt.delay(),delayAnimation:pt.delayAnimation(),stop:pt.stop(),addToAnimationPool:function(e){var t=this;t.styleEnabled()&&t._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,!e.styleEnabled())return;function t(){e._private.animationsRunning&&yl(function(i){d0(i,e),t()})}var n=e.renderer();n&&n.beforeRender?n.beforeRender(function(i,o){d0(o,e)},n.beforeRenderPriorities.animations):t()}},UC={qualifierCompare:function(e,t){return e==null||t==null?e==null&&t==null:e.sameText(t)},eventMatches:function(e,t,n){var a=t.qualifier;return a!=null?e!==n.target&&So(n.target)&&a.matches(n.target):!0},addEventFields:function(e,t){t.cy=e,t.target=e},callbackContext:function(e,t,n){return t.qualifier!=null?n.target:e}},el=function(e){return Ye(e)?new _a(e):e},lw={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new $l(UC,this)),this},emitter:function(){return this._private.emitter},on:function(e,t,n){return this.emitter().on(e,el(t),n),this},removeListener:function(e,t,n){return this.emitter().removeListener(e,el(t),n),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(e,t,n){return this.emitter().one(e,el(t),n),this},once:function(e,t,n){return this.emitter().one(e,el(t),n),this},emit:function(e,t){return this.emitter().emit(e,t),this},emitAndNotify:function(e,t){return this.emit(e),this.notify(e,t),this}};pt.eventAliasesOn(lw);var Ah={png:function(e){var t=this._private.renderer;return e=e||{},t.png(e)},jpg:function(e){var t=this._private.renderer;return e=e||{},e.bg=e.bg||"#fff",t.jpg(e)}};Ah.jpeg=Ah.jpg;var fl={layout:function(e){var t=this;if(e==null){At("Layout options must be specified to make a layout");return}if(e.name==null){At("A `name` must be specified to make a layout");return}var n=e.name,a=t.extension("layout",n);if(a==null){At("No such layout `"+n+"` found.  Did you forget to import it and `cytoscape.use()` it?");return}var i;Ye(e.eles)?i=t.$(e.eles):i=e.eles!=null?e.eles:t.$();var o=new a(et({},e,{cy:t,eles:i}));return o}};fl.createLayout=fl.makeLayout=fl.layout;var $C={notify:function(e,t){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var a=n.batchNotifications[e]=n.batchNotifications[e]||this.collection();t!=null&&a.merge(t);return}if(n.notificationsEnabled){var i=this.renderer();this.destroyed()||!i||i.notify(e,t)}},notifications:function(e){var t=this._private;return e===void 0?t.notificationsEnabled:(t.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return e.batchCount==null&&(e.batchCount=0),e.batchCount===0&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(e.batchCount===0)return this;if(e.batchCount--,e.batchCount===0){e.batchStyleEles.updateStyle();var t=this.renderer();Object.keys(e.batchNotifications).forEach(function(n){var a=e.batchNotifications[n];a.empty()?t.notify(n):t.notify(n,a)})}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var t=this;return this.batch(function(){for(var n=Object.keys(e),a=0;a<n.length;a++){var i=n[a],o=e[i],u=t.getElementById(i);u.data(o)}})}},VC=dr({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1,webgl:!1,webglDebug:!1,webglDebugShowAtlases:!1,webglTexSize:2048,webglTexRows:36,webglTexRowsNodes:18,webglBatchSize:2048,webglTexPerBatch:14,webglBgColor:[255,255,255]}),Dh={renderTo:function(e,t,n,a){var i=this._private.renderer;return i.renderTo(e,t,n,a),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var t=this,n=t.extension("renderer",e.name);if(n==null){At("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));return}e.wheelSensitivity!==void 0&&gt("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var a=VC(e);a.cy=t,t._private.renderer=new n(a),this.notify("init")},destroyRenderer:function(){var e=this;e.notify("destroy");var t=e.container();if(t)for(t._cyreg=null;t.childNodes.length>0;)t.removeChild(t.childNodes[0]);e._private.renderer=null,e.mutableElements().forEach(function(n){var a=n._private;a.rscratch={},a.rstyle={},a.animation.current=[],a.animation.queue=[]})},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};Dh.invalidateDimensions=Dh.resize;var dl={collection:function(e,t){return Ye(e)?this.$(e):Hr(e)?e.collection():wt(e)?(t||(t={}),new fr(this,e,t.unique,t.removed)):new fr(this)},nodes:function(e){var t=this.$(function(n){return n.isNode()});return e?t.filter(e):t},edges:function(e){var t=this.$(function(n){return n.isEdge()});return e?t.filter(e):t},$:function(e){var t=this._private.elements;return e?t.filter(e):t.spawnSelf()},mutableElements:function(){return this._private.elements}};dl.elements=dl.filter=dl.$;var sr={},oo="t",jC="f";sr.apply=function(r){for(var e=this,t=e._private,n=t.cy,a=n.collection(),i=0;i<r.length;i++){var o=r[i],u=e.getContextMeta(o);if(!u.empty){var c=e.getContextStyle(u),f=e.applyContextStyle(u,c,o);o._private.appliedInitStyle?e.updateTransitions(o,f.diffProps):o._private.appliedInitStyle=!0;var d=e.updateStyleHints(o);d&&a.push(o)}}return a};sr.getPropertiesDiff=function(r,e){var t=this,n=t._private.propDiffs=t._private.propDiffs||{},a=r+"-"+e,i=n[a];if(i)return i;for(var o=[],u={},c=0;c<t.length;c++){var f=t[c],d=r[c]===oo,h=e[c]===oo,g=d!==h,p=f.mappedProperties.length>0;if(g||h&&p){var m=void 0;g&&p||g?m=f.properties:p&&(m=f.mappedProperties);for(var y=0;y<m.length;y++){for(var x=m[y],b=x.name,_=!1,E=c+1;E<t.length;E++){var C=t[E],B=e[E]===oo;if(B&&(_=C.properties[x.name]!=null,_))break}!u[b]&&!_&&(u[b]=!0,o.push(b))}}}return n[a]=o,o};sr.getContextMeta=function(r){for(var e=this,t="",n,a=r._private.styleCxtKey||"",i=0;i<e.length;i++){var o=e[i],u=o.selector&&o.selector.matches(r);u?t+=oo:t+=jC}return n=e.getPropertiesDiff(a,t),r._private.styleCxtKey=t,{key:t,diffPropNames:n,empty:n.length===0}};sr.getContextStyle=function(r){var e=r.key,t=this,n=this._private.contextStyles=this._private.contextStyles||{};if(n[e])return n[e];for(var a={_private:{key:e}},i=0;i<t.length;i++){var o=t[i],u=e[i]===oo;if(u)for(var c=0;c<o.properties.length;c++){var f=o.properties[c];a[f.name]=f}}return n[e]=a,a};sr.applyContextStyle=function(r,e,t){for(var n=this,a=r.diffPropNames,i={},o=n.types,u=0;u<a.length;u++){var c=a[u],f=e[c],d=t.pstyle(c);if(!f)if(d)d.bypass?f={name:c,deleteBypassed:!0}:f={name:c,delete:!0};else continue;if(d!==f){if(f.mapped===o.fn&&d!=null&&d.mapping!=null&&d.mapping.value===f.value){var h=d.mapping,g=h.fnValue=f.value(t);if(g===h.prevFnValue)continue}var p=i[c]={prev:d};n.applyParsedProperty(t,f),p.next=t.pstyle(c),p.next&&p.next.bypass&&(p.next=p.next.bypassed)}}return{diffProps:i}};sr.updateStyleHints=function(r){var e=r._private,t=this,n=t.propertyGroupNames,a=t.propertyGroupKeys,i=function(be,Re,D){return t.getPropertiesHash(be,Re,D)},o=e.styleKey;if(r.removed())return!1;var u=e.group==="nodes",c=r._private.style;n=Object.keys(c);for(var f=0;f<a.length;f++){var d=a[f];e.styleKeys[d]=[Xa,Vi]}for(var h=function(be,Re){return e.styleKeys[Re][0]=co(be,e.styleKeys[Re][0])},g=function(be,Re){return e.styleKeys[Re][1]=fo(be,e.styleKeys[Re][1])},p=function(be,Re){h(be,Re),g(be,Re)},m=function(be,Re){for(var D=0;D<be.length;D++){var ve=be.charCodeAt(D);h(ve,Re),g(ve,Re)}},y=2e9,x=function(be){return-128<be&&be<128&&Math.floor(be)!==be?y-(be*1024|0):be},b=0;b<n.length;b++){var _=n[b],E=c[_];if(E!=null){var C=this.properties[_],B=C.type,N=C.groupKey,A=void 0;C.hashOverride!=null?A=C.hashOverride(r,E):E.pfValue!=null&&(A=E.pfValue);var z=C.enums==null?E.value:null,M=A!=null,V=z!=null,q=M||V,I=E.units;if(B.number&&q&&!B.multiple){var F=M?A:z;p(x(F),N),!M&&I!=null&&m(I,N)}else m(E.strValue,N)}}for(var T=[Xa,Vi],G=0;G<a.length;G++){var Q=a[G],W=e.styleKeys[Q];T[0]=co(W[0],T[0]),T[1]=fo(W[1],T[1])}e.styleKey=iE(T[0],T[1]);var X=e.styleKeys;e.labelDimsKey=fa(X.labelDimensions);var Z=i(r,["label"],X.labelDimensions);if(e.labelKey=fa(Z),e.labelStyleKey=fa(Gu(X.commonLabel,Z)),!u){var te=i(r,["source-label"],X.labelDimensions);e.sourceLabelKey=fa(te),e.sourceLabelStyleKey=fa(Gu(X.commonLabel,te));var L=i(r,["target-label"],X.labelDimensions);e.targetLabelKey=fa(L),e.targetLabelStyleKey=fa(Gu(X.commonLabel,L))}if(u){var U=e.styleKeys,oe=U.nodeBody,ie=U.nodeBorder,ne=U.nodeOutline,we=U.backgroundImage,Pe=U.compound,Ce=U.pie,ge=U.stripe,ce=[oe,ie,ne,we,Pe,Ce,ge].filter(function(de){return de!=null}).reduce(Gu,[Xa,Vi]);e.nodeKey=fa(ce),e.hasPie=Ce!=null&&Ce[0]!==Xa&&Ce[1]!==Vi,e.hasStripe=ge!=null&&ge[0]!==Xa&&ge[1]!==Vi}return o!==e.styleKey};sr.clearStyleHints=function(r){var e=r._private;e.styleCxtKey="",e.styleKeys={},e.styleKey=null,e.labelKey=null,e.labelStyleKey=null,e.sourceLabelKey=null,e.sourceLabelStyleKey=null,e.targetLabelKey=null,e.targetLabelStyleKey=null,e.nodeKey=null,e.hasPie=null,e.hasStripe=null};sr.applyParsedProperty=function(r,e){var t=this,n=e,a=r._private.style,i,o=t.types,u=t.properties[n.name].type,c=n.bypass,f=a[n.name],d=f&&f.bypass,h=r._private,g="mapping",p=function(oe){return oe==null?null:oe.pfValue!=null?oe.pfValue:oe.value},m=function(){var oe=p(f),ie=p(n);t.checkTriggers(r,n.name,oe,ie)};if(e.name==="curve-style"&&r.isEdge()&&(e.value!=="bezier"&&r.isLoop()||e.value==="haystack"&&(r.source().isParent()||r.target().isParent()))&&(n=e=this.parse(e.name,"bezier",c)),n.delete)return a[n.name]=void 0,m(),!0;if(n.deleteBypassed)return f?f.bypass?(f.bypassed=void 0,m(),!0):!1:(m(),!0);if(n.deleteBypass)return f?f.bypass?(a[n.name]=f.bypassed,m(),!0):!1:(m(),!0);var y=function(){gt("Do not assign mappings to elements without corresponding data (i.e. ele `"+r.id()+"` has no mapping for property `"+n.name+"` with data field `"+n.field+"`); try a `["+n.field+"]` selector to limit scope to elements with `"+n.field+"` defined")};switch(n.mapped){case o.mapData:{for(var x=n.field.split("."),b=h.data,_=0;_<x.length&&b;_++){var E=x[_];b=b[E]}if(b==null)return y(),!1;var C;if(Ue(b)){var B=n.fieldMax-n.fieldMin;B===0?C=0:C=(b-n.fieldMin)/B}else return gt("Do not use continuous mappers without specifying numeric data (i.e. `"+n.field+": "+b+"` for `"+r.id()+"` is non-numeric)"),!1;if(C<0?C=0:C>1&&(C=1),u.color){var N=n.valueMin[0],A=n.valueMax[0],z=n.valueMin[1],M=n.valueMax[1],V=n.valueMin[2],q=n.valueMax[2],I=n.valueMin[3]==null?1:n.valueMin[3],F=n.valueMax[3]==null?1:n.valueMax[3],T=[Math.round(N+(A-N)*C),Math.round(z+(M-z)*C),Math.round(V+(q-V)*C),Math.round(I+(F-I)*C)];i={bypass:n.bypass,name:n.name,value:T,strValue:"rgb("+T[0]+", "+T[1]+", "+T[2]+")"}}else if(u.number){var G=n.valueMin+(n.valueMax-n.valueMin)*C;i=this.parse(n.name,G,n.bypass,g)}else return!1;if(!i)return y(),!1;i.mapping=n,n=i;break}case o.data:{for(var Q=n.field.split("."),W=h.data,X=0;X<Q.length&&W;X++){var Z=Q[X];W=W[Z]}if(W!=null&&(i=this.parse(n.name,W,n.bypass,g)),!i)return y(),!1;i.mapping=n,n=i;break}case o.fn:{var te=n.value,L=n.fnValue!=null?n.fnValue:te(r);if(n.prevFnValue=L,L==null)return gt("Custom function mappers may not return null (i.e. `"+n.name+"` for ele `"+r.id()+"` is null)"),!1;if(i=this.parse(n.name,L,n.bypass,g),!i)return gt("Custom function mappers may not return invalid values for the property type (i.e. `"+n.name+"` for ele `"+r.id()+"` is invalid)"),!1;i.mapping=Sn(n),n=i;break}case void 0:break;default:return!1}return c?(d?n.bypassed=f.bypassed:n.bypassed=f,a[n.name]=n):d?f.bypassed=n:a[n.name]=n,m(),!0};sr.cleanElements=function(r,e){for(var t=0;t<r.length;t++){var n=r[t];if(this.clearStyleHints(n),n.dirtyCompoundBoundsCache(),n.dirtyBoundingBoxCache(),!e)n._private.style={};else for(var a=n._private.style,i=Object.keys(a),o=0;o<i.length;o++){var u=i[o],c=a[u];c!=null&&(c.bypass?c.bypassed=null:a[u]=null)}}};sr.update=function(){var r=this._private.cy,e=r.mutableElements();e.updateStyle()};sr.updateTransitions=function(r,e){var t=this,n=r._private,a=r.pstyle("transition-property").value,i=r.pstyle("transition-duration").pfValue,o=r.pstyle("transition-delay").pfValue;if(a.length>0&&i>0){for(var u={},c=!1,f=0;f<a.length;f++){var d=a[f],h=r.pstyle(d),g=e[d];if(g){var p=g.prev,m=p,y=g.next!=null?g.next:h,x=!1,b=void 0,_=1e-6;m&&(Ue(m.pfValue)&&Ue(y.pfValue)?(x=y.pfValue-m.pfValue,b=m.pfValue+_*x):Ue(m.value)&&Ue(y.value)?(x=y.value-m.value,b=m.value+_*x):wt(m.value)&&wt(y.value)&&(x=m.value[0]!==y.value[0]||m.value[1]!==y.value[1]||m.value[2]!==y.value[2],b=m.strValue),x&&(u[d]=y.strValue,this.applyBypass(r,d,b),c=!0))}}if(!c)return;n.transitioning=!0,new es(function(E){o>0?r.delayAnimation(o).play().promise().then(E):E()}).then(function(){return r.animation({style:u,duration:i,easing:r.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){t.removeBypasses(r,a),r.emitAndNotify("style"),n.transitioning=!1})}else n.transitioning&&(this.removeBypasses(r,a),r.emitAndNotify("style"),n.transitioning=!1)};sr.checkTrigger=function(r,e,t,n,a,i){var o=this.properties[e],u=a(o);r.removed()||u!=null&&u(t,n,r)&&i(o)};sr.checkZOrderTrigger=function(r,e,t,n){var a=this;this.checkTrigger(r,e,t,n,function(i){return i.triggersZOrder},function(){a._private.cy.notify("zorder",r)})};sr.checkBoundsTrigger=function(r,e,t,n){this.checkTrigger(r,e,t,n,function(a){return a.triggersBounds},function(a){r.dirtyCompoundBoundsCache(),r.dirtyBoundingBoxCache()})};sr.checkConnectedEdgesBoundsTrigger=function(r,e,t,n){this.checkTrigger(r,e,t,n,function(a){return a.triggersBoundsOfConnectedEdges},function(a){r.connectedEdges().forEach(function(i){i.dirtyBoundingBoxCache()})})};sr.checkParallelEdgesBoundsTrigger=function(r,e,t,n){this.checkTrigger(r,e,t,n,function(a){return a.triggersBoundsOfParallelEdges},function(a){r.parallelEdges().forEach(function(i){i.dirtyBoundingBoxCache()})})};sr.checkTriggers=function(r,e,t,n){r.dirtyStyleCache(),this.checkZOrderTrigger(r,e,t,n),this.checkBoundsTrigger(r,e,t,n),this.checkConnectedEdgesBoundsTrigger(r,e,t,n),this.checkParallelEdgesBoundsTrigger(r,e,t,n)};var Ao={};Ao.applyBypass=function(r,e,t,n){var a=this,i=[],o=!0;if(e==="*"||e==="**"){if(t!==void 0)for(var u=0;u<a.properties.length;u++){var c=a.properties[u],f=c.name,d=this.parse(f,t,!0);d&&i.push(d)}}else if(Ye(e)){var h=this.parse(e,t,!0);h&&i.push(h)}else if(dt(e)){var g=e;n=t;for(var p=Object.keys(g),m=0;m<p.length;m++){var y=p[m],x=g[y];if(x===void 0&&(x=g[Al(y)]),x!==void 0){var b=this.parse(y,x,!0);b&&i.push(b)}}}else return!1;if(i.length===0)return!1;for(var _=!1,E=0;E<r.length;E++){for(var C=r[E],B={},N=void 0,A=0;A<i.length;A++){var z=i[A];if(n){var M=C.pstyle(z.name);N=B[z.name]={prev:M}}_=this.applyParsedProperty(C,Sn(z))||_,n&&(N.next=C.pstyle(z.name))}_&&this.updateStyleHints(C),n&&this.updateTransitions(C,B,o)}return _};Ao.overrideBypass=function(r,e,t){e=Gh(e);for(var n=0;n<r.length;n++){var a=r[n],i=a._private.style[e],o=this.properties[e].type,u=o.color,c=o.mutiple,f=i?i.pfValue!=null?i.pfValue:i.value:null;!i||!i.bypass?this.applyBypass(a,e,t):(i.value=t,i.pfValue!=null&&(i.pfValue=t),u?i.strValue="rgb("+t.join(",")+")":c?i.strValue=t.join(" "):i.strValue=""+t,this.updateStyleHints(a)),this.checkTriggers(a,e,f,t)}};Ao.removeAllBypasses=function(r,e){return this.removeBypasses(r,this.propertyNames,e)};Ao.removeBypasses=function(r,e,t){for(var n=!0,a=0;a<r.length;a++){for(var i=r[a],o={},u=0;u<e.length;u++){var c=e[u],f=this.properties[c],d=i.pstyle(f.name);if(!(!d||!d.bypass)){var h="",g=this.parse(c,h,!0),p=o[f.name]={prev:d};this.applyParsedProperty(i,g),p.next=i.pstyle(f.name)}}this.updateStyleHints(i),t&&this.updateTransitions(i,o,n)}};var ov={};ov.getEmSizeInPixels=function(){var r=this.containerCss("font-size");return r!=null?parseFloat(r):1};ov.containerCss=function(r){var e=this._private.cy,t=e.container(),n=e.window();if(n&&t&&n.getComputedStyle)return n.getComputedStyle(t).getPropertyValue(r)};var kn={};kn.getRenderedStyle=function(r,e){return e?this.getStylePropertyValue(r,e,!0):this.getRawStyle(r,!0)};kn.getRawStyle=function(r,e){var t=this;if(r=r[0],r){for(var n={},a=0;a<t.properties.length;a++){var i=t.properties[a],o=t.getStylePropertyValue(r,i.name,e);o!=null&&(n[i.name]=o,n[Al(i.name)]=o)}return n}};kn.getIndexedStyle=function(r,e,t,n){var a=r.pstyle(e)[t][n];return a??r.cy().style().getDefaultProperty(e)[t][0]};kn.getStylePropertyValue=function(r,e,t){var n=this;if(r=r[0],r){var a=n.properties[e];a.alias&&(a=a.pointsTo);var i=a.type,o=r.pstyle(a.name);if(o){var u=o.value,c=o.units,f=o.strValue;if(t&&i.number&&u!=null&&Ue(u)){var d=r.cy().zoom(),h=function(x){return x*d},g=function(x,b){return h(x)+b},p=wt(u),m=p?c.every(function(y){return y!=null}):c!=null;return m?p?u.map(function(y,x){return g(y,c[x])}).join(" "):g(u,c):p?u.map(function(y){return Ye(y)?y:""+h(y)}).join(" "):""+h(u)}else if(f!=null)return f}return null}};kn.getAnimationStartStyle=function(r,e){for(var t={},n=0;n<e.length;n++){var a=e[n],i=a.name,o=r.pstyle(i);o!==void 0&&(dt(o)?o=this.parse(i,o.strValue):o=this.parse(i,o)),o&&(t[i]=o)}return t};kn.getPropsList=function(r){var e=this,t=[],n=r,a=e.properties;if(n)for(var i=Object.keys(n),o=0;o<i.length;o++){var u=i[o],c=n[u],f=a[u]||a[Gh(u)],d=this.parse(f.name,c);d&&t.push(d)}return t};kn.getNonDefaultPropertiesHash=function(r,e,t){var n=t.slice(),a,i,o,u,c,f;for(c=0;c<e.length;c++)if(a=e[c],i=r.pstyle(a,!1),i!=null)if(i.pfValue!=null)n[0]=co(u,n[0]),n[1]=fo(u,n[1]);else for(o=i.strValue,f=0;f<o.length;f++)u=o.charCodeAt(f),n[0]=co(u,n[0]),n[1]=fo(u,n[1]);return n};kn.getPropertiesHash=kn.getNonDefaultPropertiesHash;var ql={};ql.appendFromJson=function(r){for(var e=this,t=0;t<r.length;t++){var n=r[t],a=n.selector,i=n.style||n.css,o=Object.keys(i);e.selector(a);for(var u=0;u<o.length;u++){var c=o[u],f=i[c];e.css(c,f)}}return e};ql.fromJson=function(r){var e=this;return e.resetToDefault(),e.appendFromJson(r),e};ql.json=function(){for(var r=[],e=this.defaultLength;e<this.length;e++){for(var t=this[e],n=t.selector,a=t.properties,i={},o=0;o<a.length;o++){var u=a[o];i[u.name]=u.strValue}r.push({selector:n?n.toString():"core",style:i})}return r};var uv={};uv.appendFromString=function(r){var e=this,t=this,n=""+r,a,i,o;n=n.replace(/[/][*](\s|.)+?[*][/]/g,"");function u(){n.length>a.length?n=n.substr(a.length):n=""}function c(){i.length>o.length?i=i.substr(o.length):i=""}for(;;){var f=n.match(/^\s*$/);if(f)break;var d=n.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!d){gt("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+n);break}a=d[0];var h=d[1];if(h!=="core"){var g=new _a(h);if(g.invalid){gt("Skipping parsing of block: Invalid selector found in string stylesheet: "+h),u();continue}}var p=d[2],m=!1;i=p;for(var y=[];;){var x=i.match(/^\s*$/);if(x)break;var b=i.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!b){gt("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+p),m=!0;break}o=b[0];var _=b[1],E=b[2],C=e.properties[_];if(!C){gt("Skipping property: Invalid property name in: "+o),c();continue}var B=t.parse(_,E);if(!B){gt("Skipping property: Invalid property definition in: "+o),c();continue}y.push({name:_,val:E}),c()}if(m){u();break}t.selector(h);for(var N=0;N<y.length;N++){var A=y[N];t.css(A.name,A.val)}u()}return t};uv.fromString=function(r){var e=this;return e.resetToDefault(),e.appendFromString(r),e};var Gt={};(function(){var r=Qt,e=M_,t=F_,n=U_,a=$_,i=function(de){return"^"+de+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},o=function(de){var be=r+"|\\w+|"+e+"|"+t+"|"+n+"|"+a;return"^"+de+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+r+")\\s*\\,\\s*("+r+")\\s*,\\s*("+be+")\\s*\\,\\s*("+be+")\\)$"},u=[`^url\\s*\\(\\s*['"]?(.+?)['"]?\\s*\\)$`,"^(none)$","^(.+)$"];Gt.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},axisDirectionExplicit:{enums:["leftward","rightward","upward","downward"]},axisDirectionPrimary:{enums:["horizontal","vertical"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},boxSelection:{enums:["contain","overlap","none"]},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},linePosition:{enums:["center","inside","outside"]},lineJoin:{enums:["round","bevel","miter"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi","round-segments","round-taxi"]},radiusType:{enums:["arc-radius","influence-radius"],multiple:!0},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle","circle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},cornerRadius:{number:!0,min:0,units:"px|em",implicitUnits:"px",enums:["auto"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:i("data")},layoutData:{mapping:!0,regex:i("layoutData")},scratch:{mapping:!0,regex:i("scratch")},mapData:{mapping:!0,regex:o("mapData")},mapLayoutData:{mapping:!0,regex:o("mapLayoutData")},mapScratch:{mapping:!0,regex:o("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:u,singleRegexMatchValue:!0},urls:{regexes:u,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(de,be){switch(de.length){case 2:return be[0]!=="deg"&&be[0]!=="rad"&&be[1]!=="deg"&&be[1]!=="rad";case 1:return Ye(de[0])||be[0]==="deg"||be[0]==="rad";default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+r+")\\s*,\\s*("+r+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+r+")\\s*,\\s*("+r+")\\s*,\\s*("+r+")\\s*,\\s*("+r+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(de){var be=de.length;return be===1||be===2||be===4}}};var c={zeroNonZero:function(de,be){return(de==null||be==null)&&de!==be||de==0&&be!=0?!0:de!=0&&be==0},any:function(de,be){return de!=be},emptyNonEmpty:function(de,be){var Re=wa(de),D=wa(be);return Re&&!D||!Re&&D}},f=Gt.types,d=[{name:"label",type:f.text,triggersBounds:c.any,triggersZOrder:c.emptyNonEmpty},{name:"text-rotation",type:f.textRotation,triggersBounds:c.any},{name:"text-margin-x",type:f.bidirectionalSize,triggersBounds:c.any},{name:"text-margin-y",type:f.bidirectionalSize,triggersBounds:c.any}],h=[{name:"source-label",type:f.text,triggersBounds:c.any},{name:"source-text-rotation",type:f.textRotation,triggersBounds:c.any},{name:"source-text-margin-x",type:f.bidirectionalSize,triggersBounds:c.any},{name:"source-text-margin-y",type:f.bidirectionalSize,triggersBounds:c.any},{name:"source-text-offset",type:f.size,triggersBounds:c.any}],g=[{name:"target-label",type:f.text,triggersBounds:c.any},{name:"target-text-rotation",type:f.textRotation,triggersBounds:c.any},{name:"target-text-margin-x",type:f.bidirectionalSize,triggersBounds:c.any},{name:"target-text-margin-y",type:f.bidirectionalSize,triggersBounds:c.any},{name:"target-text-offset",type:f.size,triggersBounds:c.any}],p=[{name:"font-family",type:f.fontFamily,triggersBounds:c.any},{name:"font-style",type:f.fontStyle,triggersBounds:c.any},{name:"font-weight",type:f.fontWeight,triggersBounds:c.any},{name:"font-size",type:f.size,triggersBounds:c.any},{name:"text-transform",type:f.textTransform,triggersBounds:c.any},{name:"text-wrap",type:f.textWrap,triggersBounds:c.any},{name:"text-overflow-wrap",type:f.textOverflowWrap,triggersBounds:c.any},{name:"text-max-width",type:f.size,triggersBounds:c.any},{name:"text-outline-width",type:f.size,triggersBounds:c.any},{name:"line-height",type:f.positiveNumber,triggersBounds:c.any}],m=[{name:"text-valign",type:f.valign,triggersBounds:c.any},{name:"text-halign",type:f.halign,triggersBounds:c.any},{name:"color",type:f.color},{name:"text-outline-color",type:f.color},{name:"text-outline-opacity",type:f.zeroOneNumber},{name:"text-background-color",type:f.color},{name:"text-background-opacity",type:f.zeroOneNumber},{name:"text-background-padding",type:f.size,triggersBounds:c.any},{name:"text-border-opacity",type:f.zeroOneNumber},{name:"text-border-color",type:f.color},{name:"text-border-width",type:f.size,triggersBounds:c.any},{name:"text-border-style",type:f.borderStyle,triggersBounds:c.any},{name:"text-background-shape",type:f.textBackgroundShape,triggersBounds:c.any},{name:"text-justification",type:f.justification},{name:"box-select-labels",type:f.bool,triggersBounds:c.any}],y=[{name:"events",type:f.bool,triggersZOrder:c.any},{name:"text-events",type:f.bool,triggersZOrder:c.any},{name:"box-selection",type:f.boxSelection,triggersZOrder:c.any}],x=[{name:"display",type:f.display,triggersZOrder:c.any,triggersBounds:c.any,triggersBoundsOfConnectedEdges:c.any,triggersBoundsOfParallelEdges:function(de,be,Re){return de===be?!1:Re.pstyle("curve-style").value==="bezier"}},{name:"visibility",type:f.visibility,triggersZOrder:c.any},{name:"opacity",type:f.zeroOneNumber,triggersZOrder:c.zeroNonZero},{name:"text-opacity",type:f.zeroOneNumber},{name:"min-zoomed-font-size",type:f.size},{name:"z-compound-depth",type:f.zCompoundDepth,triggersZOrder:c.any},{name:"z-index-compare",type:f.zIndexCompare,triggersZOrder:c.any},{name:"z-index",type:f.number,triggersZOrder:c.any}],b=[{name:"overlay-padding",type:f.size,triggersBounds:c.any},{name:"overlay-color",type:f.color},{name:"overlay-opacity",type:f.zeroOneNumber,triggersBounds:c.zeroNonZero},{name:"overlay-shape",type:f.overlayShape,triggersBounds:c.any},{name:"overlay-corner-radius",type:f.cornerRadius}],_=[{name:"underlay-padding",type:f.size,triggersBounds:c.any},{name:"underlay-color",type:f.color},{name:"underlay-opacity",type:f.zeroOneNumber,triggersBounds:c.zeroNonZero},{name:"underlay-shape",type:f.overlayShape,triggersBounds:c.any},{name:"underlay-corner-radius",type:f.cornerRadius}],E=[{name:"transition-property",type:f.propList},{name:"transition-duration",type:f.time},{name:"transition-delay",type:f.time},{name:"transition-timing-function",type:f.easing}],C=function(de,be){return be.value==="label"?-de.poolIndex():be.pfValue},B=[{name:"height",type:f.nodeSize,triggersBounds:c.any,hashOverride:C},{name:"width",type:f.nodeSize,triggersBounds:c.any,hashOverride:C},{name:"shape",type:f.nodeShape,triggersBounds:c.any},{name:"shape-polygon-points",type:f.polygonPointList,triggersBounds:c.any},{name:"corner-radius",type:f.cornerRadius},{name:"background-color",type:f.color},{name:"background-fill",type:f.fill},{name:"background-opacity",type:f.zeroOneNumber},{name:"background-blacken",type:f.nOneOneNumber},{name:"background-gradient-stop-colors",type:f.colors},{name:"background-gradient-stop-positions",type:f.percentages},{name:"background-gradient-direction",type:f.gradientDirection},{name:"padding",type:f.sizeMaybePercent,triggersBounds:c.any},{name:"padding-relative-to",type:f.paddingRelativeTo,triggersBounds:c.any},{name:"bounds-expansion",type:f.boundsExpansion,triggersBounds:c.any}],N=[{name:"border-color",type:f.color},{name:"border-opacity",type:f.zeroOneNumber},{name:"border-width",type:f.size,triggersBounds:c.any},{name:"border-style",type:f.borderStyle},{name:"border-cap",type:f.lineCap},{name:"border-join",type:f.lineJoin},{name:"border-dash-pattern",type:f.numbers},{name:"border-dash-offset",type:f.number},{name:"border-position",type:f.linePosition}],A=[{name:"outline-color",type:f.color},{name:"outline-opacity",type:f.zeroOneNumber},{name:"outline-width",type:f.size,triggersBounds:c.any},{name:"outline-style",type:f.borderStyle},{name:"outline-offset",type:f.size,triggersBounds:c.any}],z=[{name:"background-image",type:f.urls},{name:"background-image-crossorigin",type:f.bgCrossOrigin},{name:"background-image-opacity",type:f.zeroOneNumbers},{name:"background-image-containment",type:f.bgContainment},{name:"background-image-smoothing",type:f.bools},{name:"background-position-x",type:f.bgPos},{name:"background-position-y",type:f.bgPos},{name:"background-width-relative-to",type:f.bgRelativeTo},{name:"background-height-relative-to",type:f.bgRelativeTo},{name:"background-repeat",type:f.bgRepeat},{name:"background-fit",type:f.bgFit},{name:"background-clip",type:f.bgClip},{name:"background-width",type:f.bgWH},{name:"background-height",type:f.bgWH},{name:"background-offset-x",type:f.bgPos},{name:"background-offset-y",type:f.bgPos}],M=[{name:"position",type:f.position,triggersBounds:c.any},{name:"compound-sizing-wrt-labels",type:f.compoundIncludeLabels,triggersBounds:c.any},{name:"min-width",type:f.size,triggersBounds:c.any},{name:"min-width-bias-left",type:f.sizeMaybePercent,triggersBounds:c.any},{name:"min-width-bias-right",type:f.sizeMaybePercent,triggersBounds:c.any},{name:"min-height",type:f.size,triggersBounds:c.any},{name:"min-height-bias-top",type:f.sizeMaybePercent,triggersBounds:c.any},{name:"min-height-bias-bottom",type:f.sizeMaybePercent,triggersBounds:c.any}],V=[{name:"line-style",type:f.lineStyle},{name:"line-color",type:f.color},{name:"line-fill",type:f.fill},{name:"line-cap",type:f.lineCap},{name:"line-opacity",type:f.zeroOneNumber},{name:"line-dash-pattern",type:f.numbers},{name:"line-dash-offset",type:f.number},{name:"line-outline-width",type:f.size},{name:"line-outline-color",type:f.color},{name:"line-gradient-stop-colors",type:f.colors},{name:"line-gradient-stop-positions",type:f.percentages},{name:"curve-style",type:f.curveStyle,triggersBounds:c.any,triggersBoundsOfParallelEdges:function(de,be){return de===be?!1:de==="bezier"||be==="bezier"}},{name:"haystack-radius",type:f.zeroOneNumber,triggersBounds:c.any},{name:"source-endpoint",type:f.edgeEndpoint,triggersBounds:c.any},{name:"target-endpoint",type:f.edgeEndpoint,triggersBounds:c.any},{name:"control-point-step-size",type:f.size,triggersBounds:c.any},{name:"control-point-distances",type:f.bidirectionalSizes,triggersBounds:c.any},{name:"control-point-weights",type:f.numbers,triggersBounds:c.any},{name:"segment-distances",type:f.bidirectionalSizes,triggersBounds:c.any},{name:"segment-weights",type:f.numbers,triggersBounds:c.any},{name:"segment-radii",type:f.numbers,triggersBounds:c.any},{name:"radius-type",type:f.radiusType,triggersBounds:c.any},{name:"taxi-turn",type:f.bidirectionalSizeMaybePercent,triggersBounds:c.any},{name:"taxi-turn-min-distance",type:f.size,triggersBounds:c.any},{name:"taxi-direction",type:f.axisDirection,triggersBounds:c.any},{name:"taxi-radius",type:f.number,triggersBounds:c.any},{name:"edge-distances",type:f.edgeDistances,triggersBounds:c.any},{name:"arrow-scale",type:f.positiveNumber,triggersBounds:c.any},{name:"loop-direction",type:f.angle,triggersBounds:c.any},{name:"loop-sweep",type:f.angle,triggersBounds:c.any},{name:"source-distance-from-node",type:f.size,triggersBounds:c.any},{name:"target-distance-from-node",type:f.size,triggersBounds:c.any}],q=[{name:"ghost",type:f.bool,triggersBounds:c.any},{name:"ghost-offset-x",type:f.bidirectionalSize,triggersBounds:c.any},{name:"ghost-offset-y",type:f.bidirectionalSize,triggersBounds:c.any},{name:"ghost-opacity",type:f.zeroOneNumber}],I=[{name:"selection-box-color",type:f.color},{name:"selection-box-opacity",type:f.zeroOneNumber},{name:"selection-box-border-color",type:f.color},{name:"selection-box-border-width",type:f.size},{name:"active-bg-color",type:f.color},{name:"active-bg-opacity",type:f.zeroOneNumber},{name:"active-bg-size",type:f.size},{name:"outside-texture-bg-color",type:f.color},{name:"outside-texture-bg-opacity",type:f.zeroOneNumber}],F=[];Gt.pieBackgroundN=16,F.push({name:"pie-size",type:f.sizeMaybePercent}),F.push({name:"pie-hole",type:f.sizeMaybePercent}),F.push({name:"pie-start-angle",type:f.angle});for(var T=1;T<=Gt.pieBackgroundN;T++)F.push({name:"pie-"+T+"-background-color",type:f.color}),F.push({name:"pie-"+T+"-background-size",type:f.percent}),F.push({name:"pie-"+T+"-background-opacity",type:f.zeroOneNumber});var G=[];Gt.stripeBackgroundN=16,G.push({name:"stripe-size",type:f.sizeMaybePercent}),G.push({name:"stripe-direction",type:f.axisDirectionPrimary});for(var Q=1;Q<=Gt.stripeBackgroundN;Q++)G.push({name:"stripe-"+Q+"-background-color",type:f.color}),G.push({name:"stripe-"+Q+"-background-size",type:f.percent}),G.push({name:"stripe-"+Q+"-background-opacity",type:f.zeroOneNumber});var W=[],X=Gt.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:f.arrowShape,triggersBounds:c.any},{name:"arrow-color",type:f.color},{name:"arrow-fill",type:f.arrowFill},{name:"arrow-width",type:f.arrowWidth}].forEach(function(ce){X.forEach(function(de){var be=de+"-"+ce.name,Re=ce.type,D=ce.triggersBounds;W.push({name:be,type:Re,triggersBounds:D})})},{});var Z=Gt.properties=[].concat(y,E,x,b,_,q,m,p,d,h,g,B,N,A,z,F,G,M,V,W,I),te=Gt.propertyGroups={behavior:y,transition:E,visibility:x,overlay:b,underlay:_,ghost:q,commonLabel:m,labelDimensions:p,mainLabel:d,sourceLabel:h,targetLabel:g,nodeBody:B,nodeBorder:N,nodeOutline:A,backgroundImage:z,pie:F,stripe:G,compound:M,edgeLine:V,edgeArrow:W,core:I},L=Gt.propertyGroupNames={},U=Gt.propertyGroupKeys=Object.keys(te);U.forEach(function(ce){L[ce]=te[ce].map(function(de){return de.name}),te[ce].forEach(function(de){return de.groupKey=ce})});var oe=Gt.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"segment-distance",pointsTo:"segment-distances"},{name:"segment-weight",pointsTo:"segment-weights"},{name:"segment-radius",pointsTo:"segment-radii"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];Gt.propertyNames=Z.map(function(ce){return ce.name});for(var ie=0;ie<Z.length;ie++){var ne=Z[ie];Z[ne.name]=ne}for(var we=0;we<oe.length;we++){var Pe=oe[we],Ce=Z[Pe.pointsTo],ge={name:Pe.name,alias:!0,pointsTo:Ce};Z.push(ge),Z[Pe.name]=ge}})();Gt.getDefaultProperty=function(r){return this.getDefaultProperties()[r]};Gt.getDefaultProperties=function(){var r=this._private;if(r.defaultProperties!=null)return r.defaultProperties;for(var e=et({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","box-selection":"contain","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","overlay-corner-radius":"auto","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","underlay-corner-radius":"auto","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","box-select-labels":"no","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","border-dash-pattern":[4,2],"border-dash-offset":0,"border-cap":"butt","border-join":"miter","border-position":"center","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","corner-radius":"auto","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%","pie-hole":0,"pie-start-angle":"0deg"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(c,f){for(var d=1;d<=Gt.pieBackgroundN;d++){var h=f.name.replace("{{i}}",d),g=f.value;c[h]=g}return c},{}),{"stripe-size":"100%","stripe-direction":"horizontal"},[{name:"stripe-{{i}}-background-color",value:"black"},{name:"stripe-{{i}}-background-size",value:"0%"},{name:"stripe-{{i}}-background-opacity",value:1}].reduce(function(c,f){for(var d=1;d<=Gt.stripeBackgroundN;d++){var h=f.name.replace("{{i}}",d),g=f.value;c[h]=g}return c},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-outline-width":0,"line-outline-color":"#000","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"segment-radii":15,"radius-type":"arc-radius","taxi-turn":"50%","taxi-radius":15,"taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce(function(c,f){return Gt.arrowPrefixes.forEach(function(d){var h=d+"-"+f.name,g=f.value;c[h]=g}),c},{})),t={},n=0;n<this.properties.length;n++){var a=this.properties[n];if(!a.pointsTo){var i=a.name,o=e[i],u=this.parse(i,o);t[i]=u}}return r.defaultProperties=t,r.defaultProperties};Gt.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var Wl={};Wl.parse=function(r,e,t,n){var a=this;if(zt(e))return a.parseImplWarn(r,e,t,n);var i=n==="mapping"||n===!0||n===!1||n==null?"dontcare":n,o=t?"t":"f",u=""+e,c=w1(r,u,o,i),f=a.propCache=a.propCache||[],d;return(d=f[c])||(d=f[c]=a.parseImplWarn(r,e,t,n)),(t||n==="mapping")&&(d=Sn(d),d&&(d.value=Sn(d.value))),d};Wl.parseImplWarn=function(r,e,t,n){var a=this.parseImpl(r,e,t,n);return!a&&e!=null&&gt("The style property `".concat(r,": ").concat(e,"` is invalid")),a&&(a.name==="width"||a.name==="height")&&e==="label"&&gt("The style value of `label` is deprecated for `"+a.name+"`"),a};Wl.parseImpl=function(r,e,t,n){var a=this;r=Gh(r);var i=a.properties[r],o=e,u=a.types;if(!i||e===void 0)return null;i.alias&&(i=i.pointsTo,r=i.name);var c=Ye(e);c&&(e=e.trim());var f=i.type;if(!f)return null;if(t&&(e===""||e===null))return{name:r,value:e,bypass:!0,deleteBypass:!0};if(zt(e))return{name:r,value:e,strValue:"fn",mapped:u.fn,bypass:t};var d,h;if(!(!c||n||e.length<7||e[1]!=="a")){if(e.length>=7&&e[0]==="d"&&(d=new RegExp(u.data.regex).exec(e))){if(t)return!1;var g=u.data;return{name:r,value:d,strValue:""+e,mapped:g,field:d[1],bypass:t}}else if(e.length>=10&&e[0]==="m"&&(h=new RegExp(u.mapData.regex).exec(e))){if(t||f.multiple)return!1;var p=u.mapData;if(!(f.color||f.number))return!1;var m=this.parse(r,h[4]);if(!m||m.mapped)return!1;var y=this.parse(r,h[5]);if(!y||y.mapped)return!1;if(m.pfValue===y.pfValue||m.strValue===y.strValue)return gt("`"+r+": "+e+"` is not a valid mapper because the output range is zero; converting to `"+r+": "+m.strValue+"`"),this.parse(r,m.strValue);if(f.color){var x=m.value,b=y.value,_=x[0]===b[0]&&x[1]===b[1]&&x[2]===b[2]&&(x[3]===b[3]||(x[3]==null||x[3]===1)&&(b[3]==null||b[3]===1));if(_)return!1}return{name:r,value:h,strValue:""+e,mapped:p,field:h[1],fieldMin:parseFloat(h[2]),fieldMax:parseFloat(h[3]),valueMin:m.value,valueMax:y.value,bypass:t}}}if(f.multiple&&n!=="multiple"){var E;if(c?E=e.split(/\s+/):wt(e)?E=e:E=[e],f.evenMultiple&&E.length%2!==0)return null;for(var C=[],B=[],N=[],A="",z=!1,M=0;M<E.length;M++){var V=a.parse(r,E[M],t,"multiple");z=z||Ye(V.value),C.push(V.value),N.push(V.pfValue!=null?V.pfValue:V.value),B.push(V.units),A+=(M>0?" ":"")+V.strValue}return f.validate&&!f.validate(C,B)?null:f.singleEnum&&z?C.length===1&&Ye(C[0])?{name:r,value:C[0],strValue:C[0],bypass:t}:null:{name:r,value:C,pfValue:N,strValue:A,bypass:t,units:B}}var q=function(){for(var ge=0;ge<f.enums.length;ge++){var ce=f.enums[ge];if(ce===e)return{name:r,value:e,strValue:""+e,bypass:t}}return null};if(f.number){var I,F="px";if(f.units&&(I=f.units),f.implicitUnits&&(F=f.implicitUnits),!f.unitless)if(c){var T="px|em"+(f.allowPercent?"|\\%":"");I&&(T=I);var G=e.match("^("+Qt+")("+T+")?$");G&&(e=G[1],I=G[2]||F)}else(!I||f.implicitUnits)&&(I=F);if(e=parseFloat(e),isNaN(e)&&f.enums===void 0)return null;if(isNaN(e)&&f.enums!==void 0)return e=o,q();if(f.integer&&!B_(e)||f.min!==void 0&&(e<f.min||f.strictMin&&e===f.min)||f.max!==void 0&&(e>f.max||f.strictMax&&e===f.max))return null;var Q={name:r,value:e,strValue:""+e+(I||""),units:I,bypass:t};return f.unitless||I!=="px"&&I!=="em"?Q.pfValue=e:Q.pfValue=I==="px"||!I?e:this.getEmSizeInPixels()*e,(I==="ms"||I==="s")&&(Q.pfValue=I==="ms"?e:1e3*e),(I==="deg"||I==="rad")&&(Q.pfValue=I==="rad"?e:UE(e)),I==="%"&&(Q.pfValue=e/100),Q}else if(f.propList){var W=[],X=""+e;if(X!=="none"){for(var Z=X.split(/\s*,\s*|\s+/),te=0;te<Z.length;te++){var L=Z[te].trim();a.properties[L]?W.push(L):gt("`"+L+"` is not a valid property name")}if(W.length===0)return null}return{name:r,value:W,strValue:W.length===0?"none":W.join(" "),bypass:t}}else if(f.color){var U=d1(e);return U?{name:r,value:U,pfValue:U,strValue:"rgb("+U[0]+","+U[1]+","+U[2]+")",bypass:t}:null}else if(f.regex||f.regexes){if(f.enums){var oe=q();if(oe)return oe}for(var ie=f.regexes?f.regexes:[f.regex],ne=0;ne<ie.length;ne++){var we=new RegExp(ie[ne]),Pe=we.exec(e);if(Pe)return{name:r,value:f.singleRegexMatchValue?Pe[1]:Pe,strValue:""+e,bypass:t}}return null}else return f.string?{name:r,value:""+e,strValue:""+e,bypass:t}:f.enums?q():null};var ir=function(e){if(!(this instanceof ir))return new ir(e);if(!Wh(e)){At("A style must have a core reference");return}this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()},br=ir.prototype;br.instanceString=function(){return"style"};br.clear=function(){for(var r=this._private,e=r.cy,t=e.elements(),n=0;n<this.length;n++)this[n]=void 0;return this.length=0,r.contextStyles={},r.propDiffs={},this.cleanElements(t,!0),t.forEach(function(a){var i=a[0]._private;i.styleDirty=!0,i.appliedInitStyle=!1}),this};br.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this};br.core=function(r){return this._private.coreStyle[r]||this.getDefaultProperty(r)};br.selector=function(r){var e=r==="core"?null:new _a(r),t=this.length++;return this[t]={selector:e,properties:[],mappedProperties:[],index:t},this};br.css=function(){var r=this,e=arguments;if(e.length===1)for(var t=e[0],n=0;n<r.properties.length;n++){var a=r.properties[n],i=t[a.name];i===void 0&&(i=t[Al(a.name)]),i!==void 0&&this.cssRule(a.name,i)}else e.length===2&&this.cssRule(e[0],e[1]);return this};br.style=br.css;br.cssRule=function(r,e){var t=this.parse(r,e);if(t){var n=this.length-1;this[n].properties.push(t),this[n].properties[t.name]=t,t.name.match(/pie-(\d+)-background-size/)&&t.value&&(this._private.hasPie=!0),t.name.match(/stripe-(\d+)-background-size/)&&t.value&&(this._private.hasStripe=!0),t.mapped&&this[n].mappedProperties.push(t);var a=!this[n].selector;a&&(this._private.coreStyle[t.name]=t)}return this};br.append=function(r){return l1(r)?r.appendToStyle(this):wt(r)?this.appendFromJson(r):Ye(r)&&this.appendFromString(r),this};ir.fromJson=function(r,e){var t=new ir(r);return t.fromJson(e),t};ir.fromString=function(r,e){return new ir(r).fromString(e)};[sr,Ao,ov,kn,ql,uv,Gt,Wl].forEach(function(r){et(br,r)});ir.types=br.types;ir.properties=br.properties;ir.propertyGroups=br.propertyGroups;ir.propertyGroupNames=br.propertyGroupNames;ir.propertyGroupKeys=br.propertyGroupKeys;var qC={style:function(e){if(e){var t=this.setStyle(e);t.update()}return this._private.style},setStyle:function(e){var t=this._private;return l1(e)?t.style=e.generateStyle(this):wt(e)?t.style=ir.fromJson(this,e):Ye(e)?t.style=ir.fromString(this,e):t.style=ir(this),t.style},updateStyle:function(){this.mutableElements().updateStyle()}},WC="single",ti={autolock:function(e){if(e!==void 0)this._private.autolock=!!e;else return this._private.autolock;return this},autoungrabify:function(e){if(e!==void 0)this._private.autoungrabify=!!e;else return this._private.autoungrabify;return this},autounselectify:function(e){if(e!==void 0)this._private.autounselectify=!!e;else return this._private.autounselectify;return this},selectionType:function(e){var t=this._private;if(t.selectionType==null&&(t.selectionType=WC),e!==void 0)(e==="additive"||e==="single")&&(t.selectionType=e);else return t.selectionType;return this},panningEnabled:function(e){if(e!==void 0)this._private.panningEnabled=!!e;else return this._private.panningEnabled;return this},userPanningEnabled:function(e){if(e!==void 0)this._private.userPanningEnabled=!!e;else return this._private.userPanningEnabled;return this},zoomingEnabled:function(e){if(e!==void 0)this._private.zoomingEnabled=!!e;else return this._private.zoomingEnabled;return this},userZoomingEnabled:function(e){if(e!==void 0)this._private.userZoomingEnabled=!!e;else return this._private.userZoomingEnabled;return this},boxSelectionEnabled:function(e){if(e!==void 0)this._private.boxSelectionEnabled=!!e;else return this._private.boxSelectionEnabled;return this},pan:function(){var e=arguments,t=this._private.pan,n,a,i,o,u;switch(e.length){case 0:return t;case 1:if(Ye(e[0]))return n=e[0],t[n];if(dt(e[0])){if(!this._private.panningEnabled)return this;i=e[0],o=i.x,u=i.y,Ue(o)&&(t.x=o),Ue(u)&&(t.y=u),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;n=e[0],a=e[1],(n==="x"||n==="y")&&Ue(a)&&(t[n]=a),this.emit("pan viewport");break}return this.notify("viewport"),this},panBy:function(e,t){var n=arguments,a=this._private.pan,i,o,u,c,f;if(!this._private.panningEnabled)return this;switch(n.length){case 1:dt(e)&&(u=n[0],c=u.x,f=u.y,Ue(c)&&(a.x+=c),Ue(f)&&(a.y+=f),this.emit("pan viewport"));break;case 2:i=e,o=t,(i==="x"||i==="y")&&Ue(o)&&(a[i]+=o),this.emit("pan viewport");break}return this.notify("viewport"),this},gc:function(){this.notify("gc")},fit:function(e,t){var n=this.getFitViewport(e,t);if(n){var a=this._private;a.zoom=n.zoom,a.pan=n.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,t){if(Ue(e)&&t===void 0&&(t=e,e=void 0),!(!this._private.panningEnabled||!this._private.zoomingEnabled)){var n;if(Ye(e)){var a=e;e=this.$(a)}else if(I_(e)){var i=e;n={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2},n.w=n.x2-n.x1,n.h=n.y2-n.y1}else Hr(e)||(e=this.mutableElements());if(!(Hr(e)&&e.empty())){n=n||e.boundingBox();var o=this.width(),u=this.height(),c;if(t=Ue(t)?t:0,!isNaN(o)&&!isNaN(u)&&o>0&&u>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0){c=Math.min((o-2*t)/n.w,(u-2*t)/n.h),c=c>this._private.maxZoom?this._private.maxZoom:c,c=c<this._private.minZoom?this._private.minZoom:c;var f={x:(o-c*(n.x1+n.x2))/2,y:(u-c*(n.y1+n.y2))/2};return{zoom:c,pan:f}}}}},zoomRange:function(e,t){var n=this._private;if(t==null){var a=e;e=a.min,t=a.max}return Ue(e)&&Ue(t)&&e<=t?(n.minZoom=e,n.maxZoom=t):Ue(e)&&t===void 0&&e<=n.maxZoom?n.minZoom=e:Ue(t)&&e===void 0&&t>=n.minZoom&&(n.maxZoom=t),this},minZoom:function(e){return e===void 0?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return e===void 0?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var t=this._private,n=t.pan,a=t.zoom,i,o,u=!1;if(t.zoomingEnabled||(u=!0),Ue(e)?o=e:dt(e)&&(o=e.level,e.position!=null?i=Ll(e.position,a,n):e.renderedPosition!=null&&(i=e.renderedPosition),i!=null&&!t.panningEnabled&&(u=!0)),o=o>t.maxZoom?t.maxZoom:o,o=o<t.minZoom?t.minZoom:o,u||!Ue(o)||o===a||i!=null&&(!Ue(i.x)||!Ue(i.y)))return null;if(i!=null){var c=n,f=a,d=o,h={x:-d/f*(i.x-c.x)+i.x,y:-d/f*(i.y-c.y)+i.y};return{zoomed:!0,panned:!0,zoom:d,pan:h}}else return{zoomed:!0,panned:!1,zoom:o,pan:n}},zoom:function(e){if(e===void 0)return this._private.zoom;var t=this.getZoomedViewport(e),n=this._private;return t==null||!t.zoomed?this:(n.zoom=t.zoom,t.panned&&(n.pan.x=t.pan.x,n.pan.y=t.pan.y),this.emit("zoom"+(t.panned?" pan":"")+" viewport"),this.notify("viewport"),this)},viewport:function(e){var t=this._private,n=!0,a=!0,i=[],o=!1,u=!1;if(!e)return this;if(Ue(e.zoom)||(n=!1),dt(e.pan)||(a=!1),!n&&!a)return this;if(n){var c=e.zoom;c<t.minZoom||c>t.maxZoom||!t.zoomingEnabled?o=!0:(t.zoom=c,i.push("zoom"))}if(a&&(!o||!e.cancelOnFailedZoom)&&t.panningEnabled){var f=e.pan;Ue(f.x)&&(t.pan.x=f.x,u=!1),Ue(f.y)&&(t.pan.y=f.y,u=!1),u||i.push("pan")}return i.length>0&&(i.push("viewport"),this.emit(i.join(" ")),this.notify("viewport")),this},center:function(e){var t=this.getCenterPan(e);return t&&(this._private.pan=t,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,t){if(this._private.panningEnabled){if(Ye(e)){var n=e;e=this.mutableElements().filter(n)}else Hr(e)||(e=this.mutableElements());if(e.length!==0){var a=e.boundingBox(),i=this.width(),o=this.height();t=t===void 0?this._private.zoom:t;var u={x:(i-t*(a.x1+a.x2))/2,y:(o-t*(a.y1+a.y2))/2};return u}}},reset:function(){return!this._private.panningEnabled||!this._private.zoomingEnabled?this:(this.viewport({pan:{x:0,y:0},zoom:1}),this)},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e=this._private,t=e.container,n=this;return e.sizeCache=e.sizeCache||(t?(function(){var a=n.window().getComputedStyle(t),i=function(u){return parseFloat(a.getPropertyValue(u))};return{width:t.clientWidth-i("padding-left")-i("padding-right"),height:t.clientHeight-i("padding-top")-i("padding-bottom")}})():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,t=this._private.zoom,n=this.renderedExtent(),a={x1:(n.x1-e.x)/t,x2:(n.x2-e.x)/t,y1:(n.y1-e.y)/t,y2:(n.y2-e.y)/t};return a.w=a.x2-a.x1,a.h=a.y2-a.y1,a},renderedExtent:function(){var e=this.width(),t=this.height();return{x1:0,y1:0,x2:e,y2:t,w:e,h:t}},multiClickDebounceTime:function(e){if(e)this._private.multiClickDebounceTime=e;else return this._private.multiClickDebounceTime;return this}};ti.centre=ti.center;ti.autolockNodes=ti.autolock;ti.autoungrabifyNodes=ti.autoungrabify;var yo={data:pt.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:pt.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:pt.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:pt.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};yo.attr=yo.data;yo.removeAttr=yo.removeData;var wo=function(e){var t=this;e=et({},e);var n=e.container;n&&!ml(n)&&ml(n[0])&&(n=n[0]);var a=n?n._cyreg:null;a=a||{},a&&a.cy&&(a.cy.destroy(),a={});var i=a.readies=a.readies||[];n&&(n._cyreg=a),a.cy=t;var o=Yt!==void 0&&n!==void 0&&!e.headless,u=e;u.layout=et({name:o?"grid":"null"},u.layout),u.renderer=et({name:o?"canvas":"null"},u.renderer);var c=function(m,y,x){return y!==void 0?y:x!==void 0?x:m},f=this._private={container:n,ready:!1,options:u,elements:new fr(this),listeners:[],aniEles:new fr(this),data:u.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:c(!0,u.zoomingEnabled),userZoomingEnabled:c(!0,u.userZoomingEnabled),panningEnabled:c(!0,u.panningEnabled),userPanningEnabled:c(!0,u.userPanningEnabled),boxSelectionEnabled:c(!0,u.boxSelectionEnabled),autolock:c(!1,u.autolock,u.autolockNodes),autoungrabify:c(!1,u.autoungrabify,u.autoungrabifyNodes),autounselectify:c(!1,u.autounselectify),styleEnabled:u.styleEnabled===void 0?o:u.styleEnabled,zoom:Ue(u.zoom)?u.zoom:1,pan:{x:dt(u.pan)&&Ue(u.pan.x)?u.pan.x:0,y:dt(u.pan)&&Ue(u.pan.y)?u.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:c(250,u.multiClickDebounceTime)};this.createEmitter(),this.selectionType(u.selectionType),this.zoomRange({min:u.minZoom,max:u.maxZoom});var d=function(m,y){var x=m.some(L_);if(x)return es.all(m).then(y);y(m)};f.styleEnabled&&t.setStyle([]);var h=et({},u,u.renderer);t.initRenderer(h);var g=function(m,y,x){t.notifications(!1);var b=t.mutableElements();b.length>0&&b.remove(),m!=null&&(dt(m)||wt(m))&&t.add(m),t.one("layoutready",function(E){t.notifications(!0),t.emit(E),t.one("load",y),t.emitAndNotify("load")}).one("layoutstop",function(){t.one("done",x),t.emit("done")});var _=et({},t._private.options.layout);_.eles=t.elements(),t.layout(_).run()};d([u.style,u.elements],function(p){var m=p[0],y=p[1];f.styleEnabled&&t.style().append(m),g(y,function(){t.startAnimationLoop(),f.ready=!0,zt(u.ready)&&t.on("ready",u.ready);for(var x=0;x<i.length;x++){var b=i[x];t.on("ready",b)}a&&(a.readies=[]),t.emit("ready")},u.done)})},Sl=wo.prototype;et(Sl,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},window:function(){var e=this._private.container;if(e==null)return Yt;var t=this._private.container.ownerDocument;return t===void 0||t==null?Yt:t.defaultView||Yt},mount:function(e){if(e!=null){var t=this,n=t._private,a=n.options;return!ml(e)&&ml(e[0])&&(e=e[0]),t.stopAnimationLoop(),t.destroyRenderer(),n.container=e,n.styleEnabled=!0,t.invalidateSize(),t.initRenderer(et({},a,a.renderer,{name:a.renderer.name==="null"?"canvas":a.renderer.name})),t.startAnimationLoop(),t.style(a.style),t.emit("mount"),t}},unmount:function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},options:function(){return Sn(this._private.options)},json:function(e){var t=this,n=t._private,a=t.mutableElements(),i=function(C){return t.getElementById(C.id())};if(dt(e)){if(t.startBatch(),e.elements){var o={},u=function(C,B){for(var N=[],A=[],z=0;z<C.length;z++){var M=C[z];if(!M.data.id){gt("cy.json() cannot handle elements without an ID attribute");continue}var V=""+M.data.id,q=t.getElementById(V);o[V]=!0,q.length!==0?A.push({ele:q,json:M}):(B&&(M.group=B),N.push(M))}t.add(N);for(var I=0;I<A.length;I++){var F=A[I],T=F.ele,G=F.json;T.json(G)}};if(wt(e.elements))u(e.elements);else for(var c=["nodes","edges"],f=0;f<c.length;f++){var d=c[f],h=e.elements[d];wt(h)&&u(h,d)}var g=t.collection();a.filter(function(E){return!o[E.id()]}).forEach(function(E){E.isParent()?g.merge(E):E.remove()}),g.forEach(function(E){return E.children().move({parent:null})}),g.forEach(function(E){return i(E).remove()})}e.style&&t.style(e.style),e.zoom!=null&&e.zoom!==n.zoom&&t.zoom(e.zoom),e.pan&&(e.pan.x!==n.pan.x||e.pan.y!==n.pan.y)&&t.pan(e.pan),e.data&&t.data(e.data);for(var p=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],m=0;m<p.length;m++){var y=p[m];e[y]!=null&&t[y](e[y])}return t.endBatch(),this}else{var x=!!e,b={};x?b.elements=this.elements().map(function(E){return E.json()}):(b.elements={},a.forEach(function(E){var C=E.group();b.elements[C]||(b.elements[C]=[]),b.elements[C].push(E.json())})),this._private.styleEnabled&&(b.style=t.style().json()),b.data=Sn(t.data());var _=n.options;return b.zoomingEnabled=n.zoomingEnabled,b.userZoomingEnabled=n.userZoomingEnabled,b.zoom=n.zoom,b.minZoom=n.minZoom,b.maxZoom=n.maxZoom,b.panningEnabled=n.panningEnabled,b.userPanningEnabled=n.userPanningEnabled,b.pan=Sn(n.pan),b.boxSelectionEnabled=n.boxSelectionEnabled,b.renderer=Sn(_.renderer),b.hideEdgesOnViewport=_.hideEdgesOnViewport,b.textureOnViewport=_.textureOnViewport,b.wheelSensitivity=_.wheelSensitivity,b.motionBlur=_.motionBlur,b.multiClickDebounceTime=_.multiClickDebounceTime,b}}});Sl.$id=Sl.getElementById;[LC,FC,lw,Ah,fl,$C,Dh,dl,qC,ti,yo].forEach(function(r){et(Sl,r)});var GC={fit:!0,directed:!1,direction:"downward",padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}},HC={maximal:!1,acyclic:!1},Oi=function(e){return e.scratch("breadthfirst")},h0=function(e,t){return e.scratch("breadthfirst",t)};function cw(r){this.options=et({},GC,HC,r)}cw.prototype.run=function(){var r=this.options,e=r.cy,t=r.eles,n=t.nodes().filter(function(ae){return ae.isChildless()}),a=t,i=r.directed,o=r.acyclic||r.maximal||r.maximalAdjustments>0,u=!!r.boundingBox,c=Rr(u?r.boundingBox:structuredClone(e.extent())),f;if(Hr(r.roots))f=r.roots;else if(wt(r.roots)){for(var d=[],h=0;h<r.roots.length;h++){var g=r.roots[h],p=e.getElementById(g);d.push(p)}f=e.collection(d)}else if(Ye(r.roots))f=e.$(r.roots);else if(i)f=n.roots();else{var m=t.components();f=e.collection();for(var y=function(){var he=m[x],me=he.maxDegree(!1),se=he.filter(function(Be){return Be.degree(!1)===me});f=f.add(se)},x=0;x<m.length;x++)y()}var b=[],_={},E=function(he,me){b[me]==null&&(b[me]=[]);var se=b[me].length;b[me].push(he),h0(he,{index:se,depth:me})},C=function(he,me){var se=Oi(he),Be=se.depth,De=se.index;b[Be][De]=null,he.isChildless()&&E(he,me)};a.bfs({roots:f,directed:r.directed,visit:function(he,me,se,Be,De){var Ae=he[0],ze=Ae.id();Ae.isChildless()&&E(Ae,De),_[ze]=!0}});for(var B=[],N=0;N<n.length;N++){var A=n[N];_[A.id()]||B.push(A)}var z=function(he){for(var me=b[he],se=0;se<me.length;se++){var Be=me[se];if(Be==null){me.splice(se,1),se--;continue}h0(Be,{depth:he,index:se})}},M=function(he,me){for(var se=Oi(he),Be=he.incomers().filter(function(H){return H.isNode()&&t.has(H)}),De=-1,Ae=he.id(),ze=0;ze<Be.length;ze++){var $=Be[ze],k=Oi($);De=Math.max(De,k.depth)}if(se.depth<=De){if(!r.acyclic&&me[Ae])return null;var R=De+1;return C(he,R),me[Ae]=R,!0}return!1};if(i&&o){var V=[],q={},I=function(he){return V.push(he)},F=function(){return V.shift()};for(n.forEach(function(ae){return V.push(ae)});V.length>0;){var T=F(),G=M(T,q);if(G)T.outgoers().filter(function(ae){return ae.isNode()&&t.has(ae)}).forEach(I);else if(G===null){gt("Detected double maximal shift for node `"+T.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}var Q=0;if(r.avoidOverlap)for(var W=0;W<n.length;W++){var X=n[W],Z=X.layoutDimensions(r),te=Z.w,L=Z.h;Q=Math.max(Q,te,L)}var U={},oe=function(he){if(U[he.id()])return U[he.id()];for(var me=Oi(he).depth,se=he.neighborhood(),Be=0,De=0,Ae=0;Ae<se.length;Ae++){var ze=se[Ae];if(!(ze.isEdge()||ze.isParent()||!n.has(ze))){var $=Oi(ze);if($!=null){var k=$.index,R=$.depth;if(!(k==null||R==null)){var H=b[R].length;R<me&&(Be+=k/H,De++)}}}}return De=Math.max(1,De),Be=Be/De,De===0&&(Be=0),U[he.id()]=Be,Be},ie=function(he,me){var se=oe(he),Be=oe(me),De=se-Be;return De===0?f1(he.id(),me.id()):De};r.depthSort!==void 0&&(ie=r.depthSort);for(var ne=b.length,we=0;we<ne;we++)b[we].sort(ie),z(we);for(var Pe=[],Ce=0;Ce<B.length;Ce++)Pe.push(B[Ce]);var ge=function(){for(var he=0;he<ne;he++)z(he)};Pe.length&&(b.unshift(Pe),ne=b.length,ge());for(var ce=0,de=0;de<ne;de++)ce=Math.max(b[de].length,ce);var be={x:c.x1+c.w/2,y:c.y1+c.h/2},Re=n.reduce(function(ae,he){return(function(me){return{w:ae.w===-1?me.w:(ae.w+me.w)/2,h:ae.h===-1?me.h:(ae.h+me.h)/2}})(he.boundingBox({includeLabels:r.nodeDimensionsIncludeLabels}))},{w:-1,h:-1}),D=Math.max(ne===1?0:u?(c.h-r.padding*2-Re.h)/(ne-1):(c.h-r.padding*2-Re.h)/(ne+1),Q),ve=b.reduce(function(ae,he){return Math.max(ae,he.length)},0),pe=function(he){var me=Oi(he),se=me.depth,Be=me.index;if(r.circle){var De=Math.min(c.w/2/ne,c.h/2/ne);De=Math.max(De,Q);var Ae=De*se+De-(ne>0&&b[0].length<=3?De/2:0),ze=2*Math.PI/b[se].length*Be;return se===0&&b[0].length===1&&(Ae=1),{x:be.x+Ae*Math.cos(ze),y:be.y+Ae*Math.sin(ze)}}else{var $=b[se].length,k=Math.max($===1?0:u?(c.w-r.padding*2-Re.w)/((r.grid?ve:$)-1):(c.w-r.padding*2-Re.w)/((r.grid?ve:$)+1),Q),R={x:be.x+(Be+1-($+1)/2)*k,y:be.y+(se+1-(ne+1)/2)*D};return R}},Y={downward:0,leftward:90,upward:180,rightward:-90};Object.keys(Y).indexOf(r.direction)===-1&&At("Invalid direction '".concat(r.direction,"' specified for breadthfirst layout. Valid values are: ").concat(Object.keys(Y).join(", ")));var K=function(he){return lE(pe(he),c,Y[r.direction])};return t.nodes().layoutPositions(this,r,K),this};var KC={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function fw(r){this.options=et({},KC,r)}fw.prototype.run=function(){var r=this.options,e=r,t=r.cy,n=e.eles,a=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,i=n.nodes().not(":parent");e.sort&&(i=i.sort(e.sort));for(var o=Rr(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()}),u={x:o.x1+o.w/2,y:o.y1+o.h/2},c=e.sweep===void 0?2*Math.PI-2*Math.PI/i.length:e.sweep,f=c/Math.max(1,i.length-1),d,h=0,g=0;g<i.length;g++){var p=i[g],m=p.layoutDimensions(e),y=m.w,x=m.h;h=Math.max(h,y,x)}if(Ue(e.radius)?d=e.radius:i.length<=1?d=0:d=Math.min(o.h,o.w)/2-h,i.length>1&&e.avoidOverlap){h*=1.75;var b=Math.cos(f)-Math.cos(0),_=Math.sin(f)-Math.sin(0),E=Math.sqrt(h*h/(b*b+_*_));d=Math.max(E,d)}var C=function(N,A){var z=e.startAngle+A*f*(a?1:-1),M=d*Math.cos(z),V=d*Math.sin(z),q={x:u.x+M,y:u.y+V};return q};return n.nodes().layoutPositions(this,e,C),this};var XC={fit:!0,padding:30,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function dw(r){this.options=et({},XC,r)}dw.prototype.run=function(){for(var r=this.options,e=r,t=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,n=r.cy,a=e.eles,i=a.nodes().not(":parent"),o=Rr(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),u={x:o.x1+o.w/2,y:o.y1+o.h/2},c=[],f=0,d=0;d<i.length;d++){var h=i[d],g=void 0;g=e.concentric(h),c.push({value:g,node:h}),h._private.scratch.concentric=g}i.updateStyle();for(var p=0;p<i.length;p++){var m=i[p],y=m.layoutDimensions(e);f=Math.max(f,y.w,y.h)}c.sort(function(D,ve){return ve.value-D.value});for(var x=e.levelWidth(i),b=[[]],_=b[0],E=0;E<c.length;E++){var C=c[E];if(_.length>0){var B=Math.abs(_[0].value-C.value);B>=x&&(_=[],b.push(_))}_.push(C)}var N=f+e.minNodeSpacing;if(!e.avoidOverlap){var A=b.length>0&&b[0].length>1,z=Math.min(o.w,o.h)/2-N,M=z/(b.length+A?1:0);N=Math.min(N,M)}for(var V=0,q=0;q<b.length;q++){var I=b[q],F=e.sweep===void 0?2*Math.PI-2*Math.PI/I.length:e.sweep,T=I.dTheta=F/Math.max(1,I.length-1);if(I.length>1&&e.avoidOverlap){var G=Math.cos(T)-Math.cos(0),Q=Math.sin(T)-Math.sin(0),W=Math.sqrt(N*N/(G*G+Q*Q));V=Math.max(W,V)}I.r=V,V+=N}if(e.equidistant){for(var X=0,Z=0,te=0;te<b.length;te++){var L=b[te],U=L.r-Z;X=Math.max(X,U)}Z=0;for(var oe=0;oe<b.length;oe++){var ie=b[oe];oe===0&&(Z=ie.r),ie.r=Z,Z+=X}}for(var ne={},we=0;we<b.length;we++)for(var Pe=b[we],Ce=Pe.dTheta,ge=Pe.r,ce=0;ce<Pe.length;ce++){var de=Pe[ce],be=e.startAngle+(t?1:-1)*Ce*ce,Re={x:u.x+ge*Math.cos(be),y:u.y+ge*Math.sin(be)};ne[de.node.id()]=Re}return a.nodes().layoutPositions(this,e,function(D){var ve=D.id();return ne[ve]}),this};var dh,ZC={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,t){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function Gl(r){this.options=et({},ZC,r),this.options.layout=this;var e=this.options.eles.nodes(),t=this.options.eles.edges(),n=t.filter(function(a){var i=a.source().data("id"),o=a.target().data("id"),u=e.some(function(f){return f.data("id")===i}),c=e.some(function(f){return f.data("id")===o});return!u||!c});this.options.eles=this.options.eles.not(n)}Gl.prototype.run=function(){var r=this.options,e=r.cy,t=this;t.stopped=!1,(r.animate===!0||r.animate===!1)&&t.emit({type:"layoutstart",layout:t}),r.debug===!0?dh=!0:dh=!1;var n=YC(e,t,r);dh&&JC(n),r.randomize&&eT(n);var a=Un(),i=function(){tT(n,e,r),r.fit===!0&&e.fit(r.padding)},o=function(g){return!(t.stopped||g>=r.numIter||(rT(n,r),n.temperature=n.temperature*r.coolingFactor,n.temperature<r.minTemp))},u=function(){if(r.animate===!0||r.animate===!1)i(),t.one("layoutstop",r.stop),t.emit({type:"layoutstop",layout:t});else{var g=r.eles.nodes(),p=vw(n,r,g);g.layoutPositions(t,r,p)}},c=0,f=!0;if(r.animate===!0){var d=function(){for(var g=0;f&&g<r.refresh;)f=o(c),c++,g++;if(!f)p0(n,r),u();else{var p=Un();p-a>=r.animationThreshold&&i(),yl(d)}};d()}else{for(;f;)f=o(c),c++;p0(n,r),u()}return this};Gl.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this};Gl.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var YC=function(e,t,n){for(var a=n.eles.edges(),i=n.eles.nodes(),o=Rr(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),u={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:i.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:a.size(),temperature:n.initialTemp,clientWidth:o.w,clientHeight:o.h,boundingBox:o},c=n.eles.components(),f={},d=0;d<c.length;d++)for(var h=c[d],g=0;g<h.length;g++){var p=h[g];f[p.id()]=d}for(var d=0;d<u.nodeSize;d++){var m=i[d],y=m.layoutDimensions(n),x={};x.isLocked=m.locked(),x.id=m.data("id"),x.parentId=m.data("parent"),x.cmptId=f[m.id()],x.children=[],x.positionX=m.position("x"),x.positionY=m.position("y"),x.offsetX=0,x.offsetY=0,x.height=y.w,x.width=y.h,x.maxX=x.positionX+x.width/2,x.minX=x.positionX-x.width/2,x.maxY=x.positionY+x.height/2,x.minY=x.positionY-x.height/2,x.padLeft=parseFloat(m.style("padding")),x.padRight=parseFloat(m.style("padding")),x.padTop=parseFloat(m.style("padding")),x.padBottom=parseFloat(m.style("padding")),x.nodeRepulsion=zt(n.nodeRepulsion)?n.nodeRepulsion(m):n.nodeRepulsion,u.layoutNodes.push(x),u.idToIndex[x.id]=d}for(var b=[],_=0,E=-1,C=[],d=0;d<u.nodeSize;d++){var m=u.layoutNodes[d],B=m.parentId;B!=null?u.layoutNodes[u.idToIndex[B]].children.push(m.id):(b[++E]=m.id,C.push(m.id))}for(u.graphSet.push(C);_<=E;){var N=b[_++],A=u.idToIndex[N],p=u.layoutNodes[A],z=p.children;if(z.length>0){u.graphSet.push(z);for(var d=0;d<z.length;d++)b[++E]=z[d]}}for(var d=0;d<u.graphSet.length;d++)for(var M=u.graphSet[d],g=0;g<M.length;g++){var V=u.idToIndex[M[g]];u.indexToGraph[V]=d}for(var d=0;d<u.edgeSize;d++){var q=a[d],I={};I.id=q.data("id"),I.sourceId=q.data("source"),I.targetId=q.data("target");var F=zt(n.idealEdgeLength)?n.idealEdgeLength(q):n.idealEdgeLength,T=zt(n.edgeElasticity)?n.edgeElasticity(q):n.edgeElasticity,G=u.idToIndex[I.sourceId],Q=u.idToIndex[I.targetId],W=u.indexToGraph[G],X=u.indexToGraph[Q];if(W!=X){for(var Z=QC(I.sourceId,I.targetId,u),te=u.graphSet[Z],L=0,x=u.layoutNodes[G];te.indexOf(x.id)===-1;)x=u.layoutNodes[u.idToIndex[x.parentId]],L++;for(x=u.layoutNodes[Q];te.indexOf(x.id)===-1;)x=u.layoutNodes[u.idToIndex[x.parentId]],L++;F*=L*n.nestingFactor}I.idealLength=F,I.elasticity=T,u.layoutEdges.push(I)}return u},QC=function(e,t,n){var a=hw(e,t,0,n);return 2>a.count?0:a.graph},hw=function(e,t,n,a){var i=a.graphSet[n];if(-1<i.indexOf(e)&&-1<i.indexOf(t))return{count:2,graph:n};for(var o=0,u=0;u<i.length;u++){var c=i[u],f=a.idToIndex[c],d=a.layoutNodes[f].children;if(d.length!==0){var h=a.indexToGraph[a.idToIndex[d[0]]],g=hw(e,t,h,a);if(g.count!==0)if(g.count===1){if(o++,o===2)break}else return g}}return{count:o,graph:n}},JC,eT=function(e,t){for(var n=e.clientWidth,a=e.clientHeight,i=0;i<e.nodeSize;i++){var o=e.layoutNodes[i];o.children.length===0&&!o.isLocked&&(o.positionX=Math.random()*n,o.positionY=Math.random()*a)}},vw=function(e,t,n){var a=e.boundingBox,i={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return t.boundingBox&&(n.forEach(function(o){var u=e.layoutNodes[e.idToIndex[o.data("id")]];i.x1=Math.min(i.x1,u.positionX),i.x2=Math.max(i.x2,u.positionX),i.y1=Math.min(i.y1,u.positionY),i.y2=Math.max(i.y2,u.positionY)}),i.w=i.x2-i.x1,i.h=i.y2-i.y1),function(o,u){var c=e.layoutNodes[e.idToIndex[o.data("id")]];if(t.boundingBox){var f=i.w===0?.5:(c.positionX-i.x1)/i.w,d=i.h===0?.5:(c.positionY-i.y1)/i.h;return{x:a.x1+f*a.w,y:a.y1+d*a.h}}else return{x:c.positionX,y:c.positionY}}},tT=function(e,t,n){var a=n.layout,i=n.eles.nodes(),o=vw(e,n,i);i.positions(o),e.ready!==!0&&(e.ready=!0,a.one("layoutready",n.ready),a.emit({type:"layoutready",layout:this}))},rT=function(e,t,n){nT(e,t),sT(e),oT(e,t),uT(e),lT(e)},nT=function(e,t){for(var n=0;n<e.graphSet.length;n++)for(var a=e.graphSet[n],i=a.length,o=0;o<i;o++)for(var u=e.layoutNodes[e.idToIndex[a[o]]],c=o+1;c<i;c++){var f=e.layoutNodes[e.idToIndex[a[c]]];aT(u,f,e,t)}},v0=function(e){return-1+2*e*Math.random()},aT=function(e,t,n,a){var i=e.cmptId,o=t.cmptId;if(!(i!==o&&!n.isCompound)){var u=t.positionX-e.positionX,c=t.positionY-e.positionY,f=1;u===0&&c===0&&(u=v0(f),c=v0(f));var d=iT(e,t,u,c);if(d>0)var h=a.nodeOverlap*d,g=Math.sqrt(u*u+c*c),p=h*u/g,m=h*c/g;else var y=kl(e,u,c),x=kl(t,-1*u,-1*c),b=x.x-y.x,_=x.y-y.y,E=b*b+_*_,g=Math.sqrt(E),h=(e.nodeRepulsion+t.nodeRepulsion)/E,p=h*b/g,m=h*_/g;e.isLocked||(e.offsetX-=p,e.offsetY-=m),t.isLocked||(t.offsetX+=p,t.offsetY+=m)}},iT=function(e,t,n,a){if(n>0)var i=e.maxX-t.minX;else var i=t.maxX-e.minX;if(a>0)var o=e.maxY-t.minY;else var o=t.maxY-e.minY;return i>=0&&o>=0?Math.sqrt(i*i+o*o):0},kl=function(e,t,n){var a=e.positionX,i=e.positionY,o=e.height||1,u=e.width||1,c=n/t,f=o/u,d={};return t===0&&0<n||t===0&&0>n?(d.x=a,d.y=i+o/2,d):0<t&&-1*f<=c&&c<=f?(d.x=a+u/2,d.y=i+u*n/2/t,d):0>t&&-1*f<=c&&c<=f?(d.x=a-u/2,d.y=i-u*n/2/t,d):0<n&&(c<=-1*f||c>=f)?(d.x=a+o*t/2/n,d.y=i+o/2,d):(0>n&&(c<=-1*f||c>=f)&&(d.x=a-o*t/2/n,d.y=i-o/2),d)},sT=function(e,t){for(var n=0;n<e.edgeSize;n++){var a=e.layoutEdges[n],i=e.idToIndex[a.sourceId],o=e.layoutNodes[i],u=e.idToIndex[a.targetId],c=e.layoutNodes[u],f=c.positionX-o.positionX,d=c.positionY-o.positionY;if(!(f===0&&d===0)){var h=kl(o,f,d),g=kl(c,-1*f,-1*d),p=g.x-h.x,m=g.y-h.y,y=Math.sqrt(p*p+m*m),x=Math.pow(a.idealLength-y,2)/a.elasticity;if(y!==0)var b=x*p/y,_=x*m/y;else var b=0,_=0;o.isLocked||(o.offsetX+=b,o.offsetY+=_),c.isLocked||(c.offsetX-=b,c.offsetY-=_)}}},oT=function(e,t){if(t.gravity!==0)for(var n=1,a=0;a<e.graphSet.length;a++){var i=e.graphSet[a],o=i.length;if(a===0)var u=e.clientHeight/2,c=e.clientWidth/2;else var f=e.layoutNodes[e.idToIndex[i[0]]],d=e.layoutNodes[e.idToIndex[f.parentId]],u=d.positionX,c=d.positionY;for(var h=0;h<o;h++){var g=e.layoutNodes[e.idToIndex[i[h]]];if(!g.isLocked){var p=u-g.positionX,m=c-g.positionY,y=Math.sqrt(p*p+m*m);if(y>n){var x=t.gravity*p/y,b=t.gravity*m/y;g.offsetX+=x,g.offsetY+=b}}}}},uT=function(e,t){var n=[],a=0,i=-1;for(n.push.apply(n,e.graphSet[0]),i+=e.graphSet[0].length;a<=i;){var o=n[a++],u=e.idToIndex[o],c=e.layoutNodes[u],f=c.children;if(0<f.length&&!c.isLocked){for(var d=c.offsetX,h=c.offsetY,g=0;g<f.length;g++){var p=e.layoutNodes[e.idToIndex[f[g]]];p.offsetX+=d,p.offsetY+=h,n[++i]=f[g]}c.offsetX=0,c.offsetY=0}}},lT=function(e,t){for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];0<a.children.length&&(a.maxX=void 0,a.minX=void 0,a.maxY=void 0,a.minY=void 0)}for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];if(!(0<a.children.length||a.isLocked)){var i=cT(a.offsetX,a.offsetY,e.temperature);a.positionX+=i.x,a.positionY+=i.y,a.offsetX=0,a.offsetY=0,a.minX=a.positionX-a.width,a.maxX=a.positionX+a.width,a.minY=a.positionY-a.height,a.maxY=a.positionY+a.height,pw(a,e)}}for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];0<a.children.length&&!a.isLocked&&(a.positionX=(a.maxX+a.minX)/2,a.positionY=(a.maxY+a.minY)/2,a.width=a.maxX-a.minX,a.height=a.maxY-a.minY)}},cT=function(e,t,n){var a=Math.sqrt(e*e+t*t);if(a>n)var i={x:n*e/a,y:n*t/a};else var i={x:e,y:t};return i},pw=function(e,t){var n=e.parentId;if(n!=null){var a=t.layoutNodes[t.idToIndex[n]],i=!1;if((a.maxX==null||e.maxX+a.padRight>a.maxX)&&(a.maxX=e.maxX+a.padRight,i=!0),(a.minX==null||e.minX-a.padLeft<a.minX)&&(a.minX=e.minX-a.padLeft,i=!0),(a.maxY==null||e.maxY+a.padBottom>a.maxY)&&(a.maxY=e.maxY+a.padBottom,i=!0),(a.minY==null||e.minY-a.padTop<a.minY)&&(a.minY=e.minY-a.padTop,i=!0),i)return pw(a,t)}},p0=function(e,t){for(var n=e.layoutNodes,a=[],i=0;i<n.length;i++){var o=n[i],u=o.cmptId,c=a[u]=a[u]||[];c.push(o)}for(var f=0,i=0;i<a.length;i++){var d=a[i];if(d){d.x1=1/0,d.x2=-1/0,d.y1=1/0,d.y2=-1/0;for(var h=0;h<d.length;h++){var g=d[h];d.x1=Math.min(d.x1,g.positionX-g.width/2),d.x2=Math.max(d.x2,g.positionX+g.width/2),d.y1=Math.min(d.y1,g.positionY-g.height/2),d.y2=Math.max(d.y2,g.positionY+g.height/2)}d.w=d.x2-d.x1,d.h=d.y2-d.y1,f+=d.w*d.h}}a.sort(function(_,E){return E.w*E.h-_.w*_.h});for(var p=0,m=0,y=0,x=0,b=Math.sqrt(f)*e.clientWidth/e.clientHeight,i=0;i<a.length;i++){var d=a[i];if(d){for(var h=0;h<d.length;h++){var g=d[h];g.isLocked||(g.positionX+=p-d.x1,g.positionY+=m-d.y1)}p+=d.w+t.componentSpacing,y+=d.w+t.componentSpacing,x=Math.max(x,d.h),y>b&&(m+=x+t.componentSpacing,p=0,y=0,x=0)}}},fT={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function gw(r){this.options=et({},fT,r)}gw.prototype.run=function(){var r=this.options,e=r,t=r.cy,n=e.eles,a=n.nodes().not(":parent");e.sort&&(a=a.sort(e.sort));var i=Rr(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()});if(i.h===0||i.w===0)n.nodes().layoutPositions(this,e,function(oe){return{x:i.x1,y:i.y1}});else{var o=a.size(),u=Math.sqrt(o*i.h/i.w),c=Math.round(u),f=Math.round(i.w/i.h*u),d=function(ie){if(ie==null)return Math.min(c,f);var ne=Math.min(c,f);ne==c?c=ie:f=ie},h=function(ie){if(ie==null)return Math.max(c,f);var ne=Math.max(c,f);ne==c?c=ie:f=ie},g=e.rows,p=e.cols!=null?e.cols:e.columns;if(g!=null&&p!=null)c=g,f=p;else if(g!=null&&p==null)c=g,f=Math.ceil(o/c);else if(g==null&&p!=null)f=p,c=Math.ceil(o/f);else if(f*c>o){var m=d(),y=h();(m-1)*y>=o?d(m-1):(y-1)*m>=o&&h(y-1)}else for(;f*c<o;){var x=d(),b=h();(b+1)*x>=o?h(b+1):d(x+1)}var _=i.w/f,E=i.h/c;if(e.condense&&(_=0,E=0),e.avoidOverlap)for(var C=0;C<a.length;C++){var B=a[C],N=B._private.position;(N.x==null||N.y==null)&&(N.x=0,N.y=0);var A=B.layoutDimensions(e),z=e.avoidOverlapPadding,M=A.w+z,V=A.h+z;_=Math.max(_,M),E=Math.max(E,V)}for(var q={},I=function(ie,ne){return!!q["c-"+ie+"-"+ne]},F=function(ie,ne){q["c-"+ie+"-"+ne]=!0},T=0,G=0,Q=function(){G++,G>=f&&(G=0,T++)},W={},X=0;X<a.length;X++){var Z=a[X],te=e.position(Z);if(te&&(te.row!==void 0||te.col!==void 0)){var L={row:te.row,col:te.col};if(L.col===void 0)for(L.col=0;I(L.row,L.col);)L.col++;else if(L.row===void 0)for(L.row=0;I(L.row,L.col);)L.row++;W[Z.id()]=L,F(L.row,L.col)}}var U=function(ie,ne){var we,Pe;if(ie.locked()||ie.isParent())return!1;var Ce=W[ie.id()];if(Ce)we=Ce.col*_+_/2+i.x1,Pe=Ce.row*E+E/2+i.y1;else{for(;I(T,G);)Q();we=G*_+_/2+i.x1,Pe=T*E+E/2+i.y1,F(T,G),Q()}return{x:we,y:Pe}};a.layoutPositions(this,e,U)}return this};var dT={ready:function(){},stop:function(){}};function lv(r){this.options=et({},dT,r)}lv.prototype.run=function(){var r=this.options,e=r.eles,t=this;return r.cy,t.emit("layoutstart"),e.nodes().positions(function(){return{x:0,y:0}}),t.one("layoutready",r.ready),t.emit("layoutready"),t.one("layoutstop",r.stop),t.emit("layoutstop"),this};lv.prototype.stop=function(){return this};var hT={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function mw(r){this.options=et({},hT,r)}mw.prototype.run=function(){var r=this.options,e=r.eles,t=e.nodes(),n=zt(r.positions);function a(i){if(r.positions==null)return NE(i.position());if(n)return r.positions(i);var o=r.positions[i._private.data.id];return o??null}return t.layoutPositions(this,r,function(i,o){var u=a(i);return i.locked()||u==null?!1:u}),this};var vT={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function yw(r){this.options=et({},vT,r)}yw.prototype.run=function(){var r=this.options,e=r.cy,t=r.eles,n=Rr(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),a=function(o,u){return{x:n.x1+Math.round(Math.random()*n.w),y:n.y1+Math.round(Math.random()*n.h)}};return t.nodes().layoutPositions(this,r,a),this};var pT=[{name:"breadthfirst",impl:cw},{name:"circle",impl:fw},{name:"concentric",impl:dw},{name:"cose",impl:Gl},{name:"grid",impl:gw},{name:"null",impl:lv},{name:"preset",impl:mw},{name:"random",impl:yw}];function ww(r){this.options=r,this.notifications=0}var g0=function(){},m0=function(){throw new Error("A headless instance can not render images")};ww.prototype={recalculateRenderedStyle:g0,notify:function(){this.notifications++},init:g0,isHeadless:function(){return!0},png:m0,jpg:m0};var cv={};cv.arrowShapeWidth=.3;cv.registerArrowShapes=function(){var r=this.arrowShapes={},e=this,t=function(f,d,h,g,p,m,y){var x=p.x-h/2-y,b=p.x+h/2+y,_=p.y-h/2-y,E=p.y+h/2+y,C=x<=f&&f<=b&&_<=d&&d<=E;return C},n=function(f,d,h,g,p){var m=f*Math.cos(g)-d*Math.sin(g),y=f*Math.sin(g)+d*Math.cos(g),x=m*h,b=y*h,_=x+p.x,E=b+p.y;return{x:_,y:E}},a=function(f,d,h,g){for(var p=[],m=0;m<f.length;m+=2){var y=f[m],x=f[m+1];p.push(n(y,x,d,h,g))}return p},i=function(f){for(var d=[],h=0;h<f.length;h++){var g=f[h];d.push(g.x,g.y)}return d},o=function(f){return f.pstyle("width").pfValue*f.pstyle("arrow-scale").pfValue*2},u=function(f,d){Ye(d)&&(d=r[d]),r[f]=et({name:f,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(g,p,m,y,x,b){var _=i(a(this.points,m+2*b,y,x)),E=zr(g,p,_);return E},roughCollide:t,draw:function(g,p,m,y){var x=a(this.points,p,m,y);e.arrowShapeImpl("polygon")(g,x)},spacing:function(g){return 0},gap:o},d)};u("none",{collide:wl,roughCollide:wl,draw:Xh,spacing:Am,gap:Am}),u("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),u("arrow","triangle"),u("triangle-backcurve",{points:r.triangle.points,controlPoint:[0,-.15],roughCollide:t,draw:function(f,d,h,g,p){var m=a(this.points,d,h,g),y=this.controlPoint,x=n(y[0],y[1],d,h,g);e.arrowShapeImpl(this.name)(f,m,x)},gap:function(f){return o(f)*.8}}),u("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(f,d,h,g,p,m,y){var x=i(a(this.points,h+2*y,g,p)),b=i(a(this.pointsTee,h+2*y,g,p)),_=zr(f,d,x)||zr(f,d,b);return _},draw:function(f,d,h,g,p){var m=a(this.points,d,h,g),y=a(this.pointsTee,d,h,g);e.arrowShapeImpl(this.name)(f,m,y)}}),u("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(f,d,h,g,p,m,y){var x=p,b=Math.pow(x.x-f,2)+Math.pow(x.y-d,2)<=Math.pow((h+2*y)*this.radius,2),_=i(a(this.points,h+2*y,g,p));return zr(f,d,_)||b},draw:function(f,d,h,g,p){var m=a(this.pointsTr,d,h,g);e.arrowShapeImpl(this.name)(f,m,g.x,g.y,this.radius*d)},spacing:function(f){return e.getArrowWidth(f.pstyle("width").pfValue,f.pstyle("arrow-scale").value)*this.radius}}),u("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(f,d){var h=this.baseCrossLinePts.slice(),g=d/f,p=3,m=5;return h[p]=h[p]-g,h[m]=h[m]-g,h},collide:function(f,d,h,g,p,m,y){var x=i(a(this.points,h+2*y,g,p)),b=i(a(this.crossLinePts(h,m),h+2*y,g,p)),_=zr(f,d,x)||zr(f,d,b);return _},draw:function(f,d,h,g,p){var m=a(this.points,d,h,g),y=a(this.crossLinePts(d,p),d,h,g);e.arrowShapeImpl(this.name)(f,m,y)}}),u("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(f){return o(f)*.525}}),u("circle",{radius:.15,collide:function(f,d,h,g,p,m,y){var x=p,b=Math.pow(x.x-f,2)+Math.pow(x.y-d,2)<=Math.pow((h+2*y)*this.radius,2);return b},draw:function(f,d,h,g,p){e.arrowShapeImpl(this.name)(f,g.x,g.y,this.radius*d)},spacing:function(f){return e.getArrowWidth(f.pstyle("width").pfValue,f.pstyle("arrow-scale").value)*this.radius}}),u("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(f){return 1},gap:function(f){return 1}}),u("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),u("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(f){return f.pstyle("width").pfValue*f.pstyle("arrow-scale").value}}),u("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(f){return .95*f.pstyle("width").pfValue*f.pstyle("arrow-scale").value}})};var ai={};ai.projectIntoViewport=function(r,e){var t=this.cy,n=this.findContainerClientCoords(),a=n[0],i=n[1],o=n[4],u=t.pan(),c=t.zoom(),f=((r-a)/o-u.x)/c,d=((e-i)/o-u.y)/c;return[f,d]};ai.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var r=this.container,e=r.getBoundingClientRect(),t=this.cy.window().getComputedStyle(r),n=function(b){return parseFloat(t.getPropertyValue(b))},a={left:n("padding-left"),right:n("padding-right"),top:n("padding-top"),bottom:n("padding-bottom")},i={left:n("border-left-width"),right:n("border-right-width"),top:n("border-top-width"),bottom:n("border-bottom-width")},o=r.clientWidth,u=r.clientHeight,c=a.left+a.right,f=a.top+a.bottom,d=i.left+i.right,h=e.width/(o+d),g=o-c,p=u-f,m=e.left+a.left+i.left,y=e.top+a.top+i.top;return this.containerBB=[m,y,g,p,h]};ai.invalidateContainerClientCoordsCache=function(){this.containerBB=null};ai.findNearestElement=function(r,e,t,n){return this.findNearestElements(r,e,t,n)[0]};ai.findNearestElements=function(r,e,t,n){var a=this,i=this,o=i.getCachedZSortedEles(),u=[],c=i.cy.zoom(),f=i.cy.hasCompoundNodes(),d=(n?24:8)/c,h=(n?8:2)/c,g=(n?8:2)/c,p=1/0,m,y;t&&(o=o.interactive);function x(A,z){if(A.isNode()){if(y)return;y=A,u.push(A)}if(A.isEdge()&&(z==null||z<p))if(m){if(m.pstyle("z-compound-depth").value===A.pstyle("z-compound-depth").value&&m.pstyle("z-compound-depth").value===A.pstyle("z-compound-depth").value){for(var M=0;M<u.length;M++)if(u[M].isEdge()){u[M]=A,m=A,p=z??p;break}}}else u.push(A),m=A,p=z??p}function b(A){var z=A.outerWidth()+2*h,M=A.outerHeight()+2*h,V=z/2,q=M/2,I=A.position(),F=A.pstyle("corner-radius").value==="auto"?"auto":A.pstyle("corner-radius").pfValue,T=A._private.rscratch;if(I.x-V<=r&&r<=I.x+V&&I.y-q<=e&&e<=I.y+q){var G=i.nodeShapes[a.getNodeShape(A)];if(G.checkPoint(r,e,0,z,M,I.x,I.y,F,T))return x(A,0),!0}}function _(A){var z=A._private,M=z.rscratch,V=A.pstyle("width").pfValue,q=A.pstyle("arrow-scale").value,I=V/2+d,F=I*I,T=I*2,X=z.source,Z=z.target,G;if(M.edgeType==="segments"||M.edgeType==="straight"||M.edgeType==="haystack"){for(var Q=M.allpts,W=0;W+3<Q.length;W+=2)if(XE(r,e,Q[W],Q[W+1],Q[W+2],Q[W+3],T)&&F>(G=eS(r,e,Q[W],Q[W+1],Q[W+2],Q[W+3])))return x(A,G),!0}else if(M.edgeType==="bezier"||M.edgeType==="multibezier"||M.edgeType==="self"||M.edgeType==="compound"){for(var Q=M.allpts,W=0;W+5<M.allpts.length;W+=4)if(ZE(r,e,Q[W],Q[W+1],Q[W+2],Q[W+3],Q[W+4],Q[W+5],T)&&F>(G=JE(r,e,Q[W],Q[W+1],Q[W+2],Q[W+3],Q[W+4],Q[W+5])))return x(A,G),!0}for(var X=X||z.source,Z=Z||z.target,te=a.getArrowWidth(V,q),L=[{name:"source",x:M.arrowStartX,y:M.arrowStartY,angle:M.srcArrowAngle},{name:"target",x:M.arrowEndX,y:M.arrowEndY,angle:M.tgtArrowAngle},{name:"mid-source",x:M.midX,y:M.midY,angle:M.midsrcArrowAngle},{name:"mid-target",x:M.midX,y:M.midY,angle:M.midtgtArrowAngle}],W=0;W<L.length;W++){var U=L[W],oe=i.arrowShapes[A.pstyle(U.name+"-arrow-shape").value],ie=A.pstyle("width").pfValue;if(oe.roughCollide(r,e,te,U.angle,{x:U.x,y:U.y},ie,d)&&oe.collide(r,e,te,U.angle,{x:U.x,y:U.y},ie,d))return x(A),!0}f&&u.length>0&&(b(X),b(Z))}function E(A,z,M){return Mr(A,z,M)}function C(A,z){var M=A._private,V=g,q;z?q=z+"-":q="",A.boundingBox();var I=M.labelBounds[z||"main"],F=A.pstyle(q+"label").value,T=A.pstyle("text-events").strValue==="yes";if(!(!T||!F)){var G=E(M.rscratch,"labelX",z),Q=E(M.rscratch,"labelY",z),W=E(M.rscratch,"labelAngle",z),X=A.pstyle(q+"text-margin-x").pfValue,Z=A.pstyle(q+"text-margin-y").pfValue,te=I.x1-V-X,L=I.x2+V-X,U=I.y1-V-Z,oe=I.y2+V-Z;if(W){var ie=Math.cos(W),ne=Math.sin(W),we=function(Re,D){return Re=Re-G,D=D-Q,{x:Re*ie-D*ne+G,y:Re*ne+D*ie+Q}},Pe=we(te,U),Ce=we(te,oe),ge=we(L,U),ce=we(L,oe),de=[Pe.x+X,Pe.y+Z,ge.x+X,ge.y+Z,ce.x+X,ce.y+Z,Ce.x+X,Ce.y+Z];if(zr(r,e,de))return x(A),!0}else if(pa(I,r,e))return x(A),!0}}for(var B=o.length-1;B>=0;B--){var N=o[B];N.isNode()?b(N)||C(N):_(N)||C(N)||C(N,"source")||C(N,"target")}return u};ai.getAllInBox=function(r,e,t,n){var a=this.getCachedZSortedEles().interactive,i=this.cy.zoom(),o=2/i,u=[],c=Math.min(r,t),f=Math.max(r,t),d=Math.min(e,n),h=Math.max(e,n);r=c,t=f,e=d,n=h;var g=Rr({x1:r,y1:e,x2:t,y2:n}),p=[{x:g.x1,y:g.y1},{x:g.x2,y:g.y1},{x:g.x2,y:g.y2},{x:g.x1,y:g.y2}],m=[[p[0],p[1]],[p[1],p[2]],[p[2],p[3]],[p[3],p[0]]];function y(Re,D,ve){return Mr(Re,D,ve)}function x(Re,D){var ve=Re._private,pe=o,Y="";Re.boundingBox();var K=ve.labelBounds.main;if(!K)return null;var ae=y(ve.rscratch,"labelX",D),he=y(ve.rscratch,"labelY",D),me=y(ve.rscratch,"labelAngle",D),se=Re.pstyle(Y+"text-margin-x").pfValue,Be=Re.pstyle(Y+"text-margin-y").pfValue,De=K.x1-pe-se,Ae=K.x2+pe-se,ze=K.y1-pe-Be,$=K.y2+pe-Be;if(me){var k=Math.cos(me),R=Math.sin(me),H=function(J,O){return J=J-ae,O=O-he,{x:J*k-O*R+ae,y:J*R+O*k+he}};return[H(De,ze),H(Ae,ze),H(Ae,$),H(De,$)]}else return[{x:De,y:ze},{x:Ae,y:ze},{x:Ae,y:$},{x:De,y:$}]}function b(Re,D,ve,pe){function Y(K,ae,he){return(he.y-K.y)*(ae.x-K.x)>(ae.y-K.y)*(he.x-K.x)}return Y(Re,ve,pe)!==Y(D,ve,pe)&&Y(Re,D,ve)!==Y(Re,D,pe)}for(var _=0;_<a.length;_++){var E=a[_];if(E.isNode()){var C=E,B=C.pstyle("text-events").strValue==="yes",N=C.pstyle("box-selection").strValue,A=C.pstyle("box-select-labels").strValue==="yes";if(N==="none")continue;var z=(N==="overlap"||A)&&B,M=C.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:z});if(N==="contain"){var V=!1;if(A&&B){var q=x(C);q&&cd(q,p)&&(u.push(C),V=!0)}!V&&C1(g,M)&&u.push(C)}else if(N==="overlap"&&Jh(g,M)){var I=C.boundingBox({includeNodes:!0,includeEdges:!0,includeLabels:!1,includeMainLabels:!1,includeSourceLabels:!1,includeTargetLabels:!1}),F=[{x:I.x1,y:I.y1},{x:I.x2,y:I.y1},{x:I.x2,y:I.y2},{x:I.x1,y:I.y2}];if(cd(F,p))u.push(C);else{var T=x(C);T&&cd(T,p)&&u.push(C)}}}else{var G=E,Q=G._private,W=Q.rscratch,X=G.pstyle("box-selection").strValue;if(X==="none")continue;if(X==="contain"){if(W.startX!=null&&W.startY!=null&&!pa(g,W.startX,W.startY)||W.endX!=null&&W.endY!=null&&!pa(g,W.endX,W.endY))continue;if(W.edgeType==="bezier"||W.edgeType==="multibezier"||W.edgeType==="self"||W.edgeType==="compound"||W.edgeType==="segments"||W.edgeType==="haystack"){for(var Z=Q.rstyle.bezierPts||Q.rstyle.linePts||Q.rstyle.haystackPts,te=!0,L=0;L<Z.length;L++)if(!Om(g,Z[L])){te=!1;break}te&&u.push(G)}else W.edgeType==="straight"&&u.push(G)}else if(X==="overlap"){var U=!1;if(W.startX!=null&&W.startY!=null&&W.endX!=null&&W.endY!=null&&(pa(g,W.startX,W.startY)||pa(g,W.endX,W.endY)))u.push(G),U=!0;else if(!U&&W.edgeType==="haystack"){for(var oe=Q.rstyle.haystackPts,ie=0;ie<oe.length;ie++)if(Om(g,oe[ie])){u.push(G),U=!0;break}}if(!U){var ne=Q.rstyle.bezierPts||Q.rstyle.linePts||Q.rstyle.haystackPts;if((!ne||ne.length<2)&&W.edgeType==="straight"&&W.startX!=null&&W.startY!=null&&W.endX!=null&&W.endY!=null&&(ne=[{x:W.startX,y:W.startY},{x:W.endX,y:W.endY}]),!ne||ne.length<2)continue;for(var we=0;we<ne.length-1;we++){for(var Pe=ne[we],Ce=ne[we+1],ge=0;ge<m.length;ge++){var ce=Ht(m[ge],2),de=ce[0],be=ce[1];if(b(Pe,Ce,de,be)){u.push(G),U=!0;break}}if(U)break}}}}}return u};var Cl={};Cl.calculateArrowAngles=function(r){var e=r._private.rscratch,t=e.edgeType==="haystack",n=e.edgeType==="bezier",a=e.edgeType==="multibezier",i=e.edgeType==="segments",o=e.edgeType==="compound",u=e.edgeType==="self",c,f,d,h,g,p,b,_;if(t?(d=e.haystackPts[0],h=e.haystackPts[1],g=e.haystackPts[2],p=e.haystackPts[3]):(d=e.arrowStartX,h=e.arrowStartY,g=e.arrowEndX,p=e.arrowEndY),b=e.midX,_=e.midY,i)c=d-e.segpts[0],f=h-e.segpts[1];else if(a||o||u||n){var m=e.allpts,y=ar(m[0],m[2],m[4],.1),x=ar(m[1],m[3],m[5],.1);c=d-y,f=h-x}else c=d-b,f=h-_;e.srcArrowAngle=Hu(c,f);var b=e.midX,_=e.midY;if(t&&(b=(d+g)/2,_=(h+p)/2),c=g-d,f=p-h,i){var m=e.allpts;if(m.length/2%2===0){var E=m.length/2,C=E-2;c=m[E]-m[C],f=m[E+1]-m[C+1]}else if(e.isRound)c=e.midVector[1],f=-e.midVector[0];else{var E=m.length/2-1,C=E-2;c=m[E]-m[C],f=m[E+1]-m[C+1]}}else if(a||o||u){var m=e.allpts,B=e.ctrlpts,N,A,z,M;if(B.length/2%2===0){var V=m.length/2-1,q=V+2,I=q+2;N=ar(m[V],m[q],m[I],0),A=ar(m[V+1],m[q+1],m[I+1],0),z=ar(m[V],m[q],m[I],1e-4),M=ar(m[V+1],m[q+1],m[I+1],1e-4)}else{var q=m.length/2-1,V=q-2,I=q+2;N=ar(m[V],m[q],m[I],.4999),A=ar(m[V+1],m[q+1],m[I+1],.4999),z=ar(m[V],m[q],m[I],.5),M=ar(m[V+1],m[q+1],m[I+1],.5)}c=z-N,f=M-A}if(e.midtgtArrowAngle=Hu(c,f),e.midDispX=c,e.midDispY=f,c*=-1,f*=-1,i){var m=e.allpts;if(m.length/2%2!==0){if(!e.isRound){var E=m.length/2-1,F=E+2;c=-(m[F]-m[E]),f=-(m[F+1]-m[E+1])}}}if(e.midsrcArrowAngle=Hu(c,f),i)c=g-e.segpts[e.segpts.length-2],f=p-e.segpts[e.segpts.length-1];else if(a||o||u||n){var m=e.allpts,T=m.length,y=ar(m[T-6],m[T-4],m[T-2],.9),x=ar(m[T-5],m[T-3],m[T-1],.9);c=g-y,f=p-x}else c=g-b,f=p-_;e.tgtArrowAngle=Hu(c,f)};Cl.getArrowWidth=Cl.getArrowHeight=function(r,e){var t=this.arrowWidthCache=this.arrowWidthCache||{},n=t[r+", "+e];return n||(n=Math.max(Math.pow(r*13.37,.9),29)*e,t[r+", "+e]=n,n)};var Ih,Lh,En={},en={},y0,w0,Za,hl,Mn,Wa,Ka,bn,Mi,tl,xw,bw,Nh,Oh,x0,b0=function(e,t,n){n.x=t.x-e.x,n.y=t.y-e.y,n.len=Math.sqrt(n.x*n.x+n.y*n.y),n.nx=n.x/n.len,n.ny=n.y/n.len,n.ang=Math.atan2(n.ny,n.nx)},gT=function(e,t){t.x=e.x*-1,t.y=e.y*-1,t.nx=e.nx*-1,t.ny=e.ny*-1,t.ang=e.ang>0?-(Math.PI-e.ang):Math.PI+e.ang},mT=function(e,t,n,a,i){if(e!==x0?b0(t,e,En):gT(en,En),b0(t,n,en),y0=En.nx*en.ny-En.ny*en.nx,w0=En.nx*en.nx-En.ny*-en.ny,Mn=Math.asin(Math.max(-1,Math.min(1,y0))),Math.abs(Mn)<1e-6){Ih=t.x,Lh=t.y,Ka=Mi=0;return}Za=1,hl=!1,w0<0?Mn<0?Mn=Math.PI+Mn:(Mn=Math.PI-Mn,Za=-1,hl=!0):Mn>0&&(Za=-1,hl=!0),t.radius!==void 0?Mi=t.radius:Mi=a,Wa=Mn/2,tl=Math.min(En.len/2,en.len/2),i?(bn=Math.abs(Math.cos(Wa)*Mi/Math.sin(Wa)),bn>tl?(bn=tl,Ka=Math.abs(bn*Math.sin(Wa)/Math.cos(Wa))):Ka=Mi):(bn=Math.min(tl,Mi),Ka=Math.abs(bn*Math.sin(Wa)/Math.cos(Wa))),Nh=t.x+en.nx*bn,Oh=t.y+en.ny*bn,Ih=Nh-en.ny*Ka*Za,Lh=Oh+en.nx*Ka*Za,xw=t.x+En.nx*bn,bw=t.y+En.ny*bn,x0=t};function _w(r,e){e.radius===0?r.lineTo(e.cx,e.cy):r.arc(e.cx,e.cy,e.radius,e.startAngle,e.endAngle,e.counterClockwise)}function fv(r,e,t,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;return n===0||e.radius===0?{cx:e.x,cy:e.y,radius:0,startX:e.x,startY:e.y,stopX:e.x,stopY:e.y,startAngle:void 0,endAngle:void 0,counterClockwise:void 0}:(mT(r,e,t,n,a),{cx:Ih,cy:Lh,radius:Ka,startX:xw,startY:bw,stopX:Nh,stopY:Oh,startAngle:En.ang+Math.PI/2*Za,endAngle:en.ang-Math.PI/2*Za,counterClockwise:hl})}var xo=.01,yT=Math.sqrt(2*xo),_r={};_r.findMidptPtsEtc=function(r,e){var t=e.posPts,n=e.intersectionPts,a=e.vectorNormInverse,i,o=r.pstyle("source-endpoint"),u=r.pstyle("target-endpoint"),c=o.units!=null&&u.units!=null,f=function(B,N,A,z){var M=z-N,V=A-B,q=Math.sqrt(V*V+M*M);return{x:-M/q,y:V/q}},d=r.pstyle("edge-distances").value;switch(d){case"node-position":i=t;break;case"intersection":i=n;break;case"endpoints":{if(c){var h=this.manualEndptToPx(r.source()[0],o),g=Ht(h,2),p=g[0],m=g[1],y=this.manualEndptToPx(r.target()[0],u),x=Ht(y,2),b=x[0],_=x[1],E={x1:p,y1:m,x2:b,y2:_};a=f(p,m,b,_),i=E}else gt("Edge ".concat(r.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),i=n;break}}return{midptPts:i,vectorNormInverse:a}};_r.findHaystackPoints=function(r){for(var e=0;e<r.length;e++){var t=r[e],n=t._private,a=n.rscratch;if(!a.haystack){var i=Math.random()*2*Math.PI;a.source={x:Math.cos(i),y:Math.sin(i)},i=Math.random()*2*Math.PI,a.target={x:Math.cos(i),y:Math.sin(i)}}var o=n.source,u=n.target,c=o.position(),f=u.position(),d=o.width(),h=u.width(),g=o.height(),p=u.height(),m=t.pstyle("haystack-radius").value,y=m/2;a.haystackPts=a.allpts=[a.source.x*d*y+c.x,a.source.y*g*y+c.y,a.target.x*h*y+f.x,a.target.y*p*y+f.y],a.midX=(a.allpts[0]+a.allpts[2])/2,a.midY=(a.allpts[1]+a.allpts[3])/2,a.edgeType="haystack",a.haystack=!0,this.storeEdgeProjections(t),this.calculateArrowAngles(t),this.recalculateEdgeLabelProjections(t),this.calculateLabelAngles(t)}};_r.findSegmentsPoints=function(r,e){var t=r._private.rscratch,n=r.pstyle("segment-weights"),a=r.pstyle("segment-distances"),i=r.pstyle("segment-radii"),o=r.pstyle("radius-type"),u=Math.min(n.pfValue.length,a.pfValue.length),c=i.pfValue[i.pfValue.length-1],f=o.pfValue[o.pfValue.length-1];t.edgeType="segments",t.segpts=[],t.radii=[],t.isArcRadius=[];for(var d=0;d<u;d++){var h=n.pfValue[d],g=a.pfValue[d],p=1-h,m=h,y=this.findMidptPtsEtc(r,e),x=y.midptPts,b=y.vectorNormInverse,_={x:x.x1*p+x.x2*m,y:x.y1*p+x.y2*m};t.segpts.push(_.x+b.x*g,_.y+b.y*g),t.radii.push(i.pfValue[d]!==void 0?i.pfValue[d]:c),t.isArcRadius.push((o.pfValue[d]!==void 0?o.pfValue[d]:f)==="arc-radius")}};_r.findLoopPoints=function(r,e,t,n){var a=r._private.rscratch,i=e.dirCounts,o=e.srcPos,u=r.pstyle("control-point-distances"),c=u?u.pfValue[0]:void 0,f=r.pstyle("loop-direction").pfValue,d=r.pstyle("loop-sweep").pfValue,h=r.pstyle("control-point-step-size").pfValue;a.edgeType="self";var g=t,p=h;n&&(g=0,p=c);var m=f-Math.PI/2,y=m-d/2,x=m+d/2,b=f+"_"+d;g=i[b]===void 0?i[b]=0:++i[b],a.ctrlpts=[o.x+Math.cos(y)*1.4*p*(g/3+1),o.y+Math.sin(y)*1.4*p*(g/3+1),o.x+Math.cos(x)*1.4*p*(g/3+1),o.y+Math.sin(x)*1.4*p*(g/3+1)]};_r.findCompoundLoopPoints=function(r,e,t,n){var a=r._private.rscratch;a.edgeType="compound";var i=e.srcPos,o=e.tgtPos,u=e.srcW,c=e.srcH,f=e.tgtW,d=e.tgtH,h=r.pstyle("control-point-step-size").pfValue,g=r.pstyle("control-point-distances"),p=g?g.pfValue[0]:void 0,m=t,y=h;n&&(m=0,y=p);var x=50,b={x:i.x-u/2,y:i.y-c/2},_={x:o.x-f/2,y:o.y-d/2},E={x:Math.min(b.x,_.x),y:Math.min(b.y,_.y)},C=.5,B=Math.max(C,Math.log(u*xo)),N=Math.max(C,Math.log(f*xo));a.ctrlpts=[E.x,E.y-(1+Math.pow(x,1.12)/100)*y*(m/3+1)*B,E.x-(1+Math.pow(x,1.12)/100)*y*(m/3+1)*N,E.y]};_r.findStraightEdgePoints=function(r){r._private.rscratch.edgeType="straight"};_r.findBezierPoints=function(r,e,t,n,a){var i=r._private.rscratch,o=r.pstyle("control-point-step-size").pfValue,u=r.pstyle("control-point-distances"),c=r.pstyle("control-point-weights"),f=u&&c?Math.min(u.value.length,c.value.length):1,d=u?u.pfValue[0]:void 0,h=c.value[0],g=n;i.edgeType=g?"multibezier":"bezier",i.ctrlpts=[];for(var p=0;p<f;p++){var m=(.5-e.eles.length/2+t)*o*(a?-1:1),y=void 0,x=Qh(m);g&&(d=u?u.pfValue[p]:o,h=c.value[p]),n?y=d:y=d!==void 0?x*d:void 0;var b=y!==void 0?y:m,_=1-h,E=h,C=this.findMidptPtsEtc(r,e),B=C.midptPts,N=C.vectorNormInverse,A={x:B.x1*_+B.x2*E,y:B.y1*_+B.y2*E};i.ctrlpts.push(A.x+N.x*b,A.y+N.y*b)}};_r.findTaxiPoints=function(r,e){var t=r._private.rscratch;t.edgeType="segments";var n="vertical",a="horizontal",i="leftward",o="rightward",u="downward",c="upward",f="auto",d=e.posPts,h=e.srcW,g=e.srcH,p=e.tgtW,m=e.tgtH,y=r.pstyle("edge-distances").value,x=y!=="node-position",b=r.pstyle("taxi-direction").value,_=b,E=r.pstyle("taxi-turn"),C=E.units==="%",B=E.pfValue,N=B<0,A=r.pstyle("taxi-turn-min-distance").pfValue,z=x?(h+p)/2:0,M=x?(g+m)/2:0,V=d.x2-d.x1,q=d.y2-d.y1,I=function(O,le){return O>0?Math.max(O-le,0):Math.min(O+le,0)},F=I(V,z),T=I(q,M),G=!1;_===f?b=Math.abs(F)>Math.abs(T)?a:n:_===c||_===u?(b=n,G=!0):(_===i||_===o)&&(b=a,G=!0);var Q=b===n,W=Q?T:F,X=Q?q:V,Z=Qh(X),te=!1;!(G&&(C||N))&&(_===u&&X<0||_===c&&X>0||_===i&&X>0||_===o&&X<0)&&(Z*=-1,W=Z*Math.abs(W),te=!0);var L;if(C){var U=B<0?1+B:B;L=U*W}else{var oe=B<0?W:0;L=oe+B*Z}var ie=function(O){return Math.abs(O)<A||Math.abs(O)>=Math.abs(W)},ne=ie(L),we=ie(Math.abs(W)-Math.abs(L)),Pe=ne||we;if(Pe&&!te)if(Q){var Ce=Math.abs(X)<=g/2,ge=Math.abs(V)<=p/2;if(Ce){var ce=(d.x1+d.x2)/2,de=d.y1,be=d.y2;t.segpts=[ce,de,ce,be]}else if(ge){var Re=(d.y1+d.y2)/2,D=d.x1,ve=d.x2;t.segpts=[D,Re,ve,Re]}else t.segpts=[d.x1,d.y2]}else{var pe=Math.abs(X)<=h/2,Y=Math.abs(q)<=m/2;if(pe){var K=(d.y1+d.y2)/2,ae=d.x1,he=d.x2;t.segpts=[ae,K,he,K]}else if(Y){var me=(d.x1+d.x2)/2,se=d.y1,Be=d.y2;t.segpts=[me,se,me,Be]}else t.segpts=[d.x2,d.y1]}else if(Q){var De=d.y1+L+(x?g/2*Z:0),Ae=d.x1,ze=d.x2;t.segpts=[Ae,De,ze,De]}else{var $=d.x1+L+(x?h/2*Z:0),k=d.y1,R=d.y2;t.segpts=[$,k,$,R]}if(t.isRound){var H=r.pstyle("taxi-radius").value,ee=r.pstyle("radius-type").value[0]==="arc-radius";t.radii=new Array(t.segpts.length/2).fill(H),t.isArcRadius=new Array(t.segpts.length/2).fill(ee)}};_r.tryToCorrectInvalidPoints=function(r,e){var t=r._private.rscratch;if(t.edgeType==="bezier"){var n=e.srcPos,a=e.tgtPos,i=e.srcW,o=e.srcH,u=e.tgtW,c=e.tgtH,f=e.srcShape,d=e.tgtShape,h=e.srcCornerRadius,g=e.tgtCornerRadius,p=e.srcRs,m=e.tgtRs,y=!Ue(t.startX)||!Ue(t.startY),x=!Ue(t.arrowStartX)||!Ue(t.arrowStartY),b=!Ue(t.endX)||!Ue(t.endY),_=!Ue(t.arrowEndX)||!Ue(t.arrowEndY),E=3,C=this.getArrowWidth(r.pstyle("width").pfValue,r.pstyle("arrow-scale").value)*this.arrowShapeWidth,B=E*C,N=Ja({x:t.ctrlpts[0],y:t.ctrlpts[1]},{x:t.startX,y:t.startY}),A=N<B,z=Ja({x:t.ctrlpts[0],y:t.ctrlpts[1]},{x:t.endX,y:t.endY}),M=z<B,V=!1;if(y||x||A){V=!0;var q={x:t.ctrlpts[0]-n.x,y:t.ctrlpts[1]-n.y},I=Math.sqrt(q.x*q.x+q.y*q.y),F={x:q.x/I,y:q.y/I},T=Math.max(i,o),G={x:t.ctrlpts[0]+F.x*2*T,y:t.ctrlpts[1]+F.y*2*T},Q=f.intersectLine(n.x,n.y,i,o,G.x,G.y,0,h,p);A?(t.ctrlpts[0]=t.ctrlpts[0]+F.x*(B-N),t.ctrlpts[1]=t.ctrlpts[1]+F.y*(B-N)):(t.ctrlpts[0]=Q[0]+F.x*B,t.ctrlpts[1]=Q[1]+F.y*B)}if(b||_||M){V=!0;var W={x:t.ctrlpts[0]-a.x,y:t.ctrlpts[1]-a.y},X=Math.sqrt(W.x*W.x+W.y*W.y),Z={x:W.x/X,y:W.y/X},te=Math.max(i,o),L={x:t.ctrlpts[0]+Z.x*2*te,y:t.ctrlpts[1]+Z.y*2*te},U=d.intersectLine(a.x,a.y,u,c,L.x,L.y,0,g,m);M?(t.ctrlpts[0]=t.ctrlpts[0]+Z.x*(B-z),t.ctrlpts[1]=t.ctrlpts[1]+Z.y*(B-z)):(t.ctrlpts[0]=U[0]+Z.x*B,t.ctrlpts[1]=U[1]+Z.y*B)}V&&this.findEndpoints(r)}};_r.storeAllpts=function(r){var e=r._private.rscratch;if(e.edgeType==="multibezier"||e.edgeType==="bezier"||e.edgeType==="self"||e.edgeType==="compound"){e.allpts=[],e.allpts.push(e.startX,e.startY);for(var t=0;t+1<e.ctrlpts.length;t+=2)e.allpts.push(e.ctrlpts[t],e.ctrlpts[t+1]),t+3<e.ctrlpts.length&&e.allpts.push((e.ctrlpts[t]+e.ctrlpts[t+2])/2,(e.ctrlpts[t+1]+e.ctrlpts[t+3])/2);e.allpts.push(e.endX,e.endY);var n,a;e.ctrlpts.length/2%2===0?(n=e.allpts.length/2-1,e.midX=e.allpts[n],e.midY=e.allpts[n+1]):(n=e.allpts.length/2-3,a=.5,e.midX=ar(e.allpts[n],e.allpts[n+2],e.allpts[n+4],a),e.midY=ar(e.allpts[n+1],e.allpts[n+3],e.allpts[n+5],a))}else if(e.edgeType==="straight")e.allpts=[e.startX,e.startY,e.endX,e.endY],e.midX=(e.startX+e.endX+e.arrowStartX+e.arrowEndX)/4,e.midY=(e.startY+e.endY+e.arrowStartY+e.arrowEndY)/4;else if(e.edgeType==="segments"){if(e.allpts=[],e.allpts.push(e.startX,e.startY),e.allpts.push.apply(e.allpts,e.segpts),e.allpts.push(e.endX,e.endY),e.isRound){e.roundCorners=[];for(var i=2;i+3<e.allpts.length;i+=2){var o=e.radii[i/2-1],u=e.isArcRadius[i/2-1];e.roundCorners.push(fv({x:e.allpts[i-2],y:e.allpts[i-1]},{x:e.allpts[i],y:e.allpts[i+1],radius:o},{x:e.allpts[i+2],y:e.allpts[i+3]},o,u))}}if(e.segpts.length%4===0){var c=e.segpts.length/2,f=c-2;e.midX=(e.segpts[f]+e.segpts[c])/2,e.midY=(e.segpts[f+1]+e.segpts[c+1])/2}else{var d=e.segpts.length/2-1;if(!e.isRound)e.midX=e.segpts[d],e.midY=e.segpts[d+1];else{var h={x:e.segpts[d],y:e.segpts[d+1]},g=e.roundCorners[d/2];if(g.radius===0){var p={x:e.segpts[d+2],y:e.segpts[d+3]};e.midX=h.x,e.midY=h.y,e.midVector=[h.y-p.y,p.x-h.x]}else{var m=[h.x-g.cx,h.y-g.cy],y=g.radius/Math.sqrt(Math.pow(m[0],2)+Math.pow(m[1],2));m=m.map(function(x){return x*y}),e.midX=g.cx+m[0],e.midY=g.cy+m[1],e.midVector=m}}}}};_r.checkForInvalidEdgeWarning=function(r){var e=r[0]._private.rscratch;e.nodesOverlap||Ue(e.startX)&&Ue(e.startY)&&Ue(e.endX)&&Ue(e.endY)?e.loggedErr=!1:e.loggedErr||(e.loggedErr=!0,gt("Edge `"+r.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))};_r.findEdgeControlPoints=function(r){var e=this;if(!(!r||r.length===0)){for(var t=this,n=t.cy,a=n.hasCompoundNodes(),i=new Fn,o=function(M,V){return[].concat(gl(M),[V?1:0]).join("-")},u=[],c=[],f=0;f<r.length;f++){var d=r[f],h=d._private,g=d.pstyle("curve-style").value;if(!(d.removed()||!d.takesUpSpace())){if(g==="haystack"){c.push(d);continue}var p=g==="unbundled-bezier"||va(g,"segments")||g==="straight"||g==="straight-triangle"||va(g,"taxi"),m=g==="unbundled-bezier"||g==="bezier",y=h.source,x=h.target,b=y.poolIndex(),_=x.poolIndex(),E=[b,_].sort(),C=o(E,p),B=i.get(C);B==null&&(B={eles:[]},u.push({pairId:E,edgeIsUnbundled:p}),i.set(C,B)),B.eles.push(d),p&&(B.hasUnbundled=!0),m&&(B.hasBezier=!0)}}for(var N=function(){var M=u[A],V=M.pairId,q=M.edgeIsUnbundled,I=o(V,q),F=i.get(I),T;if(!F.hasUnbundled){var G=F.eles[0].parallelEdges().filter(function(ee){return ee.isBundledBezier()});Zh(F.eles),G.forEach(function(ee){return F.eles.push(ee)}),F.eles.sort(function(ee,J){return ee.poolIndex()-J.poolIndex()})}var Q=F.eles[0],W=Q.source(),X=Q.target();if(W.poolIndex()>X.poolIndex()){var Z=W;W=X,X=Z}var te=F.srcPos=W.position(),L=F.tgtPos=X.position(),U=F.srcW=W.outerWidth(),oe=F.srcH=W.outerHeight(),ie=F.tgtW=X.outerWidth(),ne=F.tgtH=X.outerHeight(),we=F.srcShape=t.nodeShapes[e.getNodeShape(W)],Pe=F.tgtShape=t.nodeShapes[e.getNodeShape(X)],Ce=F.srcCornerRadius=W.pstyle("corner-radius").value==="auto"?"auto":W.pstyle("corner-radius").pfValue,ge=F.tgtCornerRadius=X.pstyle("corner-radius").value==="auto"?"auto":X.pstyle("corner-radius").pfValue,ce=F.tgtRs=X._private.rscratch,de=F.srcRs=W._private.rscratch;F.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var be=0;be<F.eles.length;be++){var Re=F.eles[be],D=Re[0]._private.rscratch,ve=Re.pstyle("curve-style").value,pe=ve==="unbundled-bezier"||va(ve,"segments")||va(ve,"taxi"),Y=!W.same(Re.source());if(!F.calculatedIntersection&&W!==X&&(F.hasBezier||F.hasUnbundled)){F.calculatedIntersection=!0;var K=we.intersectLine(te.x,te.y,U,oe,L.x,L.y,0,Ce,de),ae=F.srcIntn=K,he=Pe.intersectLine(L.x,L.y,ie,ne,te.x,te.y,0,ge,ce),me=F.tgtIntn=he,se=F.intersectionPts={x1:K[0],x2:he[0],y1:K[1],y2:he[1]},Be=F.posPts={x1:te.x,x2:L.x,y1:te.y,y2:L.y},De=he[1]-K[1],Ae=he[0]-K[0],ze=Math.sqrt(Ae*Ae+De*De);Ue(ze)&&ze>=yT||(ze=Math.sqrt(Math.max(Ae*Ae,xo)+Math.max(De*De,xo)));var $=F.vector={x:Ae,y:De},k=F.vectorNorm={x:$.x/ze,y:$.y/ze},R={x:-k.y,y:k.x};F.nodesOverlap=!Ue(ze)||Pe.checkPoint(K[0],K[1],0,ie,ne,L.x,L.y,ge,ce)||we.checkPoint(he[0],he[1],0,U,oe,te.x,te.y,Ce,de),F.vectorNormInverse=R,T={nodesOverlap:F.nodesOverlap,dirCounts:F.dirCounts,calculatedIntersection:!0,hasBezier:F.hasBezier,hasUnbundled:F.hasUnbundled,eles:F.eles,srcPos:L,srcRs:ce,tgtPos:te,tgtRs:de,srcW:ie,srcH:ne,tgtW:U,tgtH:oe,srcIntn:me,tgtIntn:ae,srcShape:Pe,tgtShape:we,posPts:{x1:Be.x2,y1:Be.y2,x2:Be.x1,y2:Be.y1},intersectionPts:{x1:se.x2,y1:se.y2,x2:se.x1,y2:se.y1},vector:{x:-$.x,y:-$.y},vectorNorm:{x:-k.x,y:-k.y},vectorNormInverse:{x:-R.x,y:-R.y}}}var H=Y?T:F;D.nodesOverlap=H.nodesOverlap,D.srcIntn=H.srcIntn,D.tgtIntn=H.tgtIntn,D.isRound=ve.startsWith("round"),a&&(W.isParent()||W.isChild()||X.isParent()||X.isChild())&&(W.parents().anySame(X)||X.parents().anySame(W)||W.same(X)&&W.isParent())?e.findCompoundLoopPoints(Re,H,be,pe):W===X?e.findLoopPoints(Re,H,be,pe):ve.endsWith("segments")?e.findSegmentsPoints(Re,H):ve.endsWith("taxi")?e.findTaxiPoints(Re,H):ve==="straight"||!pe&&F.eles.length%2===1&&be===Math.floor(F.eles.length/2)?e.findStraightEdgePoints(Re):e.findBezierPoints(Re,H,be,pe,Y),e.findEndpoints(Re),e.tryToCorrectInvalidPoints(Re,H),e.checkForInvalidEdgeWarning(Re),e.storeAllpts(Re),e.storeEdgeProjections(Re),e.calculateArrowAngles(Re),e.recalculateEdgeLabelProjections(Re),e.calculateLabelAngles(Re)}},A=0;A<u.length;A++)N();this.findHaystackPoints(c)}};function Ew(r){var e=[];if(r!=null){for(var t=0;t<r.length;t+=2){var n=r[t],a=r[t+1];e.push({x:n,y:a})}return e}}_r.getSegmentPoints=function(r){var e=r[0]._private.rscratch;this.recalculateRenderedStyle(r);var t=e.edgeType;if(t==="segments")return Ew(e.segpts)};_r.getControlPoints=function(r){var e=r[0]._private.rscratch;this.recalculateRenderedStyle(r);var t=e.edgeType;if(t==="bezier"||t==="multibezier"||t==="self"||t==="compound")return Ew(e.ctrlpts)};_r.getEdgeMidpoint=function(r){var e=r[0]._private.rscratch;return this.recalculateRenderedStyle(r),{x:e.midX,y:e.midY}};var Do={};Do.manualEndptToPx=function(r,e){var t=this,n=r.position(),a=r.outerWidth(),i=r.outerHeight(),o=r._private.rscratch;if(e.value.length===2){var u=[e.pfValue[0],e.pfValue[1]];return e.units[0]==="%"&&(u[0]=u[0]*a),e.units[1]==="%"&&(u[1]=u[1]*i),u[0]+=n.x,u[1]+=n.y,u}else{var c=e.pfValue[0];c=-Math.PI/2+c;var f=2*Math.max(a,i),d=[n.x+Math.cos(c)*f,n.y+Math.sin(c)*f];return t.nodeShapes[this.getNodeShape(r)].intersectLine(n.x,n.y,a,i,d[0],d[1],0,r.pstyle("corner-radius").value==="auto"?"auto":r.pstyle("corner-radius").pfValue,o)}};Do.findEndpoints=function(r){var e,t,n,a,i=this,o,u=r.source()[0],c=r.target()[0],f=u.position(),d=c.position(),h=r.pstyle("target-arrow-shape").value,g=r.pstyle("source-arrow-shape").value,p=r.pstyle("target-distance-from-node").pfValue,m=r.pstyle("source-distance-from-node").pfValue,y=u._private.rscratch,x=c._private.rscratch,b=r.pstyle("curve-style").value,_=r._private.rscratch,E=_.edgeType,C=va(b,"taxi"),B=E==="self"||E==="compound",N=E==="bezier"||E==="multibezier"||B,A=E!=="bezier",z=E==="straight"||E==="segments",M=E==="segments",V=N||A||z,q=B||C,I=r.pstyle("source-endpoint"),F=q?"outside-to-node":I.value,T=u.pstyle("corner-radius").value==="auto"?"auto":u.pstyle("corner-radius").pfValue,G=r.pstyle("target-endpoint"),Q=q?"outside-to-node":G.value,W=c.pstyle("corner-radius").value==="auto"?"auto":c.pstyle("corner-radius").pfValue;_.srcManEndpt=I,_.tgtManEndpt=G;var X,Z,te,L,U=(e=(G==null||(t=G.pfValue)===null||t===void 0?void 0:t.length)===2?G.pfValue:null)!==null&&e!==void 0?e:[0,0],oe=(n=(I==null||(a=I.pfValue)===null||a===void 0?void 0:a.length)===2?I.pfValue:null)!==null&&n!==void 0?n:[0,0];if(N){var ie=[_.ctrlpts[0],_.ctrlpts[1]],ne=A?[_.ctrlpts[_.ctrlpts.length-2],_.ctrlpts[_.ctrlpts.length-1]]:ie;X=ne,Z=ie}else if(z){var we=M?_.segpts.slice(0,2):[d.x+U[0],d.y+U[1]],Pe=M?_.segpts.slice(_.segpts.length-2):[f.x+oe[0],f.y+oe[1]];X=Pe,Z=we}if(Q==="inside-to-node")o=[d.x,d.y];else if(G.units)o=this.manualEndptToPx(c,G);else if(Q==="outside-to-line")o=_.tgtIntn;else if(Q==="outside-to-node"||Q==="outside-to-node-or-label"?te=X:(Q==="outside-to-line"||Q==="outside-to-line-or-label")&&(te=[f.x,f.y]),o=i.nodeShapes[this.getNodeShape(c)].intersectLine(d.x,d.y,c.outerWidth(),c.outerHeight(),te[0],te[1],0,W,x),Q==="outside-to-node-or-label"||Q==="outside-to-line-or-label"){var Ce=c._private.rscratch,ge=Ce.labelWidth,ce=Ce.labelHeight,de=Ce.labelX,be=Ce.labelY,Re=ge/2,D=ce/2,ve=c.pstyle("text-valign").value;ve==="top"?be-=D:ve==="bottom"&&(be+=D);var pe=c.pstyle("text-halign").value;pe==="left"?de-=Re:pe==="right"&&(de+=Re);var Y=po(te[0],te[1],[de-Re,be-D,de+Re,be-D,de+Re,be+D,de-Re,be+D],d.x,d.y);if(Y.length>0){var K=f,ae=Ha(K,ji(o)),he=Ha(K,ji(Y)),me=ae;if(he<ae&&(o=Y,me=he),Y.length>2){var se=Ha(K,{x:Y[2],y:Y[3]});se<me&&(o=[Y[2],Y[3]])}}}var Be=Ku(o,X,i.arrowShapes[h].spacing(r)+p),De=Ku(o,X,i.arrowShapes[h].gap(r)+p);if(_.endX=De[0],_.endY=De[1],_.arrowEndX=Be[0],_.arrowEndY=Be[1],F==="inside-to-node")o=[f.x,f.y];else if(I.units)o=this.manualEndptToPx(u,I);else if(F==="outside-to-line")o=_.srcIntn;else if(F==="outside-to-node"||F==="outside-to-node-or-label"?L=Z:(F==="outside-to-line"||F==="outside-to-line-or-label")&&(L=[d.x,d.y]),o=i.nodeShapes[this.getNodeShape(u)].intersectLine(f.x,f.y,u.outerWidth(),u.outerHeight(),L[0],L[1],0,T,y),F==="outside-to-node-or-label"||F==="outside-to-line-or-label"){var Ae=u._private.rscratch,ze=Ae.labelWidth,$=Ae.labelHeight,k=Ae.labelX,R=Ae.labelY,H=ze/2,ee=$/2,J=u.pstyle("text-valign").value;J==="top"?R-=ee:J==="bottom"&&(R+=ee);var O=u.pstyle("text-halign").value;O==="left"?k-=H:O==="right"&&(k+=H);var le=po(L[0],L[1],[k-H,R-ee,k+H,R-ee,k+H,R+ee,k-H,R+ee],f.x,f.y);if(le.length>0){var _e=d,ye=Ha(_e,ji(o)),ke=Ha(_e,ji(le)),Oe=ye;if(ke<ye&&(o=[le[0],le[1]],Oe=ke),le.length>2){var Ie=Ha(_e,{x:le[2],y:le[3]});Ie<Oe&&(o=[le[2],le[3]])}}}var We=Ku(o,Z,i.arrowShapes[g].spacing(r)+m),$e=Ku(o,Z,i.arrowShapes[g].gap(r)+m);_.startX=$e[0],_.startY=$e[1],_.arrowStartX=We[0],_.arrowStartY=We[1],V&&(!Ue(_.startX)||!Ue(_.startY)||!Ue(_.endX)||!Ue(_.endY)?_.badLine=!0:_.badLine=!1)};Do.getSourceEndpoint=function(r){var e=r[0]._private.rscratch;switch(this.recalculateRenderedStyle(r),e.edgeType){case"haystack":return{x:e.haystackPts[0],y:e.haystackPts[1]};default:return{x:e.arrowStartX,y:e.arrowStartY}}};Do.getTargetEndpoint=function(r){var e=r[0]._private.rscratch;switch(this.recalculateRenderedStyle(r),e.edgeType){case"haystack":return{x:e.haystackPts[2],y:e.haystackPts[3]};default:return{x:e.arrowEndX,y:e.arrowEndY}}};var dv={};function wT(r,e,t){for(var n=function(f,d,h,g){return ar(f,d,h,g)},a=e._private,i=a.rstyle.bezierPts,o=0;o<r.bezierProjPcts.length;o++){var u=r.bezierProjPcts[o];i.push({x:n(t[0],t[2],t[4],u),y:n(t[1],t[3],t[5],u)})}}dv.storeEdgeProjections=function(r){var e=r._private,t=e.rscratch,n=t.edgeType;if(e.rstyle.bezierPts=null,e.rstyle.linePts=null,e.rstyle.haystackPts=null,n==="multibezier"||n==="bezier"||n==="self"||n==="compound"){e.rstyle.bezierPts=[];for(var a=0;a+5<t.allpts.length;a+=4)wT(this,r,t.allpts.slice(a,a+6))}else if(n==="segments")for(var i=e.rstyle.linePts=[],a=0;a+1<t.allpts.length;a+=2)i.push({x:t.allpts[a],y:t.allpts[a+1]});else if(n==="haystack"){var o=t.haystackPts;e.rstyle.haystackPts=[{x:o[0],y:o[1]},{x:o[2],y:o[3]}]}e.rstyle.arrowWidth=this.getArrowWidth(r.pstyle("width").pfValue,r.pstyle("arrow-scale").value)*this.arrowShapeWidth};dv.recalculateEdgeProjections=function(r){this.findEdgeControlPoints(r)};var Tn={};Tn.recalculateNodeLabelProjection=function(r){var e=r.pstyle("label").strValue;if(!wa(e)){var t,n,a=r._private,i=r.width(),o=r.height(),u=r.padding(),c=r.position(),f=r.pstyle("text-halign").strValue,d=r.pstyle("text-valign").strValue,h=a.rscratch,g=a.rstyle;switch(f){case"left":t=c.x-i/2-u;break;case"right":t=c.x+i/2+u;break;default:t=c.x}switch(d){case"top":n=c.y-o/2-u;break;case"bottom":n=c.y+o/2+u;break;default:n=c.y}h.labelX=t,h.labelY=n,g.labelX=t,g.labelY=n,this.calculateLabelAngles(r),this.applyLabelDimensions(r)}};var Sw=function(e,t){var n=Math.atan(t/e);return e===0&&n<0&&(n=n*-1),n},kw=function(e,t){var n=t.x-e.x,a=t.y-e.y;return Sw(n,a)},xT=function(e,t,n,a){var i=vo(0,a-.001,1),o=vo(0,a+.001,1),u=Gi(e,t,n,i),c=Gi(e,t,n,o);return kw(u,c)};Tn.recalculateEdgeLabelProjections=function(r){var e,t=r._private,n=t.rscratch,a=this,i={mid:r.pstyle("label").strValue,source:r.pstyle("source-label").strValue,target:r.pstyle("target-label").strValue};if(i.mid||i.source||i.target){e={x:n.midX,y:n.midY};var o=function(h,g,p){zn(t.rscratch,h,g,p),zn(t.rstyle,h,g,p)};o("labelX",null,e.x),o("labelY",null,e.y);var u=Sw(n.midDispX,n.midDispY);o("labelAutoAngle",null,u);var c=function(){if(c.cache)return c.cache;for(var h=[],g=0;g+5<n.allpts.length;g+=4){var p={x:n.allpts[g],y:n.allpts[g+1]},m={x:n.allpts[g+2],y:n.allpts[g+3]},y={x:n.allpts[g+4],y:n.allpts[g+5]};h.push({p0:p,p1:m,p2:y,startDist:0,length:0,segments:[]})}var x=t.rstyle.bezierPts,b=a.bezierProjPcts.length;function _(A,z,M,V,q){var I=Ja(z,M),F=A.segments[A.segments.length-1],T={p0:z,p1:M,t0:V,t1:q,startDist:F?F.startDist+F.length:0,length:I};A.segments.push(T),A.length+=I}for(var E=0;E<h.length;E++){var C=h[E],B=h[E-1];B&&(C.startDist=B.startDist+B.length),_(C,C.p0,x[E*b],0,a.bezierProjPcts[0]);for(var N=0;N<b-1;N++)_(C,x[E*b+N],x[E*b+N+1],a.bezierProjPcts[N],a.bezierProjPcts[N+1]);_(C,x[E*b+b-1],C.p2,a.bezierProjPcts[b-1],1)}return c.cache=h},f=function(h){var g,p=h==="source";if(i[h]){var m=r.pstyle(h+"-text-offset").pfValue;switch(n.edgeType){case"self":case"compound":case"bezier":case"multibezier":{for(var y=c(),x,b=0,_=0,E=0;E<y.length;E++){for(var C=y[p?E:y.length-1-E],B=0;B<C.segments.length;B++){var N=C.segments[p?B:C.segments.length-1-B],A=E===y.length-1&&B===C.segments.length-1;if(b=_,_+=N.length,_>=m||A){x={cp:C,segment:N};break}}if(x)break}var z=x.cp,M=x.segment,V=(m-b)/M.length,q=M.t1-M.t0,I=p?M.t0+q*V:M.t1-q*V;I=vo(0,I,1),e=Gi(z.p0,z.p1,z.p2,I),g=xT(z.p0,z.p1,z.p2,I);break}case"straight":case"segments":case"haystack":{for(var F=0,T,G,Q,W,X=n.allpts.length,Z=0;Z+3<X&&(p?(Q={x:n.allpts[Z],y:n.allpts[Z+1]},W={x:n.allpts[Z+2],y:n.allpts[Z+3]}):(Q={x:n.allpts[X-2-Z],y:n.allpts[X-1-Z]},W={x:n.allpts[X-4-Z],y:n.allpts[X-3-Z]}),T=Ja(Q,W),G=F,F+=T,!(F>=m));Z+=2);var te=m-G,L=te/T;L=vo(0,L,1),e=VE(Q,W,L),g=kw(Q,W);break}}o("labelX",h,e.x),o("labelY",h,e.y),o("labelAutoAngle",h,g)}};f("source"),f("target"),this.applyLabelDimensions(r)}};Tn.applyLabelDimensions=function(r){this.applyPrefixedLabelDimensions(r),r.isEdge()&&(this.applyPrefixedLabelDimensions(r,"source"),this.applyPrefixedLabelDimensions(r,"target"))};Tn.applyPrefixedLabelDimensions=function(r,e){var t=r._private,n=this.getLabelText(r,e),a=Qa(n,r._private.labelDimsKey);if(Mr(t.rscratch,"prefixedLabelDimsKey",e)!==a){zn(t.rscratch,"prefixedLabelDimsKey",e,a);var i=this.calculateLabelDimensions(r,n),o=r.pstyle("line-height").pfValue,u=r.pstyle("text-wrap").strValue,c=Mr(t.rscratch,"labelWrapCachedLines",e)||[],f=u!=="wrap"?1:Math.max(c.length,1),d=i.height/f,h=d*o,g=i.width,p=i.height+(f-1)*(o-1)*d;zn(t.rstyle,"labelWidth",e,g),zn(t.rscratch,"labelWidth",e,g),zn(t.rstyle,"labelHeight",e,p),zn(t.rscratch,"labelHeight",e,p),zn(t.rscratch,"labelLineHeight",e,h)}};Tn.getLabelText=function(r,e){var t=r._private,n=e?e+"-":"",a=r.pstyle(n+"label").strValue,i=r.pstyle("text-transform").value,o=function(oe,ie){return ie?(zn(t.rscratch,oe,e,ie),ie):Mr(t.rscratch,oe,e)};if(!a)return"";i=="none"||(i=="uppercase"?a=a.toUpperCase():i=="lowercase"&&(a=a.toLowerCase()));var u=r.pstyle("text-wrap").value;if(u==="wrap"){var c=o("labelKey");if(c!=null&&o("labelWrapKey")===c)return o("labelWrapCachedText");for(var f="",d=a.split(`
`),h=r.pstyle("text-max-width").pfValue,g=r.pstyle("text-overflow-wrap").value,p=g==="anywhere",m=[],y=/[\s\u200b]+|$/g,x=0;x<d.length;x++){var b=d[x],_=this.calculateLabelDimensions(r,b),E=_.width;if(p){var C=b.split("").join(f);b=C}if(E>h){var B=b.matchAll(y),N="",A=0,z=Fr(B),M;try{for(z.s();!(M=z.n()).done;){var V=M.value,q=V[0],I=b.substring(A,V.index);A=V.index+q.length;var F=N.length===0?I:N+I+q,T=this.calculateLabelDimensions(r,F),G=T.width;G<=h?N+=I+q:(N&&m.push(N),N=I+q)}}catch(U){z.e(U)}finally{z.f()}N.match(/^[\s\u200b]+$/)||m.push(N)}else m.push(b)}o("labelWrapCachedLines",m),a=o("labelWrapCachedText",m.join(`
`)),o("labelWrapKey",c)}else if(u==="ellipsis"){var Q=r.pstyle("text-max-width").pfValue,W="",X="",Z=!1;if(this.calculateLabelDimensions(r,a).width<Q)return a;for(var te=0;te<a.length;te++){var L=this.calculateLabelDimensions(r,W+a[te]+X).width;if(L>Q)break;W+=a[te],te===a.length-1&&(Z=!0)}return Z||(W+=X),W}return a};Tn.getLabelJustification=function(r){var e=r.pstyle("text-justification").strValue,t=r.pstyle("text-halign").strValue;if(e==="auto")if(r.isNode())switch(t){case"left":return"right";case"right":return"left";default:return"center"}else return"center";else return e};Tn.calculateLabelDimensions=function(r,e){var t=this,n=t.cy.window(),a=n.document,i=0,o=r.pstyle("font-style").strValue,u=r.pstyle("font-size").pfValue,c=r.pstyle("font-family").strValue,f=r.pstyle("font-weight").strValue,d=this.labelCalcCanvas,h=this.labelCalcCanvasContext;if(!d){d=this.labelCalcCanvas=a.createElement("canvas"),h=this.labelCalcCanvasContext=d.getContext("2d");var g=d.style;g.position="absolute",g.left="-9999px",g.top="-9999px",g.zIndex="-1",g.visibility="hidden",g.pointerEvents="none"}h.font="".concat(o," ").concat(f," ").concat(u,"px ").concat(c);for(var p=0,m=0,y=e.split(`
`),x=0;x<y.length;x++){var b=y[x],_=h.measureText(b),E=Math.ceil(_.width),C=u;p=Math.max(E,p),m+=C}return p+=i,m+=i,{width:p,height:m}};Tn.calculateLabelAngle=function(r,e){var t=r._private,n=t.rscratch,a=r.isEdge(),i=e?e+"-":"",o=r.pstyle(i+"text-rotation"),u=o.strValue;return u==="none"?0:a&&u==="autorotate"?n.labelAutoAngle:u==="autorotate"?0:o.pfValue};Tn.calculateLabelAngles=function(r){var e=this,t=r.isEdge(),n=r._private,a=n.rscratch;a.labelAngle=e.calculateLabelAngle(r),t&&(a.sourceLabelAngle=e.calculateLabelAngle(r,"source"),a.targetLabelAngle=e.calculateLabelAngle(r,"target"))};var Cw={},_0=28,E0=!1;Cw.getNodeShape=function(r){var e=this,t=r.pstyle("shape").value;if(t==="cutrectangle"&&(r.width()<_0||r.height()<_0))return E0||(gt("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),E0=!0),"rectangle";if(r.isParent())return t==="rectangle"||t==="roundrectangle"||t==="round-rectangle"||t==="cutrectangle"||t==="cut-rectangle"||t==="barrel"?t:"rectangle";if(t==="polygon"){var n=r.pstyle("shape-polygon-points").value;return e.nodeShapes.makePolygon(n).name}return t};var Hl={};Hl.registerCalculationListeners=function(){var r=this.cy,e=r.collection(),t=this,n=function(o){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.merge(o),u)for(var c=0;c<o.length;c++){var f=o[c],d=f._private,h=d.rstyle;h.clean=!1,h.cleanConnected=!1}};t.binder(r).on("bounds.* dirty.*",function(o){var u=o.target;n(u)}).on("style.* background.*",function(o){var u=o.target;n(u,!1)});var a=function(o){if(o){var u=t.onUpdateEleCalcsFns;e.cleanStyle();for(var c=0;c<e.length;c++){var f=e[c],d=f._private.rstyle;f.isNode()&&!d.cleanConnected&&(n(f.connectedEdges()),d.cleanConnected=!0)}if(u)for(var h=0;h<u.length;h++){var g=u[h];g(o,e)}t.recalculateRenderedStyle(e),e=r.collection()}};t.flushRenderedStyleQueue=function(){a(!0)},t.beforeRender(a,t.beforeRenderPriorities.eleCalcs)};Hl.onUpdateEleCalcs=function(r){var e=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];e.push(r)};Hl.recalculateRenderedStyle=function(r,e){var t=function(C){return C._private.rstyle.cleanConnected};if(r.length!==0){var n=[],a=[];if(!this.destroyed){e===void 0&&(e=!0);for(var i=0;i<r.length;i++){var o=r[i],u=o._private,c=u.rstyle;o.isEdge()&&(!t(o.source())||!t(o.target()))&&(c.clean=!1),o.isEdge()&&o.isBundledBezier()&&o.parallelEdges().some(function(E){return!E._private.rstyle.clean&&E.isBundledBezier()})&&(c.clean=!1),!(e&&c.clean||o.removed())&&o.pstyle("display").value!=="none"&&(u.group==="nodes"?a.push(o):n.push(o),c.clean=!0)}for(var f=0;f<a.length;f++){var d=a[f],h=d._private,g=h.rstyle,p=d.position();this.recalculateNodeLabelProjection(d),g.nodeX=p.x,g.nodeY=p.y,g.nodeW=d.pstyle("width").pfValue,g.nodeH=d.pstyle("height").pfValue}this.recalculateEdgeProjections(n);for(var m=0;m<n.length;m++){var y=n[m],x=y._private,b=x.rstyle,_=x.rscratch;b.srcX=_.arrowStartX,b.srcY=_.arrowStartY,b.tgtX=_.arrowEndX,b.tgtY=_.arrowEndY,b.midX=_.midX,b.midY=_.midY,b.labelAngle=_.labelAngle,b.sourceLabelAngle=_.sourceLabelAngle,b.targetLabelAngle=_.targetLabelAngle}}}};var Kl={};Kl.updateCachedGrabbedEles=function(){var r=this.cachedZSortedEles;if(r){r.drag=[],r.nondrag=[];for(var e=[],t=0;t<r.length;t++){var n=r[t],a=n._private.rscratch;n.grabbed()&&!n.isParent()?e.push(n):a.inDragLayer?r.drag.push(n):r.nondrag.push(n)}for(var t=0;t<e.length;t++){var n=e[t];r.drag.push(n)}}};Kl.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null};Kl.getCachedZSortedEles=function(r){if(r||!this.cachedZSortedEles){var e=this.cy.mutableElements().toArray();e.sort(ow),e.interactive=e.filter(function(t){return t.interactive()}),this.cachedZSortedEles=e,this.updateCachedGrabbedEles()}else e=this.cachedZSortedEles;return e};var Tw={};[ai,Cl,_r,Do,dv,Tn,Cw,Hl,Kl].forEach(function(r){et(Tw,r)});var Pw={};Pw.getCachedImage=function(r,e,t){var n=this,a=n.imageCache=n.imageCache||{},i=a[r];if(i)return i.image.complete||i.image.addEventListener("load",t),i.image;i=a[r]=a[r]||{};var o=i.image=new Image;o.addEventListener("load",t),o.addEventListener("error",function(){o.error=!0});var u="data:",c=r.substring(0,u.length).toLowerCase()===u;return c||(e=e==="null"?null:e,o.crossOrigin=e),o.src=r,o};var ns={};ns.registerBinding=function(r,e,t,n){var a=Array.prototype.slice.apply(arguments,[1]);if(Array.isArray(r)){for(var i=[],o=0;o<r.length;o++){var u=r[o];if(u!==void 0){var c=this.binder(u);i.push(c.on.apply(c,a))}}return i}var c=this.binder(r);return c.on.apply(c,a)};ns.binder=function(r){var e=this,t=e.cy.window(),n=r===t||r===t.document||r===t.document.body||D_(r);if(e.supportsPassiveEvents==null){var a=!1;try{var i=Object.defineProperty({},"passive",{get:function(){return a=!0,!0}});t.addEventListener("test",null,i)}catch{}e.supportsPassiveEvents=a}var o=function(c,f,d){var h=Array.prototype.slice.call(arguments);return n&&e.supportsPassiveEvents&&(h[2]={capture:d??!1,passive:!1,once:!1}),e.bindings.push({target:r,args:h}),(r.addEventListener||r.on).apply(r,h),this};return{on:o,addEventListener:o,addListener:o,bind:o}};ns.nodeIsDraggable=function(r){return r&&r.isNode()&&!r.locked()&&r.grabbable()};ns.nodeIsGrabbable=function(r){return this.nodeIsDraggable(r)&&r.interactive()};ns.load=function(){var r=this,e=r.cy.window(),t=function(O){return O.selected()},n=function(O){var le=O.getRootNode();if(le&&le.nodeType===11&&le.host!==void 0)return le},a=function(O,le,_e,ye){O==null&&(O=r.cy);for(var ke=0;ke<le.length;ke++){var Oe=le[ke];O.emit({originalEvent:_e,type:Oe,position:ye})}},i=function(O){return O.shiftKey||O.metaKey||O.ctrlKey},o=function(O,le){var _e=!0;if(r.cy.hasCompoundNodes()&&O&&O.pannable())for(var ye=0;le&&ye<le.length;ye++){var O=le[ye];if(O.isNode()&&O.isParent()&&!O.pannable()){_e=!1;break}}else _e=!0;return _e},u=function(O){O[0]._private.grabbed=!0},c=function(O){O[0]._private.grabbed=!1},f=function(O){O[0]._private.rscratch.inDragLayer=!0},d=function(O){O[0]._private.rscratch.inDragLayer=!1},h=function(O){O[0]._private.rscratch.isGrabTarget=!0},g=function(O){O[0]._private.rscratch.isGrabTarget=!1},p=function(O,le){var _e=le.addToList,ye=_e.has(O);!ye&&O.grabbable()&&!O.locked()&&(_e.merge(O),u(O))},m=function(O,le){if(O.cy().hasCompoundNodes()&&!(le.inDragLayer==null&&le.addToList==null)){var _e=O.descendants();le.inDragLayer&&(_e.forEach(f),_e.connectedEdges().forEach(f)),le.addToList&&p(_e,le)}},y=function(O,le){le=le||{};var _e=O.cy().hasCompoundNodes();le.inDragLayer&&(O.forEach(f),O.neighborhood().stdFilter(function(ye){return!_e||ye.isEdge()}).forEach(f)),le.addToList&&O.forEach(function(ye){p(ye,le)}),m(O,le),_(O,{inDragLayer:le.inDragLayer}),r.updateCachedGrabbedEles()},x=y,b=function(O){O&&(r.getCachedZSortedEles().forEach(function(le){c(le),d(le),g(le)}),r.updateCachedGrabbedEles())},_=function(O,le){if(!(le.inDragLayer==null&&le.addToList==null)&&O.cy().hasCompoundNodes()){var _e=O.ancestors().orphans();if(!_e.same(O)){var ye=_e.descendants().spawnSelf().merge(_e).unmerge(O).unmerge(O.descendants()),ke=ye.connectedEdges();le.inDragLayer&&(ke.forEach(f),ye.forEach(f)),le.addToList&&ye.forEach(function(Oe){p(Oe,le)})}}},E=function(){document.activeElement!=null&&document.activeElement.blur!=null&&document.activeElement.blur()},C=typeof MutationObserver<"u",B=typeof ResizeObserver<"u";C?(r.removeObserver=new MutationObserver(function(J){for(var O=0;O<J.length;O++){var le=J[O],_e=le.removedNodes;if(_e)for(var ye=0;ye<_e.length;ye++){var ke=_e[ye];if(ke===r.container){r.destroy();break}}}}),r.container.parentNode&&r.removeObserver.observe(r.container.parentNode,{childList:!0})):r.registerBinding(r.container,"DOMNodeRemoved",function(J){r.destroy()});var N=Po(function(){r.cy.resize()},100);C&&(r.styleObserver=new MutationObserver(N),r.styleObserver.observe(r.container,{attributes:!0})),r.registerBinding(e,"resize",N),B&&(r.resizeObserver=new ResizeObserver(N),r.resizeObserver.observe(r.container));var A=function(O,le){for(;O!=null;)le(O),O=O.parentNode},z=function(){r.invalidateContainerClientCoordsCache()};A(r.container,function(J){r.registerBinding(J,"transitionend",z),r.registerBinding(J,"animationend",z),r.registerBinding(J,"scroll",z)}),r.registerBinding(r.container,"contextmenu",function(J){J.preventDefault()});var M=function(){return r.selection[4]!==0},V=function(O){for(var le=r.findContainerClientCoords(),_e=le[0],ye=le[1],ke=le[2],Oe=le[3],Ie=O.touches?O.touches:[O],We=!1,$e=0;$e<Ie.length;$e++){var Ge=Ie[$e];if(_e<=Ge.clientX&&Ge.clientX<=_e+ke&&ye<=Ge.clientY&&Ge.clientY<=ye+Oe){We=!0;break}}if(!We)return!1;for(var nt=r.container,at=O.target,Ke=at.parentNode,st=!1;Ke;){if(Ke===nt){st=!0;break}Ke=Ke.parentNode}return!!st};r.registerBinding(r.container,"mousedown",function(O){if(V(O)&&!(r.hoverData.which===1&&O.which!==1)){O.preventDefault(),E(),r.hoverData.capture=!0,r.hoverData.which=O.which;var le=r.cy,_e=[O.clientX,O.clientY],ye=r.projectIntoViewport(_e[0],_e[1]),ke=r.selection,Oe=r.findNearestElements(ye[0],ye[1],!0,!1),Ie=Oe[0],We=r.dragData.possibleDragElements;r.hoverData.mdownPos=ye,r.hoverData.mdownGPos=_e;var $e=function(it){return{originalEvent:O,type:it,position:{x:ye[0],y:ye[1]}}},Ge=function(){r.hoverData.tapholdCancelled=!1,clearTimeout(r.hoverData.tapholdTimeout),r.hoverData.tapholdTimeout=setTimeout(function(){if(!r.hoverData.tapholdCancelled){var it=r.hoverData.down;it?it.emit($e("taphold")):le.emit($e("taphold"))}},r.tapholdDuration)};if(O.which==3){r.hoverData.cxtStarted=!0;var nt={originalEvent:O,type:"cxttapstart",position:{x:ye[0],y:ye[1]}};Ie?(Ie.activate(),Ie.emit(nt),r.hoverData.down=Ie):le.emit(nt),r.hoverData.downTime=new Date().getTime(),r.hoverData.cxtDragged=!1}else if(O.which==1){Ie&&Ie.activate();{if(Ie!=null&&r.nodeIsGrabbable(Ie)){var at=function(it){it.emit($e("grab"))};if(h(Ie),!Ie.selected())We=r.dragData.possibleDragElements=le.collection(),x(Ie,{addToList:We}),Ie.emit($e("grabon")).emit($e("grab"));else{We=r.dragData.possibleDragElements=le.collection();var Ke=le.$(function(st){return st.isNode()&&st.selected()&&r.nodeIsGrabbable(st)});y(Ke,{addToList:We}),Ie.emit($e("grabon")),Ke.forEach(at)}r.redrawHint("eles",!0),r.redrawHint("drag",!0)}r.hoverData.down=Ie,r.hoverData.downs=Oe,r.hoverData.downTime=new Date().getTime()}a(Ie,["mousedown","tapstart","vmousedown"],O,{x:ye[0],y:ye[1]}),Ie==null?(ke[4]=1,r.data.bgActivePosistion={x:ye[0],y:ye[1]},r.redrawHint("select",!0),r.redraw()):Ie.pannable()&&(ke[4]=1),Ge()}ke[0]=ke[2]=ye[0],ke[1]=ke[3]=ye[1]}},!1);var q=n(r.container);r.registerBinding([e,q],"mousemove",function(O){var le=r.hoverData.capture;if(!(!le&&!V(O))){var _e=!1,ye=r.cy,ke=ye.zoom(),Oe=[O.clientX,O.clientY],Ie=r.projectIntoViewport(Oe[0],Oe[1]),We=r.hoverData.mdownPos,$e=r.hoverData.mdownGPos,Ge=r.selection,nt=null;!r.hoverData.draggingEles&&!r.hoverData.dragging&&!r.hoverData.selecting&&(nt=r.findNearestElement(Ie[0],Ie[1],!0,!1));var at=r.hoverData.last,Ke=r.hoverData.down,st=[Ie[0]-Ge[2],Ie[1]-Ge[3]],it=r.dragData.possibleDragElements,Dt;if($e){var Et=Oe[0]-$e[0],Vt=Et*Et,Pt=Oe[1]-$e[1],Rt=Pt*Pt,jt=Vt+Rt;r.hoverData.isOverThresholdDrag=Dt=jt>=r.desktopTapThreshold2}var It=i(O);Dt&&(r.hoverData.tapholdCancelled=!0);var Ur=function(){var Sr=r.hoverData.dragDelta=r.hoverData.dragDelta||[];Sr.length===0?(Sr.push(st[0]),Sr.push(st[1])):(Sr[0]+=st[0],Sr[1]+=st[1])};_e=!0,a(nt,["mousemove","vmousemove","tapdrag"],O,{x:Ie[0],y:Ie[1]});var St=function(Sr){return{originalEvent:O,type:Sr,position:{x:Ie[0],y:Ie[1]}}},$r=function(){r.data.bgActivePosistion=void 0,r.hoverData.selecting||ye.emit(St("boxstart")),Ge[4]=1,r.hoverData.selecting=!0,r.redrawHint("select",!0),r.redraw()};if(r.hoverData.which===3){if(Dt){var an=St("cxtdrag");Ke?Ke.emit(an):ye.emit(an),r.hoverData.cxtDragged=!0,(!r.hoverData.cxtOver||nt!==r.hoverData.cxtOver)&&(r.hoverData.cxtOver&&r.hoverData.cxtOver.emit(St("cxtdragout")),r.hoverData.cxtOver=nt,nt&&nt.emit(St("cxtdragover")))}}else if(r.hoverData.dragging){if(_e=!0,ye.panningEnabled()&&ye.userPanningEnabled()){var qn;if(r.hoverData.justStartedPan){var si=r.hoverData.mdownPos;qn={x:(Ie[0]-si[0])*ke,y:(Ie[1]-si[1])*ke},r.hoverData.justStartedPan=!1}else qn={x:st[0]*ke,y:st[1]*ke};ye.panBy(qn),ye.emit(St("dragpan")),r.hoverData.dragged=!0}Ie=r.projectIntoViewport(O.clientX,O.clientY)}else if(Ge[4]==1&&(Ke==null||Ke.pannable())){if(Dt){if(!r.hoverData.dragging&&ye.boxSelectionEnabled()&&(It||!ye.panningEnabled()||!ye.userPanningEnabled()))$r();else if(!r.hoverData.selecting&&ye.panningEnabled()&&ye.userPanningEnabled()){var Er=o(Ke,r.hoverData.downs);Er&&(r.hoverData.dragging=!0,r.hoverData.justStartedPan=!0,Ge[4]=0,r.data.bgActivePosistion=ji(We),r.redrawHint("select",!0),r.redraw())}Ke&&Ke.pannable()&&Ke.active()&&Ke.unactivate()}}else{if(Ke&&Ke.pannable()&&Ke.active()&&Ke.unactivate(),(!Ke||!Ke.grabbed())&&nt!=at&&(at&&a(at,["mouseout","tapdragout"],O,{x:Ie[0],y:Ie[1]}),nt&&a(nt,["mouseover","tapdragover"],O,{x:Ie[0],y:Ie[1]}),r.hoverData.last=nt),Ke)if(Dt){if(ye.boxSelectionEnabled()&&It)Ke&&Ke.grabbed()&&(b(it),Ke.emit(St("freeon")),it.emit(St("free")),r.dragData.didDrag&&(Ke.emit(St("dragfreeon")),it.emit(St("dragfree")))),$r();else if(Ke&&Ke.grabbed()&&r.nodeIsDraggable(Ke)){var or=!r.dragData.didDrag;or&&r.redrawHint("eles",!0),r.dragData.didDrag=!0,r.hoverData.draggingEles||y(it,{inDragLayer:!0});var Kt={x:0,y:0};if(Ue(st[0])&&Ue(st[1])&&(Kt.x+=st[0],Kt.y+=st[1],or)){var vr=r.hoverData.dragDelta;vr&&Ue(vr[0])&&Ue(vr[1])&&(Kt.x+=vr[0],Kt.y+=vr[1])}r.hoverData.draggingEles=!0,it.silentShift(Kt).emit(St("position")).emit(St("drag")),r.redrawHint("drag",!0),r.redraw()}}else Ur();_e=!0}if(Ge[2]=Ie[0],Ge[3]=Ie[1],_e)return O.stopPropagation&&O.stopPropagation(),O.preventDefault&&O.preventDefault(),!1}},!1);var I,F,T;r.registerBinding(e,"mouseup",function(O){if(!(r.hoverData.which===1&&O.which!==1&&r.hoverData.capture)){var le=r.hoverData.capture;if(le){r.hoverData.capture=!1;var _e=r.cy,ye=r.projectIntoViewport(O.clientX,O.clientY),ke=r.selection,Oe=r.findNearestElement(ye[0],ye[1],!0,!1),Ie=r.dragData.possibleDragElements,We=r.hoverData.down,$e=i(O);r.data.bgActivePosistion&&(r.redrawHint("select",!0),r.redraw()),r.hoverData.tapholdCancelled=!0,r.data.bgActivePosistion=void 0,We&&We.unactivate();var Ge=function(Et){return{originalEvent:O,type:Et,position:{x:ye[0],y:ye[1]}}};if(r.hoverData.which===3){var nt=Ge("cxttapend");if(We?We.emit(nt):_e.emit(nt),!r.hoverData.cxtDragged){var at=Ge("cxttap");We?We.emit(at):_e.emit(at)}r.hoverData.cxtDragged=!1,r.hoverData.which=null}else if(r.hoverData.which===1){if(a(Oe,["mouseup","tapend","vmouseup"],O,{x:ye[0],y:ye[1]}),!r.dragData.didDrag&&!r.hoverData.dragged&&!r.hoverData.selecting&&!r.hoverData.isOverThresholdDrag&&(a(We,["click","tap","vclick"],O,{x:ye[0],y:ye[1]}),F=!1,O.timeStamp-T<=_e.multiClickDebounceTime()?(I&&clearTimeout(I),F=!0,T=null,a(We,["dblclick","dbltap","vdblclick"],O,{x:ye[0],y:ye[1]})):(I=setTimeout(function(){F||a(We,["oneclick","onetap","voneclick"],O,{x:ye[0],y:ye[1]})},_e.multiClickDebounceTime()),T=O.timeStamp)),We==null&&!r.dragData.didDrag&&!r.hoverData.selecting&&!r.hoverData.dragged&&!i(O)&&(_e.$(t).unselect(["tapunselect"]),Ie.length>0&&r.redrawHint("eles",!0),r.dragData.possibleDragElements=Ie=_e.collection()),Oe==We&&!r.dragData.didDrag&&!r.hoverData.selecting&&Oe!=null&&Oe._private.selectable&&(r.hoverData.dragging||(_e.selectionType()==="additive"||$e?Oe.selected()?Oe.unselect(["tapunselect"]):Oe.select(["tapselect"]):$e||(_e.$(t).unmerge(Oe).unselect(["tapunselect"]),Oe.select(["tapselect"]))),r.redrawHint("eles",!0)),r.hoverData.selecting){var Ke=_e.collection(r.getAllInBox(ke[0],ke[1],ke[2],ke[3]));r.redrawHint("select",!0),Ke.length>0&&r.redrawHint("eles",!0),_e.emit(Ge("boxend"));var st=function(Et){return Et.selectable()&&!Et.selected()};_e.selectionType()==="additive"||$e||_e.$(t).unmerge(Ke).unselect(),Ke.emit(Ge("box")).stdFilter(st).select().emit(Ge("boxselect")),r.redraw()}if(r.hoverData.dragging&&(r.hoverData.dragging=!1,r.redrawHint("select",!0),r.redrawHint("eles",!0),r.redraw()),!ke[4]){r.redrawHint("drag",!0),r.redrawHint("eles",!0);var it=We&&We.grabbed();b(Ie),it&&(We.emit(Ge("freeon")),Ie.emit(Ge("free")),r.dragData.didDrag&&(We.emit(Ge("dragfreeon")),Ie.emit(Ge("dragfree"))))}}ke[4]=0,r.hoverData.down=null,r.hoverData.cxtStarted=!1,r.hoverData.draggingEles=!1,r.hoverData.selecting=!1,r.hoverData.isOverThresholdDrag=!1,r.dragData.didDrag=!1,r.hoverData.dragged=!1,r.hoverData.dragDelta=[],r.hoverData.mdownPos=null,r.hoverData.mdownGPos=null,r.hoverData.which=null}}},!1);var G=[],Q=4,W,X=1e5,Z=function(O,le){for(var _e=0;_e<O.length;_e++)if(O[_e]%le!==0)return!1;return!0},te=function(O){for(var le=Math.abs(O[0]),_e=1;_e<O.length;_e++)if(Math.abs(O[_e])!==le)return!1;return!0},L=function(O){var le=!1,_e=O.deltaY;if(_e==null&&(O.wheelDeltaY!=null?_e=O.wheelDeltaY/4:O.wheelDelta!=null&&(_e=O.wheelDelta/4)),_e!==0){if(W==null)if(G.length>=Q){var ye=G;if(W=Z(ye,5),!W){var ke=Math.abs(ye[0]);W=te(ye)&&ke>5}if(W)for(var Oe=0;Oe<ye.length;Oe++)X=Math.min(Math.abs(ye[Oe]),X)}else G.push(_e),le=!0;else W&&(X=Math.min(Math.abs(_e),X));if(!r.scrollingPage){var Ie=r.cy,We=Ie.zoom(),$e=Ie.pan(),Ge=r.projectIntoViewport(O.clientX,O.clientY),nt=[Ge[0]*We+$e.x,Ge[1]*We+$e.y];if(r.hoverData.draggingEles||r.hoverData.dragging||r.hoverData.cxtStarted||M()){O.preventDefault();return}if(Ie.panningEnabled()&&Ie.userPanningEnabled()&&Ie.zoomingEnabled()&&Ie.userZoomingEnabled()){O.preventDefault(),r.data.wheelZooming=!0,clearTimeout(r.data.wheelTimeout),r.data.wheelTimeout=setTimeout(function(){r.data.wheelZooming=!1,r.redrawHint("eles",!0),r.redraw()},150);var at;le&&Math.abs(_e)>5&&(_e=Qh(_e)*5),at=_e/-250,W&&(at/=X,at*=3),at=at*r.wheelSensitivity;var Ke=O.deltaMode===1;Ke&&(at*=33);var st=Ie.zoom()*Math.pow(10,at);O.type==="gesturechange"&&(st=r.gestureStartZoom*O.scale),Ie.zoom({level:st,renderedPosition:{x:nt[0],y:nt[1]}}),Ie.emit({type:O.type==="gesturechange"?"pinchzoom":"scrollzoom",originalEvent:O,position:{x:Ge[0],y:Ge[1]}})}}}};r.registerBinding(r.container,"wheel",L,!0),r.registerBinding(e,"scroll",function(O){r.scrollingPage=!0,clearTimeout(r.scrollingPageTimeout),r.scrollingPageTimeout=setTimeout(function(){r.scrollingPage=!1},250)},!0),r.registerBinding(r.container,"gesturestart",function(O){r.gestureStartZoom=r.cy.zoom(),r.hasTouchStarted||O.preventDefault()},!0),r.registerBinding(r.container,"gesturechange",function(J){r.hasTouchStarted||L(J)},!0),r.registerBinding(r.container,"mouseout",function(O){var le=r.projectIntoViewport(O.clientX,O.clientY);r.cy.emit({originalEvent:O,type:"mouseout",position:{x:le[0],y:le[1]}})},!1),r.registerBinding(r.container,"mouseover",function(O){var le=r.projectIntoViewport(O.clientX,O.clientY);r.cy.emit({originalEvent:O,type:"mouseover",position:{x:le[0],y:le[1]}})},!1);var U,oe,ie,ne,we,Pe,Ce,ge,ce,de,be,Re,D,ve=function(O,le,_e,ye){return Math.sqrt((_e-O)*(_e-O)+(ye-le)*(ye-le))},pe=function(O,le,_e,ye){return(_e-O)*(_e-O)+(ye-le)*(ye-le)},Y;r.registerBinding(r.container,"touchstart",Y=function(O){if(r.hasTouchStarted=!0,!!V(O)){E(),r.touchData.capture=!0,r.data.bgActivePosistion=void 0;var le=r.cy,_e=r.touchData.now,ye=r.touchData.earlier;if(O.touches[0]){var ke=r.projectIntoViewport(O.touches[0].clientX,O.touches[0].clientY);_e[0]=ke[0],_e[1]=ke[1]}if(O.touches[1]){var ke=r.projectIntoViewport(O.touches[1].clientX,O.touches[1].clientY);_e[2]=ke[0],_e[3]=ke[1]}if(O.touches[2]){var ke=r.projectIntoViewport(O.touches[2].clientX,O.touches[2].clientY);_e[4]=ke[0],_e[5]=ke[1]}var Oe=function(It){return{originalEvent:O,type:It,position:{x:_e[0],y:_e[1]}}};if(O.touches[1]){r.touchData.singleTouchMoved=!0,b(r.dragData.touchDragEles);var Ie=r.findContainerClientCoords();ce=Ie[0],de=Ie[1],be=Ie[2],Re=Ie[3],U=O.touches[0].clientX-ce,oe=O.touches[0].clientY-de,ie=O.touches[1].clientX-ce,ne=O.touches[1].clientY-de,D=0<=U&&U<=be&&0<=ie&&ie<=be&&0<=oe&&oe<=Re&&0<=ne&&ne<=Re;var We=le.pan(),$e=le.zoom();we=ve(U,oe,ie,ne),Pe=pe(U,oe,ie,ne),Ce=[(U+ie)/2,(oe+ne)/2],ge=[(Ce[0]-We.x)/$e,(Ce[1]-We.y)/$e];var Ge=200,nt=Ge*Ge;if(Pe<nt&&!O.touches[2]){var at=r.findNearestElement(_e[0],_e[1],!0,!0),Ke=r.findNearestElement(_e[2],_e[3],!0,!0);at&&at.isNode()?(at.activate().emit(Oe("cxttapstart")),r.touchData.start=at):Ke&&Ke.isNode()?(Ke.activate().emit(Oe("cxttapstart")),r.touchData.start=Ke):le.emit(Oe("cxttapstart")),r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxt=!0,r.touchData.cxtDragged=!1,r.data.bgActivePosistion=void 0,r.redraw();return}}if(O.touches[2])le.boxSelectionEnabled()&&O.preventDefault();else if(!O.touches[1]){if(O.touches[0]){var st=r.findNearestElements(_e[0],_e[1],!0,!0),it=st[0];if(it!=null&&(it.activate(),r.touchData.start=it,r.touchData.starts=st,r.nodeIsGrabbable(it))){var Dt=r.dragData.touchDragEles=le.collection(),Et=null;r.redrawHint("eles",!0),r.redrawHint("drag",!0),it.selected()?(Et=le.$(function(jt){return jt.selected()&&r.nodeIsGrabbable(jt)}),y(Et,{addToList:Dt})):x(it,{addToList:Dt}),h(it),it.emit(Oe("grabon")),Et?Et.forEach(function(jt){jt.emit(Oe("grab"))}):it.emit(Oe("grab"))}a(it,["touchstart","tapstart","vmousedown"],O,{x:_e[0],y:_e[1]}),it==null&&(r.data.bgActivePosistion={x:ke[0],y:ke[1]},r.redrawHint("select",!0),r.redraw()),r.touchData.singleTouchMoved=!1,r.touchData.singleTouchStartTime=+new Date,clearTimeout(r.touchData.tapholdTimeout),r.touchData.tapholdTimeout=setTimeout(function(){r.touchData.singleTouchMoved===!1&&!r.pinching&&!r.touchData.selecting&&a(r.touchData.start,["taphold"],O,{x:_e[0],y:_e[1]})},r.tapholdDuration)}}if(O.touches.length>=1){for(var Vt=r.touchData.startPosition=[null,null,null,null,null,null],Pt=0;Pt<_e.length;Pt++)Vt[Pt]=ye[Pt]=_e[Pt];var Rt=O.touches[0];r.touchData.startGPosition=[Rt.clientX,Rt.clientY]}}},!1);var K;r.registerBinding(e,"touchmove",K=function(O){var le=r.touchData.capture;if(!(!le&&!V(O))){var _e=r.selection,ye=r.cy,ke=r.touchData.now,Oe=r.touchData.earlier,Ie=ye.zoom();if(O.touches[0]){var We=r.projectIntoViewport(O.touches[0].clientX,O.touches[0].clientY);ke[0]=We[0],ke[1]=We[1]}if(O.touches[1]){var We=r.projectIntoViewport(O.touches[1].clientX,O.touches[1].clientY);ke[2]=We[0],ke[3]=We[1]}if(O.touches[2]){var We=r.projectIntoViewport(O.touches[2].clientX,O.touches[2].clientY);ke[4]=We[0],ke[5]=We[1]}var $e=function(li){return{originalEvent:O,type:li,position:{x:ke[0],y:ke[1]}}},Ge=r.touchData.startGPosition,nt;if(le&&O.touches[0]&&Ge){for(var at=[],Ke=0;Ke<ke.length;Ke++)at[Ke]=ke[Ke]-Oe[Ke];var st=O.touches[0].clientX-Ge[0],it=st*st,Dt=O.touches[0].clientY-Ge[1],Et=Dt*Dt,Vt=it+Et;nt=Vt>=r.touchTapThreshold2}if(le&&r.touchData.cxt){O.preventDefault();var Pt=O.touches[0].clientX-ce,Rt=O.touches[0].clientY-de,jt=O.touches[1].clientX-ce,It=O.touches[1].clientY-de,Ur=pe(Pt,Rt,jt,It),St=Ur/Pe,$r=150,an=$r*$r,qn=1.5,si=qn*qn;if(St>=si||Ur>=an){r.touchData.cxt=!1,r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);var Er=$e("cxttapend");r.touchData.start?(r.touchData.start.unactivate().emit(Er),r.touchData.start=null):ye.emit(Er)}}if(le&&r.touchData.cxt){var Er=$e("cxtdrag");r.data.bgActivePosistion=void 0,r.redrawHint("select",!0),r.touchData.start?r.touchData.start.emit(Er):ye.emit(Er),r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxtDragged=!0;var or=r.findNearestElement(ke[0],ke[1],!0,!0);(!r.touchData.cxtOver||or!==r.touchData.cxtOver)&&(r.touchData.cxtOver&&r.touchData.cxtOver.emit($e("cxtdragout")),r.touchData.cxtOver=or,or&&or.emit($e("cxtdragover")))}else if(le&&O.touches[2]&&ye.boxSelectionEnabled())O.preventDefault(),r.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,r.touchData.selecting||ye.emit($e("boxstart")),r.touchData.selecting=!0,r.touchData.didSelect=!0,_e[4]=1,!_e||_e.length===0||_e[0]===void 0?(_e[0]=(ke[0]+ke[2]+ke[4])/3,_e[1]=(ke[1]+ke[3]+ke[5])/3,_e[2]=(ke[0]+ke[2]+ke[4])/3+1,_e[3]=(ke[1]+ke[3]+ke[5])/3+1):(_e[2]=(ke[0]+ke[2]+ke[4])/3,_e[3]=(ke[1]+ke[3]+ke[5])/3),r.redrawHint("select",!0),r.redraw();else if(le&&O.touches[1]&&!r.touchData.didSelect&&ye.zoomingEnabled()&&ye.panningEnabled()&&ye.userZoomingEnabled()&&ye.userPanningEnabled()){O.preventDefault(),r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);var Kt=r.dragData.touchDragEles;if(Kt){r.redrawHint("drag",!0);for(var vr=0;vr<Kt.length;vr++){var Wn=Kt[vr]._private;Wn.grabbed=!1,Wn.rscratch.inDragLayer=!1}}var Sr=r.touchData.start,Pt=O.touches[0].clientX-ce,Rt=O.touches[0].clientY-de,jt=O.touches[1].clientX-ce,It=O.touches[1].clientY-de,is=ve(Pt,Rt,jt,It),No=is/we;if(D){var Xl=Pt-U,Zl=Rt-oe,Lt=jt-ie,Yl=It-ne,ss=(Xl+Lt)/2,Oo=(Zl+Yl)/2,gn=ye.zoom(),os=gn*No,Ba=ye.pan(),Aa=ge[0]*gn+Ba.x,Vr=ge[1]*gn+Ba.y,Ql={x:-os/gn*(Aa-Ba.x-ss)+Aa,y:-os/gn*(Vr-Ba.y-Oo)+Vr};if(Sr&&Sr.active()){var Kt=r.dragData.touchDragEles;b(Kt),r.redrawHint("drag",!0),r.redrawHint("eles",!0),Sr.unactivate().emit($e("freeon")),Kt.emit($e("free")),r.dragData.didDrag&&(Sr.emit($e("dragfreeon")),Kt.emit($e("dragfree")))}ye.viewport({zoom:os,pan:Ql,cancelOnFailedZoom:!0}),ye.emit($e("pinchzoom")),we=is,U=Pt,oe=Rt,ie=jt,ne=It,r.pinching=!0}if(O.touches[0]){var We=r.projectIntoViewport(O.touches[0].clientX,O.touches[0].clientY);ke[0]=We[0],ke[1]=We[1]}if(O.touches[1]){var We=r.projectIntoViewport(O.touches[1].clientX,O.touches[1].clientY);ke[2]=We[0],ke[3]=We[1]}if(O.touches[2]){var We=r.projectIntoViewport(O.touches[2].clientX,O.touches[2].clientY);ke[4]=We[0],ke[5]=We[1]}}else if(O.touches[0]&&!r.touchData.didSelect){var Nt=r.touchData.start,us=r.touchData.last,or;if(!r.hoverData.draggingEles&&!r.swipePanning&&(or=r.findNearestElement(ke[0],ke[1],!0,!0)),le&&Nt!=null&&O.preventDefault(),le&&Nt!=null&&r.nodeIsDraggable(Nt))if(nt){var Kt=r.dragData.touchDragEles,Mo=!r.dragData.didDrag;Mo&&y(Kt,{inDragLayer:!0}),r.dragData.didDrag=!0;var Da={x:0,y:0};if(Ue(at[0])&&Ue(at[1])&&(Da.x+=at[0],Da.y+=at[1],Mo)){r.redrawHint("eles",!0);var pr=r.touchData.dragDelta;pr&&Ue(pr[0])&&Ue(pr[1])&&(Da.x+=pr[0],Da.y+=pr[1])}r.hoverData.draggingEles=!0,Kt.silentShift(Da).emit($e("position")).emit($e("drag")),r.redrawHint("drag",!0),r.touchData.startPosition[0]==Oe[0]&&r.touchData.startPosition[1]==Oe[1]&&r.redrawHint("eles",!0),r.redraw()}else{var pr=r.touchData.dragDelta=r.touchData.dragDelta||[];pr.length===0?(pr.push(at[0]),pr.push(at[1])):(pr[0]+=at[0],pr[1]+=at[1])}if(a(Nt||or,["touchmove","tapdrag","vmousemove"],O,{x:ke[0],y:ke[1]}),(!Nt||!Nt.grabbed())&&or!=us&&(us&&us.emit($e("tapdragout")),or&&or.emit($e("tapdragover"))),r.touchData.last=or,le)for(var vr=0;vr<ke.length;vr++)ke[vr]&&r.touchData.startPosition[vr]&&nt&&(r.touchData.singleTouchMoved=!0);if(le&&(Nt==null||Nt.pannable())&&ye.panningEnabled()&&ye.userPanningEnabled()){var oi=o(Nt,r.touchData.starts);oi&&(O.preventDefault(),r.data.bgActivePosistion||(r.data.bgActivePosistion=ji(r.touchData.startPosition)),r.swipePanning?(ye.panBy({x:at[0]*Ie,y:at[1]*Ie}),ye.emit($e("dragpan"))):nt&&(r.swipePanning=!0,ye.panBy({x:st*Ie,y:Dt*Ie}),ye.emit($e("dragpan")),Nt&&(Nt.unactivate(),r.redrawHint("select",!0),r.touchData.start=null)));var We=r.projectIntoViewport(O.touches[0].clientX,O.touches[0].clientY);ke[0]=We[0],ke[1]=We[1]}}for(var Ke=0;Ke<ke.length;Ke++)Oe[Ke]=ke[Ke];le&&O.touches.length>0&&!r.hoverData.draggingEles&&!r.swipePanning&&r.data.bgActivePosistion!=null&&(r.data.bgActivePosistion=void 0,r.redrawHint("select",!0),r.redraw())}},!1);var ae;r.registerBinding(e,"touchcancel",ae=function(O){var le=r.touchData.start;r.touchData.capture=!1,le&&le.unactivate()});var he,me,se,Be;if(r.registerBinding(e,"touchend",he=function(O){var le=r.touchData.start,_e=r.touchData.capture;if(_e)O.touches.length===0&&(r.touchData.capture=!1),O.preventDefault();else return;var ye=r.selection;r.swipePanning=!1,r.hoverData.draggingEles=!1;var ke=r.cy,Oe=ke.zoom(),Ie=r.touchData.now,We=r.touchData.earlier;if(O.touches[0]){var $e=r.projectIntoViewport(O.touches[0].clientX,O.touches[0].clientY);Ie[0]=$e[0],Ie[1]=$e[1]}if(O.touches[1]){var $e=r.projectIntoViewport(O.touches[1].clientX,O.touches[1].clientY);Ie[2]=$e[0],Ie[3]=$e[1]}if(O.touches[2]){var $e=r.projectIntoViewport(O.touches[2].clientX,O.touches[2].clientY);Ie[4]=$e[0],Ie[5]=$e[1]}var Ge=function(an){return{originalEvent:O,type:an,position:{x:Ie[0],y:Ie[1]}}};le&&le.unactivate();var nt;if(r.touchData.cxt){if(nt=Ge("cxttapend"),le?le.emit(nt):ke.emit(nt),!r.touchData.cxtDragged){var at=Ge("cxttap");le?le.emit(at):ke.emit(at)}r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxt=!1,r.touchData.start=null,r.redraw();return}if(!O.touches[2]&&ke.boxSelectionEnabled()&&r.touchData.selecting){r.touchData.selecting=!1;var Ke=ke.collection(r.getAllInBox(ye[0],ye[1],ye[2],ye[3]));ye[0]=void 0,ye[1]=void 0,ye[2]=void 0,ye[3]=void 0,ye[4]=0,r.redrawHint("select",!0),ke.emit(Ge("boxend"));var st=function(an){return an.selectable()&&!an.selected()};Ke.emit(Ge("box")).stdFilter(st).select().emit(Ge("boxselect")),Ke.nonempty()&&r.redrawHint("eles",!0),r.redraw()}if(le!=null&&le.unactivate(),O.touches[2])r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);else if(!O.touches[1]){if(!O.touches[0]){if(!O.touches[0]){r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);var it=r.dragData.touchDragEles;if(le!=null){var Dt=le._private.grabbed;b(it),r.redrawHint("drag",!0),r.redrawHint("eles",!0),Dt&&(le.emit(Ge("freeon")),it.emit(Ge("free")),r.dragData.didDrag&&(le.emit(Ge("dragfreeon")),it.emit(Ge("dragfree")))),a(le,["touchend","tapend","vmouseup","tapdragout"],O,{x:Ie[0],y:Ie[1]}),le.unactivate(),r.touchData.start=null}else{var Et=r.findNearestElement(Ie[0],Ie[1],!0,!0);a(Et,["touchend","tapend","vmouseup","tapdragout"],O,{x:Ie[0],y:Ie[1]})}var Vt=r.touchData.startPosition[0]-Ie[0],Pt=Vt*Vt,Rt=r.touchData.startPosition[1]-Ie[1],jt=Rt*Rt,It=Pt+jt,Ur=It*Oe*Oe;r.touchData.singleTouchMoved||(le||ke.$(":selected").unselect(["tapunselect"]),a(le,["tap","vclick"],O,{x:Ie[0],y:Ie[1]}),me=!1,O.timeStamp-Be<=ke.multiClickDebounceTime()?(se&&clearTimeout(se),me=!0,Be=null,a(le,["dbltap","vdblclick"],O,{x:Ie[0],y:Ie[1]})):(se=setTimeout(function(){me||a(le,["onetap","voneclick"],O,{x:Ie[0],y:Ie[1]})},ke.multiClickDebounceTime()),Be=O.timeStamp)),le!=null&&!r.dragData.didDrag&&le._private.selectable&&Ur<r.touchTapThreshold2&&!r.pinching&&(ke.selectionType()==="single"?(ke.$(t).unmerge(le).unselect(["tapunselect"]),le.select(["tapselect"])):le.selected()?le.unselect(["tapunselect"]):le.select(["tapselect"]),r.redrawHint("eles",!0)),r.touchData.singleTouchMoved=!0}}}for(var St=0;St<Ie.length;St++)We[St]=Ie[St];r.dragData.didDrag=!1,O.touches.length===0&&(r.touchData.dragDelta=[],r.touchData.startPosition=[null,null,null,null,null,null],r.touchData.startGPosition=null,r.touchData.didSelect=!1),O.touches.length<2&&(O.touches.length===1&&(r.touchData.startGPosition=[O.touches[0].clientX,O.touches[0].clientY]),r.pinching=!1,r.redrawHint("eles",!0),r.redraw())},!1),typeof TouchEvent>"u"){var De=[],Ae=function(O){return{clientX:O.clientX,clientY:O.clientY,force:1,identifier:O.pointerId,pageX:O.pageX,pageY:O.pageY,radiusX:O.width/2,radiusY:O.height/2,screenX:O.screenX,screenY:O.screenY,target:O.target}},ze=function(O){return{event:O,touch:Ae(O)}},$=function(O){De.push(ze(O))},k=function(O){for(var le=0;le<De.length;le++){var _e=De[le];if(_e.event.pointerId===O.pointerId){De.splice(le,1);return}}},R=function(O){var le=De.filter(function(_e){return _e.event.pointerId===O.pointerId})[0];le.event=O,le.touch=Ae(O)},H=function(O){O.touches=De.map(function(le){return le.touch})},ee=function(O){return O.pointerType==="mouse"||O.pointerType===4};r.registerBinding(r.container,"pointerdown",function(J){ee(J)||(J.preventDefault(),$(J),H(J),Y(J))}),r.registerBinding(r.container,"pointerup",function(J){ee(J)||(k(J),H(J),he(J))}),r.registerBinding(r.container,"pointercancel",function(J){ee(J)||(k(J),H(J),ae(J))}),r.registerBinding(r.container,"pointermove",function(J){ee(J)||(J.preventDefault(),R(J),H(J),K(J))})}};var Vn={};Vn.generatePolygon=function(r,e){return this.nodeShapes[r]={renderer:this,name:r,points:e,draw:function(n,a,i,o,u,c){this.renderer.nodeShapeImpl("polygon",n,a,i,o,u,this.points)},intersectLine:function(n,a,i,o,u,c,f,d){return po(u,c,this.points,n,a,i/2,o/2,f)},checkPoint:function(n,a,i,o,u,c,f,d){return $n(n,a,this.points,c,f,o,u,[0,-1],i)},hasMiterBounds:r!=="rectangle",miterBounds:function(n,a,i,o,u,c){return KE(this.points,n,a,i,o,u)}}};Vn.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,t,n,a,i,o){this.renderer.nodeShapeImpl(this.name,e,t,n,a,i)},intersectLine:function(e,t,n,a,i,o,u,c){return rS(i,o,e,t,n/2+u,a/2+u)},checkPoint:function(e,t,n,a,i,o,u,c){return Ya(e,t,a,i,o,u,n)}}};Vn.generateRoundPolygon=function(r,e){return this.nodeShapes[r]={renderer:this,name:r,points:e,getOrCreateCorners:function(n,a,i,o,u,c,f){if(c[f]!==void 0&&c[f+"-cx"]===n&&c[f+"-cy"]===a)return c[f];c[f]=new Array(e.length/2),c[f+"-cx"]=n,c[f+"-cy"]=a;var d=i/2,h=o/2;u=u==="auto"?R1(i,o):u;for(var g=new Array(e.length/2),p=0;p<e.length/2;p++)g[p]={x:n+d*e[p*2],y:a+h*e[p*2+1]};var m,y,x,b,_=g.length;for(y=g[_-1],m=0;m<_;m++)x=g[m%_],b=g[(m+1)%_],c[f][m]=fv(y,x,b,u),y=x,x=b;return c[f]},draw:function(n,a,i,o,u,c,f){this.renderer.nodeShapeImpl("round-polygon",n,a,i,o,u,this.points,this.getOrCreateCorners(a,i,o,u,c,f,"drawCorners"))},intersectLine:function(n,a,i,o,u,c,f,d,h){return aS(u,c,this.points,n,a,i,o,f,this.getOrCreateCorners(n,a,i,o,d,h,"corners"))},checkPoint:function(n,a,i,o,u,c,f,d,h){return tS(n,a,this.points,c,f,o,u,this.getOrCreateCorners(c,f,o,u,d,h,"corners"))}}};Vn.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:Pr(4,0),draw:function(e,t,n,a,i,o){this.renderer.nodeShapeImpl(this.name,e,t,n,a,i,this.points,o)},intersectLine:function(e,t,n,a,i,o,u,c){return T1(i,o,e,t,n,a,u,c)},checkPoint:function(e,t,n,a,i,o,u,c){var f=a/2,d=i/2;c=c==="auto"?ba(a,i):c,c=Math.min(f,d,c);var h=c*2;return!!($n(e,t,this.points,o,u,a,i-h,[0,-1],n)||$n(e,t,this.points,o,u,a-h,i,[0,-1],n)||Ya(e,t,h,h,o-f+c,u-d+c,n)||Ya(e,t,h,h,o+f-c,u-d+c,n)||Ya(e,t,h,h,o+f-c,u+d-c,n)||Ya(e,t,h,h,o-f+c,u+d-c,n))}}};Vn.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:ev(),points:Pr(4,0),draw:function(e,t,n,a,i,o){this.renderer.nodeShapeImpl(this.name,e,t,n,a,i,null,o)},generateCutTrianglePts:function(e,t,n,a,i){var o=i==="auto"?this.cornerLength:i,u=t/2,c=e/2,f=n-c,d=n+c,h=a-u,g=a+u;return{topLeft:[f,h+o,f+o,h,f+o,h+o],topRight:[d-o,h,d,h+o,d-o,h+o],bottomRight:[d,g-o,d-o,g,d-o,g-o],bottomLeft:[f+o,g,f,g-o,f+o,g-o]}},intersectLine:function(e,t,n,a,i,o,u,c){var f=this.generateCutTrianglePts(n+2*u,a+2*u,e,t,c),d=[].concat.apply([],[f.topLeft.splice(0,4),f.topRight.splice(0,4),f.bottomRight.splice(0,4),f.bottomLeft.splice(0,4)]);return po(i,o,d,e,t)},checkPoint:function(e,t,n,a,i,o,u,c){var f=c==="auto"?this.cornerLength:c;if($n(e,t,this.points,o,u,a,i-2*f,[0,-1],n)||$n(e,t,this.points,o,u,a-2*f,i,[0,-1],n))return!0;var d=this.generateCutTrianglePts(a,i,o,u);return zr(e,t,d.topLeft)||zr(e,t,d.topRight)||zr(e,t,d.bottomRight)||zr(e,t,d.bottomLeft)}}};Vn.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:Pr(4,0),draw:function(e,t,n,a,i,o){this.renderer.nodeShapeImpl(this.name,e,t,n,a,i)},intersectLine:function(e,t,n,a,i,o,u,c){var f=.15,d=.5,h=.85,g=this.generateBarrelBezierPts(n+2*u,a+2*u,e,t),p=function(x){var b=Gi({x:x[0],y:x[1]},{x:x[2],y:x[3]},{x:x[4],y:x[5]},f),_=Gi({x:x[0],y:x[1]},{x:x[2],y:x[3]},{x:x[4],y:x[5]},d),E=Gi({x:x[0],y:x[1]},{x:x[2],y:x[3]},{x:x[4],y:x[5]},h);return[x[0],x[1],b.x,b.y,_.x,_.y,E.x,E.y,x[4],x[5]]},m=[].concat(p(g.topLeft),p(g.topRight),p(g.bottomRight),p(g.bottomLeft));return po(i,o,m,e,t)},generateBarrelBezierPts:function(e,t,n,a){var i=t/2,o=e/2,u=n-o,c=n+o,f=a-i,d=a+i,h=Sh(e,t),g=h.heightOffset,p=h.widthOffset,m=h.ctrlPtOffsetPct*e,y={topLeft:[u,f+g,u+m,f,u+p,f],topRight:[c-p,f,c-m,f,c,f+g],bottomRight:[c,d-g,c-m,d,c-p,d],bottomLeft:[u+p,d,u+m,d,u,d-g]};return y.topLeft.isTop=!0,y.topRight.isTop=!0,y.bottomLeft.isBottom=!0,y.bottomRight.isBottom=!0,y},checkPoint:function(e,t,n,a,i,o,u,c){var f=Sh(a,i),d=f.heightOffset,h=f.widthOffset;if($n(e,t,this.points,o,u,a,i-2*d,[0,-1],n)||$n(e,t,this.points,o,u,a-2*h,i,[0,-1],n))return!0;for(var g=this.generateBarrelBezierPts(a,i,o,u),p=function(z,M,V){var q=V[4],I=V[2],F=V[0],T=V[5],G=V[1],Q=Math.min(q,F),W=Math.max(q,F),X=Math.min(T,G),Z=Math.max(T,G);if(Q<=z&&z<=W&&X<=M&&M<=Z){var te=iS(q,I,F),L=YE(te[0],te[1],te[2],z),U=L.filter(function(oe){return 0<=oe&&oe<=1});if(U.length>0)return U[0]}return null},m=Object.keys(g),y=0;y<m.length;y++){var x=m[y],b=g[x],_=p(e,t,b);if(_!=null){var E=b[5],C=b[3],B=b[1],N=ar(E,C,B,_);if(b.isTop&&N<=t||b.isBottom&&t<=N)return!0}}return!1}}};Vn.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:Pr(4,0),draw:function(e,t,n,a,i,o){this.renderer.nodeShapeImpl(this.name,e,t,n,a,i,this.points,o)},intersectLine:function(e,t,n,a,i,o,u,c){var f=e-(n/2+u),d=t-(a/2+u),h=d,g=e+(n/2+u),p=ga(i,o,e,t,f,d,g,h,!1);return p.length>0?p:T1(i,o,e,t,n,a,u,c)},checkPoint:function(e,t,n,a,i,o,u,c){c=c==="auto"?ba(a,i):c;var f=2*c;if($n(e,t,this.points,o,u,a,i-f,[0,-1],n)||$n(e,t,this.points,o,u,a-f,i,[0,-1],n))return!0;var d=a/2+2*n,h=i/2+2*n,g=[o-d,u-h,o-d,u,o+d,u,o+d,u-h];return!!(zr(e,t,g)||Ya(e,t,f,f,o+a/2-c,u+i/2-c,n)||Ya(e,t,f,f,o-a/2+c,u+i/2-c,n))}}};Vn.registerNodeShapes=function(){var r=this.nodeShapes={},e=this;this.generateEllipse(),this.generatePolygon("triangle",Pr(3,0)),this.generateRoundPolygon("round-triangle",Pr(3,0)),this.generatePolygon("rectangle",Pr(4,0)),r.square=r.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();{var t=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",t),this.generateRoundPolygon("round-diamond",t)}this.generatePolygon("pentagon",Pr(5,0)),this.generateRoundPolygon("round-pentagon",Pr(5,0)),this.generatePolygon("hexagon",Pr(6,0)),this.generateRoundPolygon("round-hexagon",Pr(6,0)),this.generatePolygon("heptagon",Pr(7,0)),this.generateRoundPolygon("round-heptagon",Pr(7,0)),this.generatePolygon("octagon",Pr(8,0)),this.generateRoundPolygon("round-octagon",Pr(8,0));var n=new Array(20);{var a=Eh(5,0),i=Eh(5,Math.PI/5),o=.5*(3-Math.sqrt(5));o*=1.57;for(var u=0;u<i.length/2;u++)i[u*2]*=o,i[u*2+1]*=o;for(var u=0;u<20/4;u++)n[u*4]=a[u*2],n[u*4+1]=a[u*2+1],n[u*4+2]=i[u*2],n[u*4+3]=i[u*2+1]}n=P1(n),this.generatePolygon("star",n),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);{var c=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",c),this.generateRoundPolygon("round-tag",c)}r.makePolygon=function(f){var d=f.join("$"),h="polygon-"+d,g;return(g=this[h])?g:e.generatePolygon(h,f)}};var Io={};Io.timeToRender=function(){return this.redrawTotalTime/this.redrawCount};Io.redraw=function(r){r=r||E1();var e=this;e.averageRedrawTime===void 0&&(e.averageRedrawTime=0),e.lastRedrawTime===void 0&&(e.lastRedrawTime=0),e.lastDrawTime===void 0&&(e.lastDrawTime=0),e.requestedFrame=!0,e.renderOptions=r};Io.beforeRender=function(r,e){if(!this.destroyed){e==null&&At("Priority is not optional for beforeRender");var t=this.beforeRenderCallbacks;t.push({fn:r,priority:e}),t.sort(function(n,a){return a.priority-n.priority})}};var S0=function(e,t,n){for(var a=e.beforeRenderCallbacks,i=0;i<a.length;i++)a[i].fn(t,n)};Io.startRenderLoop=function(){var r=this,e=r.cy;if(!r.renderLoopStarted){r.renderLoopStarted=!0;var t=function(a){if(!r.destroyed){if(!e.batching())if(r.requestedFrame&&!r.skipFrame){S0(r,!0,a);var i=Un();r.render(r.renderOptions);var o=r.lastDrawTime=Un();r.averageRedrawTime===void 0&&(r.averageRedrawTime=o-i),r.redrawCount===void 0&&(r.redrawCount=0),r.redrawCount++,r.redrawTotalTime===void 0&&(r.redrawTotalTime=0);var u=o-i;r.redrawTotalTime+=u,r.lastRedrawTime=u,r.averageRedrawTime=r.averageRedrawTime/2+u/2,r.requestedFrame=!1}else S0(r,!1,a);r.skipFrame=!1,yl(t)}};yl(t)}};var bT=function(e){this.init(e)},Rw=bT,as=Rw.prototype;as.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"];as.init=function(r){var e=this;e.options=r,e.cy=r.cy;var t=e.container=r.cy.container(),n=e.cy.window();if(n){var a=n.document,i=a.head,o="__________cytoscape_stylesheet",u="__________cytoscape_container",c=a.getElementById(o)!=null;if(t.className.indexOf(u)<0&&(t.className=(t.className||"")+" "+u),!c){var f=a.createElement("style");f.id=o,f.textContent="."+u+" { position: relative; }",i.insertBefore(f,i.children[0])}var d=n.getComputedStyle(t),h=d.getPropertyValue("position");h==="static"&&gt("A Cytoscape container has style position:static and so can not use UI extensions properly")}e.selection=[void 0,void 0,void 0,void 0,0],e.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=r.showFps,e.debug=r.debug,e.webgl=r.webgl,e.hideEdgesOnViewport=r.hideEdgesOnViewport,e.textureOnViewport=r.textureOnViewport,e.wheelSensitivity=r.wheelSensitivity,e.motionBlurEnabled=r.motionBlur,e.forcedPixelRatio=Ue(r.pixelRatio)?r.pixelRatio:null,e.motionBlur=r.motionBlur,e.motionBlurOpacity=r.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=r.desktopTapThreshold,e.desktopTapThreshold2=r.desktopTapThreshold*r.desktopTapThreshold,e.touchTapThreshold=r.touchTapThreshold,e.touchTapThreshold2=r.touchTapThreshold*r.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.beforeRenderCallbacks=[],e.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},e.registerNodeShapes(),e.registerArrowShapes(),e.registerCalculationListeners()};as.notify=function(r,e){var t=this,n=t.cy;if(!this.destroyed){if(r==="init"){t.load();return}if(r==="destroy"){t.destroy();return}(r==="add"||r==="remove"||r==="move"&&n.hasCompoundNodes()||r==="load"||r==="zorder"||r==="mount")&&t.invalidateCachedZSortedEles(),r==="viewport"&&t.redrawHint("select",!0),r==="gc"&&t.redrawHint("gc",!0),(r==="load"||r==="resize"||r==="mount")&&(t.invalidateContainerClientCoordsCache(),t.matchCanvasSize(t.container)),t.redrawHint("eles",!0),t.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}};as.destroy=function(){var r=this;r.destroyed=!0,r.cy.stopAnimationLoop();for(var e=0;e<r.bindings.length;e++){var t=r.bindings[e],n=t,a=n.target;(a.off||a.removeEventListener).apply(a,n.args)}if(r.bindings=[],r.beforeRenderCallbacks=[],r.onUpdateEleCalcsFns=[],r.removeObserver&&r.removeObserver.disconnect(),r.styleObserver&&r.styleObserver.disconnect(),r.resizeObserver&&r.resizeObserver.disconnect(),r.labelCalcDiv)try{document.body.removeChild(r.labelCalcDiv)}catch{}};as.isHeadless=function(){return!1};[cv,Tw,Pw,ns,Vn,Io].forEach(function(r){et(as,r)});var hh=1e3/60,Bw={setupDequeueing:function(e){return function(){var n=this,a=this.renderer;if(!n.dequeueingSetup){n.dequeueingSetup=!0;var i=Po(function(){a.redrawHint("eles",!0),a.redrawHint("drag",!0),a.redraw()},e.deqRedrawThreshold),o=function(f,d){var h=Un(),g=a.averageRedrawTime,p=a.lastRedrawTime,m=[],y=a.cy.extent(),x=a.getPixelRatio();for(f||a.flushRenderedStyleQueue();;){var b=Un(),_=b-h,E=b-d;if(p<hh){var C=hh-(f?g:0);if(E>=e.deqFastCost*C)break}else if(f){if(_>=e.deqCost*p||_>=e.deqAvgCost*g)break}else if(E>=e.deqNoDrawCost*hh)break;var B=e.deq(n,x,y);if(B.length>0)for(var N=0;N<B.length;N++)m.push(B[N]);else break}m.length>0&&(e.onDeqd(n,m),!f&&e.shouldRedraw(n,m,x,y)&&i())},u=e.priority||Xh;a.beforeRender(o,u(n))}}}},_T=(function(){function r(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:wl;ka(this,r),this.idsByKey=new Fn,this.keyForId=new Fn,this.cachesByLvl=new Fn,this.lvls=[],this.getKey=e,this.doesEleInvalidateKey=t}return Ca(r,[{key:"getIdsFor",value:function(t){t==null&&At("Can not get id list for null key");var n=this.idsByKey,a=this.idsByKey.get(t);return a||(a=new Ji,n.set(t,a)),a}},{key:"addIdForKey",value:function(t,n){t!=null&&this.getIdsFor(t).add(n)}},{key:"deleteIdForKey",value:function(t,n){t!=null&&this.getIdsFor(t).delete(n)}},{key:"getNumberOfIdsForKey",value:function(t){return t==null?0:this.getIdsFor(t).size}},{key:"updateKeyMappingFor",value:function(t){var n=t.id(),a=this.keyForId.get(n),i=this.getKey(t);this.deleteIdForKey(a,n),this.addIdForKey(i,n),this.keyForId.set(n,i)}},{key:"deleteKeyMappingFor",value:function(t){var n=t.id(),a=this.keyForId.get(n);this.deleteIdForKey(a,n),this.keyForId.delete(n)}},{key:"keyHasChangedFor",value:function(t){var n=t.id(),a=this.keyForId.get(n),i=this.getKey(t);return a!==i}},{key:"isInvalid",value:function(t){return this.keyHasChangedFor(t)||this.doesEleInvalidateKey(t)}},{key:"getCachesAt",value:function(t){var n=this.cachesByLvl,a=this.lvls,i=n.get(t);return i||(i=new Fn,n.set(t,i),a.push(t)),i}},{key:"getCache",value:function(t,n){return this.getCachesAt(n).get(t)}},{key:"get",value:function(t,n){var a=this.getKey(t),i=this.getCache(a,n);return i!=null&&this.updateKeyMappingFor(t),i}},{key:"getForCachedKey",value:function(t,n){var a=this.keyForId.get(t.id()),i=this.getCache(a,n);return i}},{key:"hasCache",value:function(t,n){return this.getCachesAt(n).has(t)}},{key:"has",value:function(t,n){var a=this.getKey(t);return this.hasCache(a,n)}},{key:"setCache",value:function(t,n,a){a.key=t,this.getCachesAt(n).set(t,a)}},{key:"set",value:function(t,n,a){var i=this.getKey(t);this.setCache(i,n,a),this.updateKeyMappingFor(t)}},{key:"deleteCache",value:function(t,n){this.getCachesAt(n).delete(t)}},{key:"delete",value:function(t,n){var a=this.getKey(t);this.deleteCache(a,n)}},{key:"invalidateKey",value:function(t){var n=this;this.lvls.forEach(function(a){return n.deleteCache(t,a)})}},{key:"invalidate",value:function(t){var n=t.id(),a=this.keyForId.get(n);this.deleteKeyMappingFor(t);var i=this.doesEleInvalidateKey(t);return i&&this.invalidateKey(a),i||this.getNumberOfIdsForKey(a)===0}}])})(),k0=25,rl=50,vl=-4,Mh=3,Aw=7.99,ET=8,ST=1024,kT=1024,CT=1024,TT=.2,PT=.8,RT=10,BT=.15,AT=.1,DT=.9,IT=.9,LT=100,NT=1,Wi={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},OT=dr({getKey:null,doesEleInvalidateKey:wl,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:x1,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),io=function(e,t){var n=this;n.renderer=e,n.onDequeues=[];var a=OT(t);et(n,a),n.lookup=new _T(a.getKey,a.doesEleInvalidateKey),n.setupDequeueing()},er=io.prototype;er.reasons=Wi;er.getTextureQueue=function(r){var e=this;return e.eleImgCaches=e.eleImgCaches||{},e.eleImgCaches[r]=e.eleImgCaches[r]||[]};er.getRetiredTextureQueue=function(r){var e=this,t=e.eleImgCaches.retired=e.eleImgCaches.retired||{},n=t[r]=t[r]||[];return n};er.getElementQueue=function(){var r=this,e=r.eleCacheQueue=r.eleCacheQueue||new Ro(function(t,n){return n.reqs-t.reqs});return e};er.getElementKeyToQueue=function(){var r=this,e=r.eleKeyToCacheQueue=r.eleKeyToCacheQueue||{};return e};er.getElement=function(r,e,t,n,a){var i=this,o=this.renderer,u=o.cy.zoom(),c=this.lookup;if(!e||e.w===0||e.h===0||isNaN(e.w)||isNaN(e.h)||!r.visible()||r.removed()||!i.allowEdgeTxrCaching&&r.isEdge()||!i.allowParentTxrCaching&&r.isParent())return null;if(n==null&&(n=Math.ceil(Yh(u*t))),n<vl)n=vl;else if(u>=Aw||n>Mh)return null;var f=Math.pow(2,n),d=e.h*f,h=e.w*f,g=o.eleTextBiggerThanMin(r,f);if(!this.isVisible(r,g))return null;var p=c.get(r,n);if(p&&p.invalidated&&(p.invalidated=!1,p.texture.invalidatedWidth-=p.width),p)return p;var m;if(d<=k0?m=k0:d<=rl?m=rl:m=Math.ceil(d/rl)*rl,d>CT||h>kT)return null;var y=i.getTextureQueue(m),x=y[y.length-2],b=function(){return i.recycleTexture(m,h)||i.addTexture(m,h)};x||(x=y[y.length-1]),x||(x=b()),x.width-x.usedWidth<h&&(x=b());for(var _=function(Q){return Q&&Q.scaledLabelShown===g},E=a&&a===Wi.dequeue,C=a&&a===Wi.highQuality,B=a&&a===Wi.downscale,N,A=n+1;A<=Mh;A++){var z=c.get(r,A);if(z){N=z;break}}var M=N&&N.level===n+1?N:null,V=function(){x.context.drawImage(M.texture.canvas,M.x,0,M.width,M.height,x.usedWidth,0,h,d)};if(x.context.setTransform(1,0,0,1,0,0),x.context.clearRect(x.usedWidth,0,h,m),_(M))V();else if(_(N))if(C){for(var q=N.level;q>n;q--)M=i.getElement(r,e,t,q,Wi.downscale);V()}else return i.queueElement(r,N.level-1),N;else{var I;if(!E&&!C&&!B)for(var F=n-1;F>=vl;F--){var T=c.get(r,F);if(T){I=T;break}}if(_(I))return i.queueElement(r,n),I;x.context.translate(x.usedWidth,0),x.context.scale(f,f),this.drawElement(x.context,r,e,g,!1),x.context.scale(1/f,1/f),x.context.translate(-x.usedWidth,0)}return p={x:x.usedWidth,texture:x,level:n,scale:f,width:h,height:d,scaledLabelShown:g},x.usedWidth+=Math.ceil(h+ET),x.eleCaches.push(p),c.set(r,n,p),i.checkTextureFullness(x),p};er.invalidateElements=function(r){for(var e=0;e<r.length;e++)this.invalidateElement(r[e])};er.invalidateElement=function(r){var e=this,t=e.lookup,n=[],a=t.isInvalid(r);if(a){for(var i=vl;i<=Mh;i++){var o=t.getForCachedKey(r,i);o&&n.push(o)}var u=t.invalidate(r);if(u)for(var c=0;c<n.length;c++){var f=n[c],d=f.texture;d.invalidatedWidth+=f.width,f.invalidated=!0,e.checkTextureUtility(d)}e.removeFromQueue(r)}};er.checkTextureUtility=function(r){r.invalidatedWidth>=TT*r.width&&this.retireTexture(r)};er.checkTextureFullness=function(r){var e=this,t=e.getTextureQueue(r.height);r.usedWidth/r.width>PT&&r.fullnessChecks>=RT?xa(t,r):r.fullnessChecks++};er.retireTexture=function(r){var e=this,t=r.height,n=e.getTextureQueue(t),a=this.lookup;xa(n,r),r.retired=!0;for(var i=r.eleCaches,o=0;o<i.length;o++){var u=i[o];a.deleteCache(u.key,u.level)}Zh(i);var c=e.getRetiredTextureQueue(t);c.push(r)};er.addTexture=function(r,e){var t=this,n=t.getTextureQueue(r),a={};return n.push(a),a.eleCaches=[],a.height=r,a.width=Math.max(ST,e),a.usedWidth=0,a.invalidatedWidth=0,a.fullnessChecks=0,a.canvas=t.renderer.makeOffscreenCanvas(a.width,a.height),a.context=a.canvas.getContext("2d"),a};er.recycleTexture=function(r,e){for(var t=this,n=t.getTextureQueue(r),a=t.getRetiredTextureQueue(r),i=0;i<a.length;i++){var o=a[i];if(o.width>=e)return o.retired=!1,o.usedWidth=0,o.invalidatedWidth=0,o.fullnessChecks=0,Zh(o.eleCaches),o.context.setTransform(1,0,0,1,0,0),o.context.clearRect(0,0,o.width,o.height),xa(a,o),n.push(o),o}};er.queueElement=function(r,e){var t=this,n=t.getElementQueue(),a=t.getElementKeyToQueue(),i=this.getKey(r),o=a[i];if(o)o.level=Math.max(o.level,e),o.eles.merge(r),o.reqs++,n.updateItem(o);else{var u={eles:r.spawn().merge(r),level:e,reqs:1,key:i};n.push(u),a[i]=u}};er.dequeue=function(r){for(var e=this,t=e.getElementQueue(),n=e.getElementKeyToQueue(),a=[],i=e.lookup,o=0;o<NT&&t.size()>0;o++){var u=t.pop(),c=u.key,f=u.eles[0],d=i.hasCache(f,u.level);if(n[c]=null,d)continue;a.push(u);var h=e.getBoundingBox(f);e.getElement(f,h,r,u.level,Wi.dequeue)}return a};er.removeFromQueue=function(r){var e=this,t=e.getElementQueue(),n=e.getElementKeyToQueue(),a=this.getKey(r),i=n[a];i!=null&&(i.eles.length===1?(i.reqs=Kh,t.updateItem(i),t.pop(),n[a]=null):i.eles.unmerge(r))};er.onDequeue=function(r){this.onDequeues.push(r)};er.offDequeue=function(r){xa(this.onDequeues,r)};er.setupDequeueing=Bw.setupDequeueing({deqRedrawThreshold:LT,deqCost:BT,deqAvgCost:AT,deqNoDrawCost:DT,deqFastCost:IT,deq:function(e,t,n){return e.dequeue(t,n)},onDeqd:function(e,t){for(var n=0;n<e.onDequeues.length;n++){var a=e.onDequeues[n];a(t)}},shouldRedraw:function(e,t,n,a){for(var i=0;i<t.length;i++)for(var o=t[i].eles,u=0;u<o.length;u++){var c=o[u].boundingBox();if(Jh(c,a))return!0}return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});var MT=1,uo=-4,Tl=2,zT=3.99,FT=50,UT=50,$T=.15,VT=.1,jT=.9,qT=.9,WT=1,C0=250,GT=4e3*4e3,T0=32767,HT=!0,Dw=function(e){var t=this,n=t.renderer=e,a=n.cy;t.layersByLevel={},t.firstGet=!0,t.lastInvalidationTime=Un()-2*C0,t.skipping=!1,t.eleTxrDeqs=a.collection(),t.scheduleElementRefinement=Po(function(){t.refineElementTextures(t.eleTxrDeqs),t.eleTxrDeqs.unmerge(t.eleTxrDeqs)},UT),n.beforeRender(function(o,u){u-t.lastInvalidationTime<=C0?t.skipping=!0:t.skipping=!1},n.beforeRenderPriorities.lyrTxrSkip);var i=function(u,c){return c.reqs-u.reqs};t.layersQueue=new Ro(i),t.setupDequeueing()},hr=Dw.prototype,P0=0,KT=Math.pow(2,53)-1;hr.makeLayer=function(r,e){var t=Math.pow(2,e),n=Math.ceil(r.w*t),a=Math.ceil(r.h*t),i=this.renderer.makeOffscreenCanvas(n,a),o={id:P0=++P0%KT,bb:r,level:e,width:n,height:a,canvas:i,context:i.getContext("2d"),eles:[],elesQueue:[],reqs:0},u=o.context,c=-o.bb.x1,f=-o.bb.y1;return u.scale(t,t),u.translate(c,f),o};hr.getLayers=function(r,e,t){var n=this,a=n.renderer,i=a.cy,o=i.zoom(),u=n.firstGet;if(n.firstGet=!1,t==null){if(t=Math.ceil(Yh(o*e)),t<uo)t=uo;else if(o>=zT||t>Tl)return null}n.validateLayersElesOrdering(t,r);var c=n.layersByLevel,f=Math.pow(2,t),d=c[t]=c[t]||[],h,g=n.levelIsComplete(t,r),p,m=function(){var V=function(G){if(n.validateLayersElesOrdering(G,r),n.levelIsComplete(G,r))return p=c[G],!0},q=function(G){if(!p)for(var Q=t+G;uo<=Q&&Q<=Tl&&!V(Q);Q+=G);};q(1),q(-1);for(var I=d.length-1;I>=0;I--){var F=d[I];F.invalid&&xa(d,F)}};if(!g)m();else return d;var y=function(){if(!h){h=Rr();for(var V=0;V<r.length;V++)WE(h,r[V].boundingBox())}return h},x=function(V){V=V||{};var q=V.after;y();var I=Math.ceil(h.w*f),F=Math.ceil(h.h*f);if(I>T0||F>T0)return null;var T=I*F;if(T>GT)return null;var G=n.makeLayer(h,t);if(q!=null){var Q=d.indexOf(q)+1;d.splice(Q,0,G)}else(V.insert===void 0||V.insert)&&d.unshift(G);return G};if(n.skipping&&!u)return null;for(var b=null,_=r.length/MT,E=!u,C=0;C<r.length;C++){var B=r[C],N=B._private.rscratch,A=N.imgLayerCaches=N.imgLayerCaches||{},z=A[t];if(z){b=z;continue}if((!b||b.eles.length>=_||!C1(b.bb,B.boundingBox()))&&(b=x({insert:!0,after:b}),!b))return null;p||E?n.queueLayer(b,B):n.drawEleInLayer(b,B,t,e),b.eles.push(B),A[t]=b}return p||(E?null:d)};hr.getEleLevelForLayerLevel=function(r,e){return r};hr.drawEleInLayer=function(r,e,t,n){var a=this,i=this.renderer,o=r.context,u=e.boundingBox();u.w===0||u.h===0||!e.visible()||(t=a.getEleLevelForLayerLevel(t,n),i.setImgSmoothing(o,!1),i.drawCachedElement(o,e,null,null,t,HT),i.setImgSmoothing(o,!0))};hr.levelIsComplete=function(r,e){var t=this,n=t.layersByLevel[r];if(!n||n.length===0)return!1;for(var a=0,i=0;i<n.length;i++){var o=n[i];if(o.reqs>0||o.invalid)return!1;a+=o.eles.length}return a===e.length};hr.validateLayersElesOrdering=function(r,e){var t=this.layersByLevel[r];if(t)for(var n=0;n<t.length;n++){for(var a=t[n],i=-1,o=0;o<e.length;o++)if(a.eles[0]===e[o]){i=o;break}if(i<0){this.invalidateLayer(a);continue}for(var u=i,o=0;o<a.eles.length;o++)if(a.eles[o]!==e[u+o]){this.invalidateLayer(a);break}}};hr.updateElementsInLayers=function(r,e){for(var t=this,n=So(r[0]),a=0;a<r.length;a++)for(var i=n?null:r[a],o=n?r[a]:r[a].ele,u=o._private.rscratch,c=u.imgLayerCaches=u.imgLayerCaches||{},f=uo;f<=Tl;f++){var d=c[f];d&&(i&&t.getEleLevelForLayerLevel(d.level)!==i.level||e(d,o,i))}};hr.haveLayers=function(){for(var r=this,e=!1,t=uo;t<=Tl;t++){var n=r.layersByLevel[t];if(n&&n.length>0){e=!0;break}}return e};hr.invalidateElements=function(r){var e=this;r.length!==0&&(e.lastInvalidationTime=Un(),!(r.length===0||!e.haveLayers())&&e.updateElementsInLayers(r,function(n,a,i){e.invalidateLayer(n)}))};hr.invalidateLayer=function(r){if(this.lastInvalidationTime=Un(),!r.invalid){var e=r.level,t=r.eles,n=this.layersByLevel[e];xa(n,r),r.elesQueue=[],r.invalid=!0,r.replacement&&(r.replacement.invalid=!0);for(var a=0;a<t.length;a++){var i=t[a]._private.rscratch.imgLayerCaches;i&&(i[e]=null)}}};hr.refineElementTextures=function(r){var e=this;e.updateElementsInLayers(r,function(n,a,i){var o=n.replacement;if(o||(o=n.replacement=e.makeLayer(n.bb,n.level),o.replaces=n,o.eles=n.eles),!o.reqs)for(var u=0;u<o.eles.length;u++)e.queueLayer(o,o.eles[u])})};hr.enqueueElementRefinement=function(r){this.eleTxrDeqs.merge(r),this.scheduleElementRefinement()};hr.queueLayer=function(r,e){var t=this,n=t.layersQueue,a=r.elesQueue,i=a.hasId=a.hasId||{};if(!r.replacement){if(e){if(i[e.id()])return;a.push(e),i[e.id()]=!0}r.reqs?(r.reqs++,n.updateItem(r)):(r.reqs=1,n.push(r))}};hr.dequeue=function(r){for(var e=this,t=e.layersQueue,n=[],a=0;a<WT&&t.size()!==0;){var i=t.peek();if(i.replacement){t.pop();continue}if(i.replaces&&i!==i.replaces.replacement){t.pop();continue}if(i.invalid){t.pop();continue}var o=i.elesQueue.shift();o&&(e.drawEleInLayer(i,o,i.level,r),a++),n.length===0&&n.push(!0),i.elesQueue.length===0&&(t.pop(),i.reqs=0,i.replaces&&e.applyLayerReplacement(i),e.requestRedraw())}return n};hr.applyLayerReplacement=function(r){var e=this,t=e.layersByLevel[r.level],n=r.replaces,a=t.indexOf(n);if(!(a<0||n.invalid)){t[a]=r;for(var i=0;i<r.eles.length;i++){var o=r.eles[i]._private,u=o.imgLayerCaches=o.imgLayerCaches||{};u&&(u[r.level]=r)}e.requestRedraw()}};hr.requestRedraw=Po(function(){var r=this.renderer;r.redrawHint("eles",!0),r.redrawHint("drag",!0),r.redraw()},100);hr.setupDequeueing=Bw.setupDequeueing({deqRedrawThreshold:FT,deqCost:$T,deqAvgCost:VT,deqNoDrawCost:jT,deqFastCost:qT,deq:function(e,t){return e.dequeue(t)},onDeqd:Xh,shouldRedraw:x1,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});var Iw={},R0;function XT(r,e){for(var t=0;t<e.length;t++){var n=e[t];r.lineTo(n.x,n.y)}}function ZT(r,e,t){for(var n,a=0;a<e.length;a++){var i=e[a];a===0&&(n=i),r.lineTo(i.x,i.y)}r.quadraticCurveTo(t.x,t.y,n.x,n.y)}function B0(r,e,t){r.beginPath&&r.beginPath();for(var n=e,a=0;a<n.length;a++){var i=n[a];r.lineTo(i.x,i.y)}var o=t,u=t[0];r.moveTo(u.x,u.y);for(var a=1;a<o.length;a++){var i=o[a];r.lineTo(i.x,i.y)}r.closePath&&r.closePath()}function YT(r,e,t,n,a){r.beginPath&&r.beginPath(),r.arc(t,n,a,0,Math.PI*2,!1);var i=e,o=i[0];r.moveTo(o.x,o.y);for(var u=0;u<i.length;u++){var c=i[u];r.lineTo(c.x,c.y)}r.closePath&&r.closePath()}function QT(r,e,t,n){r.arc(e,t,n,0,Math.PI*2,!1)}Iw.arrowShapeImpl=function(r){return(R0||(R0={polygon:XT,"triangle-backcurve":ZT,"triangle-tee":B0,"circle-triangle":YT,"triangle-cross":B0,circle:QT}))[r]};var Pn={};Pn.drawElement=function(r,e,t,n,a,i){var o=this;e.isNode()?o.drawNode(r,e,t,n,a,i):o.drawEdge(r,e,t,n,a,i)};Pn.drawElementOverlay=function(r,e){var t=this;e.isNode()?t.drawNodeOverlay(r,e):t.drawEdgeOverlay(r,e)};Pn.drawElementUnderlay=function(r,e){var t=this;e.isNode()?t.drawNodeUnderlay(r,e):t.drawEdgeUnderlay(r,e)};Pn.drawCachedElementPortion=function(r,e,t,n,a,i,o,u){var c=this,f=t.getBoundingBox(e);if(!(f.w===0||f.h===0)){var d=t.getElement(e,f,n,a,i);if(d!=null){var h=u(c,e);if(h===0)return;var g=o(c,e),p=f.x1,m=f.y1,y=f.w,x=f.h,b,_,E,C,B;if(g!==0){var N=t.getRotationPoint(e);E=N.x,C=N.y,r.translate(E,C),r.rotate(g),B=c.getImgSmoothing(r),B||c.setImgSmoothing(r,!0);var A=t.getRotationOffset(e);b=A.x,_=A.y}else b=p,_=m;var z;h!==1&&(z=r.globalAlpha,r.globalAlpha=z*h),r.drawImage(d.texture.canvas,d.x,0,d.width,d.height,b,_,y,x),h!==1&&(r.globalAlpha=z),g!==0&&(r.rotate(-g),r.translate(-E,-C),B||c.setImgSmoothing(r,!1))}else t.drawElement(r,e)}};var JT=function(){return 0},eP=function(e,t){return e.getTextAngle(t,null)},tP=function(e,t){return e.getTextAngle(t,"source")},rP=function(e,t){return e.getTextAngle(t,"target")},nP=function(e,t){return t.effectiveOpacity()},vh=function(e,t){return t.pstyle("text-opacity").pfValue*t.effectiveOpacity()};Pn.drawCachedElement=function(r,e,t,n,a,i){var o=this,u=o.data,c=u.eleTxrCache,f=u.lblTxrCache,d=u.slbTxrCache,h=u.tlbTxrCache,g=e.boundingBox(),p=i===!0?c.reasons.highQuality:null;if(!(g.w===0||g.h===0||!e.visible())&&(!n||Jh(g,n))){var m=e.isEdge(),y=e.element()._private.rscratch.badLine;o.drawElementUnderlay(r,e),o.drawCachedElementPortion(r,e,c,t,a,p,JT,nP),(!m||!y)&&o.drawCachedElementPortion(r,e,f,t,a,p,eP,vh),m&&!y&&(o.drawCachedElementPortion(r,e,d,t,a,p,tP,vh),o.drawCachedElementPortion(r,e,h,t,a,p,rP,vh)),o.drawElementOverlay(r,e)}};Pn.drawElements=function(r,e){for(var t=this,n=0;n<e.length;n++){var a=e[n];t.drawElement(r,a)}};Pn.drawCachedElements=function(r,e,t,n){for(var a=this,i=0;i<e.length;i++){var o=e[i];a.drawCachedElement(r,o,t,n)}};Pn.drawCachedNodes=function(r,e,t,n){for(var a=this,i=0;i<e.length;i++){var o=e[i];o.isNode()&&a.drawCachedElement(r,o,t,n)}};Pn.drawLayeredElements=function(r,e,t,n){var a=this,i=a.data.lyrTxrCache.getLayers(e,t);if(i)for(var o=0;o<i.length;o++){var u=i[o],c=u.bb;c.w===0||c.h===0||r.drawImage(u.canvas,c.x1,c.y1,c.w,c.h)}else a.drawCachedElements(r,e,t,n)};var jn={};jn.drawEdge=function(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this,u=e._private.rscratch;if(!(i&&!e.visible())&&!(u.badLine||u.allpts==null||isNaN(u.allpts[0]))){var c;t&&(c=t,r.translate(-c.x1,-c.y1));var f=i?e.pstyle("opacity").value:1,d=i?e.pstyle("line-opacity").value:1,h=e.pstyle("curve-style").value,g=e.pstyle("line-style").value,p=e.pstyle("width").pfValue,m=e.pstyle("line-cap").value,y=e.pstyle("line-outline-width").value,x=e.pstyle("line-outline-color").value,b=f*d,_=f*d,E=function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:b;h==="straight-triangle"?(o.eleStrokeStyle(r,e,G),o.drawEdgeTrianglePath(e,r,u.allpts)):(r.lineWidth=p,r.lineCap=m,o.eleStrokeStyle(r,e,G),o.drawEdgePath(e,r,u.allpts,g),r.lineCap="butt")},C=function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:b;if(r.lineWidth=p+y,r.lineCap=m,y>0)o.colorStrokeStyle(r,x[0],x[1],x[2],G);else{r.lineCap="butt";return}h==="straight-triangle"?o.drawEdgeTrianglePath(e,r,u.allpts):(o.drawEdgePath(e,r,u.allpts,g),r.lineCap="butt")},B=function(){a&&o.drawEdgeOverlay(r,e)},N=function(){a&&o.drawEdgeUnderlay(r,e)},A=function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:_;o.drawArrowheads(r,e,G)},z=function(){o.drawElementText(r,e,null,n)};r.lineJoin="round";var M=e.pstyle("ghost").value==="yes";if(M){var V=e.pstyle("ghost-offset-x").pfValue,q=e.pstyle("ghost-offset-y").pfValue,I=e.pstyle("ghost-opacity").value,F=b*I;r.translate(V,q),E(F),A(F),r.translate(-V,-q)}else C();N(),E(),A(),B(),z(),t&&r.translate(c.x1,c.y1)}};var Lw=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(t,n){if(n.visible()){var a=n.pstyle("".concat(e,"-opacity")).value;if(a!==0){var i=this,o=i.usePaths(),u=n._private.rscratch,c=n.pstyle("".concat(e,"-padding")).pfValue,f=2*c,d=n.pstyle("".concat(e,"-color")).value;t.lineWidth=f,u.edgeType==="self"&&!o?t.lineCap="butt":t.lineCap="round",i.colorStrokeStyle(t,d[0],d[1],d[2],a),i.drawEdgePath(n,t,u.allpts,"solid")}}}};jn.drawEdgeOverlay=Lw("overlay");jn.drawEdgeUnderlay=Lw("underlay");jn.drawEdgePath=function(r,e,t,n){var a=r._private.rscratch,i=e,o,u=!1,c=this.usePaths(),f=r.pstyle("line-dash-pattern").pfValue,d=r.pstyle("line-dash-offset").pfValue;if(c){var h=t.join("$"),g=a.pathCacheKey&&a.pathCacheKey===h;g?(o=e=a.pathCache,u=!0):(o=e=new Path2D,a.pathCacheKey=h,a.pathCache=o)}if(i.setLineDash)switch(n){case"dotted":i.setLineDash([1,1]);break;case"dashed":i.setLineDash(f),i.lineDashOffset=d;break;case"solid":i.setLineDash([]);break}if(!u&&!a.badLine)switch(e.beginPath&&e.beginPath(),e.moveTo(t[0],t[1]),a.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var p=2;p+3<t.length;p+=4)e.quadraticCurveTo(t[p],t[p+1],t[p+2],t[p+3]);break;case"straight":case"haystack":for(var m=2;m+1<t.length;m+=2)e.lineTo(t[m],t[m+1]);break;case"segments":if(a.isRound){var y=Fr(a.roundCorners),x;try{for(y.s();!(x=y.n()).done;){var b=x.value;_w(e,b)}}catch(E){y.e(E)}finally{y.f()}e.lineTo(t[t.length-2],t[t.length-1])}else for(var _=2;_+1<t.length;_+=2)e.lineTo(t[_],t[_+1]);break}e=i,c?e.stroke(o):e.stroke(),e.setLineDash&&e.setLineDash([])};jn.drawEdgeTrianglePath=function(r,e,t){e.fillStyle=e.strokeStyle;for(var n=r.pstyle("width").pfValue,a=0;a+1<t.length;a+=2){var i=[t[a+2]-t[a],t[a+3]-t[a+1]],o=Math.sqrt(i[0]*i[0]+i[1]*i[1]),u=[i[1]/o,-i[0]/o],c=[u[0]*n/2,u[1]*n/2];e.beginPath(),e.moveTo(t[a]-c[0],t[a+1]-c[1]),e.lineTo(t[a]+c[0],t[a+1]+c[1]),e.lineTo(t[a+2],t[a+3]),e.closePath(),e.fill()}};jn.drawArrowheads=function(r,e,t){var n=e._private.rscratch,a=n.edgeType==="haystack";a||this.drawArrowhead(r,e,"source",n.arrowStartX,n.arrowStartY,n.srcArrowAngle,t),this.drawArrowhead(r,e,"mid-target",n.midX,n.midY,n.midtgtArrowAngle,t),this.drawArrowhead(r,e,"mid-source",n.midX,n.midY,n.midsrcArrowAngle,t),a||this.drawArrowhead(r,e,"target",n.arrowEndX,n.arrowEndY,n.tgtArrowAngle,t)};jn.drawArrowhead=function(r,e,t,n,a,i,o){if(!(isNaN(n)||n==null||isNaN(a)||a==null||isNaN(i)||i==null)){var u=this,c=e.pstyle(t+"-arrow-shape").value;if(c!=="none"){var f=e.pstyle(t+"-arrow-fill").value==="hollow"?"both":"filled",d=e.pstyle(t+"-arrow-fill").value,h=e.pstyle("width").pfValue,g=e.pstyle(t+"-arrow-width"),p=g.value==="match-line"?h:g.pfValue;g.units==="%"&&(p*=h);var m=e.pstyle("opacity").value;o===void 0&&(o=m);var y=r.globalCompositeOperation;(o!==1||d==="hollow")&&(r.globalCompositeOperation="destination-out",u.colorFillStyle(r,255,255,255,1),u.colorStrokeStyle(r,255,255,255,1),u.drawArrowShape(e,r,f,h,c,p,n,a,i),r.globalCompositeOperation=y);var x=e.pstyle(t+"-arrow-color").value;u.colorFillStyle(r,x[0],x[1],x[2],o),u.colorStrokeStyle(r,x[0],x[1],x[2],o),u.drawArrowShape(e,r,d,h,c,p,n,a,i)}}};jn.drawArrowShape=function(r,e,t,n,a,i,o,u,c){var f=this,d=this.usePaths()&&a!=="triangle-cross",h=!1,g,p=e,m={x:o,y:u},y=r.pstyle("arrow-scale").value,x=this.getArrowWidth(n,y),b=f.arrowShapes[a];if(d){var _=f.arrowPathCache=f.arrowPathCache||[],E=Qa(a),C=_[E];C!=null?(g=e=C,h=!0):(g=e=new Path2D,_[E]=g)}h||(e.beginPath&&e.beginPath(),d?b.draw(e,1,0,{x:0,y:0},1):b.draw(e,x,c,m,n),e.closePath&&e.closePath()),e=p,d&&(e.translate(o,u),e.rotate(c),e.scale(x,x)),(t==="filled"||t==="both")&&(d?e.fill(g):e.fill()),(t==="hollow"||t==="both")&&(e.lineWidth=i/(d?x:1),e.lineJoin="miter",d?e.stroke(g):e.stroke()),d&&(e.scale(1/x,1/x),e.rotate(-c),e.translate(-o,-u))};var hv={};hv.safeDrawImage=function(r,e,t,n,a,i,o,u,c,f){if(!(a<=0||i<=0||c<=0||f<=0))try{r.drawImage(e,t,n,a,i,o,u,c,f)}catch(d){gt(d)}};hv.drawInscribedImage=function(r,e,t,n,a){var i=this,o=t.position(),u=o.x,c=o.y,f=t.cy().style(),d=f.getIndexedStyle.bind(f),h=d(t,"background-fit","value",n),g=d(t,"background-repeat","value",n),p=t.width(),m=t.height(),y=t.padding()*2,x=p+(d(t,"background-width-relative-to","value",n)==="inner"?0:y),b=m+(d(t,"background-height-relative-to","value",n)==="inner"?0:y),_=t._private.rscratch,E=d(t,"background-clip","value",n),C=E==="node",B=d(t,"background-image-opacity","value",n)*a,N=d(t,"background-image-smoothing","value",n),A=t.pstyle("corner-radius").value;A!=="auto"&&(A=t.pstyle("corner-radius").pfValue);var z=e.width||e.cachedW,M=e.height||e.cachedH;(z==null||M==null)&&(document.body.appendChild(e),z=e.cachedW=e.width||e.offsetWidth,M=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var V=z,q=M;if(d(t,"background-width","value",n)!=="auto"&&(d(t,"background-width","units",n)==="%"?V=d(t,"background-width","pfValue",n)*x:V=d(t,"background-width","pfValue",n)),d(t,"background-height","value",n)!=="auto"&&(d(t,"background-height","units",n)==="%"?q=d(t,"background-height","pfValue",n)*b:q=d(t,"background-height","pfValue",n)),!(V===0||q===0)){if(h==="contain"){var I=Math.min(x/V,b/q);V*=I,q*=I}else if(h==="cover"){var I=Math.max(x/V,b/q);V*=I,q*=I}var F=u-x/2,T=d(t,"background-position-x","units",n),G=d(t,"background-position-x","pfValue",n);T==="%"?F+=(x-V)*G:F+=G;var Q=d(t,"background-offset-x","units",n),W=d(t,"background-offset-x","pfValue",n);Q==="%"?F+=(x-V)*W:F+=W;var X=c-b/2,Z=d(t,"background-position-y","units",n),te=d(t,"background-position-y","pfValue",n);Z==="%"?X+=(b-q)*te:X+=te;var L=d(t,"background-offset-y","units",n),U=d(t,"background-offset-y","pfValue",n);L==="%"?X+=(b-q)*U:X+=U,_.pathCache&&(F-=u,X-=c,u=0,c=0);var oe=r.globalAlpha;r.globalAlpha=B;var ie=i.getImgSmoothing(r),ne=!1;if(N==="no"&&ie?(i.setImgSmoothing(r,!1),ne=!0):N==="yes"&&!ie&&(i.setImgSmoothing(r,!0),ne=!0),g==="no-repeat")C&&(r.save(),_.pathCache?r.clip(_.pathCache):(i.nodeShapes[i.getNodeShape(t)].draw(r,u,c,x,b,A,_),r.clip())),i.safeDrawImage(r,e,0,0,z,M,F,X,V,q),C&&r.restore();else{var we=r.createPattern(e,g);r.fillStyle=we,i.nodeShapes[i.getNodeShape(t)].draw(r,u,c,x,b,A,_),r.translate(F,X),r.fill(),r.translate(-F,-X)}r.globalAlpha=oe,ne&&i.setImgSmoothing(r,ie)}};var ii={};ii.eleTextBiggerThanMin=function(r,e){if(!e){var t=r.cy().zoom(),n=this.getPixelRatio(),a=Math.ceil(Yh(t*n));e=Math.pow(2,a)}var i=r.pstyle("font-size").pfValue*e,o=r.pstyle("min-zoomed-font-size").pfValue;return!(i<o)};ii.drawElementText=function(r,e,t,n,a){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this;if(n==null){if(i&&!o.eleTextBiggerThanMin(e))return}else if(n===!1)return;if(e.isNode()){var u=e.pstyle("label");if(!u||!u.value)return;var c=o.getLabelJustification(e);r.textAlign=c,r.textBaseline="bottom"}else{var f=e.element()._private.rscratch.badLine,d=e.pstyle("label"),h=e.pstyle("source-label"),g=e.pstyle("target-label");if(f||(!d||!d.value)&&(!h||!h.value)&&(!g||!g.value))return;r.textAlign="center",r.textBaseline="bottom"}var p=!t,m;t&&(m=t,r.translate(-m.x1,-m.y1)),a==null?(o.drawText(r,e,null,p,i),e.isEdge()&&(o.drawText(r,e,"source",p,i),o.drawText(r,e,"target",p,i))):o.drawText(r,e,a,p,i),t&&r.translate(m.x1,m.y1)};ii.getFontCache=function(r){var e;this.fontCaches=this.fontCaches||[];for(var t=0;t<this.fontCaches.length;t++)if(e=this.fontCaches[t],e.context===r)return e;return e={context:r},this.fontCaches.push(e),e};ii.setupTextStyle=function(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,n=e.pstyle("font-style").strValue,a=e.pstyle("font-size").pfValue+"px",i=e.pstyle("font-family").strValue,o=e.pstyle("font-weight").strValue,u=t?e.effectiveOpacity()*e.pstyle("text-opacity").value:1,c=e.pstyle("text-outline-opacity").value*u,f=e.pstyle("color").value,d=e.pstyle("text-outline-color").value;r.font=n+" "+o+" "+a+" "+i,r.lineJoin="round",this.colorFillStyle(r,f[0],f[1],f[2],u),this.colorStrokeStyle(r,d[0],d[1],d[2],c)};function aP(r,e,t,n,a){var i=Math.min(n,a),o=i/2,u=e+n/2,c=t+a/2;r.beginPath(),r.arc(u,c,o,0,Math.PI*2),r.closePath()}function A0(r,e,t,n,a){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:5,o=Math.min(i,n/2,a/2);r.beginPath(),r.moveTo(e+o,t),r.lineTo(e+n-o,t),r.quadraticCurveTo(e+n,t,e+n,t+o),r.lineTo(e+n,t+a-o),r.quadraticCurveTo(e+n,t+a,e+n-o,t+a),r.lineTo(e+o,t+a),r.quadraticCurveTo(e,t+a,e,t+a-o),r.lineTo(e,t+o),r.quadraticCurveTo(e,t,e+o,t),r.closePath()}ii.getTextAngle=function(r,e){var t,n=r._private,a=n.rscratch,i=e?e+"-":"",o=r.pstyle(i+"text-rotation");if(o.strValue==="autorotate"){var u=Mr(a,"labelAngle",e);t=r.isEdge()?u:0}else o.strValue==="none"?t=0:t=o.pfValue;return t};ii.drawText=function(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=e._private,o=i.rscratch,u=a?e.effectiveOpacity():1;if(!(a&&(u===0||e.pstyle("text-opacity").value===0))){t==="main"&&(t=null);var c=Mr(o,"labelX",t),f=Mr(o,"labelY",t),d,h,g=this.getLabelText(e,t);if(g!=null&&g!==""&&!isNaN(c)&&!isNaN(f)){this.setupTextStyle(r,e,a);var p=t?t+"-":"",m=Mr(o,"labelWidth",t),y=Mr(o,"labelHeight",t),x=e.pstyle(p+"text-margin-x").pfValue,b=e.pstyle(p+"text-margin-y").pfValue,_=e.isEdge(),E=e.pstyle("text-halign").value,C=e.pstyle("text-valign").value;_&&(E="center",C="center"),c+=x,f+=b;var B;switch(n?B=this.getTextAngle(e,t):B=0,B!==0&&(d=c,h=f,r.translate(d,h),r.rotate(B),c=0,f=0),C){case"top":break;case"center":f+=y/2;break;case"bottom":f+=y;break}var N=e.pstyle("text-background-opacity").value,A=e.pstyle("text-border-opacity").value,z=e.pstyle("text-border-width").pfValue,M=e.pstyle("text-background-padding").pfValue,V=e.pstyle("text-background-shape").strValue,q=V==="round-rectangle"||V==="roundrectangle",I=V==="circle",F=2;if(N>0||z>0&&A>0){var T=r.fillStyle,G=r.strokeStyle,Q=r.lineWidth,W=e.pstyle("text-background-color").value,X=e.pstyle("text-border-color").value,Z=e.pstyle("text-border-style").value,te=N>0,L=z>0&&A>0,U=c-M;switch(E){case"left":U-=m;break;case"center":U-=m/2;break}var oe=f-y-M,ie=m+2*M,ne=y+2*M;if(te&&(r.fillStyle="rgba(".concat(W[0],",").concat(W[1],",").concat(W[2],",").concat(N*u,")")),L&&(r.strokeStyle="rgba(".concat(X[0],",").concat(X[1],",").concat(X[2],",").concat(A*u,")"),r.lineWidth=z,r.setLineDash))switch(Z){case"dotted":r.setLineDash([1,1]);break;case"dashed":r.setLineDash([4,2]);break;case"double":r.lineWidth=z/4,r.setLineDash([]);break;case"solid":default:r.setLineDash([]);break}if(q?(r.beginPath(),A0(r,U,oe,ie,ne,F)):I?(r.beginPath(),aP(r,U,oe,ie,ne)):(r.beginPath(),r.rect(U,oe,ie,ne)),te&&r.fill(),L&&r.stroke(),L&&Z==="double"){var we=z/2;r.beginPath(),q?A0(r,U+we,oe+we,ie-2*we,ne-2*we,F):r.rect(U+we,oe+we,ie-2*we,ne-2*we),r.stroke()}r.fillStyle=T,r.strokeStyle=G,r.lineWidth=Q,r.setLineDash&&r.setLineDash([])}var Pe=2*e.pstyle("text-outline-width").pfValue;if(Pe>0&&(r.lineWidth=Pe),e.pstyle("text-wrap").value==="wrap"){var Ce=Mr(o,"labelWrapCachedLines",t),ge=Mr(o,"labelLineHeight",t),ce=m/2,de=this.getLabelJustification(e);switch(de==="auto"||(E==="left"?de==="left"?c+=-m:de==="center"&&(c+=-ce):E==="center"?de==="left"?c+=-ce:de==="right"&&(c+=ce):E==="right"&&(de==="center"?c+=ce:de==="right"&&(c+=m))),C){case"top":f-=(Ce.length-1)*ge;break;case"center":case"bottom":f-=(Ce.length-1)*ge;break}for(var be=0;be<Ce.length;be++)Pe>0&&r.strokeText(Ce[be],c,f),r.fillText(Ce[be],c,f),f+=ge}else Pe>0&&r.strokeText(g,c,f),r.fillText(g,c,f);B!==0&&(r.rotate(-B),r.translate(-d,-h))}}};var Pa={};Pa.drawNode=function(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this,u,c,f=e._private,d=f.rscratch,h=e.position();if(!(!Ue(h.x)||!Ue(h.y))&&!(i&&!e.visible())){var g=i?e.effectiveOpacity():1,p=o.usePaths(),m,y=!1,x=e.padding();u=e.width()+2*x,c=e.height()+2*x;var b;t&&(b=t,r.translate(-b.x1,-b.y1));for(var _=e.pstyle("background-image"),E=_.value,C=new Array(E.length),B=new Array(E.length),N=0,A=0;A<E.length;A++){var z=E[A],M=C[A]=z!=null&&z!=="none";if(M){var V=e.cy().style().getIndexedStyle(e,"background-image-crossorigin","value",A);N++,B[A]=o.getCachedImage(z,V,function(){f.backgroundTimestamp=Date.now(),e.emitAndNotify("background")})}}var q=e.pstyle("background-blacken").value,I=e.pstyle("border-width").pfValue,F=e.pstyle("background-opacity").value*g,T=e.pstyle("border-color").value,G=e.pstyle("border-style").value,Q=e.pstyle("border-join").value,W=e.pstyle("border-cap").value,X=e.pstyle("border-position").value,Z=e.pstyle("border-dash-pattern").pfValue,te=e.pstyle("border-dash-offset").pfValue,L=e.pstyle("border-opacity").value*g,U=e.pstyle("outline-width").pfValue,oe=e.pstyle("outline-color").value,ie=e.pstyle("outline-style").value,ne=e.pstyle("outline-opacity").value*g,we=e.pstyle("outline-offset").value,Pe=e.pstyle("corner-radius").value;Pe!=="auto"&&(Pe=e.pstyle("corner-radius").pfValue);var Ce=function(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:F;o.eleFillStyle(r,e,ee)},ge=function(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:L;o.colorStrokeStyle(r,T[0],T[1],T[2],ee)},ce=function(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ne;o.colorStrokeStyle(r,oe[0],oe[1],oe[2],ee)},de=function(ee,J,O,le){var _e=o.nodePathCache=o.nodePathCache||[],ye=w1(O==="polygon"?O+","+le.join(","):O,""+J,""+ee,""+Pe),ke=_e[ye],Oe,Ie=!1;return ke!=null?(Oe=ke,Ie=!0,d.pathCache=Oe):(Oe=new Path2D,_e[ye]=d.pathCache=Oe),{path:Oe,cacheHit:Ie}},be=e.pstyle("shape").strValue,Re=e.pstyle("shape-polygon-points").pfValue;if(p){r.translate(h.x,h.y);var D=de(u,c,be,Re);m=D.path,y=D.cacheHit}var ve=function(){if(!y){var ee=h;p&&(ee={x:0,y:0}),o.nodeShapes[o.getNodeShape(e)].draw(m||r,ee.x,ee.y,u,c,Pe,d)}p?r.fill(m):r.fill()},pe=function(){for(var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:g,J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,O=f.backgrounding,le=0,_e=0;_e<B.length;_e++){var ye=e.cy().style().getIndexedStyle(e,"background-image-containment","value",_e);if(J&&ye==="over"||!J&&ye==="inside"){le++;continue}C[_e]&&B[_e].complete&&!B[_e].error&&(le++,o.drawInscribedImage(r,B[_e],e,_e,ee))}f.backgrounding=le!==N,O!==f.backgrounding&&e.updateStyle(!1)},Y=function(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g;o.hasPie(e)&&(o.drawPie(r,e,J),ee&&(p||o.nodeShapes[o.getNodeShape(e)].draw(r,h.x,h.y,u,c,Pe,d)))},K=function(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g;o.hasStripe(e)&&(r.save(),p?r.clip(d.pathCache):(o.nodeShapes[o.getNodeShape(e)].draw(r,h.x,h.y,u,c,Pe,d),r.clip()),o.drawStripe(r,e,J),r.restore(),ee&&(p||o.nodeShapes[o.getNodeShape(e)].draw(r,h.x,h.y,u,c,Pe,d)))},ae=function(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:g,J=(q>0?q:-q)*ee,O=q>0?0:255;q!==0&&(o.colorFillStyle(r,O,O,O,J),p?r.fill(m):r.fill())},he=function(){if(I>0){if(r.lineWidth=I,r.lineCap=W,r.lineJoin=Q,r.setLineDash)switch(G){case"dotted":r.setLineDash([1,1]);break;case"dashed":r.setLineDash(Z),r.lineDashOffset=te;break;case"solid":case"double":r.setLineDash([]);break}if(X!=="center"){if(r.save(),r.lineWidth*=2,X==="inside")p?r.clip(m):r.clip();else{var ee=new Path2D;ee.rect(-u/2-I,-c/2-I,u+2*I,c+2*I),ee.addPath(m),r.clip(ee,"evenodd")}p?r.stroke(m):r.stroke(),r.restore()}else p?r.stroke(m):r.stroke();if(G==="double"){r.lineWidth=I/3;var J=r.globalCompositeOperation;r.globalCompositeOperation="destination-out",p?r.stroke(m):r.stroke(),r.globalCompositeOperation=J}r.setLineDash&&r.setLineDash([])}},me=function(){if(U>0){if(r.lineWidth=U,r.lineCap="butt",r.setLineDash)switch(ie){case"dotted":r.setLineDash([1,1]);break;case"dashed":r.setLineDash([4,2]);break;case"solid":case"double":r.setLineDash([]);break}var ee=h;p&&(ee={x:0,y:0});var J=o.getNodeShape(e),O=I;X==="inside"&&(O=0),X==="outside"&&(O*=2);var le=(u+O+(U+we))/u,_e=(c+O+(U+we))/c,ye=u*le,ke=c*_e,Oe=o.nodeShapes[J].points,Ie;if(p){var We=de(ye,ke,J,Oe);Ie=We.path}if(J==="ellipse")o.drawEllipsePath(Ie||r,ee.x,ee.y,ye,ke);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(J)){var $e=0,Ge=0,nt=0;J==="round-diamond"?$e=(O+we+U)*1.4:J==="round-heptagon"?($e=(O+we+U)*1.075,nt=-(O/2+we+U)/35):J==="round-hexagon"?$e=(O+we+U)*1.12:J==="round-pentagon"?($e=(O+we+U)*1.13,nt=-(O/2+we+U)/15):J==="round-tag"?($e=(O+we+U)*1.12,Ge=(O/2+U+we)*.07):J==="round-triangle"&&($e=(O+we+U)*(Math.PI/2),nt=-(O+we/2+U)/Math.PI),$e!==0&&(le=(u+$e)/u,ye=u*le,["round-hexagon","round-tag"].includes(J)||(_e=(c+$e)/c,ke=c*_e)),Pe=Pe==="auto"?R1(ye,ke):Pe;for(var at=ye/2,Ke=ke/2,st=Pe+(O+U+we)/2,it=new Array(Oe.length/2),Dt=new Array(Oe.length/2),Et=0;Et<Oe.length/2;Et++)it[Et]={x:ee.x+Ge+at*Oe[Et*2],y:ee.y+nt+Ke*Oe[Et*2+1]};var Vt,Pt,Rt,jt,It=it.length;for(Pt=it[It-1],Vt=0;Vt<It;Vt++)Rt=it[Vt%It],jt=it[(Vt+1)%It],Dt[Vt]=fv(Pt,Rt,jt,st),Pt=Rt,Rt=jt;o.drawRoundPolygonPath(Ie||r,ee.x+Ge,ee.y+nt,u*le,c*_e,Oe,Dt)}else if(["roundrectangle","round-rectangle"].includes(J))Pe=Pe==="auto"?ba(ye,ke):Pe,o.drawRoundRectanglePath(Ie||r,ee.x,ee.y,ye,ke,Pe+(O+U+we)/2);else if(["cutrectangle","cut-rectangle"].includes(J))Pe=Pe==="auto"?ev():Pe,o.drawCutRectanglePath(Ie||r,ee.x,ee.y,ye,ke,null,Pe+(O+U+we)/4);else if(["bottomroundrectangle","bottom-round-rectangle"].includes(J))Pe=Pe==="auto"?ba(ye,ke):Pe,o.drawBottomRoundRectanglePath(Ie||r,ee.x,ee.y,ye,ke,Pe+(O+U+we)/2);else if(J==="barrel")o.drawBarrelPath(Ie||r,ee.x,ee.y,ye,ke);else if(J.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(J)){var Ur=(O+U+we)/u;Oe=xl(bl(Oe,Ur)),o.drawPolygonPath(Ie||r,ee.x,ee.y,u,c,Oe)}else{var St=(O+U+we)/u;Oe=xl(bl(Oe,-St)),o.drawPolygonPath(Ie||r,ee.x,ee.y,u,c,Oe)}if(p?r.stroke(Ie):r.stroke(),ie==="double"){r.lineWidth=O/3;var $r=r.globalCompositeOperation;r.globalCompositeOperation="destination-out",p?r.stroke(Ie):r.stroke(),r.globalCompositeOperation=$r}r.setLineDash&&r.setLineDash([])}},se=function(){a&&o.drawNodeOverlay(r,e,h,u,c)},Be=function(){a&&o.drawNodeUnderlay(r,e,h,u,c)},De=function(){o.drawElementText(r,e,null,n)},Ae=e.pstyle("ghost").value==="yes";if(Ae){var ze=e.pstyle("ghost-offset-x").pfValue,$=e.pstyle("ghost-offset-y").pfValue,k=e.pstyle("ghost-opacity").value,R=k*g;r.translate(ze,$),ce(),me(),Ce(k*F),ve(),pe(R,!0),ge(k*L),he(),Y(q!==0||I!==0),K(q!==0||I!==0),pe(R,!1),ae(R),r.translate(-ze,-$)}p&&r.translate(-h.x,-h.y),Be(),p&&r.translate(h.x,h.y),ce(),me(),Ce(),ve(),pe(g,!0),ge(),he(),Y(q!==0||I!==0),K(q!==0||I!==0),pe(g,!1),ae(),p&&r.translate(-h.x,-h.y),De(),se(),t&&r.translate(b.x1,b.y1)}};var Nw=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(t,n,a,i,o){var u=this;if(n.visible()){var c=n.pstyle("".concat(e,"-padding")).pfValue,f=n.pstyle("".concat(e,"-opacity")).value,d=n.pstyle("".concat(e,"-color")).value,h=n.pstyle("".concat(e,"-shape")).value,g=n.pstyle("".concat(e,"-corner-radius")).value;if(f>0){if(a=a||n.position(),i==null||o==null){var p=n.padding();i=n.width()+2*p,o=n.height()+2*p}u.colorFillStyle(t,d[0],d[1],d[2],f),u.nodeShapes[h].draw(t,a.x,a.y,i+c*2,o+c*2,g),t.fill()}}}};Pa.drawNodeOverlay=Nw("overlay");Pa.drawNodeUnderlay=Nw("underlay");Pa.hasPie=function(r){return r=r[0],r._private.hasPie};Pa.hasStripe=function(r){return r=r[0],r._private.hasStripe};Pa.drawPie=function(r,e,t,n){e=e[0],n=n||e.position();var a=e.cy().style(),i=e.pstyle("pie-size"),o=e.pstyle("pie-hole"),u=e.pstyle("pie-start-angle").pfValue,c=n.x,f=n.y,d=e.width(),h=e.height(),g=Math.min(d,h)/2,p,m=0,y=this.usePaths();if(y&&(c=0,f=0),i.units==="%"?g=g*i.pfValue:i.pfValue!==void 0&&(g=i.pfValue/2),o.units==="%"?p=g*o.pfValue:o.pfValue!==void 0&&(p=o.pfValue/2),!(p>=g))for(var x=1;x<=a.pieBackgroundN;x++){var b=e.pstyle("pie-"+x+"-background-size").value,_=e.pstyle("pie-"+x+"-background-color").value,E=e.pstyle("pie-"+x+"-background-opacity").value*t,C=b/100;C+m>1&&(C=1-m);var B=1.5*Math.PI+2*Math.PI*m;B+=u;var N=2*Math.PI*C,A=B+N;b===0||m>=1||m+C>1||(p===0?(r.beginPath(),r.moveTo(c,f),r.arc(c,f,g,B,A),r.closePath()):(r.beginPath(),r.arc(c,f,g,B,A),r.arc(c,f,p,A,B,!0),r.closePath()),this.colorFillStyle(r,_[0],_[1],_[2],E),r.fill(),m+=C)}};Pa.drawStripe=function(r,e,t,n){e=e[0],n=n||e.position();var a=e.cy().style(),i=n.x,o=n.y,u=e.width(),c=e.height(),f=0,d=this.usePaths();r.save();var h=e.pstyle("stripe-direction").value,g=e.pstyle("stripe-size");switch(h){case"vertical":break;case"righward":r.rotate(-Math.PI/2);break}var p=u,m=c;g.units==="%"?(p=p*g.pfValue,m=m*g.pfValue):g.pfValue!==void 0&&(p=g.pfValue,m=g.pfValue),d&&(i=0,o=0),o-=p/2,i-=m/2;for(var y=1;y<=a.stripeBackgroundN;y++){var x=e.pstyle("stripe-"+y+"-background-size").value,b=e.pstyle("stripe-"+y+"-background-color").value,_=e.pstyle("stripe-"+y+"-background-opacity").value*t,E=x/100;E+f>1&&(E=1-f),!(x===0||f>=1||f+E>1)&&(r.beginPath(),r.rect(i,o+m*f,p,m*E),r.closePath(),this.colorFillStyle(r,b[0],b[1],b[2],_),r.fill(),f+=E)}r.restore()};var Br={},iP=100;Br.getPixelRatio=function(){var r=this.data.contexts[0];if(this.forcedPixelRatio!=null)return this.forcedPixelRatio;var e=this.cy.window(),t=r.backingStorePixelRatio||r.webkitBackingStorePixelRatio||r.mozBackingStorePixelRatio||r.msBackingStorePixelRatio||r.oBackingStorePixelRatio||r.backingStorePixelRatio||1;return(e.devicePixelRatio||1)/t};Br.paintCache=function(r){for(var e=this.paintCaches=this.paintCaches||[],t=!0,n,a=0;a<e.length;a++)if(n=e[a],n.context===r){t=!1;break}return t&&(n={context:r},e.push(n)),n};Br.createGradientStyleFor=function(r,e,t,n,a){var i,o=this.usePaths(),u=t.pstyle(e+"-gradient-stop-colors").value,c=t.pstyle(e+"-gradient-stop-positions").pfValue;if(n==="radial-gradient")if(t.isEdge()){var f=t.sourceEndpoint(),d=t.targetEndpoint(),h=t.midpoint(),g=Ja(f,h),p=Ja(d,h);i=r.createRadialGradient(h.x,h.y,0,h.x,h.y,Math.max(g,p))}else{var m=o?{x:0,y:0}:t.position(),y=t.paddedWidth(),x=t.paddedHeight();i=r.createRadialGradient(m.x,m.y,0,m.x,m.y,Math.max(y,x))}else if(t.isEdge()){var b=t.sourceEndpoint(),_=t.targetEndpoint();i=r.createLinearGradient(b.x,b.y,_.x,_.y)}else{var E=o?{x:0,y:0}:t.position(),C=t.paddedWidth(),B=t.paddedHeight(),N=C/2,A=B/2,z=t.pstyle("background-gradient-direction").value;switch(z){case"to-bottom":i=r.createLinearGradient(E.x,E.y-A,E.x,E.y+A);break;case"to-top":i=r.createLinearGradient(E.x,E.y+A,E.x,E.y-A);break;case"to-left":i=r.createLinearGradient(E.x+N,E.y,E.x-N,E.y);break;case"to-right":i=r.createLinearGradient(E.x-N,E.y,E.x+N,E.y);break;case"to-bottom-right":case"to-right-bottom":i=r.createLinearGradient(E.x-N,E.y-A,E.x+N,E.y+A);break;case"to-top-right":case"to-right-top":i=r.createLinearGradient(E.x-N,E.y+A,E.x+N,E.y-A);break;case"to-bottom-left":case"to-left-bottom":i=r.createLinearGradient(E.x+N,E.y-A,E.x-N,E.y+A);break;case"to-top-left":case"to-left-top":i=r.createLinearGradient(E.x+N,E.y+A,E.x-N,E.y-A);break}}if(!i)return null;for(var M=c.length===u.length,V=u.length,q=0;q<V;q++)i.addColorStop(M?c[q]:q/(V-1),"rgba("+u[q][0]+","+u[q][1]+","+u[q][2]+","+a+")");return i};Br.gradientFillStyle=function(r,e,t,n){var a=this.createGradientStyleFor(r,"background",e,t,n);if(!a)return null;r.fillStyle=a};Br.colorFillStyle=function(r,e,t,n,a){r.fillStyle="rgba("+e+","+t+","+n+","+a+")"};Br.eleFillStyle=function(r,e,t){var n=e.pstyle("background-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientFillStyle(r,e,n,t);else{var a=e.pstyle("background-color").value;this.colorFillStyle(r,a[0],a[1],a[2],t)}};Br.gradientStrokeStyle=function(r,e,t,n){var a=this.createGradientStyleFor(r,"line",e,t,n);if(!a)return null;r.strokeStyle=a};Br.colorStrokeStyle=function(r,e,t,n,a){r.strokeStyle="rgba("+e+","+t+","+n+","+a+")"};Br.eleStrokeStyle=function(r,e,t){var n=e.pstyle("line-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientStrokeStyle(r,e,n,t);else{var a=e.pstyle("line-color").value;this.colorStrokeStyle(r,a[0],a[1],a[2],t)}};Br.matchCanvasSize=function(r){var e=this,t=e.data,n=e.findContainerClientCoords(),a=n[2],i=n[3],o=e.getPixelRatio(),u=e.motionBlurPxRatio;(r===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]||r===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG])&&(o=u);var c=a*o,f=i*o,d;if(!(c===e.canvasWidth&&f===e.canvasHeight)){e.fontCaches=null;var h=t.canvasContainer;h.style.width=a+"px",h.style.height=i+"px";for(var g=0;g<e.CANVAS_LAYERS;g++)d=t.canvases[g],d.width=c,d.height=f,d.style.width=a+"px",d.style.height=i+"px";for(var g=0;g<e.BUFFER_COUNT;g++)d=t.bufferCanvases[g],d.width=c,d.height=f,d.style.width=a+"px",d.style.height=i+"px";e.textureMult=1,o<=1&&(d=t.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,d.width=c*e.textureMult,d.height=f*e.textureMult),e.canvasWidth=c,e.canvasHeight=f,e.pixelRatio=o}};Br.renderTo=function(r,e,t,n){this.render({forcedContext:r,forcedZoom:e,forcedPan:t,drawAllLayers:!0,forcedPxRatio:n})};Br.clearCanvas=function(){var r=this,e=r.data;function t(n){n.clearRect(0,0,r.canvasWidth,r.canvasHeight)}t(e.contexts[r.NODE]),t(e.contexts[r.DRAG])};Br.render=function(r){var e=this;r=r||E1();var t=e.cy,n=r.forcedContext,a=r.drawAllLayers,i=r.drawOnlyNodeLayer,o=r.forcedZoom,u=r.forcedPan,c=r.forcedPxRatio===void 0?this.getPixelRatio():r.forcedPxRatio,f=e.data,d=f.canvasNeedsRedraw,h=e.textureOnViewport&&!n&&(e.pinching||e.hoverData.dragging||e.swipePanning||e.data.wheelZooming),g=r.motionBlur!==void 0?r.motionBlur:e.motionBlur,p=e.motionBlurPxRatio,m=t.hasCompoundNodes(),y=e.hoverData.draggingEles,x=!!(e.hoverData.selecting||e.touchData.selecting);g=g&&!n&&e.motionBlurEnabled&&!x;var b=g;n||(e.prevPxRatio!==c&&(e.invalidateContainerClientCoordsCache(),e.matchCanvasSize(e.container),e.redrawHint("eles",!0),e.redrawHint("drag",!0)),e.prevPxRatio=c),!n&&e.motionBlurTimeout&&clearTimeout(e.motionBlurTimeout),g&&(e.mbFrames==null&&(e.mbFrames=0),e.mbFrames++,e.mbFrames<3&&(b=!1),e.mbFrames>e.minMbLowQualFrames&&(e.motionBlurPxRatio=e.mbPxRBlurry)),e.clearingMotionBlur&&(e.motionBlurPxRatio=1),e.textureDrawLastFrame&&!h&&(d[e.NODE]=!0,d[e.SELECT_BOX]=!0);var _=t.style(),E=t.zoom(),C=o!==void 0?o:E,B=t.pan(),N={x:B.x,y:B.y},A={zoom:E,pan:{x:B.x,y:B.y}},z=e.prevViewport,M=z===void 0||A.zoom!==z.zoom||A.pan.x!==z.pan.x||A.pan.y!==z.pan.y;!M&&!(y&&!m)&&(e.motionBlurPxRatio=1),u&&(N=u),C*=c,N.x*=c,N.y*=c;var V=e.getCachedZSortedEles();function q(ge,ce,de,be,Re){var D=ge.globalCompositeOperation;ge.globalCompositeOperation="destination-out",e.colorFillStyle(ge,255,255,255,e.motionBlurTransparency),ge.fillRect(ce,de,be,Re),ge.globalCompositeOperation=D}function I(ge,ce){var de,be,Re,D;!e.clearingMotionBlur&&(ge===f.bufferContexts[e.MOTIONBLUR_BUFFER_NODE]||ge===f.bufferContexts[e.MOTIONBLUR_BUFFER_DRAG])?(de={x:B.x*p,y:B.y*p},be=E*p,Re=e.canvasWidth*p,D=e.canvasHeight*p):(de=N,be=C,Re=e.canvasWidth,D=e.canvasHeight),ge.setTransform(1,0,0,1,0,0),ce==="motionBlur"?q(ge,0,0,Re,D):!n&&(ce===void 0||ce)&&ge.clearRect(0,0,Re,D),a||(ge.translate(de.x,de.y),ge.scale(be,be)),u&&ge.translate(u.x,u.y),o&&ge.scale(o,o)}if(h||(e.textureDrawLastFrame=!1),h){if(e.textureDrawLastFrame=!0,!e.textureCache){e.textureCache={},e.textureCache.bb=t.mutableElements().boundingBox(),e.textureCache.texture=e.data.bufferCanvases[e.TEXTURE_BUFFER];var F=e.data.bufferContexts[e.TEXTURE_BUFFER];F.setTransform(1,0,0,1,0,0),F.clearRect(0,0,e.canvasWidth*e.textureMult,e.canvasHeight*e.textureMult),e.render({forcedContext:F,drawOnlyNodeLayer:!0,forcedPxRatio:c*e.textureMult});var A=e.textureCache.viewport={zoom:t.zoom(),pan:t.pan(),width:e.canvasWidth,height:e.canvasHeight};A.mpan={x:(0-A.pan.x)/A.zoom,y:(0-A.pan.y)/A.zoom}}d[e.DRAG]=!1,d[e.NODE]=!1;var T=f.contexts[e.NODE],G=e.textureCache.texture,A=e.textureCache.viewport;T.setTransform(1,0,0,1,0,0),g?q(T,0,0,A.width,A.height):T.clearRect(0,0,A.width,A.height);var Q=_.core("outside-texture-bg-color").value,W=_.core("outside-texture-bg-opacity").value;e.colorFillStyle(T,Q[0],Q[1],Q[2],W),T.fillRect(0,0,A.width,A.height);var E=t.zoom();I(T,!1),T.clearRect(A.mpan.x,A.mpan.y,A.width/A.zoom/c,A.height/A.zoom/c),T.drawImage(G,A.mpan.x,A.mpan.y,A.width/A.zoom/c,A.height/A.zoom/c)}else e.textureOnViewport&&!n&&(e.textureCache=null);var X=t.extent(),Z=e.pinching||e.hoverData.dragging||e.swipePanning||e.data.wheelZooming||e.hoverData.draggingEles||e.cy.animated(),te=e.hideEdgesOnViewport&&Z,L=[];if(L[e.NODE]=!d[e.NODE]&&g&&!e.clearedForMotionBlur[e.NODE]||e.clearingMotionBlur,L[e.NODE]&&(e.clearedForMotionBlur[e.NODE]=!0),L[e.DRAG]=!d[e.DRAG]&&g&&!e.clearedForMotionBlur[e.DRAG]||e.clearingMotionBlur,L[e.DRAG]&&(e.clearedForMotionBlur[e.DRAG]=!0),d[e.NODE]||a||i||L[e.NODE]){var U=g&&!L[e.NODE]&&p!==1,T=n||(U?e.data.bufferContexts[e.MOTIONBLUR_BUFFER_NODE]:f.contexts[e.NODE]),oe=g&&!U?"motionBlur":void 0;I(T,oe),te?e.drawCachedNodes(T,V.nondrag,c,X):e.drawLayeredElements(T,V.nondrag,c,X),e.debug&&e.drawDebugPoints(T,V.nondrag),!a&&!g&&(d[e.NODE]=!1)}if(!i&&(d[e.DRAG]||a||L[e.DRAG])){var U=g&&!L[e.DRAG]&&p!==1,T=n||(U?e.data.bufferContexts[e.MOTIONBLUR_BUFFER_DRAG]:f.contexts[e.DRAG]);I(T,g&&!U?"motionBlur":void 0),te?e.drawCachedNodes(T,V.drag,c,X):e.drawCachedElements(T,V.drag,c,X),e.debug&&e.drawDebugPoints(T,V.drag),!a&&!g&&(d[e.DRAG]=!1)}if(this.drawSelectionRectangle(r,I),g&&p!==1){var ie=f.contexts[e.NODE],ne=e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE],we=f.contexts[e.DRAG],Pe=e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG],Ce=function(ce,de,be){ce.setTransform(1,0,0,1,0,0),be||!b?ce.clearRect(0,0,e.canvasWidth,e.canvasHeight):q(ce,0,0,e.canvasWidth,e.canvasHeight);var Re=p;ce.drawImage(de,0,0,e.canvasWidth*Re,e.canvasHeight*Re,0,0,e.canvasWidth,e.canvasHeight)};(d[e.NODE]||L[e.NODE])&&(Ce(ie,ne,L[e.NODE]),d[e.NODE]=!1),(d[e.DRAG]||L[e.DRAG])&&(Ce(we,Pe,L[e.DRAG]),d[e.DRAG]=!1)}e.prevViewport=A,e.clearingMotionBlur&&(e.clearingMotionBlur=!1,e.motionBlurCleared=!0,e.motionBlur=!0),g&&(e.motionBlurTimeout=setTimeout(function(){e.motionBlurTimeout=null,e.clearedForMotionBlur[e.NODE]=!1,e.clearedForMotionBlur[e.DRAG]=!1,e.motionBlur=!1,e.clearingMotionBlur=!h,e.mbFrames=0,d[e.NODE]=!0,d[e.DRAG]=!0,e.redraw()},iP)),n||t.emit("render")};var Js;Br.drawSelectionRectangle=function(r,e){var t=this,n=t.cy,a=t.data,i=n.style(),o=r.drawOnlyNodeLayer,u=r.drawAllLayers,c=a.canvasNeedsRedraw,f=r.forcedContext;if(t.showFps||!o&&c[t.SELECT_BOX]&&!u){var d=f||a.contexts[t.SELECT_BOX];if(e(d),t.selection[4]==1&&(t.hoverData.selecting||t.touchData.selecting)){var h=t.cy.zoom(),g=i.core("selection-box-border-width").value/h;d.lineWidth=g,d.fillStyle="rgba("+i.core("selection-box-color").value[0]+","+i.core("selection-box-color").value[1]+","+i.core("selection-box-color").value[2]+","+i.core("selection-box-opacity").value+")",d.fillRect(t.selection[0],t.selection[1],t.selection[2]-t.selection[0],t.selection[3]-t.selection[1]),g>0&&(d.strokeStyle="rgba("+i.core("selection-box-border-color").value[0]+","+i.core("selection-box-border-color").value[1]+","+i.core("selection-box-border-color").value[2]+","+i.core("selection-box-opacity").value+")",d.strokeRect(t.selection[0],t.selection[1],t.selection[2]-t.selection[0],t.selection[3]-t.selection[1]))}if(a.bgActivePosistion&&!t.hoverData.selecting){var h=t.cy.zoom(),p=a.bgActivePosistion;d.fillStyle="rgba("+i.core("active-bg-color").value[0]+","+i.core("active-bg-color").value[1]+","+i.core("active-bg-color").value[2]+","+i.core("active-bg-opacity").value+")",d.beginPath(),d.arc(p.x,p.y,i.core("active-bg-size").pfValue/h,0,2*Math.PI),d.fill()}var m=t.lastRedrawTime;if(t.showFps&&m){m=Math.round(m);var y=Math.round(1e3/m),x="1 frame = "+m+" ms = "+y+" fps";if(d.setTransform(1,0,0,1,0,0),d.fillStyle="rgba(255, 0, 0, 0.75)",d.strokeStyle="rgba(255, 0, 0, 0.75)",d.font="30px Arial",!Js){var b=d.measureText(x);Js=b.actualBoundingBoxAscent}d.fillText(x,0,Js);var _=60;d.strokeRect(0,Js+10,250,20),d.fillRect(0,Js+10,250*Math.min(y/_,1),20)}u||(c[t.SELECT_BOX]=!1)}};function D0(r,e,t){var n=r.createShader(e);if(r.shaderSource(n,t),r.compileShader(n),!r.getShaderParameter(n,r.COMPILE_STATUS))throw new Error(r.getShaderInfoLog(n));return n}function sP(r,e,t){var n=D0(r,r.VERTEX_SHADER,e),a=D0(r,r.FRAGMENT_SHADER,t),i=r.createProgram();if(r.attachShader(i,n),r.attachShader(i,a),r.linkProgram(i),!r.getProgramParameter(i,r.LINK_STATUS))throw new Error("Could not initialize shaders");return i}function oP(r,e,t){t===void 0&&(t=e);var n=r.makeOffscreenCanvas(e,t),a=n.context=n.getContext("2d");return n.clear=function(){return a.clearRect(0,0,n.width,n.height)},n.clear(),n}function vv(r){var e=r.pixelRatio,t=r.cy.zoom(),n=r.cy.pan();return{zoom:t*e,pan:{x:n.x*e,y:n.y*e}}}function uP(r){var e=r.pixelRatio,t=r.cy.zoom();return t*e}function lP(r,e,t,n,a){var i=n*t+e.x,o=a*t+e.y;return o=Math.round(r.canvasHeight-o),[i,o]}function cP(r){return r.pstyle("background-fill").value!=="solid"||r.pstyle("background-image").strValue!=="none"?!1:r.pstyle("border-width").value===0||r.pstyle("border-opacity").value===0?!0:r.pstyle("border-style").value==="solid"}function fP(r,e){if(r.length!==e.length)return!1;for(var t=0;t<r.length;t++)if(r[t]!==e[t])return!1;return!0}function Ga(r,e,t){var n=r[0]/255,a=r[1]/255,i=r[2]/255,o=e,u=t||new Array(4);return u[0]=n*o,u[1]=a*o,u[2]=i*o,u[3]=o,u}function zi(r,e){var t=e||new Array(4);return t[0]=(r>>0&255)/255,t[1]=(r>>8&255)/255,t[2]=(r>>16&255)/255,t[3]=(r>>24&255)/255,t}function dP(r){return r[0]+(r[1]<<8)+(r[2]<<16)+(r[3]<<24)}function hP(r,e){var t=r.createTexture();return t.buffer=function(n){r.bindTexture(r.TEXTURE_2D,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR_MIPMAP_NEAREST),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,n),r.generateMipmap(r.TEXTURE_2D),r.bindTexture(r.TEXTURE_2D,null)},t.deleteTexture=function(){r.deleteTexture(t)},t}function Ow(r,e){switch(e){case"float":return[1,r.FLOAT,4];case"vec2":return[2,r.FLOAT,4];case"vec3":return[3,r.FLOAT,4];case"vec4":return[4,r.FLOAT,4];case"int":return[1,r.INT,4];case"ivec2":return[2,r.INT,4]}}function Mw(r,e,t){switch(e){case r.FLOAT:return new Float32Array(t);case r.INT:return new Int32Array(t)}}function vP(r,e,t,n,a,i){switch(e){case r.FLOAT:return new Float32Array(t.buffer,i*n,a);case r.INT:return new Int32Array(t.buffer,i*n,a)}}function pP(r,e,t,n){var a=Ow(r,e),i=Ht(a,2),o=i[0],u=i[1],c=Mw(r,u,n),f=r.createBuffer();return r.bindBuffer(r.ARRAY_BUFFER,f),r.bufferData(r.ARRAY_BUFFER,c,r.STATIC_DRAW),u===r.FLOAT?r.vertexAttribPointer(t,o,u,!1,0,0):u===r.INT&&r.vertexAttribIPointer(t,o,u,0,0),r.enableVertexAttribArray(t),r.bindBuffer(r.ARRAY_BUFFER,null),f}function _n(r,e,t,n){var a=Ow(r,t),i=Ht(a,3),o=i[0],u=i[1],c=i[2],f=Mw(r,u,e*o),d=o*c,h=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,h),r.bufferData(r.ARRAY_BUFFER,e*d,r.DYNAMIC_DRAW),r.enableVertexAttribArray(n),u===r.FLOAT?r.vertexAttribPointer(n,o,u,!1,d,0):u===r.INT&&r.vertexAttribIPointer(n,o,u,d,0),r.vertexAttribDivisor(n,1),r.bindBuffer(r.ARRAY_BUFFER,null);for(var g=new Array(e),p=0;p<e;p++)g[p]=vP(r,u,f,d,o,p);return h.dataArray=f,h.stride=d,h.size=o,h.getView=function(m){return g[m]},h.setPoint=function(m,y,x){var b=g[m];b[0]=y,b[1]=x},h.bufferSubData=function(m){r.bindBuffer(r.ARRAY_BUFFER,h),m?r.bufferSubData(r.ARRAY_BUFFER,0,f,0,m*o):r.bufferSubData(r.ARRAY_BUFFER,0,f)},h}function gP(r,e,t){for(var n=9,a=new Float32Array(e*n),i=new Array(e),o=0;o<e;o++){var u=o*n*4;i[o]=new Float32Array(a.buffer,u,n)}var c=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,c),r.bufferData(r.ARRAY_BUFFER,a.byteLength,r.DYNAMIC_DRAW);for(var f=0;f<3;f++){var d=t+f;r.enableVertexAttribArray(d),r.vertexAttribPointer(d,3,r.FLOAT,!1,36,f*12),r.vertexAttribDivisor(d,1)}return r.bindBuffer(r.ARRAY_BUFFER,null),c.getMatrixView=function(h){return i[h]},c.setData=function(h,g){i[g].set(h,0)},c.bufferSubData=function(){r.bindBuffer(r.ARRAY_BUFFER,c),r.bufferSubData(r.ARRAY_BUFFER,0,a)},c}function mP(r){var e=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,e);var t=r.createTexture();return r.bindTexture(r.TEXTURE_2D,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,t,0),r.bindFramebuffer(r.FRAMEBUFFER,null),e.setFramebufferAttachmentSizes=function(n,a){r.bindTexture(r.TEXTURE_2D,t),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,n,a,0,r.RGBA,r.UNSIGNED_BYTE,null)},e}var I0=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var r=0,e=arguments.length;e--;)r+=arguments[e]*arguments[e];return Math.sqrt(r)});function ph(){var r=new I0(9);return I0!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r}function L0(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=1,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r}function yP(r,e,t){var n=e[0],a=e[1],i=e[2],o=e[3],u=e[4],c=e[5],f=e[6],d=e[7],h=e[8],g=t[0],p=t[1],m=t[2],y=t[3],x=t[4],b=t[5],_=t[6],E=t[7],C=t[8];return r[0]=g*n+p*o+m*f,r[1]=g*a+p*u+m*d,r[2]=g*i+p*c+m*h,r[3]=y*n+x*o+b*f,r[4]=y*a+x*u+b*d,r[5]=y*i+x*c+b*h,r[6]=_*n+E*o+C*f,r[7]=_*a+E*u+C*d,r[8]=_*i+E*c+C*h,r}function pl(r,e,t){var n=e[0],a=e[1],i=e[2],o=e[3],u=e[4],c=e[5],f=e[6],d=e[7],h=e[8],g=t[0],p=t[1];return r[0]=n,r[1]=a,r[2]=i,r[3]=o,r[4]=u,r[5]=c,r[6]=g*n+p*o+f,r[7]=g*a+p*u+d,r[8]=g*i+p*c+h,r}function N0(r,e,t){var n=e[0],a=e[1],i=e[2],o=e[3],u=e[4],c=e[5],f=e[6],d=e[7],h=e[8],g=Math.sin(t),p=Math.cos(t);return r[0]=p*n+g*o,r[1]=p*a+g*u,r[2]=p*i+g*c,r[3]=p*o-g*n,r[4]=p*u-g*a,r[5]=p*c-g*i,r[6]=f,r[7]=d,r[8]=h,r}function zh(r,e,t){var n=t[0],a=t[1];return r[0]=n*e[0],r[1]=n*e[1],r[2]=n*e[2],r[3]=a*e[3],r[4]=a*e[4],r[5]=a*e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r}function wP(r,e,t){return r[0]=2/e,r[1]=0,r[2]=0,r[3]=0,r[4]=-2/t,r[5]=0,r[6]=-1,r[7]=1,r[8]=1,r}var xP=(function(){function r(e,t,n,a){ka(this,r),this.debugID=Math.floor(Math.random()*1e4),this.r=e,this.texSize=t,this.texRows=n,this.texHeight=Math.floor(t/n),this.enableWrapping=!0,this.locked=!1,this.texture=null,this.needsBuffer=!0,this.freePointer={x:0,row:0},this.keyToLocation=new Map,this.canvas=a(e,t,t),this.scratch=a(e,t,this.texHeight,"scratch")}return Ca(r,[{key:"lock",value:function(){this.locked=!0}},{key:"getKeys",value:function(){return new Set(this.keyToLocation.keys())}},{key:"getScale",value:function(t){var n=t.w,a=t.h,i=this.texHeight,o=this.texSize,u=i/a,c=n*u,f=a*u;return c>o&&(u=o/n,c=n*u,f=a*u),{scale:u,texW:c,texH:f}}},{key:"draw",value:function(t,n,a){var i=this;if(this.locked)throw new Error("can't draw, atlas is locked");var o=this.texSize,u=this.texRows,c=this.texHeight,f=this.getScale(n),d=f.scale,h=f.texW,g=f.texH,p=function(E,C){if(a&&C){var B=C.context,N=E.x,A=E.row,z=N,M=c*A;B.save(),B.translate(z,M),B.scale(d,d),a(B,n),B.restore()}},m=[null,null],y=function(){p(i.freePointer,i.canvas),m[0]={x:i.freePointer.x,y:i.freePointer.row*c,w:h,h:g},m[1]={x:i.freePointer.x+h,y:i.freePointer.row*c,w:0,h:g},i.freePointer.x+=h,i.freePointer.x==o&&(i.freePointer.x=0,i.freePointer.row++)},x=function(){var E=i.scratch,C=i.canvas;E.clear(),p({x:0,row:0},E);var B=o-i.freePointer.x,N=h-B,A=c;{var z=i.freePointer.x,M=i.freePointer.row*c,V=B;C.context.drawImage(E,0,0,V,A,z,M,V,A),m[0]={x:z,y:M,w:V,h:g}}{var q=B,I=(i.freePointer.row+1)*c,F=N;C&&C.context.drawImage(E,q,0,F,A,0,I,F,A),m[1]={x:0,y:I,w:F,h:g}}i.freePointer.x=N,i.freePointer.row++},b=function(){i.freePointer.x=0,i.freePointer.row++};if(this.freePointer.x+h<=o)y();else{if(this.freePointer.row>=u-1)return!1;this.freePointer.x===o?(b(),y()):this.enableWrapping?x():(b(),y())}return this.keyToLocation.set(t,m),this.needsBuffer=!0,m}},{key:"getOffsets",value:function(t){return this.keyToLocation.get(t)}},{key:"isEmpty",value:function(){return this.freePointer.x===0&&this.freePointer.row===0}},{key:"canFit",value:function(t){if(this.locked)return!1;var n=this.texSize,a=this.texRows,i=this.getScale(t),o=i.texW;return this.freePointer.x+o>n?this.freePointer.row<a-1:!0}},{key:"bufferIfNeeded",value:function(t){this.texture||(this.texture=hP(t,this.debugID)),this.needsBuffer&&(this.texture.buffer(this.canvas),this.needsBuffer=!1,this.locked&&(this.canvas=null,this.scratch=null))}},{key:"dispose",value:function(){this.texture&&(this.texture.deleteTexture(),this.texture=null),this.canvas=null,this.scratch=null,this.locked=!0}}])})(),bP=(function(){function r(e,t,n,a){ka(this,r),this.r=e,this.texSize=t,this.texRows=n,this.createTextureCanvas=a,this.atlases=[],this.styleKeyToAtlas=new Map,this.markedKeys=new Set}return Ca(r,[{key:"getKeys",value:function(){return new Set(this.styleKeyToAtlas.keys())}},{key:"_createAtlas",value:function(){var t=this.r,n=this.texSize,a=this.texRows,i=this.createTextureCanvas;return new xP(t,n,a,i)}},{key:"_getScratchCanvas",value:function(){if(!this.scratch){var t=this.r,n=this.texSize,a=this.texRows,i=this.createTextureCanvas,o=Math.floor(n/a);this.scratch=i(t,n,o,"scratch")}return this.scratch}},{key:"draw",value:function(t,n,a){var i=this.styleKeyToAtlas.get(t);return i||(i=this.atlases[this.atlases.length-1],(!i||!i.canFit(n))&&(i&&i.lock(),i=this._createAtlas(),this.atlases.push(i)),i.draw(t,n,a),this.styleKeyToAtlas.set(t,i)),i}},{key:"getAtlas",value:function(t){return this.styleKeyToAtlas.get(t)}},{key:"hasAtlas",value:function(t){return this.styleKeyToAtlas.has(t)}},{key:"markKeyForGC",value:function(t){this.markedKeys.add(t)}},{key:"gc",value:function(){var t=this,n=this.markedKeys;if(n.size===0){console.log("nothing to garbage collect");return}var a=[],i=new Map,o=null,u=Fr(this.atlases),c;try{var f=function(){var h=c.value,g=h.getKeys(),p=_P(n,g);if(p.size===0)return a.push(h),g.forEach(function(B){return i.set(B,h)}),1;o||(o=t._createAtlas(),a.push(o));var m=Fr(g),y;try{for(m.s();!(y=m.n()).done;){var x=y.value;if(!p.has(x)){var b=h.getOffsets(x),_=Ht(b,2),E=_[0],C=_[1];o.canFit({w:E.w+C.w,h:E.h})||(o.lock(),o=t._createAtlas(),a.push(o)),h.canvas&&(t._copyTextureToNewAtlas(x,h,o),i.set(x,o))}}}catch(B){m.e(B)}finally{m.f()}h.dispose()};for(u.s();!(c=u.n()).done;)f()}catch(d){u.e(d)}finally{u.f()}this.atlases=a,this.styleKeyToAtlas=i,this.markedKeys=new Set}},{key:"_copyTextureToNewAtlas",value:function(t,n,a){var i=n.getOffsets(t),o=Ht(i,2),u=o[0],c=o[1];if(c.w===0)a.draw(t,u,function(g){g.drawImage(n.canvas,u.x,u.y,u.w,u.h,0,0,u.w,u.h)});else{var f=this._getScratchCanvas();f.clear(),f.context.drawImage(n.canvas,u.x,u.y,u.w,u.h,0,0,u.w,u.h),f.context.drawImage(n.canvas,c.x,c.y,c.w,c.h,u.w,0,c.w,c.h);var d=u.w+c.w,h=u.h;a.draw(t,{w:d,h},function(g){g.drawImage(f,0,0,d,h,0,0,d,h)})}}},{key:"getCounts",value:function(){return{keyCount:this.styleKeyToAtlas.size,atlasCount:new Set(this.styleKeyToAtlas.values()).size}}}])})();function _P(r,e){return r.intersection?r.intersection(e):new Set(gl(r).filter(function(t){return e.has(t)}))}var EP=(function(){function r(e,t){ka(this,r),this.r=e,this.globalOptions=t,this.atlasSize=t.webglTexSize,this.maxAtlasesPerBatch=t.webglTexPerBatch,this.renderTypes=new Map,this.collections=new Map,this.typeAndIdToKey=new Map}return Ca(r,[{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"addAtlasCollection",value:function(t,n){var a=this.globalOptions,i=a.webglTexSize,o=a.createTextureCanvas,u=n.texRows,c=this._cacheScratchCanvas(o),f=new bP(this.r,i,u,c);this.collections.set(t,f)}},{key:"addRenderType",value:function(t,n){var a=n.collection;if(!this.collections.has(a))throw new Error("invalid atlas collection name '".concat(a,"'"));var i=this.collections.get(a),o=et({type:t,atlasCollection:i},n);this.renderTypes.set(t,o)}},{key:"getRenderTypeOpts",value:function(t){return this.renderTypes.get(t)}},{key:"getAtlasCollection",value:function(t){return this.collections.get(t)}},{key:"_cacheScratchCanvas",value:function(t){var n=-1,a=-1,i=null;return function(o,u,c,f){return f?((!i||u!=n||c!=a)&&(n=u,a=c,i=t(o,u,c)),i):t(o,u,c)}}},{key:"_key",value:function(t,n){return"".concat(t,"-").concat(n)}},{key:"invalidate",value:function(t){var n=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=a.forceRedraw,o=i===void 0?!1:i,u=a.filterEle,c=u===void 0?function(){return!0}:u,f=a.filterType,d=f===void 0?function(){return!0}:f,h=!1,g=!1,p=Fr(t),m;try{for(p.s();!(m=p.n()).done;){var y=m.value;if(c(y)){var x=Fr(this.renderTypes.values()),b;try{var _=function(){var C=b.value,B=C.type;if(d(B)){var N=n.collections.get(C.collection),A=C.getKey(y),z=Array.isArray(A)?A:[A];if(o)z.forEach(function(I){return N.markKeyForGC(I)}),g=!0;else{var M=C.getID?C.getID(y):y.id(),V=n._key(B,M),q=n.typeAndIdToKey.get(V);q!==void 0&&!fP(z,q)&&(h=!0,n.typeAndIdToKey.delete(V),q.forEach(function(I){return N.markKeyForGC(I)}))}}};for(x.s();!(b=x.n()).done;)_()}catch(E){x.e(E)}finally{x.f()}}}}catch(E){p.e(E)}finally{p.f()}return g&&(this.gc(),h=!1),h}},{key:"gc",value:function(){var t=Fr(this.collections.values()),n;try{for(t.s();!(n=t.n()).done;){var a=n.value;a.gc()}}catch(i){t.e(i)}finally{t.f()}}},{key:"getOrCreateAtlas",value:function(t,n,a,i){var o=this.renderTypes.get(n),u=this.collections.get(o.collection),c=!1,f=u.draw(i,a,function(g){o.drawClipped?(g.save(),g.beginPath(),g.rect(0,0,a.w,a.h),g.clip(),o.drawElement(g,t,a,!0,!0),g.restore()):o.drawElement(g,t,a,!0,!0),c=!0});if(c){var d=o.getID?o.getID(t):t.id(),h=this._key(n,d);this.typeAndIdToKey.has(h)?this.typeAndIdToKey.get(h).push(i):this.typeAndIdToKey.set(h,[i])}return f}},{key:"getAtlasInfo",value:function(t,n){var a=this,i=this.renderTypes.get(n),o=i.getKey(t),u=Array.isArray(o)?o:[o];return u.map(function(c){var f=i.getBoundingBox(t,c),d=a.getOrCreateAtlas(t,n,f,c),h=d.getOffsets(c),g=Ht(h,2),p=g[0],m=g[1];return{atlas:d,tex:p,tex1:p,tex2:m,bb:f}})}},{key:"getDebugInfo",value:function(){var t=[],n=Fr(this.collections),a;try{for(n.s();!(a=n.n()).done;){var i=Ht(a.value,2),o=i[0],u=i[1],c=u.getCounts(),f=c.keyCount,d=c.atlasCount;t.push({type:o,keyCount:f,atlasCount:d})}}catch(h){n.e(h)}finally{n.f()}return t}}])})(),SP=(function(){function r(e){ka(this,r),this.globalOptions=e,this.atlasSize=e.webglTexSize,this.maxAtlasesPerBatch=e.webglTexPerBatch,this.batchAtlases=[]}return Ca(r,[{key:"getMaxAtlasesPerBatch",value:function(){return this.maxAtlasesPerBatch}},{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"getIndexArray",value:function(){return Array.from({length:this.maxAtlasesPerBatch},function(t,n){return n})}},{key:"startBatch",value:function(){this.batchAtlases=[]}},{key:"getAtlasCount",value:function(){return this.batchAtlases.length}},{key:"getAtlases",value:function(){return this.batchAtlases}},{key:"canAddToCurrentBatch",value:function(t){return this.batchAtlases.length===this.maxAtlasesPerBatch?this.batchAtlases.includes(t):!0}},{key:"getAtlasIndexForBatch",value:function(t){var n=this.batchAtlases.indexOf(t);if(n<0){if(this.batchAtlases.length===this.maxAtlasesPerBatch)throw new Error("cannot add more atlases to batch");this.batchAtlases.push(t),n=this.batchAtlases.length-1}return n}}])})(),kP=`
  float circleSD(vec2 p, float r) {
    return distance(vec2(0), p) - r; // signed distance
  }
`,CP=`
  float rectangleSD(vec2 p, vec2 b) {
    vec2 d = abs(p)-b;
    return distance(vec2(0),max(d,0.0)) + min(max(d.x,d.y),0.0);
  }
`,TP=`
  float roundRectangleSD(vec2 p, vec2 b, vec4 cr) {
    cr.xy = (p.x > 0.0) ? cr.xy : cr.zw;
    cr.x  = (p.y > 0.0) ? cr.x  : cr.y;
    vec2 q = abs(p) - b + cr.x;
    return min(max(q.x, q.y), 0.0) + distance(vec2(0), max(q, 0.0)) - cr.x;
  }
`,PP=`
  float ellipseSD(vec2 p, vec2 ab) {
    p = abs( p ); // symmetry

    // find root with Newton solver
    vec2 q = ab*(p-ab);
    float w = (q.x<q.y)? 1.570796327 : 0.0;
    for( int i=0; i<5; i++ ) {
      vec2 cs = vec2(cos(w),sin(w));
      vec2 u = ab*vec2( cs.x,cs.y);
      vec2 v = ab*vec2(-cs.y,cs.x);
      w = w + dot(p-u,v)/(dot(p-u,u)+dot(v,v));
    }
    
    // compute final point and distance
    float d = length(p-ab*vec2(cos(w),sin(w)));
    
    // return signed distance
    return (dot(p/ab,p/ab)>1.0) ? d : -d;
  }
`,lo={SCREEN:{name:"screen",screen:!0},PICKING:{name:"picking",picking:!0}},Pl={IGNORE:1,USE_BB:2},gh=0,O0=1,M0=2,mh=3,Fi=4,nl=5,eo=6,to=7,RP=(function(){function r(e,t,n){ka(this,r),this.r=e,this.gl=t,this.maxInstances=n.webglBatchSize,this.atlasSize=n.webglTexSize,this.bgColor=n.bgColor,this.debug=n.webglDebug,this.batchDebugInfo=[],n.enableWrapping=!0,n.createTextureCanvas=oP,this.atlasManager=new EP(e,n),this.batchManager=new SP(n),this.simpleShapeOptions=new Map,this.program=this._createShaderProgram(lo.SCREEN),this.pickingProgram=this._createShaderProgram(lo.PICKING),this.vao=this._createVAO()}return Ca(r,[{key:"addAtlasCollection",value:function(t,n){this.atlasManager.addAtlasCollection(t,n)}},{key:"addTextureAtlasRenderType",value:function(t,n){this.atlasManager.addRenderType(t,n)}},{key:"addSimpleShapeRenderType",value:function(t,n){this.simpleShapeOptions.set(t,n)}},{key:"invalidate",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.type,i=this.atlasManager;return a?i.invalidate(t,{filterType:function(u){return u===a},forceRedraw:!0}):i.invalidate(t)}},{key:"gc",value:function(){this.atlasManager.gc()}},{key:"_createShaderProgram",value:function(t){var n=this.gl,a=`#version 300 es
      precision highp float;

      uniform mat3 uPanZoomMatrix;
      uniform int  uAtlasSize;
      
      // instanced
      in vec2 aPosition; // a vertex from the unit square
      
      in mat3 aTransform; // used to transform verticies, eg into a bounding box
      in int aVertType; // the type of thing we are rendering

      // the z-index that is output when using picking mode
      in vec4 aIndex;
      
      // For textures
      in int aAtlasId; // which shader unit/atlas to use
      in vec4 aTex; // x/y/w/h of texture in atlas

      // for edges
      in vec4 aPointAPointB;
      in vec4 aPointCPointD;
      in vec2 aLineWidth; // also used for node border width

      // simple shapes
      in vec4 aCornerRadius; // for round-rectangle [top-right, bottom-right, top-left, bottom-left]
      in vec4 aColor; // also used for edges
      in vec4 aBorderColor; // aLineWidth is used for border width

      // output values passed to the fragment shader
      out vec2 vTexCoord;
      out vec4 vColor;
      out vec2 vPosition;
      // flat values are not interpolated
      flat out int vAtlasId; 
      flat out int vVertType;
      flat out vec2 vTopRight;
      flat out vec2 vBotLeft;
      flat out vec4 vCornerRadius;
      flat out vec4 vBorderColor;
      flat out vec2 vBorderWidth;
      flat out vec4 vIndex;
      
      void main(void) {
        int vid = gl_VertexID;
        vec2 position = aPosition; // TODO make this a vec3, simplifies some code below

        if(aVertType == `.concat(gh,`) {
          float texX = aTex.x; // texture coordinates
          float texY = aTex.y;
          float texW = aTex.z;
          float texH = aTex.w;

          if(vid == 1 || vid == 2 || vid == 4) {
            texX += texW;
          }
          if(vid == 2 || vid == 4 || vid == 5) {
            texY += texH;
          }

          float d = float(uAtlasSize);
          vTexCoord = vec2(texX / d, texY / d); // tex coords must be between 0 and 1

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(Fi," || aVertType == ").concat(to,` 
             || aVertType == `).concat(nl," || aVertType == ").concat(eo,`) { // simple shapes

          // the bounding box is needed by the fragment shader
          vBotLeft  = (aTransform * vec3(0, 0, 1)).xy; // flat
          vTopRight = (aTransform * vec3(1, 1, 1)).xy; // flat
          vPosition = (aTransform * vec3(position, 1)).xy; // will be interpolated

          // calculations are done in the fragment shader, just pass these along
          vColor = aColor;
          vCornerRadius = aCornerRadius;
          vBorderColor = aBorderColor;
          vBorderWidth = aLineWidth;

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(O0,`) {
          vec2 source = aPointAPointB.xy;
          vec2 target = aPointAPointB.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          // stretch the unit square into a long skinny rectangle
          vec2 xBasis = target - source;
          vec2 yBasis = normalize(vec2(-xBasis.y, xBasis.x));
          vec2 point = source + xBasis * position.x + yBasis * aLineWidth[0] * position.y;

          gl_Position = vec4(uPanZoomMatrix * vec3(point, 1.0), 1.0);
          vColor = aColor;
        } 
        else if(aVertType == `).concat(M0,`) {
          vec2 pointA = aPointAPointB.xy;
          vec2 pointB = aPointAPointB.zw;
          vec2 pointC = aPointCPointD.xy;
          vec2 pointD = aPointCPointD.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          vec2 p0, p1, p2, pos;
          if(position.x == 0.0) { // The left side of the unit square
            p0 = pointA;
            p1 = pointB;
            p2 = pointC;
            pos = position;
          } else { // The right side of the unit square, use same approach but flip the geometry upside down
            p0 = pointD;
            p1 = pointC;
            p2 = pointB;
            pos = vec2(0.0, -position.y);
          }

          vec2 p01 = p1 - p0;
          vec2 p12 = p2 - p1;
          vec2 p21 = p1 - p2;

          // Find the normal vector.
          vec2 tangent = normalize(normalize(p12) + normalize(p01));
          vec2 normal = vec2(-tangent.y, tangent.x);

          // Find the vector perpendicular to p0 -> p1.
          vec2 p01Norm = normalize(vec2(-p01.y, p01.x));

          // Determine the bend direction.
          float sigma = sign(dot(p01 + p21, normal));
          float width = aLineWidth[0];

          if(sign(pos.y) == -sigma) {
            // This is an intersecting vertex. Adjust the position so that there's no overlap.
            vec2 point = 0.5 * width * normal * -sigma / dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          } else {
            // This is a non-intersecting vertex. Treat it like a mitre join.
            vec2 point = 0.5 * width * normal * sigma * dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          }

          vColor = aColor;
        } 
        else if(aVertType == `).concat(mh,` && vid < 3) {
          // massage the first triangle into an edge arrow
          if(vid == 0)
            position = vec2(-0.15, -0.3);
          if(vid == 1)
            position = vec2(  0.0,  0.0);
          if(vid == 2)
            position = vec2( 0.15, -0.3);

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
          vColor = aColor;
        }
        else {
          gl_Position = vec4(2.0, 0.0, 0.0, 1.0); // discard vertex by putting it outside webgl clip space
        }

        vAtlasId = aAtlasId;
        vVertType = aVertType;
        vIndex = aIndex;
      }
    `),i=this.batchManager.getIndexArray(),o=`#version 300 es
      precision highp float;

      // declare texture unit for each texture atlas in the batch
      `.concat(i.map(function(f){return"uniform sampler2D uTexture".concat(f,";")}).join(`
	`),`

      uniform vec4 uBGColor;
      uniform float uZoom;

      in vec2 vTexCoord;
      in vec4 vColor;
      in vec2 vPosition; // model coordinates

      flat in int vAtlasId;
      flat in vec4 vIndex;
      flat in int vVertType;
      flat in vec2 vTopRight;
      flat in vec2 vBotLeft;
      flat in vec4 vCornerRadius;
      flat in vec4 vBorderColor;
      flat in vec2 vBorderWidth;

      out vec4 outColor;

      `).concat(kP,`
      `).concat(CP,`
      `).concat(TP,`
      `).concat(PP,`

      vec4 blend(vec4 top, vec4 bot) { // blend colors with premultiplied alpha
        return vec4( 
          top.rgb + (bot.rgb * (1.0 - top.a)),
          top.a   + (bot.a   * (1.0 - top.a)) 
        );
      }

      vec4 distInterp(vec4 cA, vec4 cB, float d) { // interpolate color using Signed Distance
        // scale to the zoom level so that borders don't look blurry when zoomed in
        // note 1.5 is an aribitrary value chosen because it looks good
        return mix(cA, cB, 1.0 - smoothstep(0.0, 1.5 / uZoom, abs(d))); 
      }

      void main(void) {
        if(vVertType == `).concat(gh,`) {
          // look up the texel from the texture unit
          `).concat(i.map(function(f){return"if(vAtlasId == ".concat(f,") outColor = texture(uTexture").concat(f,", vTexCoord);")}).join(`
	else `),`
        } 
        else if(vVertType == `).concat(mh,`) {
          // mimics how canvas renderer uses context.globalCompositeOperation = 'destination-out';
          outColor = blend(vColor, uBGColor);
          outColor.a = 1.0; // make opaque, masks out line under arrow
        }
        else if(vVertType == `).concat(Fi,` && vBorderWidth == vec2(0.0)) { // simple rectangle with no border
          outColor = vColor; // unit square is already transformed to the rectangle, nothing else needs to be done
        }
        else if(vVertType == `).concat(Fi," || vVertType == ").concat(to,` 
          || vVertType == `).concat(nl," || vVertType == ").concat(eo,`) { // use SDF

          float outerBorder = vBorderWidth[0];
          float innerBorder = vBorderWidth[1];
          float borderPadding = outerBorder * 2.0;
          float w = vTopRight.x - vBotLeft.x - borderPadding;
          float h = vTopRight.y - vBotLeft.y - borderPadding;
          vec2 b = vec2(w/2.0, h/2.0); // half width, half height
          vec2 p = vPosition - vec2(vTopRight.x - b[0] - outerBorder, vTopRight.y - b[1] - outerBorder); // translate to center

          float d; // signed distance
          if(vVertType == `).concat(Fi,`) {
            d = rectangleSD(p, b);
          } else if(vVertType == `).concat(to,` && w == h) {
            d = circleSD(p, b.x); // faster than ellipse
          } else if(vVertType == `).concat(to,`) {
            d = ellipseSD(p, b);
          } else {
            d = roundRectangleSD(p, b, vCornerRadius.wzyx);
          }

          // use the distance to interpolate a color to smooth the edges of the shape, doesn't need multisampling
          // we must smooth colors inwards, because we can't change pixels outside the shape's bounding box
          if(d > 0.0) {
            if(d > outerBorder) {
              discard;
            } else {
              outColor = distInterp(vBorderColor, vec4(0), d - outerBorder);
            }
          } else {
            if(d > innerBorder) {
              vec4 outerColor = outerBorder == 0.0 ? vec4(0) : vBorderColor;
              vec4 innerBorderColor = blend(vBorderColor, vColor);
              outColor = distInterp(innerBorderColor, outerColor, d);
            } 
            else {
              vec4 outerColor;
              if(innerBorder == 0.0 && outerBorder == 0.0) {
                outerColor = vec4(0);
              } else if(innerBorder == 0.0) {
                outerColor = vBorderColor;
              } else {
                outerColor = blend(vBorderColor, vColor);
              }
              outColor = distInterp(vColor, outerColor, d - innerBorder);
            }
          }
        }
        else {
          outColor = vColor;
        }

        `).concat(t.picking?`if(outColor.a == 0.0) discard;
             else outColor = vIndex;`:"",`
      }
    `),u=sP(n,a,o);u.aPosition=n.getAttribLocation(u,"aPosition"),u.aIndex=n.getAttribLocation(u,"aIndex"),u.aVertType=n.getAttribLocation(u,"aVertType"),u.aTransform=n.getAttribLocation(u,"aTransform"),u.aAtlasId=n.getAttribLocation(u,"aAtlasId"),u.aTex=n.getAttribLocation(u,"aTex"),u.aPointAPointB=n.getAttribLocation(u,"aPointAPointB"),u.aPointCPointD=n.getAttribLocation(u,"aPointCPointD"),u.aLineWidth=n.getAttribLocation(u,"aLineWidth"),u.aColor=n.getAttribLocation(u,"aColor"),u.aCornerRadius=n.getAttribLocation(u,"aCornerRadius"),u.aBorderColor=n.getAttribLocation(u,"aBorderColor"),u.uPanZoomMatrix=n.getUniformLocation(u,"uPanZoomMatrix"),u.uAtlasSize=n.getUniformLocation(u,"uAtlasSize"),u.uBGColor=n.getUniformLocation(u,"uBGColor"),u.uZoom=n.getUniformLocation(u,"uZoom"),u.uTextures=[];for(var c=0;c<this.batchManager.getMaxAtlasesPerBatch();c++)u.uTextures.push(n.getUniformLocation(u,"uTexture".concat(c)));return u}},{key:"_createVAO",value:function(){var t=[0,0,1,0,1,1,0,0,1,1,0,1];this.vertexCount=t.length/2;var n=this.maxInstances,a=this.gl,i=this.program,o=a.createVertexArray();return a.bindVertexArray(o),pP(a,"vec2",i.aPosition,t),this.transformBuffer=gP(a,n,i.aTransform),this.indexBuffer=_n(a,n,"vec4",i.aIndex),this.vertTypeBuffer=_n(a,n,"int",i.aVertType),this.atlasIdBuffer=_n(a,n,"int",i.aAtlasId),this.texBuffer=_n(a,n,"vec4",i.aTex),this.pointAPointBBuffer=_n(a,n,"vec4",i.aPointAPointB),this.pointCPointDBuffer=_n(a,n,"vec4",i.aPointCPointD),this.lineWidthBuffer=_n(a,n,"vec2",i.aLineWidth),this.colorBuffer=_n(a,n,"vec4",i.aColor),this.cornerRadiusBuffer=_n(a,n,"vec4",i.aCornerRadius),this.borderColorBuffer=_n(a,n,"vec4",i.aBorderColor),a.bindVertexArray(null),o}},{key:"buffers",get:function(){var t=this;return this._buffers||(this._buffers=Object.keys(this).filter(function(n){return va(n,"Buffer")}).map(function(n){return t[n]})),this._buffers}},{key:"startFrame",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:lo.SCREEN;this.panZoomMatrix=t,this.renderTarget=n,this.batchDebugInfo=[],this.wrappedCount=0,this.simpleCount=0,this.startBatch()}},{key:"startBatch",value:function(){this.instanceCount=0,this.batchManager.startBatch()}},{key:"endFrame",value:function(){this.endBatch()}},{key:"_isVisible",value:function(t,n){return t.visible()?n&&n.isVisible?n.isVisible(t):!0:!1}},{key:"drawTexture",value:function(t,n,a){var i=this.atlasManager,o=this.batchManager,u=i.getRenderTypeOpts(a);if(this._isVisible(t,u)&&!(t.isEdge()&&!this._isValidEdge(t))){if(this.renderTarget.picking&&u.getTexPickingMode){var c=u.getTexPickingMode(t);if(c===Pl.IGNORE)return;if(c==Pl.USE_BB){this.drawPickingRectangle(t,n,a);return}}var f=i.getAtlasInfo(t,a),d=Fr(f),h;try{for(d.s();!(h=d.n()).done;){var g=h.value,p=g.atlas,m=g.tex1,y=g.tex2;o.canAddToCurrentBatch(p)||this.endBatch();for(var x=o.getAtlasIndexForBatch(p),b=0,_=[[m,!0],[y,!1]];b<_.length;b++){var E=Ht(_[b],2),C=E[0],B=E[1];if(C.w!=0){var N=this.instanceCount;this.vertTypeBuffer.getView(N)[0]=gh;var A=this.indexBuffer.getView(N);zi(n,A);var z=this.atlasIdBuffer.getView(N);z[0]=x;var M=this.texBuffer.getView(N);M[0]=C.x,M[1]=C.y,M[2]=C.w,M[3]=C.h;var V=this.transformBuffer.getMatrixView(N);this.setTransformMatrix(t,V,u,g,B),this.instanceCount++,B||this.wrappedCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}catch(q){d.e(q)}finally{d.f()}}}},{key:"setTransformMatrix",value:function(t,n,a,i){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,u=0;if(a.shapeProps&&a.shapeProps.padding&&(u=t.pstyle(a.shapeProps.padding).pfValue),i){var c=i.bb,f=i.tex1,d=i.tex2,h=f.w/(f.w+d.w);o||(h=1-h);var g=this._getAdjustedBB(c,u,o,h);this._applyTransformMatrix(n,g,a,t)}else{var p=a.getBoundingBox(t),m=this._getAdjustedBB(p,u,!0,1);this._applyTransformMatrix(n,m,a,t)}}},{key:"_applyTransformMatrix",value:function(t,n,a,i){var o,u;L0(t);var c=a.getRotation?a.getRotation(i):0;if(c!==0){var f=a.getRotationPoint(i),d=f.x,h=f.y;pl(t,t,[d,h]),N0(t,t,c);var g=a.getRotationOffset(i);o=g.x+(n.xOffset||0),u=g.y+(n.yOffset||0)}else o=n.x1,u=n.y1;pl(t,t,[o,u]),zh(t,t,[n.w,n.h])}},{key:"_getAdjustedBB",value:function(t,n,a,i){var o=t.x1,u=t.y1,c=t.w,f=t.h,d=t.yOffset;n&&(o-=n,u-=n,c+=2*n,f+=2*n);var h=0,g=c*i;return a&&i<1?c=g:!a&&i<1&&(h=c-g,o+=h,c=g),{x1:o,y1:u,w:c,h:f,xOffset:h,yOffset:d}}},{key:"drawPickingRectangle",value:function(t,n,a){var i=this.atlasManager.getRenderTypeOpts(a),o=this.instanceCount;this.vertTypeBuffer.getView(o)[0]=Fi;var u=this.indexBuffer.getView(o);zi(n,u);var c=this.colorBuffer.getView(o);Ga([0,0,0],1,c);var f=this.transformBuffer.getMatrixView(o);this.setTransformMatrix(t,f,i),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}},{key:"drawNode",value:function(t,n,a){var i=this.simpleShapeOptions.get(a);if(this._isVisible(t,i)){var o=i.shapeProps,u=this._getVertTypeForShape(t,o.shape);if(u===void 0||i.isSimple&&!i.isSimple(t)){this.drawTexture(t,n,a);return}var c=this.instanceCount;if(this.vertTypeBuffer.getView(c)[0]=u,u===nl||u===eo){var f=i.getBoundingBox(t),d=this._getCornerRadius(t,o.radius,f),h=this.cornerRadiusBuffer.getView(c);h[0]=d,h[1]=d,h[2]=d,h[3]=d,u===eo&&(h[0]=0,h[2]=0)}var g=this.indexBuffer.getView(c);zi(n,g);var p=t.pstyle(o.color).value,m=t.pstyle(o.opacity).value,y=this.colorBuffer.getView(c);Ga(p,m,y);var x=this.lineWidthBuffer.getView(c);if(x[0]=0,x[1]=0,o.border){var b=t.pstyle("border-width").value;if(b>0){var _=t.pstyle("border-color").value,E=t.pstyle("border-opacity").value,C=this.borderColorBuffer.getView(c);Ga(_,E,C);var B=t.pstyle("border-position").value;if(B==="inside")x[0]=0,x[1]=-b;else if(B==="outside")x[0]=b,x[1]=0;else{var N=b/2;x[0]=N,x[1]=-N}}}var A=this.transformBuffer.getMatrixView(c);this.setTransformMatrix(t,A,i),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}},{key:"_getVertTypeForShape",value:function(t,n){var a=t.pstyle(n).value;switch(a){case"rectangle":return Fi;case"ellipse":return to;case"roundrectangle":case"round-rectangle":return nl;case"bottom-round-rectangle":return eo;default:return}}},{key:"_getCornerRadius",value:function(t,n,a){var i=a.w,o=a.h;if(t.pstyle(n).value==="auto")return ba(i,o);var u=t.pstyle(n).pfValue,c=i/2,f=o/2;return Math.min(u,f,c)}},{key:"drawEdgeArrow",value:function(t,n,a){if(t.visible()){var i=t._private.rscratch,o,u,c;if(a==="source"?(o=i.arrowStartX,u=i.arrowStartY,c=i.srcArrowAngle):(o=i.arrowEndX,u=i.arrowEndY,c=i.tgtArrowAngle),!(isNaN(o)||o==null||isNaN(u)||u==null||isNaN(c)||c==null)){var f=t.pstyle(a+"-arrow-shape").value;if(f!=="none"){var d=t.pstyle(a+"-arrow-color").value,h=t.pstyle("opacity").value,g=t.pstyle("line-opacity").value,p=h*g,m=t.pstyle("width").pfValue,y=t.pstyle("arrow-scale").value,x=this.r.getArrowWidth(m,y),b=this.instanceCount,_=this.transformBuffer.getMatrixView(b);L0(_),pl(_,_,[o,u]),zh(_,_,[x,x]),N0(_,_,c),this.vertTypeBuffer.getView(b)[0]=mh;var E=this.indexBuffer.getView(b);zi(n,E);var C=this.colorBuffer.getView(b);Ga(d,p,C),this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"drawEdgeLine",value:function(t,n){if(t.visible()){var a=this._getEdgePoints(t);if(a){var i=t.pstyle("opacity").value,o=t.pstyle("line-opacity").value,u=t.pstyle("width").pfValue,c=t.pstyle("line-color").value,f=i*o;if(a.length/2+this.instanceCount>this.maxInstances&&this.endBatch(),a.length==4){var d=this.instanceCount;this.vertTypeBuffer.getView(d)[0]=O0;var h=this.indexBuffer.getView(d);zi(n,h);var g=this.colorBuffer.getView(d);Ga(c,f,g);var p=this.lineWidthBuffer.getView(d);p[0]=u;var m=this.pointAPointBBuffer.getView(d);m[0]=a[0],m[1]=a[1],m[2]=a[2],m[3]=a[3],this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}else for(var y=0;y<a.length-2;y+=2){var x=this.instanceCount;this.vertTypeBuffer.getView(x)[0]=M0;var b=this.indexBuffer.getView(x);zi(n,b);var _=this.colorBuffer.getView(x);Ga(c,f,_);var E=this.lineWidthBuffer.getView(x);E[0]=u;var C=a[y-2],B=a[y-1],N=a[y],A=a[y+1],z=a[y+2],M=a[y+3],V=a[y+4],q=a[y+5];y==0&&(C=2*N-z+.001,B=2*A-M+.001),y==a.length-4&&(V=2*z-N+.001,q=2*M-A+.001);var I=this.pointAPointBBuffer.getView(x);I[0]=C,I[1]=B,I[2]=N,I[3]=A;var F=this.pointCPointDBuffer.getView(x);F[0]=z,F[1]=M,F[2]=V,F[3]=q,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"_isValidEdge",value:function(t){var n=t._private.rscratch;return!(n.badLine||n.allpts==null||isNaN(n.allpts[0]))}},{key:"_getEdgePoints",value:function(t){var n=t._private.rscratch;if(this._isValidEdge(t)){var a=n.allpts;if(a.length==4)return a;var i=this._getNumSegments(t);return this._getCurveSegmentPoints(a,i)}}},{key:"_getNumSegments",value:function(t){var n=15;return Math.min(Math.max(n,5),this.maxInstances)}},{key:"_getCurveSegmentPoints",value:function(t,n){if(t.length==4)return t;for(var a=Array((n+1)*2),i=0;i<=n;i++)if(i==0)a[0]=t[0],a[1]=t[1];else if(i==n)a[i*2]=t[t.length-2],a[i*2+1]=t[t.length-1];else{var o=i/n;this._setCurvePoint(t,o,a,i*2)}return a}},{key:"_setCurvePoint",value:function(t,n,a,i){if(t.length<=2)a[i]=t[0],a[i+1]=t[1];else{for(var o=Array(t.length-2),u=0;u<o.length;u+=2){var c=(1-n)*t[u]+n*t[u+2],f=(1-n)*t[u+1]+n*t[u+3];o[u]=c,o[u+1]=f}return this._setCurvePoint(o,n,a,i)}}},{key:"endBatch",value:function(){var t=this.gl,n=this.vao,a=this.vertexCount,i=this.instanceCount;if(i!==0){var o=this.renderTarget.picking?this.pickingProgram:this.program;t.useProgram(o),t.bindVertexArray(n);var u=Fr(this.buffers),c;try{for(u.s();!(c=u.n()).done;){var f=c.value;f.bufferSubData(i)}}catch(m){u.e(m)}finally{u.f()}for(var d=this.batchManager.getAtlases(),h=0;h<d.length;h++)d[h].bufferIfNeeded(t);for(var g=0;g<d.length;g++)t.activeTexture(t.TEXTURE0+g),t.bindTexture(t.TEXTURE_2D,d[g].texture),t.uniform1i(o.uTextures[g],g);t.uniform1f(o.uZoom,uP(this.r)),t.uniformMatrix3fv(o.uPanZoomMatrix,!1,this.panZoomMatrix),t.uniform1i(o.uAtlasSize,this.batchManager.getAtlasSize());var p=Ga(this.bgColor,1);t.uniform4fv(o.uBGColor,p),t.drawArraysInstanced(t.TRIANGLES,0,a,i),t.bindVertexArray(null),t.bindTexture(t.TEXTURE_2D,null),this.debug&&this.batchDebugInfo.push({count:i,atlasCount:d.length}),this.startBatch()}}},{key:"getDebugInfo",value:function(){var t=this.atlasManager.getDebugInfo(),n=t.reduce(function(o,u){return o+u.atlasCount},0),a=this.batchDebugInfo,i=a.reduce(function(o,u){return o+u.count},0);return{atlasInfo:t,totalAtlases:n,wrappedCount:this.wrappedCount,simpleCount:this.simpleCount,batchCount:a.length,batchInfo:a,totalInstances:i}}}])})(),zw={};zw.initWebgl=function(r,e){var t=this,n=t.data.contexts[t.WEBGL];r.bgColor=BP(t),r.webglTexSize=Math.min(r.webglTexSize,n.getParameter(n.MAX_TEXTURE_SIZE)),r.webglTexRows=Math.min(r.webglTexRows,54),r.webglTexRowsNodes=Math.min(r.webglTexRowsNodes,54),r.webglBatchSize=Math.min(r.webglBatchSize,16384),r.webglTexPerBatch=Math.min(r.webglTexPerBatch,n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)),t.webglDebug=r.webglDebug,t.webglDebugShowAtlases=r.webglDebugShowAtlases,t.pickingFrameBuffer=mP(n),t.pickingFrameBuffer.needsDraw=!0,t.drawing=new RP(t,n,r);var a=function(h){return function(g){return t.getTextAngle(g,h)}},i=function(h){return function(g){var p=g.pstyle(h);return p&&p.value}},o=function(h){return function(g){return g.pstyle("".concat(h,"-opacity")).value>0}},u=function(h){var g=h.pstyle("text-events").strValue==="yes";return g?Pl.USE_BB:Pl.IGNORE},c=function(h){var g=h.position(),p=g.x,m=g.y,y=h.outerWidth(),x=h.outerHeight();return{w:y,h:x,x1:p-y/2,y1:m-x/2}};t.drawing.addAtlasCollection("node",{texRows:r.webglTexRowsNodes}),t.drawing.addAtlasCollection("label",{texRows:r.webglTexRows}),t.drawing.addTextureAtlasRenderType("node-body",{collection:"node",getKey:e.getStyleKey,getBoundingBox:e.getElementBox,drawElement:e.drawElement}),t.drawing.addSimpleShapeRenderType("node-body",{getBoundingBox:c,isSimple:cP,shapeProps:{shape:"shape",color:"background-color",opacity:"background-opacity",radius:"corner-radius",border:!0}}),t.drawing.addSimpleShapeRenderType("node-overlay",{getBoundingBox:c,isVisible:o("overlay"),shapeProps:{shape:"overlay-shape",color:"overlay-color",opacity:"overlay-opacity",padding:"overlay-padding",radius:"overlay-corner-radius"}}),t.drawing.addSimpleShapeRenderType("node-underlay",{getBoundingBox:c,isVisible:o("underlay"),shapeProps:{shape:"underlay-shape",color:"underlay-color",opacity:"underlay-opacity",padding:"underlay-padding",radius:"underlay-corner-radius"}}),t.drawing.addTextureAtlasRenderType("label",{collection:"label",getTexPickingMode:u,getKey:yh(e.getLabelKey,null),getBoundingBox:wh(e.getLabelBox,null),drawClipped:!0,drawElement:e.drawLabel,getRotation:a(null),getRotationPoint:e.getLabelRotationPoint,getRotationOffset:e.getLabelRotationOffset,isVisible:i("label")}),t.drawing.addTextureAtlasRenderType("edge-source-label",{collection:"label",getTexPickingMode:u,getKey:yh(e.getSourceLabelKey,"source"),getBoundingBox:wh(e.getSourceLabelBox,"source"),drawClipped:!0,drawElement:e.drawSourceLabel,getRotation:a("source"),getRotationPoint:e.getSourceLabelRotationPoint,getRotationOffset:e.getSourceLabelRotationOffset,isVisible:i("source-label")}),t.drawing.addTextureAtlasRenderType("edge-target-label",{collection:"label",getTexPickingMode:u,getKey:yh(e.getTargetLabelKey,"target"),getBoundingBox:wh(e.getTargetLabelBox,"target"),drawClipped:!0,drawElement:e.drawTargetLabel,getRotation:a("target"),getRotationPoint:e.getTargetLabelRotationPoint,getRotationOffset:e.getTargetLabelRotationOffset,isVisible:i("target-label")});var f=Po(function(){console.log("garbage collect flag set"),t.data.gc=!0},1e4);t.onUpdateEleCalcs(function(d,h){var g=!1;h&&h.length>0&&(g|=t.drawing.invalidate(h)),g&&f()}),AP(t)};function BP(r){var e=r.cy.container(),t=e&&e.style&&e.style.backgroundColor||"white";return d1(t)}function Fw(r,e){var t=r._private.rscratch;return Mr(t,"labelWrapCachedLines",e)||[]}var yh=function(e,t){return function(n){var a=e(n),i=Fw(n,t);return i.length>1?i.map(function(o,u){return"".concat(a,"_").concat(u)}):a}},wh=function(e,t){return function(n,a){var i=e(n);if(typeof a=="string"){var o=a.indexOf("_");if(o>0){var u=Number(a.substring(o+1)),c=Fw(n,t),f=i.h/c.length,d=f*u,h=i.y1+d;return{x1:i.x1,w:i.w,y1:h,h:f,yOffset:d}}}return i}};function AP(r){{var e=r.render;r.render=function(i){i=i||{};var o=r.cy;r.webgl&&(o.zoom()>Aw?(DP(r),e.call(r,i)):(IP(r),$w(r,i,lo.SCREEN)))}}{var t=r.matchCanvasSize;r.matchCanvasSize=function(i){t.call(r,i),r.pickingFrameBuffer.setFramebufferAttachmentSizes(r.canvasWidth,r.canvasHeight),r.pickingFrameBuffer.needsDraw=!0}}r.findNearestElements=function(i,o,u,c){return FP(r,i,o)};{var n=r.invalidateCachedZSortedEles;r.invalidateCachedZSortedEles=function(){n.call(r),r.pickingFrameBuffer.needsDraw=!0}}{var a=r.notify;r.notify=function(i,o){a.call(r,i,o),i==="viewport"||i==="bounds"?r.pickingFrameBuffer.needsDraw=!0:i==="background"&&r.drawing.invalidate(o,{type:"node-body"})}}}function DP(r){var e=r.data.contexts[r.WEBGL];e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)}function IP(r){var e=function(n){n.save(),n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,r.canvasWidth,r.canvasHeight),n.restore()};e(r.data.contexts[r.NODE]),e(r.data.contexts[r.DRAG])}function LP(r){var e=r.canvasWidth,t=r.canvasHeight,n=vv(r),a=n.pan,i=n.zoom,o=ph();pl(o,o,[a.x,a.y]),zh(o,o,[i,i]);var u=ph();wP(u,e,t);var c=ph();return yP(c,u,o),c}function Uw(r,e){var t=r.canvasWidth,n=r.canvasHeight,a=vv(r),i=a.pan,o=a.zoom;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t,n),e.translate(i.x,i.y),e.scale(o,o)}function NP(r,e){r.drawSelectionRectangle(e,function(t){return Uw(r,t)})}function OP(r){var e=r.data.contexts[r.NODE];e.save(),Uw(r,e),e.strokeStyle="rgba(0, 0, 0, 0.3)",e.beginPath(),e.moveTo(-1e3,0),e.lineTo(1e3,0),e.stroke(),e.beginPath(),e.moveTo(0,-1e3),e.lineTo(0,1e3),e.stroke(),e.restore()}function MP(r){var e=function(a,i,o){for(var u=a.atlasManager.getAtlasCollection(i),c=r.data.contexts[r.NODE],f=u.atlases,d=0;d<f.length;d++){var h=f[d],g=h.canvas;if(g){var p=g.width,m=g.height,y=p*d,x=g.height*o,b=.4;c.save(),c.scale(b,b),c.drawImage(g,y,x),c.strokeStyle="black",c.rect(y,x,p,m),c.stroke(),c.restore()}}},t=0;e(r.drawing,"node",t++),e(r.drawing,"label",t++)}function zP(r,e,t,n,a){var i,o,u,c,f=vv(r),d=f.pan,h=f.zoom;{var g=lP(r,d,h,e,t),p=Ht(g,2),m=p[0],y=p[1],x=6;i=m-x/2,o=y-x/2,u=x,c=x}if(u===0||c===0)return[];var b=r.data.contexts[r.WEBGL];b.bindFramebuffer(b.FRAMEBUFFER,r.pickingFrameBuffer),r.pickingFrameBuffer.needsDraw&&(b.viewport(0,0,b.canvas.width,b.canvas.height),$w(r,null,lo.PICKING),r.pickingFrameBuffer.needsDraw=!1);var _=u*c,E=new Uint8Array(_*4);b.readPixels(i,o,u,c,b.RGBA,b.UNSIGNED_BYTE,E),b.bindFramebuffer(b.FRAMEBUFFER,null);for(var C=new Set,B=0;B<_;B++){var N=E.slice(B*4,B*4+4),A=dP(N)-1;A>=0&&C.add(A)}return C}function FP(r,e,t){var n=zP(r,e,t),a=r.getCachedZSortedEles(),i,o,u=Fr(n),c;try{for(u.s();!(c=u.n()).done;){var f=c.value,d=a[f];if(!i&&d.isNode()&&(i=d),!o&&d.isEdge()&&(o=d),i&&o)break}}catch(h){u.e(h)}finally{u.f()}return[i,o].filter(Boolean)}function xh(r,e,t){var n=r.drawing;e+=1,t.isNode()?(n.drawNode(t,e,"node-underlay"),n.drawNode(t,e,"node-body"),n.drawTexture(t,e,"label"),n.drawNode(t,e,"node-overlay")):(n.drawEdgeLine(t,e),n.drawEdgeArrow(t,e,"source"),n.drawEdgeArrow(t,e,"target"),n.drawTexture(t,e,"label"),n.drawTexture(t,e,"edge-source-label"),n.drawTexture(t,e,"edge-target-label"))}function $w(r,e,t){var n;r.webglDebug&&(n=performance.now());var a=r.drawing,i=0;if(t.screen&&r.data.canvasNeedsRedraw[r.SELECT_BOX]&&NP(r,e),r.data.canvasNeedsRedraw[r.NODE]||t.picking){var o=r.data.contexts[r.WEBGL];t.screen?(o.clearColor(0,0,0,0),o.enable(o.BLEND),o.blendFunc(o.ONE,o.ONE_MINUS_SRC_ALPHA)):o.disable(o.BLEND),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT),o.viewport(0,0,o.canvas.width,o.canvas.height);var u=LP(r),c=r.getCachedZSortedEles();if(i=c.length,a.startFrame(u,t),t.screen){for(var f=0;f<c.nondrag.length;f++)xh(r,f,c.nondrag[f]);for(var d=0;d<c.drag.length;d++)xh(r,d,c.drag[d])}else if(t.picking)for(var h=0;h<c.length;h++)xh(r,h,c[h]);a.endFrame(),t.screen&&r.webglDebugShowAtlases&&(OP(r),MP(r)),r.data.canvasNeedsRedraw[r.NODE]=!1,r.data.canvasNeedsRedraw[r.DRAG]=!1}if(r.webglDebug){var g=performance.now(),p=!1,m=Math.ceil(g-n),y=a.getDebugInfo(),x=["".concat(i," elements"),"".concat(y.totalInstances," instances"),"".concat(y.batchCount," batches"),"".concat(y.totalAtlases," atlases"),"".concat(y.wrappedCount," wrapped textures"),"".concat(y.simpleCount," simple shapes")].join(", ");if(p)console.log("WebGL (".concat(t.name,") - time ").concat(m,"ms, ").concat(x));else{console.log("WebGL (".concat(t.name,") - frame time ").concat(m,"ms")),console.log("Totals:"),console.log("  ".concat(x)),console.log("Texture Atlases Used:");var b=y.atlasInfo,_=Fr(b),E;try{for(_.s();!(E=_.n()).done;){var C=E.value;console.log("  ".concat(C.type,": ").concat(C.keyCount," keys, ").concat(C.atlasCount," atlases"))}}catch(B){_.e(B)}finally{_.f()}console.log("")}}r.data.gc&&(console.log("Garbage Collect!"),r.data.gc=!1,a.gc())}var Ra={};Ra.drawPolygonPath=function(r,e,t,n,a,i){var o=n/2,u=a/2;r.beginPath&&r.beginPath(),r.moveTo(e+o*i[0],t+u*i[1]);for(var c=1;c<i.length/2;c++)r.lineTo(e+o*i[c*2],t+u*i[c*2+1]);r.closePath()};Ra.drawRoundPolygonPath=function(r,e,t,n,a,i,o){o.forEach(function(u){return _w(r,u)}),r.closePath()};Ra.drawRoundRectanglePath=function(r,e,t,n,a,i){var o=n/2,u=a/2,c=i==="auto"?ba(n,a):Math.min(i,u,o);r.beginPath&&r.beginPath(),r.moveTo(e,t-u),r.arcTo(e+o,t-u,e+o,t,c),r.arcTo(e+o,t+u,e,t+u,c),r.arcTo(e-o,t+u,e-o,t,c),r.arcTo(e-o,t-u,e,t-u,c),r.lineTo(e,t-u),r.closePath()};Ra.drawBottomRoundRectanglePath=function(r,e,t,n,a,i){var o=n/2,u=a/2,c=i==="auto"?ba(n,a):i;r.beginPath&&r.beginPath(),r.moveTo(e,t-u),r.lineTo(e+o,t-u),r.lineTo(e+o,t),r.arcTo(e+o,t+u,e,t+u,c),r.arcTo(e-o,t+u,e-o,t,c),r.lineTo(e-o,t-u),r.lineTo(e,t-u),r.closePath()};Ra.drawCutRectanglePath=function(r,e,t,n,a,i,o){var u=n/2,c=a/2,f=o==="auto"?ev():o;r.beginPath&&r.beginPath(),r.moveTo(e-u+f,t-c),r.lineTo(e+u-f,t-c),r.lineTo(e+u,t-c+f),r.lineTo(e+u,t+c-f),r.lineTo(e+u-f,t+c),r.lineTo(e-u+f,t+c),r.lineTo(e-u,t+c-f),r.lineTo(e-u,t-c+f),r.closePath()};Ra.drawBarrelPath=function(r,e,t,n,a){var i=n/2,o=a/2,u=e-i,c=e+i,f=t-o,d=t+o,h=Sh(n,a),g=h.widthOffset,p=h.heightOffset,m=h.ctrlPtOffsetPct*g;r.beginPath&&r.beginPath(),r.moveTo(u,f+p),r.lineTo(u,d-p),r.quadraticCurveTo(u+m,d,u+g,d),r.lineTo(c-g,d),r.quadraticCurveTo(c-m,d,c,d-p),r.lineTo(c,f+p),r.quadraticCurveTo(c-m,f,c-g,f),r.lineTo(u+g,f),r.quadraticCurveTo(u+m,f,u,f+p),r.closePath()};var z0=Math.sin(0),F0=Math.cos(0),Fh={},Uh={},Vw=Math.PI/40;for(var Ui=0*Math.PI;Ui<2*Math.PI;Ui+=Vw)Fh[Ui]=Math.sin(Ui),Uh[Ui]=Math.cos(Ui);Ra.drawEllipsePath=function(r,e,t,n,a){if(r.beginPath&&r.beginPath(),r.ellipse)r.ellipse(e,t,n/2,a/2,0,0,2*Math.PI);else for(var i,o,u=n/2,c=a/2,f=0*Math.PI;f<2*Math.PI;f+=Vw)i=e-u*Fh[f]*z0+u*Uh[f]*F0,o=t+c*Uh[f]*z0+c*Fh[f]*F0,f===0?r.moveTo(i,o):r.lineTo(i,o);r.closePath()};var Lo={};Lo.createBuffer=function(r,e){var t=document.createElement("canvas");return t.width=r,t.height=e,[t,t.getContext("2d")]};Lo.bufferCanvasImage=function(r){var e=this.cy,t=e.mutableElements(),n=t.boundingBox(),a=this.findContainerClientCoords(),i=r.full?Math.ceil(n.w):a[2],o=r.full?Math.ceil(n.h):a[3],u=Ue(r.maxWidth)||Ue(r.maxHeight),c=this.getPixelRatio(),f=1;if(r.scale!==void 0)i*=r.scale,o*=r.scale,f=r.scale;else if(u){var d=1/0,h=1/0;Ue(r.maxWidth)&&(d=f*r.maxWidth/i),Ue(r.maxHeight)&&(h=f*r.maxHeight/o),f=Math.min(d,h),i*=f,o*=f}u||(i*=c,o*=c,f*=c);var g=document.createElement("canvas");g.width=i,g.height=o,g.style.width=i+"px",g.style.height=o+"px";var p=g.getContext("2d");if(i>0&&o>0){p.clearRect(0,0,i,o),p.globalCompositeOperation="source-over";var m=this.getCachedZSortedEles();if(r.full)p.translate(-n.x1*f,-n.y1*f),p.scale(f,f),this.drawElements(p,m),p.scale(1/f,1/f),p.translate(n.x1*f,n.y1*f);else{var y=e.pan(),x={x:y.x*f,y:y.y*f};f*=e.zoom(),p.translate(x.x,x.y),p.scale(f,f),this.drawElements(p,m),p.scale(1/f,1/f),p.translate(-x.x,-x.y)}r.bg&&(p.globalCompositeOperation="destination-over",p.fillStyle=r.bg,p.rect(0,0,i,o),p.fill())}return g};function UP(r,e){for(var t=atob(r),n=new ArrayBuffer(t.length),a=new Uint8Array(n),i=0;i<t.length;i++)a[i]=t.charCodeAt(i);return new Blob([n],{type:e})}function U0(r){var e=r.indexOf(",");return r.substr(e+1)}function jw(r,e,t){var n=function(){return e.toDataURL(t,r.quality)};switch(r.output){case"blob-promise":return new es(function(a,i){try{e.toBlob(function(o){o!=null?a(o):i(new Error("`canvas.toBlob()` sent a null value in its callback"))},t,r.quality)}catch(o){i(o)}});case"blob":return UP(U0(n()),t);case"base64":return U0(n());case"base64uri":default:return n()}}Lo.png=function(r){return jw(r,this.bufferCanvasImage(r),"image/png")};Lo.jpg=function(r){return jw(r,this.bufferCanvasImage(r),"image/jpeg")};var qw={};qw.nodeShapeImpl=function(r,e,t,n,a,i,o,u){switch(r){case"ellipse":return this.drawEllipsePath(e,t,n,a,i);case"polygon":return this.drawPolygonPath(e,t,n,a,i,o);case"round-polygon":return this.drawRoundPolygonPath(e,t,n,a,i,o,u);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(e,t,n,a,i,u);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(e,t,n,a,i,o,u);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(e,t,n,a,i,u);case"barrel":return this.drawBarrelPath(e,t,n,a,i)}};var $P=Ww,ut=Ww.prototype;ut.CANVAS_LAYERS=3;ut.SELECT_BOX=0;ut.DRAG=1;ut.NODE=2;ut.WEBGL=3;ut.CANVAS_TYPES=["2d","2d","2d","webgl2"];ut.BUFFER_COUNT=3;ut.TEXTURE_BUFFER=0;ut.MOTIONBLUR_BUFFER_NODE=1;ut.MOTIONBLUR_BUFFER_DRAG=2;function Ww(r){var e=this,t=e.cy.window(),n=t.document;r.webgl&&(ut.CANVAS_LAYERS=e.CANVAS_LAYERS=4,console.log("webgl rendering enabled")),e.data={canvases:new Array(ut.CANVAS_LAYERS),contexts:new Array(ut.CANVAS_LAYERS),canvasNeedsRedraw:new Array(ut.CANVAS_LAYERS),bufferCanvases:new Array(ut.BUFFER_COUNT),bufferContexts:new Array(ut.CANVAS_LAYERS)};var a="-webkit-tap-highlight-color",i="rgba(0,0,0,0)";e.data.canvasContainer=n.createElement("div");var o=e.data.canvasContainer.style;e.data.canvasContainer.style[a]=i,o.position="relative",o.zIndex="0",o.overflow="hidden";var u=r.cy.container();u.appendChild(e.data.canvasContainer),u.style[a]=i;var c={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};N_()&&(c["-ms-touch-action"]="none",c["touch-action"]="none");for(var f=0;f<ut.CANVAS_LAYERS;f++){var d=e.data.canvases[f]=n.createElement("canvas"),h=ut.CANVAS_TYPES[f];e.data.contexts[f]=d.getContext(h),e.data.contexts[f]||At("Could not create canvas of type "+h),Object.keys(c).forEach(function(ge){d.style[ge]=c[ge]}),d.style.position="absolute",d.setAttribute("data-id","layer"+f),d.style.zIndex=String(ut.CANVAS_LAYERS-f),e.data.canvasContainer.appendChild(d),e.data.canvasNeedsRedraw[f]=!1}e.data.topCanvas=e.data.canvases[0],e.data.canvases[ut.NODE].setAttribute("data-id","layer"+ut.NODE+"-node"),e.data.canvases[ut.SELECT_BOX].setAttribute("data-id","layer"+ut.SELECT_BOX+"-selectbox"),e.data.canvases[ut.DRAG].setAttribute("data-id","layer"+ut.DRAG+"-drag"),e.data.canvases[ut.WEBGL]&&e.data.canvases[ut.WEBGL].setAttribute("data-id","layer"+ut.WEBGL+"-webgl");for(var f=0;f<ut.BUFFER_COUNT;f++)e.data.bufferCanvases[f]=n.createElement("canvas"),e.data.bufferContexts[f]=e.data.bufferCanvases[f].getContext("2d"),e.data.bufferCanvases[f].style.position="absolute",e.data.bufferCanvases[f].setAttribute("data-id","buffer"+f),e.data.bufferCanvases[f].style.zIndex=String(-f-1),e.data.bufferCanvases[f].style.visibility="hidden";e.pathsEnabled=!0;var g=Rr(),p=function(ce){return{x:(ce.x1+ce.x2)/2,y:(ce.y1+ce.y2)/2}},m=function(ce){return{x:-ce.w/2,y:-ce.h/2}},y=function(ce){var de=ce[0]._private,be=de.oldBackgroundTimestamp===de.backgroundTimestamp;return!be},x=function(ce){return ce[0]._private.nodeKey},b=function(ce){return ce[0]._private.labelStyleKey},_=function(ce){return ce[0]._private.sourceLabelStyleKey},E=function(ce){return ce[0]._private.targetLabelStyleKey},C=function(ce,de,be,Re,D){return e.drawElement(ce,de,be,!1,!1,D)},B=function(ce,de,be,Re,D){return e.drawElementText(ce,de,be,Re,"main",D)},N=function(ce,de,be,Re,D){return e.drawElementText(ce,de,be,Re,"source",D)},A=function(ce,de,be,Re,D){return e.drawElementText(ce,de,be,Re,"target",D)},z=function(ce){return ce.boundingBox(),ce[0]._private.bodyBounds},M=function(ce){return ce.boundingBox(),ce[0]._private.labelBounds.main||g},V=function(ce){return ce.boundingBox(),ce[0]._private.labelBounds.source||g},q=function(ce){return ce.boundingBox(),ce[0]._private.labelBounds.target||g},I=function(ce,de){return de},F=function(ce){return p(z(ce))},T=function(ce,de,be){var Re=ce?ce+"-":"";return{x:de.x+be.pstyle(Re+"text-margin-x").pfValue,y:de.y+be.pstyle(Re+"text-margin-y").pfValue}},G=function(ce,de,be){var Re=ce[0]._private.rscratch;return{x:Re[de],y:Re[be]}},Q=function(ce){return T("",G(ce,"labelX","labelY"),ce)},W=function(ce){return T("source",G(ce,"sourceLabelX","sourceLabelY"),ce)},X=function(ce){return T("target",G(ce,"targetLabelX","targetLabelY"),ce)},Z=function(ce){return m(z(ce))},te=function(ce){return m(V(ce))},L=function(ce){return m(q(ce))},U=function(ce){var de=M(ce),be=m(M(ce));if(ce.isNode()){switch(ce.pstyle("text-halign").value){case"left":be.x=-de.w-(de.leftPad||0);break;case"right":be.x=-(de.rightPad||0);break}switch(ce.pstyle("text-valign").value){case"top":be.y=-de.h-(de.topPad||0);break;case"bottom":be.y=-(de.botPad||0);break}}return be},oe=e.data.eleTxrCache=new io(e,{getKey:x,doesEleInvalidateKey:y,drawElement:C,getBoundingBox:z,getRotationPoint:F,getRotationOffset:Z,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),ie=e.data.lblTxrCache=new io(e,{getKey:b,drawElement:B,getBoundingBox:M,getRotationPoint:Q,getRotationOffset:U,isVisible:I}),ne=e.data.slbTxrCache=new io(e,{getKey:_,drawElement:N,getBoundingBox:V,getRotationPoint:W,getRotationOffset:te,isVisible:I}),we=e.data.tlbTxrCache=new io(e,{getKey:E,drawElement:A,getBoundingBox:q,getRotationPoint:X,getRotationOffset:L,isVisible:I}),Pe=e.data.lyrTxrCache=new Dw(e);e.onUpdateEleCalcs(function(ce,de){oe.invalidateElements(de),ie.invalidateElements(de),ne.invalidateElements(de),we.invalidateElements(de),Pe.invalidateElements(de);for(var be=0;be<de.length;be++){var Re=de[be]._private;Re.oldBackgroundTimestamp=Re.backgroundTimestamp}});var Ce=function(ce){for(var de=0;de<ce.length;de++)Pe.enqueueElementRefinement(ce[de].ele)};oe.onDequeue(Ce),ie.onDequeue(Ce),ne.onDequeue(Ce),we.onDequeue(Ce),r.webgl&&e.initWebgl(r,{getStyleKey:x,getLabelKey:b,getSourceLabelKey:_,getTargetLabelKey:E,drawElement:C,drawLabel:B,drawSourceLabel:N,drawTargetLabel:A,getElementBox:z,getLabelBox:M,getSourceLabelBox:V,getTargetLabelBox:q,getElementRotationPoint:F,getElementRotationOffset:Z,getLabelRotationPoint:Q,getSourceLabelRotationPoint:W,getTargetLabelRotationPoint:X,getLabelRotationOffset:U,getSourceLabelRotationOffset:te,getTargetLabelRotationOffset:L})}ut.redrawHint=function(r,e){var t=this;switch(r){case"eles":t.data.canvasNeedsRedraw[ut.NODE]=e;break;case"drag":t.data.canvasNeedsRedraw[ut.DRAG]=e;break;case"select":t.data.canvasNeedsRedraw[ut.SELECT_BOX]=e;break;case"gc":t.data.gc=!0;break}};var VP=typeof Path2D<"u";ut.path2dEnabled=function(r){if(r===void 0)return this.pathsEnabled;this.pathsEnabled=!!r};ut.usePaths=function(){return VP&&this.pathsEnabled};ut.setImgSmoothing=function(r,e){r.imageSmoothingEnabled!=null?r.imageSmoothingEnabled=e:(r.webkitImageSmoothingEnabled=e,r.mozImageSmoothingEnabled=e,r.msImageSmoothingEnabled=e)};ut.getImgSmoothing=function(r){return r.imageSmoothingEnabled!=null?r.imageSmoothingEnabled:r.webkitImageSmoothingEnabled||r.mozImageSmoothingEnabled||r.msImageSmoothingEnabled};ut.makeOffscreenCanvas=function(r,e){var t;if((typeof OffscreenCanvas>"u"?"undefined":Jt(OffscreenCanvas))!=="undefined")t=new OffscreenCanvas(r,e);else{var n=this.cy.window(),a=n.document;t=a.createElement("canvas"),t.width=r,t.height=e}return t};[Iw,Pn,jn,hv,ii,Pa,Br,zw,Ra,Lo,qw].forEach(function(r){et(ut,r)});var jP=[{name:"null",impl:ww},{name:"base",impl:Rw},{name:"canvas",impl:$P}],qP=[{type:"layout",extensions:pT},{type:"renderer",extensions:jP}],Gw={},Hw={};function Kw(r,e,t){var n=t,a=function(z){gt("Can not register `"+e+"` for `"+r+"` since `"+z+"` already exists in the prototype and can not be overridden")};if(r==="core"){if(wo.prototype[e])return a(e);wo.prototype[e]=t}else if(r==="collection"){if(fr.prototype[e])return a(e);fr.prototype[e]=t}else if(r==="layout"){for(var i=function(z){this.options=z,t.call(this,z),dt(this._private)||(this._private={}),this._private.cy=z.cy,this._private.listeners=[],this.createEmitter()},o=i.prototype=Object.create(t.prototype),u=[],c=0;c<u.length;c++){var f=u[c];o[f]=o[f]||function(){return this}}o.start&&!o.run?o.run=function(){return this.start(),this}:!o.start&&o.run&&(o.start=function(){return this.run(),this});var d=t.prototype.stop;o.stop=function(){var A=this.options;if(A&&A.animate){var z=this.animations;if(z)for(var M=0;M<z.length;M++)z[M].stop()}return d?d.call(this):this.emit("layoutstop"),this},o.destroy||(o.destroy=function(){return this}),o.cy=function(){return this._private.cy};var h=function(z){return z._private.cy},g={addEventFields:function(z,M){M.layout=z,M.cy=h(z),M.target=z},bubble:function(){return!0},parent:function(z){return h(z)}};et(o,{createEmitter:function(){return this._private.emitter=new $l(g,this),this},emitter:function(){return this._private.emitter},on:function(z,M){return this.emitter().on(z,M),this},one:function(z,M){return this.emitter().one(z,M),this},once:function(z,M){return this.emitter().one(z,M),this},removeListener:function(z,M){return this.emitter().removeListener(z,M),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(z,M){return this.emitter().emit(z,M),this}}),pt.eventAliasesOn(o),n=i}else if(r==="renderer"&&e!=="null"&&e!=="base"){var p=Xw("renderer","base"),m=p.prototype,y=t,x=t.prototype,b=function(){p.apply(this,arguments),y.apply(this,arguments)},_=b.prototype;for(var E in m){var C=m[E],B=x[E]!=null;if(B)return a(E);_[E]=C}for(var N in x)_[N]=x[N];m.clientFunctions.forEach(function(A){_[A]=_[A]||function(){At("Renderer does not implement `renderer."+A+"()` on its prototype")}}),n=b}else if(r==="__proto__"||r==="constructor"||r==="prototype")return At(r+" is an illegal type to be registered, possibly lead to prototype pollutions");return h1({map:Gw,keys:[r,e],value:n})}function Xw(r,e){return v1({map:Gw,keys:[r,e]})}function WP(r,e,t,n,a){return h1({map:Hw,keys:[r,e,t,n],value:a})}function GP(r,e,t,n){return v1({map:Hw,keys:[r,e,t,n]})}var $h=function(){if(arguments.length===2)return Xw.apply(null,arguments);if(arguments.length===3)return Kw.apply(null,arguments);if(arguments.length===4)return GP.apply(null,arguments);if(arguments.length===5)return WP.apply(null,arguments);At("Invalid extension access syntax")};wo.prototype.extension=$h;qP.forEach(function(r){r.extensions.forEach(function(e){Kw(r.type,e.name,e.impl)})});var Rl=function(){if(!(this instanceof Rl))return new Rl;this.length=0},ri=Rl.prototype;ri.instanceString=function(){return"stylesheet"};ri.selector=function(r){var e=this.length++;return this[e]={selector:r,properties:[]},this};ri.css=function(r,e){var t=this.length-1;if(Ye(r))this[t].properties.push({name:r,value:e});else if(dt(r))for(var n=r,a=Object.keys(n),i=0;i<a.length;i++){var o=a[i],u=n[o];if(u!=null){var c=ir.properties[o]||ir.properties[Al(o)];if(c!=null){var f=c.name,d=u;this[t].properties.push({name:f,value:d})}}}return this};ri.style=ri.css;ri.generateStyle=function(r){var e=new ir(r);return this.appendToStyle(e)};ri.appendToStyle=function(r){for(var e=0;e<this.length;e++){var t=this[e],n=t.selector,a=t.properties;r.selector(n);for(var i=0;i<a.length;i++){var o=a[i];r.css(o.name,o.value)}}return r};var HP="3.33.1",ni=function(e){if(e===void 0&&(e={}),dt(e))return new wo(e);if(Ye(e))return $h.apply($h,arguments)};ni.use=function(r){var e=Array.prototype.slice.call(arguments,1);return e.unshift(ni),r.apply(null,e),this};ni.warnings=function(r){return b1(r)};ni.version=HP;ni.stylesheet=ni.Stylesheet=Rl;async function KP(r){const e=await XP(3500);e!=null&&e.typesetPromise&&await e.typesetPromise([r])}async function XP(r){const e=Date.now();for(;Date.now()-e<r;){const t=window.MathJax;if(t!=null&&t.typesetPromise)return t;await new Promise(n=>setTimeout(n,80))}return window.MathJax}function ZP({latex:r,mode:e="auto"}){const t=Ut.useRef(null),[n,a]=Ut.useState(null),i=Ut.useMemo(()=>{const o=(r??"").trim();return o?e==="display"?/^\$\$[\s\S]*\$\$$/.test(o)||/^\\\[[\s\S]*\\\]$/.test(o)?o:`$$
${o}
$$`:o:""},[r,e]);return Ut.useEffect(()=>{const o=t.current;o&&(a(null),o.textContent=i,(async()=>{try{await KP(o)}catch(u){a(String((u==null?void 0:u.message)??u))}})())},[i]),Se.jsxs("div",{children:[Se.jsx("div",{ref:t,style:{padding:10,borderRadius:10,border:"1px solid rgba(255,255,255,0.12)",background:"rgba(255,255,255,0.04)",overflowX:"auto"}}),n?Se.jsxs("div",{className:"muted",style:{marginTop:6,color:"rgba(255,107,107,0.95)"},children:["MathJax ",n]}):null]})}async function YP(r){const e=`${r.baseUrl.replace(/\/$/,"")}/responses`,t={model:r.model,input:r.prompt,temperature:r.temperature,top_p:r.topP,max_output_tokens:r.maxTokens,response_format:{type:"json_object"}},n=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r.apiKey}`},body:JSON.stringify(t),signal:r.signal});if(!n.ok)throw new Error(`OpenAI HTTP ${n.status}: ${await JP(n)}`);const a=await n.json(),i=QP(a);return JSON.parse(i)}function QP(r){var t,n,a,i;if(typeof(r==null?void 0:r.output_text)=="string")return r.output_text;const e=(i=(a=(n=(t=r==null?void 0:r.output)==null?void 0:t[0])==null?void 0:n.content)==null?void 0:a[0])==null?void 0:i.text;return typeof e=="string"?e:JSON.stringify(r)}async function JP(r){try{return await r.text()}catch{return""}}async function eR(r){var o;const e=`${r.baseUrl.replace(/\/$/,"")}/v1/messages`,t={model:r.model,max_tokens:r.maxTokens,temperature:r.temperature,top_p:r.topP,messages:[{role:"user",content:r.prompt}]},n=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":r.apiKey,"anthropic-version":"2023-06-01"},body:JSON.stringify(t),signal:r.signal});if(!n.ok)throw new Error(`Anthropic HTTP ${n.status}: ${await tR(n)}`);const a=await n.json(),i=a==null?void 0:a.content;if(Array.isArray(i)){const u=(o=i.find(c=>(c==null?void 0:c.type)==="text"))==null?void 0:o.text;if(typeof u=="string")return u}return typeof(a==null?void 0:a.text)=="string"?a.text:JSON.stringify(a)}async function tR(r){try{return await r.text()}catch{return""}}async function rR(r){var u,c,f,d,h;const e=r.model.startsWith("models/")?r.model:`models/${r.model}`,t=`${r.baseUrl.replace(/\/$/,"")}/v1beta/${e}:generateContent?key=${encodeURIComponent(r.apiKey)}`,n={contents:[{role:"user",parts:[{text:r.prompt}]}],generationConfig:{temperature:r.temperature,topP:r.topP,maxOutputTokens:r.maxTokens,responseMimeType:"application/json"}},a=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n),signal:r.signal});if(!a.ok)throw new Error(`Gemini HTTP ${a.status}: ${await nR(a)}`);const i=await a.json(),o=(h=(d=(f=(c=(u=i==null?void 0:i.candidates)==null?void 0:u[0])==null?void 0:c.content)==null?void 0:f.parts)==null?void 0:d[0])==null?void 0:h.text;return typeof o=="string"?o:JSON.stringify(i)}async function nR(r){try{return await r.text()}catch{return""}}async function aR(r){if(r.protocol==="openai")return await YP(r);const e=r.protocol==="anthropic"?await eR(r):await rR(r);return JSON.parse(e)}async function $0(r){const e=`
 MathJax v3 LaTeX  MathJax v3  LaTeX****


-  \\begin{aligned} 
- 
-  JSON{"content":"..."} markdown

 LaTeX
${r.original}
`.trim(),t=await aR({protocol:r.llm.protocol,baseUrl:r.llm.baseUrl,apiKey:r.llm.apiKey,model:r.llm.model,temperature:0,topP:1,maxTokens:Math.max(256,Math.floor(r.llm.maxTokens||2e3)),prompt:e,signal:r.signal}),n=typeof(t==null?void 0:t.content)=="string"?t.content:null;if(!n)throw new Error("LLM  {content:string}");return n}function iR({elements:r,apiRef:e}){const t=Ut.useRef(null),n=Ut.useRef(null),[a,i]=Ut.useState(null),[o,u]=Ut.useState(!1),c=tt(p=>p.assets),f=tt(p=>p.graph),d=tt(p=>p.llm),h=a!=null&&a.id?f.nodes.find(p=>p.id===a.id):null;a!=null&&a.source&&(a!=null&&a.target);const g=Ut.useMemo(()=>[{selector:"node",style:{"background-color":"#70a4ff","border-color":"rgba(255,255,255,0.25)","border-width":1,color:"rgba(255,255,255,0.92)",label:"data(label)","font-size":10,"text-wrap":"wrap","text-max-width":180,"text-outline-width":2,"text-outline-color":"rgba(0,0,0,0.35)","text-valign":"center","text-halign":"center",width:"label",padding:"10px"}},{selector:'node[type="Definition"]',style:{"background-color":"#38d39f"}},{selector:'node[type="Theorem"]',style:{"background-color":"#ffb86b"}},{selector:'node[type="Lemma"]',style:{"background-color":"#ffd86b"}},{selector:'node[type="Formula"]',style:{"background-color":"#b970ff"}},{selector:'node[type="Example"]',style:{"background-color":"#70ffd1"}},{selector:'node[type="Exercise"]',style:{"background-color":"#ff70d1"}},{selector:"edge",style:{width:2,"line-color":"rgba(255,255,255,0.35)","target-arrow-color":"rgba(255,255,255,0.35)","target-arrow-shape":"triangle","curve-style":"bezier",label:"data(label)",color:"rgba(255,255,255,0.7)","font-size":9,"text-outline-width":2,"text-outline-color":"rgba(0,0,0,0.35)","text-rotation":"autorotate"}},{selector:":selected",style:{"border-width":3,"border-color":"rgba(255,255,255,0.7)","line-color":"#70a4ff","target-arrow-color":"#70a4ff"}}],[]);return Ut.useEffect(()=>{if(!t.current||n.current)return;const p=ni({container:t.current,elements:r,style:g,layout:{name:"cose",animate:!1,fit:!0,padding:30},wheelSensitivity:.2});return p.on("select","node,edge",m=>{i(m.target.data())}),p.on("unselect","node,edge",()=>{i(null)}),n.current=p,e&&(e.current={fit:()=>p.fit(void 0,40),center:()=>p.center()}),()=>{p.destroy(),n.current=null}},[e,r,g]),Ut.useEffect(()=>{const p=n.current;p&&(p.batch(()=>{p.elements().remove(),p.add(r)}),p.layout({name:"cose",animate:!1,fit:!0,padding:30}).run())},[r]),Se.jsxs("div",{style:{height:"100%",display:"grid",gridTemplateColumns:"1fr 360px"},children:[Se.jsx("div",{className:"graph",ref:t}),Se.jsxs("div",{style:{padding:12,borderLeft:"1px solid rgba(255,255,255,0.12)",overflow:"auto"},children:[Se.jsxs("div",{className:"card",style:{marginTop:0},children:[Se.jsx("div",{className:"h1",children:""}),a?Se.jsxs(Se.Fragment,{children:[Se.jsx("div",{className:"muted mono",style:{marginTop:6},children:a.id}),"type"in a?Se.jsxs("div",{className:"muted",style:{marginTop:6},children:[Se.jsx("b",{children:"type"}),": ",Se.jsx("span",{className:"mono",children:(h==null?void 0:h.type)??a.type})]}):null,"title"in a?Se.jsxs("div",{className:"muted",style:{marginTop:6},children:[Se.jsx("b",{children:"title"}),": ",(h==null?void 0:h.title)??a.title]}):null,h!=null&&h.content?Se.jsxs(Se.Fragment,{children:[Se.jsx("div",{className:"label",children:"MathJax "}),Se.jsx(ZP,{latex:String(h.content),mode:h.type==="Formula"?"display":"auto"}),Se.jsxs("div",{className:"row",style:{marginTop:10},children:[Se.jsx("button",{className:"btn ok",disabled:o||!d.enabled||!d.apiKey.trim(),onClick:async()=>{var m;const p=f.nodes.find(y=>y.id===a.id);if(p!=null&&p.content){u(!0);try{const y=p.content,x=await $0({llm:d,original:y});tt.getState().updateNode(p.id,{content:x,meta:{...p.meta??{},originalContent:((m=p.meta)==null?void 0:m.originalContent)??y,mathjaxFixed:!0}}),tt.getState().setInfo("MathJax ")}catch(y){tt.getState().setError(String((y==null?void 0:y.message)??y))}finally{u(!1)}}},children:o?"...":"MathJax  / LLM"}),Se.jsx("button",{className:"btn",disabled:o,onClick:()=>{var y;const p=f.nodes.find(x=>x.id===a.id),m=(y=p==null?void 0:p.meta)==null?void 0:y.originalContent;p&&typeof m=="string"&&(tt.getState().updateNode(p.id,{content:m,meta:{...p.meta??{},mathjaxFixed:!1}}),tt.getState().setInfo(" LaTeX"))},children:""})]}),Se.jsx("div",{className:"label",children:" contentLaTeX"}),Se.jsx("textarea",{className:"input mono",value:h.content,readOnly:!0})]}):null,"evidence"in a&&a.evidence?Se.jsxs(Se.Fragment,{children:[Se.jsx("div",{className:"label",children:"evidence"}),Se.jsx("textarea",{className:"input mono",value:a.evidence,readOnly:!0})]}):null,"image"in a&&a.image&&typeof a.image=="string"&&c[a.image]?Se.jsxs(Se.Fragment,{children:[Se.jsx("div",{className:"label",children:"image"}),Se.jsx("img",{src:c[a.image],alt:a.image,style:{width:"100%",borderRadius:10,border:"1px solid rgba(255,255,255,0.12)"}})]}):null]}):Se.jsx("div",{className:"muted",style:{marginTop:6},children:"/"})]}),Se.jsxs("div",{className:"card",children:[Se.jsx("div",{className:"h1",children:"MathJax LLM"}),Se.jsx("div",{className:"muted",children:" LaTeX  LLM  content meta  originalContent"}),Se.jsx("div",{className:"row",style:{marginTop:10},children:Se.jsx("button",{className:"btn ok",disabled:o||!d.enabled||!d.apiKey.trim(),onClick:async()=>{u(!0);try{const p=tt.getState().graph.nodes.filter(_=>typeof _.content=="string"&&_.content.trim().length>0),m=Math.max(1,Math.min(32,Math.floor(d.parallelism||1)));let y=0,x=0;const b=async()=>{var _;for(;y<p.length;){const E=y++,C=p[E],B=C.content??"";try{const N=await $0({llm:d,original:B});tt.getState().updateNode(C.id,{content:N,meta:{...C.meta??{},originalContent:((_=C.meta)==null?void 0:_.originalContent)??B,mathjaxFixed:!0}})}catch{}finally{x++,x%5===0&&tt.getState().setInfo(`MathJax ${x}/${p.length}`)}}};await Promise.all(Array.from({length:m},()=>b())),tt.getState().setInfo(`MathJax ${p.length} `)}catch(p){tt.getState().setError(String((p==null?void 0:p.message)??p))}finally{u(!1)}},children:o?"...":""})})]})]})]})}function sR(r){const e=r.nodes.map(n=>({data:{id:n.id,label:`${n.type}: ${n.title}`,type:n.type,title:n.title,content:n.content??"",...n.meta}})),t=r.edges.map((n,a)=>({data:{id:n.id??`${n.source}-${n.type}-${n.target}-${a}`,source:n.source,target:n.target,label:n.type,type:n.type,evidence:n.evidence??""}}));return[...e,...t]}function oR(){const r=tt(o=>o.graph),e=tt(o=>o.processing),t=tt(o=>o.lastError),n=tt(o=>o.lastInfo),a=Ut.useMemo(()=>sR(r),[r]),i=Ut.useRef(null);return Se.jsxs("div",{className:"app",children:[Se.jsxs("aside",{className:"sidebar",children:[Se.jsxs("div",{className:"card",children:[Se.jsx("div",{className:"h1",children:"LaTeX   / Cloudflare Pages"}),Se.jsx("div",{className:"muted",children:" LaTeX/zip/ GPT-5  LLM  API"})]}),Se.jsx($2,{}),Se.jsx(V2,{}),Se.jsx(m_,{onAfterImport:()=>{var o;return(o=i.current)==null?void 0:o.fit()}})]}),Se.jsxs("main",{className:"main",children:[Se.jsxs("div",{className:"topbar",children:[Se.jsxs("div",{className:"statusbar",children:[Se.jsxs("span",{className:`pill ${e.status==="idle"?"":"ok"}`,children:[": ",Se.jsx("span",{className:"mono",children:e.status})]}),Se.jsxs("span",{className:"pill",children:[": ",Se.jsx("span",{className:"mono",children:r.nodes.length})]}),Se.jsxs("span",{className:"pill",children:[": ",Se.jsx("span",{className:"mono",children:r.edges.length})]}),e.status!=="idle"?Se.jsxs("span",{className:"pill ok",children:[": ",Se.jsx("span",{className:"mono",children:e.doneChunks})," /"," ",Se.jsx("span",{className:"mono",children:e.totalChunks})]}):null,t?Se.jsxs("span",{className:"pill bad",children:[": ",Se.jsx("span",{className:"mono",children:t})]}):n?Se.jsxs("span",{className:"pill ok",children:[": ",Se.jsx("span",{className:"mono",children:n})]}):null]}),Se.jsxs("div",{className:"row",children:[Se.jsx("button",{className:"btn",onClick:()=>{var o;return(o=i.current)==null?void 0:o.fit()},children:"Fit"}),Se.jsx("button",{className:"btn",onClick:()=>{var o;return(o=i.current)==null?void 0:o.center()},children:"Center"}),Se.jsx("button",{className:"btn danger",onClick:()=>tt.getState().resetAll(),children:""})]})]}),Se.jsx("div",{className:"graphWrap",children:Se.jsx(iR,{elements:a,apiRef:i})})]})]})}Ub.createRoot(document.getElementById("root")).render(Se.jsx(V0.StrictMode,{children:Se.jsx(oR,{})}));
